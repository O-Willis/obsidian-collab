(()=>{var e={9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=l(e),a=o[0],s=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],a=16383,s=0,l=i-r;s<l;s+=a)o.push(c(e,s,s+a>l?l:s+a));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,i){for(var r,o,a=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},932:e=>{"use strict";e.exports=function(e,t){var n,i=String(e),r=0;if("string"!=typeof t||1!==t.length)throw new Error("Expected character");n=i.indexOf(t);for(;-1!==n;)r++,n=i.indexOf(t,n+1);return r}},5848:e=>{"use strict";e.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},6588:e=>{"use strict";e.exports=JSON.parse('{"AElig":"Æ","AMP":"&","Aacute":"Á","Acirc":"Â","Agrave":"À","Aring":"Å","Atilde":"Ã","Auml":"Ä","COPY":"©","Ccedil":"Ç","ETH":"Ð","Eacute":"É","Ecirc":"Ê","Egrave":"È","Euml":"Ë","GT":">","Iacute":"Í","Icirc":"Î","Igrave":"Ì","Iuml":"Ï","LT":"<","Ntilde":"Ñ","Oacute":"Ó","Ocirc":"Ô","Ograve":"Ò","Oslash":"Ø","Otilde":"Õ","Ouml":"Ö","QUOT":"\\"","REG":"®","THORN":"Þ","Uacute":"Ú","Ucirc":"Û","Ugrave":"Ù","Uuml":"Ü","Yacute":"Ý","aacute":"á","acirc":"â","acute":"´","aelig":"æ","agrave":"à","amp":"&","aring":"å","atilde":"ã","auml":"ä","brvbar":"¦","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","curren":"¤","deg":"°","divide":"÷","eacute":"é","ecirc":"ê","egrave":"è","eth":"ð","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","iacute":"í","icirc":"î","iexcl":"¡","igrave":"ì","iquest":"¿","iuml":"ï","laquo":"«","lt":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","ntilde":"ñ","oacute":"ó","ocirc":"ô","ograve":"ò","ordf":"ª","ordm":"º","oslash":"ø","otilde":"õ","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","raquo":"»","reg":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","thorn":"þ","times":"×","uacute":"ú","ucirc":"û","ugrave":"ù","uml":"¨","uuml":"ü","yacute":"ý","yen":"¥","yuml":"ÿ"}')},3407:e=>{"use strict";e.exports=JSON.parse('{"AEli":"Æ","AElig":"Æ","AM":"&","AMP":"&","Aacut":"Á","Aacute":"Á","Abreve":"Ă","Acir":"Â","Acirc":"Â","Acy":"А","Afr":"𝔄","Agrav":"À","Agrave":"À","Alpha":"Α","Amacr":"Ā","And":"⩓","Aogon":"Ą","Aopf":"𝔸","ApplyFunction":"⁡","Arin":"Å","Aring":"Å","Ascr":"𝒜","Assign":"≔","Atild":"Ã","Atilde":"Ã","Aum":"Ä","Auml":"Ä","Backslash":"∖","Barv":"⫧","Barwed":"⌆","Bcy":"Б","Because":"∵","Bernoullis":"ℬ","Beta":"Β","Bfr":"𝔅","Bopf":"𝔹","Breve":"˘","Bscr":"ℬ","Bumpeq":"≎","CHcy":"Ч","COP":"©","COPY":"©","Cacute":"Ć","Cap":"⋒","CapitalDifferentialD":"ⅅ","Cayleys":"ℭ","Ccaron":"Č","Ccedi":"Ç","Ccedil":"Ç","Ccirc":"Ĉ","Cconint":"∰","Cdot":"Ċ","Cedilla":"¸","CenterDot":"·","Cfr":"ℭ","Chi":"Χ","CircleDot":"⊙","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","Colon":"∷","Colone":"⩴","Congruent":"≡","Conint":"∯","ContourIntegral":"∮","Copf":"ℂ","Coproduct":"∐","CounterClockwiseContourIntegral":"∳","Cross":"⨯","Cscr":"𝒞","Cup":"⋓","CupCap":"≍","DD":"ⅅ","DDotrahd":"⤑","DJcy":"Ђ","DScy":"Ѕ","DZcy":"Џ","Dagger":"‡","Darr":"↡","Dashv":"⫤","Dcaron":"Ď","Dcy":"Д","Del":"∇","Delta":"Δ","Dfr":"𝔇","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","Diamond":"⋄","DifferentialD":"ⅆ","Dopf":"𝔻","Dot":"¨","DotDot":"⃜","DotEqual":"≐","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrow":"↓","DownArrowBar":"⤓","DownArrowUpArrow":"⇵","DownBreve":"̑","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVector":"↽","DownLeftVectorBar":"⥖","DownRightTeeVector":"⥟","DownRightVector":"⇁","DownRightVectorBar":"⥗","DownTee":"⊤","DownTeeArrow":"↧","Downarrow":"⇓","Dscr":"𝒟","Dstrok":"Đ","ENG":"Ŋ","ET":"Ð","ETH":"Ð","Eacut":"É","Eacute":"É","Ecaron":"Ě","Ecir":"Ê","Ecirc":"Ê","Ecy":"Э","Edot":"Ė","Efr":"𝔈","Egrav":"È","Egrave":"È","Element":"∈","Emacr":"Ē","EmptySmallSquare":"◻","EmptyVerySmallSquare":"▫","Eogon":"Ę","Eopf":"𝔼","Epsilon":"Ε","Equal":"⩵","EqualTilde":"≂","Equilibrium":"⇌","Escr":"ℰ","Esim":"⩳","Eta":"Η","Eum":"Ë","Euml":"Ë","Exists":"∃","ExponentialE":"ⅇ","Fcy":"Ф","Ffr":"𝔉","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","Fopf":"𝔽","ForAll":"∀","Fouriertrf":"ℱ","Fscr":"ℱ","GJcy":"Ѓ","G":">","GT":">","Gamma":"Γ","Gammad":"Ϝ","Gbreve":"Ğ","Gcedil":"Ģ","Gcirc":"Ĝ","Gcy":"Г","Gdot":"Ġ","Gfr":"𝔊","Gg":"⋙","Gopf":"𝔾","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","Gt":"≫","HARDcy":"Ъ","Hacek":"ˇ","Hat":"^","Hcirc":"Ĥ","Hfr":"ℌ","HilbertSpace":"ℋ","Hopf":"ℍ","HorizontalLine":"─","Hscr":"ℋ","Hstrok":"Ħ","HumpDownHump":"≎","HumpEqual":"≏","IEcy":"Е","IJlig":"Ĳ","IOcy":"Ё","Iacut":"Í","Iacute":"Í","Icir":"Î","Icirc":"Î","Icy":"И","Idot":"İ","Ifr":"ℑ","Igrav":"Ì","Igrave":"Ì","Im":"ℑ","Imacr":"Ī","ImaginaryI":"ⅈ","Implies":"⇒","Int":"∬","Integral":"∫","Intersection":"⋂","InvisibleComma":"⁣","InvisibleTimes":"⁢","Iogon":"Į","Iopf":"𝕀","Iota":"Ι","Iscr":"ℐ","Itilde":"Ĩ","Iukcy":"І","Ium":"Ï","Iuml":"Ï","Jcirc":"Ĵ","Jcy":"Й","Jfr":"𝔍","Jopf":"𝕁","Jscr":"𝒥","Jsercy":"Ј","Jukcy":"Є","KHcy":"Х","KJcy":"Ќ","Kappa":"Κ","Kcedil":"Ķ","Kcy":"К","Kfr":"𝔎","Kopf":"𝕂","Kscr":"𝒦","LJcy":"Љ","L":"<","LT":"<","Lacute":"Ĺ","Lambda":"Λ","Lang":"⟪","Laplacetrf":"ℒ","Larr":"↞","Lcaron":"Ľ","Lcedil":"Ļ","Lcy":"Л","LeftAngleBracket":"⟨","LeftArrow":"←","LeftArrowBar":"⇤","LeftArrowRightArrow":"⇆","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVector":"⇃","LeftDownVectorBar":"⥙","LeftFloor":"⌊","LeftRightArrow":"↔","LeftRightVector":"⥎","LeftTee":"⊣","LeftTeeArrow":"↤","LeftTeeVector":"⥚","LeftTriangle":"⊲","LeftTriangleBar":"⧏","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVector":"↿","LeftUpVectorBar":"⥘","LeftVector":"↼","LeftVectorBar":"⥒","Leftarrow":"⇐","Leftrightarrow":"⇔","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","LessLess":"⪡","LessSlantEqual":"⩽","LessTilde":"≲","Lfr":"𝔏","Ll":"⋘","Lleftarrow":"⇚","Lmidot":"Ŀ","LongLeftArrow":"⟵","LongLeftRightArrow":"⟷","LongRightArrow":"⟶","Longleftarrow":"⟸","Longleftrightarrow":"⟺","Longrightarrow":"⟹","Lopf":"𝕃","LowerLeftArrow":"↙","LowerRightArrow":"↘","Lscr":"ℒ","Lsh":"↰","Lstrok":"Ł","Lt":"≪","Map":"⤅","Mcy":"М","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","MinusPlus":"∓","Mopf":"𝕄","Mscr":"ℳ","Mu":"Μ","NJcy":"Њ","Nacute":"Ń","Ncaron":"Ň","Ncedil":"Ņ","Ncy":"Н","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","Nfr":"𝔑","NoBreak":"⁠","NonBreakingSpace":" ","Nopf":"ℕ","Not":"⫬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","NotLeftTriangle":"⋪","NotLeftTriangleBar":"⧏̸","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangle":"⋫","NotRightTriangleBar":"⧐̸","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","Nscr":"𝒩","Ntild":"Ñ","Ntilde":"Ñ","Nu":"Ν","OElig":"Œ","Oacut":"Ó","Oacute":"Ó","Ocir":"Ô","Ocirc":"Ô","Ocy":"О","Odblac":"Ő","Ofr":"𝔒","Ograv":"Ò","Ograve":"Ò","Omacr":"Ō","Omega":"Ω","Omicron":"Ο","Oopf":"𝕆","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","Or":"⩔","Oscr":"𝒪","Oslas":"Ø","Oslash":"Ø","Otild":"Õ","Otilde":"Õ","Otimes":"⨷","Oum":"Ö","Ouml":"Ö","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","PartialD":"∂","Pcy":"П","Pfr":"𝔓","Phi":"Φ","Pi":"Π","PlusMinus":"±","Poincareplane":"ℌ","Popf":"ℙ","Pr":"⪻","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","Prime":"″","Product":"∏","Proportion":"∷","Proportional":"∝","Pscr":"𝒫","Psi":"Ψ","QUO":"\\"","QUOT":"\\"","Qfr":"𝔔","Qopf":"ℚ","Qscr":"𝒬","RBarr":"⤐","RE":"®","REG":"®","Racute":"Ŕ","Rang":"⟫","Rarr":"↠","Rarrtl":"⤖","Rcaron":"Ř","Rcedil":"Ŗ","Rcy":"Р","Re":"ℜ","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","Rfr":"ℜ","Rho":"Ρ","RightAngleBracket":"⟩","RightArrow":"→","RightArrowBar":"⇥","RightArrowLeftArrow":"⇄","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVector":"⇂","RightDownVectorBar":"⥕","RightFloor":"⌋","RightTee":"⊢","RightTeeArrow":"↦","RightTeeVector":"⥛","RightTriangle":"⊳","RightTriangleBar":"⧐","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVector":"↾","RightUpVectorBar":"⥔","RightVector":"⇀","RightVectorBar":"⥓","Rightarrow":"⇒","Ropf":"ℝ","RoundImplies":"⥰","Rrightarrow":"⇛","Rscr":"ℛ","Rsh":"↱","RuleDelayed":"⧴","SHCHcy":"Щ","SHcy":"Ш","SOFTcy":"Ь","Sacute":"Ś","Sc":"⪼","Scaron":"Š","Scedil":"Ş","Scirc":"Ŝ","Scy":"С","Sfr":"𝔖","ShortDownArrow":"↓","ShortLeftArrow":"←","ShortRightArrow":"→","ShortUpArrow":"↑","Sigma":"Σ","SmallCircle":"∘","Sopf":"𝕊","Sqrt":"√","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","Sscr":"𝒮","Star":"⋆","Sub":"⋐","Subset":"⋐","SubsetEqual":"⊆","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","SuchThat":"∋","Sum":"∑","Sup":"⋑","Superset":"⊃","SupersetEqual":"⊇","Supset":"⋑","THOR":"Þ","THORN":"Þ","TRADE":"™","TSHcy":"Ћ","TScy":"Ц","Tab":"\\t","Tau":"Τ","Tcaron":"Ť","Tcedil":"Ţ","Tcy":"Т","Tfr":"𝔗","Therefore":"∴","Theta":"Θ","ThickSpace":"  ","ThinSpace":" ","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","Topf":"𝕋","TripleDot":"⃛","Tscr":"𝒯","Tstrok":"Ŧ","Uacut":"Ú","Uacute":"Ú","Uarr":"↟","Uarrocir":"⥉","Ubrcy":"Ў","Ubreve":"Ŭ","Ucir":"Û","Ucirc":"Û","Ucy":"У","Udblac":"Ű","Ufr":"𝔘","Ugrav":"Ù","Ugrave":"Ù","Umacr":"Ū","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","Uopf":"𝕌","UpArrow":"↑","UpArrowBar":"⤒","UpArrowDownArrow":"⇅","UpDownArrow":"↕","UpEquilibrium":"⥮","UpTee":"⊥","UpTeeArrow":"↥","Uparrow":"⇑","Updownarrow":"⇕","UpperLeftArrow":"↖","UpperRightArrow":"↗","Upsi":"ϒ","Upsilon":"Υ","Uring":"Ů","Uscr":"𝒰","Utilde":"Ũ","Uum":"Ü","Uuml":"Ü","VDash":"⊫","Vbar":"⫫","Vcy":"В","Vdash":"⊩","Vdashl":"⫦","Vee":"⋁","Verbar":"‖","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","Vopf":"𝕍","Vscr":"𝒱","Vvdash":"⊪","Wcirc":"Ŵ","Wedge":"⋀","Wfr":"𝔚","Wopf":"𝕎","Wscr":"𝒲","Xfr":"𝔛","Xi":"Ξ","Xopf":"𝕏","Xscr":"𝒳","YAcy":"Я","YIcy":"Ї","YUcy":"Ю","Yacut":"Ý","Yacute":"Ý","Ycirc":"Ŷ","Ycy":"Ы","Yfr":"𝔜","Yopf":"𝕐","Yscr":"𝒴","Yuml":"Ÿ","ZHcy":"Ж","Zacute":"Ź","Zcaron":"Ž","Zcy":"З","Zdot":"Ż","ZeroWidthSpace":"​","Zeta":"Ζ","Zfr":"ℨ","Zopf":"ℤ","Zscr":"𝒵","aacut":"á","aacute":"á","abreve":"ă","ac":"∾","acE":"∾̳","acd":"∿","acir":"â","acirc":"â","acut":"´","acute":"´","acy":"а","aeli":"æ","aelig":"æ","af":"⁡","afr":"𝔞","agrav":"à","agrave":"à","alefsym":"ℵ","aleph":"ℵ","alpha":"α","amacr":"ā","amalg":"⨿","am":"&","amp":"&","and":"∧","andand":"⩕","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsd":"∡","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","aogon":"ą","aopf":"𝕒","ap":"≈","apE":"⩰","apacir":"⩯","ape":"≊","apid":"≋","apos":"\'","approx":"≈","approxeq":"≊","arin":"å","aring":"å","ascr":"𝒶","ast":"*","asymp":"≈","asympeq":"≍","atild":"ã","atilde":"ã","aum":"ä","auml":"ä","awconint":"∳","awint":"⨑","bNot":"⫭","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","barvee":"⊽","barwed":"⌅","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","beta":"β","beth":"ℶ","between":"≬","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bnot":"⌐","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxDL":"╗","boxDR":"╔","boxDl":"╖","boxDr":"╓","boxH":"═","boxHD":"╦","boxHU":"╩","boxHd":"╤","boxHu":"╧","boxUL":"╝","boxUR":"╚","boxUl":"╜","boxUr":"╙","boxV":"║","boxVH":"╬","boxVL":"╣","boxVR":"╠","boxVh":"╫","boxVl":"╢","boxVr":"╟","boxbox":"⧉","boxdL":"╕","boxdR":"╒","boxdl":"┐","boxdr":"┌","boxh":"─","boxhD":"╥","boxhU":"╨","boxhd":"┬","boxhu":"┴","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxuL":"╛","boxuR":"╘","boxul":"┘","boxur":"└","boxv":"│","boxvH":"╪","boxvL":"╡","boxvR":"╞","boxvh":"┼","boxvl":"┤","boxvr":"├","bprime":"‵","breve":"˘","brvba":"¦","brvbar":"¦","bscr":"𝒷","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsol":"\\\\","bsolb":"⧅","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","bumpeq":"≏","cacute":"ć","cap":"∩","capand":"⩄","capbrcup":"⩉","capcap":"⩋","capcup":"⩇","capdot":"⩀","caps":"∩︀","caret":"⁁","caron":"ˇ","ccaps":"⩍","ccaron":"č","ccedi":"ç","ccedil":"ç","ccirc":"ĉ","ccups":"⩌","ccupssm":"⩐","cdot":"ċ","cedi":"¸","cedil":"¸","cemptyv":"⦲","cen":"¢","cent":"¢","centerdot":"·","cfr":"𝔠","chcy":"ч","check":"✓","checkmark":"✓","chi":"χ","cir":"○","cirE":"⧃","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledR":"®","circledS":"Ⓢ","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","clubs":"♣","clubsuit":"♣","colon":":","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","conint":"∮","copf":"𝕔","coprod":"∐","cop":"©","copy":"©","copysr":"℗","crarr":"↵","cross":"✗","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cup":"∪","cupbrcap":"⩈","cupcap":"⩆","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curre":"¤","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dArr":"⇓","dHar":"⥥","dagger":"†","daleth":"ℸ","darr":"↓","dash":"‐","dashv":"⊣","dbkarow":"⤏","dblac":"˝","dcaron":"ď","dcy":"д","dd":"ⅆ","ddagger":"‡","ddarr":"⇊","ddotseq":"⩷","de":"°","deg":"°","delta":"δ","demptyv":"⦱","dfisht":"⥿","dfr":"𝔡","dharl":"⇃","dharr":"⇂","diam":"⋄","diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","digamma":"ϝ","disin":"⋲","div":"÷","divid":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","dopf":"𝕕","dot":"˙","doteq":"≐","doteqdot":"≑","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","downarrow":"↓","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","dscr":"𝒹","dscy":"ѕ","dsol":"⧶","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","dzcy":"џ","dzigrarr":"⟿","eDDot":"⩷","eDot":"≑","eacut":"é","eacute":"é","easter":"⩮","ecaron":"ě","ecir":"ê","ecirc":"ê","ecolon":"≕","ecy":"э","edot":"ė","ee":"ⅇ","efDot":"≒","efr":"𝔢","eg":"⪚","egrav":"è","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","emacr":"ē","empty":"∅","emptyset":"∅","emptyv":"∅","emsp13":" ","emsp14":" ","emsp":" ","eng":"ŋ","ensp":" ","eogon":"ę","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","equals":"=","equest":"≟","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erDot":"≓","erarr":"⥱","escr":"ℯ","esdot":"≐","esim":"≂","eta":"η","et":"ð","eth":"ð","eum":"ë","euml":"ë","euro":"€","excl":"!","exist":"∃","expectation":"ℰ","exponentiale":"ⅇ","fallingdotseq":"≒","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","ffr":"𝔣","filig":"ﬁ","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","fopf":"𝕗","forall":"∀","fork":"⋔","forkv":"⫙","fpartint":"⨍","frac1":"¼","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac3":"¾","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","gE":"≧","gEl":"⪌","gacute":"ǵ","gamma":"γ","gammad":"ϝ","gap":"⪆","gbreve":"ğ","gcirc":"ĝ","gcy":"г","gdot":"ġ","ge":"≥","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","ges":"⩾","gescc":"⪩","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","gfr":"𝔤","gg":"≫","ggg":"⋙","gimel":"ℷ","gjcy":"ѓ","gl":"≷","glE":"⪒","gla":"⪥","glj":"⪤","gnE":"≩","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gneq":"⪈","gneqq":"≩","gnsim":"⋧","gopf":"𝕘","grave":"`","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","g":">","gt":">","gtcc":"⪧","gtcir":"⩺","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","hArr":"⇔","hairsp":" ","half":"½","hamilt":"ℋ","hardcy":"ъ","harr":"↔","harrcir":"⥈","harrw":"↭","hbar":"ℏ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","horbar":"―","hscr":"𝒽","hslash":"ℏ","hstrok":"ħ","hybull":"⁃","hyphen":"‐","iacut":"í","iacute":"í","ic":"⁣","icir":"î","icirc":"î","icy":"и","iecy":"е","iexc":"¡","iexcl":"¡","iff":"⇔","ifr":"𝔦","igrav":"ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","ijlig":"ĳ","imacr":"ī","image":"ℑ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","imof":"⊷","imped":"Ƶ","in":"∈","incare":"℅","infin":"∞","infintie":"⧝","inodot":"ı","int":"∫","intcal":"⊺","integers":"ℤ","intercal":"⊺","intlarhk":"⨗","intprod":"⨼","iocy":"ё","iogon":"į","iopf":"𝕚","iota":"ι","iprod":"⨼","iques":"¿","iquest":"¿","iscr":"𝒾","isin":"∈","isinE":"⋹","isindot":"⋵","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","itilde":"ĩ","iukcy":"і","ium":"ï","iuml":"ï","jcirc":"ĵ","jcy":"й","jfr":"𝔧","jmath":"ȷ","jopf":"𝕛","jscr":"𝒿","jsercy":"ј","jukcy":"є","kappa":"κ","kappav":"ϰ","kcedil":"ķ","kcy":"к","kfr":"𝔨","kgreen":"ĸ","khcy":"х","kjcy":"ќ","kopf":"𝕜","kscr":"𝓀","lAarr":"⇚","lArr":"⇐","lAtail":"⤛","lBarr":"⤎","lE":"≦","lEg":"⪋","lHar":"⥢","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","lambda":"λ","lang":"⟨","langd":"⦑","langle":"⟨","lap":"⪅","laqu":"«","laquo":"«","larr":"←","larrb":"⇤","larrbfs":"⤟","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","lat":"⪫","latail":"⤙","late":"⪭","lates":"⪭︀","lbarr":"⤌","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","lcaron":"ľ","lcedil":"ļ","lceil":"⌈","lcub":"{","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","leftarrow":"←","leftarrowtail":"↢","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","leftthreetimes":"⋋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","les":"⩽","lescc":"⪨","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","lessgtr":"≶","lesssim":"≲","lfisht":"⥼","lfloor":"⌊","lfr":"𝔩","lg":"≶","lgE":"⪑","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","ljcy":"љ","ll":"≪","llarr":"⇇","llcorner":"⌞","llhard":"⥫","lltri":"◺","lmidot":"ŀ","lmoust":"⎰","lmoustache":"⎰","lnE":"≨","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","longleftrightarrow":"⟷","longmapsto":"⟼","longrightarrow":"⟶","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","lstrok":"ł","l":"<","lt":"<","ltcc":"⪦","ltcir":"⩹","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltrPar":"⦖","ltri":"◃","ltrie":"⊴","ltrif":"◂","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","mDDot":"∺","mac":"¯","macr":"¯","male":"♂","malt":"✠","maltese":"✠","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","mcy":"м","mdash":"—","measuredangle":"∡","mfr":"𝔪","mho":"℧","micr":"µ","micro":"µ","mid":"∣","midast":"*","midcir":"⫰","middo":"·","middot":"·","minus":"−","minusb":"⊟","minusd":"∸","minusdu":"⨪","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","mopf":"𝕞","mp":"∓","mscr":"𝓂","mstpos":"∾","mu":"μ","multimap":"⊸","mumap":"⊸","nGg":"⋙̸","nGt":"≫⃒","nGtv":"≫̸","nLeftarrow":"⇍","nLeftrightarrow":"⇎","nLl":"⋘̸","nLt":"≪⃒","nLtv":"≪̸","nRightarrow":"⇏","nVDash":"⊯","nVdash":"⊮","nabla":"∇","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natur":"♮","natural":"♮","naturals":"ℕ","nbs":" ","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","ncaron":"ň","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","ncy":"н","ndash":"–","ne":"≠","neArr":"⇗","nearhk":"⤤","nearr":"↗","nearrow":"↗","nedot":"≐̸","nequiv":"≢","nesear":"⤨","nesim":"≂̸","nexist":"∄","nexists":"∄","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","ngsim":"≵","ngt":"≯","ngtr":"≯","nhArr":"⇎","nharr":"↮","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","njcy":"њ","nlArr":"⇍","nlE":"≦̸","nlarr":"↚","nldr":"‥","nle":"≰","nleftarrow":"↚","nleftrightarrow":"↮","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nlsim":"≴","nlt":"≮","nltri":"⋪","nltrie":"⋬","nmid":"∤","nopf":"𝕟","no":"¬","not":"¬","notin":"∉","notinE":"⋹̸","notindot":"⋵̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","npar":"∦","nparallel":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","npre":"⪯̸","nprec":"⊀","npreceq":"⪯̸","nrArr":"⇏","nrarr":"↛","nrarrc":"⤳̸","nrarrw":"↝̸","nrightarrow":"↛","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","ntild":"ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","nu":"ν","num":"#","numero":"№","numsp":" ","nvDash":"⊭","nvHarr":"⤄","nvap":"≍⃒","nvdash":"⊬","nvge":"≥⃒","nvgt":">⃒","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwArr":"⇖","nwarhk":"⤣","nwarr":"↖","nwarrow":"↖","nwnear":"⤧","oS":"Ⓢ","oacut":"ó","oacute":"ó","oast":"⊛","ocir":"ô","ocirc":"ô","ocy":"о","odash":"⊝","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","oelig":"œ","ofcir":"⦿","ofr":"𝔬","ogon":"˛","ograv":"ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","omacr":"ō","omega":"ω","omicron":"ο","omid":"⦶","ominus":"⊖","oopf":"𝕠","opar":"⦷","operp":"⦹","oplus":"⊕","or":"∨","orarr":"↻","ord":"º","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oscr":"ℴ","oslas":"ø","oslash":"ø","osol":"⊘","otild":"õ","otilde":"õ","otimes":"⊗","otimesas":"⨶","oum":"ö","ouml":"ö","ovbar":"⌽","par":"¶","para":"¶","parallel":"∥","parsim":"⫳","parsl":"⫽","part":"∂","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","pfr":"𝔭","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plus":"+","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plusdo":"∔","plusdu":"⨥","pluse":"⩲","plusm":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","pointint":"⨕","popf":"𝕡","poun":"£","pound":"£","pr":"≺","prE":"⪳","prap":"⪷","prcue":"≼","pre":"⪯","prec":"≺","precapprox":"⪷","preccurlyeq":"≼","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","precsim":"≾","prime":"′","primes":"ℙ","prnE":"⪵","prnap":"⪹","prnsim":"⋨","prod":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","propto":"∝","prsim":"≾","prurel":"⊰","pscr":"𝓅","psi":"ψ","puncsp":" ","qfr":"𝔮","qint":"⨌","qopf":"𝕢","qprime":"⁗","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quo":"\\"","quot":"\\"","rAarr":"⇛","rArr":"⇒","rAtail":"⤜","rBarr":"⤏","rHar":"⥤","race":"∽̱","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","rangd":"⦒","range":"⦥","rangle":"⟩","raqu":"»","raquo":"»","rarr":"→","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","rarrtl":"↣","rarrw":"↝","ratail":"⤚","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","rcaron":"ř","rcedil":"ŗ","rceil":"⌉","rcub":"}","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","rect":"▭","re":"®","reg":"®","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","rhard":"⇁","rharu":"⇀","rharul":"⥬","rho":"ρ","rhov":"ϱ","rightarrow":"→","rightarrowtail":"↣","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","rightthreetimes":"⋌","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoust":"⎱","rmoustache":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","roplus":"⨮","rotimes":"⨵","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","rsaquo":"›","rscr":"𝓇","rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","ruluhar":"⥨","rx":"℞","sacute":"ś","sbquo":"‚","sc":"≻","scE":"⪴","scap":"⪸","scaron":"š","sccue":"≽","sce":"⪰","scedil":"ş","scirc":"ŝ","scnE":"⪶","scnap":"⪺","scnsim":"⋩","scpolint":"⨓","scsim":"≿","scy":"с","sdot":"⋅","sdotb":"⊡","sdote":"⩦","seArr":"⇘","searhk":"⤥","searr":"↘","searrow":"↘","sec":"§","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","sfr":"𝔰","sfrown":"⌢","sharp":"♯","shchcy":"щ","shcy":"ш","shortmid":"∣","shortparallel":"∥","sh":"­","shy":"­","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","softcy":"ь","sol":"/","solb":"⧄","solbar":"⌿","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","squ":"□","square":"□","squarf":"▪","squf":"▪","srarr":"→","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","subE":"⫅","subdot":"⪽","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","subseteq":"⊆","subseteqq":"⫅","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succ":"≻","succapprox":"⪸","succcurlyeq":"≽","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","sum":"∑","sung":"♪","sup":"⊃","sup1":"¹","sup2":"²","sup3":"³","supE":"⫆","supdot":"⪾","supdsub":"⫘","supe":"⊇","supedot":"⫄","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swArr":"⇙","swarhk":"⤦","swarr":"↙","swarrow":"↙","swnwar":"⤪","szli":"ß","szlig":"ß","target":"⌖","tau":"τ","tbrk":"⎴","tcaron":"ť","tcedil":"ţ","tcy":"т","tdot":"⃛","telrec":"⌕","tfr":"𝔱","there4":"∴","therefore":"∴","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","thinsp":" ","thkap":"≈","thksim":"∼","thor":"þ","thorn":"þ","tilde":"˜","time":"×","times":"×","timesb":"⊠","timesbar":"⨱","timesd":"⨰","tint":"∭","toea":"⤨","top":"⊤","topbot":"⌶","topcir":"⫱","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","tscr":"𝓉","tscy":"ц","tshcy":"ћ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","uArr":"⇑","uHar":"⥣","uacut":"ú","uacute":"ú","uarr":"↑","ubrcy":"ў","ubreve":"ŭ","ucir":"û","ucirc":"û","ucy":"у","udarr":"⇅","udblac":"ű","udhar":"⥮","ufisht":"⥾","ufr":"𝔲","ugrav":"ù","ugrave":"ù","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","umacr":"ū","um":"¨","uml":"¨","uogon":"ų","uopf":"𝕦","uparrow":"↑","updownarrow":"↕","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","upsi":"υ","upsih":"ϒ","upsilon":"υ","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","uring":"ů","urtri":"◹","uscr":"𝓊","utdot":"⋰","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","uum":"ü","uuml":"ü","uwangle":"⦧","vArr":"⇕","vBar":"⫨","vBarv":"⫩","vDash":"⊨","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vcy":"в","vdash":"⊢","vee":"∨","veebar":"⊻","veeeq":"≚","vellip":"⋮","verbar":"|","vert":"|","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","vopf":"𝕧","vprop":"∝","vrtri":"⊳","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","vzigzag":"⦚","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","wedgeq":"≙","weierp":"℘","wfr":"𝔴","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","xfr":"𝔵","xhArr":"⟺","xharr":"⟷","xi":"ξ","xlArr":"⟸","xlarr":"⟵","xmap":"⟼","xnis":"⋻","xodot":"⨀","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrArr":"⟹","xrarr":"⟶","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","yacut":"ý","yacute":"ý","yacy":"я","ycirc":"ŷ","ycy":"ы","ye":"¥","yen":"¥","yfr":"𝔶","yicy":"ї","yopf":"𝕪","yscr":"𝓎","yucy":"ю","yum":"ÿ","yuml":"ÿ","zacute":"ź","zcaron":"ž","zcy":"з","zdot":"ż","zeetrf":"ℨ","zeta":"ζ","zfr":"𝔷","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},6852:e=>{"use strict";e.exports=JSON.parse('{"0":"�","128":"€","130":"‚","131":"ƒ","132":"„","133":"…","134":"†","135":"‡","136":"ˆ","137":"‰","138":"Š","139":"‹","140":"Œ","142":"Ž","145":"‘","146":"’","147":"“","148":"”","149":"•","150":"–","151":"—","152":"˜","153":"™","154":"š","155":"›","156":"œ","158":"ž","159":"Ÿ"}')},9514:e=>{"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},6851:(e,t)=>{"use strict";t.P=function(e,t){var n=t||{},i=!1===n.padLeft?"":" ",r=n.padRight?" ":"";""===e[e.length-1]&&(e=e.concat(""));return e.join(r+","+i).trim()}},1586:(e,t,n)=>{var i=n(1721);e.exports=function(e){var t={},n=new i(e);t.trackNumber=n.nextUIntV(),t.timecode=n.nextInt16BE();var r=n.nextUInt8();t.invisible=!!(8&r),t.keyframe=!!(128&r),t.discardable=!!(1&r);var o=(6&r)>>1;return t.frames=function(e,t){if(!t)return[e.nextBuffer()];var n,i,r=[],o=e.nextUInt8()+1;if(2===t){if(e.length%o!=0)throw new Error("Fixed-Size Lacing Error");for(i=e.length/o,n=0;n<o;n++)r.push(e.nextBuffer(i));return r}var a=[];if(1===t)for(n=0;n<o-1;n++){var s;i=0;do{i+=s=e.nextUInt8()}while(255===s);a.push(i)}else if(3===t)for(i=e.nextUIntV(),a.push(i),n=1;n<o-1;n++)i+=e.nextIntV(),a.push(i);for(n=0;n<o-1;n++)r.push(e.nextBuffer(a[n]));return r.push(e.nextBuffer()),r}(n,o),t}},1721:(e,t,n)=>{var i=n(8826);function r(e){this.buffer=e,this.offset=0}r.prototype.nextInt16BE=function(){var e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e},r.prototype.nextUInt8=function(){var e=this.buffer.readUInt8(this.offset);return this.offset+=1,e},r.prototype.nextUIntV=function(){var e=i(this.buffer,this.offset);return this.offset+=e.length,e.value},r.prototype.nextIntV=function(){var e=i(this.buffer,this.offset,!0);return this.offset+=e.length,e.value},r.prototype.nextBuffer=function(e){var t=e?this.buffer.slice(this.offset,this.offset+e):this.buffer.slice(this.offset);return this.offset+=e||this.length,t},Object.defineProperty(r.prototype,"length",{get:function(){return this.buffer.length-this.offset}}),e.exports=r},8826:e=>{e.exports=function(e,t,n){t=t||0;for(var i=1;i<=8&&!(e[t]>=Math.pow(2,8-i));i++);if(i>8)throw new Error("Unrepresentable length: "+i+" "+e.toString("hex",t,t+i));if(t+i>e.length)return null;var r,o=e[t]&(1<<8-i)-1;for(r=1;r<i;r++){if(7===r&&o>=Math.pow(2,45)&&e[t+7]>0)return{length:i,value:-1};o*=Math.pow(2,8),o+=e[t+r]}return n&&(o-=Math.pow(2,7*i-1)-1),{length:i,value:o}}},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,r,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=l(e))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8909:e=>{"use strict";e.exports=function(e,t){var n;if(null!=t&&"string"!=typeof t&&("object"!=typeof t||0===t.length))throw new Error("Expected `string` or `Array.<string>` for `tagNames`, not `"+t+"`");if(!e||"object"!=typeof e||"element"!==e.type||"string"!=typeof e.tagName)return!1;if(null==t)return!0;if(n=e.tagName,"string"==typeof t)return n===t;return-1!==t.indexOf(n)}},773:(e,t,n)=>{"use strict";e.exports=n(5204)},5802:(e,t,n)=>{"use strict";var i=n(1878);e.exports=function(e,t){var n=t&&t.children,r=n&&n.length,o=-1,a=[];for(;++o<r;)a[o]=i(e,n[o],o,t);return a.join("")}},1928:(e,t,n)=>{"use strict";var i=n(7529),r=n(4860);e.exports=function(e,t){var n=t.value;if(e.bogusComments)return"<?"+r(n,i(e.entities,{subset:s}))+">";return"\x3c!--"+n.replace(o,(function(t){return r(t,i(e.entities,{subset:a}))}))+"--\x3e"};var o=/^>|^->|<!--|-->|--!>|<!-$/g,a=["<",">"],s=[">"]},5966:e=>{"use strict";var t="\0",n="&",i="`",r='"',o="'",a=[" ","\t","\n","\r","\f"],s=a.concat(n,"/",">","="),l=a.concat(n,">"),c=l.concat(t,r,o,"<","=",i),u=[n,o],h=[n,r];e.exports={name:[[s,s.concat(r,o,i)],[s.concat(t,r,o,"<"),s.concat(t,r,o,"<",i)]],unquoted:[[l,c],[c,c]],single:[[u,u.concat(r,i)],[u.concat(t),u.concat(t,r,i)]],double:[[h,h.concat(o,i)],[h.concat(t),h.concat(t,o,i)]]}},5842:(e,t,n)=>{"use strict";var i=n(7529),r=n(932),o=n(4860);e.exports=function(e,t){var n=e.upperDoctype?s:a,i=e.tightDoctype?"":" ",r=t.name,o=t.public,c=t.system,u=["<!"+n];r&&(u.push(i,r),null!=o?u.push(" public",i,l(e,o)):null!=c&&u.push(" system"),null!=c&&u.push(i,l(e,c)));return u.join("")+">"};var a="doctype",s=a.toUpperCase();function l(e,t){var n=e.quote,a=e.alternative,s=String(t),l=r(s,n)>r(s,a)?a:n;return l+o(s,i(e.entities,{subset:["<","&",l]}))+l}},4307:(e,t,n)=>{"use strict";var i=n(7529),r=n(1218),o=n(9560),a=n(6582).P,s=n(6851).P,l=n(4860),c=n(932),u=n(5802),h=n(5966);e.exports=function(e,t,n,i){var o,a,s,l,c,h,p=e.schema,f=t.tagName,g="",m=t;"html"===p.space&&"svg"===f&&(e.schema=r);c=function(e,t){var n,i,r,o,a,s,l=[];for(n in t)null!=(i=t[n])&&(r=d(e,n,i))&&l.push(r);o=l.length,a=-1;for(;++a<o;)r=l[a],s=null,e.tight&&(s=r.charAt(r.length-1)),a!==o-1&&'"'!==s&&"'"!==s&&(l[a]=r+" ");return l.join("")}(e,t.properties),"svg"===e.schema.space?(s=!1,a=!0,o=e.closeEmpty):(s=e.omit,a=e.close,o=-1!==e.voids.indexOf(f.toLowerCase()),"template"===f&&(m=t.content));l=u(e,m),o=!l&&o,!c&&s&&s.opening(t,n,i)||(g="<"+f+(c?" "+c:""),o&&a&&(h=c.charAt(c.length-1),(!e.tightClose||"/"===h||"svg"===e.schema.space&&h&&'"'!==h&&"'"!==h)&&(g+=" "),g+="/"),g+=">");g+=l,o||s&&s.closing(t,n,i)||(g+="</"+f+">");return e.schema=p,g};var p="'";function d(e,t,n){var r=e.schema,u=o(r,t),d=u.attribute;return!u.overloadedBoolean||n!==d&&""!==n?(u.boolean||u.overloadedBoolean&&"string"!=typeof n)&&(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&isNaN(n)?"":(d=function(e,t){var n="html"===e.schema.space?e.valid:1,r=h.name[n][e.safe];return l(t,i(e.entities,{subset:r}))}(e,d),!0===n?d:d+function(e,t,n,r){var o,u,d=e.entities,f=e.quote,g=e.alternative,m=e.smart;"object"==typeof n&&"length"in n&&(n=(r.commaSeparated?s:a)(n,{padLeft:!e.tightLists}));!(n=String(n))&&e.collapseEmpty||(o=n,e.unquoted&&(u=h.unquoted[e.valid][e.safe],o=l(n,i(d,{subset:u,attribute:!0}))),e.unquoted&&o===n||(m&&c(n,f)>c(n,g)&&(f=g),u=(u=f===p?h.single:h.double)["html"===e.schema.space?e.valid:1][e.safe],n=f+(n=l(n,i(d,{subset:u,attribute:!0})))+f),n=n?"="+n:n);return n}(e,0,n,u))}},5204:(e,t,n)=>{"use strict";var i=n(7247),r=n(1218),o=n(4318),a=n(1600),s=n(1878);e.exports=function(e,t){var n=t||{},u=n.quote||l,h=u===l?"'":l,p=n.quoteSmart,d=e&&"object"==typeof e&&"length"in e?{type:"root",children:e}:e;if(u!==l&&"'"!==u)throw new Error("Invalid quote `"+u+"`, expected `'` or `"+'"`');void 0!==n.allowDangerousHTML&&(c||(c=!0,console.warn("Deprecation warning: `allowDangerousHTML` is a nonstandard option, use `allowDangerousHtml` instead")));return s({valid:n.allowParseErrors?0:1,safe:n.allowDangerousCharacters?0:1,schema:"svg"===n.space?r:i,omit:n.omitOptionalTags&&a,quote:u,alternative:h,smart:p,unquoted:Boolean(n.preferUnquoted),tight:n.tightAttributes,upperDoctype:Boolean(n.upperDoctype),tightDoctype:Boolean(n.tightDoctype),bogusComments:Boolean(n.bogusComments),tightLists:n.tightCommaSeparatedLists,tightClose:n.tightSelfClosing,collapseEmpty:n.collapseEmptyAttributes,dangerous:n.allowDangerousHtml||n.allowDangerousHTML,voids:n.voids||o.concat(),entities:n.entities||{},close:n.closeSelfClosing,closeEmpty:n.closeEmptyElements},d)};var l='"',c=!1},8639:(e,t,n)=>{"use strict";var i=n(8145),r=n(8909),o=n(8115),a=n(3370).e,s=n(5254),l=i("comment"),c="optgroup",u=["option"].concat(c),h=["dt","dd"],p=["menuitem","hr","menu"],d=["rp","rt"],f=["tbody","tfoot"],g=["td","th"],m=["a","audio","del","ins","map","noscript","video"],v=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","menu","nav","ol","p","pre","section","table","ul"];function y(e,t,n){var i=a(n,t,!0);return!i||!l(i)&&!o(i)}function b(e,t,n){var i=a(n,t);return!i||r(i,d)}function w(e,t,n){var i=a(n,t);return!i||r(i,g)}e.exports=s({html:function(e,t,n){var i=a(n,t);return!i||!l(i)},head:y,body:function(e,t,n){var i=a(n,t);return!i||!l(i)},p:function(e,t,n){var i=a(n,t);return i?r(i,v):!n||!r(n,m)},li:function(e,t,n){var i=a(n,t);return!i||r(i,"li")},dt:function(e,t,n){var i=a(n,t);return i&&r(i,h)},dd:function(e,t,n){var i=a(n,t);return!i||r(i,h)},rt:b,rp:b,optgroup:function(e,t,n){var i=a(n,t);return!i||r(i,c)},option:function(e,t,n){var i=a(n,t);return!i||r(i,u)},menuitem:function(e,t,n){var i=a(n,t);return!i||r(i,p)},colgroup:y,caption:y,thead:function(e,t,n){var i=a(n,t);return i&&r(i,f)},tbody:function(e,t,n){var i=a(n,t);return!i||r(i,f)},tfoot:function(e,t,n){return!a(n,t)},tr:function(e,t,n){var i=a(n,t);return!i||r(i,"tr")},td:w,th:w})},1600:(e,t,n)=>{"use strict";t.opening=n(6014),t.closing=n(8639)},5254:e=>{"use strict";e.exports=function(e){return function(n,i,r){var o=n.tagName;return!!t.call(e,o)&&e[o](n,i,r)}};var t={}.hasOwnProperty},6014:(e,t,n)=>{"use strict";var i=n(8145),r=n(8909),o=n(3370).b,a=n(4414),s=n(4997),l=n(8115),c=n(8639),u=n(5254),h=i("comment"),p=["title","base"],d=["meta","link","script","style","template"],f=["thead","tbody"];e.exports=u({html:function(e){var t=a(e);return!t||!h(t)},head:function(e){var t,n,i=e.children,o=i.length,a=[],s=-1;for(;++s<o;)if(t=i[s],n=t.tagName,r(t,p)){if(-1!==a.indexOf(n))return!1;a.push(n)}return 0!==o},body:function(e){var t=a(e,!0);return!t||!h(t)&&!l(t)&&!r(t,d)},colgroup:function(e,t,n){var i=o(n,t),l=a(e,!0);if(r(i,"colgroup")&&c(i,s(n,i),n))return!1;return l&&r(l,"col")},tbody:function(e,t,n){var i=o(n,t),l=a(e);if(r(i,f)&&c(i,s(n,i),n))return!1;return l&&r(l,"tr")}})},4414:(e,t,n)=>{"use strict";var i=n(3370).e;e.exports=function(e,t){return i(e,-1,t)}},4997:e=>{"use strict";e.exports=function(e,t){return e&&e.children&&e.children.indexOf(t)}},3370:(e,t,n)=>{"use strict";var i=n(3560);function r(e){return function(t,n,r){var o=t&&t.children,a=n+e,s=o&&o[a];if(!r)for(;s&&i(s);)s=o[a+=e];return s}}t.b=r(-1),t.e=r(1)},8115:(e,t,n)=>{"use strict";var i=n(8145),r=n(3560);e.exports=function(e){return o(e)&&r(e.value.charAt(0))};var o=i("text")},1878:(e,t,n)=>{"use strict";e.exports=function(e,t,n,o){var a=t&&t.type;if(!a)throw new Error("Expected node, not `"+t+"`");if(!i.call(r,a))throw new Error("Cannot compile unknown node `"+a+"`");return r[a](e,t,n,o)};var i={}.hasOwnProperty,r={};r.root=n(5802),r.text=n(1274),r.element=n(4307),r.doctype=n(5842),r.comment=n(1928),r.raw=n(9044)},9044:(e,t,n)=>{"use strict";var i=n(1274);e.exports=function(e,t){return e.dangerous?t.value:i(e,t)}},1274:(e,t,n)=>{"use strict";var i=n(7529),r=n(4860);e.exports=function(e,t,n,o){var a=t.value;return function(e){return e&&("script"===e.tagName||"style"===e.tagName)}(o)?a:r(a,i(e.entities,{subset:["<","&"]}))}},3560:e=>{"use strict";e.exports=function(e){var n;if(e&&"object"==typeof e&&"text"===e.type)n=e.value||"";else{if("string"!=typeof e)return!1;n=e}return""===n.replace(t,"")};var t=/[ \t\n\f\r]/g},4318:e=>{"use strict";e.exports=JSON.parse('["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"]')},645:(e,t)=>{t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,p=n?-1:1,d=e[t+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=c}return(d?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+d]=255&a,d+=f,a/=256,c-=8);e[n+d-f]|=128*g}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},1166:function(e,t){!function(e){var t,n="undefined",i=n!==typeof Buffer&&Buffer,r=n!==typeof Uint8Array&&Uint8Array,o=n!==typeof ArrayBuffer&&ArrayBuffer,a=[0,0,0,0,0,0,0,0],s=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},l=4294967296;function c(s,c,w){var k=c?0:4,C=c?4:0,E=c?0:3,x=c?1:2,S=c?2:1,M=c?3:0,T=c?m:y,D=c?v:b,A=I.prototype,L="is"+s,P="_"+L;return A.buffer=void 0,A.offset=0,A[P]=!0,A.toNumber=O,A.toString=function(e){var t=this.buffer,n=this.offset,i=B(t,n+k),r=B(t,n+C),o="",a=!w&&2147483648&i;a&&(i=~i,r=l-r);e=e||10;for(;;){var s=i%e*l+r;if(i=Math.floor(i/e),r=Math.floor(s/e),o=(s%e).toString(e)+o,!i&&!r)break}a&&(o="-"+o);return o},A.toJSON=O,A.toArray=u,i&&(A.toBuffer=h),r&&(A.toArrayBuffer=p),I[L]=function(e){return!(!e||!e[P])},e[s]=I,I;function I(e,s,c,u){return this instanceof I?function(e,s,c,u,h){r&&o&&(s instanceof o&&(s=new r(s)),u instanceof o&&(u=new r(u)));if(!(s||c||u||t))return void(e.buffer=g(a,0));if(!d(s,c)){var p=t||Array;h=c,u=s,c=0,s=t===i?i.alloc(8):new p(8)}if(e.buffer=s,e.offset=c|=0,n===typeof u)return;"string"==typeof u?function(e,t,n,i){var r=0,o=n.length,a=0,s=0;"-"===n[0]&&r++;var c=r;for(;r<o;){var u=parseInt(n[r++],i);if(!(u>=0))break;s=s*i+u,a=a*i+Math.floor(s/l),s%=l}c&&(a=~a,s?s=l-s:a++);F(e,t+k,a),F(e,t+C,s)}(s,c,u,h||10):d(u,h)?f(s,c,u,h):"number"==typeof h?(F(s,c+k,u),F(s,c+C,h)):u>0?T(s,c,u):u<0?D(s,c,u):f(s,c,a,0)}(this,e,s,c,u):new I(e,s,c,u)}function O(){var e=this.buffer,t=this.offset,n=B(e,t+k),i=B(e,t+C);return w||(n|=0),n?n*l+i:i}function F(e,t,n){e[t+M]=255&n,n>>=8,e[t+S]=255&n,n>>=8,e[t+x]=255&n,n>>=8,e[t+E]=255&n}function B(e,t){return 16777216*e[t+E]+(e[t+x]<<16)+(e[t+S]<<8)+e[t+M]}}function u(e){var n=this.buffer,i=this.offset;return t=null,!1!==e&&s(n)?8===n.length?n:n.slice(i,i+8):g(n,i)}function h(e){var n=this.buffer,r=this.offset;return t=i,!1!==e&&i.isBuffer(n)?8===n.length?n:n.slice(r,r+8):i.from(p.call(this,e))}function p(e){var n=this.buffer,i=this.offset,a=n.buffer;if(t=r,!1!==e&&!n.offset&&a instanceof o)return 8===a.byteLength?a:a.slice(i,i+8);var s=new r(8);return f(s,0,n,i),s.buffer}function d(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function f(e,t,n,i){t|=0,i|=0;for(var r=0;r<8;r++)e[t++]=255&n[i++]}function g(e,t){return Array.prototype.slice.call(e,t,t+8)}function m(e,t,n){for(var i=t+8;i>t;)e[--i]=255&n,n/=256}function v(e,t,n){var i=t+8;for(n++;i>t;)e[--i]=255&-n^255,n/=256}function y(e,t,n){for(var i=t+8;t<i;)e[t++]=255&n,n/=256}function b(e,t,n){var i=t+8;for(n++;t<i;)e[t++]=255&-n^255,n/=256}c("Uint64BE",!0,!0),c("Int64BE",!0,!1),c("Uint64LE",!1,!0),c("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},6260:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},7961:(e,t,n)=>{"use strict";var i=n(6260),r=n(6195);e.exports=function(e){return i(e)||r(e)}},8738:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},6195:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},9480:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},2139:e=>{"use strict";e.exports=function(e){return n.test("number"==typeof e?t(e):e.charAt(0))};var t=String.fromCharCode,n=/\s/},3017:e=>{"use strict";e.exports=function(e){return n.test("number"==typeof e?t(e):e.charAt(0))};var t=String.fromCharCode,n=/\w/},2123:e=>{"use strict";e.exports=r;var t=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],n=t.concat(["~","|"]),i=n.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function r(e){var r=e||{};return r.commonmark?i:r.gfm?n:t}r.default=t,r.gfm=n,r.commonmark=i},6630:(e,t,n)=>{"use strict";var i=n(2854);e.exports=function(e,t){return function(e){return t;function t(t){var n=t&&o(t);return n&&r.call(e,n)?e[n]:null}}(function(e){var t={};if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return i(e,"definition",n),t;function n(e){var n=o(e.identifier);r.call(t,n)||(t[n]=e)}}(e))};var r={}.hasOwnProperty;function o(e){return e.toUpperCase()}},5426:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r,o=t.children||[],a=o.length,s=[],l=-1;for(;++l<a;)(n=i(e,o[l],t))&&(l&&"break"===o[l-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),s=s.concat(n));return s};var i=n(719)},1696:(e,t,n)=>{"use strict";e.exports=function(e){var t,n,a,s,l=e.footnoteById,c=e.footnoteOrder,u=c.length,h=-1,p=[];for(;++h<u;)(t=l[c[h].toUpperCase()])&&(a=t.children.concat(),s=a[a.length-1],n={type:"link",url:"#fnref-"+t.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"↩"}]},s&&"paragraph"===s.type||(s={type:"paragraph",children:[]},a.push(s)),s.children.push(n),p.push({type:"listItem",data:{hProperties:{id:"fn-"+t.identifier}},children:a,position:t.position}));if(0===p.length)return null;return e(null,"div",{className:["footnotes"]},o([i(e),r(e,{type:"list",ordered:!0,children:p})],!0))};var i=n(7552),r=n(7888),o=n(6115)},4590:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"blockquote",i(r(e,t),!0))};var i=n(6115),r=n(5426)},3562:(e,t,n)=>{"use strict";e.exports=function(e,t){return[e(t,"br"),i("text","\n")]};var i=n(914)},7891:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r=t.value?t.value+"\n":"",o=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};o&&(a.className=["language-"+o]);n=e(t,"code",a,[i("text",r)]),t.meta&&(n.data={meta:t.meta});return e(t.position,"pre",[n])};var i=n(914)},9381:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"del",i(e,t))};var i=n(5426)},790:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"em",i(e,t))};var i=n(5426)},8235:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteOrder,r=String(t.identifier);-1===n.indexOf(r)&&n.push(r);return e(t.position,"sup",{id:"fnref-"+r},[e(t,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",t.label||r)])])};var i=n(914)},5758:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteById,r=e.footnoteOrder,o=1;for(;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},i(e,{type:"footnoteReference",identifier:o,position:t.position})};var i=n(8235)},4890:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"h"+t.depth,i(e,t))};var i=n(5426)},2202:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.dangerous?e.augment(t,i("raw",t.value)):null};var i=n(914)},1454:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o=e.definition(t.identifier);if(!o)return r(e,t);n={src:i(o.url||""),alt:t.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title);return e(t,"img",n)};var i=n(729),r=n(713)},5037:(e,t,n)=>{"use strict";var i=n(729);e.exports=function(e,t){var n={src:i(t.url),alt:t.alt};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"img",n)}},4617:(e,t,n)=>{"use strict";function i(){return null}e.exports={blockquote:n(4590),break:n(3562),code:n(7891),delete:n(9381),emphasis:n(790),footnoteReference:n(8235),footnote:n(5758),heading:n(4890),html:n(2202),imageReference:n(1454),image:n(5037),inlineCode:n(8409),linkReference:n(9266),link:n(404),listItem:n(4463),list:n(7888),paragraph:n(8346),root:n(8100),strong:n(4970),table:n(2605),text:n(989),thematicBreak:n(7552),toml:i,yaml:i,definition:i,footnoteDefinition:i}},8409:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=t.value.replace(/\r?\n|\r/g," ");return e(t,"code",[i("text",n)])};var i=n(914)},9266:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,a=e.definition(t.identifier);if(!a)return r(e,t);n={href:i(a.url||"")},null!==a.title&&void 0!==a.title&&(n.title=a.title);return e(t,"a",n,o(e,t))};var i=n(729),r=n(713),o=n(5426)},404:(e,t,n)=>{"use strict";var i=n(729),r=n(5426);e.exports=function(e,t){var n={href:i(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"a",n,r(e,t))}},4463:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var a,s,l,c=r(e,t),u=c[0],h=n?function(e){var t=e.spread,n=e.children,i=n.length,r=-1;for(;!t&&++r<i;)t=o(n[r]);return t}(n):o(t),p={},d=[];"boolean"==typeof t.checked&&(u&&"p"===u.tagName||(u=e(null,"p",[]),c.unshift(u)),u.children.length>0&&u.children.unshift(i("text"," ")),u.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),p.className=["task-list-item"]);a=c.length,s=-1;for(;++s<a;)l=c[s],(h||0!==s||"p"!==l.tagName)&&d.push(i("text","\n")),"p"!==l.tagName||h?d.push(l):d=d.concat(l.children);a&&(h||"p"!==l.tagName)&&d.push(i("text","\n"));return e(t,"li",p,d)};var i=n(914),r=n(5426);function o(e){var t=e.spread;return null==t?e.children.length>1:t}},7888:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,a={},s=t.ordered?"ol":"ul",l=-1;"number"==typeof t.start&&1!==t.start&&(a.start=t.start);n=r(e,t),o=n.length;for(;++l<o;)if(n[l].properties.className&&-1!==n[l].properties.className.indexOf("task-list-item")){a.className=["contains-task-list"];break}return e(t,s,a,i(n,!0))};var i=n(6115),r=n(5426)},8346:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"p",i(e,t))};var i=n(5426)},8100:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("root",r(o(e,t))))};var i=n(914),r=n(6115),o=n(5426)},4970:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"strong",i(e,t))};var i=n(5426)},2605:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,a,s,l,c,u=t.children,h=u.length,p=t.align||[],d=p.length,f=[];for(;h--;){for(a=u[h].children,l=0===h?"th":"td",n=d||a.length,s=[];n--;)c=a[n],s[n]=e(c,l,{align:p[n]},c?o(e,c):[]);f[h]=e(u[h],"tr",r(s,!0))}return e(t,"table",r([e(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?e({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(7361),r=n(6115),o=n(5426)},989:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(914)},7552:e=>{"use strict";e.exports=function(e,t){return e(t,"hr")}},719:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var i,r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");i=o.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.indexOf(r)>-1?s:e.unknownHandler;return("function"==typeof i?i:a)(e,t,n)};var i=n(914),r=n(5426),o={}.hasOwnProperty;function a(e,t){return function(e){var t=e.data||{};if(o.call(t,"hName")||o.call(t,"hProperties")||o.call(t,"hChildren"))return!1;return"value"in e}(t)?e.augment(t,i("text",t.value)):e(t,"div",r(e,t))}function s(e,t){var n;return t.children?((n=Object.assign({},t)).children=r(e,t),n):t}},713:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,a,s=t.referenceType,l="]";"collapsed"===s?l+="[]":"full"===s&&(l+="["+(t.label||t.identifier)+"]");if("imageReference"===t.type)return i("text","!["+t.alt+l);n=r(e,t),(o=n[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","["));(a=n[n.length-1])&&"text"===a.type?a.value+=l:n.push(i("text",l));return n};var i=n(914),r=n(5426)},6115:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=[],r=-1,o=e.length;t&&n.push(i("text","\n"));for(;++r<o;)r&&n.push(i("text","\n")),n.push(e[r]);t&&e.length>0&&n.push(i("text","\n"));return n};var i=n(914)},729:e=>{"use strict";var t={};function n(e,i,r){var o,a,s,l,c,u="";for("string"!=typeof i&&(r=i,i=n.defaultChars),void 0===r&&(r=!0),c=function(e){var n,i,r=t[e];if(r)return r;for(r=t[e]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)r[e.charCodeAt(n)]=e[n];return r}(i),o=0,a=e.length;o<a;o++)if(s=e.charCodeAt(o),r&&37===s&&o+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))u+=e.slice(o,o+3),o+=2;else if(s<128)u+=c[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<a&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){u+=encodeURIComponent(e[o]+e[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[o]);return u}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},7621:(e,t,n)=>{"use strict";var i=n(3407);e.exports=function(e){return!!r.call(i,e)&&i[e]};var r={}.hasOwnProperty},7574:(e,t,n)=>{"use strict";var i=n(6588),r=n(6852),o=n(6195),a=n(9480),s=n(7961),l=n(7621);e.exports=function(e,t){var n,o,a={};t||(t={});for(o in p)n=t[o],a[o]=null==n?p[o]:n;(a.position.indent||a.position.start)&&(a.indent=a.position.indent||[],a.position=a.position.start);return function(e,t){var n,o,a,p,k,C,E,x,S,M,T,D,A,L,P,I,O,F,B,N=t.additional,R=t.nonTerminated,H=t.text,V=t.reference,z=t.warning,q=t.textContext,U=t.referenceContext,W=t.warningContext,_=t.position,j=t.indent||[],G=e.length,K=0,Y=-1,X=_.column||1,$=_.line||1,Z="",Q=[];"string"==typeof N&&(N=N.charCodeAt(0));I=J(),x=z?ee:h,K--,G++;for(;++K<G;)if(10===k&&(X=j[Y]||1),38===(k=e.charCodeAt(K))){if(9===(E=e.charCodeAt(K+1))||10===E||12===E||32===E||38===E||60===E||E!=E||N&&E===N){Z+=u(k),X++;continue}for(D=A=K+1,B=A,35===E?(B=++D,88===(E=e.charCodeAt(B))||120===E?(L=f,B=++D):L=g):L=d,n="",T="",p="",P=v[L],B--;++B<G&&P(E=e.charCodeAt(B));)p+=u(E),L===d&&c.call(i,p)&&(n=p,T=i[p]);(a=59===e.charCodeAt(B))&&(B++,(o=L===d&&l(p))&&(n=p,T=o)),F=1+B-A,(a||R)&&(p?L===d?(a&&!T?x(5,1):(n!==p&&(F=1+(B=D+n.length)-D,a=!1),a||(S=n?1:3,t.attribute?61===(E=e.charCodeAt(B))?(x(S,F),T=null):s(E)?T=null:x(S,F):x(S,F))),C=T):(a||x(2,F),b(C=parseInt(p,m[L]))?(x(7,F),C=u(65533)):C in r?(x(6,F),C=r[C]):(M="",w(C)&&x(6,F),C>65535&&(M+=u((C-=65536)>>>10|55296),C=56320|1023&C),C=M+u(C))):L!==d&&x(4,F)),C?(te(),I=J(),K=B-1,X+=B-A+1,Q.push(C),(O=J()).offset++,V&&V.call(U,C,{start:I,end:O},e.slice(A-1,B)),I=O):(p=e.slice(A-1,B),Z+=p,X+=p.length,K=B-1)}else 10===k&&($++,Y++,X=0),k==k?(Z+=u(k),X++):te();return Q.join("");function J(){return{line:$,column:X,offset:K+(_.offset||0)}}function ee(e,t){var n=J();n.column+=t,n.offset+=t,z.call(W,y[e],n,e)}function te(){Z&&(Q.push(Z),H&&H.call(q,Z,{start:I,end:J()}),Z="")}}(e,a)};var c={}.hasOwnProperty,u=String.fromCharCode,h=Function.prototype,p={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},d="named",f="hexadecimal",g="decimal",m={hexadecimal:16,decimal:10},v={};v.named=s,v[g]=o,v[f]=a;var y={};function b(e){return e>=55296&&e<=57343||e>1114111}function w(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}y[1]="Named character references must be terminated by a semicolon",y[2]="Numeric character references must be terminated by a semicolon",y[3]="Named character references cannot be empty",y[4]="Numeric character references cannot be empty",y[5]="Named character references must be known",y[6]="Numeric character references cannot be disallowed",y[7]="Numeric character references cannot be outside the permissible Unicode range"},9560:(e,t,n)=>{"use strict";var i=n(6632),r=n(8805),o=n(7643),a="data";e.exports=function(e,t){var n=i(t),p=t,d=o;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&n.slice(0,4)===a&&s.test(t)&&("-"===t.charAt(4)?p=function(e){var t=e.slice(5).replace(l,h);return a+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(l.test(t))return e;"-"!==(t=t.replace(c,u)).charAt(0)&&(t="-"+t);return a+t}(t),d=r);return new d(p,t)};var s=/^data[-\w.:]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function u(e){return"-"+e.toLowerCase()}function h(e){return e.charAt(1).toUpperCase()}},7247:(e,t,n)=>{"use strict";var i=n(9940),r=n(8289),o=n(5812),a=n(4397),s=n(7716),l=n(1805);e.exports=i([o,r,a,s,l])},7716:(e,t,n)=>{"use strict";var i=n(7e3),r=n(7596),o=i.booleanish,a=i.number,s=i.spaceSeparated;e.exports=r({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:a,ariaColIndex:a,ariaColSpan:a,ariaControls:s,ariaCurrent:null,ariaDescribedBy:s,ariaDetails:null,ariaDisabled:o,ariaDropEffect:s,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:s,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:s,ariaLevel:a,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:s,ariaPlaceholder:null,ariaPosInSet:a,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:s,ariaRowCount:a,ariaRowIndex:a,ariaRowSpan:a,ariaSelected:o,ariaSetSize:a,ariaSort:null,ariaValueMax:a,ariaValueMin:a,ariaValueNow:a,ariaValueText:null,role:null}})},1805:(e,t,n)=>{"use strict";var i=n(7e3),r=n(7596),o=n(855),a=i.boolean,s=i.overloadedBoolean,l=i.booleanish,c=i.number,u=i.spaceSeparated,h=i.commaSeparated;e.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:h,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:a,allowPaymentRequest:a,allowUserMedia:a,alt:null,as:null,async:a,autoCapitalize:null,autoComplete:u,autoFocus:a,autoPlay:a,capture:a,charSet:null,checked:a,cite:null,className:u,cols:c,colSpan:null,content:null,contentEditable:l,controls:a,controlsList:u,coords:c|h,crossOrigin:null,data:null,dateTime:null,decoding:null,default:a,defer:a,dir:null,dirName:null,disabled:a,download:s,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:a,formTarget:null,headers:u,height:c,hidden:a,high:c,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:h,inputMode:null,integrity:null,is:null,isMap:a,itemId:null,itemProp:u,itemRef:u,itemScope:a,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loop:a,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:a,muted:a,name:null,nonce:null,noModule:a,noValidate:a,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:a,optimum:c,pattern:null,ping:u,placeholder:null,playsInline:a,poster:null,preload:null,readOnly:a,referrerPolicy:null,rel:u,required:a,reversed:a,rows:c,rowSpan:c,sandbox:u,scope:null,scoped:a,seamless:a,selected:a,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:h,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:a,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:a,declare:a,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:a,noHref:a,noShade:a,noWrap:a,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:a,disableRemotePlayback:a,prefix:null,property:null,results:c,security:null,unselectable:null}})},5789:(e,t,n)=>{"use strict";var i=n(7e3),r=n(7596),o=n(8740),a=i.boolean,s=i.number,l=i.spaceSeparated,c=i.commaSeparated,u=i.commaOrSpaceSeparated;e.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:u,accentHeight:s,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:s,amplitude:s,arabicForm:null,ascent:s,attributeName:null,attributeType:null,azimuth:s,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:s,by:null,calcMode:null,capHeight:s,className:l,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:s,diffuseConstant:s,direction:null,display:null,dur:null,divisor:s,dominantBaseline:null,download:a,dx:null,dy:null,edgeMode:null,editable:null,elevation:s,enableBackground:null,end:null,event:null,exponent:s,externalResourcesRequired:null,fill:null,fillOpacity:s,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:c,g2:c,glyphName:c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:s,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:s,horizOriginX:s,horizOriginY:s,id:null,ideographic:s,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:s,k:s,k1:s,k2:s,k3:s,k4:s,kernelMatrix:u,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:s,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:s,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:s,overlineThickness:s,paintOrder:null,panose1:null,path:null,pathLength:s,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:l,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:s,pointsAtY:s,pointsAtZ:s,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:u,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:u,rev:u,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:u,requiredFeatures:u,requiredFonts:u,requiredFormats:u,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:s,specularExponent:s,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:s,strikethroughThickness:s,string:null,stroke:null,strokeDashArray:u,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:s,strokeOpacity:s,strokeWidth:null,style:null,surfaceScale:s,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:u,tabIndex:s,tableValues:null,target:null,targetX:s,targetY:s,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:u,to:null,transform:null,u1:null,u2:null,underlinePosition:s,underlineThickness:s,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:s,values:null,vAlphabetic:s,vMathematical:s,vectorEffect:null,vHanging:s,vIdeographic:s,version:null,vertAdvY:s,vertOriginX:s,vertOriginY:s,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:s,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},855:(e,t,n)=>{"use strict";var i=n(8740);e.exports=function(e,t){return i(e,t.toLowerCase())}},8740:e=>{"use strict";e.exports=function(e,t){return t in e?e[t]:t}},7596:(e,t,n)=>{"use strict";var i=n(6632),r=n(9607),o=n(8805);e.exports=function(e){var t,n,a=e.space,s=e.mustUseProperty||[],l=e.attributes||{},c=e.properties,u=e.transform,h={},p={};for(t in c)n=new o(t,u(l,t),c[t],a),-1!==s.indexOf(t)&&(n.mustUseProperty=!0),h[t]=n,p[i(t)]=t,p[i(n.attribute)]=t;return new r(h,p,a)}},8805:(e,t,n)=>{"use strict";var i=n(7643),r=n(7e3);e.exports=s,s.prototype=new i,s.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],a=o.length;function s(e,t,n,s){var c,u=-1;for(l(this,"space",s),i.call(this,e,t);++u<a;)l(this,c=o[u],(n&r[c])===r[c])}function l(e,t,n){n&&(e[t]=n)}},7643:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t){this.property=e,this.attribute=t}t.space=null,t.attribute=null,t.property=null,t.boolean=!1,t.booleanish=!1,t.overloadedBoolean=!1,t.number=!1,t.commaSeparated=!1,t.spaceSeparated=!1,t.commaOrSpaceSeparated=!1,t.mustUseProperty=!1,t.defined=!1},9940:(e,t,n)=>{"use strict";var i=n(7529),r=n(9607);e.exports=function(e){var t,n,o=e.length,a=[],s=[],l=-1;for(;++l<o;)t=e[l],a.push(t.property),s.push(t.normal),n=t.space;return new r(i.apply(null,a),i.apply(null,s),n)}},9607:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}t.space=null,t.normal={},t.property={}},7e3:(e,t)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}t.boolean=i(),t.booleanish=i(),t.overloadedBoolean=i(),t.number=i(),t.spaceSeparated=i(),t.commaSeparated=i(),t.commaOrSpaceSeparated=i()},8289:(e,t,n)=>{"use strict";var i=n(7596);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},5812:(e,t,n)=>{"use strict";var i=n(7596);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},4397:(e,t,n)=>{"use strict";var i=n(7596),r=n(855);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},6632:e=>{"use strict";e.exports=function(e){return e.toLowerCase()}},1218:(e,t,n)=>{"use strict";var i=n(9940),r=n(8289),o=n(5812),a=n(4397),s=n(7716),l=n(5789);e.exports=i([o,r,a,s,l])},6464:e=>{"use strict";var t,n="";e.exports=function(e,i){if("string"!=typeof e)throw new TypeError("expected a string");if(1===i)return e;if(2===i)return e+e;var r=e.length*i;if(t!==e||void 0===t)t=e,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&i>1;)1&i&&(n+=e),i>>=1,e+=e;return n=(n+=e).substr(0,r)}},6582:(e,t)=>{"use strict";t.P=function(e){return e.join(" ").trim()};var n=/[ \t\n\r\f]+/g},78:e=>{"use strict";e.exports=function(e,t,n){return function(){var i=n||this,r=i[e];return i[e]=!t,o;function o(){i[e]=r}}}},832:e=>{"use strict";e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},4860:(e,t,n)=>{"use strict";var i=n(5848),r=n(6588),o=n(9480),a=n(6195),s=n(7961),l=n(832);e.exports=f,f.escape=function(e){return f(e,{escapeOnly:!0,useNamedReferences:!0})};var c={}.hasOwnProperty,u=function(){var e,t={};for(e in i)t[i[e]]=e;return t}(),h=v(['"',"'","<",">","&","`"]),p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function f(e,t){var n=t||{},i=n.subset,o=i?v(i):h,a=n.escapeOnly,f=n.omitOptionalSemicolons;return e=e.replace(o,y),i||a?e:e.replace(p,(function(e,t,n){return g(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,n.charCodeAt(t+2),f)})).replace(d,y);function y(e,t,i){return function(e,t,n){var i,o,a,h,p=n.useShortestReferences,d=n.omitOptionalSemicolons;(p||n.useNamedReferences)&&c.call(u,e)&&(i=function(e,t,n,i){var o="&"+e;if(n&&c.call(r,e)&&-1===l.indexOf(e)&&(!i||t&&61!==t&&!s(t)))return o;return o+";"}(u[e],t,d,n.attribute));!p&&i||(a=g(o=e.charCodeAt(0),t,d),p&&(h=m(o,t,d)).length<a.length&&(a=h));if(i&&(!p||i.length<a.length))return i;return a}(e,i.charCodeAt(t+1),n)}}function g(e,t,n){var i="&#x"+e.toString(16).toUpperCase();return n&&t&&!o(t)?i:i+";"}function m(e,t,n){var i="&#"+String(e);return n&&t&&!a(t)?i:i+";"}function v(e){return new RegExp("["+e.join("")+"]","g")}},7257:e=>{"use strict";e.exports=function(e){var t=String(e),n=t.length;for(;"\n"===t.charAt(--n););return t.slice(0,n+1)}},2745:(e,t)=>{(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},3278:(e,t,n)=>{"use strict";var i=n(7529),r=n(5717);e.exports=function(e){var t,n,o;for(n in r(s,e),r(a,s),t=s.prototype)(o=t[n])&&"object"==typeof o&&(t[n]="concat"in o?o.concat():i(o));return s;function a(t){return e.apply(this,t)}function s(){return this instanceof s?e.apply(this,arguments):new a(arguments)}}},914:e=>{"use strict";e.exports=function(e,t,n){var i;null!=n||"object"==typeof t&&!Array.isArray(t)||(n=t,t={});i=Object.assign({type:String(e)},t),Array.isArray(n)?i.children=n:null!=n&&(i.value=String(n));return i}},1744:e=>{"use strict";function t(e){return e&&"object"==typeof e?e:{}}e.exports=function(e){var n=t(t(e).position),i=t(n.start),r=t(n.end);return!(i.line&&i.column&&r.line&&r.column)}},8145:e=>{"use strict";function t(e){if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return r;if("object"==typeof e)return("length"in e?i:n)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function i(e){var n=function(e){for(var n=[],i=e.length,r=-1;++r<i;)n[r]=t(e[r]);return n}(e),i=n.length;return function(){var e=-1;for(;++e<i;)if(n[e].apply(this,arguments))return!0;return!1}}function r(){return!0}e.exports=t},7361:e=>{"use strict";var t=r("start"),n=r("end");function i(e){return{start:t(e),end:n(e)}}function r(e){return t.displayName=e,t;function t(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}e.exports=i,i.start=t,i.end=n},3183:(e,t,n)=>{"use strict";var i=n(2854);function r(e){delete e.position}function o(e){e.position=void 0}e.exports=function(e,t){return i(e,t?r:o),e}},5432:e=>{"use strict";var t={}.hasOwnProperty;function n(e){return e&&"object"==typeof e||(e={}),r(e.line)+":"+r(e.column)}function i(e){return e&&"object"==typeof e||(e={}),n(e.start)+"-"+n(e.end)}function r(e){return e&&"number"==typeof e?e:1}e.exports=function(e){if(!e||"object"!=typeof e)return"";if(t.call(e,"position")||t.call(e,"type"))return i(e.position);if(t.call(e,"start")||t.call(e,"end"))return i(e);if(t.call(e,"line")||t.call(e,"column"))return n(e);return""}},6750:e=>{e.exports=function(e){return e}},9294:(e,t,n)=>{"use strict";e.exports=s;var i=n(8145),r=n(6750),o="skip",a=!1;function s(e,t,n,s){var p;function d(e,i,c){var f,g=h(e)?e:{};return u(g.type)&&(f=u(g.tagName)?g.tagName:u(g.name)?g.name:void 0,m.displayName="node ("+r(g.type+(f?"<"+f+">":""))+")"),m;function m(){var r,u=[];return(t&&!p(e,i,c[c.length-1]||null)||(u=l(n(e,c)))[0]!==a)&&e.children&&u[0]!==o&&(r=l(function(e,t){var n,i=-1,r=s?-1:1,o=(s?e.length:i)+r;for(;o>i&&o<e.length;){if((n=d(e[o],o,t)())[0]===a)return n;o="number"==typeof n[1]?n[1]:o+r}}(e.children,c.concat(e))))[0]===a?r:u}}c(t)&&!c(n)&&(s=n,n=t,t=null),p=i(t),d(e,null,[])()}function l(e){return h(e)&&"length"in e?e:"number"==typeof e?[true,e]:[e]}function c(e){return"function"==typeof e}function u(e){return"string"==typeof e}function h(e){return"object"==typeof e&&null!==e}s.CONTINUE=true,s.SKIP=o,s.EXIT=a},2854:(e,t,n)=>{"use strict";e.exports=s;var i=n(9294),r=i.CONTINUE,o=i.SKIP,a=i.EXIT;function s(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}s.CONTINUE=r,s.SKIP=o,s.EXIT=a},4787:e=>{"use strict";e.exports=function(e){var t=String(e),n=[],i=/\r?\n|\r/g;for(;i.exec(t);)n.push(i.lastIndex);return n.push(t.length+1),{toPoint:r,toPosition:r,toOffset:function(e){var t,i=e&&e.line,r=e&&e.column;isNaN(i)||isNaN(r)||!(i-1 in n)||(t=(n[i-2]||0)+r-1||0);return t>-1&&t<n[n.length-1]?t:-1}};function r(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{}}}},734:(e,t,n)=>{"use strict";var i=n(5432);function r(){}e.exports=a,r.prototype=Error.prototype,a.prototype=new r;var o=a.prototype;function a(e,t,n){var r,o,a;"string"==typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=i(t)||"1:1",a={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(a=t,t=t.start):a.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=a,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},939:(e,t,n)=>{"use strict";e.exports=n(5905)},5442:(e,t,n)=>{"use strict";var i=n(8064),r=n(4228),o=n(8738);e.exports=l;var a={}.hasOwnProperty,s=["history","path","basename","stem","extname","dirname"];function l(e){var t,n;if(e){if("string"==typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof l))return new l(e);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<s.length;)t=s[n],a.call(e,t)&&(this[t]=e[t]);for(t in e)s.indexOf(t)<0&&(this[t]=e[t])}function c(e,t){if(e&&e.indexOf(i.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function u(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function h(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}l.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(l.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){u(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(l.prototype,"dirname",{get:function(){return"string"==typeof this.path?i.dirname(this.path):void 0},set:function(e){h(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(l.prototype,"basename",{get:function(){return"string"==typeof this.path?i.basename(this.path):void 0},set:function(e){u(e,"basename"),c(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(l.prototype,"extname",{get:function(){return"string"==typeof this.path?i.extname(this.path):void 0},set:function(e){if(c(e,"extname"),h(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(l.prototype,"stem",{get:function(){return"string"==typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){u(e,"stem"),c(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})},5905:(e,t,n)=>{"use strict";var i=n(734),r=n(5442);e.exports=r,r.prototype.message=function(e,t,n){var r=new i(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},8064:(e,t)=>{"use strict";function n(e){var t,n;return i(e),t=47===e.charCodeAt(0),(n=function(e,t){var n,i,r="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),a=l,s=0;continue}}else if(r.length){r="",o=0,a=l,s=0;continue}t&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return r}(e,!t)).length||t||(n="."),n.length&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var n,r,o,a,s=0,l=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(i(e),n=e.length,void 0===t||!t.length||t.length>e.length){for(;n--;)if(47===e.charCodeAt(n)){if(o){s=n+1;break}}else l<0&&(o=!0,l=n+1);return l<0?"":e.slice(s,l)}if(t===e)return"";r=-1,a=t.length-1;for(;n--;)if(47===e.charCodeAt(n)){if(o){s=n+1;break}}else r<0&&(o=!0,r=n+1),a>-1&&(e.charCodeAt(n)===t.charCodeAt(a--)?a<0&&(l=n):(a=-1,l=r));s===l?l=r:l<0&&(l=e.length);return e.slice(s,l)},t.dirname=function(e){var t,n,r;if(i(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(n){t=r;break}}else n||(n=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,n,r,o=-1,a=0,s=-1,l=0;i(e),r=e.length;for(;r--;)if(47!==(n=e.charCodeAt(r)))s<0&&(t=!0,s=r+1),46===n?o<0?o=r:1!==l&&(l=1):o>-1&&(l=-1);else if(t){a=r+1;break}if(o<0||s<0||0===l||1===l&&o===s-1&&o===a+1)return"";return e.slice(o,s)},t.join=function(){var e,t=-1;for(;++t<arguments.length;)i(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":n(e)},t.sep="/"},4228:(e,t)=>{"use strict";t.cwd=function(){return"/"}},4990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1166),o=n(3210),a=n(3210),s=n(4370);!function(e){e[e.STATE_TAG=1]="STATE_TAG",e[e.STATE_SIZE=2]="STATE_SIZE",e[e.STATE_CONTENT=3]="STATE_CONTENT"}(i||(i={}));var l=function(){function e(){this._buffer=new o.Buffer(0),this._tag_stack=[],this._state=i.STATE_TAG,this._cursor=0,this._total=0,this._schema=s.byEbmlID,this._result=[]}return e.prototype.decode=function(e){this.readChunk(e);var t=this._result;return this._result=[],t},e.prototype.readChunk=function(e){for(this._buffer=a.concat([this._buffer,new o.Buffer(e)]);this._cursor<this._buffer.length&&(this._state!==i.STATE_TAG||this.readTag())&&(this._state!==i.STATE_SIZE||this.readSize())&&(this._state!==i.STATE_CONTENT||this.readContent()););},e.prototype.getSchemaInfo=function(e){return this._schema[e]||{name:"unknown",level:-1,type:"unknown",description:"unknown"}},e.prototype.readTag=function(){if(this._cursor>=this._buffer.length)return!1;var e=(0,o.readVint)(this._buffer,this._cursor);if(null==e)return!1;var t=this._buffer.slice(this._cursor,this._cursor+e.length).reduce((function(e,t,n,i){return e+t*Math.pow(16,2*(i.length-1-n))}),0),n=this.getSchemaInfo(t),r={EBML_ID:t.toString(16),schema:n,type:n.type,name:n.name,level:n.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(r),this._cursor+=e.length,this._total+=e.length,this._state=i.STATE_SIZE,!0},e.prototype.readSize=function(){if(this._cursor>=this._buffer.length)return!1;var e=(0,o.readVint)(this._buffer,this._cursor);if(null==e)return!1;var t=this._tag_stack[this._tag_stack.length-1];return t.sizeEnd=t.sizeStart+e.length,t.dataStart=t.sizeEnd,t.dataSize=e.value,-1===e.value?(t.dataEnd=-1,"m"===t.type&&(t.unknownSize=!0)):t.dataEnd=t.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=i.STATE_CONTENT,!0},e.prototype.readContent=function(){var e=this._tag_stack[this._tag_stack.length-1];if("m"===e.type){if(e.isEnd=!1,this._result.push(e),this._state=i.STATE_TAG,0===e.dataSize){var t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}if(this._buffer.length<this._cursor+e.dataSize)return!1;var n=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=n,e.type){case"u":e.value=n.readUIntBE(0,n.length);break;case"i":e.value=n.readIntBE(0,n.length);break;case"f":e.value=4===e.dataSize?n.readFloatBE(0):8===e.dataSize?n.readDoubleBE(0):(console.warn("cannot read ".concat(e.dataSize," octets float. failback to 0")),0);break;case"s":e.value=n.toString("ascii");break;case"8":e.value=n.toString("utf8");break;case"b":e.value=n;break;case"d":e.value=(0,o.convertEBMLDateToJSDate)(new r.Int64BE(n).toNumber())}if(null===e.value)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=i.STATE_TAG,this._cursor=0,this._tag_stack.pop();this._tag_stack.length>0;){var a=this._tag_stack[this._tag_stack.length-1];if(a.dataEnd<0)return this._tag_stack.pop(),!0;if(this._total<a.dataEnd)break;if("m"!==a.type)throw new Error("parent element is not master element");t=Object.assign({},a,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0},e}();t.default=l},8031:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3210),r=n(3210),o=n(4370),a=function(){function e(){this._schema=o.byEbmlID,this._buffers=[],this._stack=[]}return e.prototype.encode=function(e){var t=this;return i.concat(e.reduce((function(e,n){return e.concat(t.encodeChunk(n))}),[])).buffer},e.prototype.encodeChunk=function(e){return"m"===e.type?e.isEnd?this.endTag(e):this.startTag(e):(e.data=r.Buffer.from(e.data),this.writeTag(e)),this.flush()},e.prototype.flush=function(){var e=this._buffers;return this._buffers=[],e},e.prototype.getSchemaInfo=function(e){for(var t=Object.keys(this._schema).map(Number),n=0;n<t.length;n++){var i=t[n];if(this._schema[i].name===e)return new r.Buffer(i.toString(16),"hex")}return null},e.prototype.writeTag=function(e){var t=e.name,n=this.getSchemaInfo(t),r=e.data;if(null==n)throw new Error("No schema entry found for "+t);var o=i.encodeTag(n,r);this._stack.length>0?this._stack[this._stack.length-1].children.push({tagId:n,elm:e,children:[],data:o}):this._buffers=this._buffers.concat(o)},e.prototype.startTag=function(e){var t=e.name,n=this.getSchemaInfo(t);if(null==n)throw new Error("No schema entry found for "+t);if(e.unknownSize){var o=i.encodeTag(n,new r.Buffer(0),e.unknownSize);this._buffers=this._buffers.concat(o)}else{var a={tagId:n,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(a),this._stack.push(a)}},e.prototype.endTag=function(e){e.name;var t=this._stack.pop();if(null==t)throw new Error("EBML structure is broken");if(t.elm.name!==e.name)throw new Error("EBML structure is broken");var n=t.children.reduce((function(e,t){if(null===t.data)throw new Error("EBML structure is broken");return e.concat(t.data)}),[]),r=i.concat(n);"m"===t.elm.type?t.data=i.encodeTag(t.tagId,r,t.elm.unknownSize):t.data=i.encodeTag(t.tagId,r),this._stack.length<1&&(this._buffers=this._buffers.concat(t.data))},e}();t.default=a},1381:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(7187),a=n(3210),s=function(e){function t(){var t=e.call(this)||this;return t.logGroup="",t.hasLoggingStarted=!1,t.metadataloaded=!1,t.chunks=[],t.stack=[],t.segmentOffset=0,t.last2SimpleBlockVideoTrackTimecode=[0,0],t.last2SimpleBlockAudioTrackTimecode=[0,0],t.lastClusterTimecode=0,t.lastClusterPosition=0,t.timecodeScale=1e6,t.metadataSize=0,t.metadatas=[],t.cues=[],t.firstVideoBlockRead=!1,t.firstAudioBlockRead=!1,t.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null},t.trackTypes=[],t.trackDefaultDuration=[],t.trackCodecDelay=[],t.trackInfo={type:"nothing"},t.ended=!1,t.logging=!1,t.use_duration_every_simpleblock=!1,t.use_webp=!1,t.use_segment_info=!0,t.drop_default_duration=!0,t}return r(t,e),t.prototype.stop=function(){for(this.ended=!0,this.emit_segment_info();this.stack.length;)this.stack.pop(),this.logging&&console.groupEnd();this.logging&&this.hasLoggingStarted&&this.logGroup&&console.groupEnd()},t.prototype.emit_segment_info=function(){var e=this.chunks;if(this.chunks=[],this.metadataloaded){if(!this.use_segment_info)return;var t=this.lastClusterTimecode,n=this.duration,i=this.timecodeScale;this.emit("cluster",{timecode:t,data:e}),this.emit("duration",{timecodeScale:i,duration:n})}else{this.metadataloaded=!0,this.metadatas=e;var r=this.trackTypes.indexOf(1),o=this.trackTypes.indexOf(2);if(this.trackInfo=r>=0&&o>=0?{type:"both",trackNumber:r}:r>=0?{type:"video",trackNumber:r}:o>=0?{type:"audio",trackNumber:o}:{type:"nothing"},!this.use_segment_info)return;this.emit("metadata",{data:e,metadataSize:this.metadataSize})}},t.prototype.read=function(e){var t=this,n=!1;if(!this.ended){if("m"===e.type)if(e.isEnd)this.stack.pop();else{var i=this.stack[this.stack.length-1];if(null!=i&&i.level>=e.level){this.stack.pop(),this.logging&&console.groupEnd(),i.dataEnd=e.dataEnd,i.dataSize=e.dataEnd-i.dataStart,i.unknownSize=!1;var r=Object.assign({},i,{name:i.name,type:i.type,isEnd:!0});this.chunks.push(r)}this.stack.push(e)}if("m"===e.type&&"Segment"==e.name)0!=this.segmentOffset&&console.warn("Multiple segments detected!"),this.segmentOffset=e.dataStart,this.emit("segment_offset",this.segmentOffset);else if("b"===e.type&&"SimpleBlock"===e.name){var o=a.ebmlBlock(e.data),s=o.timecode,l=o.trackNumber,c=o.frames;if(1===this.trackTypes[l]){if(!this.firstVideoBlockRead&&(this.firstVideoBlockRead=!0,"both"===this.trackInfo.type||"video"===this.trackInfo.type)){var u=this.lastClusterTimecode+s;this.cues.push({CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u}),this.emit("cue_info",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u})}this.last2SimpleBlockVideoTrackTimecode=[this.last2SimpleBlockVideoTrackTimecode[1],s]}else if(2===this.trackTypes[l]){if(!this.firstAudioBlockRead&&(this.firstAudioBlockRead=!0,"audio"===this.trackInfo.type)){u=this.lastClusterTimecode+s;this.cues.push({CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u}),this.emit("cue_info",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:l,CueClusterPosition:this.lastClusterPosition,CueTime:u})}this.last2SimpleBlockAudioTrackTimecode=[this.last2SimpleBlockAudioTrackTimecode[1],s]}this.use_duration_every_simpleblock&&this.emit("duration",{timecodeScale:this.timecodeScale,duration:this.duration}),this.use_webp&&c.forEach((function(e){if("9d012a"===e.slice(3,6).toString("hex")){var n=a.VP8BitStreamToRiffWebPBuffer(e),i=new Blob([n],{type:"image/webp"}),r=t.duration;t.emit("webp",{currentTime:r,webp:i})}}))}else"m"===e.type&&"Cluster"===e.name&&!1===e.isEnd?(this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.emit_segment_info(),this.emit("cluster_ptr",e.tagStart),this.lastClusterPosition=e.tagStart):"u"===e.type&&"Timecode"===e.name?this.lastClusterTimecode=e.value:"u"===e.type&&"TimecodeScale"===e.name?this.timecodeScale=e.value:"m"===e.type&&"TrackEntry"===e.name?e.isEnd?(this.trackTypes[this.currentTrack.TrackNumber]=this.currentTrack.TrackType,this.trackDefaultDuration[this.currentTrack.TrackNumber]=this.currentTrack.DefaultDuration,this.trackCodecDelay[this.currentTrack.TrackNumber]=this.currentTrack.CodecDelay):this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null}:"u"===e.type&&"TrackType"===e.name?this.currentTrack.TrackType=e.value:"u"===e.type&&"TrackNumber"===e.name?this.currentTrack.TrackNumber=e.value:"u"===e.type&&"CodecDelay"===e.name?this.currentTrack.CodecDelay=e.value:"u"===e.type&&"DefaultDuration"===e.name?this.drop_default_duration?(console.warn("DefaultDuration detected!, remove it"),n=!0):this.currentTrack.DefaultDuration=e.value:"unknown"===e.name&&console.warn(e);!this.metadataloaded&&e.dataEnd>0&&(this.metadataSize=e.dataEnd),n||this.chunks.push(e),this.logging&&this.put(e)}},Object.defineProperty(t.prototype,"duration",{get:function(){if("nothing"===this.trackInfo.type)return console.warn("no video, no audio track"),0;var e=0,t=0,n=0,i=this.trackDefaultDuration[this.trackInfo.trackNumber];if("number"==typeof i)e=i;else if("both"===this.trackInfo.type)this.last2SimpleBlockAudioTrackTimecode[1]>this.last2SimpleBlockVideoTrackTimecode[1]?(e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackTypes.indexOf(2)])&&(t=r),n=this.last2SimpleBlockAudioTrackTimecode[1]):(e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackTypes.indexOf(1)])&&(t=r),n=this.last2SimpleBlockVideoTrackTimecode[1]);else if("video"===this.trackInfo.type){e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackInfo.trackNumber])&&(t=r),n=this.last2SimpleBlockVideoTrackTimecode[1]}else if("audio"===this.trackInfo.type){var r;e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale,"number"==typeof(r=this.trackCodecDelay[this.trackInfo.trackNumber])&&(t=r),n=this.last2SimpleBlockAudioTrackTimecode[1]}var o=((this.lastClusterTimecode+n)*this.timecodeScale+e-t)/this.timecodeScale;return Math.floor(o)},enumerable:!1,configurable:!0}),t.prototype.addListener=function(t,n){return e.prototype.addListener.call(this,t,n)},t.prototype.put=function(e){this.hasLoggingStarted||(this.hasLoggingStarted=!0,this.logging&&this.logGroup&&console.groupCollapsed(this.logGroup)),"m"===e.type?e.isEnd?console.groupEnd():console.group(e.name+":"+e.tagStart):"b"===e.type?console.log(e.name,e.type):console.log(e.name,e.tagStart,e.type,e.value)},t}(o.EventEmitter);t.default=s},4370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.byEbmlID=void 0,t.byEbmlID={128:{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."},131:{name:"TrackType",level:3,type:"u",mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control)."},133:{name:"ChapString",cppname:"ChapterString",level:5,type:"8",mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."},134:{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info."},136:{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)"},137:{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."},145:{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled)."},146:{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled)."},150:{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block."},151:{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block."},152:{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},16980:{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping"},16981:{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track."},17026:{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files."},17029:{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file."},17030:{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file."},17031:{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file."},17476:{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."},17505:{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date."},17540:{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)"},17541:{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString."},17543:{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Element."},17545:{name:"Duration",level:2,type:"f",minver:1,range:"> 0",description:"Duration of the segment (based on TimecodeScale)."},17816:{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)"},18016:{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file."},18017:{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18018:{name:"FileUsedEndTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18037:{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed."},20529:{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."},20530:{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)"},20531:{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption"},20532:{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking."},20533:{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise."},21368:{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster."},22100:{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage."},22337:{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Writing application ("mkvmerge-0.3.3").'},22612:{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."},25152:{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."},25188:{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",description:"Bits per sample, mostly used for PCM."},25906:{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."},26148:{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."},26897:{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26914:{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."},26916:{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."},26931:{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."},26948:{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26965:{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."},29555:{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."},29572:{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."},29766:{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."},2459272:{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."},408125543:{name:"Segment",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."},17530:{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."},17827:{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."},26568:{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."},25542:{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."},25540:{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."},25545:{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."},25541:{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."},25546:{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'},26826:{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."},25536:{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."},307544935:{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."},17677:{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'},17278:{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."},17276:{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."},143:{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"},25539:{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'},28348:{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."},28263:{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:">0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."},29636:{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."},182:{name:"ChapterAtom",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."},17885:{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"},17883:{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"},17853:{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},17852:{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."},17849:{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."},272869232:{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."},18094:{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."},18012:{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."},18030:{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."},18046:{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."},24999:{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."},423732329:{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."},235:{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."},21343:{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."},219:{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."},234:{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."},178:{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."},240:{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster.",position:"clusterRelative"},241:{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block.",position:"segment"},247:{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."},183:{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."},179:{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."},187:{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."},475249515:{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'},18406:{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"},18405:{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"},18404:{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."},18403:{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."},18402:{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."},18401:{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"},28032:{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."},196:{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},199:{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},198:{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"},193:{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},192:{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},237:{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."},233:{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"},230:{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."},229:{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."},228:{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"},227:{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"},226:{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."},32123:{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."},159:{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."},30901:{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"> 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."},181:{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:8e3,range:"> 0",description:"Sampling frequency in Hz."},225:{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."},2327523:{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"> 0",strong:"Informational",description:"Number of frames per second.  only."},3126563:{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"> 0",description:"Gamma Value."},3061028:{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."},21683:{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."},21682:{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth & DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."},21690:{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."},21680:{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."},21725:{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."},21708:{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."},21691:{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."},21674:{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."},186:{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."},176:{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."},21433:{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."},21440:{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."},21432:{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."},154:{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"},224:{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."},26277:{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."},26303:{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},26364:{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."},22203:{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."},22186:{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."},28587:{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."},170:{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."},2536e3:{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."},3883072:{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."},3839639:{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."},25506:{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."},2274716:{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."},21358:{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."},21998:{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."},21375:{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."},2306383:{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:1,range:"> 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."},2313850:{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:"The period in nanoseconds (not scaled by TimcodeScale)\nbetween two successive fields at the output of the decoding process (see the notes)"},2352003:{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."},28152:{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."},28135:{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."},156:{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"},21930:{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"},185:{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"},29637:{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."},215:{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."},174:{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."},374648427:{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."},175:{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"},202:{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},201:{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},200:{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},207:{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."},206:{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."},203:{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."},205:{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."},204:{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},232:{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},142:{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."},30114:{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."},164:{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."},253:{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."},251:{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."},250:{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."},155:{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'},165:{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."},238:{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."},166:{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."},30113:{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."},162:{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"},161:{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"},160:{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."},163:{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure"},171:{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing.",position:"prevCluster"},167:{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams.",position:"segment"},22743:{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."},231:{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."},524531317:{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."},19840:{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'},31657:{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."},2807730:{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:"1000000000",description:"Timestamp scale numerator, see TimecodeScale."},2807729:{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:"1000000",description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."},27045:{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."},27071:{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},27132:{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."},4096955:{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."},4110627:{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."},3965867:{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."},3979555:{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."},29604:{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."},357149030:{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."},21420:{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element).",position:"segment"},21419:{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name.",type2:"ebmlID"},19899:{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."},290298740:{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."},32379:{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."},32347:{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."},32437:{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."},32421:{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."},32410:{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."},32394:{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."},458458727:{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."},191:{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian",crc:!0},236:{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."},17139:{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."},17138:{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."},17143:{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."},440786851:{name:"EBML",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."},21936:{name:"Colour",level:"4",type:"m",mandatory:!0,multiple:!0,description:"Settings describing the colour format."},21937:{name:"MatrixCoefficients",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The Matrix Coefficients of the video used to derive luma and chroma values from red, green, and blue color primaries. For clarity, the value and meanings for MatrixCoefficients are adopted from Table 4 of ISO/IEC 23001-8:2016 or ITU-T H.273."},21945:{name:"Range",level:"5",type:"u",mandatory:!0,multiple:!0,description:"Clipping of the color ranges."},21946:{name:"TransferCharacteristics",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The transfer characteristics of the video."},21947:{name:"Primaries",level:"5",type:"u",mandatory:!0,multiple:!0,description:"The colour primaries of the video. For clarity, the value and meanings for Primaries are adopted from Table 2 of ISO/IEC 23091-4 or ITU-T H.273."}}},1384:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.tools=t.Reader=t.Encoder=t.Decoder=void 0,r(n(4990),t);var o=n(2800);t.Decoder=o.default;var a=n(8031);t.Encoder=a.default;var s=n(1381);t.Reader=s.default;var l=n(3210);t.tools=l},190:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3210),a=function(){function e(){}return e.readVint=function(t,n){void 0===n&&(n=0);var i=8-Math.floor(Math.log2(t[n]));if(i>8){var r=e.readHexString(t,n,n+i);throw new Error("Unrepresentable length: ".concat(i," ").concat(r))}if(n+i>t.length)return null;for(var o=t[n]&(1<<8-i)-1,a=1;a<i;a+=1){if(7===a&&o>=Math.pow(2,8)&&t[n+7]>0)return{length:i,value:-1};o*=Math.pow(2,8),o+=t[n+a]}return{length:i,value:o}},e.writeVint=function(e){if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: ".concat(e));var t=1;for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t+=1);for(var n=o.Buffer.alloc(t),i=e,r=1;r<=t;r+=1){var a=255&i;n[t-r]=a,i-=a,i/=Math.pow(2,8)}return n[0]|=1<<8-t,n},e.concatenate=function(e,t){return e||t?e&&0!==e.byteLength?t&&0!==t.byteLength?o.Buffer.from(r(r([],e,!0),t,!0)):e:t:o.Buffer.from([])},e.readHexString=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),Array.from(e.slice(t,n)).map((function(e){return Number(e).toString(16)})).reduce((function(e,t){return"".concat(e).concat(t.padStart(2,"0"))}),"")},e.readUtf8=function(e){try{return o.Buffer.from(e).toString("utf8")}catch(e){return null}},e.readUnsigned=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return n.getUint8(0);case 2:return n.getUint16(0);case 4:return n.getUint32(0)}return t.byteLength<=6?t.reduce((function(e,t){return 256*e+t}),0):e.readHexString(t,0,t.byteLength)},e.readSigned=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 1:return t.getInt8(0);case 2:return t.getInt16(0);case 4:return t.getInt32(0);default:return NaN}},e.readFloat=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return t.getFloat32(0);case 8:return t.getFloat64(0);default:return NaN}},e.readDate=function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return new Date(n.getUint8(0));case 2:return new Date(n.getUint16(0));case 4:return new Date(n.getUint32(0));case 8:return new Date(Number.parseInt(e.readHexString(t),16));default:return new Date(0)}},e.readDataFromTag=function(t,n){var r,o=t.type,a=t.name,s=t.track,l=t.discardable||!1,c=t.keyframe||!1,u=null;switch(o){case"u":r=e.readUnsigned(n);break;case"f":r=e.readFloat(n);break;case"i":r=e.readSigned(n);break;case"s":r=String.fromCharCode.apply(String,n);break;case"8":r=e.readUtf8(n);break;case"d":r=e.readDate(n)}if("SimpleBlock"===a||"Block"===a){var h=0,p=e.readVint(n,h),d=p.length;h+=d,s=p.value,r=e.readSigned(n.subarray(h,h+2)),h+=2,"SimpleBlock"===a&&(c=Boolean(128&n[d+2]),l=Boolean(1&n[d+2])),h+=1,u=n.subarray(h)}return i(i({},t),{data:n,discardable:l,keyframe:c,payload:u,track:s,value:r})},e}();t.default=a},3210:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertEBMLDateToJSDate=t.createFloatBuffer=t.createIntBuffer=t.createUIntBuffer=t.encodeValueToBuffer=t.concat=t.putRefinedMetaData=t.extractElement=t.removeElement=t.makeMetadataSeekable=t.createRIFFChunk=t.VP8BitStreamToRiffWebPBuffer=t.WebPBlockFilter=t.encodeTag=t.readBlock=t.ebmlBlock=t.writeVint=t.readVint=t.Buffer=void 0;var i=n(1166),r=n(8031),o=n(8166),a=n(190),s=n(1586);function l(e,n){var i=new t.Buffer(4);return i.writeUInt32LE(n.byteLength,0),f([new t.Buffer(e.substr(0,4),"ascii"),i,n,new t.Buffer(n.byteLength%2==0?0:1)])}function c(e,t){for(var n=-1,i=0;i<t.length;i++){var r=t[i];if(r.name===e){if("m"!==r.type)return void t.splice(i,1);if(r.isEnd){if(-1==n)throw new Error("Detected ".concat(e," closing element before finding the start"));return void t.splice(n,i-n+1)}n=i}}}function u(e,t){for(var n=[],i=-1,r=0;r<t.length;r++){var o=t[r];if(o.name===e){if("m"!==o.type){n.push(t[r]);break}if(o.isEnd){if(-1==i)throw new Error("Detected ".concat(e," closing element before finding the start"));n=t.slice(i,r+1);break}i=r}}return n}function h(e){var t=new r.default;return e.reduce((function(e,n){return e.concat(t.encode([n]))}),[]).reduce((function(e,t){return e+t.byteLength}),0)}function p(e,n,i){var r=i.duration,o=i.clusterPtrs,a=i.cues,s=e.slice(0);if("number"==typeof r){var l=!1;s.forEach((function(e){"f"===e.type&&"Duration"===e.name&&(l=!0,e.data=v(r,8))})),l||d(s,"Info",[{name:"Duration",type:"f",data:v(r,8)}])}Array.isArray(a)&&d(s,"Cues",function(e,t){var n=[];return e.forEach((function(e){var i=e.CueTrack,r=e.CueClusterPosition,o=e.CueTime;n.push({name:"CuePoint",type:"m",isEnd:!1}),n.push({name:"CueTime",type:"u",data:g(o)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!1}),n.push({name:"CueTrack",type:"u",data:g(i)}),n.push({name:"CueClusterPosition",type:"u",data:g(r+t)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!0}),n.push({name:"CuePoint",type:"m",isEnd:!0})})),n}(a,n));var c=[];return Array.isArray(o)&&(console.warn("append cluster pointers to seekhead is deprecated. please use cues"),c=function(e,n){var i=[];return e.forEach((function(e){i.push({name:"Seek",type:"m",isEnd:!1}),i.push({name:"SeekID",type:"b",data:new t.Buffer([31,67,182,117])}),i.push({name:"SeekPosition",type:"u",data:g(e+n)}),i.push({name:"Seek",type:"m",isEnd:!0})})),i}(o,n)),d(s,"SeekHead",c,!0),s}function d(e,t,n,i){void 0===i&&(i=!1);for(var r=-1,o=0;o<e.length;o++){var a=e[o];if("m"===a.type&&a.name===t&&!1===a.isEnd){r=o;break}}r>=0?Array.prototype.splice.apply(e,[r+1,0].concat(n)):i?[].concat([{name:t,type:"m",isEnd:!1}],n,[{name:t,type:"m",isEnd:!0}]).reverse().forEach((function(t){e.unshift(t)})):(e.push({name:t,type:"m",isEnd:!1}),n.forEach((function(t){e.push(t)})),e.push({name:t,type:"m",isEnd:!0}))}function f(e){return t.Buffer.concat(e)}function g(e){for(var n=1;e>=Math.pow(2,8*n);n++);if(n>=7)return console.warn("7bit or more bigger uint not supported."),new i.Uint64BE(e).toBuffer();var r=new t.Buffer(n);return r.writeUIntBE(e,0,n),r}function m(e){for(var n=1;e>=Math.pow(2,8*n);n++);if(n>=7)return console.warn("7bit or more bigger uint not supported."),new i.Int64BE(e).toBuffer();var r=new t.Buffer(n);return r.writeIntBE(e,0,n),r}function v(e,n){var i;if(void 0===n&&(n=8),8===n)return(i=new t.Buffer(8)).writeDoubleBE(e,0),i;if(4===n)return(i=new t.Buffer(4)).writeFloatBE(e,0),i;throw new Error("float type bits must 4bytes or 8bytes")}t.Buffer=o.Buffer,t.readVint=a.default.readVint,t.writeVint=a.default.writeVint,t.ebmlBlock=s,t.readBlock=function(e){return(0,t.ebmlBlock)(new t.Buffer(e))},t.encodeTag=function(e,n,i){return void 0===i&&(i=!1),f([e,i?new t.Buffer("01ffffffffffffff","hex"):(0,t.writeVint)(n.length),n])},t.WebPBlockFilter=function(e){return e.reduce((function(e,n){return"b"!==n.type||"SimpleBlock"!==n.name?e:(0,t.ebmlBlock)(n.data).frames.some((function(e){return"9d012a"===e.slice(3,6).toString("hex")}))?e.concat(n):e}),[])},t.VP8BitStreamToRiffWebPBuffer=function(e){var n=l("VP8 ",e);return l("RIFF",f([new t.Buffer("WEBP","ascii"),n]))},t.createRIFFChunk=l,t.makeMetadataSeekable=function(e,n,i){var o=u("EBML",e),a=h(o)+12,s=e[e.length-1].dataEnd-a,l=u("Info",e);c("Duration",l),l.splice(1,0,{name:"Duration",type:"f",data:v(n,8)});for(var p=h(l),d=u("Tracks",e),f=h(d),m=47,y=[],b=5+15*i.length,w=[],k=-1,C=function(e){var n=m,r=n+p,o=r+f,l=o+b-s;if((y=[]).push({name:"SeekHead",type:"m",isEnd:!1}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([21,73,169,102])}),y.push({name:"SeekPosition",type:"u",data:g(n)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([22,84,174,107])}),y.push({name:"SeekPosition",type:"u",data:g(r)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"Seek",type:"m",isEnd:!1}),y.push({name:"SeekID",type:"b",data:new t.Buffer([28,83,187,107])}),y.push({name:"SeekPosition",type:"u",data:g(o)}),y.push({name:"Seek",type:"m",isEnd:!0}),y.push({name:"SeekHead",type:"m",isEnd:!0}),m=h(y),(w=[]).push({name:"Cues",type:"m",isEnd:!1}),i.forEach((function(e){var t=e.CueTrack,n=e.CueClusterPosition,i=e.CueTime;w.push({name:"CuePoint",type:"m",isEnd:!1}),w.push({name:"CueTime",type:"u",data:g(i)}),w.push({name:"CueTrackPositions",type:"m",isEnd:!1}),w.push({name:"CueTrack",type:"u",data:g(t)}),n-=a,n+=l,w.push({name:"CueClusterPosition",type:"u",data:g(n)}),w.push({name:"CueTrackPositions",type:"m",isEnd:!0}),w.push({name:"CuePoint",type:"m",isEnd:!0})})),w.push({name:"Cues",type:"m",isEnd:!0}),b=h(w),k===l)return"break";if(k=l,9===e)throw new Error("Failed to converge to a stable metadata size")},E=0;E<10;E++){if("break"===C(E))break}var x=[].concat.apply([],[o,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},y,l,d,w]);return(new r.default).encode(x)},t.removeElement=c,t.extractElement=u,t.putRefinedMetaData=function(e,n){Array.isArray(n.cueInfos)&&!Array.isArray(n.cues)&&(console.warn("putRefinedMetaData: info.cueInfos property is deprecated. please use info.cues"),n.cues=n.cueInfos);for(var i=[],o=[],a=0;a<e.length;a++){var s=e[a];if("m"===s.type&&"Segment"===s.name){if(i=e.slice(0,a),o=e.slice(a),s.unknownSize){o.shift();break}throw new Error("this metadata is not streaming webm file")}}if(!(o[o.length-1].dataEnd>0))throw new Error("metadata dataEnd has wrong number");var l,c=o[o.length-1].dataEnd,u=i[i.length-1].dataEnd,h=(new r.default).encode(i).byteLength-u,d=c-o[0].tagStart,f=(o[0].tagStart,o[0].tagStart,new t.Buffer([24,83,128,103])),g=new t.Buffer("01ffffffffffffff","hex"),m=f.byteLength+g.byteLength,v=d;for(l=1;l<20;l++){var y=p(o,h+(u+m+v-c),n),b=(new r.default).encode(y).byteLength;if(b===v)return(new r.default).encode([].concat(i,[{type:"m",name:"Segment",isEnd:!1,unknownSize:!0}],y));v=b}throw new Error("unable to refine metadata, stable size could not be found in "+l+" iterations!")},t.concat=f,t.encodeValueToBuffer=function(e){var n=new t.Buffer(0);if("m"===e.type)return e;switch(e.type){case"u":n=g(e.value);break;case"i":n=m(e.value);break;case"f":n=v(e.value);break;case"s":n=new t.Buffer(e.value,"ascii");break;case"8":n=new t.Buffer(e.value,"utf8");break;case"b":n=e.value;break;case"d":n=new i.Int64BE(e.value.getTime().toString()).toBuffer()}return Object.assign({},e,{data:n})},t.createUIntBuffer=g,t.createIntBuffer=m,t.createFloatBuffer=v,t.convertEBMLDateToJSDate=function(e){return e instanceof Date?e:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(e)/1e3/1e3)}},8246:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1384);t.default=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,s,l,c,u,h,p,d;return r(this,(function(r){switch(r.label){case 0:if(!e)throw Error("call to fixWebmDuration requires a blob");t=new o.Decoder,n=new o.Reader,i=e.stream(),a=i.getReader(),r.label=1;case 1:return[4,a.read()];case 2:return s=r.sent(),l=s.done,c=s.value,l?(n.stop(),[3,3]):((u=null==(u=t.decode(c))?void 0:u.filter((function(e){return"unknown"!==e.type}))).forEach((function(e){n.read(e)})),c=null,[3,1]);case 3:return h=o.tools.makeMetadataSeekable(n.metadatas,n.duration,n.cues),p=new Blob([h],{type:e.type}),d=e.slice(n.metadataSize),[2,new Blob([p,d],{type:e.type})]}}))}))}},8166:(e,t,n)=>{"use strict";const i=n(9742),r=n(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let i=s(n);const r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||$(e.length)?s(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),s(e<0?0:0|f(e))}function p(e){const t=e.length<0?0:0|f(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return i?-1:G(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){let i=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let i=0;i<l;i++)if(c(e,o+i)!==c(t,i)){n=!1;break}if(n)return o}return-1}function w(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if($(i))return a;e[n+a]=i}return a}function k(e,t,n,i){return Y(G(t,e.length-n),e,n,i)}function C(e,t,n,i){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function E(e,t,n,i){return Y(K(t),e,n,i)}function x(e,t,n,i){return Y(function(e,t){let n,i,r;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(r+a<=n){let n,i,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=a}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=T));return n}(i)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))r+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(i,r),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function D(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function A(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function L(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=Z[e[i]];return r}function P(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function F(e,t,n,i,r){U(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function B(e,t,n,i,r){U(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function N(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||_(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||_(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=t,r=1,o=this[e+--i];for(;i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||_(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Q((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||_(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q((function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}let r=0,o=1,a=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}let r=n-1,o=1,a=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q((function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=o[r%a]}return this};const V={};function z(e,t,n){V[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function U(e,t,n,i,r,o){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new V.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||_(t,e.length-(n+1))}(i,r,o)}function W(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function _(e,t,n){if(Math.floor(e)!==e)throw W(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=q(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const i=e.length;let r=null;const o=[];for(let a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function Q(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},7529:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},5572:(e,t,n)=>{"use strict";var i=n(3278),r=n(7529),o=n(4186);function a(e){var t=this.data("settings"),n=i(o);n.prototype.options=r(n.prototype.options,t,e),this.Parser=n}e.exports=a,a.Parser=o},8204:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},1819:(e,t,n)=>{"use strict";var i=n(7529),r=n(7574);e.exports=function(e){return n.raw=function(e,n,a){return r(e,i(a,{position:t(n),warning:o}))},n;function t(t){for(var n=e.offset,i=t.line,r=[];++i&&i in n;)r.push((n[i]||0)+1);return{start:t,indent:r}}function n(n,i,a){r(n,{position:t(i),warning:o,text:a,reference:a,textContext:e,referenceContext:e})}function o(t,n,i){3!==i&&e.file.message(t,n)}}},3114:(e,t,n)=>{"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,pedantic:!1,blocks:n(8204)}},563:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("\n",t);for(;n>t&&" "===e.charAt(n-1);)n--;return n}},6497:e=>{"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},3723:e=>{"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},973:(e,t,n)=>{"use strict";var i=n(6195),r=n(6260);function o(e){return i(e)||r(e)||43===e||45===e||46===e||95===e}e.exports=function e(t,n){var i,r;if(!this.options.gfm)return-1;if(-1===(i=t.indexOf("@",n)))return-1;if((r=i)===n||!o(t.charCodeAt(r-1)))return e.call(this,t,i+1);for(;r>n&&o(t.charCodeAt(r-1));)r--;return r}},2411:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),i=e.indexOf("_",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},4681:e=>{"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},633:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),i=e.indexOf("![",t);if(-1===i)return n;return n<i?n:i}},1016:e=>{"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),i=e.indexOf("__",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},46:e=>{"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},8637:e=>{"use strict";e.exports=function(e,n){var i,r,o,a=-1;if(!this.options.gfm)return a;r=t.length,i=-1;for(;++i<r;)-1!==(o=e.indexOf(t[i],n))&&(-1===a||o<a)&&(a=o);return a};var t=["www.","http://","https://"]},4767:(e,t,n)=>{"use strict";var i=n(7529),r=n(3183);e.exports=function(){var e,t=this,n=String(t.file),a={line:1,column:1,offset:0},s=i(a);65279===(n=n.replace(o,"\n")).charCodeAt(0)&&(n=n.slice(1),s.column++,s.offset++);e={type:"root",children:t.tokenizeBlock(n,s),position:{start:a,end:t.eof||i(a)}},t.options.position||r(e,!0);return e};var o=/\r\n|\r/g},4186:(e,t,n)=>{"use strict";var i=n(7529),r=n(78),o=n(4787),a=n(7678),s=n(1819),l=n(831);function c(e,t){this.file=t,this.offset={},this.options=i(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(t).toOffset,this.unescape=a(this,"escape"),this.decode=s(this)}e.exports=c;var u=c.prototype;function h(e){var t,n=[];for(t in e)n.push(t);return n}u.setOptions=n(5248),u.parse=n(4767),u.options=n(3114),u.exitStart=r("atStart",!0),u.enterList=r("inList",!1),u.enterLink=r("inLink",!1),u.enterBlock=r("inBlock",!1),u.interruptParagraph=[["thematicBreak"],["list"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}]],u.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}]],u.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}]],u.blockTokenizers={blankLine:n(9269),indentedCode:n(6167),fencedCode:n(1484),blockquote:n(8502),atxHeading:n(684),thematicBreak:n(8352),list:n(2866),setextHeading:n(1578),html:n(6494),definition:n(7742),table:n(308),paragraph:n(7006)},u.inlineTokenizers={escape:n(1796),autoLink:n(2768),url:n(26),email:n(4937),html:n(5810),link:n(7786),reference:n(977),strong:n(1248),emphasis:n(3391),deletion:n(5702),code:n(1243),break:n(4245),text:n(8825)},u.blockMethods=h(u.blockTokenizers),u.inlineMethods=h(u.inlineTokenizers),u.tokenizeBlock=l("block"),u.tokenizeInline=l("inline"),u.tokenizeFactory=l},5248:(e,t,n)=>{"use strict";var i=n(7529),r=n(2123),o=n(3114);e.exports=function(e){var t,n,a=this,s=a.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=i(e)}for(t in o){if(null==(n=e[t])&&(n=s[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return a.options=e,a.escape=r(e),a}},2768:(e,t,n)=>{"use strict";var i=n(2139),r=n(7574),o=n(46);e.exports=l,l.locator=o,l.notInLink=!0;var a="mailto:",s=a.length;function l(e,t,n){var o,l,c,u,h,p=this,d="",f=t.length,g=0,m="",v=!1,y="";if("<"===t.charAt(0)){for(g++,d="<";g<f&&(o=t.charAt(g),!(i(o)||">"===o||"@"===o||":"===o&&"/"===t.charAt(g+1)));)m+=o,g++;if(m){if(y+=m,m="",y+=o=t.charAt(g),g++,"@"===o)v=!0;else{if(":"!==o||"/"!==t.charAt(g+1))return;y+="/",g++}for(;g<f&&(o=t.charAt(g),!i(o)&&">"!==o);)m+=o,g++;if(o=t.charAt(g),m&&">"===o)return!!n||(c=y+=m,d+=y+o,(l=e.now()).column++,l.offset++,v&&(y.slice(0,s).toLowerCase()===a?(c=c.slice(s),l.column+=s,l.offset+=s):y=a+y),u=p.inlineTokenizers,p.inlineTokenizers={text:u.text},h=p.enterLink(),c=p.tokenizeInline(c,l),p.inlineTokenizers=u,h(),e(d)({type:"link",title:null,url:r(y,{nonTerminated:!1}),children:c}))}}}},9269:e=>{"use strict";var t=/^[ \t]*(\n|$)/;e.exports=function(e,n,i){var r,o="",a=0,s=n.length;for(;a<s&&null!=(r=t.exec(n.slice(a)));)a+=r[0].length,o+=r[0];if(""===o)return;if(i)return!0;e(o)}},8502:(e,t,n)=>{"use strict";var i=n(2745),r=n(7901);e.exports=function(e,t,n){var o,a,s,l,c,u,h,p,d,f=this,g=f.offset,m=f.blockTokenizers,v=f.interruptBlockquote,y=e.now(),b=y.line,w=t.length,k=[],C=[],E=[],x=0;for(;x<w&&(" "===(a=t.charAt(x))||"\t"===a);)x++;if(">"!==t.charAt(x))return;if(n)return!0;x=0;var S=null,M=!1;for(;x<w;){for(l=t.indexOf("\n",x),h=x,p=!1,-1===l&&(l=w);x<w&&(" "===(a=t.charAt(x))||"\t"===a);)x++;if(">"===t.charAt(x)?(x++,p=!0," "===t.charAt(x)&&x++):x=h,c=t.slice(x,l),!p&&!i(c)){x=h;break}if(!p&&(s=t.slice(x),r(v,m,f,[e,s,!0])))break;if(0===h){var T=c.match(/^\[!([^\]]+)\]([+\-]?)(?:\s|$)/);if(T){let e=T[1],t=e,n="",i=e.indexOf("|");-1!==i&&(t=e.substr(0,i),n=e.substr(i+1)),S={type:t.trim().toLowerCase().replace(/\s+/g,"-"),fold:T[2],data:n};var D=T[0].length;x+=D,(c=c.substr(D)).trim()&&(M=!0)}}u=h===x?c:t.slice(h,l),E.push(x-h),k.push(u),C.push(c),x=l+1}x=-1,w=E.length,o=e(k.join("\n"));for(;++x<w;)g[b]=(g[b]||0)+E[x],b++;return d=f.enterBlock(),f.options.breakOnce=M,C=f.tokenizeBlock(C.join("\n"),y),f.options.breakOnce=!1,d(),o({type:"blockquote",children:C,callout:S})}},4245:(e,t,n)=>{"use strict";var i=n(563);e.exports=r,r.locator=i;function r(e,t,n){for(var i,r=t.length,o=-1,a="";++o<r;){if("\n"===(i=t.charAt(o))){if(o<2)return;return!!n||e(a+=i)({type:"break"})}if(" "!==i)return;a+=i}}},1484:e=>{"use strict";e.exports=function(e,r,o){var a,s,l,c,u,h,p,d,f,g,m,v,y,b=this,w=b.options.gfm,k=r.length+1,C=0,E="";if(!w)return;for(;C<k&&((l=r.charAt(C))===i||l===n);)E+=l,C++;if(v=C,"~"!==(l=r.charAt(C))&&"`"!==l)return;C++,s=l,a=1,E+=l;for(;C<k&&(l=r.charAt(C))===s;)E+=l,a++,C++;if(a<3)return;for(;C<k&&((l=r.charAt(C))===i||l===n);)E+=l,C++;c="",p="";for(;C<k&&(l=r.charAt(C))!==t&&("`"!==s||l!==s);)l===i||l===n?p+=l:(c+=p+l,p=""),C++;if((l=r.charAt(C))&&l!==t)return;if(o)return!0;(y=e.now()).column+=E.length,y.offset+=E.length,E+=c,c=b.decode.raw(b.unescape(c),y),p&&(E+=p);p="",g="",m="",d="",f="";var x=!0;for(;C<k;)if(l=r.charAt(C),d+=g,f+=m,g="",m="",l===t){for(x?(E+=l,x=!1):(g+=l,m+=l),p="",C++;C<k&&(l=r.charAt(C))===i;)p+=l,C++;if(g+=p,m+=p.slice(v),!(p.length>=4)){for(p="";C<k&&(l=r.charAt(C))===s;)p+=l,C++;if(g+=p,m+=p,!(p.length<a)){for(p="";C<k&&((l=r.charAt(C))===i||l===n);)g+=l,m+=l,C++;if(!l||l===t)break}}}else d+=l,m+=l,C++;E+=d+g,C=-1,k=c.length;for(;++C<k;)if((l=c.charAt(C))===i||l===n)u||(u=c.slice(0,C));else if(u){h=c.slice(C);break}return e(E)({type:"code",lang:u||c||null,meta:h||null,value:f})};var t="\n",n="\t",i=" "},6167:(e,t,n)=>{"use strict";var i=n(6464),r=n(7257);e.exports=function(e,t,n){var i,a,s,l=-1,c=t.length,u="",h="",p="",d="";for(;++l<c;)if(i=t.charAt(l),s)if(s=!1,u+=p,h+=d,p="",d="","\n"===i)p=i,d=i;else for(u+=i,h+=i;++l<c;){if(!(i=t.charAt(l))||"\n"===i){d=i,p=i;break}u+=i,h+=i}else if(" "===i&&t.charAt(l+1)===i&&t.charAt(l+2)===i&&t.charAt(l+3)===i)p+=o,l+=3,s=!0;else if("\t"===i)p+=i,s=!0;else{for(a="";"\t"===i||" "===i;)a+=i,i=t.charAt(++l);if("\n"!==i)break;p+=a+i,d+=i}if(h)return!!n||e(u)({type:"code",lang:null,meta:null,value:r(h)})};var o=i(" ",4)},1243:(e,t,n)=>{"use strict";var i=n(6497);e.exports=r,r.locator=i;function r(e,t,n){for(var i,r,o,a,s,l,c=t.length,u=0;u<c&&96===t.charCodeAt(u);)u++;if(0!==u&&u!==c){for(i=u,s=t.charCodeAt(u);u<c;){if(a=s,s=t.charCodeAt(u+1),96===a){if(void 0===r&&(r=u),o=u+1,96!==s&&o-r===i){l=!0;break}}else void 0!==r&&(r=void 0,o=void 0);u++}if(l){if(n)return!0;if(u=i,c=r,a=t.charCodeAt(u),s=t.charCodeAt(c-1),l=!1,c-u>2&&(32===a||10===a)&&(32===s||10===s)){for(u++,c--;u<c;){if(32!==(a=t.charCodeAt(u))&&10!==a){l=!0;break}u++}!0===l&&(i++,r--)}return e(t.slice(0,o))({type:"inlineCode",value:t.slice(i,r)})}}}},7742:(e,t,n)=>{"use strict";var i=n(2139),r=n(6749);e.exports=function(e,t,n){var i,h,p,d,f,g,m,v,y=this,b=y.options.commonmark,w=0,k=t.length,C="";for(;w<k&&((d=t.charAt(w))===s||d===a);)C+=d,w++;if("["!==(d=t.charAt(w)))return;w++,C+=d,p="";for(;w<k&&(d=t.charAt(w))!==l;)"\\"===d&&(p+=d,w++,d=t.charAt(w)),p+=d,w++;if(!p||t.charAt(w)!==l||":"!==t.charAt(w+1))return;g=p,w=(C+=p+l+":").length,p="";for(;w<k&&((d=t.charAt(w))===a||d===s||d===o);)C+=d,w++;if(d=t.charAt(w),p="",i=C,"<"===d){for(w++;w<k&&c(d=t.charAt(w));)p+=d,w++;if((d=t.charAt(w))===c.delimiter)C+="<"+p+d,w++;else{if(b)return;w-=p.length+1,p=""}}if(!p){for(;w<k&&u(d=t.charAt(w));)p+=d,w++;C+=p}if(!p)return;m=p,p="";for(;w<k&&((d=t.charAt(w))===a||d===s||d===o);)p+=d,w++;d=t.charAt(w),f=null,'"'===d?f='"':"'"===d?f="'":"("===d&&(f=")");if(f){if(!p)return;for(w=(C+=p+d).length,p="";w<k&&(d=t.charAt(w))!==f;){if(d===o){if(w++,(d=t.charAt(w))===o||d===f)return;p+=o}p+=d,w++}if((d=t.charAt(w))!==f)return;h=C,C+=p+d,w++,v=p,p=""}else p="",w=C.length;for(;w<k&&((d=t.charAt(w))===a||d===s);)C+=d,w++;if(!(d=t.charAt(w))||d===o)return!!n||(i=e(i).test().end,m=y.decode.raw(y.unescape(m),i,{nonTerminated:!1}),v&&(h=e(h).test().end,v=y.decode.raw(y.unescape(v),h)),e(C)({type:"definition",identifier:r(g),label:g,title:v||null,url:m}))};var o="\n",a="\t",s=" ",l="]";function c(e){return">"!==e&&"["!==e&&e!==l}function u(e){return"["!==e&&e!==l&&!i(e)}c.delimiter=">"},5702:(e,t,n)=>{"use strict";var i=n(2139),r=n(3723);e.exports=a,a.locator=r;var o="~";function a(e,t,n){var r,a,s,l="",c="",u="",h="";if(this.options.gfm&&t.charAt(0)===o&&t.charAt(1)===o&&!i(t.charAt(2)))for(r=1,a=t.length,(s=e.now()).column+=2,s.offset+=2;++r<a;){if(!((l=t.charAt(r))!==o||c!==o||u&&i(u)))return!!n||e("~~"+h+"~~")({type:"delete",children:this.tokenizeInline(h,s)});h+=c,u=c,c=l}}},4937:(e,t,n)=>{"use strict";var i=n(7574),r=n(6195),o=n(6260),a=n(973);e.exports=s,s.locator=a,s.notInLink=!0;function s(e,t,n){var a,s,l,c,u=this,h=u.options.gfm,p=u.inlineTokenizers,d=0,f=t.length,g=-1;if(h){for(a=t.charCodeAt(d);r(a)||o(a)||43===a||45===a||46===a||95===a;)a=t.charCodeAt(++d);if(0!==d&&64===a){for(d++;d<f&&(a=t.charCodeAt(d),r(a)||o(a)||45===a||46===a||95===a);)d++,-1===g&&46===a&&(g=d);if(-1!==g&&g!==d&&45!==a&&95!==a)return 46===a&&d--,s=t.slice(0,d),!!n||(c=u.enterLink(),u.inlineTokenizers={text:p.text},l=u.tokenizeInline(s,e.now()),u.inlineTokenizers=p,c(),e(s)({type:"link",title:null,url:"mailto:"+i(s,{nonTerminated:!1}),children:l}))}}}},3391:(e,t,n)=>{"use strict";var i=n(2745),r=n(3017),o=n(2139),a=n(2411);e.exports=s,s.locator=a;function s(e,t,n){var a,s,l,c,u,h,p,d=0,f=t.charAt(d);if(!("*"!==f&&"_"!==f||(s=this.options.pedantic,u=f,l=f,h=t.length,d++,c="",f="",s&&o(t.charAt(d)))))for(;d<h;){if(p=f,!((f=t.charAt(d))!==l||s&&o(p))){if((f=t.charAt(++d))!==l){if(!i(c)||p===l)return;if(!s&&"_"===l&&r(f)){c+=l;continue}return!!n||((a=e.now()).column++,a.offset++,e(u+c+l)({type:"emphasis",children:this.tokenizeInline(c,a)}))}c+=l}s||"\\"!==f||(c+=f,f=t.charAt(++d)),c+=f,d++}}},1796:(e,t,n)=>{"use strict";var i=n(4681);e.exports=r,r.locator=i;function r(e,t,n){var i,r;if("\\"===t.charAt(0)&&(i=t.charAt(1),-1!==this.escape.indexOf(i)))return!!n||(r="\n"===i?{type:"break"}:{type:"text",value:i},e("\\"+i)(r))}},684:e=>{"use strict";e.exports=function(e,r,o){var a,s,l,c=this.options.pedantic,u=r.length+1,h=-1,p=e.now(),d="",f="";for(;++h<u;){if((a=r.charAt(h))!==n&&a!==t){h--;break}d+=a}l=0;for(;++h<=u;){if((a=r.charAt(h))!==i){h--;break}d+=a,l++}if(l>6)return;if(!l||!c&&r.charAt(h+1)===i)return;u=r.length+1,s="";for(;++h<u;){if((a=r.charAt(h))!==n&&a!==t){h--;break}s+=a}if(!c&&0===s.length&&a&&"\n"!==a)return;if(o)return!0;d+=s,s="",f="";for(;++h<u&&(a=r.charAt(h))&&"\n"!==a;)if(a===n||a===t||a===i){for(;a===n||a===t;)s+=a,a=r.charAt(++h);if(c||!f||s||a!==i){for(;a===i;)s+=a,a=r.charAt(++h);for(;a===n||a===t;)s+=a,a=r.charAt(++h);h--}else f+=a}else f+=s+a,s="";return p.column+=d.length,p.offset+=d.length,e(d+=f+s)({type:"heading",depth:l,children:this.tokenizeInline(f,p)})};var t="\t",n=" ",i="#"},1578:e=>{"use strict";e.exports=function(e,t,n){var i,r,o,a,s,l=e.now(),c=t.length,u=-1,h="";for(;++u<c;){if(" "!==(o=t.charAt(u))||u>=3){u--;break}h+=o}i="",r="";for(;++u<c;){if("\n"===(o=t.charAt(u))){u--;break}" "===o||"\t"===o?r+=o:(i+=r+o,r="")}if(l.column+=h.length,l.offset+=h.length,h+=i+r,o=t.charAt(++u),a=t.charAt(++u),"\n"!==o||"="!==a&&"-"!==a)return;h+=o,r=a,s="="===a?1:2;for(;++u<c;){if((o=t.charAt(u))!==a){if("\n"!==o)return;u--;break}r+=o}if(n)return!0;return e(h+r)({type:"heading",depth:s,children:this.tokenizeInline(i,l)})}},6494:(e,t,n)=>{"use strict";var i=n(1537).g;e.exports=function(e,t,n){var i,m,v,y,b,w,k,C=this.options.blocks.join("|"),E=new RegExp("^</?("+C+")(?=(\\s|/?>|$))","i"),x=t.length,S=0,M=[[r,o,!0],[a,s,!0],[l,c,!0],[u,h,!0],[p,d,!0],[E,f,!0],[g,f,!1]];for(;S<x&&("\t"===(y=t.charAt(S))||" "===y);)S++;if("<"!==t.charAt(S))return;i=-1===(i=t.indexOf("\n",S+1))?x:i,m=t.slice(S,i),v=-1,b=M.length;for(;++v<b;)if(M[v][0].test(m)){w=M[v];break}if(!w)return;if(n)return w[2];if(S=i,!w[1].test(m))for(;S<x;){if(i=-1===(i=t.indexOf("\n",S+1))?x:i,m=t.slice(S+1,i),w[1].test(m)){m&&(S=i);break}S=i}return k=t.slice(0,S),e(k)({type:"html",value:k})};var r=/^<(script|pre|style)(?=(\s|>|$))/i,o=/<\/(script|pre|style)>/i,a=/^<!--/,s=/-->/,l=/^<\?/,c=/\?>/,u=/^<![A-Za-z]/,h=/>/,p=/^<!\[CDATA\[/,d=/]]>/,f=/^$/,g=new RegExp(i.source+"\\s*$")},5810:(e,t,n)=>{"use strict";var i=n(6260),r=n(46),o=n(1537)._;e.exports=l,l.locator=r;var a=/^<a /i,s=/^<\/a>/i;function l(e,t,n){var r,l,c=this,u=t.length;if(!("<"!==t.charAt(0)||u<3)&&(r=t.charAt(1),(i(r)||"?"===r||"!"===r||"/"===r)&&(l=t.match(o))))return!!n||(l=l[0],!c.inLink&&a.test(l)?c.inLink=!0:c.inLink&&s.test(l)&&(c.inLink=!1),e(l)({type:"html",value:l}))}},7786:(e,t,n)=>{"use strict";var i=n(2139),r=n(633);e.exports=l,l.locator=r;var o="(",a=")",s="\\";function l(e,t,n){var r,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,E,x,S=this,M="",T=0,D=t.charAt(0),A=S.options.pedantic,L=S.options.commonmark,P=S.options.gfm;if("!"===D&&(f=!0,M=D,D=t.charAt(++T)),"["===D&&(f||!S.inLink)){for(M+=D,w="",T++,v=t.length,b=0,(C=e.now()).column+=T,C.offset+=T;T<v;){if(p=D=t.charAt(T),"`"===D){for(l=1;"`"===t.charAt(T+1);)p+=D,T++,l++;c?l>=c&&(c=0):c=l}else if(D===s)T++,p+=t.charAt(T);else if(c&&!P||"["!==D){if((!c||P)&&"]"===D){if(!b){if(t.charAt(T+1)!==o)return;p+=o,r=!0,T++;break}b--}}else b++;w+=p,p="",T++}if(r){for(g=w,M+=w+p,T++;T<v&&(D=t.charAt(T),i(D));)M+=D,T++;if(w="",u=M,"<"===(D=t.charAt(T))){for(T++,u+="<";T<v&&">"!==(D=t.charAt(T));){if(L&&"\n"===D)return;w+=D,T++}if(">"!==t.charAt(T))return;M+="<"+w+">",k=w,T++}else{for(D=null,p="";T<v&&(D=t.charAt(T),!p||!('"'===D||"'"===D||L&&D===o));){if(i(D)){if(!A)break;p+=D}else{if(D===o)b++;else if(D===a){if(0===b)break;b--}w+=p,p="",D===s&&(w+=s,D=t.charAt(++T)),w+=D}T++}k=w,T=(M+=w).length}for(w="";T<v&&(D=t.charAt(T),i(D));)w+=D,T++;if(D=t.charAt(T),M+=w,w&&('"'===D||"'"===D||L&&D===o))if(T++,w="",m=D===o?a:D,h=M+=D,L){for(;T<v&&(D=t.charAt(T))!==m;)D===s&&(w+=s,D=t.charAt(++T)),T++,w+=D;if((D=t.charAt(T))!==m)return;for(y=w,M+=w+D,T++;T<v&&(D=t.charAt(T),i(D));)M+=D,T++}else for(p="";T<v;){if((D=t.charAt(T))===m)d&&(w+=m+p,p=""),d=!0;else if(d){if(D===a){M+=w+m+p,y=w;break}i(D)?p+=D:(w+=m+p+D,p="",d=!1)}else w+=D;T++}if(t.charAt(T)===a)return!!n||(M+=a,k=S.decode.raw(S.unescape(k),e(u).test().end,{nonTerminated:!1}),y&&(h=e(h).test().end,y=S.decode.raw(S.unescape(y),h)),x={type:f?"image":"link",title:y||null,url:k},f?x.alt=S.decode.raw(S.unescape(g),C)||null:(E=S.enterLink(),x.children=S.tokenizeInline(g,C),E()),e(M)(x))}}}},2866:(e,t,n)=>{"use strict";var i=n(2745),r=n(6464),o=n(6195),a=n(8930),s=n(9460),l=n(7901);e.exports=function(e,t,n){var r,a,s,p,d,f,g,m,y,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O=this,F=O.options.commonmark,B=O.options.pedantic,N=O.blockTokenizers,R=O.interruptList,H=0,V=t.length,z=null,q=!1;for(;H<V&&((p=t.charAt(H))===h||p===c);)H++;if("*"===(p=t.charAt(H))||"+"===p||"-"===p)d=p,s=!1;else{for(s=!0,a="";H<V&&(p=t.charAt(H),o(p));)a+=p,H++;if(p=t.charAt(H),!a||!("."===p||F&&")"===p))return;if(n&&"1"!==a)return;z=parseInt(a,10),d=p}if((p=t.charAt(++H))!==c&&p!==h&&(B||p!==u&&""!==p))return;if(n)return!0;H=0,E=[],x=[],S=[];for(;H<V;){for(f=t.indexOf(u,H),g=H,m=!1,I=!1,-1===f&&(f=V),r=0;H<V;){if((p=t.charAt(H))===h)r+=4-r%4;else{if(p!==c)break;r++}H++}if(M&&r>=M.indent&&(I=!0),p=t.charAt(H),y=null,!I){if("*"===p||"+"===p||"-"===p)y=p,H++,r++;else{for(a="";H<V&&(p=t.charAt(H),o(p));)a+=p,H++;p=t.charAt(H),H++,a&&("."===p||F&&")"===p)&&(y=p,r+=a.length+1)}if(y)if((p=t.charAt(H))===h)r+=4-r%4,H++;else if(p===c){for(P=H+4;H<P&&t.charAt(H)===c;)H++,r++;H===P&&t.charAt(H)===c&&(H-=3,r-=3)}else p!==u&&""!==p&&(y=null)}if(y){if(!B&&d!==y)break;m=!0}else F||I||t.charAt(g)!==c?F&&M&&(I=r>=M.indent||r>4):I=!0,m=!1,H=g;if(w=t.slice(g,f),b=g===H?w:t.slice(H,f),("*"===y||"_"===y||"-"===y)&&N.thematicBreak.call(O,e,w,!0))break;if(k=C,C=!m&&!i(b).length,I&&M)M.value=M.value.concat(S,w),x=x.concat(S,w),S=[];else if(m)0!==S.length&&(q=!0,M.value.push(""),M.trail=S.concat()),M={value:[w],indent:r,trail:[]},E.push(M),x=x.concat(S,w),S=[];else if(C){if(k&&!F)break;S.push(w)}else{if(k)break;if(l(R,N,O,[e,w,!0]))break;M.value=M.value.concat(S,w),x=x.concat(S,w),S=[]}H=f+1}A=e(x.join(u)).reset({type:"list",ordered:s,start:z,spread:q,children:[]}),T=O.enterList(),D=O.enterBlock(),H=-1,V=E.length;for(;++H<V;)M=E[H].value.join(u),L=e.now(),e(M)(v(O,M,L),A),M=E[H].trail.join(u),H!==V-1&&(M+=u),e(M);return T(),D(),A};var c=" ",u="\n",h="\t",p=/\n\n(?!\s*$)/,d=/^\[(.)][ \t]/,f=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,g=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,m=/^( {1,4}|\t)?/gm;function v(e,t,n){var i,r,o=e.offset,a=e.options.pedantic?y:b,s=null,l=null;return t=a.apply(null,arguments),e.options.gfm&&(i=t.match(d))&&(r=i[0].length,s=" "!==i[1],l=i[1],o[n.line]+=r,t=t.slice(r)),{type:"listItem",spread:p.test(t),checked:s,checklist:l,children:e.tokenizeBlock(t,n)}}function y(e,t,n){var i=e.offset,r=n.line;return t=t.replace(g,o),r=n.line,t.replace(m,o);function o(e){return i[r]=(i[r]||0)+e.length,r++,""}}function b(e,t,n){var i,o,l,h,p,d,g,m=e.offset,v=n.line;for(h=(t=t.replace(f,(function(e,t,n,a,s){o=t+n+a,l=s,Number(n)<10&&o.length%2==1&&(n=c+n);return(i=t+r(c,n.length)+a)+l}))).split(u),(p=s(t,a(i).indent).split(u))[0]=l,m[v]=(m[v]||0)+o.length,v++,d=0,g=h.length;++d<g;)m[v]=(m[v]||0)+h[d].length-p[d].length,v++;return p.join(u)}},7006:(e,t,n)=>{"use strict";var i=n(2745),r=n(7257),o=n(7901);e.exports=function(e,t,n){var s,l,c,u,h,p=this,d=p.options.commonmark,f=p.blockTokenizers,g=p.interruptParagraph,m=t.indexOf(a),v=t.length;for(;m<v;){if(-1===m){m=v;break}if(t.charAt(m+1)===a)break;if(d){for(u=0,s=m+1;s<v;){if("\t"===(c=t.charAt(s))){u=4;break}if(" "!==c)break;u++,s++}if(u>=4&&c!==a){m=t.indexOf(a,m+1);continue}}if(l=t.slice(m+1),o(g,f,p,[e,l,!0]))break;if(s=m,-1!==(m=t.indexOf(a,m+1))&&""===i(t.slice(s,m))){m=s;break}}if(l=t.slice(0,m),n)return!0;return h=e.now(),l=r(l),e(l)({type:"paragraph",children:p.tokenizeInline(l,h)})};var a="\n"},977:(e,t,n)=>{"use strict";var i=n(2139),r=n(633),o=n(6749);e.exports=h,h.locator=r;var a="link",s="full",l="[",c="\\",u="]";function h(e,t,n){var r,h,p,d,f,g,m,v,y=this,b=y.options.commonmark,w=t.charAt(0),k=0,C=t.length,E="",x="",S=a,M="shortcut";if("!"===w&&(S="image",x=w,w=t.charAt(++k)),w===l){for(k++,x+=w,g="",v=0;k<C;){if((w=t.charAt(k))===l)m=!0,v++;else if(w===u){if(!v)break;v--}w===c&&(g+=c,w=t.charAt(++k)),g+=w,k++}if(E=g,r=g,(w=t.charAt(k))===u){if(k++,E+=w,g="",!b)for(;k<C&&(w=t.charAt(k),i(w));)g+=w,k++;if((w=t.charAt(k))===l){for(h="",g+=w,k++;k<C&&(w=t.charAt(k))!==l&&w!==u;)w===c&&(h+=c,w=t.charAt(++k)),h+=w,k++;(w=t.charAt(k))===u?(M=h?s:"collapsed",g+=h+w,k++):h="",E+=g,g=""}else{if(!r)return;h=r}if(M===s||!m)return E=x+E,S===a&&y.inLink?null:!!n||((p=e.now()).column+=x.length,p.offset+=x.length,d={type:S+"Reference",identifier:o(h=M===s?h:r),label:h,referenceType:M},S===a?(f=y.enterLink(),d.children=y.tokenizeInline(r,p),f()):d.alt=y.decode.raw(y.unescape(r),p)||null,e(E)(d))}}}},1248:(e,t,n)=>{"use strict";var i=n(2745),r=n(2139),o=n(1016);e.exports=a,a.locator=o;function a(e,t,n){var o,a,s,l,c,u,h,p=0,d=t.charAt(p);if(!("*"!==d&&"_"!==d||t.charAt(++p)!==d||(a=this.options.pedantic,c=(s=d)+s,u=t.length,p++,l="",d="",a&&r(t.charAt(p)))))for(;p<u;){if(h=d,!((d=t.charAt(p))!==s||t.charAt(p+1)!==s||a&&r(h))&&(d=t.charAt(p+2))!==s){if(!i(l))return;return!!n||((o=e.now()).column+=2,o.offset+=2,e(c+l+c)({type:"strong",children:this.tokenizeInline(l,o)}))}a||"\\"!==d||(l+=d,d=t.charAt(++p)),l+=d,p++}}},308:(e,t,n)=>{"use strict";var i=n(2139);e.exports=function(e,t,n){var a,s,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,E,x,S,M,T;if(!this.options.gfm)return;a=0,k=0,h=t.length+1,p=[];for(;a<h;){if(S=t.indexOf(r,a),M=t.indexOf("|",a+1),-1===S&&(S=t.length),-1===M||M>S){if(k<2)return;break}p.push(t.slice(a,S)),k++,a=S+1}c=p.join(r),s=p.splice(1,1)[0]||[],a=0,h=s.length,k--,l=!1,m=[];for(;a<h;){if("|"===(f=s.charAt(a))){if(g=null,!1===l){if(!1===T)return}else m.push(l),l=!1;T=!1}else if("-"===f)g=!0,l=l||null;else if(":"===f)l=l===o?"center":g&&null===l?"right":o;else if(!i(f))return;a++}!1!==l&&m.push(l);if(m.length<1)return;if(n)return!0;w=-1,E=[],x=e(c).reset({type:"table",align:m,children:E});for(;++w<k;){for(C=p[w],u={type:"tableRow",children:[]},w&&e(r),e(C).reset(u,x),h=C.length+1,a=0,d="",v="",y=!0;a<h;)"\t"!==(f=C.charAt(a))&&" "!==f?(""===f||"|"===f?y?e(f):(!v&&!f||y||(c=v,d.length>1&&(f?(c+=d.slice(0,-1),d=d.charAt(d.length-1)):(c+=d,d="")),b=e.now(),e(c)({type:"tableCell",children:this.tokenizeInline(v,b)},u)),e(d+f),d="",v=""):(d&&(v+=d,d=""),v+=f,"\\"===f&&a!==h-2&&(v+=C.charAt(a+1),a++)),y=!1,a++):(v?d+=f:e(f),a++);w||e(r+s)}return x};var r="\n",o="left"},8825:e=>{"use strict";e.exports=function(e,t,n){var i,r,o,a,s,l,c,u,h,p,d=this;if(n)return!0;i=d.inlineMethods,a=i.length,r=d.inlineTokenizers,o=-1,h=t.length;for(;++o<a;)"text"!==(u=i[o])&&r[u]&&((c=r[u].locator)||e.file.fail("Missing locator: `"+u+"`"),-1!==(l=c.call(d,t,1))&&l<h&&(h=l));s=t.slice(0,h),p=e.now(),d.decode(s,p,(function(t,n,i){e(i||t)({type:"text",value:t})}))}},8352:e=>{"use strict";e.exports=function(e,t,n){var i,r,o,a,s=-1,l=t.length+1,c="";for(;++s<l&&("\t"===(i=t.charAt(s))||" "===i);)c+=i;if("*"!==i&&"-"!==i&&"_"!==i)return;r=i,c+=i,o=1,a="";for(;++s<l;)if((i=t.charAt(s))===r)o++,c+=a+r,a="";else{if(" "!==i)return o>=3&&(!i||"\n"===i)?(c+=a,!!n||e(c)({type:"thematicBreak"})):void 0;a+=i}}},26:(e,t,n)=>{"use strict";var i=n(932),r=n(7574),o=n(6195),a=n(6260),s=n(2139),l=n(8637);e.exports=c,c.locator=l,c.notInLink=!0;function c(e,t,n){var l,c,u,h,p,d,f,g,m,v,y,b,w,k,C=this,E=C.options.gfm,x=C.inlineTokenizers,S=t.length,M=-1,T=!1;if(E){if("www."===t.slice(0,4))T=!0,h=4;else if("http://"===t.slice(0,7).toLowerCase())h=7;else{if("https://"!==t.slice(0,8).toLowerCase())return;h=8}for(M=h-1,u=h,l=[];h<S;)if(46!==(f=t.charCodeAt(h))){if(!o(f)&&!a(f)&&45!==f&&95!==f)break;h++}else{if(M===h-1)break;l.push(h),M=h,h++}if(46===f&&(l.pop(),h--),void 0!==l[0]&&(c=l.length<2?u:l[l.length-2]+1,-1===t.slice(c,h).indexOf("_"))){if(n)return!0;for(g=h,p=h;h<S&&(f=t.charCodeAt(h),!s(f)&&60!==f);)h++,33===f||42===f||44===f||46===f||58===f||63===f||95===f||126===f||(g=h);if(h=g,41===t.charCodeAt(h-1))for(d=t.slice(p,h),m=i(d,"("),v=i(d,")");v>m;)h=p+d.lastIndexOf(")"),d=t.slice(p,h),v--;if(59===t.charCodeAt(h-1)&&(h--,a(t.charCodeAt(h-1)))){for(g=h-2;a(t.charCodeAt(g));)g--;38===t.charCodeAt(g)&&(h=g)}return y=t.slice(0,h),w=r(y,{nonTerminated:!1}),T&&(w="http://"+w),k=C.enterLink(),C.inlineTokenizers={text:x.text},b=C.tokenizeInline(y,e.now()),C.inlineTokenizers=x,k(),e(y)({type:"link",title:null,url:w,children:b})}}}},831:e=>{"use strict";function t(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}function n(e,t){return e.value+=t.value,e}function i(e,t){return this.options.commonmark||this.options.gfm?t:(e.children=e.children.concat(t.children),e)}e.exports=function(e){return function(r,o){var a,s,l,c,u,h=this,p=h.offset,d=[],f=h[e+"Methods"],g=h[e+"Tokenizers"],m=o.line,v=o.column;if(!r)return d;S.now=w,S.file=h.file,y("");for(;r;){for(a=-1,s=f.length,c=!1;++a<s&&(!(l=g[f[a]])||l.onlyAtStart&&!h.atStart||l.notInList&&h.inList||l.notInBlock&&h.inBlock||l.notInLink&&h.inLink||(u=r.length,l.apply(h,[S,r]),!(c=u!==r.length))););c||h.file.fail(new Error("Infinite loop"),S.now())}return h.eof=w(),d;function y(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)m++,t=n,n=e.indexOf("\n",n+1);-1===t?v+=e.length:v=e.length-t,m in p&&(-1!==t?v+=p[m]:v<=p[m]&&(v=p[m]+1))}function b(){var e=[],t=m+1;return function(){for(var n=m+1;t<n;)e.push((p[t]||0)+1),t++;return e}}function w(){var e={line:m,column:v};return e.offset=h.toOffset(e),e}function k(e){this.start=e,this.end=w()}function C(e){r.slice(0,e.length)!==e&&h.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),w())}function E(){var e=w();return t;function t(t,n){var i=t.position,r=i?i.start:e,o=[],a=i&&i.end.line,s=e.line;if(t.position=new k(r),i&&n&&i.indent){if(o=i.indent,a<s){for(;++a<s;)o.push((p[a]||0)+1);o.push(e.column)}n=o.concat(n)}return t.position.indent=n||[],t}}function x(e,r){var o=r?r.children:d,a=o[o.length-1];return a&&e.type===a.type&&("text"===e.type||"blockquote"===e.type)&&t(a)&&t(e)&&(e=("text"===e.type?n:i).call(h,a,e)),e!==a&&o.push(e),h.atStart&&0!==d.length&&h.exitStart(),e}function S(e){var t=b(),n=E(),i=w();return C(e),o.reset=a,a.test=s,o.test=s,r=r.slice(e.length),y(e),t=t(),o;function o(e,i){return n(x(n(e),i),t)}function a(){var t=o.apply(null,arguments);return m=i.line,v=i.column,r=e+r,t}function s(){var t=n({});return m=i.line,v=i.column,r=e+r,t.position}}}}},7678:e=>{"use strict";e.exports=function(e,n){return function(i){var r,o=0,a=i.indexOf(t),s=e[n],l=[];for(;-1!==a;)l.push(i.slice(o,a)),o=a+1,(r=i.charAt(o))&&-1!==s.indexOf(r)||l.push(t),a=i.indexOf(t,o+1);return l.push(i.slice(o)),l.join("")}};var t="\\"},8930:e=>{"use strict";e.exports=function(e){var t,n=0,i=0,r=e.charAt(n),o={},a=0;for(;"\t"===r||" "===r;){for(i+=t="\t"===r?4:1,t>1&&(i=Math.floor(i/t)*t);a<i;)o[++a]=n;r=e.charAt(++n)}return{indent:i,stops:o}}},1537:(e,t)=>{"use strict";var n="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.g=new RegExp("^(?:"+n+"|"+i+")"),t._=new RegExp("^(?:"+n+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},7901:e=>{"use strict";e.exports=function(e,t,n,i){var r,o,a=e.length,s=-1;for(;++s<a;)if(r=e[s],(void 0===(o=r[1]||{}).pedantic||o.pedantic===n.options.pedantic)&&(void 0===o.commonmark||o.commonmark===n.options.commonmark)&&t[r[0]].apply(n,i))return!0;return!1}},6749:(e,t,n)=>{"use strict";var i=n(9514);e.exports=function(e){return i(e).toLowerCase()}},9460:(e,t,n)=>{"use strict";var i=n(2745),r=n(6464),o=n(8930);e.exports=function(e,t){var n,a,s,l=e.split("\n"),c=l.length+1,u=1/0,h=[];l.unshift(r(" ",t)+"!");for(;c--;)if(a=o(l[c]),h[c]=a.stops,0!==i(l[c]).length){if(!a.indent){u=1/0;break}a.indent>0&&a.indent<u&&(u=a.indent)}if(u!==1/0)for(c=l.length;c--;){for(s=h[c],n=u;n&&!(n in s);)n--;l[c]=l[c].slice(s[n]+1)}return l.shift(),l.join("\n")}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{DefaultBufferLength:()=>dn,IterMode:()=>wn,MountedTree:()=>vn,NodeProp:()=>mn,NodeSet:()=>kn,NodeType:()=>bn,NodeWeakMap:()=>qn,Parser:()=>Wn,Tree:()=>xn,TreeBuffer:()=>Mn,TreeCursor:()=>Bn,TreeFragment:()=>Un,parseMixed:()=>jn});var t={};n.r(t),n.d(t,{Annotation:()=>ur,AnnotationType:()=>hr,ChangeDesc:()=>Mi,ChangeSet:()=>Ti,CharCategory:()=>Cr,Compartment:()=>Qi,EditorSelection:()=>Bi,EditorState:()=>Sr,Facet:()=>Hi,Line:()=>hi,MapMode:()=>Si,Prec:()=>$i,Range:()=>Dr,RangeSet:()=>Pr,RangeSetBuilder:()=>Ir,RangeValue:()=>Tr,SelectionRange:()=>Fi,StateEffect:()=>dr,StateEffectType:()=>pr,StateField:()=>_i,Text:()=>ii,Transaction:()=>fr,codePointAt:()=>ki,codePointSize:()=>Ei,combineConfig:()=>Mr,countColumn:()=>Wr,findClusterBreak:()=>mi,findColumn:()=>_r,fromCodePoint:()=>Ci});var i={};n.r(i),n.d(i,{BidiSpan:()=>as,BlockInfo:()=>ll,BlockType:()=>la,Decoration:()=>ca,Direction:()=>ja,EditorView:()=>jl,GutterMarker:()=>Su,MatchDecorator:()=>Tc,RectangleMarker:()=>oc,ViewPlugin:()=>Ba,ViewUpdate:()=>_a,WidgetType:()=>sa,__test:()=>th,closeHoverTooltips:()=>mu,crosshairCursor:()=>$c,drawSelection:()=>gc,dropCursor:()=>Sc,getPanel:()=>wu,getTooltip:()=>du,gutter:()=>Au,gutterLineClass:()=>Mu,gutters:()=>Pu,hasHoverTooltips:()=>fu,highlightActiveLine:()=>Vc,highlightActiveLineGutter:()=>Yu,highlightSpecialChars:()=>Oc,highlightTrailingWhitespace:()=>eh,highlightWhitespace:()=>Qu,hoverTooltip:()=>pu,keymap:()=>Jl,layer:()=>pc,lineNumberMarkers:()=>Vu,lineNumbers:()=>_u,logException:()=>Pa,panels:()=>bu,placeholder:()=>Wc,rectangularSelection:()=>Kc,repositionTooltips:()=>vu,runScopeHandlers:()=>nc,scrollPastEnd:()=>Hc,showPanel:()=>xu,showTooltip:()=>au,tooltips:()=>Jc});var r={};n.r(r),n.d(r,{Tag:()=>ih,classHighlighter:()=>Ph,highlightTree:()=>ph,styleTags:()=>sh,tagHighlighter:()=>uh,tags:()=>Lh});var o={};n.r(o),n.d(o,{HighlightStyle:()=>Gp,IndentContext:()=>ap,LRLanguage:()=>Rh,Language:()=>Bh,LanguageDescription:()=>Jh,LanguageSupport:()=>Qh,ParseContext:()=>jh,StreamLanguage:()=>yd,StringStream:()=>gd,TreeIndentContext:()=>hp,bracketMatching:()=>ld,bracketMatchingHandle:()=>cd,codeFolding:()=>zp,continuedIndent:()=>mp,defaultHighlightStyle:()=>ed,defineLanguageFacet:()=>Oh,delimitedIndent:()=>dp,ensureSyntaxTree:()=>Vh,flatIndent:()=>gp,foldAll:()=>Op,foldCode:()=>Lp,foldEffect:()=>Ep,foldGutter:()=>_p,foldInside:()=>wp,foldKeymap:()=>Rp,foldNodeProp:()=>bp,foldService:()=>yp,foldState:()=>Mp,foldable:()=>kp,foldedRanges:()=>Tp,forceParsing:()=>qh,getIndentUnit:()=>np,getIndentation:()=>rp,highlightingFor:()=>Zp,ignoreSpellcheckToken:()=>Pd,indentNodeProp:()=>sp,indentOnInput:()=>vp,indentRange:()=>op,indentService:()=>ep,indentString:()=>ip,indentUnit:()=>tp,language:()=>Zh,languageDataProp:()=>Ih,lineClassNodeProp:()=>Dd,lineHighlighter:()=>Ld,matchBrackets:()=>pd,sublanguageProp:()=>Fh,syntaxHighlighting:()=>$p,syntaxParserRunning:()=>Uh,syntaxTree:()=>Hh,syntaxTreeAvailable:()=>zh,toggleFold:()=>Np,tokenClassNodeProp:()=>Td,unfoldAll:()=>Fp,unfoldCode:()=>Pp,unfoldEffect:()=>xp});var a={};n.r(a),n.d(a,{blockComment:()=>Rf,blockUncomment:()=>Hf,copyLineDown:()=>nv,copyLineUp:()=>tv,cursorCharBackward:()=>xg,cursorCharForward:()=>Eg,cursorCharLeft:()=>kg,cursorCharRight:()=>Cg,cursorDocEnd:()=>Lm,cursorDocStart:()=>Am,cursorGroupBackward:()=>Ag,cursorGroupForward:()=>Dg,cursorGroupLeft:()=>Mg,cursorGroupRight:()=>Tg,cursorLineBoundaryBackward:()=>Kg,cursorLineBoundaryForward:()=>Gg,cursorLineBoundaryLeft:()=>Yg,cursorLineBoundaryRight:()=>Xg,cursorLineDown:()=>zg,cursorLineEnd:()=>Zg,cursorLineStart:()=>$g,cursorLineUp:()=>Vg,cursorMatchingBracket:()=>Jg,cursorPageDown:()=>_g,cursorPageUp:()=>Wg,cursorSubwordBackward:()=>Og,cursorSubwordForward:()=>Ig,cursorSyntaxLeft:()=>Ng,cursorSyntaxRight:()=>Rg,defaultKeymap:()=>gv,deleteCharBackward:()=>zm,deleteCharForward:()=>qm,deleteGroupBackward:()=>Wm,deleteGroupForward:()=>_m,deleteLine:()=>iv,deleteToLineEnd:()=>jm,deleteToLineStart:()=>Gm,deleteTrailingWhitespace:()=>Km,emacsStyleKeymap:()=>dv,history:()=>Yf,historyField:()=>Xf,historyKeymap:()=>fg,indentLess:()=>hv,indentMore:()=>uv,indentSelection:()=>cv,indentWithTab:()=>mv,insertBlankLine:()=>av,insertNewline:()=>rv,insertNewlineAndIndent:()=>ov,insertTab:()=>pv,invertedEffects:()=>jf,isolateHistory:()=>_f,lineComment:()=>Ff,lineUncomment:()=>Bf,moveLineDown:()=>Jm,moveLineUp:()=>Qm,redo:()=>Qf,redoDepth:()=>ig,redoSelection:()=>eg,selectAll:()=>Om,selectCharBackward:()=>am,selectCharForward:()=>om,selectCharLeft:()=>im,selectCharRight:()=>rm,selectDocEnd:()=>Im,selectDocStart:()=>Pm,selectGroupBackward:()=>hm,selectGroupForward:()=>um,selectGroupLeft:()=>lm,selectGroupRight:()=>cm,selectLine:()=>Fm,selectLineBoundaryBackward:()=>xm,selectLineBoundaryForward:()=>Em,selectLineBoundaryLeft:()=>Sm,selectLineBoundaryRight:()=>Mm,selectLineDown:()=>bm,selectLineEnd:()=>Dm,selectLineStart:()=>Tm,selectLineUp:()=>ym,selectMatchingBracket:()=>em,selectPageDown:()=>Cm,selectPageUp:()=>km,selectParentSyntax:()=>Bm,selectSubwordBackward:()=>fm,selectSubwordForward:()=>dm,selectSyntaxLeft:()=>gm,selectSyntaxRight:()=>mm,simplifySelection:()=>Nm,splitLine:()=>Ym,standardKeymap:()=>fv,toggleBlockComment:()=>Nf,toggleBlockCommentByLine:()=>Vf,toggleComment:()=>Pf,toggleLineComment:()=>Of,transposeChars:()=>Xm,undo:()=>Zf,undoDepth:()=>ng,undoSelection:()=>Jf});var s={};n.r(s),n.d(s,{RegExpCursor:()=>Ev,SearchCursor:()=>wv,SearchQuery:()=>_v,closeSearchPanel:()=>by,findNext:()=>ly,findPrevious:()=>cy,getSearchQuery:()=>ty,gotoLine:()=>Pv,highlightSelectionMatches:()=>Bv,openSearchPanel:()=>yy,replaceAll:()=>dy,replaceNext:()=>py,search:()=>Wv,searchKeymap:()=>wy,searchPanelOpen:()=>ny,selectMatches:()=>uy,selectNextOccurrence:()=>qv,selectSelectionMatches:()=>hy,setSearchQuery:()=>Qv});var l={};n.r(l),n.d(l,{CompletionContext:()=>Wz,acceptCompletion:()=>Eq,autocompletion:()=>wU,clearSnippet:()=>qq,closeBrackets:()=>rU,closeBracketsKeymap:()=>hU,closeCompletion:()=>Sq,completeAnyWord:()=>Jq,completeFromList:()=>jz,completionKeymap:()=>kU,completionStatus:()=>EU,currentCompletions:()=>SU,deleteBracketPair:()=>uU,ifIn:()=>Gz,ifNotIn:()=>Kz,insertBracket:()=>pU,insertCompletionText:()=>Qz,moveCompletionSelection:()=>Cq,nextSnippetField:()=>Uq,pickedCompletion:()=>Zz,prevSnippetField:()=>Wq,selectedCompletion:()=>MU,selectedCompletionIndex:()=>TU,setSelectedCompletion:()=>DU,snippet:()=>Vq,snippetCompletion:()=>Kq,snippetKeymap:()=>jq,startCompletion:()=>xq});var c={};n.r(c),n.d(c,{collab:()=>FU,getClientID:()=>HU,getSyncedVersion:()=>RU,receiveUpdates:()=>BU,sendableUpdates:()=>NU});var u={};n.r(u),n.d(u,{closeLintPanel:()=>eW,diagnosticCount:()=>XU,forEachDiagnostic:()=>SW,forceLinting:()=>aW,lintGutter:()=>xW,lintKeymap:()=>nW,linter:()=>oW,nextDiagnostic:()=>tW,openLintPanel:()=>JU,setDiagnostics:()=>_U,setDiagnosticsEffect:()=>jU});var h={};n.r(h),n.d(h,{ContextTracker:()=>YW,ExternalTokenizer:()=>BW,InputStream:()=>OW,LRParser:()=>XW,Stack:()=>TW});var p={};n.r(p),n.d(p,{AbstractInputSuggest:()=>lB,AbstractTextComponent:()=>eO,App:()=>e1,BaseComponent:()=>XI,ButtonComponent:()=>ZI,ColorComponent:()=>lO,Component:()=>nb,DropdownComponent:()=>oO,EditableFileView:()=>SI,Editor:()=>Df,EditorSuggest:()=>uB,Events:()=>Ny,ExtraButtonComponent:()=>QI,FileManager:()=>HB,FileSystemAdapter:()=>Wd,FileView:()=>EI,FuzzySuggestModal:()=>eG,HoverPopover:()=>R_,ItemView:()=>bI,Keymap:()=>hw,MarkdownPreviewRenderer:()=>LA,MarkdownPreviewSection:()=>SA,MarkdownPreviewView:()=>DP,MarkdownRenderChild:()=>xA,MarkdownRenderer:()=>SP,MarkdownSourceView:()=>M_,MarkdownView:()=>iK,Menu:()=>fw,MenuItem:()=>pw,MenuSeparator:()=>dw,MetadataCache:()=>w_,Modal:()=>LI,MomentFormatComponent:()=>rO,Notice:()=>CI,Platform:()=>Lt,Plugin:()=>LG,PluginSettingTab:()=>PG,PopoverState:()=>x_,PopoverSuggest:()=>sB,ProgressBarComponent:()=>aO,Scope:()=>cw,SearchComponent:()=>nO,Setting:()=>YI,SettingTab:()=>_j,SliderComponent:()=>sO,SuggestModal:()=>Jj,TAbstractFile:()=>Ky,TFile:()=>Xy,TFolder:()=>$y,TextAreaComponent:()=>iO,TextComponent:()=>tO,TextFileView:()=>T_,ToggleComponent:()=>JI,ValueComponent:()=>$I,Vault:()=>Zy,View:()=>yI,ViewRegistry:()=>ij,Workspace:()=>wG,WorkspaceContainer:()=>Ij,WorkspaceFloating:()=>gG,WorkspaceItem:()=>Dj,WorkspaceLeaf:()=>Nj,WorkspaceParent:()=>Aj,WorkspaceRibbon:()=>dG,WorkspaceRoot:()=>fG,WorkspaceSidedock:()=>Pj,WorkspaceSplit:()=>Lj,WorkspaceTabs:()=>Fj,WorkspaceWindow:()=>mG,addIcon:()=>mb,apiVersion:()=>G0,arrayBufferToBase64:()=>q,arrayBufferToHex:()=>G,base64ToArrayBuffer:()=>z,debounce:()=>rt,editorEditorField:()=>WP,editorInfoField:()=>jP,editorLivePreviewField:()=>GP,editorViewField:()=>_P,finishRenderMath:()=>uA,fuzzySearch:()=>JA,getAllTags:()=>Vx,getBlobArrayBuffer:()=>lt,getIcon:()=>fb,getIconIds:()=>yb,getLinkpath:()=>Fx,hexToArrayBuffer:()=>j,htmlToMarkdown:()=>Oy,iterateCacheRefs:()=>Nx,iterateRefs:()=>Hx,livePreviewState:()=>wF,loadMathJax:()=>rA,loadMermaid:()=>eA,loadPdfJs:()=>YD,loadPrism:()=>nA,moment:()=>pF,normalizePath:()=>he,parseFrontMatterAliases:()=>fx,parseFrontMatterEntry:()=>px,parseFrontMatterStringArray:()=>dx,parseFrontMatterTags:()=>gx,parseLinktext:()=>Bx,parseYaml:()=>uF,prepareFuzzySearch:()=>$A,prepareQuery:()=>XA,prepareSimpleSearch:()=>iL,removeIcon:()=>vb,renderMatches:()=>oL,renderMath:()=>oA,renderResults:()=>rL,request:()=>__,requestUrl:()=>W_,requireApiVersion:()=>Y0,resolveSubpath:()=>_x,sanitizeHTMLToDom:()=>hM,setIcon:()=>gb,setTooltip:()=>aS,sortSearchResults:()=>eL,stringifyYaml:()=>hF,stripHeading:()=>Ux,stripHeadingForLink:()=>Wx});var d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function m(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function v(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function y(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof k?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(r[e](t))}catch(e){u(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}Object.create;const x=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});x.addPlatform,x.setPlatform;var S;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(S||(S={}));class M extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const T=e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"},D=e=>{var t,n,i,r,o;const a=e.Capacitor||{},s=a.Plugins=a.Plugins||{},l=e.CapacitorPlatforms,c=(null===(t=null==l?void 0:l.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>T(e)),u=(null===(n=null==l?void 0:l.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==T(e)),h=(null===(i=null==l?void 0:l.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(e=>{const t=d.get(e);return!!(null==t?void 0:t.platforms.has(c()))||!!p(e)}),p=(null===(r=null==l?void 0:l.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=a.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),d=new Map,f=(null===(o=null==l?void 0:l.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((e,t={})=>{const n=d.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const i=c(),r=p(e);let o;const l=n=>{let s;const l=(...l)=>{const c=(async()=>(!o&&i in t&&(o=o="function"==typeof t[i]?await t[i]():t[i]),o))().then((t=>{const o=((t,n)=>{var o,s;if(!r){if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t);throw new M(`"${e}" plugin is not implemented on ${i}`,S.Unimplemented)}{const i=null==r?void 0:r.methods.find((e=>n===e.name));if(i)return"promise"===i.rtype?t=>a.nativePromise(e,n.toString(),t):(t,i)=>a.nativeCallback(e,n.toString(),t,i);if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t)}})(t,n);if(o){const e=o(...l);return s=null==e?void 0:e.remove,e}throw new M(`"${e}.${n}()" is not implemented on ${i}`,S.Unimplemented)}));return"addListener"===n&&(c.remove=async()=>s()),c};return l.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(l,"name",{value:n,writable:!1,configurable:!1}),l},u=l("addListener"),h=l("removeListener"),f=(e,t)=>{const n=u({eventName:e},t),i=async()=>{const i=await n;h({eventName:e,callbackId:i},t)},r=new Promise((e=>n.then((()=>e({remove:i})))));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"addListener":return r?f:u;case"removeListener":return h;default:return l(t)}}});return s[e]=g,d.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...r?[i]:[]])}),g});return a.convertFileSrc||(a.convertFileSrc=e=>e),a.getPlatform=c,a.handleError=t=>e.console.error(t),a.isNativePlatform=u,a.isPluginAvailable=h,a.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),a.registerPlugin=f,a.Exception=M,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},A=(e=>e.Capacitor=D(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{}),L=A.registerPlugin;A.Plugins;var P,I;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(P||(P={})),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(I||(I={}));L("Keyboard");var O,F;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(O||(O={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(F||(F={}));function B(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function N(e){return Buffer.from(e)}function R(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function H(e){return R((new TextEncoder).encode(e))}function V(e){return(new TextDecoder).decode(new Uint8Array(e))}function z(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function q(e){return U(new Uint8Array(e))}function U(e){for(var t=[],n=e.byteLength,i=0;i<n;i++)t.push(String.fromCharCode(e[i]));return window.btoa(t.join(""))}function W(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=G,[4,_(e)];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))}function _(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,crypto.subtle.digest("SHA-256",new Uint8Array(e))]}))}))}function j(e){for(var t=e.length/2,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=parseInt(e.substr(2*r,2),16);return n}function G(e){for(var t=new Uint8Array(e),n=[],i=0;i<t.length;i++){var r=t[i];n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")}var K="AES-GCM";function Y(e){return crypto.subtle.importKey("raw",e,K,!1,["encrypt","decrypt"])}function X(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return n||(n=crypto.getRandomValues(new Uint8Array(12))),[4,crypto.subtle.encrypt({name:K,iv:n},t,e)];case 1:return i=a.sent(),r=new ArrayBuffer(n.byteLength+i.byteLength),(o=new Uint8Array(r)).set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),[2,r]}}))}))}function $(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:if(e.byteLength<12)throw new Error("Encrypted data is bad");return 12===e.byteLength?[2,new ArrayBuffer(0)]:(n=new Uint8Array(e,0,12),i=new Uint8Array(e,12),[4,crypto.subtle.decrypt({name:K,iv:n},t,i)]);case 1:return[2,r.sent()]}}))}))}var Z=32768,Q={N:Z,r:8,p:1,maxmem:67108864};function J(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return e=e.normalize("NFKC"),t=t.normalize("NFKC"),(n=window.require&&window.require("crypto"))?[4,new Promise((function(i,r){n.scrypt(Buffer.from(e,"utf8"),Buffer.from(t,"utf8"),32,Q,(function(e,t){e?r(e):i(t)}))}))]:[3,2];case 1:return[2,B(i.sent())];case 2:return[4,window.scrypt.scrypt(new Uint8Array(H(e)),new Uint8Array(H(t)),Z,8,1,32)];case 3:return[2,R(i.sent())]}}))}))}function ee(e){if(e<=0)return"0 B";for(var t=["B","KB","MB","GB","TB","PB"],n=t.length-1,i=0;i<t.length;i++)if(e<Math.pow(1024,i+1)){n=i;break}var r=e/Math.pow(1024,n);return"".concat(function(e,t,n,i){void 0===t&&(t=2);void 0===n&&(n=".");void 0===i&&(i=",");var r=e<0?"-":"";e=Math.abs(e);var o=parseInt(e.toFixed(t),10)+"",a=o.length>3?o.length%3:0;return r+(a?o.substr(0,a)+i:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?n+Math.abs(e-Math.floor(e)).toFixed(t).slice(2):"")}(r,0===n?0:2)," ").concat(t[n])}var te="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*?()";var ne=/\u00A0/g;function ie(e){var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function re(e){var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function oe(e){for(;e;){if(ie(e).startsWith("."))return!0;e=re(e)}return!1}function ae(e){var t=ie(e),n=t.lastIndexOf(".");return-1===n||n===t.length-1||0===n?t:t.substr(0,n)}function se(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1||0===t?e:e.substr(0,t)}function le(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1||0===t?"":e.substr(t+1).toLowerCase()}function ce(e,t){return t?e+"."+t:e}function ue(e,t){return le(e)===t}function he(e){return(t=pe(e),t.replace(ne," ")).normalize("NFC");var t}function pe(e){return""===(e=e.replace(/([\\/])+/g,"/").replace(/(^\/+|\/+$)/g,""))&&(e="/"),e}function de(e){var t=ie(e);return"md"===le(t)?ae(t):t}function fe(e){return"md"===le(ie(e))?se(e):e}var ge,me=-1!==(ge=navigator.appVersion).indexOf("Win")?"Windows":-1!==ge.indexOf("Mac")?"MacOS":-1!==ge.indexOf("X11")||-1!==ge.indexOf("Linux")?"Linux":"Unknown OS",ve=navigator.userAgent.toLowerCase(),ye="MacOS"===me,be="Windows"===me,we="Linux"===me,ke=ve.indexOf("firefox")>-1,Ce=/^((?!chrome|android).)*safari/i.test(ve),Ee=/android/i.test(ve);function xe(e){return ye&&0===e.button&&e.ctrlKey}var Se={height:"",paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:""},Me=new WeakMap,Te=function(){function e(e){this.from={},this.to={},this.end={};var t=e||{},n=t.duration,i=void 0===n?100:n,r=t.fn,o=void 0===r?"ease-in-out":r;this.duration=i,this.fn=o}return e.prototype.addProp=function(e,t,n,i){return void 0===i&&(i=null),null!==t&&(this.from[e]=t),null!==n&&(this.to[e]=n),null!==i&&(this.end[e]=i),this},e}();function De(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function Ae(e){var t=window.getComputedStyle(e),n={};for(var i in Se)if(Se.hasOwnProperty(i)){var r=t[i];if(r&&r.endsWith("px")){var o=parseFloat(r.substr(0,r.length-2));0!==o&&(n[i]=o)}}return n}function Le(e,t){var n=Me.get(e);Me.delete(e),n&&(e.style.transition="",De(e,n.props.end),n.win.clearTimeout(n.timer),e.removeEventListener("transitionend",n.fn),t||n.complete&&n.complete())}var Pe=null;function Ie(e,t,n){Le(e),De(e,t.from);var i={props:t,fn:function(){return Le(e)},timer:0,complete:n,win:e.win};Me.set(e,i);null===Pe&&(Pe=[],setTimeout((function(){document.body.offsetHeight;var e=Pe;Pe=null;for(var t=0,n=e;t<n.length;t++){(0,n[t])()}}),0)),Pe.push((function(){e.style.transition="all "+t.duration+"ms "+t.fn,De(e,t.to),e.addEventListener("transitionend",(function(t){t.target===e&&i.fn()})),i.timer=i.win.setTimeout(i.fn,t.duration+50)}))}function Oe(e){return new Promise((function(t){return function(e,t){Le(e);var n=Ae(e),i=new Te({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflowY","clip","clip",""),n)n.hasOwnProperty(r)&&i.addProp(r,"0px",n[r]+"px","");Ie(e,i,t)}(e,t)}))}function Fe(e){return new Promise((function(t){return function(e,t){Le(e);var n=Ae(e),i=new Te({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflowY","clip","clip",""),n)n.hasOwnProperty(r)&&i.addProp(r,n[r]+"px","0px","");Ie(e,i,t)}(e,t)}))}function Be(e,t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return Le(e),t?n?[4,Fe(e)]:[3,2]:[3,3];case 1:i.sent(),i.label=2;case 2:return e.hide(),[3,5];case 3:return e.show(),n?[4,Oe(e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function Ne(e,t,n,i){return v(this,void 0,Promise,(function(){return y(this,(function(r){switch(r.label){case 0:return n?i?[4,Fe(e)]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return e.detach(),[3,5];case 3:return e.show(),t.appendChild(e),i?[4,Oe(e)]:[3,5];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}var Re=function(){},He=250;function Ve(e,t,n,i){i=i||Re;for(var r=0,o=Array.prototype.slice.call(e.childNodes);r<o.length;r++){Le(o[r])}var a=e.firstChild;return a?a!==t||a.nextSibling?e.isShown()?void("left"===n?(e.setChildrenInPlace([t,a]),Ie(t,new Te({duration:He,fn:"ease-out"}).addProp("transform","translateX(-100%)","translateX(0)","")),Ie(a,new Te({duration:He,fn:"ease-out"}).addProp("transform","translateX(0)","translateX(100%)",""),(function(){a.detach(),i&&i()}))):(e.setChildrenInPlace([a,t]),Ie(a,new Te({duration:He,fn:"ease-out"}).addProp("transform","translateX(0)","translateX(-100%)",""),(function(){a.detach(),i&&i()})),Ie(t,new Te({duration:He,fn:"ease-out"}).addProp("transform","translateX(100%)","translateX(0)","")))):(e.setChildrenInPlace([t]),void(i&&i())):void i():(e.appendChild(t),void i())}function ze(e){var t,n=Date.now(),i=function(r){r&&Date.now()-n<100||(window.clearTimeout(t),window.removeEventListener("resize",i),setTimeout(e,10))};window.addEventListener("resize",i),t=window.setTimeout(i,500)}function qe(e,t,n){var i=e.document.body.createDiv();i.setCssStyles({position:"absolute",transform:"translate(-50%,-50%)",left:"".concat(t,"px"),top:"".concat(n,"px"),boxShadow:"0 0 6px 20px var(--color-accent)",borderRadius:"200px",zIndex:"999"}),Ie(i,new Te({duration:200,fn:"ease-out"}).addProp("width","0","200px").addProp("height","0","200px").addProp("opacity","1","0"),(function(){return i.detach()}))}Object.prototype.hasOwnProperty;function Ue(e,t){var n=e[t];Object.defineProperty(e,t,{get:function(){return n},set:function(){}})}var We=/&(amp|lt|gt|quot);/g,_e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};function je(e){return _e[e]}function Ge(e){return e.replace(We,je)}var Ke=/[.?*+^$[\]\\(){}|-]/g;function Ye(e){return e.replace(Ke,"\\$&")}var Xe=function(){function e(){this.data={}}return e.prototype.add=function(e,t){var n=this.data,i=n[e];i||(i=[],n[e]=i),i.contains(t)||i.push(t)},e.prototype.remove=function(e,t){var n=this.data,i=n[e];i&&(i.remove(t),0===i.length&&delete n[e])},e.prototype.removeKey=function(e){delete this.data[e]},e.prototype.get=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.clear=function(e){delete this.data[e]},e.prototype.clearAll=function(){this.data={}},e.prototype.contains=function(e,t){var n=this.data[e];return n&&n.contains(t)},e.prototype.count=function(){var e=this.data,t=0;for(var n in e)e.hasOwnProperty(n)&&(t+=e[n].length);return t},e}();function $e(e){for(var t=[],n=0;n<e;n++)t.push((16*Math.random()|0).toString(16));return t.join("")}function Ze(e,t){for(var n=0,i=0;i<t&&-1!==(i=e.indexOf("\n",i))&&!(i>=t);)i++,n++;return n}!function(){function e(){this.data=new Map}e.prototype.add=function(e,t){var n=this.data;n.has(e)?n.get(e).push(t):n.set(e,[t])},e.prototype.delete=function(e,t){var n=this.data;if(n.has(e)){var i=n.get(e);i.remove(t),0===i.length&&n.delete(e)}},e.prototype.get=function(e){return this.data.get(e)}}();var Qe=function(){function e(){this.data=new Map}return e.prototype.add=function(e,t){var n=this.data;n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},e.prototype.delete=function(e,t){var n=this.data;if(n.has(e)){var i=n.get(e);i.delete(t),0===i.size&&n.delete(e)}},e.prototype.get=function(e){return this.data.get(e)},e.prototype.getArray=function(e){var t=this.data;return t.has(e)?Array.from(t.get(e)):[]},e}();function Je(e){return"object"!=typeof e}function et(e,t){if(void 0===t&&(t="\t"),void 0!==e)return tt(e,t).join("\n")}function tt(e,t){if(void 0===e)return["null"];if(Je(e)||!e||"[object Date]"===Object.prototype.toString.call(e))return[JSON.stringify(e)];if(Array.isArray(e)){if(e.every(Je))return[JSON.stringify(e)];for(var n=["["],i=e.length-1,r=0;r<=i;r++)for(var o=(p=tt(e[r],t)).length-1,a=0;a<=o;a++){var s="\t"+p[a];a===o&&r!==i&&(s+=","),n.push(s)}return n.push("]"),n}if("object"==typeof e){var l=!0;for(var c in e)if(e.hasOwnProperty(c)&&!Je(e[c])){l=!1;break}if(l)return[JSON.stringify(e)];n=["{"];var u=Object.keys(e);for(i=u.length-1,r=0;r<=i;r++){var h=e[c=u[r]];if(void 0!==h){var p;(p=tt(h,t))[0]=JSON.stringify(c)+":"+p[0];for(o=p.length-1,a=0;a<=o;a++){s="\t"+p[a];a===o&&r!==i&&(s+=","),n.push(s)}}}return n.push("}"),n}return[""]}function nt(e,t){for(var n=0,i=e.length-1;n<=i;){var r=Math.floor((n+i)/2),o=e[r],a=t(o);if(0===a)return o;a<0?i=r-1:n=r+1}return null}function it(e,t){if(void 0===t&&(t=!1),Array.isArray(e)){var n=e;return t&&(n=n.filter((function(e){return null!=e}))),n.every((function(e){return"string"==typeof e}))}return!1}function rt(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var i,r=null,o=null,a=null,s=0,l=function(){var t=o,n=a;return o=null,a=null,e.apply(t,n)},c=function(){if(s){var e=Date.now();if(e<s)return i=activeWindow,r=i.setTimeout(c,s-e),void(s=0)}r=null,l()},u=function(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];return o=this,a=e,r?n&&(s=Date.now()+t):(i=activeWindow,r=i.setTimeout(c,t)),u};return u.cancel=function(){return r&&(clearTimeout(r),r=null),u},u.run=function(){if(r)return clearTimeout(r),r=null,l()},u}var ot=window.queueMicrotask||function(e){return Promise.resolve().then(e)};function at(e){if(navigator.clipboard&&navigator.permissions)navigator.clipboard.writeText(e);else{var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(e){}document.body.removeChild(t)}}function st(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){return(t={})[e.type]=e,[2,navigator.clipboard.write([new ClipboardItem(t)])]}))}))}function lt(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return e.arrayBuffer?[2,e.arrayBuffer()]:[2,new Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onabort=i.onerror=function(e){n(e)},i.readAsArrayBuffer(e)}))]}))}))}function ct(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){return n=e.getAttr("alt")||null,i=e.createEl("img",{attr:{alt:n}}),r=e.getAttr("width"),o=e.getAttr("height"),r&&i.setAttr("width",r),o&&i.setAttr("height",o),[2,new Promise((function(e){var n=function(){return e()};i.addEventListener("load",n),i.addEventListener("error",n),activeWindow.setTimeout(n,5e3),i.src=t}))]}))}))}function ut(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,new Promise((function(t){var n=new Image,i=function(){n&&(n.naturalWidth&&n.naturalHeight?t({width:n.naturalWidth,height:n.naturalHeight}):t(null),n=null)};n.addEventListener("load",i),n.addEventListener("error",i),activeWindow.setTimeout(i,5e3),n.src=e}))]}))}))}function ht(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){return n=e.createEl("audio",{attr:{controls:"",controlsList:"nodownload"}}),[2,new Promise((function(e){var i=function(){return e()};n.addEventListener("loadedmetadata",i),n.addEventListener("error",i),activeWindow.setTimeout(i,5e3),n.src=t}))]}))}))}function pt(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){return n=e.createEl("video",{attr:{controls:""}}),[2,new Promise((function(i){var r=function(){n.style.height="",i()};n.addEventListener("loadedmetadata",(function(){0===n.videoWidth&&0===n.videoHeight?(n.src="",e.removeChild(n),ht(e,t).then(r,r)):r()})),n.addEventListener("error",r),n.style.height="0",activeWindow.setTimeout(r,5e3),n.src=t}))]}))}))}function dt(e,t){var n=activeWindow;if(t>0&&n.requestIdleCallback){var i=n.requestIdleCallback(e,{timeout:t});return{high:!1,cancel:function(){return n.cancelIdleCallback(i)}}}var r=n.requestAnimationFrame(e);return{high:!0,cancel:function(){return n.cancelAnimationFrame(r)}}}function ft(e,t){var n=e.relatedTarget;return!n||!t.contains(n)}function gt(e){e.addEventListener("mousedown",(function(e){1===e.button&&e.preventDefault()}))}var mt;/bot|crawl|spider/i.test(navigator.userAgent);function vt(){mt&&mt()}var yt={sx:0,sy:0,ex:0,ey:0,t:0};function bt(e,t){var n=0,i=0,r=0,o=0,a=function(e){if(1===e.touches.length){var t=e.touches[0];n=t.identifier,i=t.clientX,r=t.clientY,o=Date.now(),window.addEventListener("touchend",s),window.addEventListener("touchcancel",s)}},s=function(e){var a=kt(e,n);if((0===e.touches.length||a)&&(window.removeEventListener("touchend",s),window.removeEventListener("touchcancel",s),"touchend"===e.type&&a&&Date.now()-o<600&&Math.abs(i-a.clientX)<5&&Math.abs(r-a.clientY)<5)){var l=new MouseEvent("click",{clientX:a.clientX,clientY:a.clientY,button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0});Object.defineProperty(l,"target",{writable:!1,value:e.target}),t(l,e.target),l.defaultPrevented&&e.preventDefault()}};return e.addEventListener("touchstart",a),function(){return e.removeEventListener("touchstart",a)}}function wt(e){return yt&&Date.now()-yt.t<1e3&&(Math.abs(e.clientX-yt.sx)<5&&Math.abs(e.clientY-yt.sy)<5||Math.abs(e.clientX-yt.ex)<5&&Math.abs(e.clientY-yt.ey)<5)}function kt(e,t){for(var n=e.changedTouches,i=0;i<n.length;i++){var r=n[i];if(r.identifier===t)return r}return null}function Ct(e){if(!e.parentElement)return e;var t=e.parentElement;return t.scrollHeight>t.clientHeight?t:Ct(t)}function Et(e,t,n,i,r,o){var a,s,l=Lt.isMobileApp;i*=i,s=function(e,a){if(n.firstChild!==n.lastChild){e.preventDefault();var s,c=e.win,u=a.clientX,h=a.clientY,p=!1,d=!l,f=t.getBoundingClientRect(),g=u-f.x,m=h-f.y,v=0,y=null;c.setTimeout((function(){p||(d=!0,e instanceof TouchEvent&&(qe(c,u,h),navigator.vibrate(200)))}),250);var b=0,w=0,k=0,C=Ct(n),E=C.getBoundingClientRect(),x=function(e){var i,r=Array.from(n.childNodes);for(i=0;i<r.length-1;i++){var o=r[i].getBoundingClientRect();if(e-m+v/2<o.bottom)break}if(r[i]!==t){var a=C.scrollTop;t.detach();var s=n.childNodes[i];n.insertBefore(t,s),C.scrollTop=a,navigator.vibrate(0)}return i},S=function(){var e;0!==b&&(void 0===e&&(e=.9),w=w*e+b*(1-e),C.scrollTop+=w,x(k))};return{move:function(e,n){var o=n.clientX,a=k=n.clientY;if(null===y){var l=o-u,f=a-h;if(!(p=l*l+f*f>=i)||!d)return!0;var C=t.offsetWidth,M=t.offsetHeight;y=createDiv("drag-reorder-ghost");var T=t.cloneNode(!0);T.setAttribute("aria-label",null),y.appendChild(T),T.style.width=C+"px",T.style.height=M+"px",document.body.appendChild(y),document.body.addClass("is-grabbing"),t.addClass("drag-ghost-hidden"),r();var D=y.getBoundingClientRect(),A=T.getBoundingClientRect();g+=A.x-D.x,m+=A.y-D.y,v=D.height,s=c.setInterval(S,1e3/60)}e.preventDefault();var L=Math.min(50,E.height/3),P=E.top+L,I=E.bottom-L,O=a-m,F=O+v;return O<P?b=(O-P)/L:F>I?b=(F-I)/L:(b=0,w=0),b=10*Math.clamp(b,-1,1),x(k),y.style.left=o-g+"px",y.style.top=a-m+"px",!0},end:function(e,i){if(y){e.preventDefault();var r=x(k);document.body.removeClass("is-grabbing"),t.removeClass("drag-ghost-hidden"),t.detach(),y.detach();var a=n.childNodes[r];n.insertBefore(t,a),c.clearInterval(s),o(r)}else e.instanceOf(TouchEvent)&&e.target.dispatchEvent(new MouseEvent("click",{button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,screenX:i.screenX,screenY:i.screenY,bubbles:!0,cancelable:!0,clientX:u,clientY:h}))}}}},(a=e).addEventListener("mousedown",(function(e){if(0===e.button&&!wt(e)){var t=s(e,e);if(t){var n=function(e){t.move(e,e)||o()},i=function(e){o(),t.end(e,e)},r=e.win,o=function(){r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)};r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}}})),a.addEventListener("touchstart",(function(e){if(!(e.touches.length>1)){var t=e.touches[0],n=s(e,t);if(n){var i=t.identifier,r=function(e){var t=kt(e,i);t&&(c(),n.end(e,t))},o=function(e){var t=kt(e,i);t&&(c(),n.end(e,t))},a=function(e){var t=kt(e,i);t&&(n.move(e,t)||c())},l=e.win,c=function(){l.removeEventListener("touchcancel",o),l.removeEventListener("touchend",r),l.removeEventListener("touchmove",a)};l.addEventListener("touchcancel",o),l.addEventListener("touchend",r),l.addEventListener("touchmove",a,{passive:!1})}}}),{passive:!1})}function xt(e){for(var t=0,n=e.findAll("audio, video");t<n.length;t++){var i=n[t];i instanceof HTMLMediaElement&&(i.src="",i.srcObject=null)}}function St(e){if(!e||e.contains(" "))return!1;try{new URL(e)}catch(e){return!1}return!0}function Mt(e){var t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}var Tt=/^(([^<>()[\]\\.,;:\s@\"`]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\b/;function Dt(e){return Tt.test(e)}function At(e,t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){return[2,new Promise((function(i){return e.toBlob(i,t,n)}))]}))}))}var Lt={isDesktop:!1,isMobile:!1,isDesktopApp:!1,isMobileApp:!1,isIosApp:!1,isAndroidApp:!1,isPhone:!1,isTablet:!1,isMacOS:ye,isWin:be,isLinux:we,isSafari:Ce,resourcePathPrefix:"file:///",mobileDeviceHeight:0,mobileKeyboardHeight:0,mobileSoftKeyboardVisible:!1};var Pt=window.require;function It(e){return Pt&&Pt(e)}function Ot(e){var t=It("electron");t&&e(t)}function Ft(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){return(t=It("fs"))&&t.existsSync(e)?[2,t.promises.readFile(e)]:[2,null]}))}))}function Bt(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){if(!(t=It("electron")))throw new Error("Not electron");return n=t.ipcRenderer,[2,new Promise((function(t,i){var r=$e(16);n.once(r,(function(e,n){n.body?t(n):i(n.error)})),n.send("request-url",r,e)}))]}))}))}var Nt=!1,Rt="0.0.0",Ht=0;Ot((function(e){Nt=e.ipcRenderer.sendSync("is-dev"),Rt=process.versions.electron,Ht=parseInt(Rt.split(".")[0]),Lt.resourcePathPrefix=e.ipcRenderer.sendSync("file-url")}));var Vt=Nt,zt=Rt,qt=Ht;function Ut(){return"win32"===process.platform||"darwin"===process.platform}function Wt(e,t){if("win32"===process.platform){var n=window.require("vibrancy-win");if(t)e.setBackgroundColor("#00000000"),n.setAcrylic(e,343932960)||n.setBlurBehind(e,0);else n.disable(e)}else"darwin"===process.platform&&(e.setBackgroundColor("#00000000"),t?e.setVibrancy("sidebar"):e.setVibrancy(null))}function _t(e){return"WebViewElement"===e.constructor.name}function jt(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e.win,(n=window.electron)&&e.isTrusted?(e.stopPropagation(),e.stopImmediatePropagation(),[4,new Promise((function(e){var i=t.setTimeout((function(){e(null)}),1e3),r=n.ipcRenderer;r.once("context-menu",(function(n,r){t.clearTimeout(i),e(r)})),r.send("context-menu")}))]):[2,null];case 1:return[2,i.sent()]}}))}))}function Gt(e){if(!ye&&window.electron){var t=electron.remote.getCurrentWebContents().session,n=t.availableSpellCheckerLanguages;e&&0!==e.length||(e=[electron.remote.app.getLocale()]);var i=e.filter((function(e){return n.contains(e)}));t.setSpellCheckerLanguages(i)}}function Kt(e){window.electron&&(Lt.isMacOS?electron.remote.shell:electron.shell).showItemInFolder(e)}Vt||Ot((function(e){try{e.deprecate.setHandler((function(){}))}catch(e){}}));var Yt="https://"+[String.fromCharCode(97,112,105),"obsidian","md"].join(".");Vt&&(Yt="http://127.0.0.1:3000");var Xt="obsidian-account",$t=window.fetch,Zt=function(e){function t(n){var i=e.call(this,n.error)||this;return i.response=n,i.error=n.error,Object.setPrototypeOf(i,t.prototype),i}return f(t,e),t}(Error);function Qt(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,$t(Yt+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 1:return[4,i.sent().json()];case 2:if("error"in(n=i.sent()))throw new Zt(n);return[2,n]}}))}))}function Jt(e,t,n,i){return v(this,void 0,Promise,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return[4,Qt("/user/signin",{email:t,password:n,mfa:i})];case 1:return(r=o.sent()).token&&(e.token=r.token,e.email=r.email,e.name=r.name,e.license=r.license,e.save()),[2,r]}}))}))}function en(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,Qt("/user/signout",{token:e.token})];case 1:return t.sent(),e.token="",e.email="",e.name="",e.license="",[2]}}))}))}function tn(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!e.token)return[2,null];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Qt("/user/info",{token:e.token})];case 2:return t=i.sent(),e.email=t.email,e.name=t.name,e.license=t.license,e.save(),[2,t];case 3:throw"Not logged in"===(n=i.sent()).message&&(e.email=null,e.name=null,e.token=null,e.license=null,e.save()),n;case 4:return[2]}}))}))}function nn(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!e.key)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Qt("/subscription/business",{key:e.key})];case 2:return t=i.sent(),e.keyValidation="valid",e.company=t.company,e.expiry=t.expiry,e.seats=t.seats,e.save(),[3,4];case 3:return(n=i.sent())instanceof Zt&&(e.key=null,e.keyValidation=n.error,e.save()),[3,4];case 4:return[2]}}))}))}function rn(e,t,n,i){return Qt("/vault/create",{token:e,name:t,keyhash:n,salt:i})}function on(e,t,n){return Qt("/vault/rename",{token:e,vault_uid:t,name:n})}function an(e,t){return Qt("/vault/delete",{token:e,vault_uid:t})}function sn(e,t,n){return Qt("/vault/share/remove",{token:e,vault_uid:t,share_uid:n})}function ln(e,t,n,i){return Qt("/vault/access",{token:e,vault_uid:t,keyhash:n,host:i})}function cn(e,t){return Qt("/publish/delete",{token:e,site_uid:t})}function un(e,t,n){return Qt("/publish/share/invite",{token:e,site_uid:t,email:n})}function hn(e,t,n){return Qt("/publish/share/remove",{token:e,site_uid:t,share_uid:n})}var pn=function(){function e(){this.keyValidation="",this.company="",this.expiry=0,this.seats=0;try{var e=JSON.parse(localStorage.getItem(Xt));this.email=e.email,this.name=e.name,this.token=e.token,this.license=e.license,this.key=e.key}catch(e){}}return e.prototype.save=function(){var e={email:this.email,name:this.name,token:this.token,license:this.license,key:this.key};localStorage.setItem(Xt,JSON.stringify(e))},e.prototype.setKey=function(e){this.key=e,this.save()},e}(),dn=1024,fn=0,gn=function(e,t){this.from=e,this.to=t},mn=function(){function e(e){void 0===e&&(e={}),this.id=fn++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||function(){throw new Error("This node type doesn't define a deserialize function")}}return e.prototype.add=function(e){var t=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=bn.match(e)),function(n){var i=e(n);return void 0===i?null:[t,i]}},e}();mn.closedBy=new mn({deserialize:function(e){return e.split(" ")}}),mn.openedBy=new mn({deserialize:function(e){return e.split(" ")}}),mn.group=new mn({deserialize:function(e){return e.split(" ")}}),mn.contextHash=new mn({perNode:!0}),mn.lookAhead=new mn({perNode:!0}),mn.mounted=new mn({perNode:!0});var vn=function(e,t,n){this.tree=e,this.overlay=t,this.parser=n},yn=Object.create(null),bn=function(){function e(e,t,n,i){void 0===i&&(i=0),this.name=e,this.props=t,this.id=n,this.flags=i}return e.define=function(t){var n=t.props&&t.props.length?Object.create(null):yn,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),r=new e(t.name||"",n,t.id,i);if(t.props)for(var o=0,a=t.props;o<a.length;o++){var s=a[o];if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r},e.prototype.prop=function(e){return this.props[e.id]},Object.defineProperty(e.prototype,"isTop",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSkipped",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAnonymous",{get:function(){return(8&this.flags)>0},enumerable:!1,configurable:!0}),e.prototype.is=function(e){if("string"==typeof e){if(this.name==e)return!0;var t=this.prop(mn.group);return!!t&&t.indexOf(e)>-1}return this.id==e},e.match=function(e){var t=Object.create(null);for(var n in e)for(var i=0,r=n.split(" ");i<r.length;i++){var o=r[i];t[o]=e[n]}return function(e){for(var n=e.prop(mn.group),i=-1;i<(n?n.length:0);i++){var r=t[i<0?e.name:n[i]];if(r)return r}}},e}();bn.none=new bn("",Object.create(null),0,8);var wn,kn=function(){function e(e){this.types=e;for(var t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}return e.prototype.extend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=[],r=0,o=this.types;r<o.length;r++){for(var a=o[r],s=null,l=0,c=t;l<c.length;l++){var u=c[l],h=u(a);h&&(s||(s=Object.assign({},a.props)),s[h[0].id]=h[1])}i.push(s?new bn(a.name,s,a.id,a.flags):a)}return new e(i)},e}(),Cn=new WeakMap,En=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(wn||(wn={}));var xn=function(){function e(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(var o=0,a=r;o<a.length;o++){var s=a[o],l=s[0],c=s[1];this.props["number"==typeof l?l:l.id]=c}}}return e.prototype.toString=function(){var e=this.prop(mn.mounted);if(e&&!e.overlay)return e.tree.toString();for(var t="",n=0,i=this.children;n<i.length;n++){var r=i[n].toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t},e.prototype.cursor=function(e){return void 0===e&&(e=0),new Bn(this.topNode,e)},e.prototype.cursorAt=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=Cn.get(this)||this.topNode,r=new Bn(i);return r.moveTo(e,t),Cn.set(this,r._tree),r},Object.defineProperty(e.prototype,"topNode",{get:function(){return new Ln(this,0,0,null)},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e,t){void 0===t&&(t=0);var n=An(Cn.get(this)||this.topNode,e,t,!1);return Cn.set(this,n),n},e.prototype.resolveInner=function(e,t){void 0===t&&(t=0);var n=An(En.get(this)||this.topNode,e,t,!0);return En.set(this,n),n},e.prototype.iterate=function(e){for(var t=e.enter,n=e.leave,i=e.from,r=void 0===i?0:i,o=e.to,a=void 0===o?this.length:o,s=this.cursor((e.mode||0)|wn.IncludeAnonymous);;){var l=!1;if(s.from<=a&&s.to>=r&&(s.type.isAnonymous||!1!==t(s))){if(s.firstChild())continue;l=!0}for(;l&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;l=!0}}},e.prototype.prop=function(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)},Object.defineProperty(e.prototype,"propValues",{get:function(){var e=[];if(this.props)for(var t in this.props)e.push([+t,this.props[t]]);return e},enumerable:!1,configurable:!0}),e.prototype.balance=function(t){var n=this;return void 0===t&&(t={}),this.children.length<=8?this:zn(bn.none,this.children,this.positions,0,this.children.length,0,this.length,(function(t,i,r){return new e(n.type,t,i,r,n.propValues)}),t.makeTree||function(t,n,i){return new e(bn.none,t,n,i)})},e.build=function(e){return Rn(e)},e}();xn.empty=new xn(bn.none,[],[],0);var Sn=function(){function e(e,t){this.buffer=e,this.index=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this.index},enumerable:!1,configurable:!0}),e.prototype.next=function(){this.index-=4},e.prototype.fork=function(){return new e(this.buffer,this.index)},e}(),Mn=function(){function e(e,t,n){this.buffer=e,this.length=t,this.set=n}return Object.defineProperty(e.prototype,"type",{get:function(){return bn.none},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e=[],t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")},e.prototype.childString=function(e){var t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;for(var o=[];e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"},e.prototype.findChild=function(e,t,n,i,r){for(var o=this.buffer,a=-1,s=e;s!=t&&!(Tn(r,i,o[s+1],o[s+2])&&(a=s,n>0));s=o[s+3]);return a},e.prototype.slice=function(t,n,i,r){for(var o=this.buffer,a=new Uint16Array(n-t),s=t,l=0;s<n;)a[l++]=o[s++],a[l++]=o[s++]-i,a[l++]=o[s++]-i,a[l++]=o[s++]-t;return new e(a,r-i,this.set)},e}();function Tn(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function Dn(e,t){for(var n=e.childBefore(t);n;){var i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(e=n,n=i.prevSibling):n=i}return e}function An(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){if(!(s=!i&&e instanceof Ln&&e.index<0?null:e.parent))return e;e=s}var o=i?0:wn.IgnoreOverlays;if(i)for(var a=e,s=a.parent;s;s=(a=s).parent)a instanceof Ln&&a.index<0&&(null===(r=s.enter(t,n,o))||void 0===r?void 0:r.from)!=a.from&&(e=s);for(;;){var l=e.enter(t,n,o);if(!l)return e;e=l}}var Ln=function(){function e(e,t,n,i){this._tree=e,this.from=t,this.index=n,this._parent=i}return Object.defineProperty(e.prototype,"type",{get:function(){return this._tree.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._tree.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this._tree.length},enumerable:!1,configurable:!0}),e.prototype.nextChild=function(t,n,i,r,o){void 0===o&&(o=0);for(var a=this;;){for(var s=a._tree,l=s.children,c=s.positions,u=n>0?l.length:-1;t!=u;t+=n){var h=l[t],p=c[t]+a.from;if(Tn(r,i,p,p+h.length))if(h instanceof Mn){if(o&wn.ExcludeBuffers)continue;var d=h.findChild(0,h.buffer.length,n,i-p,r);if(d>-1)return new Fn(new On(a,h,t,p),null,d)}else if(o&wn.IncludeAnonymous||!h.type.isAnonymous||Nn(h)){var f=void 0;if(!(o&wn.IgnoreMounts)&&h.props&&(f=h.prop(mn.mounted))&&!f.overlay)return new e(f.tree,p,t,a);var g=new e(h,p,t,a);return o&wn.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(n<0?h.children.length-1:0,n,i,r)}}if(o&wn.IncludeAnonymous||!a.type.isAnonymous)return null;if(t=a.index>=0?a.index+n:n<0?-1:a._parent._tree.children.length,!(a=a._parent))return null}},Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.nextChild(0,1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.nextChild(this._tree.children.length-1,-1,0,4)},enumerable:!1,configurable:!0}),e.prototype.childAfter=function(e){return this.nextChild(0,1,e,2)},e.prototype.childBefore=function(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)},e.prototype.enter=function(t,n,i){var r;if(void 0===i&&(i=0),!(i&wn.IgnoreOverlays)&&(r=this._tree.prop(mn.mounted))&&r.overlay)for(var o=t-this.from,a=0,s=r.overlay;a<s.length;a++){var l=s[a],c=l.from,u=l.to;if((n>0?c<=o:c<o)&&(n<0?u>=o:u>o))return new e(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,n,i)},e.prototype.nextSignificantParent=function(){for(var e=this;e.type.isAnonymous&&e._parent;)e=e._parent;return e},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificantParent():null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null},enumerable:!1,configurable:!0}),e.prototype.cursor=function(e){return void 0===e&&(e=0),new Bn(this,e)},Object.defineProperty(e.prototype,"tree",{get:function(){return this._tree},enumerable:!1,configurable:!0}),e.prototype.toTree=function(){return this._tree},e.prototype.resolve=function(e,t){return void 0===t&&(t=0),An(this,e,t,!1)},e.prototype.resolveInner=function(e,t){return void 0===t&&(t=0),An(this,e,t,!0)},e.prototype.enterUnfinishedNodesBefore=function(e){return Dn(this,e)},e.prototype.getChild=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=Pn(this,e,t,n);return i.length?i[0]:null},e.prototype.getChildren=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),Pn(this,e,t,n)},e.prototype.toString=function(){return this._tree.toString()},Object.defineProperty(e.prototype,"node",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.matchContext=function(e){return In(this,e)},e}();function Pn(e,t,n,i){var r=e.cursor(),o=[];if(!r.firstChild())return o;if(null!=n)for(;!r.type.is(n);)if(!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}function In(e,t,n){void 0===n&&(n=t.length-1);for(var i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}var On=function(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i},Fn=function(){function e(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:!1,configurable:!0}),e.prototype.child=function(t,n,i){var r=this.context.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,n-this.context.start,i);return o<0?null:new e(this.context,this,o)},Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.child(1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.child(-1,0,4)},enumerable:!1,configurable:!0}),e.prototype.childAfter=function(e){return this.child(1,e,2)},e.prototype.childBefore=function(e){return this.child(-1,e,-2)},e.prototype.enter=function(t,n,i){if(void 0===i&&(i=0),i&wn.ExcludeBuffers)return null;var r=this.context.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return o<0?null:new e(this.context,this,o)},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent||this.context.parent.nextSignificantParent()},enumerable:!1,configurable:!0}),e.prototype.externalSibling=function(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)},Object.defineProperty(e.prototype,"nextSibling",{get:function(){var t=this.context.buffer,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new e(this.context,this._parent,n):this.externalSibling(1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevSibling",{get:function(){var t=this.context.buffer,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new e(this.context,this._parent,t.findChild(n,this.index,-1,0,4))},enumerable:!1,configurable:!0}),e.prototype.cursor=function(e){return void 0===e&&(e=0),new Bn(this,e)},Object.defineProperty(e.prototype,"tree",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.toTree=function(){var e=[],t=[],n=this.context.buffer,i=this.index+4,r=n.buffer[this.index+3];if(r>i){var o=n.buffer[this.index+1],a=n.buffer[this.index+2];e.push(n.slice(i,r,o,a)),t.push(0)}return new xn(this.type,e,t,this.to-this.from)},e.prototype.resolve=function(e,t){return void 0===t&&(t=0),An(this,e,t,!1)},e.prototype.resolveInner=function(e,t){return void 0===t&&(t=0),An(this,e,t,!0)},e.prototype.enterUnfinishedNodesBefore=function(e){return Dn(this,e)},e.prototype.toString=function(){return this.context.buffer.childString(this.index)},e.prototype.getChild=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=Pn(this,e,t,n);return i.length?i[0]:null},e.prototype.getChildren=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),Pn(this,e,t,n)},Object.defineProperty(e.prototype,"node",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.matchContext=function(e){return In(this,e)},e}(),Bn=function(){function e(e,t){if(void 0===t&&(t=0),this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ln)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(var n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),e.prototype.yieldNode=function(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)},e.prototype.yieldBuf=function(e,t){this.index=e;var n=this.buffer,i=n.start,r=n.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0},e.prototype.yield=function(e){return!!e&&(e instanceof Ln?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))},e.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()},e.prototype.enterChild=function(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));var i=this.buffer.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))},e.prototype.firstChild=function(){return this.enterChild(1,0,4)},e.prototype.lastChild=function(){return this.enterChild(-1,0,4)},e.prototype.childAfter=function(e){return this.enterChild(1,e,2)},e.prototype.childBefore=function(e){return this.enterChild(-1,e,-2)},e.prototype.enter=function(e,t,n){return void 0===n&&(n=this.mode),this.buffer?!(n&wn.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))},e.prototype.parent=function(){if(!this.buffer)return this.yieldNode(this.mode&wn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var e=this.mode&wn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)},e.prototype.sibling=function(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));var t=this.buffer.buffer,n=this.stack.length-1;if(e<0){var i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{var r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))},e.prototype.nextSibling=function(){return this.sibling(1)},e.prototype.prevSibling=function(){return this.sibling(-1)},e.prototype.atLastNode=function(e){var t,n,i,r,o=this.buffer;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(var a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;i=o.index,r=o.parent}else i=(t=this._tree).index,r=t._parent;for(;r;i=(n=r).index,r=n._parent)if(i>-1){a=i+e;for(var s=e<0?-1:r._tree.children.length;a!=s;a+=e){var l=r._tree.children[a];if(this.mode&wn.IncludeAnonymous||l instanceof Mn||!l.type.isAnonymous||Nn(l))return!1}}return!0},e.prototype.move=function(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}},e.prototype.next=function(e){return void 0===e&&(e=!0),this.move(1,e)},e.prototype.prev=function(e){return void 0===e&&(e=!0),this.move(-1,e)},e.prototype.moveTo=function(e,t){for(void 0===t&&(t=0);(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this},Object.defineProperty(e.prototype,"node",{get:function(){if(!this.buffer)return this._tree;var e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(var i=this.index,r=this.stack.length;r>=0;){for(var o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(var a=n;a<this.stack.length;a++)t=new Fn(this.buffer,t,this.stack[a]);return this.bufferNode=new Fn(this.buffer,t,this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tree",{get:function(){return this.buffer?null:this._tree._tree},enumerable:!1,configurable:!0}),e.prototype.iterate=function(e,t){for(var n=0;;){var i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}},e.prototype.matchContext=function(e){if(!this.buffer)return In(this.node,e);for(var t=this.buffer.buffer,n=t.set.types,i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return In(this.node,e,i);var o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0},e}();function Nn(e){return e.children.some((function(e){return e instanceof Mn||!e.type.isAnonymous||Nn(e)}))}function Rn(e){var t,n=e.buffer,i=e.nodeSet,r=e.maxBufferLength,o=void 0===r?dn:r,a=e.reused,s=void 0===a?[]:a,l=e.minRepeatType,c=void 0===l?i.types.length:l,u=Array.isArray(n)?new Sn(n,n.length):n,h=i.types,p=0,d=0;function f(e,t,n,r,a){for(var l=u.id,y=u.start,b=u.end,w=u.size,k=d;w<0;){if(u.next(),-1==w){var C=s[l];return n.push(C),void r.push(y-e)}if(-3==w)return void(p=l);if(-4==w)return void(d=l);throw new RangeError("Unrecognized record size: ".concat(w))}var E,x,S=h[l],M=y-e;if(b-y<=o&&(x=function(e,t){var n=u.fork(),i=0,r=0,a=0,s=n.end-o,l={size:0,start:0,skip:0};e:for(var h=n.pos-e;n.pos>h;){var p=n.size;if(n.id==t&&p>=0)l.size=i,l.start=r,l.skip=a,a+=4,i+=4,n.next();else{var d=n.pos-p;if(p<0||d<h||n.start<s)break;var f=n.id>=c?4:0,g=n.start;for(n.next();n.pos>d;){if(n.size<0){if(-3!=n.size)break e;f+=4}else n.id>=c&&(f+=4);n.next()}r=g,i+=p,a+=f}}(t<0||i==e)&&(l.size=i,l.start=r,l.skip=a);return l.size>4?l:void 0}(u.pos-t,a))){for(var T=new Uint16Array(x.size-x.skip),D=u.pos-x.size,A=T.length;u.pos>D;)A=v(x.start,T,A);E=new Mn(T,b-x.start,i),M=x.start-e}else{D=u.pos-w;u.next();for(var L=[],P=[],I=l>=c?l:-1,O=0,F=b;u.pos>D;)I>=0&&u.id==I&&u.size>=0?(u.end<=F-o&&(g(L,P,y,O,u.end,F,I,k),O=L.length,F=u.end),u.next()):f(y,D,L,P,I);if(I>=0&&O>0&&O<L.length&&g(L,P,y,O,y,F,I,k),L.reverse(),P.reverse(),I>-1&&O>0){var B=function(e){return function(t,n,i){var r,o,a=0,s=t.length-1;if(s>=0&&(r=t[s])instanceof xn){if(!s&&r.type==e&&r.length==i)return r;(o=r.prop(mn.lookAhead))&&(a=n[s]+r.length+o)}return m(e,t,n,i,a)}}(S);E=zn(S,L,P,0,L.length,0,b-y,B,B)}else E=m(S,L,P,b-y,k-b)}n.push(E),r.push(M)}function g(e,t,n,r,o,a,s,l){for(var c=[],u=[];e.length>r;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(m(i.types[s],c,u,a-o,l-a)),t.push(o-n)}function m(e,t,n,i,r,o){if(void 0===r&&(r=0),p){var a=[mn.contextHash,p];o=o?[a].concat(o):[a]}if(r>25){a=[mn.lookAhead,r];o=o?[a].concat(o):[a]}return new xn(e,t,n,i,o)}function v(e,t,n){var i=u.id,r=u.start,o=u.end,a=u.size;if(u.next(),a>=0&&i<c){var s=n;if(a>4)for(var l=u.pos-(a-4);u.pos>l;)n=v(e,t,n);t[--n]=s,t[--n]=o-e,t[--n]=r-e,t[--n]=i}else-3==a?p=i:-4==a&&(d=i);return n}for(var y=[],b=[];u.pos>0;)f(e.start||0,e.bufferStart||0,y,b,-1);var w=null!==(t=e.length)&&void 0!==t?t:y.length?b[0]+y[0].length:0;return new xn(h[e.topID],y.reverse(),b.reverse(),w)}var Hn=new WeakMap;function Vn(e,t){if(!e.isAnonymous||t instanceof Mn||t.type!=e)return 1;var n=Hn.get(t);if(null==n){n=1;for(var i=0,r=t.children;i<r.length;i++){var o=r[i];if(o.type!=e||!(o instanceof xn)){n=1;break}n+=Vn(e,o)}Hn.set(t,n)}return n}function zn(e,t,n,i,r,o,a,s,l){for(var c=0,u=i;u<r;u++)c+=Vn(e,t[u]);var h=Math.ceil(1.5*c/8),p=[],d=[];return function t(n,i,r,a,s){for(var c=r;c<a;){var u=c,f=i[c],g=Vn(e,n[c]);for(c++;c<a;c++){var m=Vn(e,n[c]);if(g+m>=h)break;g+=m}if(c==u+1){if(g>h){var v=n[u];t(v.children,v.positions,0,v.children.length,i[u]+s);continue}p.push(n[u])}else{var y=i[c-1]+n[c-1].length-f;p.push(zn(e,n,i,u,c,f,y,null,l))}d.push(f+s-o)}}(t,n,i,r,0),(s||l)(p,d,a)}var qn=function(){function e(){this.map=new WeakMap}return e.prototype.setBuffer=function(e,t,n){var i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)},e.prototype.getBuffer=function(e,t){var n=this.map.get(e);return n&&n.get(t)},e.prototype.set=function(e,t){e instanceof Fn?this.setBuffer(e.context.buffer,e.index,t):e instanceof Ln&&this.map.set(e.tree,t)},e.prototype.get=function(e){return e instanceof Fn?this.getBuffer(e.context.buffer,e.index):e instanceof Ln?this.map.get(e.tree):void 0},e.prototype.cursorSet=function(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)},e.prototype.cursorGet=function(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)},e}(),Un=function(){function e(e,t,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}return Object.defineProperty(e.prototype,"openStart",{get:function(){return(1&this.open)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openEnd",{get:function(){return(2&this.open)>0},enumerable:!1,configurable:!0}),e.addTree=function(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=!1);for(var r=[new e(0,t.length,t,0,!1,i)],o=0,a=n;o<a.length;o++){var s=a[o];s.to>t.length&&r.push(s)}return r},e.applyChanges=function(t,n,i){if(void 0===i&&(i=128),!n.length)return t;for(var r=[],o=1,a=t.length?t[0]:null,s=0,l=0,c=0;;s++){var u=s<n.length?n[s]:null,h=u?u.fromA:1e9;if(h-l>=i)for(;a&&a.from<h;){var p=a;if(l>=p.from||h<=p.to||c){var d=Math.max(p.from,l)-c,f=Math.min(p.to,h)-c;p=d>=f?null:new e(d,f,p.tree,p.offset+c,s>0,!!u)}if(p&&r.push(p),a.to>h)break;a=o<t.length?t[o++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r},e}(),Wn=function(){function e(){}return e.prototype.startParse=function(e,t,n){return"string"==typeof e&&(e=new _n(e)),n=n?n.length?n.map((function(e){return new gn(e.from,e.to)})):[new gn(0,0)]:[new gn(0,e.length)],this.createParse(e,t||[],n)},e.prototype.parse=function(e,t,n){for(var i=this.startParse(e,t,n);;){var r=i.advance();if(r)return r}},e}(),_n=function(){function e(e){this.string=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.string.length},enumerable:!1,configurable:!0}),e.prototype.chunk=function(e){return this.string.slice(e)},Object.defineProperty(e.prototype,"lineChunks",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.read=function(e,t){return this.string.slice(e,t)},e}();function jn(e){return function(t,n,i,r){return new Xn(t,e,n,i,r)}}var Gn=function(e,t,n,i,r){this.parser=e,this.parse=t,this.overlay=n,this.target=i,this.ranges=r},Kn=function(e,t,n,i,r,o,a){this.parser=e,this.predicate=t,this.mounts=n,this.index=i,this.start=r,this.target=o,this.prev=a,this.depth=0,this.ranges=[]},Yn=new mn({perNode:!0}),Xn=function(){function e(e,t,n,i,r){this.nest=t,this.input=n,this.fragments=i,this.ranges=r,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}return e.prototype.advance=function(){if(this.baseParse){var e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(var t=0,n=this.inner;t<n.length;t++){n[t].parse.stopAt(this.stoppedAt)}}if(this.innerDone==this.inner.length){var i=this.baseTree;return null!=this.stoppedAt&&(i=new xn(i.type,i.children,i.positions,i.length,i.propValues.concat([[Yn,this.stoppedAt]]))),i}var r=this.inner[this.innerDone],o=r.parse.advance();if(o){this.innerDone++;var a=Object.assign(Object.create(null),r.target.props);a[mn.mounted.id]=new vn(o,r.overlay,r.parser),r.target.props=a}return null},Object.defineProperty(e.prototype,"parsedPos",{get:function(){if(this.baseParse)return 0;for(var e=this.input.length,t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e},enumerable:!1,configurable:!0}),e.prototype.stopAt=function(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(var t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)},e.prototype.startInner=function(){var e=new ei(this.fragments),t=null,n=null,i=new Bn(new Ln(this.baseTree,this.ranges[0].from,0,null),wn.IncludeAnonymous|wn.IgnoreMounts);e:for(var r=void 0,o=void 0;null==this.stoppedAt||i.from<this.stoppedAt;){var a=!0,s=void 0;if(e.hasNode(i)){if(t){var l=t.mounts.find((function(e){return e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay}));if(l)for(var c=function(e){var n=e.from+l.pos,r=e.to+l.pos;n>=i.from&&r<=i.to&&!t.ranges.some((function(e){return e.from<r&&e.to>n}))&&t.ranges.push({from:n,to:r})},u=0,h=l.mount.overlay;u<h.length;u++){c(h[u])}}a=!1}else if(n&&(o=$n(n.ranges,i.from,i.to)))a=2!=o;else if(!i.type.isAnonymous&&i.from<i.to&&(r=this.nest(i,this.input))){i.tree||Qn(i);var p=e.findMounts(i.from,r.parser);if("function"==typeof r.overlay)t=new Kn(r.parser,r.overlay,p,this.inner.length,i.from,i.tree,t);else(d=ti(this.ranges,r.overlay||[new gn(i.from,i.to)])).length&&this.inner.push(new Gn(r.parser,r.parser.startParse(this.input,ni(p,d),d),r.overlay?r.overlay.map((function(e){return new gn(e.from-i.from,e.to-i.from)})):null,i.tree,d)),r.overlay?d.length&&(n={ranges:d,depth:0,prev:n}):a=!1}else t&&(s=t.predicate(i))&&(!0===s&&(s=new gn(i.from,i.to)),s.from<s.to&&t.ranges.push(s));if(a&&i.firstChild())t&&t.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;var d;t&&!--t.depth&&((d=ti(this.ranges,t.ranges)).length&&this.inner.splice(t.index,0,new Gn(t.parser,t.parser.startParse(this.input,ni(t.mounts,d),d),t.ranges.map((function(e){return new gn(e.from-t.start,e.to-t.start)})),t.target,d)),t=t.prev),n&&!--n.depth&&(n=n.prev)}}},e}();function $n(e,t,n){for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.from>=n)break;if(o.to>t)return o.from<=t&&o.to>=n?2:1}return 0}function Zn(e,t,n,i,r,o){if(t<n){var a=e.buffer[t+1],s=e.buffer[n-2];i.push(e.slice(t,n,a,s)),r.push(a-o)}}function Qn(e){var t=e.node,n=0;do{e.parent(),n++}while(!e.tree);for(var i=0,r=e.tree,o=0;!((o=r.positions[i]+e.from)<=t.from&&o+r.children[i].length>=t.to);i++);var a=r.children[i],s=a.buffer;r.children[i]=function e(n,i,r,l,c){for(var u=n;s[u+2]+o<=t.from;)u=s[u+3];var h=[],p=[];Zn(a,n,u,h,p,l);var d=s[u+1],f=s[u+2],g=d+o==t.from&&f+o==t.to&&s[u]==t.type.id;return h.push(g?t.toTree():e(u+4,s[u+3],a.set.types[s[u]],d,f-d)),p.push(d-l),Zn(a,s[u+3],i,h,p,l),new xn(r,h,p,c)}(0,s.length,bn.none,0,a.length);for(var l=0;l<=n;l++)e.childAfter(t.from)}var Jn=function(){function e(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(wn.IncludeAnonymous|wn.IgnoreMounts)}return e.prototype.moveTo=function(e){for(var t=this.cursor,n=e-this.offset;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,wn.IgnoreOverlays|wn.ExcludeBuffers)||t.next(!1)||(this.done=!0)},e.prototype.hasNode=function(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(var t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof xn))break;t=t.children[0]}return!1},e}(),ei=function(){function e(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){var n=this.curFrag=e[0];this.curTo=null!==(t=n.tree.prop(Yn))&&void 0!==t?t:n.to,this.inner=new Jn(n.tree,-n.offset)}else this.curFrag=this.inner=null}return e.prototype.hasNode=function(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)},e.prototype.nextFrag=function(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{var t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(Yn))&&void 0!==e?e:t.to,this.inner=new Jn(t.tree,-t.offset)}},e.prototype.findMounts=function(e,t){var n,i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(var r=this.inner.cursor.node;r;r=r.parent){var o=null===(n=r.tree)||void 0===n?void 0:n.prop(mn.mounted);if(o&&o.parser==t)for(var a=this.fragI;a<this.fragments.length;a++){var s=this.fragments[a];if(s.from>=r.to)break;s.tree==this.curFrag.tree&&i.push({frag:s,pos:r.from-s.offset,mount:o})}}}return i},e}();function ti(e,t){for(var n=null,i=t,r=1,o=0;r<e.length;r++)for(var a=e[r-1].to,s=e[r].from;o<i.length;o++){var l=i[o];if(l.from>=s)break;l.to<=a||(n||(i=n=t.slice()),l.from<a?(n[o]=new gn(l.from,a),l.to>s&&n.splice(o+1,0,new gn(s,l.to))):l.to>s?n[o--]=new gn(s,l.to):n.splice(o--,1))}return i}function ni(e,t){for(var n=[],i=function(e,i,r){var o=e+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,s=Math.max(r.from,o),l=Math.min(r.to,a);if(i.overlay)for(var c=i.overlay.map((function(t){return new gn(t.from+e,t.to+e)})),u=function(e,t,n,i){for(var r=0,o=0,a=!1,s=!1,l=-1e9,c=[];;){var u=r==e.length?1e9:a?e[r].to:e[r].from,h=o==t.length?1e9:s?t[o].to:t[o].from;if(a!=s){var p=Math.max(l,n),d=Math.min(u,h,i);p<d&&c.push(new gn(p,d))}if(1e9==(l=Math.min(u,h)))break;u==l&&(a?(a=!1,r++):a=!0),h==l&&(s?(s=!1,o++):s=!0)}return c}(t,c,s,l),h=0,p=s;;h++){var d=h==u.length,f=d?l:u[h].from;if(f>p&&n.push(new Un(p,f,i.tree,-o,r.from>=p,r.to<=f)),d)break;p=u[h].to}else n.push(new Un(s,l,i.tree,-o,r.from>=o,r.to<=a))},r=0,o=e;r<o.length;r++){var a=o[r];i(a.pos,a.mount,a.frag)}return n}var ii=function(){function e(){}return e.prototype.lineAt=function(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)},e.prototype.line=function(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)},e.prototype.replace=function(e,t,n){var i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),oi.from(i,this.length-(t-e)+n.length)},e.prototype.append=function(e){return this.replace(this.length,this.length,e)},e.prototype.slice=function(e,t){void 0===t&&(t=this.length);var n=[];return this.decompose(e,t,n,0),oi.from(n,t-e)},e.prototype.eq=function(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;for(var t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new li(this),r=new li(e),o=t,a=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}},e.prototype.iter=function(e){return void 0===e&&(e=1),new li(this,e)},e.prototype.iterRange=function(e,t){return void 0===t&&(t=this.length),new ci(this,e,t)},e.prototype.iterLines=function(e,t){var n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);var i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new ui(n)},e.prototype.toString=function(){return this.sliceString(0)},e.prototype.toJSON=function(){var e=[];return this.flatten(e),e},e.of=function(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new ri(t):oi.from(ri.split(t,[])):e.empty},e}(),ri=function(e){function t(t,n){void 0===n&&(n=function(e){for(var t=-1,n=0,i=e;n<i.length;n++){t+=i[n].length+1}return t}(t));var i=e.call(this)||this;return i.text=t,i.length=n,i}return f(t,e),Object.defineProperty(t.prototype,"lines",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.lineInner=function(e,t,n,i){for(var r=0;;r++){var o=this.text[r],a=i+o.length;if((t?n:a)>=e)return new hi(i,a,n,o);i=a+1,n++}},t.prototype.decompose=function(e,n,i,r){var o=e<=0&&n>=this.length?this:new t(si(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(1&r){var a=i.pop(),s=ai(o.text,a.text.slice(),0,o.length);if(s.length<=32)i.push(new t(s,a.length+o.length));else{var l=s.length>>1;i.push(new t(s.slice(0,l)),new t(s.slice(l)))}}else i.push(o)},t.prototype.replace=function(n,i,r){if(!(r instanceof t))return e.prototype.replace.call(this,n,i,r);var o=ai(this.text,ai(r.text,si(this.text,0,n)),i),a=this.length+r.length-(i-n);return o.length<=32?new t(o,a):oi.from(t.split(o,[]),a)},t.prototype.sliceString=function(e,t,n){void 0===t&&(t=this.length),void 0===n&&(n="\n");for(var i="",r=0,o=0;r<=t&&o<this.text.length;o++){var a=this.text[o],s=r+a.length;r>e&&o&&(i+=n),e<s&&t>r&&(i+=a.slice(Math.max(0,e-r),t-r)),r=s+1}return i},t.prototype.flatten=function(e){for(var t=0,n=this.text;t<n.length;t++){var i=n[t];e.push(i)}},t.prototype.scanIdentical=function(){return 0},t.split=function(e,n){for(var i=[],r=-1,o=0,a=e;o<a.length;o++){var s=a[o];i.push(s),r+=s.length+1,32==i.length&&(n.push(new t(i,r)),i=[],r=-1)}return r>-1&&n.push(new t(i,r)),n},t}(ii),oi=function(e){function t(t,n){var i=e.call(this)||this;i.children=t,i.length=n,i.lines=0;for(var r=0,o=t;r<o.length;r++){var a=o[r];i.lines+=a.lines}return i}return f(t,e),t.prototype.lineInner=function(e,t,n,i){for(var r=0;;r++){var o=this.children[r],a=i+o.length,s=n+o.lines-1;if((t?s:a)>=e)return o.lineInner(e,t,n,i);i=a+1,n=s+1}},t.prototype.decompose=function(e,t,n,i){for(var r=0,o=0;o<=t&&r<this.children.length;r++){var a=this.children[r],s=o+a.length;if(e<=s&&t>=o){var l=i&((o<=e?1:0)|(s>=t?2:0));o>=e&&s<=t&&!l?n.push(a):a.decompose(e-o,t-o,n,l)}o=s+1}},t.prototype.replace=function(n,i,r){if(r.lines<this.lines)for(var o=0,a=0;o<this.children.length;o++){var s=this.children[o],l=a+s.length;if(n>=a&&i<=l){var c=s.replace(n-a,i-a,r),u=this.lines-s.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){var h=this.children.slice();return h[o]=c,new t(h,this.length-(i-n)+r.length)}return e.prototype.replace.call(this,a,l,c)}a=l+1}return e.prototype.replace.call(this,n,i,r)},t.prototype.sliceString=function(e,t,n){void 0===t&&(t=this.length),void 0===n&&(n="\n");for(var i="",r=0,o=0;r<this.children.length&&o<=t;r++){var a=this.children[r],s=o+a.length;o>e&&r&&(i+=n),e<s&&t>o&&(i+=a.sliceString(e-o,t-o,n)),o=s+1}return i},t.prototype.flatten=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].flatten(e)}},t.prototype.scanIdentical=function(e,n){if(!(e instanceof t))return 0;for(var i=0,r=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1],o=r[0],a=r[1],s=r[2],l=r[3];;o+=n,a+=n){if(o==s||a==l)return i;var c=this.children[o],u=e.children[a];if(c!=u)return i+c.scanIdentical(u,n);i+=c.length+1}},t.from=function(e,n){void 0===n&&(n=e.reduce((function(e,t){return e+t.length+1}),-1));for(var i=0,r=0,o=e;r<o.length;r++){i+=o[r].lines}if(i<32){for(var a=[],s=0,l=e;s<l.length;s++){l[s].flatten(a)}return new ri(a,n)}var c=Math.max(32,i>>5),u=c<<1,h=c>>1,p=[],d=0,f=-1,g=[];function m(e){var n;if(e.lines>u&&e instanceof t)for(var i=0,r=e.children;i<r.length;i++){m(r[i])}else e.lines>h&&(d>h||!d)?(v(),p.push(e)):e instanceof ri&&d&&(n=g[g.length-1])instanceof ri&&e.lines+n.lines<=32?(d+=e.lines,f+=e.length+1,g[g.length-1]=new ri(n.text.concat(e.text),n.length+1+e.length)):(d+e.lines>c&&v(),d+=e.lines,f+=e.length+1,g.push(e))}function v(){0!=d&&(p.push(1==g.length?g[0]:t.from(g,f)),f=-1,d=g.length=0)}for(var y=0,b=e;y<b.length;y++){m(b[y])}return v(),1==p.length?p[0]:new t(p,n)},t}(ii);function ai(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=1e9);for(var r=0,o=0,a=!0;o<e.length&&r<=i;o++){var s=e[o],l=r+s.length;l>=n&&(l>i&&(s=s.slice(0,i-r)),r<n&&(s=s.slice(n-r)),a?(t[t.length-1]+=s,a=!1):t.push(s)),r=l+1}return t}function si(e,t,n){return ai(e,[""],t,n)}ii.empty=new ri([""],0);var li=function(){function e(e,t){void 0===t&&(t=1),this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ri?e.text.length:e.children.length)<<1]}return e.prototype.nextInner=function(e,t){for(this.done=this.lineBreak=!1;;){var n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,a=i instanceof ri?i.text.length:i.children.length;if(o==(t>0?a:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof ri){var s=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,s.length>Math.max(0,e))return this.value=0==e?s:t>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{e>(s=i.children[o+(t<0?-1:0)]).length?(e-=s.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(s),this.offsets.push(t>0?1:(s instanceof ri?s.text.length:s.children.length)<<1))}}},e.prototype.next=function(e){return void 0===e&&(e=0),e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)},e}(),ci=function(){function e(e,t,n){this.value="",this.done=!1,this.cursor=new li(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}return e.prototype.nextInner=function(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);var n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;var i=this.cursor.next(e).value;return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this},e.prototype.next=function(e){return void 0===e&&(e=0),e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)},Object.defineProperty(e.prototype,"lineBreak",{get:function(){return this.cursor.lineBreak&&""!=this.value},enumerable:!1,configurable:!0}),e}(),ui=function(){function e(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}return e.prototype.next=function(e){void 0===e&&(e=0);var t=this.inner.next(e),n=t.done,i=t.lineBreak,r=t.value;return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this},Object.defineProperty(e.prototype,"lineBreak",{get:function(){return!1},enumerable:!1,configurable:!0}),e}();"undefined"!=typeof Symbol&&(ii.prototype[Symbol.iterator]=function(){return this.iter()},li.prototype[Symbol.iterator]=ci.prototype[Symbol.iterator]=ui.prototype[Symbol.iterator]=function(){return this});for(var hi=function(){function e(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}return Object.defineProperty(e.prototype,"length",{get:function(){return this.to-this.from},enumerable:!1,configurable:!0}),e}(),pi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(e){return e?parseInt(e,36):1})),di=1;di<pi.length;di++)pi[di]+=pi[di-1];function fi(e){for(var t=1;t<pi.length;t+=2)if(pi[t]>e)return pi[t-1]<=e;return!1}function gi(e){return e>=127462&&e<=127487}function mi(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),(n?vi:yi)(e,t,i)}function vi(e,t,n){if(t==e.length)return t;t&&bi(e.charCodeAt(t))&&wi(e.charCodeAt(t-1))&&t--;var i=ki(e,t);for(t+=Ei(i);t<e.length;){var r=ki(e,t);if(8205==i||8205==r||n&&fi(r))t+=Ei(r),i=r;else{if(!gi(r))break;for(var o=0,a=t-2;a>=0&&gi(ki(e,a));)o++,a-=2;if(o%2==0)break;t+=2}}return t}function yi(e,t,n){for(;t>0;){var i=vi(e,t-2,n);if(i<t)return i;t--}return 0}function bi(e){return e>=56320&&e<57344}function wi(e){return e>=55296&&e<56320}function ki(e,t){var n=e.charCodeAt(t);if(!wi(n)||t+1==e.length)return n;var i=e.charCodeAt(t+1);return bi(i)?i-56320+(n-55296<<10)+65536:n}function Ci(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Ei(e){return e<65536?1:2}var xi=/\r\n?|\n/,Si=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Si||(Si={})),Mi=function(){function e(e){this.sections=e}return Object.defineProperty(e.prototype,"length",{get:function(){for(var e=0,t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newLength",{get:function(){for(var e=0,t=0;t<this.sections.length;t+=2){var n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0},enumerable:!1,configurable:!0}),e.prototype.iterGaps=function(e){for(var t=0,n=0,i=0;t<this.sections.length;){var r=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,r),i+=r):i+=o,n+=r}},e.prototype.iterChangedRanges=function(e,t){void 0===t&&(t=!1),Li(this,e,t)},Object.defineProperty(e.prototype,"invertedDesc",{get:function(){for(var t=[],n=0;n<this.sections.length;){var i=this.sections[n++],r=this.sections[n++];r<0?t.push(i,r):t.push(r,i)}return new e(t)},enumerable:!1,configurable:!0}),e.prototype.composeDesc=function(e){return this.empty?e:e.empty?this:Ii(this,e)},e.prototype.mapDesc=function(e,t){return void 0===t&&(t=!1),e.empty?this:Pi(this,e,t)},e.prototype.mapPos=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=Si.Simple);for(var i=0,r=0,o=0;o<this.sections.length;){var a=this.sections[o++],s=this.sections[o++],l=i+a;if(s<0){if(l>e)return r+(e-i);r+=a}else{if(n!=Si.Simple&&l>=e&&(n==Si.TrackDel&&i<e&&l>e||n==Si.TrackBefore&&i<e||n==Si.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!a)return e==i||t<0?r:r+s;r+=s}i=l}if(e>i)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(i));return r},e.prototype.touchesRange=function(e,t){void 0===t&&(t=e);for(var n=0,i=0;n<this.sections.length&&i<=t;){var r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=t&&r>=e)return!(i<e&&r>t)||"cover";i=r}return!1},e.prototype.toString=function(){for(var e="",t=0;t<this.sections.length;){var n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e},e.prototype.toJSON=function(){return this.sections},e.fromJSON=function(t){if(!Array.isArray(t)||t.length%2||t.some((function(e){return"number"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new e(t)},e.create=function(t){return new e(t)},e}(),Ti=function(e){function t(t,n){var i=e.call(this,t)||this;return i.inserted=n,i}return f(t,e),t.prototype.apply=function(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Li(this,(function(t,n,i,r,o){return e=e.replace(i,i+(n-t),o)}),!1),e},t.prototype.mapDesc=function(e,t){return void 0===t&&(t=!1),Pi(this,e,t,!0)},t.prototype.invert=function(e){for(var n=this.sections.slice(),i=[],r=0,o=0;r<n.length;r+=2){var a=n[r],s=n[r+1];if(s>=0){n[r]=s,n[r+1]=a;for(var l=r>>1;i.length<l;)i.push(ii.empty);i.push(a?e.slice(o,o+a):ii.empty)}o+=a}return new t(n,i)},t.prototype.compose=function(e){return this.empty?e:e.empty?this:Ii(this,e,!0)},t.prototype.map=function(e,t){return void 0===t&&(t=!1),e.empty?this:Pi(this,e,t,!0)},t.prototype.iterChanges=function(e,t){void 0===t&&(t=!1),Li(this,e,t)},Object.defineProperty(t.prototype,"desc",{get:function(){return Mi.create(this.sections)},enumerable:!1,configurable:!0}),t.prototype.filter=function(e){var n=[],i=[],r=[],o=new Oi(this);e:for(var a=0,s=0;;){for(var l=a==e.length?1e9:e[a++];s<l||s==l&&0==o.len;){if(o.done)break e;Di(r,h=Math.min(o.len,l-s),-1);var c=-1==o.ins?-1:0==o.off?o.ins:0;Di(n,h,c),c>0&&Ai(i,n,o.text),o.forward(h),s+=h}for(var u=e[a++];s<u;){if(o.done)break e;var h;Di(n,h=Math.min(o.len,u-s),-1),Di(r,h,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(h),s+=h}}return{changes:new t(n,i),filtered:Mi.create(r)}},t.prototype.toJSON=function(){for(var e=[],t=0;t<this.sections.length;t+=2){var n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):0==i?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e},t.of=function(e,n,i){var r=[],o=[],a=0,s=null;function l(e){if(void 0===e&&(e=!1),e||r.length){a<n&&Di(r,n-a,-1);var i=new t(r,o);s=s?s.compose(i.map(s)):i,r=[],o=[],a=0}}return function e(c){if(Array.isArray(c))for(var u=0,h=c;u<h.length;u++){e(h[u])}else if(c instanceof t){if(c.length!=n)throw new RangeError("Mismatched change set length (got ".concat(c.length,", expected ").concat(n,")"));l(),s=s?s.compose(c.map(s)):c}else{var p=c.from,d=c.to,f=void 0===d?p:d,g=c.insert;if(p>f||p<0||f>n)throw new RangeError("Invalid change range ".concat(p," to ").concat(f," (in doc of length ").concat(n,")"));var m=g?"string"==typeof g?ii.of(g.split(i||xi)):g:ii.empty,v=m.length;if(p==f&&0==v)return;p<a&&l(),p>a&&Di(r,p-a,-1),Di(r,f-p,v),Ai(o,r,m),a=f}}(e),l(!s),s},t.empty=function(e){return new t(e?[e,-1]:[],[])},t.fromJSON=function(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");for(var n=[],i=[],r=0;r<e.length;r++){var o=e[r];if("number"==typeof o)n.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((function(e,t){return t&&"string"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)n.push(o[0],0);else{for(;i.length<r;)i.push(ii.empty);i[r]=ii.of(o.slice(1)),n.push(o[0],i[r].length)}}}return new t(n,i)},t.createSet=function(e,n){return new t(e,n)},t}(Mi);function Di(e,t,n,i){if(void 0===i&&(i=!1),!(0==t&&n<=0)){var r=e.length-2;r>=0&&n<=0&&n==e[r+1]?e[r]+=t:0==t&&0==e[r]?e[r+1]+=n:i?(e[r]+=t,e[r+1]+=n):e.push(t,n)}}function Ai(e,t,n){if(0!=n.length){var i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(ii.empty);e.push(n)}}}function Li(e,t,n){for(var i=e.inserted,r=0,o=0,a=0;a<e.sections.length;){var s=e.sections[a++],l=e.sections[a++];if(l<0)r+=s,o+=s;else{for(var c=r,u=o,h=ii.empty;c+=s,u+=l,l&&i&&(h=h.append(i[a-2>>1])),!(n||a==e.sections.length||e.sections[a+1]<0);)s=e.sections[a++],l=e.sections[a++];t(r,c,o,u,h),r=c,o=u}}}function Pi(e,t,n,i){void 0===i&&(i=!1);for(var r=[],o=i?[]:null,a=new Oi(e),s=new Oi(t),l=-1;;){if(-1==a.ins&&-1==s.ins)Di(r,c=Math.min(a.len,s.len),-1),a.forward(c),s.forward(c);else if(s.ins>=0&&(a.ins<0||l==a.i||0==a.off&&(s.len<a.len||s.len==a.len&&!n))){var c=s.len;for(Di(r,s.ins,-1);c;){var u=Math.min(a.len,c);a.ins>=0&&l<a.i&&a.len<=u&&(Di(r,0,a.ins),o&&Ai(o,r,a.text),l=a.i),a.forward(u),c-=u}s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return o?Ti.createSet(r,o):Mi.create(r);throw new Error("Mismatched change set lengths")}c=0;for(var h=a.len;h;)if(-1==s.ins){c+=u=Math.min(h,s.len),h-=u,s.forward(u)}else{if(!(0==s.ins&&s.len<h))break;h-=s.len,s.next()}Di(r,c,l<a.i?a.ins:0),o&&l<a.i&&Ai(o,r,a.text),l=a.i,a.forward(a.len-h)}}}function Ii(e,t,n){void 0===n&&(n=!1);for(var i=[],r=n?[]:null,o=new Oi(e),a=new Oi(t),s=!1;;){if(o.done&&a.done)return r?Ti.createSet(i,r):Mi.create(i);if(0==o.ins)Di(i,o.len,0,s),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");var l=Math.min(o.len2,a.len),c=i.length;if(-1==o.ins){var u=-1==a.ins?-1:a.off?0:a.ins;Di(i,l,u,s),r&&u&&Ai(r,i,a.text)}else-1==a.ins?(Di(i,o.off?0:o.len,l,s),r&&Ai(r,i,o.textBit(l))):(Di(i,o.off?0:o.len,a.off?0:a.ins,s),r&&!a.off&&Ai(r,i,a.text));s=(o.ins>l||a.ins>=0&&a.len>l)&&(s||i.length>c),o.forward2(l),a.forward(l)}else Di(i,0,a.ins,s),r&&Ai(r,i,a.text),a.next()}}var Oi=function(){function e(e){this.set=e,this.i=0,this.next()}return e.prototype.next=function(){var e=this.set.sections;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0},Object.defineProperty(e.prototype,"done",{get:function(){return-2==this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"len2",{get:function(){return this.ins<0?this.len:this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this.set.inserted,t=this.i-2>>1;return t>=e.length?ii.empty:e[t]},enumerable:!1,configurable:!0}),e.prototype.textBit=function(e){var t=this.set.inserted,n=this.i-2>>1;return n>=t.length&&!e?ii.empty:t[n].slice(this.off,null==e?void 0:this.off+e)},e.prototype.forward=function(e){e==this.len?this.next():(this.len-=e,this.off+=e)},e.prototype.forward2=function(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)},e}(),Fi=function(){function e(e,t,n){this.from=e,this.to=t,this.flags=n}return Object.defineProperty(e.prototype,"anchor",{get:function(){return 16&this.flags?this.to:this.from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return 16&this.flags?this.from:this.to},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.from==this.to},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assoc",{get:function(){return 4&this.flags?-1:8&this.flags?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bidiLevel",{get:function(){var e=3&this.flags;return 3==e?null:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"goalColumn",{get:function(){var e=this.flags>>5;return 33554431==e?void 0:e},enumerable:!1,configurable:!0}),e.prototype.map=function(t,n){var i,r;return void 0===n&&(n=-1),this.empty?i=r=t.mapPos(this.from,n):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new e(i,r,this.flags)},e.prototype.extend=function(e,t){if(void 0===t&&(t=e),e<=this.anchor&&t>=this.anchor)return Bi.range(e,t);var n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Bi.range(this.anchor,n)},e.prototype.eq=function(e){return this.anchor==e.anchor&&this.head==e.head},e.prototype.toJSON=function(){return{anchor:this.anchor,head:this.head}},e.fromJSON=function(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Bi.range(e.anchor,e.head)},e.create=function(t,n,i){return new e(t,n,i)},e}(),Bi=function(){function e(e,t){this.ranges=e,this.mainIndex=t}return e.prototype.map=function(t,n){return void 0===n&&(n=-1),t.empty?this:e.create(this.ranges.map((function(e){return e.map(t,n)})),this.mainIndex)},e.prototype.eq=function(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0},Object.defineProperty(e.prototype,"main",{get:function(){return this.ranges[this.mainIndex]},enumerable:!1,configurable:!0}),e.prototype.asSingle=function(){return 1==this.ranges.length?this:new e([this.main],0)},e.prototype.addRange=function(t,n){return void 0===n&&(n=!0),e.create([t].concat(this.ranges),n?0:this.mainIndex+1)},e.prototype.replaceRange=function(t,n){void 0===n&&(n=this.mainIndex);var i=this.ranges.slice();return i[n]=t,e.create(i,this.mainIndex)},e.prototype.toJSON=function(){return{ranges:this.ranges.map((function(e){return e.toJSON()})),main:this.mainIndex}},e.fromJSON=function(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new e(t.ranges.map((function(e){return Fi.fromJSON(e)})),t.main)},e.single=function(t,n){return void 0===n&&(n=t),new e([e.range(t,n)],0)},e.create=function(t,n){if(void 0===n&&(n=0),0==t.length)throw new RangeError("A selection needs at least one range");for(var i=0,r=0;r<t.length;r++){var o=t[r];if(o.empty?o.from<=i:o.from<i)return e.normalized(t.slice(),n);i=o.to}return new e(t,n)},e.cursor=function(e,t,n,i){return void 0===t&&(t=0),Fi.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=i?i:33554431)<<5)},e.range=function(e,t,n,i){var r=(null!=n?n:33554431)<<5|(null==i?3:Math.min(2,i));return t<e?Fi.create(t,e,24|r):Fi.create(e,t,(t>e?4:0)|r)},e.normalized=function(t,n){void 0===n&&(n=0);var i=t[n];t.sort((function(e,t){return e.from-t.from})),n=t.indexOf(i);for(var r=1;r<t.length;r++){var o=t[r],a=t[r-1];if(o.empty?o.from<=a.to:o.from<a.to){var s=a.from,l=Math.max(o.to,a.to);r<=n&&n--,t.splice(--r,2,o.anchor>o.head?e.range(l,s):e.range(s,l))}}return new e(t,n)},e}();function Ni(e,t){for(var n=0,i=e.ranges;n<i.length;n++){if(i[n].to>t)throw new RangeError("Selection points outside of document")}}var Ri=0,Hi=function(){function e(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=Ri++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}return e.define=function(t){return void 0===t&&(t={}),new e(t.combine||function(e){return e},t.compareInput||function(e,t){return e===t},t.compare||(t.combine?function(e,t){return e===t}:Vi),!!t.static,t.enables)},e.prototype.of=function(e){return new zi([],this,0,e)},e.prototype.compute=function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zi(e,this,1,t)},e.prototype.computeN=function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new zi(e,this,2,t)},e.prototype.from=function(e,t){return t||(t=function(e){return e}),this.compute([e],(function(n){return t(n.field(e))}))},e}();function Vi(e,t){return e==t||e.length==t.length&&e.every((function(e,n){return e===t[n]}))}var zi=function(){function e(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=Ri++}return e.prototype.dynamicSlot=function(e){for(var t,n=this,i=this.value,r=this.facet.compareInput,o=this.id,a=e[o]>>1,s=2==this.type,l=!1,c=!1,u=[],h=0,p=this.dependencies;h<p.length;h++){var d=p[h];"doc"==d?l=!0:"selection"==d?c=!0:0==(1&(null!==(t=e[d.id])&&void 0!==t?t:1))&&u.push(e[d.id])}return{create:function(e){return e.values[a]=i(e),1},update:function(e,t){if(l&&t.docChanged||c&&(t.docChanged||t.selection)||Ui(e,u)){var n=i(e);if(s?!qi(n,e.values[a],r):!r(n,e.values[a]))return e.values[a]=n,1}return 0},reconfigure:function(e,t){var l,c=t.config.address[o];if(null!=c){var u=nr(t,c);if(n.dependencies.every((function(n){return n instanceof Hi?t.facet(n)===e.facet(n):!(n instanceof _i)||t.field(n,!1)==e.field(n,!1)}))||(s?qi(l=i(e),u,r):r(l=i(e),u)))return e.values[a]=u,0}else l=i(e);return e.values[a]=l,1}}},e}();function qi(e,t,n){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Ui(e,t){for(var n=!1,i=0,r=t;i<r.length;i++){1&tr(e,r[i])&&(n=!0)}return n}var Wi=Hi.define({static:!0}),_i=function(){function e(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}return e.define=function(t){var n=new e(Ri++,t.create,t.update,t.compare||function(e,t){return e===t},t);return t.provide&&(n.provides=t.provide(n)),n},e.prototype.create=function(e){var t=this,n=e.facet(Wi).find((function(e){return e.field==t}));return((null==n?void 0:n.create)||this.createF)(e)},e.prototype.slot=function(e){var t=this,n=e[this.id]>>1;return{create:function(e){return e.values[n]=t.create(e),1},update:function(e,i){var r=e.values[n],o=t.updateF(r,i);return t.compareF(r,o)?0:(e.values[n]=o,1)},reconfigure:function(e,i){return null!=i.config.address[t.id]?(e.values[n]=i.field(t),0):(e.values[n]=t.create(e),1)}}},e.prototype.init=function(e){return[this,Wi.of({field:this,create:e})]},Object.defineProperty(e.prototype,"extension",{get:function(){return this},enumerable:!1,configurable:!0}),e}(),ji=4,Gi=3,Ki=2,Yi=1;function Xi(e){return function(t){return new Zi(t,e)}}var $i={highest:Xi(0),high:Xi(Yi),default:Xi(Ki),low:Xi(Gi),lowest:Xi(ji)},Zi=function(e,t){this.inner=e,this.prec=t},Qi=function(){function e(){}return e.prototype.of=function(e){return new Ji(this,e)},e.prototype.reconfigure=function(t){return e.reconfigure.of({compartment:this,extension:t})},e.prototype.get=function(e){return e.config.compartments.get(this)},e}(),Ji=function(e,t){this.compartment=e,this.inner=t},er=function(){function e(e,t,n,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}return e.prototype.staticFacet=function(e){var t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]},e.resolve=function(t,n,i){for(var r=[],o=Object.create(null),a=new Map,s=0,l=function(e,t,n){var i=[[],[],[],[],[]],r=new Map;function o(e,a){var s=r.get(e);if(null!=s){if(s<=a)return;var l=i[s].indexOf(e);l>-1&&i[s].splice(l,1),e instanceof Ji&&n.delete(e.compartment)}if(r.set(e,a),Array.isArray(e))for(var c=0,u=e;c<u.length;c++){o(u[c],a)}else if(e instanceof Ji){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");var h=t.get(e.compartment)||e.inner;n.set(e.compartment,h),o(h,a)}else if(e instanceof Zi)o(e.inner,e.prec);else if(e instanceof _i)i[a].push(e),e.provides&&o(e.provides,a);else if(e instanceof zi)i[a].push(e),e.facet.extensions&&o(e.facet.extensions,Ki);else{if(!(h=e.extension))throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));o(h,a)}}return o(e,Ki),i.reduce((function(e,t){return e.concat(t)}))}(t,n,a);s<l.length;s++){var c=l[s];c instanceof _i?r.push(c):(o[c.facet.id]||(o[c.facet.id]=[])).push(c)}for(var u=Object.create(null),h=[],p=[],d=function(e){u[e.id]=p.length<<1,p.push((function(t){return e.slot(t)}))},f=0,g=r;f<g.length;f++){d(g[f])}var m=null==i?void 0:i.config.facets,v=function(e){var t=o[e],n=t[0].facet,r=m&&m[e]||[];if(t.every((function(e){return 0==e.type})))if(u[n.id]=h.length<<1|1,Vi(r,t))h.push(i.facet(n));else{var a=n.combine(t.map((function(e){return e.value})));h.push(i&&n.compare(a,i.facet(n))?i.facet(n):a)}else{for(var s=function(e){0==e.type?(u[e.id]=h.length<<1|1,h.push(e.value)):(u[e.id]=p.length<<1,p.push((function(t){return e.dynamicSlot(t)})))},l=0,c=t;l<c.length;l++){s(c[l])}u[n.id]=p.length<<1,p.push((function(e){return function(e,t,n){var i=n.map((function(t){return e[t.id]})),r=n.map((function(e){return e.type})),o=i.filter((function(e){return!(1&e)})),a=e[t.id]>>1;function s(e){for(var n=[],o=0;o<i.length;o++){var a=nr(e,i[o]);if(2==r[o])for(var s=0,l=a;s<l.length;s++){var c=l[s];n.push(c)}else n.push(a)}return t.combine(n)}return{create:function(e){for(var t=0,n=i;t<n.length;t++)tr(e,n[t]);return e.values[a]=s(e),1},update:function(e,n){if(!Ui(e,o))return 0;var i=s(e);return t.compare(i,e.values[a])?0:(e.values[a]=i,1)},reconfigure:function(e,r){var o=Ui(e,i),l=r.config.facets[t.id],c=r.facet(t);if(l&&!o&&Vi(n,l))return e.values[a]=c,0;var u=s(e);return t.compare(u,c)?(e.values[a]=c,0):(e.values[a]=u,1)}}}(e,n,t)}))}};for(var y in o)v(y);return new e(t,a,p.map((function(e){return e(u)})),u,h,o)},e}();function tr(e,t){if(1&t)return 2;var n=t>>1,i=e.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[n]=4;var r=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|r}function nr(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}var ir=Hi.define(),rr=Hi.define({combine:function(e){return e.some((function(e){return e}))},static:!0}),or=Hi.define({combine:function(e){return e.length?e[0]:void 0},static:!0}),ar=Hi.define(),sr=Hi.define(),lr=Hi.define(),cr=Hi.define({combine:function(e){return!!e.length&&e[0]}}),ur=function(){function e(e,t){this.type=e,this.value=t}return e.define=function(){return new hr},e}(),hr=function(){function e(){}return e.prototype.of=function(e){return new ur(this,e)},e}(),pr=function(){function e(e){this.map=e}return e.prototype.of=function(e){return new dr(this,e)},e}(),dr=function(){function e(e,t){this.type=e,this.value=t}return e.prototype.map=function(t){var n=this.type.map(this.value,t);return void 0===n?void 0:n==this.value?this:new e(this.type,n)},e.prototype.is=function(e){return this.type==e},e.define=function(e){return void 0===e&&(e={}),new pr(e.map||function(e){return e})},e.mapEffects=function(e,t){if(!e.length)return e;for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i].map(t);o&&n.push(o)}return n},e}();dr.reconfigure=dr.define(),dr.appendConfig=dr.define();var fr=function(){function e(t,n,i,r,o,a){this.startState=t,this.changes=n,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Ni(i,n.newLength),o.some((function(t){return t.type==e.time}))||(this.annotations=o.concat(e.time.of(Date.now())))}return e.create=function(t,n,i,r,o,a){return new e(t,n,i,r,o,a)},Object.defineProperty(e.prototype,"newDoc",{get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newSelection",{get:function(){return this.selection||this.startState.selection.map(this.changes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state||this.startState.applyTransaction(this),this._state},enumerable:!1,configurable:!0}),e.prototype.annotation=function(e){for(var t=0,n=this.annotations;t<n.length;t++){var i=n[t];if(i.type==e)return i.value}},Object.defineProperty(e.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reconfigured",{get:function(){return this.startState.config!=this.state.config},enumerable:!1,configurable:!0}),e.prototype.isUserEvent=function(t){var n=this.annotation(e.userEvent);return!(!n||!(n==t||n.length>t.length&&n.slice(0,t.length)==t&&"."==n[t.length]))},e}();function gr(e,t){for(var n=[],i=0,r=0;;){var o=void 0,a=void 0;if(i<e.length&&(r==t.length||t[r]>=e[i]))o=e[i++],a=e[i++];else{if(!(r<t.length))return n;o=t[r++],a=t[r++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function mr(e,t,n){var i,r,o,a;return n?(r=t.changes,o=Ti.empty(t.changes.length),a=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),a=e.changes.compose(r)),{changes:a,selection:t.selection?t.selection.map(o):null===(i=e.selection)||void 0===i?void 0:i.map(r),effects:dr.mapEffects(e.effects,r).concat(dr.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function vr(e,t,n){var i=t.selection,r=wr(t.annotations);return t.userEvent&&(r=r.concat(fr.userEvent.of(t.userEvent))),{changes:t.changes instanceof Ti?t.changes:Ti.of(t.changes||[],n,e.facet(or)),selection:i&&(i instanceof Bi?i:Bi.single(i.anchor,i.head)),effects:wr(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function yr(e,t,n){var i=vr(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(var r=1;r<t.length;r++){!1===t[r].filter&&(n=!1);var o=!!t[r].sequential;i=mr(i,vr(e,t[r],o?i.changes.newLength:e.doc.length),o)}var a=fr.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){for(var t=e.startState,n=t.facet(lr),i=e,r=n.length-1;r>=0;r--){var o=n[r](e);o&&Object.keys(o).length&&(i=mr(i,vr(t,o,e.changes.newLength),!0))}return i==e?e:fr.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(e){for(var t=e.startState,n=!0,i=0,r=t.facet(ar);i<r.length;i++){var o=(0,r[i])(e);if(!1===o){n=!1;break}Array.isArray(o)&&(n=!0===n?o:gr(n,o))}if(!0!==n){var a=void 0,s=void 0;if(!1===n)s=e.changes.invertedDesc,a=Ti.empty(t.doc.length);else a=(u=e.changes.filter(n)).changes,s=u.filtered.mapDesc(u.changes).invertedDesc;e=fr.create(t,a,e.selection&&e.selection.map(s),dr.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}for(var l=t.facet(sr),c=l.length-1;c>=0;c--){var u;e=(u=l[c](e))instanceof fr?u:Array.isArray(u)&&1==u.length&&u[0]instanceof fr?u[0]:yr(t,wr(u),!1)}return e}(a):a)}fr.time=ur.define(),fr.userEvent=ur.define(),fr.addToHistory=ur.define(),fr.remote=ur.define();var br=[];function wr(e){return null==e?br:Array.isArray(e)?e:[e]}var kr,Cr=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Cr||(Cr={})),Er=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{kr=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function xr(e){return function(t){if(!/\S/.test(t))return Cr.Space;if(function(e){if(kr)return kr.test(e);for(var t=0;t<e.length;t++){var n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Er.test(n)))return!0}return!1}(t))return Cr.Word;for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Cr.Word;return Cr.Other}}var Sr=function(){function e(e,t,n,i,r,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(var a=0;a<this.config.dynamicSlots.length;a++)tr(this,a<<1);this.computeSlot=null}return e.prototype.field=function(e,t){void 0===t&&(t=!0);var n=this.config.address[e.id];if(null!=n)return tr(this,n),nr(this,n);if(t)throw new RangeError("Field is not present in this state")},e.prototype.update=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yr(this,e,!0)},e.prototype.applyTransaction=function(t){for(var n,i=this,r=this.config,o=r.base,a=r.compartments,s=0,l=t.effects;s<l.length;s++){var c=l[s];c.is(Qi.reconfigure)?(r&&(a=new Map,r.compartments.forEach((function(e,t){return a.set(t,e)})),r=null),a.set(c.value.compartment,c.value.extension)):c.is(dr.reconfigure)?(r=null,o=c.value):c.is(dr.appendConfig)&&(r=null,o=wr(o).concat(c.value))}r?n=t.startState.values.slice():n=new e(r=er.resolve(o,a,this),this.doc,this.selection,r.dynamicSlots.map((function(){return null})),(function(e,t){return t.reconfigure(e,i)}),null).values;new e(r,t.newDoc,t.newSelection,n,(function(e,n){return n.update(e,t)}),t)},e.prototype.replaceSelection=function(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:e},range:Bi.cursor(t.from+e.length)}}))},e.prototype.changeByRange=function(e){for(var t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],o=wr(n.effects),a=1;a<t.ranges.length;a++){for(var s=e(t.ranges[a]),l=this.changes(s.changes),c=l.map(i),u=0;u<a;u++)r[u]=r[u].map(c);var h=i.mapDesc(l,!0);r.push(s.range.map(h)),i=i.compose(c),o=dr.mapEffects(o,c).concat(dr.mapEffects(wr(s.effects),h))}return{changes:i,selection:Bi.create(r,t.mainIndex),effects:o}},e.prototype.changes=function(t){return void 0===t&&(t=[]),t instanceof Ti?t:Ti.of(t,this.doc.length,this.facet(e.lineSeparator))},e.prototype.toText=function(t){return ii.of(t.split(this.facet(e.lineSeparator)||xi))},e.prototype.sliceDoc=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.doc.length),this.doc.sliceString(e,t,this.lineBreak)},e.prototype.facet=function(e){var t=this.config.address[e.id];return null==t?e.default:(tr(this,t),nr(this,t))},e.prototype.toJSON=function(e){var t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(var n in e){var i=e[n];i instanceof _i&&null!=this.config.address[i.id]&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t},e.fromJSON=function(t,n,i){if(void 0===n&&(n={}),!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");var r=[];if(i){var o=function(e){if(Object.prototype.hasOwnProperty.call(t,e)){var n=i[e],o=t[e];r.push(n.init((function(e){return n.spec.fromJSON(o,e)})))}};for(var a in i)o(a)}return e.create({doc:t.doc,selection:Bi.fromJSON(t.selection),extensions:n.extensions?r.concat([n.extensions]):r})},e.create=function(t){void 0===t&&(t={});var n=er.resolve(t.extensions||[],new Map),i=t.doc instanceof ii?t.doc:ii.of((t.doc||"").split(n.staticFacet(e.lineSeparator)||xi)),r=t.selection?t.selection instanceof Bi?t.selection:Bi.single(t.selection.anchor,t.selection.head):Bi.single(0);return Ni(r,i.length),n.staticFacet(rr)||(r=r.asSingle()),new e(n,i,r,n.dynamicSlots.map((function(){return null})),(function(e,t){return t.create(e)}),null)},Object.defineProperty(e.prototype,"tabSize",{get:function(){return this.facet(e.tabSize)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineBreak",{get:function(){return this.facet(e.lineSeparator)||"\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this.facet(cr)},enumerable:!1,configurable:!0}),e.prototype.phrase=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var r=0,o=this.facet(e.phrases);r<o.length;r++){var a=o[r];if(Object.prototype.hasOwnProperty.call(a,t)){t=a[t];break}}return n.length&&(t=t.replace(/\$(\$|\d*)/g,(function(e,t){if("$"==t)return"$";var i=+(t||1);return!i||i>n.length?e:n[i-1]}))),t},e.prototype.languageDataAt=function(e,t,n){void 0===n&&(n=-1);for(var i=[],r=0,o=this.facet(ir);r<o.length;r++)for(var a=0,s=(0,o[r])(this,t,n);a<s.length;a++){var l=s[a];Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e])}return i},e.prototype.charCategorizer=function(e){return xr(this.languageDataAt("wordChars",e).join(""))},e.prototype.wordAt=function(e){for(var t=this.doc.lineAt(e),n=t.text,i=t.from,r=t.length,o=this.charCategorizer(e),a=e-i,s=e-i;a>0;){var l=mi(n,a,!1);if(o(n.slice(l,a))!=Cr.Word)break;a=l}for(;s<r;){var c=mi(n,s);if(o(n.slice(s,c))!=Cr.Word)break;s=c}return a==s?null:Bi.range(a+i,s+i)},e}();function Mr(e,t,n){void 0===n&&(n={});for(var i={},r=0,o=e;r<o.length;r++)for(var a=o[r],s=0,l=Object.keys(a);s<l.length;s++){var c=a[h=l[s]],u=i[h];if(void 0===u)i[h]=c;else if(u===c||void 0===c);else{if(!Object.hasOwnProperty.call(n,h))throw new Error("Config merge conflict for field "+h);i[h]=n[h](u,c)}}for(var h in t)void 0===i[h]&&(i[h]=t[h]);return i}Sr.allowMultipleSelections=rr,Sr.tabSize=Hi.define({combine:function(e){return e.length?e[0]:4}}),Sr.lineSeparator=or,Sr.readOnly=cr,Sr.phrases=Hi.define({compare:function(e,t){var n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every((function(n){return e[n]==t[n]}))}}),Sr.languageData=ir,Sr.changeFilter=ar,Sr.transactionFilter=sr,Sr.transactionExtender=lr,Qi.reconfigure=dr.define();var Tr=function(){function e(){}return e.prototype.eq=function(e){return this==e},e.prototype.range=function(e,t){return void 0===t&&(t=e),Dr.create(e,t,this)},e}();Tr.prototype.startSide=Tr.prototype.endSide=0,Tr.prototype.point=!1,Tr.prototype.mapMode=Si.TrackDel;var Dr=function(){function e(e,t,n){this.from=e,this.to=t,this.value=n}return e.create=function(t,n,i){return new e(t,n,i)},e}();function Ar(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}var Lr=function(){function e(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}return Object.defineProperty(e.prototype,"length",{get:function(){return this.to[this.to.length-1]},enumerable:!1,configurable:!0}),e.prototype.findIndex=function(e,t,n,i){void 0===i&&(i=0);for(var r=n?this.to:this.from,o=i,a=r.length;;){if(o==a)return o;var s=o+a>>1,l=r[s]-e||(n?this.value[s].endSide:this.value[s].startSide)-t;if(s==o)return l>=0?o:a;l>=0?a=s:o=s+1}},e.prototype.between=function(e,t,n,i){for(var r=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+e,this.to[r]+e,this.value[r]))return!1},e.prototype.map=function(t,n){for(var i=[],r=[],o=[],a=-1,s=-1,l=0;l<this.value.length;l++){var c=this.value[l],u=this.from[l]+t,h=this.to[l]+t,p=void 0,d=void 0;if(u==h){var f=n.mapPos(u,c.startSide,c.mapMode);if(null==f)continue;if(p=d=f,c.startSide!=c.endSide&&(d=n.mapPos(u,c.endSide))<p)continue}else if((p=n.mapPos(u,c.startSide))>(d=n.mapPos(h,c.endSide))||p==d&&c.startSide>0&&c.endSide<=0)continue;(d-p||c.endSide-c.startSide)<0||(a<0&&(a=p),c.point&&(s=Math.max(s,d-p)),i.push(c),r.push(p-a),o.push(d-a))}return{mapped:i.length?new e(r,o,i,s):null,pos:a}},e}(),Pr=function(){function e(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}return e.create=function(t,n,i,r){return new e(t,n,i,r)},Object.defineProperty(e.prototype,"length",{get:function(){var e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.isEmpty)return 0;for(var e=this.nextLayer.size,t=0,n=this.chunk;t<n.length;t++){e+=n[t].value.length}return e},enumerable:!1,configurable:!0}),e.prototype.chunkEnd=function(e){return this.chunkPos[e]+this.chunk[e].length},e.prototype.update=function(t){var n=t.add,i=void 0===n?[]:n,r=t.sort,o=void 0!==r&&r,a=t.filterFrom,s=void 0===a?0:a,l=t.filterTo,c=void 0===l?this.length:l,u=t.filter;if(0==i.length&&!u)return this;if(o&&(i=i.slice().sort(Ar)),this.isEmpty)return i.length?e.of(i):this;for(var h=new Fr(this,null,-1).goto(0),p=0,d=[],f=new Ir;h.value||p<i.length;)if(p<i.length&&(h.from-i[p].from||h.startSide-i[p].value.startSide)>=0){var g=i[p++];f.addInner(g.from,g.to,g.value)||d.push(g)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(p==i.length||this.chunkEnd(h.chunkIndex)<i[p].from)&&(!u||s>this.chunkEnd(h.chunkIndex)||c<this.chunkPos[h.chunkIndex])&&f.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!u||s>h.to||c<h.from||u(h.from,h.to,h.value))&&(f.addInner(h.from,h.to,h.value)||d.push(Dr.create(h.from,h.to,h.value))),h.next());return f.finishInner(this.nextLayer.isEmpty&&!d.length?e.empty:this.nextLayer.update({add:d,filter:u,filterFrom:s,filterTo:c}))},e.prototype.map=function(t){if(t.empty||this.isEmpty)return this;for(var n=[],i=[],r=-1,o=0;o<this.chunk.length;o++){var a=this.chunkPos[o],s=this.chunk[o],l=t.touchesRange(a,a+s.length);if(!1===l)r=Math.max(r,s.maxPoint),n.push(s),i.push(t.mapPos(a));else if(!0===l){var c=s.map(a,t),u=c.mapped,h=c.pos;u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(h))}}var p=this.nextLayer.map(t);return 0==n.length?p:new e(i,n,p||e.empty,r)},e.prototype.between=function(e,t,n){if(!this.isEmpty){for(var i=0;i<this.chunk.length;i++){var r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&!1===o.between(r,e-r,t-r,n))return}this.nextLayer.between(e,t,n)}},e.prototype.iter=function(e){return void 0===e&&(e=0),Br.from([this]).goto(e)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.nextLayer==this},enumerable:!1,configurable:!0}),e.iter=function(e,t){return void 0===t&&(t=0),Br.from(e).goto(t)},e.compare=function(e,t,n,i,r){void 0===r&&(r=-1);var o=e.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r})),a=t.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r})),s=Or(o,a,n),l=new Rr(o,s,r),c=new Rr(a,s,r);n.iterGaps((function(e,t,n){return Hr(l,e,c,t,n,i)})),n.empty&&0==n.length&&Hr(l,0,c,0,0,i)},e.eq=function(e,t,n,i){void 0===n&&(n=0),null==i&&(i=999999999);var r=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0})),o=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0}));if(r.length!=o.length)return!1;if(!r.length)return!0;for(var a=Or(r,o),s=new Rr(r,a,0).goto(n),l=new Rr(o,a,0).goto(n);;){if(s.to!=l.to||!Vr(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>i)return!0;s.next(),l.next()}},e.spans=function(e,t,n,i,r){void 0===r&&(r=-1);for(var o=new Rr(e,null,r).goto(t),a=t,s=o.openStart;;){var l=Math.min(o.to,n);if(o.point){var c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:Math.min(c.length,s);i.point(a,l,o.point,c,u,o.pointRank),s=Math.min(o.openEnd(l),c.length)}else l>a&&(i.span(a,l,o.active,s),s=o.openEnd(l));if(o.to>n)return s+(o.point&&o.to>n?1:0);a=o.to,o.next()}},e.of=function(e,t){void 0===t&&(t=!1);for(var n=new Ir,i=0,r=e instanceof Dr?[e]:t?function(e){if(e.length>1)for(var t=e[0],n=1;n<e.length;n++){var i=e[n];if(Ar(t,i)>0)return e.slice().sort(Ar);t=i}return e}(e):e;i<r.length;i++){var o=r[i];n.add(o.from,o.to,o.value)}return n.finish()},e}();Pr.empty=new Pr([],[],null,-1),Pr.empty.nextLayer=Pr.empty;var Ir=function(){function e(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return e.prototype.finishChunk=function(e){this.chunks.push(new Lr(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])},e.prototype.add=function(t,n,i){this.addInner(t,n,i)||(this.nextLayer||(this.nextLayer=new e)).add(t,n,i)},e.prototype.addInner=function(e,t,n){var i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)},e.prototype.addChunk=function(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);var n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0},e.prototype.finish=function(){return this.finishInner(Pr.empty)},e.prototype.finishInner=function(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;var t=Pr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t},e}();function Or(e,t,n){for(var i=new Map,r=0,o=e;r<o.length;r++)for(var a=o[r],s=0;s<a.chunk.length;s++)a.chunk[s].maxPoint<=0&&i.set(a.chunk[s],a.chunkPos[s]);for(var l=new Set,c=0,u=t;c<u.length;c++)for(a=u[c],s=0;s<a.chunk.length;s++){var h=i.get(a.chunk[s]);null==h||(n?n.mapPos(h):h)!=a.chunkPos[s]||(null==n?void 0:n.touchesRange(h,h+a.chunk[s].length))||l.add(a.chunk[s])}return l}var Fr=function(){function e(e,t,n,i){void 0===i&&(i=0),this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}return Object.defineProperty(e.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSide",{get:function(){return this.value?this.value.endSide:0},enumerable:!1,configurable:!0}),e.prototype.goto=function(e,t){return void 0===t&&(t=-1e9),this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this},e.prototype.gotoInner=function(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){var i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){var r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()},e.prototype.forward=function(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)},e.prototype.next=function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}var e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}},e.prototype.setRangeIndex=function(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e},e.prototype.nextChunk=function(){this.chunkIndex++,this.rangeIndex=0,this.next()},e.prototype.compare=function(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide},e}(),Br=function(){function e(e){this.heap=e}return e.from=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=-1);for(var r=[],o=0;o<t.length;o++)for(var a=t[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&r.push(new Fr(a,n,i,o));return 1==r.length?r[0]:new e(r)},Object.defineProperty(e.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),e.prototype.goto=function(e,t){void 0===t&&(t=-1e9);for(var n=0,i=this.heap;n<i.length;n++){i[n].goto(e,t)}for(var r=this.heap.length>>1;r>=0;r--)Nr(this.heap,r);return this.next(),this},e.prototype.forward=function(e,t){for(var n=0,i=this.heap;n<i.length;n++){i[n].forward(e,t)}for(var r=this.heap.length>>1;r>=0;r--)Nr(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()},e.prototype.next=function(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{var e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Nr(this.heap,0)}},e}();function Nr(e,t){for(var n=e[t];;){var i=1+(t<<1);if(i>=e.length)break;var r=e[i];if(i+1<e.length&&r.compare(e[i+1])>=0&&(r=e[i+1],i++),n.compare(r)<0)break;e[i]=n,e[t]=r,t=i}}var Rr=function(){function e(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Br.from(e,t,n)}return e.prototype.goto=function(e,t){return void 0===t&&(t=-1e9),this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this},e.prototype.forward=function(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)},e.prototype.removeActive=function(e){zr(this.active,e),zr(this.activeTo,e),zr(this.activeRank,e),this.minActive=Ur(this.active,this.activeTo)},e.prototype.addActive=function(e){for(var t=0,n=this.cursor,i=n.value,r=n.to,o=n.rank;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;qr(this.active,t,i),qr(this.activeTo,t,r),qr(this.activeRank,t,o),e&&qr(e,t,this.cursor.from),this.minActive=Ur(this.active,this.activeTo)},e.prototype.next=function(){var e=this.to,t=this.point;this.point=null;for(var n=this.openStart<0?[]:null;;){var i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&zr(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var r=this.cursor.value;if(r.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}if(n){this.openStart=0;for(var o=n.length-1;o>=0&&n[o]<e;o--)this.openStart++}},e.prototype.activeForPoint=function(e){if(!this.active.length)return this.active;for(var t=[],n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()},e.prototype.openEnd=function(e){for(var t=0,n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t},e}();function Hr(e,t,n,i,r,o){e.goto(t),n.goto(i);for(var a=i+r,s=i,l=i-t;;){var c=e.to+l-n.to||e.endSide-n.endSide,u=c<0?e.to+l:n.to,h=Math.min(u,a);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Vr(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(s,h,e.point,n.point):h>s&&!Vr(e.active,n.active)&&o.compareRange(s,h,e.active,n.active),u>a)break;s=u,c<=0&&e.next(),c>=0&&n.next()}}function Vr(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function zr(e,t){for(var n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function qr(e,t,n){for(var i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=n}function Ur(e,t){for(var n=-1,i=1e9,r=0;r<t.length;r++)(t[r]-i||e[r].endSide-e[n].endSide)<0&&(n=r,i=t[r]);return n}function Wr(e,t,n){void 0===n&&(n=e.length);for(var i=0,r=0;r<n;)9==e.charCodeAt(r)?(i+=t-i%t,r++):(i++,r=mi(e,r));return i}function _r(e,t,n,i){for(var r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=9==e.charCodeAt(r)?n-o%n:1,r=mi(e,r)}return!0===i?-1:e.length}const jr="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Gr="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Kr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Yr{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function r(e,t,o,a){let s=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let a=t[n];if(/&/.test(n))r(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),a,o);else if(a&&"object"==typeof a){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),a,s,c)}else null!=a&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+a+";")}(s.length||c)&&o.push((!n||l||a?e:e.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)r(i(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Kr[jr]||1;return Kr[jr]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[Gr]||new $r(e)).mount(Array.isArray(t)?t:[t])}}let Xr=null;class $r{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Xr)return e.adoptedStyleSheets=[Xr.sheet].concat(e.adoptedStyleSheets),e[Gr]=Xr;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Xr=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Gr]=this}mount(e){let t=this.sheet,n=0,i=0;for(let r=0;r<e.length;r++){let o=e[r],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),-1==a){if(this.modules.splice(i++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;i<a;)n+=this.modules[i++].rules.length;n+=o.rules.length,i++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var Zr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Qr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Jr="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),eo="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),to="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),no="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),io="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ro=Jr&&(no||+Jr[1]<57)||to&&no,oo=0;oo<10;oo++)Zr[48+oo]=Zr[96+oo]=String(oo);for(oo=1;oo<=24;oo++)Zr[oo+111]="F"+oo;for(oo=65;oo<=90;oo++)Zr[oo]=String.fromCharCode(oo+32),Qr[oo]=String.fromCharCode(oo);for(var ao in Zr)Qr.hasOwnProperty(ao)||(Qr[ao]=Zr[ao]);function so(e){var t=!(ro&&(e.ctrlKey||e.altKey||e.metaKey)||(eo||io)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Qr:Zr)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}function lo(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function co(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function uo(e,t){if(!t||!t.anchorNode)return!1;try{return co(e,t.anchorNode)}catch(e){return!1}}function ho(e){return 3==e.nodeType?Eo(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function po(e,t,n,i){return!!n&&(go(e,t,n,i,-1)||go(e,t,n,i,1))}function fo(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function go(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:mo(e))){if("DIV"==e.nodeName)return!1;var o=e.parentNode;if(!o||1!=o.nodeType)return!1;t=fo(e)+(r<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?mo(e):0}}}function mo(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vo(e,t){var n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function yo(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}var bo,wo=function(){function e(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return e.prototype.eq=function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset},e.prototype.setRange=function(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)},e.prototype.set=function(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i},e}(),ko=null;function Co(e){if(e.setActive)return e.setActive();if(ko)return e.focus(ko);for(var t=[],n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==ko?{get preventScroll(){return ko={preventScroll:!0},!0}}:void 0),!ko){ko=!1;for(var i=0;i<t.length;){var r=t[i++],o=t[i++],a=t[i++];r.scrollTop!=o&&(r.scrollTop=o),r.scrollLeft!=a&&(r.scrollLeft=a)}}}function Eo(e,t,n){void 0===n&&(n=t);var i=bo||(bo=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function xo(e,t,n){var i={key:t,code:t,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,e.dispatchEvent(r);var o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function So(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}var Mo=function(){function e(e,t,n){void 0===n&&(n=!0),this.node=e,this.offset=t,this.precise=n}return e.before=function(t,n){return new e(t.parentNode,fo(t),n)},e.after=function(t,n){return new e(t.parentNode,fo(t)+1,n)},e}(),To=[],Do=function(){function e(){this.parent=null,this.dom=null,this.dirty=2}return Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtStart",{get:function(){return this.parent?this.parent.posBefore(this):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtEnd",{get:function(){return this.posAtStart+this.length},enumerable:!1,configurable:!0}),e.prototype.posBefore=function(e){for(var t=this.posAtStart,n=0,i=this.children;n<i.length;n++){var r=i[n];if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")},e.prototype.posAfter=function(e){return this.posBefore(e)+e.length},e.prototype.sync=function(t,n){if(2&this.dirty){for(var i=this.dom,r=null,o=void 0,a=0,s=this.children;a<s.length;a++){if((h=s[a]).dirty){if(!h.dom&&(o=r?r.nextSibling:i.firstChild)){var l=e.get(o);(!l||!l.parent&&l.canReuseDOM(h))&&h.reuseDOM(o)}h.sync(t,n),h.dirty=0}if(o=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&o!=h.dom&&(n.written=!0),h.dom.parentNode==i)for(;o&&o!=h.dom;)o=Ao(o);else i.insertBefore(h.dom,o);r=h.dom}for((o=r?r.nextSibling:i.firstChild)&&n&&n.node==i&&(n.written=!0);o;)o=Ao(o)}else if(1&this.dirty)for(var c=0,u=this.children;c<u.length;c++){var h;(h=u[c]).dirty&&(h.sync(t,n),h.dirty=0)}},e.prototype.reuseDOM=function(e){},e.prototype.localPosFromDOM=function(t,n){var i;if(t==this.dom)i=this.dom.childNodes[n];else{for(var r=0==mo(t)?0:0==n?-1:1;;){var o=t.parentNode;if(o==this.dom)break;0==r&&o.firstChild!=o.lastChild&&(r=t==o.firstChild?-1:1),t=o}i=r<0?t:t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!e.get(i);)i=i.nextSibling;if(!i)return this.length;for(var a=0,s=0;;a++){var l=this.children[a];if(l.dom==i)return s;s+=l.length+l.breakAfter}},e.prototype.domBoundsAround=function(e,t,n){void 0===n&&(n=0);for(var i=-1,r=-1,o=-1,a=-1,s=0,l=n,c=n;s<this.children.length;s++){var u=this.children[s],h=l+u.length;if(l<e&&h>t)return u.domBoundsAround(e,t,l);if(h>=e&&-1==i&&(i=s,r=l),l>t&&u.dom.parentNode==this.dom){o=s,a=c;break}c=h,l=h+u.breakAfter}return{from:r,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}},e.prototype.markDirty=function(e){void 0===e&&(e=!1),this.dirty|=2,this.markParentsDirty(e)},e.prototype.markParentsDirty=function(e){for(var t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}},e.prototype.setParent=function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))},e.prototype.setDOM=function(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this},Object.defineProperty(e.prototype,"rootView",{get:function(){for(var e=this;;){var t=e.parent;if(!t)return e;e=t}},enumerable:!1,configurable:!0}),e.prototype.replaceChildren=function(e,t,n){var i;void 0===n&&(n=To),this.markDirty();for(var r=e;r<t;r++){var o=this.children[r];o.parent==this&&o.destroy()}(i=this.children).splice.apply(i,w([e,t-e],n,!1));for(r=0;r<n.length;r++)n[r].setParent(this)},e.prototype.ignoreMutation=function(e){return!1},e.prototype.ignoreEvent=function(e){return!1},e.prototype.childCursor=function(e){return void 0===e&&(e=this.length),new Lo(this.children,e,this.children.length)},e.prototype.childPos=function(e,t){return void 0===t&&(t=1),this.childCursor().findPos(e,t)},e.prototype.toString=function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")},e.get=function(e){return e.cmView},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWidget",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.merge=function(e,t,n,i,r,o){return!1},e.prototype.become=function(e){return!1},e.prototype.canReuseDOM=function(e){return e.constructor==this.constructor},e.prototype.getSide=function(){return 0},e.prototype.destroy=function(){this.parent=null},e}();function Ao(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}Do.prototype.breakAfter=0;var Lo=function(){function e(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}return e.prototype.findPos=function(e,t){for(void 0===t&&(t=1);;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}},e}();function Po(e,t,n,i,r,o,a,s,l){var c=e.children,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,p=h?h.breakAfter:a;if(!(t==i&&u&&!a&&!p&&o.length<2&&u.merge(n,r,o.length?h:null,0==n,s,l))){if(i<c.length){var d=c[i];d&&r<d.length?(t==i&&(d=d.split(r),r=0),!p&&h&&d.merge(0,r,h,!0,0,l)?o[o.length-1]=d:(r&&d.merge(0,r,null,!1,0,l),o.push(d))):(null==d?void 0:d.breakAfter)&&(h?h.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,n>0&&(!a&&o.length&&u.merge(n,u.length,o[0],!1,s,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,s,0),t++));t<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:s;else{if(!c[t].become(o[0]))break;t++,o.shift(),s=o.length?0:l}!o.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,s,l)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function Io(e,t,n,i,r,o){for(var a=e.childCursor(),s=a.findPos(n,1),l=s.i,c=s.off,u=a.findPos(t,-1),h=u.i,p=u.off,d=t-n,f=0,g=i;f<g.length;f++){d+=g[f].length}e.length+=d,Po(e,h,p,l,c,i,0,r,o)}var Oo="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Fo="undefined"!=typeof document?document:{documentElement:{style:{}}},Bo=/Edge\/(\d+)/.exec(Oo.userAgent),No=/MSIE \d/.test(Oo.userAgent),Ro=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oo.userAgent),Ho=!!(No||Ro||Bo),Vo=!Ho&&/gecko\/(\d+)/i.test(Oo.userAgent),zo=!Ho&&/Chrome\/(\d+)/.exec(Oo.userAgent),qo="webkitFontSmoothing"in Fo.documentElement.style,Uo=!Ho&&/Apple Computer/.test(Oo.vendor),Wo=Uo&&(/Mobile\/\w+/.test(Oo.userAgent)||Oo.maxTouchPoints>2),_o={mac:Wo||/Mac/.test(Oo.platform),windows:/Win/.test(Oo.platform),linux:/Linux|X11/.test(Oo.platform),ie:Ho,ie_version:No?Fo.documentMode||6:Ro?+Ro[1]:Bo?+Bo[1]:0,gecko:Vo,gecko_version:Vo?+(/Firefox\/(\d+)/.exec(Oo.userAgent)||[0,0])[1]:0,chrome:!!zo,chrome_version:zo?+zo[1]:0,ios:Wo,android:/Android\b/.test(Oo.userAgent),webkit:qo,safari:Uo,webkit_version:qo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Fo.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},jo=function(e){function t(t){var n=e.call(this)||this;return n.text=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),t.prototype.createDOM=function(e){this.setDOM(e||document.createTextNode(this.text))},t.prototype.sync=function(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)},t.prototype.reuseDOM=function(e){3==e.nodeType&&this.createDOM(e)},t.prototype.merge=function(e,n,i){return(!i||i instanceof t&&!(this.length-(n-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)},t.prototype.split=function(e){var n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n},t.prototype.localPosFromDOM=function(e,t){return e==this.dom?t:t?this.text.length:0},t.prototype.domAtPos=function(e){return new Mo(this.dom,e)},t.prototype.domBoundsAround=function(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}},t.prototype.coordsAt=function(e,t){return Ko(this.dom,e,t)},t}(Do),Go=function(e){function t(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=0);var r=e.call(this)||this;r.mark=t,r.children=n,r.length=i;for(var o=0,a=n;o<a.length;o++){a[o].setParent(r)}return r}return f(t,e),t.prototype.setAttrs=function(e){if(So(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(var t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e},t.prototype.reuseDOM=function(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)},t.prototype.sync=function(t,n){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),e.prototype.sync.call(this,t,n)},t.prototype.merge=function(e,n,i,r,o,a){return(!i||!(!(i instanceof t&&i.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0))&&(Io(this,e,n,i?i.children:[],o-1,a-1),this.markDirty(),!0)},t.prototype.split=function(e){for(var n=[],i=0,r=-1,o=0,a=0,s=this.children;a<s.length;a++){var l=s[a],c=i+l.length;c>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=o),i=c,o++}var u=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new t(this.mark,n,u)},t.prototype.domAtPos=function(e){return ta(this,e)},t.prototype.coordsAt=function(e,t){return ia(this,e,t)},t}(Do);function Ko(e,t,n){var i=e.nodeValue.length;t>i&&(t=i);var r=t,o=t,a=0;0==t&&n<0||t==i&&n>=0?_o.chrome||_o.gecko||(t?(r--,a=1):o<i&&(o++,a=-1)):n<0?r--:o<i&&o++;var s=Eo(e,r,o).getClientRects();if(!s.length)return null;var l=s[(a?a<0:n>=0)?0:s.length-1];return _o.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,(function(e){return e.width}))||l),a?vo(l,a<0):l||null}var Yo=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.side=i,r.prevWidget=null,r}return f(t,e),t.create=function(e,n,i){return new(e.customView||t)(e,n,i)},t.prototype.split=function(e){var n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n},t.prototype.sync=function(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")},t.prototype.getSide=function(){return this.side},t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.become=function(e){return!this.widget.noReuse&&e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)?this.dom&&e.widget.become(this.dom,this.widget):this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){if(0==this.length)return ii.empty;for(var e=this;e.parent;)e=e.parent;var t=e.view,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):ii.empty},enumerable:!1,configurable:!0}),t.prototype.domAtPos=function(e){return(this.length?0==e:this.side>0)?Mo.before(this.dom):Mo.after(this.dom,e==this.length)},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e,t){var n=this.widget.coordsAt(this.dom,e,t);if(n)return n;var i=this.dom.getClientRects(),r=null;if(!i.length)return null;for(var o=e>0?i.length-1:0;r=i[o],!(e>0?0==o:o==i.length-1||r.top<r.bottom);o+=e>0?-1:1);return this.length?r:vo(r,this.side>0)},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWidget",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t}(Do),Xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.domAtPos=function(e){var t=this.widget,n=t.topView,i=t.text;return n?$o(e,0,n,i,this.length-n.length,(function(e,t){return e.domAtPos(t)}),(function(e,t){return new Mo(e,Math.min(t,e.nodeValue.length))})):new Mo(i,Math.min(e,i.nodeValue.length))},t.prototype.sync=function(){this.setDOM(this.widget.toDOM())},t.prototype.localPosFromDOM=function(e,t){var n=this.widget,i=n.topView,r=n.text;return i?Qo(e,t,i,r,this.length-i.length):Math.min(t,this.length)},t.prototype.ignoreMutation=function(){return!1},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.coordsAt=function(e,t){var n=this.widget,i=n.topView,r=n.text;return i?$o(e,t,i,r,this.length-i.length,(function(e,t,n){return e.coordsAt(t,n)}),(function(e,t,n){return Ko(e,t,n)})):Ko(r,e,t)},t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.widget.topView)||void 0===t||t.destroy()},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.canReuseDOM=function(){return!0},t}(Yo);function $o(e,t,n,i,r,o,a){if(n instanceof Go){for(var s=n.dom.firstChild;s;s=s.nextSibling){var l=Do.get(s);if(l){var c=co(s,i),u=l.length+(c?r:0);if(e<u||e==u&&l.getSide()<=0)return c?$o(e,t,l,i,r,o,a):o(l,e,t);e-=u}else{var h=Zo(e,t,s,a);if("number"!=typeof h)return h;e=h}}return o(n,n.length,-1)}return n.dom==i?a(i,e,t):o(n,e,t)}function Zo(e,t,n,i){if(3==n.nodeType){var r=n.nodeValue.length;if(e<=r)return i(n,e,t);e-=r}else if(1==n.nodeType&&"false"!=n.contentEditable)for(var o=n.firstChild;o;o=o.nextSibling){var a=Zo(e,t,o,i);if("number"!=typeof a)return a;e=a}return e}function Qo(e,t,n,i,r){if(n instanceof Go)for(var o=0,a=n.dom.firstChild;a;a=a.nextSibling){var s=Do.get(a);if(s){var l=co(a,i);if(co(a,e))return o+(l?Qo(e,t,s,i,r):s.localPosFromDOM(e,t));o+=s.length+(l?r:0)}else{var c=Jo(e,t,a);if(null!=c.result)return o+c.result;o+=c.size}}else if(n.dom==i)return Math.min(t,i.nodeValue.length);return n.localPosFromDOM(e,t)}function Jo(e,t,n){if(3==n.nodeType)return e==n?{result:t}:{size:n.nodeValue.length};if(1!=n.nodeType||"false"==n.contentEditable)return n.contains(e)?{result:0}:{size:0};for(var i=0,r=n.firstChild,o=0;;r=r.nextSibling,o++){if(e==n&&o==t)return{result:i};if(!r)return{size:i};var a=Jo(e,t,r);if(null!=a.result)return{result:t+a.result};i+=a.size}}var ea=function(e){function t(t){var n=e.call(this)||this;return n.side=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.merge=function(){return!1},t.prototype.become=function(e){return e instanceof t&&e.side==this.side},t.prototype.split=function(){return new t(this.side)},t.prototype.sync=function(){if(!this.dom){var e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}},t.prototype.getSide=function(){return this.side},t.prototype.domAtPos=function(e){return this.side>0?Mo.before(this.dom):Mo.after(this.dom)},t.prototype.localPosFromDOM=function(){return 0},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e){return this.dom.getBoundingClientRect()},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return ii.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Do);function ta(e,t){for(var n=e.dom,i=e.children,r=0,o=0;r<i.length;r++){var a=i[r],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(t>o&&t<s&&a.dom.parentNode==n)return a.domAtPos(t-o);if(t<=o)break;o=s}}for(var l=r;l>0;l--){var c=i[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(l=r;l<i.length;l++){var u=i[l];if(u.dom.parentNode==n)return u.domAtPos(0)}return new Mo(n,0)}function na(e,t,n){var i,r=e.children;n>0&&t instanceof Go&&r.length&&(i=r[r.length-1])instanceof Go&&i.mark.eq(t.mark)?na(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function ia(e,t,n){var i=null,r=-1,o=null,a=-1;!function e(t,s){for(var l=0,c=0;l<t.children.length&&c<=s;l++){var u=t.children[l],h=c+u.length;h>=s&&(u.children.length?e(u,s-c):(!o||o.isHidden&&n>0)&&(h>s||c==h&&u.getSide()>0)?(o=u,a=s-c):(c<s||c==h&&u.getSide()<0&&!u.isHidden)&&(i=u,r=s-c)),c=h}}(e,t);var s=(n<0?i:o)||i||o;return s?s.coordsAt(Math.max(0,s==i?r:a),n):function(e){var t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();var n=ho(t);return n[n.length-1]||null}(e)}function ra(e,t){for(var n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function oa(e,t){if(e==t)return!0;if(!e||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(var r=0,o=n;r<o.length;r++){var a=o[r];if(-1==i.indexOf(a)||e[a]!==t[a])return!1}return!0}function aa(e,t,n){var i=null;if(t)for(var r in t)n&&r in n||e.removeAttribute(i=r);if(n)for(var r in n)t&&t[r]==n[r]||e.setAttribute(i=r,n[r]);return!!i}jo.prototype.children=Yo.prototype.children=ea.prototype.children=To;var sa=function(){function e(){}return e.prototype.eq=function(e){return!1},e.prototype.updateDOM=function(e,t){return!1},e.prototype.become=function(e,t){},e.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.ignoreEvent=function(e){return!0},e.prototype.coordsAt=function(e,t,n){return null},Object.defineProperty(e.prototype,"customView",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noReuse",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){},e}(),la=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(la||(la={})),ca=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.startSide=t,o.endSide=n,o.widget=i,o.spec=r,o}return f(t,e),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return!1},enumerable:!1,configurable:!0}),t.mark=function(e){return new ua(e)},t.widget=function(e){var t=e.side||0,n=!!e.block;return new pa(e,t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,t,n,e.widget||null,!1)},t.replace=function(e){var t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{var r=da(e,i);t=(r.start?i?-3e8:-1:5e8)-1,n=1+(r.end?i?2e8:1:-6e8)}return new pa(e,t,n,i,e.widget||null,!0)},t.line=function(e){return new ha(e)},t.set=function(e,t){return void 0===t&&(t=!1),Pr.of(e,t)},t.prototype.hasHeight=function(){return!!this.widget&&this.widget.estimatedHeight>-1},t}(Tr);ca.none=Pr.empty;var ua=function(e){function t(t){var n=this,i=da(t),r=i.start,o=i.end;return(n=e.call(this,r?-1:5e8,o?1:-6e8,null,t)||this).tagName=t.tagName||"span",n.class=t.class||"",n.attrs=t.attributes||null,n}return f(t,e),t.prototype.eq=function(e){return this==e||e instanceof t&&this.tagName==e.tagName&&this.class==e.class&&oa(this.attrs,e.attrs)},t.prototype.range=function(t,n){if(void 0===n&&(n=t),t>=n)throw new RangeError("Mark decorations may not be empty");return e.prototype.range.call(this,t,n)},t}(ca);ua.prototype.point=!1;var ha=function(e){function t(t){return e.call(this,-2e8,-2e8,null,t)||this}return f(t,e),t.prototype.eq=function(e){return e instanceof t&&this.spec.class==e.spec.class&&oa(this.spec.attributes,e.spec.attributes)},t.prototype.range=function(t,n){if(void 0===n&&(n=t),n!=t)throw new RangeError("Line decoration ranges must be zero-length");return e.prototype.range.call(this,t,n)},t}(ca);ha.prototype.mapMode=Si.TrackBefore,ha.prototype.point=!0;var pa=function(e){function t(t,n,i,r,o,a){var s=e.call(this,n,i,o,t)||this;return s.block=r,s.isReplace=a,s.mapMode=r?n<=0?Si.TrackBefore:Si.TrackAfter:Si.TrackDel,s}return f(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.startSide<this.endSide?la.WidgetRange:this.startSide<=0?la.WidgetBefore:la.WidgetAfter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5},enumerable:!1,configurable:!0}),t.prototype.eq=function(e){return e instanceof t&&(n=this.widget,i=e.widget,n==i||!!(n&&i&&n.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var n,i},t.prototype.range=function(t,n){if(void 0===n&&(n=t),this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return e.prototype.range.call(this,t,n)},t}(ca);function da(e,t){void 0===t&&(t=!1);var n=e.inclusiveStart,i=e.inclusiveEnd;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!=n?n:t,end:null!=i?i:t}}function fa(e,t,n,i){void 0===i&&(i=0);var r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}pa.prototype.point=!0;var ga=function(e){function t(){var t=e.apply(this,arguments)||this;return t.children=[],t.length=0,t.prevAttrs=void 0,t.attrs=null,t.breakAfter=0,t}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){if(i){if(!(i instanceof t))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Io(this,e,n,i?i.children:[],o,a),!0},t.prototype.split=function(e){var n=new t;if(n.breakAfter=this.breakAfter,0==this.length)return n;var i=this.childPos(e),r=i.i,o=i.off;o&&(n.append(this.children[r].split(o),0),this.children[r].merge(o,this.children[r].length,null,!1,0,0),r++);for(var a=r;a<this.children.length;a++)n.append(this.children[a],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n},t.prototype.transferDOM=function(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)},t.prototype.setDeco=function(e){oa(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)},t.prototype.append=function(e,t){na(this,e,t)},t.prototype.addLineDeco=function(e){var t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=ra(t,this.attrs||{})),n&&(this.attrs=ra({class:n},this.attrs||{}))},t.prototype.domAtPos=function(e){return ta(this,e)},t.prototype.reuseDOM=function(e){"DIV"==e.nodeName&&e.classList.contains("cm-view")&&(this.setDOM(e),this.dirty|=6)},t.prototype.sync=function(t,n){var i;this.dom?4&this.dirty&&(So(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(aa(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),e.prototype.sync.call(this,t,n);for(var r=this.dom.lastChild;r&&Do.get(r)instanceof Go;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(i=Do.get(r))||void 0===i?void 0:i.isEditable)||_o.ios&&this.children.some((function(e){return e instanceof jo}))))){var o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}},t.prototype.measureTextSize=function(){if(0==this.children.length||this.length>20)return null;for(var e,t=0,n=0,i=this.children;n<i.length;n++){var r=i[n];if(!(r instanceof jo)||/[^ -~]/.test(r.text))return null;var o=ho(r.dom);if(1!=o.length)return null;t+=o[0].width,e=o[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null},t.prototype.coordsAt=function(e,t){var n=ia(this,e,t);if(!this.children.length&&n&&this.parent){var i=this.parent.view.viewState.heightOracle,r=n.bottom-n.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){var o=(r-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n},t.prototype.become=function(e){return!1},Object.defineProperty(t.prototype,"type",{get:function(){return la.Text},enumerable:!1,configurable:!0}),t.find=function(e,n){for(var i=0,r=0;i<e.children.length;i++){var o=e.children[i],a=r+o.length;if(a>=n){if(o instanceof t)return o;if(a>n)break}r=a+o.breakAfter}return null},t}(Do),ma=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.type=i,r.breakAfter=0,r.prevWidget=null,r}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.domAtPos=function(e){return 0==e?Mo.before(this.dom):Mo.after(this.dom,e==this.length)},t.prototype.split=function(e){var n=this.length-e;this.length=e;var i=new t(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i},Object.defineProperty(t.prototype,"children",{get:function(){return To},enumerable:!1,configurable:!0}),t.prototype.sync=function(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ii.empty},enumerable:!1,configurable:!0}),t.prototype.domBoundsAround=function(){return null},t.prototype.become=function(e){return!this.widget.noReuse&&e instanceof t&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)?this.dom&&e.widget.become(this.dom,this.widget):this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWidget",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.coordsAt=function(e,t){return this.widget.coordsAt(this.dom,e,t)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t}(Do),va=function(){function e(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}return e.prototype.posCovered=function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ma&&e.type==la.WidgetBefore)},e.prototype.getLine=function(){return this.curLine||(this.content.push(this.curLine=new ga),this.atCursorPos=!0),this.curLine},e.prototype.flushBuffer=function(e){void 0===e&&(e=this.bufferMarks),this.pendingBuffer&&(this.curLine.append(ya(new ea(-1),e),e.length),this.pendingBuffer=0)},e.prototype.addBlockWidget=function(e){this.flushBuffer(),this.curLine=null,this.content.push(e)},e.prototype.finish=function(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()},e.prototype.buildText=function(e,t,n){for(;e>0;){if(this.textOff==this.text.length){var i=this.cursor.next(this.skip),r=i.value,o=i.lineBreak,a=i.done;if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=r,this.textOff=0}var s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ya(new jo(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}},e.prototype.span=function(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)},e.prototype.point=function(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof pa){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}var a=t-e;if(n instanceof pa)if(n.block){var s=n.type;s!=la.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new ma(n.widget||new ba("div"),a,s))}else{var l=Yo.create(n.widget||new ba("span"),a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&r<=i.length&&(e<t||n.startSide>0),u=!l.isEditable&&(e<t||r>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||c||l.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(ya(new ea(1),i),r),r=i.length+Math.max(0,r-i.length)),h.append(ya(l,i),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)},e.build=function(t,n,i,r,o){var a=new e(t,n,i,o);return a.openEnd=Pr.spans(r,n,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a},e}();function ya(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];e=new Go(r,[e],e.length)}return e}var ba=function(e){function t(t){var n=e.call(this)||this;return n.tag=t,n}return f(t,e),t.prototype.eq=function(e){return e.tag==this.tag},t.prototype.toDOM=function(){return document.createElement(this.tag)},t.prototype.updateDOM=function(e){return e.nodeName.toLowerCase()==this.tag},Object.defineProperty(t.prototype,"isHidden",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(sa),wa=Hi.define(),ka=Hi.define(),Ca=Hi.define(),Ea=Hi.define(),xa=Hi.define(),Sa=Hi.define(),Ma=Hi.define(),Ta=Hi.define({combine:function(e){return e.some((function(e){return e}))}}),Da=Hi.define({combine:function(e){return e.some((function(e){return e}))}}),Aa=function(){function e(e,t,n,i,r){void 0===t&&(t="nearest"),void 0===n&&(n="nearest"),void 0===i&&(i=5),void 0===r&&(r=5),this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r}return e.prototype.map=function(t){return t.empty?this:new e(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)},e}(),La=dr.define({map:function(e,t){return e.map(t)}});function Pa(e,t,n){var i=e.facet(Ea);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}var Ia=Hi.define({combine:function(e){return!e.length||e[0]}}),Oa=0,Fa=Hi.define(),Ba=function(){function e(e,t,n,i){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=i(this)}return e.define=function(t,n){var i=n||{},r=i.eventHandlers,o=i.provide,a=i.decorations;return new e(Oa++,t,r,(function(e){var t=[Fa.of(e)];return a&&t.push(Va.of((function(t){var n=t.plugin(e);return n?a(n):ca.none}))),o&&t.push(o(e)),t}))},e.fromClass=function(t,n){return e.define((function(e){return new t(e)}),n)},e}(),Na=function(){function e(e){this.spec=e,this.mustUpdate=null,this.value=null}return e.prototype.update=function(e){if(this.value){if(this.mustUpdate){var t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Pa(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Pa(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this},e.prototype.destroy=function(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Pa(e.state,t,"CodeMirror plugin crashed")}},e.prototype.deactivate=function(){this.spec=this.value=null},e}(),Ra=Hi.define(),Ha=Hi.define(),Va=Hi.define(),za=Hi.define(),qa=Hi.define(),Ua=Hi.define(),Wa=function(){function e(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}return e.prototype.join=function(t){return new e(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))},e.prototype.addToSet=function(e){for(var t=e.length,n=this;t>0;t--){var i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e},e.extendWithRanges=function(t,n){if(0==n.length)return t;for(var i=[],r=0,o=0,a=0,s=0;;r++){for(var l=r==t.length?null:t[r],c=a-s,u=l?l.fromB:1e9;o<n.length&&n[o]<u;){var h=n[o],p=n[o+1],d=Math.max(s,h),f=Math.min(u,p);if(d<=f&&new e(d+c,f+c,d,f).addToSet(i),p>u)break;o+=2}if(!l)return i;new e(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),a=l.toA,s=l.toB}},e}(),_a=function(){function e(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Ti.empty(this.startState.doc.length);for(var i=0,r=n;i<r.length;i++){var o=r[i];this.changes=this.changes.compose(o.changes)}var a=[];this.changes.iterChangedRanges((function(e,t,n,i){return a.push(new Wa(e,t,n,i))})),this.changedRanges=a}return e.create=function(t,n,i){return new e(t,n,i)},Object.defineProperty(e.prototype,"viewportChanged",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightChanged",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geometryChanged",{get:function(){return this.docChanged||(10&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focusChanged",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionSet",{get:function(){return this.transactions.some((function(e){return e.selection}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.flags&&0==this.transactions.length},enumerable:!1,configurable:!0}),e}(),ja=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(ja||(ja={})),Ga=ja.LTR,Ka=ja.RTL;function Ya(e){for(var t=[],n=0;n<e.length;n++)t.push(1<<+e[n]);return t}for(var Xa=Ya("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$a=Ya("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Za=Object.create(null),Qa=[],Ja=0,es=["()","[]","{}"];Ja<es.length;Ja++){var ts=es[Ja],ns=ts.charCodeAt(0),is=ts.charCodeAt(1);Za[ns]=is,Za[is]=-ns}function rs(e){return e<=247?Xa[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?$a[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:8204==e?256:1}var os=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,as=function(){function e(e,t,n){this.from=e,this.to=t,this.level=n}return Object.defineProperty(e.prototype,"dir",{get:function(){return this.level%2?Ka:Ga},enumerable:!1,configurable:!0}),e.prototype.side=function(e,t){return this.dir==t==e?this.to:this.from},e.find=function(e,t,n,i){for(var r=-1,o=0;o<e.length;o++){var a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(r<0||(0!=i?i<0?a.from<t:a.to>t:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r},e}(),ss=[];function ls(e,t){var n=e.length,i=t==Ga?1:2,r=t==Ga?2:1;if(!e||1==i&&!os.test(e))return cs(n);for(var o=0,a=i,s=i;o<n;o++){512==(g=rs(e.charCodeAt(o)))?g=a:8==g&&4==s&&(g=16),ss[o]=4==g?2:g,7&g&&(s=g),a=g}for(o=0,a=i,s=i;o<n;o++){if(128==(g=ss[o]))o<n-1&&a==ss[o+1]&&24&a?g=ss[o]=a:ss[o]=256;else if(64==g){for(var l=o+1;l<n&&64==ss[l];)l++;for(var c=o&&8==a||l<n&&8==ss[l]?1==s?1:8:256,u=o;u<l;u++)ss[u]=c;o=l-1}else 8==g&&1==s&&(ss[o]=1);a=g,7&g&&(s=g)}o=0;for(var h=0,p=0,d=void 0,f=void 0,g=void 0;o<n;o++)if(f=Za[d=e.charCodeAt(o)])if(f<0){for(var m=h-3;m>=0;m-=3)if(Qa[m+1]==-f){var v=Qa[m+2],y=2&v?i:4&v?1&v?r:i:0;y&&(ss[o]=ss[Qa[m]]=y),h=m;break}}else{if(189==Qa.length)break;Qa[h++]=o,Qa[h++]=d,Qa[h++]=p}else if(2==(g=ss[o])||1==g){var b=g==i;p=b?0:1;for(m=h-3;m>=0;m-=3){var w=Qa[m+2];if(2&w)break;if(b)Qa[m+2]|=2;else{if(4&w)break;Qa[m+2]|=4}}}for(o=0;o<n;o++)if(256==ss[o]){for(l=o+1;l<n&&256==ss[l];)l++;var k=1==(o?ss[o-1]:i);for(c=k==(1==(l<n?ss[l]:i))?k?1:2:i,u=o;u<l;u++)ss[u]=c;o=l-1}var C=[];if(1==i)for(o=0;o<n;){for(var E=o,x=1!=ss[o++];o<n&&x==(1!=ss[o]);)o++;if(x)for(u=o;u>E;){l=u;for(var S=2!=ss[--u];u>E&&S==(2!=ss[u-1]);)u--;C.push(new as(u,l,S?2:1))}else C.push(new as(E,o,0))}else for(o=0;o<n;){for(E=o,x=2==ss[o++];o<n&&x==(2==ss[o]);)o++;C.push(new as(E,o,x?1:2))}return C}function cs(e){return[new as(0,e,0)]}var us="";function hs(e,t,n,i,r){var o,a=i.head-e.from,s=-1;if(0==a){if(!r||!e.length)return null;t[0].level!=n&&(a=t[0].side(!1,n),s=0)}else if(a==e.length){if(r)return null;var l=t[t.length-1];l.level!=n&&(a=l.side(!0,n),s=t.length-1)}s<0&&(s=as.find(t,a,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));var c=t[s];a==c.side(r,n)&&(a=(c=t[s+=r?1:-1]).side(!r,n));var u=r==(c.dir==n),h=mi(e.text,a,u);if(us=e.text.slice(Math.min(a,h),Math.max(a,h)),h!=c.side(r,n))return Bi.cursor(h+e.from,u?-1:1,c.level);var p=s==(r?t.length-1:0)?null:t[s+(r?1:-1)];return p||c.level==n?p&&p.level<c.level?Bi.cursor(p.side(!r,n)+e.from,r?1:-1,p.level):Bi.cursor(h+e.from,r?-1:1,c.level):Bi.cursor(r?e.to:e.from,r?-1:1,n)}var ps="￿",ds=function(){function e(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Sr.lineSeparator)}return e.prototype.append=function(e){this.text+=e},e.prototype.lineBreak=function(){this.text+=ps},e.prototype.readRange=function(e,t){if(!e)return this;for(var n=e.parentNode,i=e;;){this.findPointBefore(n,i),this.readNode(i);var r=i.nextSibling;if(r==t)break;var o=Do.get(i),a=Do.get(r);(o&&a?o.breakAfter:(o?o.breakAfter:fs(i))||fs(r)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=r}return this.findPointBefore(n,t),this},e.prototype.readTextNode=function(e){for(var t=e.nodeValue,n=0,i=this.points;n<i.length;n++){(h=i[n]).node==e&&(h.pos=this.text.length+Math.min(h.offset,t.length))}for(var r=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){var a=-1,s=1,l=void 0;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=o.exec(t))&&(a=l.index,s=l[0].length),this.append(t.slice(r,a<0?t.length:a)),a<0)break;if(this.lineBreak(),s>1)for(var c=0,u=this.points;c<u.length;c++){var h;(h=u[c]).node==e&&h.pos>this.text.length&&(h.pos-=s-1)}r=a+s}},e.prototype.readNode=function(e){if(!e.cmIgnore){var t=Do.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(var i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}},e.prototype.findPointBefore=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}},e.prototype.findPointInside=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}},e}();function fs(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}var gs=function(e,t){this.node=e,this.offset=t,this.pos=-1},ms=function(e){function t(t){var n=e.call(this)||this;return n.view=t,n.compositionDeco=ca.none,n.decorations=[],n.dynamicDecorationMap=[],n.minWidth=0,n.minWidthFrom=0,n.minWidthTo=0,n.impreciseAnchor=null,n.impreciseHead=null,n.forceSelection=!1,n.lastUpdate=Date.now(),n.setDOM(t.contentDOM),n.children=[new ga],n.children[0].setParent(n),n.updateDeco(),n.updateInner([new Wa(0,0,0,t.state.doc.length)],0),n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.view.state.doc.length},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t=this,n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((function(e){var n=e.fromA;return e.toA<t.minWidthFrom||n>t.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ca.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){var n=ys(e);if(!n)return ca.none;var i=n.from,r=n.to,o=n.node,a=n.text,s=t.mapPos(i,1),l=Math.max(s,t.mapPos(r,-1)),c=e.state,u=3==o.nodeType?o.nodeValue:new ds([],c).readRange(o.firstChild,null).text;if(l-s<u.length)if(c.doc.sliceString(s,Math.min(c.doc.length,s+u.length),ps)==u)l=s+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,ps)!=u)return ca.none;s=l-u.length}else if(c.doc.sliceString(s,l,ps)!=u)return ca.none;var h=Do.get(o);h instanceof Xo?h=h.widget.topView:h&&(h.parent=null);return ca.set(ca.replace({widget:new bs(o,a,h),inclusive:!0}).range(s,l))}(this.view,e.changes)),(_o.ie||_o.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);var i,r,o,a,s=this.decorations,l=this.updateDeco(),c=(i=s,r=l,o=e.changes,a=new ks,Pr.compare(i,r,o,a),a.changes);return n=Wa.extendWithRanges(n,c),(0!=this.dirty||0!=n.length)&&(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)},t.prototype.updateInner=function(e,t){var n=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);var i=this.view.observer;i.ignore((function(){n.dom.style.height=n.view.viewState.contentHeight+"px",n.dom.style.flexBasis=n.minWidth?n.minWidth+"px":"";var e=_o.chrome||_o.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;n.sync(n.view,e),n.dirty=0,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(n.forceSelection=!0),n.dom.style.height=""}));var r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(var o=0,a=this.children;o<a.length;o++){var s=a[o];s instanceof ma&&s.widget instanceof vs&&r.push(s.dom)}i.updateGaps(r)},t.prototype.updateChildren=function(e,t){for(var n=this.childCursor(t),i=e.length-1;;i--){var r=i>=0?e[i]:null;if(!r)break;var o=r.fromA,a=r.toA,s=r.fromB,l=r.toB,c=va.build(this.view.state.doc,s,l,this.decorations,this.dynamicDecorationMap),u=c.content,h=c.breakAtStart,p=c.openStart,d=c.openEnd,f=n.findPos(a,1),g=f.i,m=f.off,v=n.findPos(o,-1);Po(this,v.i,v.off,g,m,u,h,p,d)}},t.prototype.updateSelection=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();var i=this.view.root.activeElement,r=i==this.dom,o=!r&&uo(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(r||t||o){var a=this.forceSelection;this.forceSelection=!1;var s=this.view.state.selection.main,l=this.domAtPos(s.anchor),c=s.empty?l:this.domAtPos(s.head);if(_o.gecko&&s.empty&&!this.compositionDeco.size&&function(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}(l)){var u=document.createTextNode("");this.view.observer.ignore((function(){return l.node.insertBefore(u,l.node.childNodes[l.offset]||null)})),l=c=new Mo(u,0),a=!0}var h=this.view.observer.selectionRange;!a&&h.focusNode&&po(l.node,l.offset,h.anchorNode,h.anchorOffset)&&po(c.node,c.offset,h.focusNode,h.focusOffset)||(this.view.observer.ignore((function(){var e;_o.android&&_o.chrome&&n.dom.contains(h.focusNode)&&function(e,t){for(var n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,n.dom)&&(n.dom.blur(),n.dom.focus({preventScroll:!0}));var t,r,a=lo(n.view.root);if(a)if(s.empty){if(_o.gecko){var u=(t=l.node,r=l.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(u&&3!=u){var p=ws(l.node,l.offset,1==u?1:-1);p&&(l=new Mo(p,1==u?0:p.nodeValue.length))}}a.collapse(l.node,l.offset),null!=s.bidiLevel&&null!=h.cursorBidiLevel&&(h.cursorBidiLevel=s.bidiLevel)}else if(a.extend){a.collapse(l.node,l.offset);try{a.extend(c.node,c.offset)}catch(e){}}else{var d=document.createRange();s.anchor>s.head&&(l=(e=[c,l])[0],c=e[1]),d.setEnd(c.node,c.offset),d.setStart(l.node,l.offset),a.removeAllRanges(),a.addRange(d)}else;o&&n.view.root.activeElement==n.dom&&(n.dom.blur(),i&&i.focus())})),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Mo(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new Mo(h.focusNode,h.focusOffset)}},t.prototype.enforceCursorAssoc=function(){if(!this.compositionDeco.size){var e=this.view,t=e.state.selection.main,n=lo(e.root),i=e.observer.selectionRange,r=i.anchorNode,o=i.anchorOffset;if(n&&t.empty&&t.assoc&&n.modify){var a=ga.find(this,t.head);if(a){var s=a.posAtStart;if(t.head!=s&&t.head!=s+a.length){var l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(l&&c&&!(l.bottom>c.top)){var u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();var h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(r,o)}}}}}},t.prototype.nearest=function(e){for(var t=e;t;){var n=Do.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null},t.prototype.posFromDOM=function(e,t){var n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart},t.prototype.domAtPos=function(e){for(var t=this.childCursor().findPos(e,-1),n=t.i,i=t.off;n<this.children.length-1;){var r=this.children[n];if(i<r.length||r instanceof ga)break;n++,i=0}return this.children[n].domAtPos(i)},t.prototype.coordsAt=function(e,t){for(var n=this.length,i=this.children.length-1;;i--){var r=this.children[i],o=n-r.breakAfter-r.length;if(e>o||e==o&&r.type!=la.WidgetBefore&&r.type!=la.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==la.WidgetBefore&&t>-2))return r.coordsAt(e-o,t);n=o}},t.prototype.measureVisibleLineHeights=function(e){for(var t=[],n=e.from,i=e.to,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==ja.LTR,l=0,c=0;c<this.children.length;c++){var u=this.children[c],h=l+u.length;if(h>i)break;if(l>=n){var p=u.dom.getBoundingClientRect();if(t.push(p.height),o){var d=u.dom.lastChild,f=d?ho(d):[];if(f.length){var g=f[f.length-1],m=s?g.right-p.left:p.right-g.left;m>a&&(a=m,this.minWidth=r,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+u.breakAfter}return t},t.prototype.textDirectionAt=function(e){var t=this.childPos(e,1).i;return"rtl"==getComputedStyle(this.children[t].dom).direction?ja.RTL:ja.LTR},t.prototype.measureTextSize=function(){for(var e=this,t=0,n=this.children;t<n.length;t++){var i=n[t];if(i instanceof ga){var r=i.measureTextSize();if(r)return r}}var o,a,s,l=document.createElement("div");return l.className="cm-line",l.style.width="99999px",l.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){e.dom.appendChild(l);var t=ho(l.firstChild)[0];o=l.getBoundingClientRect().height,a=t?t.width/27:7,s=t?t.height:o,l.remove()})),{lineHeight:o,charWidth:a,textHeight:s}},t.prototype.childCursor=function(e){void 0===e&&(e=this.length);var t=this.children.length;return t&&(e-=this.children[--t].length),new Lo(this.children,e,t)},t.prototype.computeBlockGapDeco=function(){for(var e=[],t=this.view.viewState,n=0,i=0;;i++){var r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){var a=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(ca.replace({widget:new vs(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return ca.set(e)},t.prototype.updateDeco=function(){for(var e=this,t=this.view.state.facet(Va).map((function(t,n){return(e.dynamicDecorationMap[n]="function"==typeof t)?t(e.view):t})),n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=w(w([],t,!0),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco],!1)},t.prototype.scrollIntoView=function(e){var t=this;if(this.dom.offsetParent){var n,i=e.range,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(r){!i.empty&&(n=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});for(var o=0,a=0,s=0,l=0,c=0,u=this.view.state.facet(qa).map((function(e){return e(t.view)}));c<u.length;c++){var h=u[c];if(h){var p=h.left,d=h.right,f=h.top,g=h.bottom;null!=p&&(o=Math.max(o,p)),null!=d&&(a=Math.max(a,d)),null!=f&&(s=Math.max(s,f)),null!=g&&(l=Math.max(l,g))}}var m={left:r.left-o,top:r.top-s,right:r.right+a,bottom:r.bottom+l};!function(e,t,n,i,r,o,a,s){for(var l=e.ownerDocument,c=l.defaultView||window,u=e;u;)if(1==u.nodeType){var h=void 0,p=u==l.body;if(p)h=yo(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}var d=u.getBoundingClientRect();h={left:d.left,right:d.left+u.clientWidth,top:d.top,bottom:d.top+u.clientHeight}}var f=0,g=0;if("nearest"==r)t.top<h.top?(g=-(h.top-t.top+a),n>0&&t.bottom>h.bottom+g&&(g=t.bottom-h.bottom+g+a)):t.bottom>h.bottom&&(g=t.bottom-h.bottom+a,n<0&&t.top-g<h.top&&(g=-(h.top+g-t.top+a)));else{var m=t.bottom-t.top,v=h.bottom-h.top;g=("center"==r&&m<=v?t.top+m/2-v/2:"start"==r||"center"==r&&n<0?t.top-a:t.bottom-v+a)-h.top}if("nearest"==i?t.left<h.left?(f=-(h.left-t.left+o),n>0&&t.right>h.right+f&&(f=t.right-h.right+f+o)):t.right>h.right&&(f=t.right-h.right+o,n<0&&t.left<h.left+f&&(f=-(h.left+f-t.left+o))):f=("center"==i?t.left+(t.right-t.left)/2-(h.right-h.left)/2:"start"==i==s?t.left-o:t.right-(h.right-h.left)+o)-h.left,f||g)if(p)c.scrollBy(f,g);else{var y=0,b=0;if(g){var w=u.scrollTop;u.scrollTop+=g,b=u.scrollTop-w}f&&(w=u.scrollLeft,u.scrollLeft+=f,y=u.scrollLeft-w),t={left:t.left-y,top:t.top-b,right:t.right-y,bottom:t.bottom-b},y&&Math.abs(y-f)<1&&(i="nearest"),b&&Math.abs(b-g)<1&&(r="nearest")}if(p)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,m,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==ja.LTR)}}},t}(Do);var vs=function(e){function t(t){var n=e.call(this)||this;return n.height=t,n}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("div");return this.updateDOM(e),e},t.prototype.eq=function(e){return e.height==this.height},t.prototype.updateDOM=function(e){return e.style.height=this.height+"px",!0},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),t}(sa);function ys(e){var t=e.observer.selectionRange,n=t.focusNode&&ws(t.focusNode,t.focusOffset,0);if(!n)return null;var i=e.docView.nearest(n);if(!i)return null;if(i instanceof ga){for(var r=n;r.parentNode!=i.dom;)r=r.parentNode;for(var o=r.previousSibling;o&&!Do.get(o);)o=o.previousSibling;var a=o?Do.get(o).posAtEnd:i.posAtStart;return{from:a,to:a,node:r,text:n}}for(;;){var s=i.parent;if(!s)return null;if(s instanceof ga)break;i=s}var l=i.posAtStart;return{from:l,to:l+i.length,node:i.dom,text:n}}var bs=function(e){function t(t,n,i){var r=e.call(this)||this;return r.top=t,r.text=n,r.topView=i,r}return f(t,e),t.prototype.eq=function(e){return this.top==e.top&&this.text==e.text},t.prototype.toDOM=function(){return this.top},t.prototype.ignoreEvent=function(){return!1},Object.defineProperty(t.prototype,"customView",{get:function(){return Xo},enumerable:!1,configurable:!0}),t}(sa);function ws(e,t,n){if(n<=0)for(var i=e,r=t;;){if(3==i.nodeType)return i;if(!(1==i.nodeType&&r>0))break;r=mo(i=i.childNodes[r-1])}if(n>=0)for(i=e,r=t;;){if(3==i.nodeType)return i;if(!(1==i.nodeType&&r<i.childNodes.length&&n>=0))break;i=i.childNodes[r],r=0}return null}var ks=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(e,t){fa(e,t,this.changes)},e.prototype.comparePoint=function(e,t){fa(e,t,this.changes)},e}();function Cs(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Es(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function xs(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Ss(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Ms(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Ts(e,t,n){for(var i,r,o,a,s,l,c,u,h=!1,p=e.firstChild;p;p=p.nextSibling)for(var d=ho(p),f=0;f<d.length;f++){var g=d[f];r&&xs(r,g)&&(g=Ss(Ms(g,r.bottom),r.top));var m=Cs(t,g),v=Es(n,g);if(0==m&&0==v)return 3==p.nodeType?Ds(p,t,n):Ts(p,t,n);if(!i||a>v||a==v&&o>m){i=p,r=g,o=m,a=v;var y=v?n<g.top?-1:1:m?t<g.left?-1:1:0;h=!y||(y>0?f<d.length-1:f>0)}0==m?n>g.bottom&&(!c||c.bottom<g.bottom)?(s=p,c=g):n<g.top&&(!u||u.top>g.top)&&(l=p,u=g):c&&xs(c,g)?c=Ms(c,g.bottom):u&&xs(u,g)&&(u=Ss(u,g.top))}if(c&&c.bottom>=n?(i=s,r=c):u&&u.top<=n&&(i=l,r=u),!i)return{node:e,offset:0};var b=Math.max(r.left,Math.min(r.right,t));return 3==i.nodeType?Ds(i,b,n):h&&"false"!=i.contentEditable?Ts(i,b,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0)}}function Ds(e,t,n){for(var i=e.nodeValue.length,r=-1,o=1e9,a=0,s=0;s<i;s++)for(var l=Eo(e,s,s+1).getClientRects(),c=0;c<l.length;c++){var u=l[c];if(u.top!=u.bottom){a||(a=t-u.left);var h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&h<o){var p=t>=(u.left+u.right)/2,d=p;if(_o.chrome||_o.gecko)Eo(e,s).getBoundingClientRect().left==u.right&&(d=!p);if(h<=0)return{node:e,offset:s+(d?1:0)};r=s+(d?1:0),o=h}}}return{node:e,offset:r>-1?r:a>0?e.nodeValue.length:0}}function As(e,t,n,i){var r,o,a;void 0===i&&(i=-1);var s,l=e.contentDOM.getBoundingClientRect(),c=l.top+e.viewState.paddingTop,u=e.viewState.docHeight,h=t.x,p=t.y,d=p-c;if(d<0)return 0;if(d>u)return e.state.doc.length;for(var f=e.defaultLineHeight/2,g=!1;(s=e.elementAtHeight(d)).type!=la.Text;)for(;!((d=i>0?s.bottom+f:s.top-f)>=0&&d<=u);){if(g)return n?null:0;g=!0,i=-i}p=c+d;var m=s.from;if(m<e.viewport.from)return 0==e.viewport.from?0:n?null:Ls(e,l,s,h,p);if(m>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Ls(e,l,s,h,p);var v=e.dom.ownerDocument,y=e.root.elementFromPoint?e.root:v,b=y.elementFromPoint(h,p);b&&!e.contentDOM.contains(b)&&(b=null),b||(h=Math.max(l.left+1,Math.min(l.right-1,h)),(b=y.elementFromPoint(h,p))&&!e.contentDOM.contains(b)&&(b=null));var w,k=-1;if(b&&0!=(null===(o=e.docView.nearest(b))||void 0===o?void 0:o.isEditable))if(v.caretPositionFromPoint){var C=v.caretPositionFromPoint(h,p);C&&(w=C.offsetNode,k=C.offset)}else if(v.caretRangeFromPoint){var E=v.caretRangeFromPoint(h,p);E&&(w=E.startContainer,k=E.startOffset,(!e.contentDOM.contains(w)||_o.safari&&function(e,t,n){var i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(var r=e.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return Eo(e,i-1,i).getBoundingClientRect().left>n}(w,k,h)||_o.chrome&&function(e,t,n){if(0!=t)return!1;for(var i=e;;){var r=i.parentNode;if(!r||1!=r.nodeType||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}var o=1==e.nodeType?e.getBoundingClientRect():Eo(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-o.left>5}(w,k,h))&&(w=void 0))}if(!w||!e.docView.dom.contains(w)){var x=ga.find(e.docView,m);if(!x)return d>s.top+s.height/2?s.to:s.from;w=(r=Ts(x.dom,h,p)).node,k=r.offset}var S=e.docView.nearest(w);if(!S)return null;if(S.isWidget&&1==(null===(a=S.dom)||void 0===a?void 0:a.nodeType)){var M=S.dom.getBoundingClientRect();return t.y<M.top||t.y<=M.bottom&&t.x<=(M.left+M.right)/2?S.posAtStart:S.posAtEnd}return S.localPosFromDOM(w,k)+S.posAtStart}function Ls(e,t,n,i,r){var o=Math.round((i-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>1.5*e.defaultLineHeight&&(o+=Math.floor((r-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);var a=e.state.sliceDoc(n.from,n.to);return n.from+_r(a,o,e.state.tabSize)}function Ps(e,t,n,i){for(var r=e.state.doc.lineAt(t.head),o=e.bidiSpans(r),a=e.textDirectionAt(r.from),s=t,l=null;;){var c=hs(r,o,a,s,n),u=us;if(!c){if(r.number==(n?e.state.doc.lines:1))return s;u="\n",r=e.state.doc.line(r.number+(n?1:-1)),o=e.bidiSpans(r),c=Bi.cursor(n?r.from:r.to)}if(l){if(!l(u))return s}else{if(!i)return c;l=i(u)}s=c}}function Is(e,t,n){for(var i=e.state.facet(za).map((function(t){return t(e)})),r=function(){for(var e=!1,r=0,o=i;r<o.length;r++){o[r].between(n.from-1,n.from+1,(function(i,r,o){n.from>i&&n.from<r&&(n=t.head>n.from?Bi.cursor(i,1):Bi.cursor(r,-1),e=!0)}))}if(!e)return{value:n}};;){var o=r();if("object"==typeof o)return o.value}}var Os=function(){function e(e){var t=this;this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;var n=function(n,i){t.ignoreDuringComposition(i)||"keydown"==i.type&&t.keydown(e,i)||(t.mustFlushObserver(i)&&e.observer.forceFlush(),t.runCustomHandlers(i.type,e,i)?i.preventDefault():n(e,i))},i=function(t){var i=zs[t];e.contentDOM.addEventListener(t,(function(t){Vs(e,t)&&n(i,t)}),qs[t]),r.registeredEvents.push(t)},r=this;for(var o in zs)i(o);e.scrollDOM.addEventListener("mousedown",(function(t){if(t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(zs.mousedown,t),!t.defaultPrevented&&2==t.button)){var i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout((function(){return e.contentDOM.style.minHeight=i}),200)}})),e.scrollDOM.addEventListener("drop",(function(t){t.target==e.scrollDOM&&t.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(zs.drop,t)})),_o.chrome&&102==_o.chrome_version&&e.scrollDOM.addEventListener("wheel",(function(){t.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(t.chromeScrollHack),t.chromeScrollHack=setTimeout((function(){t.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,_o.safari&&e.contentDOM.addEventListener("input",(function(){return null}))}return e.prototype.setSelectionOrigin=function(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()},e.prototype.ensureHandlers=function(e,t){var n,i,r=this;this.customHandlers=[];for(var o=0,a=t;o<a.length;o++){var s=a[o];if(i=null===(n=s.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});var l=function(t){c.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(c.registeredEvents.push(t),e.contentDOM.addEventListener(t,(function(n){Vs(e,n)&&r.runCustomHandlers(t,e,n)&&n.preventDefault()})))},c=this;for(var u in i)l(u)}}},e.prototype.runCustomHandlers=function(e,t,n){for(var i=0,r=this.customHandlers;i<r.length;i++){var o=r[i],a=o.handlers[e];if(a)try{if(a.call(o.plugin,n,t)||n.defaultPrevented)return!0}catch(e){Pa(t.state,e)}}return!1},e.prototype.runScrollHandlers=function(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(var n=0,i=this.customHandlers;n<i.length;n++){var r=i[n],o=r.handlers.scroll;if(o)try{o.call(r.plugin,t,e)}catch(t){Pa(e.state,t)}}},e.prototype.keydown=function(e,t){var n,i=this;return this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3||(27!=t.keyCode&&Ns.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),!_o.android||!_o.chrome||t.synthetic||13!=t.keyCode&&8!=t.keyCode?!(!_o.ios||t.synthetic||t.altKey||t.metaKey||!((n=Fs.find((function(e){return e.keyCode==t.keyCode})))&&!t.ctrlKey||Bs.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=n||t,setTimeout((function(){return i.flushIOSKey(e)}),250),!0):(e.observer.delayAndroidKey(t.key,t.keyCode),!0))},e.prototype.flushIOSKey=function(e){var t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,xo(e.contentDOM,t.key,t.keyCode))},e.prototype.ignoreDuringComposition=function(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(_o.safari&&!_o.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))},e.prototype.mustFlushObserver=function(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!_o.ios&&!_o.android},e.prototype.startMouseSelection=function(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e},e.prototype.update=function(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)},e.prototype.destroy=function(){this.mouseSelection&&this.mouseSelection.destroy()},e}(),Fs=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Bs="dthko",Ns=[16,17,18,20,91,92,224,225];function Rs(e){return.7*Math.max(0,e)+8}var Hs=function(){function e(e,t,n,i){this.view=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){for(var t=e.ownerDocument,n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(e.contentDOM);var r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Sr.allowMultipleSelections)&&function(e,t){var n=e.state.facet(wa);return n.length?n[0](t):_o.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){var n=e.state.facet(ka);return n.length?n[0](t):_o.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){if(e.state.selection.main.empty)return!1;var n=lo(e.root);if(!n||0==n.rangeCount)return!0;for(var i=n.getRangeAt(0).getClientRects(),r=0;r<i.length;r++){var o=i[r];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Js(t))&&null}return e.prototype.start=function(e){!1===this.dragging&&(e.preventDefault(),this.select(e))},e.prototype.move=function(e){var t;if(0==e.buttons)return this.destroy();if(!1===this.dragging){this.select(this.lastEvent=e);var n=0,i=0,r=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=r.left+6?n=-Rs(r.left-e.clientX):e.clientX>=r.right-6&&(n=Rs(e.clientX-r.right)),e.clientY<=r.top+6?i=-Rs(r.top-e.clientY):e.clientY>=r.bottom-6&&(i=Rs(e.clientY-r.bottom)),this.setScrollSpeed(n,i)}},e.prototype.up=function(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()},e.prototype.destroy=function(){this.setScrollSpeed(0,0);var e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null},e.prototype.setScrollSpeed=function(e,t){var n=this;this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((function(){return n.scroll()}),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)},e.prototype.scroll=function(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)},e.prototype.select=function(e){var t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1},e.prototype.update=function(e){var t=this;e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((function(){return t.select(t.lastEvent)}),20)},e}();function Vs(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target,i=void 0;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=Do.get(n))&&i.ignoreEvent(t))return!1;return!0}var zs=Object.create(null),qs=Object.create(null),Us=_o.ie&&_o.ie_version<15||_o.ios&&_o.webkit_version<604;function Ws(e,t){var n,i=e.state,r=1,o=i.toText(t),a=o.lines==i.selection.ranges.length;if(null!=tl&&i.selection.ranges.every((function(e){return e.empty}))&&tl==o.toString()){var s=-1;n=i.changeByRange((function(e){var n=i.doc.lineAt(e.from);if(n.from==s)return{range:e};s=n.from;var l=i.toText((a?o.line(r++).text:t)+i.lineBreak);return{changes:{from:n.from,insert:l},range:Bi.cursor(e.from+l.length)}}))}else n=a?i.changeByRange((function(e){var t=o.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Bi.cursor(e.from+t.length)}})):i.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function _s(e,t,n,i){if(1==i)return Bi.cursor(t,n);if(2==i)return function(e,t,n){void 0===n&&(n=1);var i=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(0==r.length)return Bi.cursor(t);0==o?n=1:o==r.length&&(n=-1);var a=o,s=o;n<0?a=mi(r.text,o,!1):s=mi(r.text,o);for(var l=i(r.text.slice(a,s));a>0;){var c=mi(r.text,a,!1);if(i(r.text.slice(c,a))!=l)break;a=c}for(;s<r.length;){var u=mi(r.text,s);if(i(r.text.slice(s,u))!=l)break;s=u}return Bi.range(a+r.from,s+r.from)}(e.state,t,n);var r=ga.find(e.docView,t),o=e.state.doc.lineAt(r?r.posAtEnd:t),a=r?r.posAtStart:o.from,s=r?r.posAtEnd:o.to;return s<e.state.doc.length&&s==o.to&&s++,Bi.range(a,s)}zs.keydown=function(e,t){e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now())},zs.touchstart=function(e,t){e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},zs.touchmove=function(e){e.inputState.setSelectionOrigin("select.pointer")},qs.touchstart=qs.touchmove={passive:!0},zs.mousedown=function(e,t){if(e.observer.flush(),!(e.inputState.lastTouchTime>Date.now()-2e3)){for(var n=null,i=0,r=e.state.facet(Ca);i<r.length;i++){if(n=(0,r[i])(e,t))break}if(n||0!=t.button||(n=function(e,t){var n=Ys(e,t),i=Js(t),r=e.state.selection;return{update:function(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes))},get:function(t,o,a){var s,l=Ys(e,t),c=_s(e,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){var u=_s(e,n.pos,n.bias,i),h=Math.min(u.from,c.from),p=Math.max(u.to,c.to);c=h<c.from?Bi.range(h,p):Bi.range(p,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&1==i&&r.ranges.length>1&&(s=function(e,t){for(var n=0;n<e.ranges.length;n++){var i=e.ranges[n],r=i.from,o=i.to;if(r<=t&&o>=t)return Bi.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(r,l.pos))?s:a?r.addRange(c):Bi.create([c])}}}(e,t)),n){var o=e.root.activeElement!=e.contentDOM;e.inputState.startMouseSelection(new Hs(e,t,n,o)),o&&e.observer.ignore((function(){return Co(e.contentDOM)})),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}}};var js=function(e,t){return e>=t.top&&e<=t.bottom},Gs=function(e,t,n){return js(t,n)&&e>=n.left&&e<=n.right};function Ks(e,t,n,i){var r=ga.find(e.docView,t);if(!r)return 1;var o=t-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;var a=r.coordsAt(o,-1);if(a&&Gs(n,i,a))return-1;var s=r.coordsAt(o,1);return s&&Gs(n,i,s)?1:a&&js(i,a)?-1:1}function Ys(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Ks(e,n,t.clientX,t.clientY)}}var Xs=_o.ie&&_o.ie_version<=11,$s=null,Zs=0,Qs=0;function Js(e){if(!Xs)return e.detail;var t=$s,n=Qs;return $s=e,Qs=Date.now(),Zs=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Zs+1)%3:1}function el(e,t,n,i){if(n){var r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();var o=e.inputState.mouseSelection,a=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,s={from:r,insert:n},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"})}}zs.dragstart=function(e,t){var n=e.state.selection.main,i=e.inputState.mouseSelection;i&&(i.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},zs.drop=function(e,t){if(t.dataTransfer){if(e.state.readOnly)return t.preventDefault();var n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();for(var i=Array(n.length),r=0,o=function(){++r==n.length&&el(e,t,i.filter((function(e){return null!=e})).join(e.state.lineBreak),!1)},a=function(e){var t=new FileReader;t.onerror=o,t.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),o()},t.readAsText(n[e])},s=0;s<n.length;s++)a(s)}else el(e,t,t.dataTransfer.getData("Text"),!0)}},zs.paste=function(e,t){if(e.state.readOnly)return t.preventDefault();e.observer.flush();var n=Us?null:t.clipboardData;n?(Ws(e,n.getData("text/plain")||n.getData("text/uri-text")),t.preventDefault()):function(e){var t=e.dom.parentNode;if(t){var n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.remove(),Ws(e,n.value)}),50)}}(e)};var tl=null;zs.copy=zs.cut=function(e,t){var n=function(e){for(var t=[],n=[],i=!1,r=0,o=e.selection.ranges;r<o.length;r++){var a=o[r];a.empty||(t.push(e.sliceDoc(a.from,a.to)),n.push(a))}if(!t.length){for(var s=-1,l=0,c=e.selection.ranges;l<c.length;l++){var u=c[l].from,h=e.doc.lineAt(u);h.number>s&&(t.push(h.text),n.push({from:h.from,to:Math.min(e.doc.length,h.to+1)})),s=h.number}i=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:i}}(e.state),i=n.text,r=n.ranges,o=n.linewise;if(i||o){tl=o?i:null;var a=Us?null:t.clipboardData;a?(t.preventDefault(),a.clearData(),a.setData("text/plain",i)):function(e,t){var n=e.dom.parentNode;if(n){var i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((function(){i.remove(),e.focus()}),50)}}(e,i),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}};var nl=ur.define();function il(e,t){for(var n=[],i=0,r=e.facet(Ma);i<r.length;i++){var o=(0,r[i])(e,t);o&&n.push(o)}return n?e.update({effects:n,annotations:nl.of(!0)}):null}function rl(e){setTimeout((function(){var t=e.hasFocus;if(t!=e.inputState.notifiedFocused){var n=il(e.state,t);n?e.dispatch(n):e.update([])}}),10)}zs.focus=function(e){e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),rl(e)},zs.blur=function(e){e.observer.clearSelectionRange(),rl(e)},zs.compositionstart=zs.compositionupdate=function(e){null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},zs.compositionend=function(e){e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,_o.chrome&&_o.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((function(){return e.observer.flush()})):setTimeout((function(){e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},zs.contextmenu=function(e){e.inputState.lastContextMenu=Date.now()},zs.beforeinput=function(e,t){var n,i;if(_o.chrome&&_o.android&&(i=Fs.find((function(e){return e.inputType==t.inputType})))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){var r=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((function(){var t;((null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0)>r+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};var ol=["pre-wrap","normal","pre-line","break-spaces"],al=function(){function e(e){this.lineWrapping=e,this.doc=ii.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}return e.prototype.heightForGap=function(e,t){var n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n},e.prototype.heightForLine=function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight},e.prototype.setDoc=function(e){return this.doc=e,this},e.prototype.mustRefreshForWrapping=function(e){return ol.indexOf(e)>-1!=this.lineWrapping},e.prototype.mustRefreshForHeights=function(e){for(var t=!1,n=0;n<e.length;n++){var i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t},e.prototype.refresh=function(e,t,n,i,r,o){var a=ol.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,s){this.heightSamples={};for(var l=0;l<o.length;l++){var c=o[l];c<0?l++:this.heightSamples[Math.floor(10*c)]=!0}}return s},e}(),sl=function(){function e(e,t){this.from=e,this.heights=t,this.index=0}return Object.defineProperty(e.prototype,"more",{get:function(){return this.index<this.heights.length},enumerable:!1,configurable:!0}),e}(),ll=function(){function e(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this.type=r}return Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!1,configurable:!0}),e.prototype.join=function(t){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new e(this.from,this.length+t.length,this.top,this.height+t.height,n)},e}(),cl=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(cl||(cl={})),ul=.001,hl=function(){function e(e,t,n){void 0===n&&(n=2),this.length=e,this.height=t,this.flags=n}return Object.defineProperty(e.prototype,"outdated",{get:function(){return(2&this.flags)>0},set:function(e){this.flags=(e?2:0)|-3&this.flags},enumerable:!1,configurable:!0}),e.prototype.setHeight=function(e,t){this.height!=t&&(Math.abs(this.height-t)>ul&&(e.heightChanged=!0),this.height=t)},e.prototype.replace=function(t,n,i){return e.of(i)},e.prototype.decomposeLeft=function(e,t){t.push(this)},e.prototype.decomposeRight=function(e,t){t.push(this)},e.prototype.applyChanges=function(e,t,n,i){for(var r=this,o=n.doc,a=i.length-1;a>=0;a--){var s=i[a],l=s.fromA,c=s.toA,u=s.fromB,h=s.toB,p=r.lineAt(l,cl.ByPosNoHeight,n.setDoc(t),0,0),d=p.to>=c?p:r.lineAt(c,cl.ByPosNoHeight,n,0,0);for(h+=d.to-c,c=d.to;a>0&&p.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<p.from&&(p=r.lineAt(l,cl.ByPosNoHeight,n,0,0));u+=p.from-l,l=p.from;var f=vl.build(n.setDoc(o),e,u,h);r=r.replace(l,c,f)}return r.updateHeight(n,0)},e.empty=function(){return new dl(0,0)},e.of=function(t){if(1==t.length)return t[0];for(var n=0,i=t.length,r=0,o=0;;)if(n==i)if(r>2*o){(a=t[n-1]).break?t.splice(--n,1,a.left,null,a.right):t.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else{if(!(o>2*r))break;var a;(a=t[i]).break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else if(r<o){(s=t[n++])&&(r+=s.size)}else{var s;(s=t[--i])&&(o+=s.size)}var l=0;return null==t[n-1]?(l=1,n--):null==t[n]&&(l=1,i++),new gl(e.of(t.slice(0,n)),l,e.of(t.slice(i)))},e}();hl.prototype.size=1;var pl=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.type=i,r}return f(t,e),t.prototype.blockAt=function(e,t,n,i){return new ll(i,this.length,n,this.height,this.type)},t.prototype.lineAt=function(e,t,n,i,r){return this.blockAt(0,n,i,r)},t.prototype.forEachLine=function(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this},t.prototype.toString=function(){return"block(".concat(this.length,")")},t}(hl),dl=function(e){function t(t,n){var i=e.call(this,t,n,la.Text)||this;return i.collapsed=0,i.widgetHeight=0,i}return f(t,e),t.prototype.replace=function(e,n,i){var r=i[0];return 1==i.length&&(r instanceof t||r instanceof fl&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof fl?r=new t(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):hl.of(i)},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this},t.prototype.toString=function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")},t}(pl),fl=function(e){function t(t){return e.call(this,t,0)||this}return f(t,e),t.prototype.heightMetrics=function(e,t){var n,i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,a=0;if(e.lineWrapping){var s=Math.min(this.height,e.lineHeight*o);n=s/o,this.length>o+1&&(a=(this.height-s)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:a}},t.prototype.blockAt=function(e,t,n,i){var r=this.heightMetrics(t,i),o=r.firstLine,a=r.lastLine,s=r.perLine,l=r.perChar;if(t.lineWrapping){var c=i+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),u=s+(p=t.doc.lineAt(c)).length*l,h=Math.max(n,e-u/2);return new ll(p.from,p.length,h,u,la.Text)}var p=Math.max(0,Math.min(a-o,Math.floor((e-n)/s))),d=t.doc.line(o+p),f=d.from,g=d.length;return new ll(f,g,n+s*p,s,la.Text)},t.prototype.lineAt=function(e,t,n,i,r){if(t==cl.ByHeight)return this.blockAt(e,n,i,r);if(t==cl.ByPosNoHeight){var o=n.doc.lineAt(e),a=o.from,s=o.to;return new ll(a,s-a,0,0,la.Text)}var l=this.heightMetrics(n,r),c=l.firstLine,u=l.perLine,h=l.perChar,p=n.doc.lineAt(e),d=u+p.length*h,f=p.number-c,g=i+u*f+h*(p.from-r-f);return new ll(p.from,p.length,Math.max(i,Math.min(g,i+this.height-d)),d,la.Text)},t.prototype.forEachLine=function(e,t,n,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);for(var a=this.heightMetrics(n,r),s=a.firstLine,l=a.perLine,c=a.perChar,u=e,h=i;u<=t;){var p=n.doc.lineAt(u);if(u==e){var d=p.number-s;h+=l*d+c*(e-r-d)}var f=l+c*p.length;o(new ll(p.from,p.length,h,f,la.Text)),h+=f,u=p.to+1}},t.prototype.replace=function(e,n,i){var r=this.length-n;if(r>0){var o=i[i.length-1];o instanceof t?i[i.length-1]=new t(o.length+r):i.push(null,new t(r-1))}if(e>0){var a=i[0];a instanceof t?i[0]=new t(e+a.length):i.unshift(new t(e-1),null)}return hl.of(i)},t.prototype.decomposeLeft=function(e,n){n.push(new t(e-1),null)},t.prototype.decomposeRight=function(e,n){n.push(null,new t(this.length-e-1))},t.prototype.updateHeight=function(e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=!1);var o=n+this.length;if(r&&r.from<=n+this.length&&r.more){var a=[],s=Math.max(n,r.from),l=-1;for(r.from>n&&a.push(new t(r.from-n-1).updateHeight(e,n));s<=o&&r.more;){var c=e.doc.lineAt(s).length;a.length&&a.push(null);var u=r.heights[r.index++];-1==l?l=u:Math.abs(u-l)>=ul&&(l=-2);var h=new dl(c,u);h.outdated=!1,a.push(h),s+=c+1}s<=o&&a.push(null,new t(o-s).updateHeight(e,s));var p=hl.of(a);return(l<0||Math.abs(p.height-this.height)>=ul||Math.abs(l-this.heightMetrics(e,n).perLine)>=ul)&&(e.heightChanged=!0),p}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1),this},t.prototype.toString=function(){return"gap(".concat(this.length,")")},t}(hl),gl=function(e){function t(t,n,i){var r=e.call(this,t.length+n+i.length,t.height+i.height,n|(t.outdated||i.outdated?2:0))||this;return r.left=t,r.right=i,r.size=t.size+i.size,r}return f(t,e),Object.defineProperty(t.prototype,"break",{get:function(){return 1&this.flags},enumerable:!1,configurable:!0}),t.prototype.blockAt=function(e,t,n,i){var r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)},t.prototype.lineAt=function(e,t,n,i,r){var o=i+this.left.height,a=r+this.left.length+this.break,s=t==cl.ByHeight?e<o:e<a,l=s?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;var c=t==cl.ByPosNoHeight?cl.ByPosNoHeight:cl.ByPos;return s?l.join(this.right.lineAt(a,c,n,o,a)):this.left.lineAt(a,c,n,i,r).join(l)},t.prototype.forEachLine=function(e,t,n,i,r,o){var a=i+this.left.height,s=r+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,i,r,o),t>=s&&this.right.forEachLine(e,t,n,a,s,o);else{var l=this.lineAt(s,cl.ByPos,n,i,r);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,r,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,o)}},t.prototype.replace=function(e,t,n){var i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));var r=[];e>0&&this.decomposeLeft(e,r);for(var o=r.length,a=0,s=n;a<s.length;a++){var l=s[a];r.push(l)}if(e>0&&ml(r,o-1),t<this.length){var c=r.length;this.decomposeRight(t,r),ml(r,c)}return hl.of(r)},t.prototype.decomposeLeft=function(e,t){var n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)},t.prototype.decomposeRight=function(e,t){var n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)},t.prototype.balanced=function(e,t){return e.size>2*t.size||t.size>2*e.size?hl.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)},t.prototype.updateHeight=function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=!1);var r=this.left,o=this.right,a=t+r.length+this.break,s=null;return i&&i.from<=t+r.length&&i.more?s=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=a+o.length&&i.more?s=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),s?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)},t.prototype.toString=function(){return this.left+(this.break?" ":"-")+this.right},t}(hl);function ml(e,t){var n,i;null==e[t]&&(n=e[t-1])instanceof fl&&(i=e[t+1])instanceof fl&&e.splice(t-1,3,new fl(n.length+1+i.length))}var vl=function(){function e(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}return Object.defineProperty(e.prototype,"isCovered",{get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering},enumerable:!1,configurable:!0}),e.prototype.span=function(e,t){if(this.lineStart>-1){var n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof dl?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new dl(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t},e.prototype.point=function(e,t,n){if(e<t||n.heightRelevant){var i=n.widget?n.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);var r=t-e;n.block?this.addBlock(new pl(r,i,n.type)):(r||i>=5)&&this.addLineDeco(i,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)},e.prototype.enterLine=function(){if(!(this.lineStart>-1)){var e=this.oracle.doc.lineAt(this.pos),t=e.from,n=e.to;this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new dl(this.pos-t,-1)),this.writtenTo=this.pos}},e.prototype.blankContent=function(e,t){var n=new fl(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n},e.prototype.ensureLine=function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof dl)return e;var t=new dl(0,-1);return this.nodes.push(t),t},e.prototype.addBlock=function(e){this.enterLine(),e.type!=la.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=la.WidgetBefore&&(this.covering=e)},e.prototype.addLineDeco=function(e,t){var n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t},e.prototype.finish=function(e){var t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof dl||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new dl(0,-1));for(var n=e,i=0,r=this.nodes;i<r.length;i++){var o=r[i];o instanceof dl&&o.updateHeight(this.oracle,n),n+=o?o.length:1}return this.nodes},e.build=function(t,n,i,r){var o=new e(i,t);return Pr.spans(n,i,r,o,0),o.finish(i)},e}();var yl=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(){},e.prototype.comparePoint=function(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&fa(e,t,this.changes,5)},e}();function bl(e,t){for(var n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom),c=e.parentNode;c&&c!=i.body;)if(1==c.nodeType){var u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&"visible"!=h.overflow){var p=u.getBoundingClientRect();o=Math.max(o,p.left),a=Math.min(a,p.right),s=Math.max(s,p.top),l=c==e.parentNode?p.bottom:Math.min(l,p.bottom)}c="absolute"==h.position||"fixed"==h.position?u.offsetParent:u.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+t),bottom:Math.max(s,l)-(n.top+t)}}function wl(e,t){var n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}var kl=function(){function e(e,t,n){this.from=e,this.to=t,this.size=n}return e.same=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0},e.prototype.draw=function(e){return ca.replace({widget:new Cl(this.size,e)}).range(this.from,this.to)},e}(),Cl=function(e){function t(t,n){var i=e.call(this)||this;return i.size=t,i.vertical=n,i}return f(t,e),t.prototype.eq=function(e){return e.size==this.size&&e.vertical==this.vertical},t.prototype.toDOM=function(){var e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.vertical?this.size:-1},enumerable:!1,configurable:!0}),t}(sa),El=function(){function e(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=Dl,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ja.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;var t=e.facet(Ha).some((function(e){return"function"!=typeof e&&"cm-lineWrapping"==e.class}));this.heightOracle=new al(t),this.stateDeco=e.facet(Va).filter((function(e){return"function"!=typeof e})),this.heightMap=hl.empty().applyChanges(this.stateDeco,ii.empty,this.heightOracle.setDoc(e.doc),[new Wa(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ca.set(this.lineGaps.map((function(e){return e.draw(!1)}))),this.computeVisibleRanges()}return e.prototype.updateForViewport=function(){for(var e=[this.viewport],t=this.state.selection.main,n=function(n){var r=n?t.head:t.anchor;if(!e.some((function(e){var t=e.from,n=e.to;return r>=t&&r<=n}))){var o=i.lineBlockAt(r),a=o.from,s=o.to;e.push(new xl(a,s))}},i=this,r=0;r<=1;r++)n(r);this.viewports=e.sort((function(e,t){return e.from-t.from})),this.scaler=this.heightMap.height<=7e6?Dl:new Al(this.heightOracle,this.heightMap,this.viewports)},e.prototype.updateViewportLines=function(){var e=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(function(t){e.viewportLines.push(1==e.scaler.scale?t:Ll(t,e.scaler))}))},e.prototype.update=function(e,t){void 0===t&&(t=null),this.state=e.state;var n=this.stateDeco;this.stateDeco=this.state.facet(Va).filter((function(e){return"function"!=typeof e}));var i,r,o,a,s=e.changedRanges,l=Wa.extendWithRanges(s,(i=n,r=this.stateDeco,o=e?e.changes:Ti.empty(this.state.doc.length),a=new yl,Pr.compare(i,r,o,a,0),a.changes)),c=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=c&&(e.flags|=2);var u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));var h=!e.changes.empty||2&e.flags||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Da)&&(this.mustEnforceCursorAssoc=!0)},e.prototype.measure=function(e){var t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?ja.RTL:ja.LTR;var o=this.heightOracle.mustRefreshForWrapping(r),a=t.getBoundingClientRect(),s=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;var l=0,c=0,u=parseInt(n.paddingTop)||0,h=parseInt(n.paddingBottom)||0;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);var p=(this.printing?wl:bl)(t,this.paddingTop),d=p.top-this.pixelViewport.top,f=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;var g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(s=!0)),!this.inView)return 0;var m=a.width;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),s){var v=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(v)&&(o=!0),o||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){var y=e.docView.measureTextSize(),b=y.lineHeight,w=y.charWidth,k=y.textHeight;(o=b>0&&i.refresh(r,b,w,k,m/w,v))&&(e.docView.minWidth=0,l|=8)}d>0&&f>0?c=Math.max(d,f):d<0&&f<0&&(c=Math.min(d,f)),i.heightChanged=!1;for(var C=0,E=this.viewports;C<E.length;C++){var x=E[C],S=x.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?hl.empty().applyChanges(this.stateDeco,ii.empty,this.heightOracle,[new Wa(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new sl(x.from,S))}i.heightChanged&&(l|=2)}var M=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return M&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||M)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l},Object.defineProperty(e.prototype,"visibleTop",{get:function(){return this.scaler.fromDOM(this.pixelViewport.top)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleBottom",{get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)},enumerable:!1,configurable:!0}),e.prototype.getViewport=function(e,t){var n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,o=this.visibleTop,a=this.visibleBottom,s=new xl(i.lineAt(o-1e3*n,cl.ByHeight,r,0,0).from,i.lineAt(a+1e3*(1-n),cl.ByHeight,r,0,0).to);if(t){var l=t.range.head;if(l<s.from||l>s.to){var c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(l,cl.ByPos,r,0,0),h=void 0;h="center"==t.y?(u.top+u.bottom)/2-c/2:"start"==t.y||"nearest"==t.y&&l<s.from?u.top:u.bottom-c,s=new xl(i.lineAt(h-500,cl.ByHeight,r,0,0).from,i.lineAt(h+c+500,cl.ByHeight,r,0,0).to)}}return s},e.prototype.mapViewport=function(e,t){var n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new xl(this.heightMap.lineAt(n,cl.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,cl.ByPos,this.heightOracle,0,0).to)},e.prototype.viewportIsAppropriate=function(e,t){var n=e.from,i=e.to;if(void 0===t&&(t=0),!this.inView)return!0;var r=this.heightMap.lineAt(n,cl.ByPos,this.heightOracle,0,0).top,o=this.heightMap.lineAt(i,cl.ByPos,this.heightOracle,0,0).bottom,a=this.visibleTop,s=this.visibleBottom;return(0==n||r<=a-Math.max(10,Math.min(-t,250)))&&(i==this.state.doc.length||o>=s+Math.max(10,Math.min(t,250)))&&r>a-2e3&&o<s+2e3},e.prototype.mapLineGaps=function(e,t){if(!e.length||t.empty)return e;for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];t.touchesRange(o.from,o.to)||n.push(new kl(t.mapPos(o.from),t.mapPos(o.to),o.size))}return n},e.prototype.ensureLineGaps=function(e,t){var n=this,i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=ja.LTR&&!i)return[];for(var s=[],l=function(r,a,c,u){if(!(a-r<o)){var h=n.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(var d=0,f=p;d<f.length;d++){var g=f[d];if(g>r&&g<a)return l(r,g-10,c,u),void l(g+10,a,c,u)}var m=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(t(r))return r}return}(e,(function(e){return e.from>=c.from&&e.to<=c.to&&Math.abs(e.from-r)<o&&Math.abs(e.to-a)<o&&!p.some((function(t){return e.from<t&&e.to>t}))}));if(!m){if(a<c.to&&t&&i&&t.visibleRanges.some((function(e){return e.from<=a&&e.to>=a}))){var v=t.moveToLineBoundary(Bi.cursor(a),!1,!0).head;v>r&&(a=v)}m=new kl(r,a,n.gapSize(c,r,a,u))}s.push(m)}},c=0,u=this.viewportLines;c<u.length;c++){var h=u[c];if(!(h.length<a)){var p=Sl(h.from,h.to,this.stateDeco);if(!(p.total<a)){var d=this.scrollTarget?this.scrollTarget.range.head:null,f=void 0,g=void 0;if(i){var m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v=void 0,y=void 0;if(null!=d)v=(b=Tl(p,d))-(w=((this.visibleBottom-this.visibleTop)/2+m)/h.height),y=b+w;else v=(this.visibleTop-h.top-m)/h.height,y=(this.visibleBottom-h.top+m)/h.height;f=Ml(p,v),g=Ml(p,y)}else{var b,w,k=p.total*this.heightOracle.charWidth,C=r*this.heightOracle.charWidth,E=void 0,x=void 0;if(null!=d)E=(b=Tl(p,d))-(w=((this.pixelViewport.right-this.pixelViewport.left)/2+C)/k),x=b+w;else E=(this.pixelViewport.left-C)/k,x=(this.pixelViewport.right+C)/k;f=Ml(p,E),g=Ml(p,x)}f>h.from&&l(h.from,f,h,p),g<h.to&&l(g,h.to,h,p)}}}return s},e.prototype.gapSize=function(e,t,n,i){var r=Tl(i,n)-Tl(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r},e.prototype.updateLineGaps=function(e){var t=this;kl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ca.set(e.map((function(e){return e.draw(t.heightOracle.lineWrapping)}))))},e.prototype.computeVisibleRanges=function(){var e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));var t=[];Pr.spans(e,this.viewport.from,this.viewport.to,{span:function(e,n){t.push({from:e,to:n})},point:function(){}},20);var n=t.length!=this.visibleRanges.length||this.visibleRanges.some((function(e,n){return e.from!=t[n].from||e.to!=t[n].to}));return this.visibleRanges=t,n?4:0},e.prototype.lineBlockAt=function(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((function(t){return t.from<=e&&t.to>=e}))||Ll(this.heightMap.lineAt(e,cl.ByPos,this.heightOracle,0,0),this.scaler)},e.prototype.lineBlockAtHeight=function(e){return Ll(this.heightMap.lineAt(this.scaler.fromDOM(e),cl.ByHeight,this.heightOracle,0,0),this.scaler)},e.prototype.elementAtHeight=function(e){return Ll(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)},Object.defineProperty(e.prototype,"docHeight",{get:function(){return this.scaler.toDOM(this.heightMap.height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.docHeight+this.paddingTop+this.paddingBottom},enumerable:!1,configurable:!0}),e}(),xl=function(e,t){this.from=e,this.to=t};function Sl(e,t,n){var i=[],r=e,o=0;return Pr.spans(n,e,t,{span:function(){},point:function(e,t){e>r&&(i.push({from:r,to:e}),o+=e-r),r=t}},20),r<t&&(i.push({from:r,to:t}),o+=t-r),{total:o,ranges:i}}function Ml(e,t){var n=e.total,i=e.ranges;if(t<=0)return i[0].from;if(t>=1)return i[i.length-1].to;for(var r=Math.floor(n*t),o=0;;o++){var a=i[o],s=a.from,l=a.to-s;if(r<=l)return s+r;r-=l}}function Tl(e,t){for(var n=0,i=0,r=e.ranges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;if(t<=s){n+=t-a;break}n+=s-a}return n/e.total}var Dl={toDOM:function(e){return e},fromDOM:function(e){return e},scale:1},Al=function(){function e(e,t,n){var i=0,r=0,o=0;this.viewports=n.map((function(n){var r=n.from,o=n.to,a=t.lineAt(r,cl.ByPos,e,0,0).top,s=t.lineAt(o,cl.ByPos,e,0,0).bottom;return i+=s-a,{from:r,to:o,top:a,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(var a=0,s=this.viewports;a<s.length;a++){var l=s[a];l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}}return e.prototype.toDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}},e.prototype.fromDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}},e}();function Ll(e,t){if(1==t.scale)return e;var n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new ll(e.from,e.length,n,i-n,Array.isArray(e.type)?e.type.map((function(e){return Ll(e,t)})):e.type)}var Pl=Hi.define({combine:function(e){return e.join(" ")}}),Il=Hi.define({combine:function(e){return e.indexOf(!0)>-1}}),Ol=Yr.newName(),Fl=Yr.newName(),Bl=Yr.newName(),Nl={"&light":"."+Fl,"&dark":"."+Bl};function Rl(e,t,n){return new Yr(t,{finish:function(t){return/&/.test(t)?t.replace(/&\w*/,(function(t){if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t}})}var Hl=Rl("."+Ol,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nl),Vl=function(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="";var r=e.docView,o=r.impreciseHead,a=r.impreciseAnchor;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){var s=o||a?[]:function(e){var t=[];if(e.root.activeElement!=e.contentDOM)return t;var n=e.observer.selectionRange,i=n.anchorNode,r=n.anchorOffset,o=n.focusNode,a=n.focusOffset;return i&&(t.push(new gs(i,r)),o==i&&a==r||t.push(new gs(o,a))),t}(e),l=new ds(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=function(e,t){if(0==e.length)return null;var n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?Bi.single(n+t,i+t):null}(s,this.bounds.from)}else{var c=e.observer.selectionRange,u=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!co(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!co(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=Bi.single(h,u)}};function zl(e,t){var n,i=t.newSel,r=e.state.selection.main;if(t.bounds){var o=t.bounds,a=o.from,s=o.to,l=r.from,c=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||_o.android&&t.text.length<s-a)&&(l=r.to,c="end");var u=function(e,t,n,i){var r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;var a=e.length,s=t.length;for(;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;if("end"==i){n-=a+Math.max(0,o-Math.min(a,s))-o}if(a<o&&e.length<t.length){s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o}else if(s<o){a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o}return{from:o,toA:a,toB:s}}(e.state.doc.sliceString(a,s,ps),t.text,l-a,c);u&&(_o.chrome&&13==e.inputState.lastKeyCode&&u.toB==u.from+2&&"￿￿"==t.text.slice(u.from,u.toB)&&u.toB--,n={from:a+u.from,to:a+u.toA,insert:ii.of(t.text.slice(u.from,u.toB).split(ps))})}else i&&(!e.hasFocus&&e.state.facet(Ia)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:_o.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=Bi.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ii.of([" "])}),n){var h=e.state;if(_o.ios&&e.inputState.flushIOSKey(e))return!0;if(_o.android&&(n.from==r.from&&n.to==r.to&&1==n.insert.length&&2==n.insert.lines&&xo(e.contentDOM,"Enter",13)||n.from==r.from-1&&n.to==r.to&&0==n.insert.length&&xo(e.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&0==n.insert.length&&xo(e.contentDOM,"Delete",46)))return!0;var p=n.insert.toString();if(e.state.facet(Sa).some((function(t){return t(e,n.from,n.to,p)})))return!0;e.inputState.composing>=0&&e.inputState.composing++;var d=void 0;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&e.inputState.composing<0){var f=r.from<n.from?h.sliceDoc(r.from,n.from):"",g=r.to>n.to?h.sliceDoc(n.to,r.to):"";d=h.replaceSelection(e.state.toText(f+n.insert.sliceString(0,void 0,e.state.lineBreak)+g))}else{var m=h.changes(n),v=i&&i.main.to<=m.newLength?i.main:void 0;if(h.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){var y=e.state.sliceDoc(n.from,n.to),b=ys(e)||e.state.doc.lineAt(r.head),w=r.to-n.to,k=r.to-r.from;d=h.changeByRange((function(t){if(t.from==r.from&&t.to==r.to)return{changes:m,range:v||t.map(m)};var i=t.to-w,o=i-y.length;if(t.to-t.from!=k||e.state.sliceDoc(o,i)!=y||b&&t.to>=b.from&&t.from<=b.to)return{range:t};var a=h.changes({from:o,to:i,insert:n.insert}),s=t.to-r.to;return{changes:a,range:v?Bi.range(Math.max(0,v.anchor+s),Math.max(0,v.head+s)):t.map(a)}}))}else d={changes:m,selection:v&&h.selection.replaceRange(v)}}var C="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,C+=".compose",e.inputState.compositionFirstChange&&(C+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(d,{scrollIntoView:!0,userEvent:C}),!0}if(i&&!i.main.eq(r)){var E=!1;C="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(E=!0),C=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:E,userEvent:C}),!0}return!1}var ql={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ul=_o.ie&&_o.ie_version<=11,Wl=function(){function e(e){var t=this;this.view=e,this.active=!1,this.selectionRange=new wo,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((function(n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t.queue.push(o)}(_o.ie&&_o.ie_version<=11||_o.ios&&e.compositionStarted||_o.windows&&_o.chrome&&e.compositionStarted&&!e.composing)&&n.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type}))?t.flushSoon():t.flush()})),Ul&&(this.onCharData=function(e){t.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),t.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((function(){var e;(null===(e=t.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&t.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((function(){return t.view.requestMeasure()})),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(e){t.parentCheck<0&&(t.parentCheck=setTimeout(t.listenForScroll.bind(t),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=t.intersecting&&(t.intersecting=!t.intersecting,t.intersecting!=t.view.inView&&t.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(e){e.length>0&&e[e.length-1].intersectionRatio>0&&t.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}return e.prototype.onScrollChanged=function(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()},e.prototype.onScroll=function(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)},e.prototype.onResize=function(){var e=this;this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((function(){e.resizeTimeout=-1,e.view.requestMeasure()}),50))},e.prototype.onPrint=function(){var e=this;this.view.viewState.printing=!0,this.view.measure(),setTimeout((function(){e.view.viewState.printing=!1,e.view.requestMeasure()}),500)},e.prototype.updateGaps=function(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((function(t,n){return t!=e[n]})))){this.gapIntersection.disconnect();for(var t=0,n=e;t<n.length;t++){var i=n[t];this.gapIntersection.observe(i)}this.gaps=e}},e.prototype.onSelectionChange=function(e){var t=this.selectionChanged;if(this.readSelectionRange()&&!this.delayedAndroidKey){var n=this.view,i=this.selectionRange;if(n.state.facet(Ia)?n.root.activeElement==this.dom:uo(n.dom,i)){var r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(_o.ie&&_o.ie_version<=11||_o.android&&_o.chrome)&&!n.state.selection.main.empty&&i.focusNode&&po(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}}},e.prototype.readSelectionRange=function(){var e=this.view,t=_o.safari&&11==e.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){var t,n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!n)return null;var r=n.startContainer,o=n.startOffset,a=n.endContainer,s=n.endOffset,l=e.docView.domAtPos(e.state.selection.main.anchor);po(l.node,l.offset,a,s)&&(r=(t=[a,s,r,o])[0],o=t[1],a=t[2],s=t[3]);return{anchorNode:r,anchorOffset:o,focusNode:a,focusOffset:s}}(this.view)||lo(e.root);if(!t||this.selectionRange.eq(t))return!1;var n=uo(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){var n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(;;)if(i){if(1!=n.nodeType)return!1;var r=n.childNodes[i-1];"false"==r.contentEditable?i--:i=mo(n=r)}else{if(n==e)return!0;i=fo(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)},e.prototype.setSelectionRange=function(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1},e.prototype.clearSelectionRange=function(){this.selectionRange.set(null,0,null,0)},e.prototype.listenForScroll=function(){this.parentCheck=-1;for(var e=0,t=null,n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(var i=0,r=this.scrollTargets;i<r.length;i++){(n=r[i]).removeEventListener("scroll",this.onScroll)}for(var o=0,a=this.scrollTargets=t;o<a.length;o++){(n=a[o]).addEventListener("scroll",this.onScroll)}}},e.prototype.ignore=function(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}},e.prototype.start=function(){this.active||(this.observer.observe(this.dom,ql),Ul&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)},e.prototype.stop=function(){this.active&&(this.active=!1,this.observer.disconnect(),Ul&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))},e.prototype.clear=function(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1},e.prototype.delayAndroidKey=function(e,t){var n,i=this;if(!this.delayedAndroidKey){this.flushingAndroidKey=this.view.win.requestAnimationFrame((function(){var e=i.delayedAndroidKey;e&&(i.clearDelayedAndroidKey(),!i.flush()&&e.force&&xo(i.dom,e.key,e.keyCode))}))}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})},e.prototype.clearDelayedAndroidKey=function(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1},e.prototype.flushSoon=function(){var e=this;this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((function(){e.delayedFlush=-1,e.flush()})))},e.prototype.forceFlush=function(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()},e.prototype.pendingRecords=function(){for(var e=0,t=this.observer.takeRecords();e<t.length;e++){var n=t[e];this.queue.push(n)}return this.queue},e.prototype.processRecords=function(){var e=this.pendingRecords();e.length&&(this.queue=[]);for(var t=-1,n=-1,i=!1,r=0,o=e;r<o.length;r++){var a=o[r],s=this.readMutation(a);s&&(s.typeOver&&(i=!0),-1==t?(t=s.from,n=s.to):(t=Math.min(s.from,t),n=Math.max(s.to,n)))}return{from:t,to:n,typeOver:i}},e.prototype.readChange=function(){var e=this.processRecords(),t=e.from,n=e.to,i=e.typeOver,r=this.selectionChanged&&uo(this.dom,this.selectionRange);return t<0&&!r?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Vl(this.view,t,n,i))},e.prototype.flush=function(e){if(void 0===e&&(e=!0),this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();var t=this.readChange();if(!t)return!1;var n=this.view.state,i=zl(this.view,t);return this.view.state==n&&this.view.update([]),i},e.prototype.readMutation=function(e){var t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){var n=_l(t,e.previousSibling||e.target.previousSibling,-1),i=_l(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null},e.prototype.setWindow=function(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))},e.prototype.addWindowListeners=function(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)},e.prototype.removeWindowListeners=function(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)},e.prototype.destroy=function(){var e,t,n,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(var r=0,o=this.scrollTargets;r<o.length;r++){o[r].removeEventListener("scroll",this.onScroll)}this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)},e}();function _l(e,t,n){for(;t;){var i=Do.get(t);if(i&&i.parent==e)return i;var r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}var jl=function(){function e(e){void 0===e&&(e={});var t,n=this;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom),this._dispatch=e.dispatch||function(e){return n.update([e])},this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||(null===(t=e.parent)||void 0===t?void 0:t.ownerDocument)||document,this.viewState=new El(e.state||Sr.create(e)),this.plugins=this.state.facet(Fa).map((function(e){return new Na(e)}));for(var i=0,r=this.plugins;i<r.length;i++){r[i].update(this)}this.observer=new Wl(this),this.inputState=new Os(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new ms(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}return Object.defineProperty(e.prototype,"state",{get:function(){return this.viewState.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this.viewState.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleRanges",{get:function(){return this.viewState.visibleRanges},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inView",{get:function(){return this.viewState.inView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composing",{get:function(){return this.inputState.composing>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositionStarted",{get:function(){return this.inputState.composing>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"win",{get:function(){return this.dom.ownerDocument.defaultView||window},enumerable:!1,configurable:!0}),e.prototype.dispatch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._dispatch(1==t.length&&t[0]instanceof fr?t[0]:(e=this.state).update.apply(e,t))},e.prototype.update=function(e){var t=this;if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");for(var n,i=!1,r=!1,o=this.state,a=0,s=e;a<s.length;a++){if((m=s[a]).startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed)this.viewState.state=o;else{var l=this.hasFocus,c=0,u=null;e.some((function(e){return e.annotation(nl)}))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,(u=il(o,l))||(c=1));var h=this.observer.delayedAndroidKey,p=null;if(h?(this.observer.clearDelayedAndroidKey(),((p=this.observer.readChange())&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(Sr.phrases)!=this.state.facet(Sr.phrases))return this.setState(o);(n=_a.create(this,o,e)).flags|=c;var d=this.viewState.scrollTarget;try{this.updateState=2;for(var f=0,g=e;f<g.length;f++){var m=g[f];if(d&&(d=d.map(m.changes)),m.scrollIntoView){var v=m.state.selection.main;d=new Aa(v.empty?v:Bi.cursor(v.head,v.head>v.anchor?-1:1))}for(var y=0,b=m.effects;y<b.length;y++){var w=b[y];w.is(La)&&(d=w.value)}}this.viewState.update(n,d),this.bidiCache=Yl.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),i=this.docView.update(n),this.state.facet(Ua)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((function(e){return e.isUserEvent("select.pointer")})))}finally{this.updateState=0}if(n.startState.facet(Pl)!=n.state.facet(Pl)&&(this.viewState.mustMeasureContent=!0),(i||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(var k=0,C=this.state.facet(xa);k<C.length;k++){(0,C[k])(n)}(u||p)&&Promise.resolve().then((function(){u&&t.state==u.startState&&t.dispatch(u),p&&!zl(t,p)&&h.force&&xo(t.contentDOM,h.key,h.keyCode)}))}},e.prototype.setState=function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=e;else{this.updateState=2;var t=this.hasFocus;try{for(var n=0,i=this.plugins;n<i.length;n++){i[n].destroy(this)}this.viewState=new El(e),this.plugins=e.facet(Fa).map((function(e){return new Na(e)})),this.pluginMap.clear();for(var r=0,o=this.plugins;r<o.length;r++){o[r].update(this)}this.docView=new ms(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}},e.prototype.updatePlugins=function(e){var t=e.startState.facet(Fa),n=e.state.facet(Fa);if(t!=n){for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=t.indexOf(a);if(s<0)i.push(new Na(a));else{var l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(var c=0,u=this.plugins;c<u.length;c++){var h=u[c];h.mustUpdate!=e&&h.destroy(this)}this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(var p=0,d=this.plugins;p<d.length;p++){d[p].mustUpdate=e}for(var f=0;f<this.plugins.length;f++)this.plugins[f].update(this)},e.prototype.measure=function(e){var t,n=this;if(void 0===e&&(e=!0),!this.destroyed){this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();var i=null,r=this.scrollDOM,o=r.scrollHeight,a=r.scrollTop,s=a>o-r.clientHeight-4?o:a;try{for(var l=0;;l++){this.updateState=1;var c=this.viewport,u=this.viewState.lineBlockAtHeight(s),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var p=[];4&h||(t=[p,this.measureRequests],this.measureRequests=t[0],p=t[1]);var d=p.map((function(e){try{return e.read(n)}catch(e){return Pa(n.state,e),Kl}})),f=_a.create(this,this.state,[]),g=!1,m=!1;f.flags|=h,i?i.flags|=h:i=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),g=this.docView.update(f));for(var v=0;v<p.length;v++)if(d[v]!=Kl)try{var y=p[v];y.write&&y.write(d[v],this)}catch(e){Pa(this.state,e)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,m=!0;else{var b=this.viewState.lineBlockAt(u.from).top-u.top;(b>1||b<-1)&&(this.scrollDOM.scrollTop+=b,m=!0)}if(g&&this.docView.updateSelection(!0),this.viewport.from==c.from&&this.viewport.to==c.to&&!m&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(var w=0,k=this.state.facet(xa);w<k.length;w++){(0,k[w])(i)}}},Object.defineProperty(e.prototype,"themeClasses",{get:function(){return Ol+" "+(this.state.facet(Il)?Bl:Fl)+" "+this.state.facet(Pl)},enumerable:!1,configurable:!0}),e.prototype.updateAttrs=function(){var e=this,t=Xl(this,Ra,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ia)?"true":"false",class:"cm-content",style:"".concat(_o.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Xl(this,Ha,n);var i=this.observer.ignore((function(){var i=aa(e.contentDOM,e.contentAttrs,n),r=aa(e.dom,e.editorAttrs,t);return i||r}));return this.editorAttrs=t,this.contentAttrs=n,i},e.prototype.showAnnouncements=function(t){for(var n=!0,i=0,r=t;i<r.length;i++)for(var o=0,a=r[i].effects;o<a.length;o++){var s=a[o];if(s.is(e.announce))n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value}},e.prototype.mountStyles=function(){this.styleModules=this.state.facet(Ua),Yr.mount(this.root,this.styleModules.concat(Hl).reverse())},e.prototype.readMeasured=function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)},e.prototype.requestMeasure=function(e){var t=this;if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((function(){return t.measure()}))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key)return void(this.measureRequests[n]=e);this.measureRequests.push(e)}},e.prototype.plugin=function(e){var t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((function(t){return t.spec==e}))||null),t&&t.update(this).value},Object.defineProperty(e.prototype,"documentTop",{get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentPadding",{get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}},enumerable:!1,configurable:!0}),e.prototype.elementAtHeight=function(e){return this.readMeasured(),this.viewState.elementAtHeight(e)},e.prototype.lineBlockAtHeight=function(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)},Object.defineProperty(e.prototype,"viewportLineBlocks",{get:function(){return this.viewState.viewportLines},enumerable:!1,configurable:!0}),e.prototype.lineBlockAt=function(e){return this.viewState.lineBlockAt(e)},Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.viewState.contentHeight},enumerable:!1,configurable:!0}),e.prototype.moveByChar=function(e,t,n){return Is(this,e,Ps(this,e,t,n))},e.prototype.moveByGroup=function(e,t){var n=this;return Is(this,e,Ps(this,e,t,(function(t){return function(e,t,n){var i=e.state.charCategorizer(t),r=i(n);return function(e){var t=i(e);return r==Cr.Space&&(r=t),r==t}}(n,e.head,t)})))},e.prototype.moveToLineBoundary=function(e,t,n){return void 0===n&&(n=!0),function(e,t,n,i){var r=e.state.doc.lineAt(t.head),o=i&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(o){var a=e.dom.getBoundingClientRect(),s=e.textDirectionAt(r.from),l=e.posAtCoords({x:n==(s==ja.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(null!=l)return Bi.cursor(l,n?-1:1)}var c=ga.find(e.docView,t.head),u=c?n?c.posAtEnd:c.posAtStart:n?r.to:r.from;return Bi.cursor(u,n?-1:1)}(this,e,t,n)},e.prototype.moveVertically=function(e,t,n){return Is(this,e,function(e,t,n,i){var r=t.head,o=n?1:-1;if(r==(n?e.state.doc.length:0))return Bi.cursor(r,t.assoc);var a,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r),u=e.documentTop;if(c)null==s&&(s=c.left-l.left),a=o<0?c.top:c.bottom;else{var h=e.viewState.lineBlockAt(r);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-h.from))),a=(o<0?h.top:h.bottom)+u}for(var p=l.left+s,d=null!=i?i:e.defaultLineHeight>>1,f=0;;f+=10){var g=a+(d+f)*o,m=As(e,{x:p,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?m<r:m>r))return Bi.cursor(m,t.assoc,void 0,s)}}(this,e,t,n))},e.prototype.domAtPos=function(e){return this.docView.domAtPos(e)},e.prototype.posAtDOM=function(e,t){return void 0===t&&(t=0),this.docView.posFromDOM(e,t)},e.prototype.posAtCoords=function(e,t){return void 0===t&&(t=!0),this.readMeasured(),As(this,e,t)},e.prototype.coordsAtPos=function(e,t){void 0===t&&(t=1),this.readMeasured();var n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;var i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return vo(n,r[as.find(r,e-i.from,-1,t)].dir==ja.LTR==t>0)},Object.defineProperty(e.prototype,"defaultCharacterWidth",{get:function(){return this.viewState.heightOracle.charWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultLineHeight",{get:function(){return this.viewState.heightOracle.lineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textDirection",{get:function(){return this.viewState.defaultTextDirection},enumerable:!1,configurable:!0}),e.prototype.textDirectionAt=function(e){return!this.state.facet(Ta)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))},Object.defineProperty(e.prototype,"lineWrapping",{get:function(){return this.viewState.heightOracle.lineWrapping},enumerable:!1,configurable:!0}),e.prototype.bidiSpans=function(e){if(e.length>Gl)return cs(e.length);for(var t=this.textDirectionAt(e.from),n=0,i=this.bidiCache;n<i.length;n++){var r=i[n];if(r.from==e.from&&r.dir==t)return r.order}var o=ls(e.text,t);return this.bidiCache.push(new Yl(e.from,e.to,t,o)),o},Object.defineProperty(e.prototype,"hasFocus",{get:function(){var e;return(this.dom.ownerDocument.hasFocus()||_o.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var e=this;this.observer.ignore((function(){Co(e.contentDOM),e.docView.updateSelection()}))},e.prototype.setRoot=function(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())},e.prototype.destroy=function(){for(var e=0,t=this.plugins;e<t.length;e++){t[e].destroy(this)}this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0},e.scrollIntoView=function(e,t){return void 0===t&&(t={}),La.of(new Aa("number"==typeof e?Bi.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))},e.domEventHandlers=function(e){return Ba.define((function(){return{}}),{eventHandlers:e})},e.theme=function(e,t){var n=Yr.newName(),i=[Pl.of(n),Ua.of(Rl(".".concat(n),e))];return t&&t.dark&&i.push(Il.of(!0)),i},e.baseTheme=function(e){return $i.lowest(Ua.of(Rl("."+Ol,e,Nl)))},e.findFromDOM=function(e){var t,n=e.querySelector(".cm-content"),i=n&&Do.get(n)||Do.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null},e}();jl.styleModule=Ua,jl.inputHandler=Sa,jl.focusChangeEffect=Ma,jl.perLineTextDirection=Ta,jl.exceptionSink=Ea,jl.updateListener=xa,jl.editable=Ia,jl.mouseSelectionStyle=Ca,jl.dragMovesSelection=ka,jl.clickAddsSelectionRange=wa,jl.decorations=Va,jl.atomicRanges=za,jl.scrollMargins=qa,jl.darkTheme=Il,jl.contentAttributes=Ha,jl.editorAttributes=Ra,jl.lineWrapping=jl.contentAttributes.of({class:"cm-lineWrapping"}),jl.announce=dr.define();var Gl=4096,Kl={},Yl=function(){function e(e,t,n,i){this.from=e,this.to=t,this.dir=n,this.order=i}return e.update=function(t,n){if(n.empty)return t;for(var i=[],r=t.length?t[t.length-1].dir:ja.LTR,o=Math.max(0,t.length-10);o<t.length;o++){var a=t[o];a.dir!=r||n.touchesRange(a.from,a.to)||i.push(new e(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return i},e}();function Xl(e,t,n){for(var i=e.state.facet(t),r=i.length-1;r>=0;r--){var o=i[r],a="function"==typeof o?o(e):o;a&&ra(a,n)}return n}var $l=_o.mac?"mac":_o.windows?"win":_o.linux?"linux":"key";function Zl(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var Ql=$i.default(jl.domEventHandlers({keydown:function(e,t){return rc(tc(t.state),e,t,"editor")}})),Jl=Hi.define({enables:Ql}),ec=new WeakMap;function tc(e){var t=e.facet(Jl),n=ec.get(t);return n||ec.set(t,n=function(e,t){void 0===t&&(t=$l);for(var n=Object.create(null),i=Object.create(null),r=function(e,t){var n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=function(e,i,o,a){for(var s,l,c=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map((function(e){return function(e,t){var n,i,r,o,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;++l){var c=a[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);"mac"==t?o=!0:i=!0}}return n&&(s="Alt-"+s),i&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(e,t)})),h=function(t){var n=u.slice(0,t).join(" ");r(n,!0),c[n]||(c[n]={preventDefault:!0,run:[function(t){var i=ic={view:t,prefix:n,scope:e};return setTimeout((function(){ic==i&&(ic=null)}),4e3),!0}]})},p=1;p<u.length;p++)h(p);var d=u.join(" ");r(d,!1);var f=c[d]||(c[d]={preventDefault:!1,run:(null===(l=null===(s=c._any)||void 0===s?void 0:s.run)||void 0===l?void 0:l.slice())||[]});o&&f.run.push(o),a&&(f.preventDefault=!0)},a=0,s=e;a<s.length;a++){var l=s[a],c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(var u=0,h=c;u<h.length;u++){var p=h[u],d=n[p]||(n[p]=Object.create(null));for(var f in d._any||(d._any={preventDefault:!1,run:[]}),d)d[f].run.push(l.any)}var g=l[t]||l.key;if(g)for(var m=0,v=c;m<v.length;m++){o(p=v[m],g,l.run,l.preventDefault),l.shift&&o(p,"Shift-"+g,l.shift,l.preventDefault)}}return n}(t.reduce((function(e,t){return e.concat(t)}),[]))),n}function nc(e,t,n){return rc(tc(e.state),t,e,n)}var ic=null;function rc(e,t,n,i){var r=so(t),o=Ei(ki(r,0))==r.length&&" "!=r,a="",s=!1;ic&&ic.view==n&&ic.scope==i&&(a=ic.prefix+" ",(s=Ns.indexOf(t.keyCode)<0)&&(ic=null));var l,c,u=new Set,h=function(e){if(e){for(var i=0,r=e.run;i<r.length;i++){var o=r[i];if(!u.has(o)&&(u.add(o),o(n,t)))return!0}e.preventDefault&&(s=!0)}return!1},p=e[i];if(p){if(h(p[a+Zl(r,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(_o.windows&&t.ctrlKey&&t.altKey)&&(l=Zr[t.keyCode])&&l!=r){if(h(p[a+Zl(l,t,!0)]))return!0;if(t.shiftKey&&(c=Qr[t.keyCode])!=r&&c!=l&&h(p[a+Zl(c,t,!1)]))return!0}else if(o&&t.shiftKey&&h(p[a+Zl(r,t,!0)]))return!0;if(h(p._any))return!0}return s}var oc=function(){function e(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}return e.prototype.draw=function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e},e.prototype.update=function(e,t){return t.className==this.className&&(this.adjust(e),!0)},e.prototype.adjust=function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"},e.prototype.eq=function(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className},e.forRange=function(t,n,i){if(i.empty){var r=t.coordsAtPos(i.head,i.assoc||1);if(!r)return[];var o=ac(t);return[new e(n,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}return cc(t,n,i)},e}();function ac(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==ja.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function sc(e,t,n){var i=Bi.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(i,!0,!0).from),type:la.Text}}function lc(e,t){var n=e.lineBlockAt(t);if(Array.isArray(n.type))for(var i=0,r=n.type;i<r.length;i++){var o=r[i];if(o.to>t||o.to==t&&(o.to==n.to||o.type==la.Text))return o}return n}function cc(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];var i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),o=e.textDirection==ja.LTR,a=e.contentDOM,s=a.getBoundingClientRect(),l=ac(e),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=s.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=s.right-(u?parseInt(u.paddingRight):0),d=lc(e,i),f=lc(e,r),g=d.type==la.Text?d:null,m=f.type==la.Text?f:null;if(e.lineWrapping&&(g&&(g=sc(e,i,g)),m&&(m=sc(e,r,m))),g&&m&&g.from==m.from)return k(C(n.from,n.to,g));var v=g?C(n.from,null,g):E(d,!1),y=m?C(null,n.to,m):E(f,!0),b=[];return(g||d).to<(m||f).from-1?b.push(w(h,v.bottom,p,y.top)):v.bottom<y.top&&e.elementAtHeight((v.bottom+y.top)/2).type==la.Text&&(v.bottom=y.top=(v.bottom+y.top)/2),k(v).concat(b).concat(k(y));function w(e,n,i,r){return new oc(t,e-l.left,n-l.top-.01,i-e,r-n+.01)}function k(e){for(var t=e.top,n=e.bottom,i=e.horizontal,r=[],o=0;o<i.length;o+=2)r.push(w(i[o],t,i[o+1],n));return r}function C(t,n,i){var r=1e9,a=-1e9,s=[];function l(t,n,l,c,u){var d=e.coordsAtPos(t,t==i.to?-2:2),f=e.coordsAtPos(l,l==i.from?2:-2);d&&f&&(r=Math.min(d.top,f.top,r),a=Math.max(d.bottom,f.bottom,a),u==ja.LTR?s.push(o&&n?h:d.left,o&&c?p:f.right):s.push(!o&&c?h:f.left,!o&&n?p:d.right))}for(var c=null!=t?t:i.from,u=null!=n?n:i.to,d=0,f=e.visibleRanges;d<f.length;d++){var g=f[d];if(g.to>c&&g.from<u)for(var m=Math.max(g.from,c),v=Math.min(g.to,u);;){for(var y=e.state.doc.lineAt(m),b=0,w=e.bidiSpans(y);b<w.length;b++){var k=w[b],C=k.from+y.from,E=k.to+y.from;if(C>=v)break;E>m&&l(Math.max(C,m),null==t&&C<=c,Math.min(E,v),null==n&&E>=u,k.dir)}if((m=y.to+1)>=v)break}}return 0==s.length&&l(c,null==t,u,null==n,e.textDirection),{top:r,bottom:a,horizontal:s}}function E(e,t){var n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}var uc=function(){function e(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}return e.prototype.update=function(e){e.startState.facet(hc)!=e.state.facet(hc)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)},e.prototype.setOrder=function(e){for(var t=0,n=e.facet(hc);t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)},e.prototype.measure=function(){return this.layer.markers(this.view)},e.prototype.draw=function(e){var t=this;if(e.length!=this.drawn.length||e.some((function(e,n){return i=e,r=t.drawn[n],!(i.constructor==r.constructor&&i.eq(r));var i,r}))){for(var n=this.dom.firstChild,i=0,r=0,o=e;r<o.length;r++){var a=o[r];a.update&&n&&a.constructor&&this.drawn[i].constructor&&a.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(a.draw(),n)}for(;n;){var s=n.nextSibling;n.remove(),n=s}this.drawn=e}},e.prototype.destroy=function(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()},e}(),hc=Hi.define();function pc(e){return[Ba.define((function(t){return new uc(t,e)})),hc.of(e)]}var dc=!_o.ios,fc=Hi.define({combine:function(e){return Mr(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(e,t){return Math.min(e,t)},drawRangeCursor:function(e,t){return e||t}})}});function gc(e){return void 0===e&&(e={}),[fc.of(e),vc,bc,kc,Da.of(!0)]}function mc(e){return e.startState.facet(fc)!=e.state.facet(fc)}var vc=pc({above:!0,markers:function(e){for(var t=e.state,n=t.facet(fc),i=[],r=0,o=t.selection.ranges;r<o.length;r++){var a=o[r],s=a==t.selection.main;if(a.empty?!s||dc:n.drawRangeCursor)for(var l=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=a.empty?a:Bi.cursor(a.head,a.head>a.anchor?-1:1),u=0,h=oc.forRange(e,l,c);u<h.length;u++){var p=h[u];i.push(p)}}return i},update:function(e,t){e.transactions.some((function(e){return e.selection}))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");var n=mc(e);return n&&yc(e.state,t),e.docChanged||e.selectionSet||n},mount:function(e,t){yc(t.state,e)},class:"cm-cursorLayer"});function yc(e,t){t.style.animationDuration=e.facet(fc).cursorBlinkRate+"ms"}var bc=pc({above:!1,markers:function(e){return e.state.selection.ranges.map((function(t){return t.empty?[]:oc.forRange(e,"cm-selectionBackground",t)})).reduce((function(e,t){return e.concat(t)}))},update:function(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||mc(e)},class:"cm-selectionLayer"}),wc={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};dc&&(wc[".cm-line"].caretColor="transparent !important");var kc=$i.highest(jl.theme(wc)),Cc=dr.define({map:function(e,t){return null==e?null:t.mapPos(e)}}),Ec=_i.define({create:function(){return null},update:function(e,t){return null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((function(e,t){return t.is(Cc)?t.value:e}),e)}}),xc=Ba.fromClass(function(){function e(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}return e.prototype.update=function(e){var t,n=e.state.field(Ec);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Ec)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))},e.prototype.readPos=function(){var e=this.view.state.field(Ec),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;var n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}},e.prototype.drawCursor=function(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")},e.prototype.destroy=function(){this.cursor&&this.cursor.remove()},e.prototype.setDropPos=function(e){this.view.state.field(Ec)!=e&&this.view.dispatch({effects:Cc.of(e)})},e}(),{eventHandlers:{dragover:function(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave:function(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend:function(){this.setDropPos(null)},drop:function(){this.setDropPos(null)}}});function Sc(){return[Ec,xc]}function Mc(e,t,n,i,r){t.lastIndex=0;for(var o=e.iterRange(n,i),a=n,s=void 0;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}var Tc=function(){function e(e){var t=e.regexp,n=e.decoration,i=e.decorate,r=e.boundary,o=e.maxLength,a=void 0===o?1e3:o;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=function(e,t,n,r){return i(r,n,n+e[0].length,e,t)};else if("function"==typeof n)this.addMatch=function(e,t,i,r){var o=n(e,t,i);o&&r(i,i+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=function(e,t,i,r){return r(i,i+e[0].length,n)}}this.boundary=r,this.maxLength=a}return e.prototype.createDeco=function(e){for(var t=this,n=new Ir,i=n.add.bind(n),r=0,o=function(e,t){var n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=a.from,l=a.to;s=Math.max(e.state.doc.lineAt(s).from,s-t),l=Math.min(e.state.doc.lineAt(l).to,l+t),i.length&&i[i.length-1].to>=s?i[i.length-1].to=l:i.push({from:s,to:l})}return i}(e,this.maxLength);r<o.length;r++){var a=o[r],s=a.from,l=a.to;Mc(e.state.doc,this.regexp,s,l,(function(n,r){return t.addMatch(r,e,n,i)}))}return n.finish()},e.prototype.updateDeco=function(e,t){var n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((function(t,r,o,a){a>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(a,i))})),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t},e.prototype.updateRange=function(e,t,n,i){for(var r=this,o=function(o){var s=Math.max(o.from,n),l=Math.min(o.to,i);if(l>s){var c=e.state.doc.lineAt(s),u=c.to<l?e.state.doc.lineAt(l):c,h=Math.max(o.from,c.from),p=Math.min(o.to,u.to);if(a.boundary){for(;s>c.from;s--)if(a.boundary.test(c.text[s-1-c.from])){h=s;break}for(;l<u.to;l++)if(a.boundary.test(u.text[l-u.from])){p=l;break}}var d=[],f=void 0,g=function(e,t,n){return d.push(n.range(e,t))};if(c==u)for(a.regexp.lastIndex=h-c.from;(f=a.regexp.exec(c.text))&&f.index<p-c.from;)a.addMatch(f,e,f.index+c.from,g);else Mc(e.state.doc,a.regexp,h,p,(function(t,n){return r.addMatch(n,e,t,g)}));t=t.update({filterFrom:h,filterTo:p,filter:function(e,t){return e<h||t>p},add:d})}},a=this,s=0,l=e.visibleRanges;s<l.length;s++){o(l[s])}return t},e}(),Dc=null!=/x/.unicode?"gu":"g",Ac=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",Dc),Lc={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Pc=null;var Ic=Hi.define({combine:function(e){var t=Mr(e,{render:null,specialChars:Ac,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Pc&&"undefined"!=typeof document&&document.body){var t=document.body.style;Pc=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Pc||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Dc)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Dc)),t}});function Oc(e){return void 0===e&&(e={}),[Ic.of(e),Fc||(Fc=Ba.fromClass(function(){function e(e){this.view=e,this.decorations=ca.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Ic)),this.decorations=this.decorator.createDeco(e)}return e.prototype.makeDecorator=function(e){var t=this;return new Tc({regexp:e.specialChars,decoration:function(n,i,r){var o=i.state.doc,a=ki(n[0],0);if(9==a){var s=o.lineAt(r),l=i.state.tabSize,c=Wr(s.text,l,r-s.from);return ca.replace({widget:new Nc((l-c%l)*t.view.defaultCharacterWidth)})}return t.decorationCache[a]||(t.decorationCache[a]=ca.replace({widget:new Bc(e,a)}))},boundary:e.replaceTabs?void 0:/[^]/})},e.prototype.update=function(e){var t=e.state.facet(Ic);e.startState.facet(Ic)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)},e}(),{decorations:function(e){return e.decorations}}))]}var Fc=null;var Bc=function(e){function t(t,n){var i=e.call(this)||this;return i.options=t,i.code=n,i}return f(t,e),t.prototype.eq=function(e){return e.code==this.code},t.prototype.toDOM=function(e){var t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Lc[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;var r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r},t.prototype.ignoreEvent=function(){return!1},t}(sa),Nc=function(e){function t(t){var n=e.call(this)||this;return n.width=t,n}return f(t,e),t.prototype.eq=function(e){return e.width==this.width},t.prototype.toDOM=function(){var e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e},t.prototype.ignoreEvent=function(){return!1},t}(sa),Rc=Ba.fromClass(function(){function e(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}return e.prototype.update=function(e){var t=e.view,n=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;n!=this.height&&(this.height=n,this.attrs={style:"padding-bottom: ".concat(n,"px")})},e}());function Hc(){return[Rc,Ha.of((function(e){var t;return(null===(t=e.plugin(Rc))||void 0===t?void 0:t.attrs)||null}))]}function Vc(){return qc}var zc=ca.line({class:"cm-activeLine"}),qc=Ba.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){for(var t=-1,n=[],i=0,r=e.state.selection.ranges;i<r.length;i++){var o=r[i],a=e.lineBlockAt(o.head);a.from>t&&(n.push(zc.range(a.from)),t=a.from)}return ca.set(n)},e}(),{decorations:function(e){return e.decorations}}),Uc=function(e){function t(t){var n=e.call(this)||this;return n.content=t,n}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e},t.prototype.coordsAt=function(e){var t=e.firstChild?ho(e.firstChild):[];return t.length?vo(t[0],"rtl"!=window.getComputedStyle(e).direction):null},t.prototype.ignoreEvent=function(){return!1},t}(sa);function Wc(e){return Ba.fromClass(function(){function t(t){this.view=t,this.placeholder=ca.set([ca.widget({widget:new Uc(e),side:1}).range(0)])}return Object.defineProperty(t.prototype,"decorations",{get:function(){return this.view.state.doc.length?ca.none:this.placeholder},enumerable:!1,configurable:!0}),t}(),{decorations:function(e){return e.decorations}})}var _c=2e3;function jc(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(n),r=n-i.from,o=r>_c?-1:r==i.length?function(e,t){var n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Wr(i.text,e.state.tabSize,n-i.from);return{line:i.number,col:o,off:r}}function Gc(e,t){var n=jc(e,t),i=e.state.selection;return n?{update:function(e){if(e.docChanged){var t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(e.changes)}},get:function(t,r,o){var a=jc(e,t);if(!a)return i;var s=function(e,t,n){var i=Math.min(t.line,n.line),r=Math.max(t.line,n.line),o=[];if(t.off>_c||n.off>_c||t.col<0||n.col<0)for(var a=Math.min(t.off,n.off),s=Math.max(t.off,n.off),l=i;l<=r;l++)(h=e.doc.line(l)).length<=s&&o.push(Bi.range(h.from+a,h.to+s));else{var c=Math.min(t.col,n.col),u=Math.max(t.col,n.col);for(l=i;l<=r;l++){var h,p=_r((h=e.doc.line(l)).text,c,e.tabSize,!0);if(p<0)o.push(Bi.cursor(h.to));else{var d=_r(h.text,u,e.tabSize);o.push(Bi.range(h.from+p,h.from+d))}}}return o}(e.state,n,a);return s.length?o?Bi.create(s.concat(i.ranges)):Bi.create(s):i}}:null}function Kc(e){var t=(null==e?void 0:e.eventFilter)||function(e){return e.altKey&&0==e.button};return jl.mouseSelectionStyle.of((function(e,n){return t(n)?Gc(e,n):null}))}var Yc={Alt:[18,function(e){return e.altKey}],Control:[17,function(e){return e.ctrlKey}],Shift:[16,function(e){return e.shiftKey}],Meta:[91,function(e){return e.metaKey}]},Xc={style:"cursor: crosshair"};function $c(e){void 0===e&&(e={});var t=Yc[e.key||"Alt"],n=t[0],i=t[1],r=Ba.fromClass(function(){function e(e){this.view=e,this.isDown=!1}return e.prototype.set=function(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))},e}(),{eventHandlers:{keydown:function(e){this.set(e.keyCode==n||i(e))},keyup:function(e){e.keyCode!=n&&i(e)||this.set(!1)},mousemove:function(e){this.set(i(e))}}});return[r,jl.contentAttributes.of((function(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?Xc:null}))]}var Zc="-10000px",Qc=function(){function e(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((function(e){return e})),this.tooltipViews=this.tooltips.map(n)}return e.prototype.update=function(e){var t,n=e.state.facet(this.facet),i=n.filter((function(e){return e}));if(n===this.input){for(var r=0,o=this.tooltipViews;r<o.length;r++){(g=o[r]).update&&g.update(e)}return!1}for(var a=[],s=0;s<i.length;s++){var l=i[s],c=-1;if(l){for(var u=0;u<this.tooltips.length;u++){var h=this.tooltips[u];h&&h.create==l.create&&(c=u)}if(c<0)a[s]=this.createTooltipView(l);else{var p=a[s]=this.tooltipViews[c];p.update&&p.update(e)}}}for(var d=0,f=this.tooltipViews;d<f.length;d++){var g=f[d];a.indexOf(g)<0&&(g.dom.remove(),null===(t=g.destroy)||void 0===t||t.call(g))}return this.input=n,this.tooltips=i,this.tooltipViews=a,!0},e}();function Jc(e){return void 0===e&&(e={}),tu.of(e)}function eu(e){var t=e.win;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}var tu=Hi.define({combine:function(e){var t,n,i;return{position:_o.ios?"absolute":(null===(t=e.find((function(e){return e.position})))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((function(e){return e.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((function(e){return e.tooltipSpace})))||void 0===i?void 0:i.tooltipSpace)||eu}}}),nu=new WeakMap,iu=Ba.fromClass(function(){function e(e){var t=this;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;var n=e.state.facet(tu);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Qc(e,au,(function(e){return t.createTooltip(e)})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>t.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&t.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}return e.prototype.createContainer=function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom},e.prototype.observeIntersection=function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){var n=t[e];this.intersectionObserver.observe(n.dom)}}},e.prototype.measureSoon=function(){var e=this;this.measureTimeout<0&&(this.measureTimeout=setTimeout((function(){e.measureTimeout=-1,e.maybeMeasure()}),50))},e.prototype.update=function(e){e.transactions.length&&(this.lastTransaction=Date.now());var t=this.manager.update(e);t&&this.observeIntersection();var n=t||e.geometryChanged,i=e.state.facet(tu);if(i.position!=this.position){this.position=i.position;for(var r=0,o=this.manager.tooltipViews;r<o.length;r++){(l=o[r]).dom.style.position=this.position}n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(var a=0,s=this.manager.tooltipViews;a<s.length;a++){var l=s[a];this.container.appendChild(l.dom)}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()},e.prototype.createTooltip=function(e){var t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){var n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=Zc,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t},e.prototype.destroy=function(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(var n=0,i=this.manager.tooltipViews;n<i.length;n++){var r=i[n];r.dom.remove(),null===(e=r.destroy)||void 0===e||e.call(r)}null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)},e.prototype.readMeasure=function(){var e=this,t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((function(t,n){var i=e.manager.tooltipViews[n];return i.getCoords?i.getCoords(t.pos):e.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((function(e){return e.dom.getBoundingClientRect()})),space:this.view.state.facet(tu).tooltipSpace(this.view)}},e.prototype.writeMeasure=function(e){for(var t,n=e.editor,i=e.space,r=[],o=0;o<this.manager.tooltips.length;o++){var a=this.manager.tooltips[o],s=this.manager.tooltipViews[o],l=s.dom,c=e.pos[o],u=e.size[o];if(!c||c.bottom<=Math.max(n.top,i.top)||c.top>=Math.min(n.bottom,i.bottom)||c.right<Math.max(n.left,i.left)-.1||c.left>Math.min(n.right,i.right)+.1)l.style.top=Zc;else{var h=a.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,d=u.right-u.left,f=null!==(t=nu.get(s))&&void 0!==t?t:u.bottom-u.top,g=s.offset||ou,m=this.view.textDirection==ja.LTR,v=u.width>i.right-i.left?m?i.left:i.right-u.width:m?Math.min(c.left-(h?14:0)+g.x,i.right-d):Math.max(i.left,c.left-d+(h?14:0)-g.x),y=!!a.above;!a.strictSide&&(y?c.top-(u.bottom-u.top)-g.y<i.top:c.bottom+(u.bottom-u.top)+g.y>i.bottom)&&y==i.bottom-c.bottom>c.top-i.top&&(y=!y);var b=(y?c.top-i.top:i.bottom-c.bottom)-p;if(b<f&&!1!==s.resize){if(b<this.view.defaultLineHeight){l.style.top=Zc;continue}nu.set(s,f),l.style.height=(f=b)+"px"}else l.style.height&&(l.style.height="");var w=y?c.top-f-p-g.y:c.bottom+p+g.y,k=v+d;if(!0!==s.overlap)for(var C=0,E=r;C<E.length;C++){var x=E[C];x.left<k&&x.right>v&&x.top<w+f&&x.bottom>w&&(w=y?x.top-f-2-p:x.bottom+p+2)}"absolute"==this.position?(l.style.top=w-e.parent.top+"px",l.style.left=v-e.parent.left+"px"):(l.style.top=w+"px",l.style.left=v+"px"),h&&(h.style.left="".concat(c.left+(m?g.x:-g.x)-(v+14-7),"px")),!0!==s.overlap&&r.push({left:v,top:w,right:k,bottom:w+f}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),s.positioned&&s.positioned(e.space)}}},e.prototype.maybeMeasure=function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){t[e].dom.style.top=Zc}},e}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),ru=jl.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ou={x:0,y:0},au=Hi.define({enables:[iu,ru]}),su=Hi.define(),lu=function(){function e(e){var t=this;this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Qc(e,su,(function(e){return t.createHostedView(e)}))}return e.create=function(t){return new e(t)},e.prototype.createHostedView=function(e){var t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t},e.prototype.mount=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.mount&&i.mount(e)}this.mounted=!0},e.prototype.positioned=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.positioned&&i.positioned(e)}},e.prototype.update=function(e){this.manager.update(e)},e.prototype.destroy=function(){for(var e,t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];null===(e=i.destroy)||void 0===e||e.call(i)}},e}(),cu=au.compute([su],(function(e){var t=e.facet(su).filter((function(e){return e}));return 0===t.length?null:{pos:Math.min.apply(Math,t.map((function(e){return e.pos}))),end:Math.max.apply(Math,t.filter((function(e){return null!=e.end})).map((function(e){return e.end}))),create:lu.create,above:t[0].above,arrow:t.some((function(e){return e.arrow}))}})),uu=function(){function e(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}return e.prototype.update=function(){var e=this;this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((function(){return e.startHover()}),20))},Object.defineProperty(e.prototype,"active",{get:function(){return this.view.state.field(this.field)},enumerable:!1,configurable:!0}),e.prototype.checkHover=function(){if(this.hoverTimeout=-1,!this.active){var e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}},e.prototype.startHover=function(){var e=this;clearTimeout(this.restartTimeout);var t=this.lastMove,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null!=n){var i=this.view.coordsAtPos(n);if(!(null==i||t.y<i.top||t.y>i.bottom||t.x<i.left-this.view.defaultCharacterWidth||t.x>i.right+this.view.defaultCharacterWidth)){var r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((function(e){return e.from<=n&&e.to>=n})),o=r&&r.dir==ja.RTL?-1:1,a=this.source(this.view,n,t.x<i.left?-o:o);if(null==a?void 0:a.then){var s=this.pending={pos:n};a.then((function(t){e.pending==s&&(e.pending=null,t&&e.view.dispatch({effects:e.setHover.of(t)}))}),(function(t){return Pa(e.view.state,t,"hover tooltip")}))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}}},e.prototype.mousemove=function(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var n=this.active;if(n&&!hu(this.lastMove.target)||this.pending){var i=(n||this.pending).pos,r=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:i;(i==r?this.view.posAtCoords(this.lastMove)==i:function(e,t,n,i,r,o){var a=document.createRange(),s=e.domAtPos(t),l=e.domAtPos(n);a.setEnd(l.node,l.offset),a.setStart(s.node,s.offset);var c=a.getClientRects();a.detach();for(var u=0;u<c.length;u++){var h=c[u];if(Math.max(h.top-r,r-h.bottom,h.left-i,i-h.right)<=o)return!0}return!1}(this.view,i,r,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}},e.prototype.mouseleave=function(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!hu(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})},e.prototype.destroy=function(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)},e}();function hu(e){for(var t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function pu(e,t){void 0===t&&(t={});var n=dr.define(),i=_i.define({create:function(){return null},update:function(e,i){if(e&&(t.hideOnChange&&(i.docChanged||i.selection)||t.hideOn&&t.hideOn(i,e)))return null;if(e&&i.docChanged){var r=i.changes.mapPos(e.pos,-1,Si.TrackDel);if(null==r)return null;var o=Object.assign(Object.create(null),e);o.pos=r,null!=e.end&&(o.end=i.changes.mapPos(e.end)),e=o}for(var a=0,s=i.effects;a<s.length;a++){var l=s[a];l.is(n)&&(e=l.value),l.is(gu)&&(e=null)}return e},provide:function(e){return su.from(e)}});return[i,Ba.define((function(r){return new uu(r,e,i,n,t.hoverTime||300)})),cu]}function du(e,t){var n=e.plugin(iu);if(!n)return null;var i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}function fu(e){return e.facet(su).some((function(e){return e}))}var gu=dr.define(),mu=gu.of(null);function vu(e){var t;null===(t=e.plugin(iu))||void 0===t||t.maybeMeasure()}var yu=Hi.define({combine:function(e){for(var t,n,i=0,r=e;i<r.length;i++){var o=r[i];t=t||o.topContainer,n=n||o.bottomContainer}return{topContainer:t,bottomContainer:n}}});function bu(e){return e?[yu.of(e)]:[]}function wu(e,t){var n=e.plugin(ku),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}var ku=Ba.fromClass(function(){function e(e){this.input=e.state.facet(xu),this.specs=this.input.filter((function(e){return e})),this.panels=this.specs.map((function(t){return t(e)}));var t=e.state.facet(yu);this.top=new Cu(e,!0,t.topContainer),this.bottom=new Cu(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((function(e){return e.top}))),this.bottom.sync(this.panels.filter((function(e){return!e.top})));for(var n=0,i=this.panels;n<i.length;n++){var r=i[n];r.dom.classList.add("cm-panel"),r.mount&&r.mount()}}return e.prototype.update=function(e){var t=e.state.facet(yu);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Cu(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Cu(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=e.state.facet(xu);if(n!=this.input){for(var i=n.filter((function(e){return e})),r=[],o=[],a=[],s=[],l=0,c=i;l<c.length;l++){var u=c[l],h=this.specs.indexOf(u),p=void 0;h<0?(p=u(e.view),s.push(p)):(p=this.panels[h]).update&&p.update(e),r.push(p),(p.top?o:a).push(p)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(a);for(var d=0,f=s;d<f.length;d++){(v=f[d]).dom.classList.add("cm-panel"),v.mount&&v.mount()}}else for(var g=0,m=this.panels;g<m.length;g++){var v;(v=m[g]).update&&v.update(e)}},e.prototype.destroy=function(){this.top.sync([]),this.bottom.sync([])},e}(),{provide:function(e){return jl.scrollMargins.of((function(t){var n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))}}),Cu=function(){function e(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return e.prototype.sync=function(e){for(var t=0,n=this.panels;t<n.length;t++){var i=n[t];i.destroy&&e.indexOf(i)<0&&i.destroy()}this.panels=e,this.syncDOM()},e.prototype.syncDOM=function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}for(var t=this.dom.firstChild,n=0,i=this.panels;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.dom){for(;t!=r.dom;)t=Eu(t);t=t.nextSibling}else this.dom.insertBefore(r.dom,t)}for(;t;)t=Eu(t)}else this.dom&&(this.dom.remove(),this.dom=void 0)},e.prototype.scrollMargin=function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)},e.prototype.syncClasses=function(){if(this.container&&this.classes!=this.view.themeClasses){for(var e=0,t=this.classes.split(" ");e<t.length;e++){(r=t[e])&&this.container.classList.remove(r)}for(var n=0,i=(this.classes=this.view.themeClasses).split(" ");n<i.length;n++){var r;(r=i[n])&&this.container.classList.add(r)}}},e}();function Eu(e){var t=e.nextSibling;return e.remove(),t}var xu=Hi.define({enables:ku}),Su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.prototype.eq=function(e){return!1},t.prototype.destroy=function(e){},t}(Tr);Su.prototype.elementClass="",Su.prototype.toDOM=void 0,Su.prototype.mapMode=Si.TrackBefore,Su.prototype.startSide=Su.prototype.endSide=-1,Su.prototype.point=!0;var Mu=Hi.define(),Tu={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Pr.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Du=Hi.define();function Au(e){return[Pu(),Du.of(Object.assign(Object.assign({},Tu),e))]}var Lu=Hi.define({combine:function(e){return e.some((function(e){return e}))}});function Pu(e){var t=[Iu];return e&&!1===e.fixed&&t.push(Lu.of(!0)),t}var Iu=Ba.fromClass(function(){function e(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Du).map((function(t){return new Ru(e,t)}));for(var t=0,n=this.gutters;t<n.length;t++){var i=n[t];this.dom.appendChild(i.dom)}this.fixed=!e.state.facet(Lu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.contentDOM.parentNode.insertBefore(this.dom,e.contentDOM)}return e.prototype.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Lu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},e.prototype.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();for(var i=Pr.iter(this.view.state.facet(Mu),this.view.viewport.from),r=[],o=this.gutters.map((function(e){return new Nu(e,t.view.viewport,-t.view.documentPadding.top)})),a=-1,s=0,l=this.view.viewportLineBlocks;s<l.length;s++){var c=l[s],u=this.view.state.doc.lineAt(c.from).number,h=void 0;if(Array.isArray(c.type))for(var p=0,d=c.type;p<d.length;p++){var f=d[p];if(f.type==la.Text){h=f;break}}else h=c.type==la.Text||a<u&&c.height>1?c:void 0;if(a=u,h){r.length&&(r=[]),Fu(i,r,c.from);for(var g=0,m=o;g<m.length;g++){m[g].line(this.view,h,r)}}}for(var v=0,y=o;v<y.length;v++){y[v].finish()}e&&n.parentNode.insertBefore(this.dom,n)},e.prototype.updateGutters=function(e){var t=e.startState.facet(Du),n=e.state.facet(Du),i=e.docChanged||e.heightChanged||e.viewportChanged||!Pr.eq(e.startState.facet(Mu),e.state.facet(Mu),e.view.viewport.from,e.view.viewport.to);if(t==n)for(var r=0,o=this.gutters;r<o.length;r++){o[r].update(e)&&(i=!0)}else{i=!0;for(var a=[],s=0,l=n;s<l.length;s++){var c=l[s],u=t.indexOf(c);u<0?a.push(new Ru(this.view,c)):(this.gutters[u].update(e),a.push(this.gutters[u]))}for(var h=0,p=this.gutters;h<p.length;h++){(g=p[h]).dom.remove(),a.indexOf(g)<0&&g.destroy()}for(var d=0,f=a;d<f.length;d++){var g=f[d];this.dom.appendChild(g.dom)}this.gutters=a}return i},e.prototype.destroy=function(){for(var e=0,t=this.gutters;e<t.length;e++){t[e].destroy()}this.dom.remove()},e}(),{provide:function(e){return jl.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==ja.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function Ou(e){return Array.isArray(e)?e:[e]}function Fu(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}function Bu(e){if(e instanceof HTMLElement&&e.classList.contains("cm-line"))return e;if(e.nodeType===Node.TEXT_NODE&&"​"!==e.textContent)return e.parentNode;if(e.firstChild)return Bu(e.firstChild);if(e.nextSibling)return Bu(e.nextSibling);for(var t=e.parentNode;t;){if(t instanceof Element&&t.classList.contains("cm-line"))return t;if(t.nextSibling)return Bu(t.nextSibling);t=t.parentNode}return null}var Nu=function(){function e(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Pr.iter(e.markers,t.from)}return e.prototype.line=function(e,t,n){var i=[];Fu(this.cursor,i,t.from),n.length&&(i=i.concat(n));var r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);var o=this.gutter;if(0!=i.length||o.config.renderEmptyElements){var a,s=t.top-this.height;if(this.i==o.elements.length){var l=new Hu(e,t.height,s,i);o.elements.push(l),o.dom.appendChild(l.dom),a=l.dom}else{var c=o.elements[this.i];c.update(e,t.height,s,i),a=c.dom}e.requestMeasure({read:function(e){var n="",i="";try{for(var r=e.domAtPos(t.from),o=r.node.childNodes[r.offset]||r.node,a=o;a.parentElement&&a.parentElement!==e.contentDOM;)a=a.parentElement;n=getComputedStyle(a).paddingTop;var s=Bu(o);"0px"===(i=getComputedStyle(s).lineHeight)&&(i="")}catch(e){}return{paddingTop:n,lineHeight:i}},write:function(e){var t=e.paddingTop,n=e.lineHeight;a.style.paddingTop=t,a.style.lineHeight=n}}),this.height=t.bottom,this.i++}},e.prototype.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),Ru=function(){function e(e,t){var n=this;this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var i=function(i){r.dom.addEventListener(i,(function(r){var o,a=r.target;if(a!=n.dom&&n.dom.contains(a)){for(;a.parentNode!=n.dom;)a=a.parentNode;var s=a.getBoundingClientRect();o=(s.top+s.bottom)/2}else o=r.clientY;var l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()}))},r=this;for(var o in t.domEventHandlers)i(o);this.markers=Ou(t.markers(e)),t.initialSpacer&&(this.spacer=new Hu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return e.prototype.update=function(e){var t=this.markers;if(this.markers=Ou(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var i=e.view.viewport;return!Pr.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},e.prototype.destroy=function(){for(var e=0,t=this.elements;e<t.length;e++){t[e].destroy()}},e}(),Hu=function(){function e(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}return e.prototype.update=function(e,t,n,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)},e.prototype.setMarkers=function(e,t){for(var n="cm-gutterElement",i=this.dom.firstChild,r=0,o=0;;){var a=o,s=r<t.length?t[r++]:null,l=!1;if(s){var c=s.elementClass;c&&(n+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(s)){a=u,l=!0;break}}else a=this.markers.length;for(;o<a;){var h=this.markers[o++];if(h.toDOM){h.destroy(i);var p=i.nextSibling;i.remove(),i=p}}if(!s)break;s.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(s.toDOM(e),i)),l&&o++}this.dom.className=n,this.markers=t},e.prototype.destroy=function(){this.setMarkers(null,[])},e}();var Vu=Hi.define(),zu=Hi.define({combine:function(e){return Mr(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e),i=function(e){var i=n[e],r=t[e];n[e]=i?function(e,t,n){return i(e,t,n)||r(e,t,n)}:r};for(var r in t)i(r);return n}})}}),qu=function(e){function t(t){var n=e.call(this)||this;return n.number=t,n}return f(t,e),t.prototype.eq=function(e){return this.number==e.number},t.prototype.toDOM=function(){return document.createTextNode(this.number)},t}(Su);function Uu(e,t){return e.state.facet(zu).formatNumber(t,e.state)}var Wu=Du.compute([zu],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(Vu)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new qu(Uu(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(zu)!=e.state.facet(zu)},initialSpacer:function(e){return new qu(Uu(e,ju(e.state.doc.lines)))},updateSpacer:function(e,t){var n=Uu(t.view,ju(t.view.state.doc.lines));return n==e.number?e:new qu(n)},domEventHandlers:e.facet(zu).domEventHandlers}}));function _u(e){return void 0===e&&(e={}),[zu.of(e),Pu(),Wu]}function ju(e){for(var t=9;t<e;)t=10*t+9;return t}var Gu=new(function(e){function t(){var t=e.apply(this,arguments)||this;return t.elementClass="cm-activeLineGutter",t}return f(t,e),t}(Su)),Ku=Mu.compute(["selection"],(function(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.head).from;a>n&&(n=a,t.push(Gu.range(a)))}return Pr.of(t)}));function Yu(){return Ku}var Xu=new Map;function $u(e){return Ba.define((function(t){return{decorations:e.createDeco(t),update:function(t){this.decorations=e.updateDeco(t,this.decorations)}}}),{decorations:function(e){return e.decorations}})}var Zu=$u(new Tc({regexp:/\t| +/g,decoration:function(e){return function(e){var t=Xu.get(e);return t||Xu.set(e,t=ca.mark({attributes:"\t"===e?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":e.replace(/ /g,"·")}})),t}(e[0])},boundary:/\S/}));function Qu(){return Zu}var Ju=$u(new Tc({regexp:/\s+$/g,decoration:ca.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function eh(){return Ju}var th={HeightMap:hl,HeightOracle:al,MeasuredHeights:sl,QueryType:cl,ChangedRange:Wa,computeOrder:ls,moveVisually:hs},nh=0,ih=function(){function e(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=nh++}return e.define=function(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");var n=new e([],null,[]);if(n.set.push(n),t)for(var i=0,r=t.set;i<r.length;i++){var o=r[i];n.set.push(o)}return n},e.defineModifier=function(){var e=new oh;return function(t){return t.modified.indexOf(e)>-1?t:oh.get(t.base||t,t.modified.concat(e).sort((function(e,t){return e.id-t.id})))}},e}(),rh=0,oh=function(){function e(){this.instances=[],this.id=rh++}return e.get=function(t,n){if(!n.length)return t;var i=n[0].instances.find((function(e){return e.base==t&&(i=n,r=e.modified,i.length==r.length&&i.every((function(e,t){return e==r[t]})));var i,r}));if(i)return i;for(var r=[],o=new ih(r,t,n),a=0,s=n;a<s.length;a++){s[a].instances.push(o)}for(var l=ah(n),c=0,u=t.set;c<u.length;c++)for(var h=u[c],p=0,d=l;p<d.length;p++){var f=d[p];r.push(e.get(h,f))}return o},e}();function ah(e){for(var t=[e],n=0;n<e.length;n++)for(var i=0,r=ah(e.slice(0,n).concat(e.slice(n+1)));i<r.length;i++){var o=r[i];t.push(o)}return t}function sh(e){var t=Object.create(null);for(var n in e){var i=e[n];Array.isArray(i)||(i=[i]);for(var r=0,o=n.split(" ");r<o.length;r++){var a=o[r];if(a){for(var s=[],l=2,c=a,u=0;;){if("..."==c&&u>0&&u+3==a.length){l=1;break}var h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!h)throw new RangeError("Invalid path: "+a);if(s.push("*"==h[0]?"":'"'==h[0][0]?JSON.parse(h[0]):h[0]),(u+=h[0].length)==a.length)break;var p=a[u++];if(u==a.length&&"!"==p){l=0;break}if("/"!=p)throw new RangeError("Invalid path: "+a);c=a.slice(u)}var d=s.length-1,f=s[d];if(!f)throw new RangeError("Invalid path: "+a);var g=new ch(i,l,d>0?s.slice(0,d):null);t[f]=g.sort(t[f])}}}return lh.add(t)}var lh=new mn,ch=function(){function e(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}return e.prototype.sort=function(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)},Object.defineProperty(e.prototype,"depth",{get:function(){return this.context?this.context.length:0},enumerable:!1,configurable:!0}),e}();function uh(e,t){for(var n=Object.create(null),i=0,r=e;i<r.length;i++){var o=r[i];if(Array.isArray(o.tag))for(var a=0,s=o.tag;a<s.length;a++){var l=s[a];n[l.id]=o.class}else n[o.tag.id]=o.class}var c=t||{},u=c.scope,h=c.all,p=void 0===h?null:h;return{style:function(e){for(var t=p,i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].set;o<a.length;o++){var s=a[o],l=n[s.id];if(l){t=t?t+" "+l:l;break}}return t},scope:u}}function hh(e,t){for(var n=null,i=0,r=e;i<r.length;i++){var o=r[i].style(t);o&&(n=n?n+" "+o:o)}return n}function ph(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);var o=new fh(i,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),i,r,"",o.highlighters),o.flush(r)}var dh,fh=function(){function e(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}return e.prototype.startSpan=function(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)},e.prototype.flush=function(e){e>this.at&&this.class&&this.span(this.at,e,this.class)},e.prototype.highlightRange=function(e,t,n,i,r){var o=e.type,a=e.from,s=e.to;if(!(a>=n||s<=t)){o.isTop&&(r=this.highlighters.filter((function(e){return!e.scope||e.scope(o)})));for(var l=i,c=o.prop(lh),u=!1;c;){if(!c.context||e.matchContext(c.context)){var h=hh(r,c.tags);h&&(l&&(l+=" "),l+=h,1==c.mode?i+=(i?" ":"")+h:0==c.mode&&(u=!0));break}c=c.next}if(this.startSpan(e.from,l),!u){var p=e.tree&&e.tree.prop(mn.mounted);if(p&&p.overlay){for(var d=e.node.enter(p.overlay[0].from+a,1),f=this.highlighters.filter((function(e){return!e.scope||e.scope(p.tree.type)})),g=e.firstChild(),m=0,v=a;;m++){var y=m<p.overlay.length?p.overlay[m]:null,b=y?y.from+a:s,w=Math.max(t,v),k=Math.min(n,b);if(w<k&&g)for(;e.from<k&&(this.highlightRange(e,w,k,i,r),this.startSpan(Math.min(n,e.to),l),!(e.to>=b)&&e.nextSibling()););if(!y||b>n)break;(v=y.to+a)>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+a),Math.min(n,v),i,f),this.startSpan(v,l))}g&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}},e}(),gh=ih.define,mh=gh(),vh=gh(),yh=gh(vh),bh=gh(vh),wh=gh(),kh=gh(wh),Ch=gh(wh),Eh=gh(),xh=gh(Eh),Sh=gh(),Mh=gh(),Th=gh(),Dh=gh(Th),Ah=gh(),Lh={comment:mh,lineComment:gh(mh),blockComment:gh(mh),docComment:gh(mh),name:vh,variableName:gh(vh),typeName:yh,tagName:gh(yh),propertyName:bh,attributeName:gh(bh),className:gh(vh),labelName:gh(vh),namespace:gh(vh),macroName:gh(vh),literal:wh,string:kh,docString:gh(kh),character:gh(kh),attributeValue:gh(kh),number:Ch,integer:gh(Ch),float:gh(Ch),bool:gh(wh),regexp:gh(wh),escape:gh(wh),color:gh(wh),url:gh(wh),keyword:Sh,self:gh(Sh),null:gh(Sh),atom:gh(Sh),unit:gh(Sh),modifier:gh(Sh),operatorKeyword:gh(Sh),controlKeyword:gh(Sh),definitionKeyword:gh(Sh),moduleKeyword:gh(Sh),operator:Mh,derefOperator:gh(Mh),arithmeticOperator:gh(Mh),logicOperator:gh(Mh),bitwiseOperator:gh(Mh),compareOperator:gh(Mh),updateOperator:gh(Mh),definitionOperator:gh(Mh),typeOperator:gh(Mh),controlOperator:gh(Mh),punctuation:Th,separator:gh(Th),bracket:Dh,angleBracket:gh(Dh),squareBracket:gh(Dh),paren:gh(Dh),brace:gh(Dh),content:Eh,heading:xh,heading1:gh(xh),heading2:gh(xh),heading3:gh(xh),heading4:gh(xh),heading5:gh(xh),heading6:gh(xh),contentSeparator:gh(Eh),list:gh(Eh),quote:gh(Eh),emphasis:gh(Eh),strong:gh(Eh),link:gh(Eh),monospace:gh(Eh),strikethrough:gh(Eh),inserted:gh(),deleted:gh(),changed:gh(),invalid:gh(),meta:Ah,documentMeta:gh(Ah),annotation:gh(Ah),processingInstruction:gh(Ah),definition:ih.defineModifier(),constant:ih.defineModifier(),function:ih.defineModifier(),standard:ih.defineModifier(),local:ih.defineModifier(),special:ih.defineModifier()},Ph=uh([{tag:Lh.link,class:"tok-link"},{tag:Lh.heading,class:"tok-heading"},{tag:Lh.emphasis,class:"tok-emphasis"},{tag:Lh.strong,class:"tok-strong"},{tag:Lh.keyword,class:"tok-keyword"},{tag:Lh.atom,class:"tok-atom"},{tag:Lh.bool,class:"tok-bool"},{tag:Lh.url,class:"tok-url"},{tag:Lh.labelName,class:"tok-labelName"},{tag:Lh.inserted,class:"tok-inserted"},{tag:Lh.deleted,class:"tok-deleted"},{tag:Lh.literal,class:"tok-literal"},{tag:Lh.string,class:"tok-string"},{tag:Lh.number,class:"tok-number"},{tag:[Lh.regexp,Lh.escape,Lh.special(Lh.string)],class:"tok-string2"},{tag:Lh.variableName,class:"tok-variableName"},{tag:Lh.local(Lh.variableName),class:"tok-variableName tok-local"},{tag:Lh.definition(Lh.variableName),class:"tok-variableName tok-definition"},{tag:Lh.special(Lh.variableName),class:"tok-variableName2"},{tag:Lh.definition(Lh.propertyName),class:"tok-propertyName tok-definition"},{tag:Lh.typeName,class:"tok-typeName"},{tag:Lh.namespace,class:"tok-namespace"},{tag:Lh.className,class:"tok-className"},{tag:Lh.macroName,class:"tok-macroName"},{tag:Lh.propertyName,class:"tok-propertyName"},{tag:Lh.operator,class:"tok-operator"},{tag:Lh.comment,class:"tok-comment"},{tag:Lh.meta,class:"tok-meta"},{tag:Lh.invalid,class:"tok-invalid"},{tag:Lh.punctuation,class:"tok-punctuation"}]),Ih=new mn;function Oh(e){return Hi.define({combine:e?function(t){return t.concat(e)}:void 0})}var Fh=new mn,Bh=function(){function e(e,t,n,i){void 0===n&&(n=[]),void 0===i&&(i=""),this.data=e,this.name=i,Sr.prototype.hasOwnProperty("tree")||Object.defineProperty(Sr.prototype,"tree",{get:function(){return Hh(this)}}),this.parser=t,this.extension=[Zh.of(this),Sr.languageData.of((function(e,t,n){var i=Nh(e,t,n),r=i.type.prop(Ih);if(!r)return[];var o=e.facet(r),a=i.type.prop(Fh);if(a)for(var s=i.resolve(t-i.from,n),l=0,c=a;l<c.length;l++){var u=c[l];if(u.test(s,e)){var h=e.facet(u.facet);return"replace"==u.type?h:h.concat(o)}}return o}))].concat(n)}return e.prototype.isActiveAt=function(e,t,n){return void 0===n&&(n=-1),Nh(e,t,n).type.prop(Ih)==this.data},e.prototype.findRegions=function(e){var t=this,n=e.facet(Zh);if((null==n?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];var i=[],r=function(e,n){if(e.prop(Ih)!=t.data){var o=e.prop(mn.mounted);if(o){if(o.tree.prop(Ih)==t.data){if(o.overlay)for(var a=0,s=o.overlay;a<s.length;a++){var l=s[a];i.push({from:l.from+n,to:l.to+n})}else i.push({from:n,to:n+e.length});return}if(o.overlay){var c=i.length;if(r(o.tree,o.overlay[0].from+n),i.length>c)return}}for(var u=0;u<e.children.length;u++){var h=e.children[u];h instanceof xn&&r(h,e.positions[u]+n)}}else i.push({from:n,to:n+e.length})};return r(Hh(e),0),i},Object.defineProperty(e.prototype,"allowsNesting",{get:function(){return!0},enumerable:!1,configurable:!0}),e}();function Nh(e,t,n){var i=e.facet(Zh),r=Hh(e).topNode;if(!i||i.allowsNesting)for(var o=r;o;o=o.enter(t,n,wn.ExcludeBuffers))o.type.isTop&&(r=o);return r}Bh.setState=dr.define();var Rh=function(e){function t(t,n,i){var r=e.call(this,t,n,[],i)||this;return r.parser=n,r}return f(t,e),t.define=function(e){var n=Oh(e.languageData);return new t(n,e.parser.configure({props:[Ih.add((function(e){return e.isTop?n:void 0}))]}),e.name)},t.prototype.configure=function(e,n){return new t(this.data,this.parser.configure(e),n||this.name)},Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return this.parser.hasWrappers()},enumerable:!1,configurable:!0}),t}(Bh);function Hh(e){var t=e.field(Bh.state,!1);return t?t.tree:xn.empty}function Vh(e,t,n){var i;void 0===n&&(n=50);var r=null===(i=e.field(Bh.state,!1))||void 0===i?void 0:i.context;if(!r)return null;var o=r.viewport;r.updateViewport({from:0,to:t});var a=r.isDone(t)||r.work(n,t)?r.tree:null;return r.updateViewport(o),a}function zh(e,t){var n;return void 0===t&&(t=e.doc.length),(null===(n=e.field(Bh.state,!1))||void 0===n?void 0:n.context.isDone(t))||!1}function qh(e,t,n){void 0===t&&(t=e.viewport.to),void 0===n&&(n=100);var i=Vh(e.state,t,n);return i!=Hh(e.state)&&e.dispatch({}),!!i}function Uh(e){var t;return(null===(t=e.plugin($h))||void 0===t?void 0:t.isWorking())||!1}var Wh=function(){function e(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}return Object.defineProperty(e.prototype,"length",{get:function(){return this.doc.length},enumerable:!1,configurable:!0}),e.prototype.syncTo=function(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length},e.prototype.chunk=function(e){return this.syncTo(e),this.string},Object.defineProperty(e.prototype,"lineChunks",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.read=function(e,t){var n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)},e}(),_h=null,jh=function(){function e(e,t,n,i,r,o,a,s){void 0===n&&(n=[]),this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}return e.create=function(t,n,i){return new e(t,n,[],xn.empty,0,i,[],null)},e.prototype.startParse=function(){return this.parser.startParse(new Wh(this.state.doc),this.fragments)},e.prototype.work=function(e,t){var n=this;return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=xn.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((function(){var i;if("number"==typeof e){var r=Date.now()+e;e=function(){return Date.now()>r}}for(n.parse||(n.parse=n.startParse()),null!=t&&(null==n.parse.stoppedAt||n.parse.stoppedAt>t)&&t<n.state.doc.length&&n.parse.stopAt(t);;){var o=n.parse.advance();if(o){if(n.fragments=n.withoutTempSkipped(Un.addTree(o,n.fragments,null!=n.parse.stoppedAt)),n.treeLen=null!==(i=n.parse.stoppedAt)&&void 0!==i?i:n.state.doc.length,n.tree=o,n.parse=null,!(n.treeLen<(null!=t?t:n.state.doc.length)))return!0;n.parse=n.startParse()}if(e())return!1}}))},e.prototype.takeTree=function(){var e,t,n=this;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((function(){for(;!(t=n.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Un.addTree(this.tree,this.fragments,!0)),this.parse=null)},e.prototype.withContext=function(e){var t=_h;_h=this;try{return e()}finally{_h=t}},e.prototype.withoutTempSkipped=function(e){for(var t=void 0;t=this.tempSkipped.pop();)e=Gh(e,t.from,t.to);return e},e.prototype.changes=function(t,n){var i=this,r=i.fragments,o=i.tree,a=i.treeLen,s=i.viewport,l=i.skipped;if(this.takeTree(),!t.empty){var c=[];if(t.iterChangedRanges((function(e,t,n,i){return c.push({fromA:e,toA:t,fromB:n,toB:i})})),r=Un.applyChanges(r,c),o=xn.empty,a=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){l=[];for(var u=0,h=this.skipped;u<h.length;u++){var p=h[u],d=t.mapPos(p.from,1),f=t.mapPos(p.to,-1);d<f&&l.push({from:d,to:f})}}}return new e(this.parser,n,r,o,a,s,l,this.scheduleOn)},e.prototype.updateViewport=function(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;for(var t=this.skipped.length,n=0;n<this.skipped.length;n++){var i=this.skipped[n],r=i.from,o=i.to;r<e.to&&o>e.from&&(this.fragments=Gh(this.fragments,r,o),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)},e.prototype.reset=function(){this.parse&&(this.takeTree(),this.parse=null)},e.prototype.skipUntilInView=function(e,t){this.skipped.push({from:e,to:t})},e.getSkippingParser=function(e){return new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n.prototype.createParse=function(t,n,i){var r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance:function(){var t=_h;if(t){for(var n=0,a=i;n<a.length;n++){var s=a[n];t.tempSkipped.push(s)}e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new xn(bn.none,[],[],o-r)},stoppedAt:null,stopAt:function(){}}},n}(Wn))},e.prototype.isDone=function(e){e=Math.min(e,this.state.doc.length);var t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e},e.get=function(){return _h},e}();function Gh(e,t,n){return Un.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}var Kh=function(){function e(e){this.context=e,this.tree=e.tree}return e.prototype.apply=function(t){if(!t.docChanged&&this.tree==this.context.tree)return this;var n=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new e(n)},e.init=function(t){var n=Math.min(3e3,t.doc.length),i=jh.create(t.facet(Zh).parser,t,{from:0,to:n});return i.work(20,n)||i.takeTree(),new e(i)},e}();Bh.state=_i.define({create:Kh.init,update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];if(r.is(Bh.setState))return r.value}return t.startState.facet(Zh)!=t.state.facet(Zh)?Kh.init(t.state):e.apply(t)}});var Yh=function(e){var t=setTimeout((function(){return e()}),500);return function(){return clearTimeout(t)}};"undefined"!=typeof requestIdleCallback&&(Yh=function(e){var t=-1,n=setTimeout((function(){t=requestIdleCallback(e,{timeout:400})}),100);return function(){return t<0?clearTimeout(n):cancelIdleCallback(t)}});var Xh="undefined"!=typeof navigator&&(null===(dh=navigator.scheduling)||void 0===dh?void 0:dh.isInputPending)?function(){return navigator.scheduling.isInputPending()}:null,$h=Ba.fromClass(function(){function e(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}return e.prototype.update=function(e){var t=this.view.state.field(Bh.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)},e.prototype.scheduleWork=function(){if(!this.working){var e=this.view.state,t=e.field(Bh.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Yh(this.work))}},e.prototype.work=function(e){this.working=null;var t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),!(this.chunkBudget<=0)){var n=this.view,i=n.state,r=n.viewport.to,o=i.field(Bh.state);if(o.tree!=o.context.tree||!o.context.isDone(r+1e5)){var a=Date.now()+Math.min(this.chunkBudget,100,e&&!Xh?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<r&&i.doc.length>r+1e3,l=o.context.work((function(){return Xh&&Xh()||Date.now()>a}),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Bh.setState.of(new Kh(o.context))})),this.chunkBudget>0&&(!l||s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}}},e.prototype.checkAsyncSchedule=function(e){var t=this;e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((function(){return t.scheduleWork()})).catch((function(e){return Pa(t.view.state,e)})).then((function(){return t.workScheduled--})),e.scheduleOn=null)},e.prototype.destroy=function(){this.working&&this.working()},e.prototype.isWorking=function(){return!!(this.working||this.workScheduled>0)},e}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),Zh=Hi.define({combine:function(e){return e.length?e[0]:null},enables:function(e){return[Bh.state,$h,jl.contentAttributes.compute([e],(function(t){var n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]}}),Qh=function(e,t){void 0===t&&(t=[]),this.language=e,this.support=t,this.extension=[e,t]},Jh=function(){function e(e,t,n,i,r,o){void 0===o&&(o=void 0),this.name=e,this.alias=t,this.extensions=n,this.filename=i,this.loadFunc=r,this.support=o,this.loading=null}return e.prototype.load=function(){var e=this;return this.loading||(this.loading=this.loadFunc().then((function(t){return e.support=t}),(function(t){throw e.loading=null,t})))},e.of=function(t){var n=t.load,i=t.support;if(!n){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=function(){return Promise.resolve(i)}}return new e(t.name,(t.alias||[]).concat(t.name).map((function(e){return e.toLowerCase()})),t.extensions||[],t.filename,n,i)},e.matchFilename=function(e,t){for(var n=0,i=e;n<i.length;n++){if((s=i[n]).filename&&s.filename.test(t))return s}var r=/\.([^.]+)$/.exec(t);if(r)for(var o=0,a=e;o<a.length;o++){var s;if((s=a[o]).extensions.indexOf(r[1])>-1)return s}return null},e.matchLanguageName=function(e,t,n){void 0===n&&(n=!0),t=t.toLowerCase();for(var i=0,r=e;i<r.length;i++){if((s=r[i]).alias.some((function(e){return e==t})))return s}if(n)for(var o=0,a=e;o<a.length;o++)for(var s,l=0,c=(s=a[o]).alias;l<c.length;l++){var u=c[l],h=t.indexOf(u);if(h>-1&&(u.length>2||!/\w/.test(t[h-1])&&!/\w/.test(t[h+u.length])))return s}return null},e}(),ep=Hi.define(),tp=Hi.define({combine:function(e){if(!e.length)return"  ";var t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((function(e){return e!=t[0]})))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function np(e){var t=e.facet(tp);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function ip(e,t){var n="",i=e.tabSize,r=e.facet(tp)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(var o=0;o<t;o++)n+=r;return n}function rp(e,t){e instanceof Sr&&(e=new ap(e));for(var n=0,i=e.state.facet(ep);n<i.length;n++){var r=(0,i[n])(e,t);if(void 0!==r)return r}var o=Hh(e.state);return o?function(e,t,n){return cp(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,o,t):null}function op(e,t,n){for(var i=Object.create(null),r=new ap(e,{overrideIndentation:function(e){var t;return null!==(t=i[e])&&void 0!==t?t:-1}}),o=[],a=t;a<=n;){var s=e.doc.lineAt(a);a=s.to+1;var l=rp(r,s.from);if(null!=l){/\S/.test(s.text)||(l=0);var c=/^\s*/.exec(s.text)[0],u=ip(e,l);c!=u&&(i[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))}}return e.changes(o)}var ap=function(){function e(e,t){void 0===t&&(t={}),this.state=e,this.options=t,this.unit=np(e)}return e.prototype.lineAt=function(e,t){void 0===t&&(t=1);var n=this.state.doc.lineAt(e),i=this.options,r=i.simulateBreak,o=i.simulateDoubleBreak;return null!=r&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n},e.prototype.textAfterPos=function(e,t){if(void 0===t&&(t=1),this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";var n=this.lineAt(e,t),i=n.text,r=n.from;return i.slice(e-r,Math.min(i.length,e+100-r))},e.prototype.column=function(e,t){void 0===t&&(t=1);var n=this.lineAt(e,t),i=n.text,r=n.from,o=this.countColumn(i,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o},e.prototype.countColumn=function(e,t){return void 0===t&&(t=e.length),Wr(e,this.state.tabSize,t)},e.prototype.lineIndent=function(e,t){void 0===t&&(t=1);var n=this.lineAt(e,t),i=n.text,r=n.from,o=this.options.overrideIndentation;if(o){var a=o(r);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))},Object.defineProperty(e.prototype,"simulatedBreak",{get:function(){return this.options.simulateBreak||null},enumerable:!1,configurable:!0}),e}(),sp=new mn;function lp(e){var t=e.type.prop(sp);if(t)return t;var n,i=e.firstChild;if(i&&(n=i.type.prop(mn.closedBy))){var r=e.lastChild,o=r&&n.indexOf(r.name)>-1;return function(e){return fp(e,!0,1,void 0,o&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?r.from:void 0)}}return null==e.parent?up:null}function cp(e,t,n){for(;e;e=e.parent){var i=lp(e);if(i)return i(hp.create(n,t,e))}return null}function up(){return 0}var hp=function(e){function t(t,n,i){var r=e.call(this,t.state,t.options)||this;return r.base=t,r.pos=n,r.node=i,r}return f(t,e),t.create=function(e,n,i){return new t(e,n,i)},Object.defineProperty(t.prototype,"textAfter",{get:function(){return this.textAfterPos(this.pos)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseIndent",{get:function(){for(var e=this.state.doc.lineAt(this.node.from);;){for(var t=this.node.resolve(e.from);t.parent&&t.parent.from==t.from;)t=t.parent;if(pp(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)},enumerable:!1,configurable:!0}),t.prototype.continue=function(){var e=this.node.parent;return e?cp(e,this.pos,this.base):0},t}(ap);function pp(e,t){for(var n=t;n;n=n.parent)if(e==n)return!0;return!1}function dp(e){var t=e.closing,n=e.align,i=void 0===n||n,r=e.units,o=void 0===r?1:r;return function(e){return fp(e,i,o,t)}}function fp(e,t,n,i,r){var o=e.textAfter,a=o.match(/^\s*/)[0].length,s=i&&o.slice(a,a+i.length)==i||r==e.pos+a,l=t?function(e){var t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;for(var r=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),a=null==r||r<=o.from?o.to:Math.min(o.to,r),s=n.to;;){var l=t.childAfter(s);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<a?n:null;s=l.to}}(e):null;return l?s?e.column(l.from):e.column(l.to):e.baseIndent+(s?0:e.unit*n)}var gp=function(e){return e.baseIndent};function mp(e){var t=void 0===e?{}:e,n=t.except,i=t.units,r=void 0===i?1:i;return function(e){var t=n&&n.test(e.textAfter);return e.baseIndent+(t?0:r*e.unit)}}function vp(){return Sr.transactionFilter.of((function(e){if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;var t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;var n=e.newDoc,i=e.newSelection.main.head,r=n.lineAt(i);if(i>r.from+200)return e;var o=n.sliceString(r.from,i);if(!t.some((function(e){return e.test(o)})))return e;for(var a=e.state,s=-1,l=[],c=0,u=a.selection.ranges;c<u.length;c++){var h=u[c].head,p=a.doc.lineAt(h);if(p.from!=s){s=p.from;var d=rp(a,p.from);if(null!=d){var f=/^\s*/.exec(p.text)[0],g=ip(a,d);f!=g&&l.push({from:p.from,to:p.from+f.length,insert:g})}}}return l.length?[e,{changes:l,sequential:!0}]:e}))}var yp=Hi.define(),bp=new mn;function wp(e){var t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function kp(e,t,n){for(var i=0,r=e.facet(yp);i<r.length;i++){var o=(0,r[i])(e,t,n);if(o)return o}return function(e,t,n){var i=Hh(e);if(i.length<n)return null;for(var r,o,a=null,s=i.resolveInner(n,1);s;s=s.parent)if(!(s.to<=n||s.from>n)){if(a&&s.from<t)break;var l=s.type.prop(bp);if(l&&(s.to<i.length-50||i.length==e.doc.length||(o=void 0,!(o=(r=s).lastChild)||o.to!=r.to||!o.type.isError))){var c=l(s,e);c&&c.from<=n&&c.from>=t&&c.to>n&&(a=c)}}return a}(e,t,n)}function Cp(e,t){var n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}var Ep=dr.define({map:Cp}),xp=dr.define({map:Cp});function Sp(e){for(var t=[],n=function(n){if(t.some((function(e){return e.from<=n&&e.to>=n})))return"continue";t.push(e.lineBlockAt(n))},i=0,r=e.state.selection.ranges;i<r.length;i++){n(r[i].head)}return t}var Mp=_i.define({create:function(){return ca.none},update:function(e,t){e=e.map(t.changes);for(var n=function(t){t.is(Ep)&&!function(e,t,n){var i=!1;return e.between(t,t,(function(e,r){e==t&&r==n&&(i=!0)})),i}(e,t.value.from,t.value.to)?e=e.update({add:[qp.range(t.value.from,t.value.to)]}):t.is(xp)&&(e=e.update({filter:function(e,n){return t.value.from!=e||t.value.to!=n},filterFrom:t.value.from,filterTo:t.value.to}))},i=0,r=t.effects;i<r.length;i++){n(r[i])}if(t.selection){var o=!1,a=t.selection.main.head;e.between(a,a,(function(e,t){e<a&&t>a&&(o=!0)})),o&&(e=e.update({filterFrom:a,filterTo:a,filter:function(e,t){return t<=a||e>=a}}))}return e},provide:function(e){return jl.decorations.from(e)},toJSON:function(e,t){var n=[];return e.between(0,t.doc.length,(function(e,t){n.push(e,t)})),n},fromJSON:function(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");for(var t=[],n=0;n<e.length;){var i=e[n++],r=e[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");t.push(qp.range(i,r))}return ca.set(t,!0)}});function Tp(e){return e.field(Mp,!1)||Pr.empty}function Dp(e,t,n){var i,r=null;return null===(i=e.field(Mp,!1))||void 0===i||i.between(t,n,(function(e,t){(!r||r.from>e)&&(r={from:e,to:t})})),r}function Ap(e,t){return e.field(Mp,!1)?t:t.concat(dr.appendConfig.of(zp()))}var Lp=function(e){for(var t=0,n=Sp(e);t<n.length;t++){var i=n[t],r=kp(e.state,i.from,i.to);if(r)return e.dispatch({effects:Ap(e.state,[Ep.of(r),Ip(e,r)])}),!0}return!1},Pp=function(e){if(!e.state.field(Mp,!1))return!1;for(var t=[],n=0,i=Sp(e);n<i.length;n++){var r=i[n],o=Dp(e.state,r.from,r.to);o&&t.push(xp.of(o),Ip(e,o,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function Ip(e,t,n){void 0===n&&(n=!0);var i=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return jl.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(i," ").concat(e.state.phrase("to")," ").concat(r,"."))}var Op=function(e){for(var t=e.state,n=[],i=0;i<t.doc.length;){var r=e.lineBlockAt(i),o=kp(t,r.from,r.to);o&&n.push(Ep.of(o)),i=(o?e.lineBlockAt(o.to):r).to+1}return n.length&&e.dispatch({effects:Ap(e.state,n)}),!!n.length},Fp=function(e){var t=e.state.field(Mp,!1);if(!t||!t.size)return!1;var n=[];return t.between(0,e.state.doc.length,(function(e,t){n.push(xp.of({from:e,to:t}))})),e.dispatch({effects:n}),!0};function Bp(e,t){for(var n=t;;){var i=kp(e.state,n.from,n.to);if(i&&i.to>t.from)return i;if(!n.from)return null;n=e.lineBlockAt(n.from-1)}}var Np=function(e){for(var t=[],n=0,i=Sp(e);n<i.length;n++){var r=i[n],o=Dp(e.state,r.from,r.to);if(o)t.push(xp.of(o),Ip(e,o,!1));else{var a=Bp(e,r);a&&t.push(Ep.of(a),Ip(e,a))}}return t.length>0&&e.dispatch({effects:Ap(e.state,t)}),!!t.length},Rp=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lp},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Pp},{key:"Ctrl-Alt-[",run:Op},{key:"Ctrl-Alt-]",run:Fp}],Hp={placeholderDOM:null,placeholderText:"…"},Vp=Hi.define({combine:function(e){return Mr(e,Hp)}});function zp(e){var t=[Mp,jp];return e&&t.push(Vp.of(e)),t}var qp=ca.replace({widget:new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(e){var t=e.state,n=t.facet(Vp),i=function(t){var n=e.lineBlockAt(e.posAtDOM(t.target)),i=Dp(e.state,n.from,n.to);i&&e.dispatch({effects:xp.of(i)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,i);var r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r},t}(sa))}),Up={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:function(){return!1}},Wp=function(e){function t(t,n){var i=e.call(this)||this;return i.config=t,i.open=n,i}return f(t,e),t.prototype.eq=function(e){return this.config==e.config&&this.open==e.open},t.prototype.toDOM=function(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);var t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t},t}(Su);function _p(e){void 0===e&&(e={});var t=Object.assign(Object.assign({},Up),e),n=new Wp(t,!0),i=new Wp(t,!1),r=Ba.fromClass(function(){function e(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}return e.prototype.update=function(e){(e.docChanged||e.viewportChanged||e.startState.facet(Zh)!=e.state.facet(Zh)||e.startState.field(Mp,!1)!=e.state.field(Mp,!1)||Hh(e.startState)!=Hh(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))},e.prototype.buildMarkers=function(e){for(var t=new Ir,r=0,o=e.viewportLineBlocks;r<o.length;r++){var a=o[r],s=Dp(e.state,a.from,a.to)?i:kp(e.state,a.from,a.to)?n:null;s&&t.add(a.from,a.from,s)}return t.finish()},e}()),o=t.domEventHandlers;return[r,Au({class:"cm-foldGutter",markers:function(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.markers)||Pr.empty},initialSpacer:function(){return new Wp(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:function(e,t,n){if(o.click&&o.click(e,t,n))return!0;var i=Dp(e.state,t.from,t.to);if(i)return e.dispatch({effects:xp.of(i)}),!0;var r=kp(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:Ep.of(r)}),!0)}})}),zp()]}var jp=jl.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),Gp=function(){function e(e,t){var n;function i(e){var t=Yr.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;var r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Bh?function(e){return e.prop(Ih)==o.data}:o?function(e){return e==o}:void 0,this.style=uh(e.map((function(e){return{tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}})),{all:r}).style,this.module=n?new Yr(n):null,this.themeType=t.themeType}return e.define=function(t,n){return new e(t,n||{})},e}(),Kp=Hi.define(),Yp=Hi.define({combine:function(e){return e.length?[e[0]]:null}});function Xp(e){var t=e.facet(Kp);return t.length?t:e.facet(Yp)}function $p(e,t){var n,i=[Jp];return e instanceof Gp&&(e.module&&i.push(jl.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?i.push(Yp.of(e)):n?i.push(Kp.computeN([jl.darkTheme],(function(t){return t.facet(jl.darkTheme)==("dark"==n)?[e]:[]}))):i.push(Kp.of(e)),i}function Zp(e,t,n){var i=Xp(e),r=null;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];if(!s.scope||n&&s.scope(n)){var l=s.style(t);l&&(r=r?r+" "+l:l)}}return r}var Qp=function(){function e(e){this.markCache=Object.create(null),this.tree=Hh(e.state),this.decorations=this.buildDeco(e,Xp(e.state))}return e.prototype.update=function(e){var t=Hh(e.state),n=Xp(e.state),i=n!=Xp(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))},e.prototype.buildDeco=function(e,t){var n=this;if(!t||!this.tree.length)return ca.none;for(var i=new Ir,r=0,o=e.visibleRanges;r<o.length;r++){var a=o[r],s=a.from,l=a.to;ph(this.tree,t,(function(e,t,r){i.add(e,t,n.markCache[r]||(n.markCache[r]=ca.mark({class:r})))}),s,l)}return i.finish()},e}(),Jp=$i.high(Ba.fromClass(Qp,{decorations:function(e){return e.decorations}})),ed=Gp.define([{tag:Lh.meta,color:"#404740"},{tag:Lh.link,textDecoration:"underline"},{tag:Lh.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Lh.emphasis,fontStyle:"italic"},{tag:Lh.strong,fontWeight:"bold"},{tag:Lh.strikethrough,textDecoration:"line-through"},{tag:Lh.keyword,color:"#708"},{tag:[Lh.atom,Lh.bool,Lh.url,Lh.contentSeparator,Lh.labelName],color:"#219"},{tag:[Lh.literal,Lh.inserted],color:"#164"},{tag:[Lh.string,Lh.deleted],color:"#a11"},{tag:[Lh.regexp,Lh.escape,Lh.special(Lh.string)],color:"#e40"},{tag:Lh.definition(Lh.variableName),color:"#00f"},{tag:Lh.local(Lh.variableName),color:"#30a"},{tag:[Lh.typeName,Lh.namespace],color:"#085"},{tag:Lh.className,color:"#167"},{tag:[Lh.special(Lh.variableName),Lh.macroName],color:"#256"},{tag:Lh.definition(Lh.propertyName),color:"#00c"},{tag:Lh.comment,color:"#940"},{tag:Lh.invalid,color:"#f00"}]),td=jl.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),nd="()[]{}",id=Hi.define({combine:function(e){return Mr(e,{afterCursor:!0,brackets:nd,maxScanDistance:1e4,renderMatch:ad})}}),rd=ca.mark({class:"cm-matchingBracket"}),od=ca.mark({class:"cm-nonmatchingBracket"});function ad(e){var t=[],n=e.matched?rd:od;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}var sd=[_i.define({create:function(){return ca.none},update:function(e,t){if(!t.docChanged&&!t.selection)return e;for(var n=[],i=t.state.facet(id),r=0,o=t.state.selection.ranges;r<o.length;r++){var a=o[r];if(a.empty){var s=pd(t.state,a.head,-1,i)||a.head>0&&pd(t.state,a.head-1,1,i)||i.afterCursor&&(pd(t.state,a.head,1,i)||a.head<t.state.doc.length&&pd(t.state,a.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,t.state)))}}return ca.set(n,!0)},provide:function(e){return jl.decorations.from(e)}}),td];function ld(e){return void 0===e&&(e={}),[id.of(e),sd]}var cd=new mn;function ud(e,t,n){var i=e.prop(t<0?mn.openedBy:mn.closedBy);if(i)return i;if(1==e.name.length){var r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function hd(e){var t=e.type.prop(cd);return t?t(e.node):e}function pd(e,t,n,i){void 0===i&&(i={});for(var r=i.maxScanDistance||1e4,o=i.brackets||nd,a=Hh(e),s=a.resolveInner(t,n),l=s;l;l=l.parent){var c=ud(l.type,n,o);if(c&&l.from<l.to){var u=hd(l);if(u&&(n>0?t>=u.from&&t<u.to:t>u.from&&t<=u.to))return dd(e,t,n,l,u,c,o)}}return function(e,t,n,i,r,o,a){var s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;for(var c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0,p=0;!u.next().done&&p<=o;){var d=u.value;n<0&&(p+=d.length);for(var f=t+p*n,g=n>0?0:d.length-1,m=n>0?d.length:-1;g!=m;g+=n){var v=a.indexOf(d[g]);if(!(v<0||i.resolveInner(f+g,1).type!=r))if(v%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:f+g,to:f+g+1},matched:v>>1==l>>1};h--}}n>0&&(p+=d.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,a,s.type,r,o)}function dd(e,t,n,i,r,o,a){var s=i.parent,l={from:r.from,to:r.to},c=0,u=null==s?void 0:s.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do{if(n<0?u.to<=i.from:u.from>=i.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to)return{start:l,end:(h=hd(u))?{from:h.from,to:h.to}:void 0,matched:!0};if(ud(u.type,n,a))c++;else if(ud(u.type,-n,a)){var h;if(0==c)return{start:l,end:(h=hd(u))&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1};c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function fd(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r,a=i;a<t;a++)9==e.charCodeAt(a)?o+=n-o%n:o++;return o}var gd=function(){function e(e,t,n,i,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.lookAhead=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}return e.prototype.eol=function(){return this.pos>=this.string.length},e.prototype.sol=function(){return 0==this.pos},e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e instanceof RegExp?e.test(t):e(t)))return++this.pos,t},e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},e.prototype.skipToEnd=function(){this.pos=this.string.length},e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},e.prototype.backUp=function(e){this.pos-=e},e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},e.prototype.indentation=function(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:fd(this.string,null,this.tabSize)},e.prototype.match=function(e,t,n){if("string"==typeof e){var i=function(e){return n?e.toLowerCase():e};return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):null}var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)},e.prototype.current=function(){return this.string.slice(this.start,this.pos)},e}();function md(e){if("object"!=typeof e)return e;var t={};for(var n in e){var i=e[n];t[n]=i instanceof Array?i.slice():i}return t}var vd=new WeakMap,yd=function(e){function t(t){var n,i,r=this,o=Oh(t.languageData),a={name:(i=t).name||"",token:i.token,blankLine:i.blankLine||function(){return null},startState:i.startState||function(){return!0},copyState:i.copyState||md,indent:i.indent||function(){return null},languageData:i.languageData||{}},s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.createParse=function(e,t,i){return new kd(n,e,t,i)},t}(Wn));return(r=e.call(this,o,s,[ep.of((function(e,t){return r.getIndent(e,t)}))],t.name)||this).topNode=function(e){var t=bn.define({id:xd.length,name:"Document",props:[Ih.add((function(){return e}))]});return xd.push(t),t}(o),n=r,r.streamParser=a,r.stateAfter=new mn({perNode:!0}),r}return f(t,e),t.define=function(e){return new t(e)},t.prototype.getIndent=function(e,t){for(var n=Hh(e.state),i=n.resolve(t);i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;var r=void 0,o=e.options.overrideIndentation;o&&null!=(r=vd.get(e.state))&&r<t-1e4&&(r=void 0);var a,s,l=bd(this,n,0,i.from,null!=r?r:t);if(l?(s=l.state,a=l.pos+1):(s=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(var c=function(){var n=e.state.doc.lineAt(a),i=Math.min(t,n.to);if(n.length)for(var r=o?o(n.from):-1,l=new gd(n.text,e.state.tabSize,e.unit,(function(t){return t+n.number>e.state.doc.lines?"":e.state.doc.line(t+n.number).text}),r<0?void 0:r);l.pos<i-n.from;)Cd(u.streamParser.token,l,s);else u.streamParser.blankLine(s,e.unit);if(i==t)return"break";a=n.to+1},u=this;a<t;){if("break"===c())break}var h=e.lineAt(t);o&&null==r&&vd.set(e.state,h.from);var p=this.streamParser.indent(s,/^\s*(.*)/.exec(h.text)[1],e);return p&&"CodeMirror.Pass"===p.toString()?null:p},Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(Bh);function bd(e,t,n,i,r){var o=n>=i&&n+t.length<=r&&t.prop(e.stateAfter);if(o)return{state:e.streamParser.copyState(o),pos:n+t.length};for(var a=t.children.length-1;a>=0;a--){var s=t.children[a],l=n+t.positions[a],c=s instanceof xn&&l<r&&bd(e,s,l,i,r);if(c)return c}return null}function wd(e,t,n,i,r){if(r&&n<=0&&i>=t.length)return t;r||t.type!=e.topNode||(r=!0);for(var o=t.children.length-1;o>=0;o--){var a=t.positions[o],s=t.children[o],l=void 0;if(a<i&&s instanceof xn){if(!(l=wd(e,s,n-a,i-a,r)))break;return r?new xn(t.type,t.children.slice(0,o).concat(l),t.positions.slice(0,o+1),a+l.length):l}}return null}var kd=function(){function e(e,t,n,i){this.lang=e,this.input=t,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.tokenCache={},this.rangeIndex=0,this.to=i[i.length-1].to;var r=jh.get(),o=i[0].from,a=function(e,t,n,i){for(var r=0,o=t;r<o.length;r++){var a=o[r],s=a.from+(a.openStart?25:0),l=a.to-(a.openEnd?25:0),c=s<=n&&l>n&&bd(e,a.tree,0-a.offset,n,l),u=void 0;if(c&&(u=wd(e,a.tree,n+a.offset,c.pos+a.offset,!1)))return{state:c.state,tree:u}}return{state:e.streamParser.startState(i?np(i):4),tree:xn.empty}}(e,n,o,null==r?void 0:r.state),s=a.state,l=a.tree;this.state=s,this.parsedPos=this.chunkStart=o+l.length;for(var c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);r&&this.parsedPos<r.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(np(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}return e.prototype.advance=function(){var e=jh.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048),i=e.viewport.to+5e3;for(e&&(n=Math.min(n,i));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=i?(e.skipUntilInView(this.parsedPos-5e3,t),this.finish()):null},e.prototype.stopAt=function(e){this.stoppedAt=e},e.prototype.lineAfter=function(e){var t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{var n=t.indexOf("\n");n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)},e.prototype.nextLine=function(){for(var e=this.parsedPos,t=this.lineAfter(e),n=e+t.length,i=this.rangeIndex;;){var r=this.ranges[i].to;if(r>=n)break;if(t=t.slice(0,r-(n-t.length)),++i==this.ranges.length)break;var o=this.ranges[i].from,a=this.lineAfter(o);t+=a,n=o+a.length}return{line:t,end:n}},e.prototype.skipGapsTo=function(e,t,n){for(;;){var i=this.ranges[this.rangeIndex].to,r=e+t;if(n>0?i>r:i>=r)break;t+=this.ranges[++this.rangeIndex].from-i}return t},e.prototype.moveRangeIndex=function(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++},e.prototype.emitToken=function(e,t,n,i,r){if(this.ranges.length>1){t+=r=this.skipGapsTo(t,r,1);var o=this.chunk.length;n+=r=this.skipGapsTo(n,r,-1),i+=this.chunk.length-o}return this.chunk.push(e,t,n,i),r},e.prototype.parseLine=function(e){var t=this,n=this.nextLine(),i=n.line,r=n.end,o=0,a=this.lang.streamParser,s=this.tokenCache,l=new gd(i,e?e.state.tabSize:4,e?np(e.state):2,(function(e){for(var n=t.parsedPos,i=0;i<e;i++)(n+=t.lineAfter(n).length)<t.input.length&&n++;return t.lineAfter(n)})),c=[],u=new Set;if(l.eol()){var h=a.blankLine(this.state,l.indentUnit);h&&h.split(" ").forEach((function(e){if(e){var t=e.match(/^line-(background-)?(.*)$/);t&&u.add(t[2])}}))}else{for(var p=null,d=function(){var e=Cd(a.token,l,f.state);if(e){var t=s[e],n=[],i=void 0;if(t)i=t[0],n=t[1];else{var r=e.split(" ");i=(r=r.filter((function(e){if(!e)return!1;var t=e.match(/^line-(background-)?(.*)$/);return!t||(n.push(t[2]),!1)}))).sort().join(" "),s[e]=[i,n]}if(n.length>0)for(var o=0,h=n;o<h.length;o++){var d=h[o];u.add(d)}var g=f.parsedPos+l.start,m=f.parsedPos+l.pos;p&&p.cls===i&&p.to===g?p.to=m:(p={cls:i,from:g,to:m},c.push(p))}},f=this;!l.eol();)d();for(var g=0,m=c;g<m.length;g++){var v=m[g];o=this.emitToken(Md(v.cls),v.from,v.to,4,o)}}u.size>0&&(o=this.emitToken(Md(Array.from(u).sort().join(" "),!0),this.parsedPos,this.parsedPos+i.length,4*(c.length+1),o)),this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++},e.prototype.finishChunk=function(){var e=xn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Sd,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new xn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos},e.prototype.finish=function(){return new xn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()},e}();function Cd(e,t,n){t.start=t.pos;for(var i=0;i<10;i++){var r=e(t,n);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}var Ed=Object.create(null),xd=[bn.none],Sd=new kn(xd);function Md(e,t){return e?Ed[e]||(Ed[e]=function(e,t){var n,i,r=e.replace(/ /g,"_"),o=bn.define({id:xd.length,name:r,props:[t?Dd.add((n={},n[r]=e,n)):Td.add((i={},i[r]=e,i))]});return xd.push(o),o.id}(e,t)):0}var Td=new mn,Dd=new mn,Ad=function(){function e(e){this.lineCache=Object.create(null),this.tokenCache=Object.create(null),this.tree=Hh(e.state),this.decorations=this.buildDeco(e)}return e.prototype.update=function(e){var t=Hh(e.state);t.length<e.view.viewport.to||e.view.compositionStarted?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged)&&(this.tree=t,this.decorations=this.buildDeco(e.view))},e.prototype.buildDeco=function(e){var t=this;if(!this.tree.length)return ca.none;for(var n=[],i=0,r=e.state.facet(Pd);i<r.length;i++){var o=r[i];n.push.apply(n,o.split(" "))}for(var a=new Set(n),s=a.size>0,l=new Ir,c=0,u=0,h=e.visibleRanges;u<h.length;u++){var p=h[u],d=p.from,f=p.to;this.tree.iterate({from:d,to:f,enter:function(n){var i=n.type,r=n.from,o=n.to,u=i.prop(Dd);if(u){var h=t.lineCache[u]||(t.lineCache[u]=ca.line({attributes:{class:u}})),p=e.lineBlockAt(r).from;if(c>p)return;l.add(p,p,h),c=p}var d=i.prop(Td);if(d){if(c>r)return;if(!(h=t.tokenCache[d])){var f=d.split(" "),g={class:f.map((function(e){return"cm-"+e})).join(" ")};s&&f.some((function(e){return a.has(e)}))&&(g.attributes={spellcheck:"false"}),h=t.tokenCache[d]=ca.mark(g)}l.add(r,o,h),c=o}}})}return l.finish()},e}(),Ld=$i.lowest(Ba.define((function(e){return new Ad(e)}),{decorations:function(e){return e.decorations}})),Pd=Hi.define({});function Id(e,t){return e.length<=t?e:e.slice(0,t-1).trim()+"…"}var Od=/\u00A0/g;function Fd(e){return e.replace(Od," ")}function Bd(e){if(!e||"string"!=typeof e)return null;var t=!0,n=e.split(".").map((function(e){var n=parseInt(e);return isNaN(n)&&(t=!1),n}));return t?n:null}function Nd(e,t){var n=Bd(e),i=Bd(t);return!!i&&(!n||function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){if(e[i]<t[i])return!0;if(e[i]>t[i])return!1}return e.length<t.length||(e.length,t.length,!1)}(n,i))}function Rd(e){return{ctime:Math.round(e.birthtimeMs),mtime:Math.round(e.mtimeMs),size:e.size}}var Hd=window.process,Vd=Hd?Hd.platform:"",zd="darwin"===Vd,qd="win32"===Vd,Ud=zd||qd,Wd=function(){function e(e){this.thingsHappening=rt(this.kill.bind(this),6e4,!0),this.basePath=e,this.fs=window.require("original-fs"),this.fsPromises=this.fs.promises,this.path=window.require("path"),this.url=window.require("url");var t=window.require("electron");this.ipcRenderer=t.ipcRenderer,this.files={},this.promise=Promise.resolve(),this.watcher=null,this.watchers={},this.handler=null;try{this.btime=window.require("btime")}catch(e){}this.insensitive=zd||qd;try{this.testInsensitive()}catch(e){console.error(e)}}return e.prototype.testInsensitive=function(){var e=this,t=e.fs,n=e.path,i=e.basePath,r=n.join(i,".OBSIDIANTEST"),o=n.join(i,".OBSIDIANTEST".toLowerCase());t.existsSync(r)&&t.unlinkSync(r),t.writeFileSync(r,"","utf8"),this.insensitive=t.existsSync(o),t.unlinkSync(r)},e.prototype.getName=function(){return this.path.basename(this.basePath)},e.prototype.getBasePath=function(){return this.basePath},e.prototype.listAll=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.files["/"]={type:"folder",realpath:"/"},[4,this.listRecursive("")];case 1:return e.sent(),[2]}}))}))},e.prototype.listRecursive=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullRealPath(e),[4,this.fsPromises.readdir(t)];case 1:for(n=s.sent(),this.thingsHappening(),i=[],r=0,o=n;r<o.length;r++)a=o[r],i.push(this.listRecursiveChild(e,a));return[4,Promise.all(i)];case 2:return s.sent(),[2]}}))}))},e.prototype.listRecursiveChild=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=pe(""===e?t:e+"/"+t),i=he(n),this.trigger("raw",i),oe(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,o.sent()];case 2:return o.trys.push([2,4,,8]),[4,this.reconcileFileInternal(n,i)];case 3:return o.sent(),[3,8];case 4:return"ENOENT"!==(r=o.sent()).code?[3,6]:[4,this.reconcileDeletion(n,i,!0)];case 5:return o.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return[2]}}))}))},e.prototype.mkdir=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.mkdir(t,{recursive:!0})];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.trashSystem=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),this.ipcRenderer.sendSync("trash",t)?[4,this.reconcileInternalFile(e)]:[2,!1];case 1:return n.sent(),[2,!0]}}))}))}))},e.prototype.trashLocal=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullPath(e),n=this.getFullPath(".trash"),[4,this.fsPromises.mkdir(n,{recursive:!0})];case 1:s.sent(),i=this.path.extname(t),r=this.path.basename(t,i),o=this.path.join(n,r+i),a=1,s.label=2;case 2:return[4,this._exists(o)];case 3:return s.sent()?(a++,o=this.path.join(n,r+" "+a+i),[3,2]):[3,4];case 4:return[4,this.fsPromises.rename(t,o)];case 5:return s.sent(),[4,this.reconcileInternalFile(e)];case 6:return s.sent(),[2]}}))}))}))},e.prototype.rmdir=function(e,t){var n=this;return this.queue((function(){return v(n,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this.getFullPath(e),[4,this.fsPromises.rm(n,{maxRetries:5,recursive:t})];case 1:return i.sent(),[4,this.reconcileInternalFile(e)];case 2:return i.sent(),[2]}}))}))}))},e.prototype.read=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fsPromises.readFile(t,"utf8")]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.readBinary=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i=this;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fsPromises.readFile(t)];case 2:return[2,B(r.sent())];case 3:throw n=r.sent(),this.queue((function(){return i.reconcileInternalFile(e)})),n;case 4:return[2]}}))}))}))},e.prototype.write=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,4,6]),[4,this.fsPromises.writeFile(i,t,"utf8")];case 2:return r.sent(),[4,this.applyWriteOptions(i,n)];case 3:return r.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return r.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.writeBinary=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=this.getFullPath(e),r=N(t),o.label=1;case 1:return o.trys.push([1,,4,6]),[4,this.fsPromises.writeFile(i,r)];case 2:return o.sent(),[4,this.applyWriteOptions(i,n)];case 3:return o.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return o.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.append=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,4,6]),[4,this.fsPromises.appendFile(i,t,"utf8")];case 2:return r.sent(),[4,this.applyWriteOptions(i,n)];case 3:return r.sent(),[3,6];case 4:return[4,this.reconcileInternalFile(e)];case 5:return r.sent(),[7];case 6:return[2]}}))}))}))},e.prototype.process=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=this.getFullPath(e),[4,this.fsPromises.readFile(i,"utf8")];case 1:if(r=a.sent(),(o=t(r))===r)return[2,r];a.label=2;case 2:return a.trys.push([2,,5,7]),[4,this.fsPromises.writeFile(i,o,"utf8")];case 3:return a.sent(),[4,this.applyWriteOptions(i,n)];case 4:return a.sent(),[3,7];case 5:return[4,this.reconcileInternalFile(e)];case 6:return a.sent(),[7];case 7:return[2,o]}}))}))}))},e.prototype.applyWriteOptions=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return t?(n=t.ctime,i=t.mtime,r=t.immediate,n&&this.btime&&this.btime.btime(e,n),i?[4,this.fsPromises.utimes(e,i/1e3,i/1e3)]:[3,2]):[2];case 1:o.sent(),o.label=2;case 2:return r&&r(),[2]}}))}))},e.prototype.getResourcePath=function(e){var t=this.getFullPath(e),n=0,i=this.files[e];i&&"file"===i.type&&(n=i.mtime),n||(n=Date.now());var r=this.url.pathToFileURL(t).href;return r.startsWith("file:///")?r=r.substring("file:///".length):r.startsWith("file://")&&(r="%5C%5C"+r.substring("file://".length)),Lt.resourcePathPrefix+r+"?"+n},e.prototype.getFilePath=function(e){var t=this.getFullPath(e);return window.require("url").pathToFileURL(t)},e.prototype.remove=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.unlink(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.update=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.reconcileInternalFile(e)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.rename=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return e===t?[2]:[4,this.queue((function(){return v(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this._exists(i,!1)];case 1:if(p.sent()&&(!this.insensitive||e.toLowerCase()!==t.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[e],o=r?r.realpath:null,[4,this.fsPromises.rename(n,i)];case 2:return p.sent(),r?(delete this.files[e],a=this.getRealPath(t),r.realpath=a,this.files[t]=r,this.trigger("renamed",t,e),"folder"===r.type&&this.watchers.hasOwnProperty(e)?(this.stopWatchPath(e),[4,this.startWatchPath(t)]):[3,4]):[2];case 3:p.sent(),p.label=4;case 4:if("folder"===r.type)for(s in this.files)this.files.hasOwnProperty(s)&&s.startsWith(e+"/")&&(l=s.slice(e.length),c=t+l,u=this.files[s],delete this.files[s],h=u.realpath.slice(o.length),u.realpath=a+h,this.files[c]=u,this.trigger("renamed",c,s));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.copy=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return v(n,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this.fsPromises.copyFile(n,i,this.fs.constants.COPYFILE_EXCL)];case 1:return r.sent(),[4,this.reconcileInternalFile(t)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.exists=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(e);return n._exists(i,t)}))]}))}))},e.prototype._exists=function(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fsPromises.access(e)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return t&&this.insensitive?(n=this.path.dirname(e),i=this.path.basename(e),[4,this.fsPromises.readdir(n)]):[3,5];case 4:if(-1===r.sent().indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},e.prototype.stat=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fsPromises.stat(t)];case 2:return(n=r.sent()).isFile()?[2,g({type:"file"},Rd(n))]:n.isDirectory()?[2,g({type:"folder"},Rd(n))]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},e.prototype.list=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=this.getFullPath(e),[4,this.fsPromises.readdir(t)];case 1:n=u.sent(),i={folders:[],files:[]},r=0,o=n,u.label=2;case 2:return r<o.length?(a=o[r],s=pe(""===e?a:e+"/"+a),l=he(s),[4,this.fsPromises.stat(this.getFullRealPath(s))]):[3,5];case 3:(c=u.sent()).isFile()&&i.files.push(l),c.isDirectory()&&i.folders.push(l),u.label=4;case 4:return r++,[3,2];case 5:return[2,i]}}))}))}))]}))}))},e.prototype.watch=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return this.stopWatch(),this.handler=e,[4,this.startWatchPath("/")];case 1:return n.sent(),[2,this.queue((function(){return t.listAll()}))]}}))}))},e.prototype.watchHiddenRecursive=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(Ud)return[2];l.label=1;case 1:return l.trys.push([1,12,,13]),t=this.getFullRealPath(e),[4,this.fsPromises.readdir(t)];case 2:return n=l.sent(),[4,this.startWatchPath(e)];case 3:l.sent(),i=0,r=n,l.label=4;case 4:if(!(i<r.length))return[3,11];o=r[i],l.label=5;case 5:return l.trys.push([5,9,,10]),a=pe(""===e?o:e+"/"+o),s=this.getFullRealPath(a),[4,this.fsPromises.lstat(s)];case 6:return l.sent().isDirectory()?[4,this.watchHiddenRecursive(a)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:return l.sent(),[3,10];case 10:return i++,[3,4];case 11:return[3,13];case 12:return l.sent(),[3,13];case 13:return[2]}}))}))},e.prototype.stopWatch=function(){for(var e in this.watchers)this.watchers.hasOwnProperty(e)&&this.stopWatchPath(e);this.handler=null},e.prototype.startWatchPath=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:if(t=this.getRealPath(e),this.watchers[e])return[2];n=this.getFullPath(e),i=n,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=s.sent(),[3,4];case 3:return"ENOENT"!==(r=s.sent()).code&&console.error(r),[3,4];case 4:return(o=this.fs.watch(n,{persistent:!1,encoding:"utf8",recursive:Ud})).on("change",(function(e,n){var i="/"===t?n:t+"/"+n;a.onFileChange(i)})),o.on("error",(function(){a.onFileChange(t)})),this.watchers[e]={watcher:o,resolvedPath:i},[2]}}))}))},e.prototype.stopWatchPath=function(e){var t=this.watchers[e];t&&(t.watcher.close(),delete this.watchers[e])},e.prototype.onFileChange=function(e){var t=this;e&&(e=pe(e),setTimeout((function(){var n=he(e);t.queue((function(){return t.reconcileFile(e,n,!1)}))}),0))},e.prototype.reconcileInternalFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.reconcileFile(this.getRealPath(e),e)]}))}))},e.prototype.reconcileFile=function(e,t,n){return void 0===n&&(n=!0),v(this,void 0,Promise,(function(){var i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return this.trigger("raw",t),oe(t)?[4,this.reconcileDeletion(e,t,n)]:[3,2];case 1:return[2,l.sent()];case 2:return(i=re(t))&&"/"!==i?this.files[t]?[3,4]:[4,this.reconcileFile(re(e),i,n)]:[3,4];case 3:l.sent(),l.label=4;case 4:return l.trys.push([4,9,,13]),r=this.getFullRealPath(e),this.insensitive?(o=this.path.dirname(r),a=this.path.basename(t),[4,this.fsPromises.readdir(o)]):[3,7];case 5:return-1!==l.sent().map((function(e){return Fd(e).normalize("NFC")})).indexOf(a)?[3,7]:[4,this.reconcileDeletion(e,t,n)];case 6:return[2,l.sent()];case 7:return[4,this.reconcileFileInternal(e,t)];case 8:return l.sent(),[3,13];case 9:return"ENOENT"!==(s=l.sent()).code?[3,11]:[4,this.reconcileDeletion(e,t,n)];case 10:return l.sent(),[3,12];case 11:console.error(s),l.label=12;case 12:return[3,13];case 13:return[2]}}))}))},e.prototype.reconcileFileInternal=function(e,t){return v(this,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullRealPath(e),[4,this.fsPromises.lstat(n)];case 1:return(i=r.sent()).isFile()?[4,this.reconcileFileCreation(e,t,i)]:[3,3];case 2:return r.sent(),[3,7];case 3:return i.isDirectory()?[4,this.reconcileFolderCreation(e,t)]:[3,5];case 4:return r.sent(),[3,7];case 5:return i.isSymbolicLink()?[4,this.reconcileSymbolicLinkCreation(e,t)]:[3,7];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))},e.prototype.reconcileFileCreation=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){if(i=Rd(n),r=this.files[t]){if(r.realpath=e,"file"===r.type)return r.mtime===Math.round(n.mtimeMs)&&r.size===n.size||(r.mtime=Math.round(n.mtimeMs),r.size=n.size,this.trigger("raw",t,t,i),this.trigger("modified",t,t,i)),[2];this.removeFile(t)}return this.files[t]=function(e,t){return t.isFile()?{type:"file",realpath:e,ctime:Math.round(t.birthtimeMs),mtime:Math.round(t.mtimeMs),size:t.size}:t.isDirectory()?{type:"folder",realpath:e}:void 0}(e,n),this.trigger("file-created",t,t,i),[2]}))}))},e.prototype.reconcileFolderCreation=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(t)?[3,4]:(this.files[t]={type:"folder",realpath:e},this.trigger("folder-created",t),Ud?[3,2]:[4,this.startWatchPath(t)]);case 1:n.sent(),n.label=2;case 2:return[4,this.listRecursive(e)];case 3:return n.sent(),[3,5];case 4:this.files[t].realpath=e,n.label=5;case 5:return[2]}}))}))},e.prototype.reconcileSymbolicLinkCreation=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:n=this.getFullRealPath(e),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=c.sent(),[3,4];case 3:return c.sent(),[2];case 4:if(r=this.path.sep,(o=this.watchers).hasOwnProperty(t))o[t].resolvedPath=i;else for(a in o)if(o.hasOwnProperty(a)&&a!==t&&(s=o[a].resolvedPath,i===s||s.startsWith(i+r)||i.startsWith(s+r)))return[2];return[4,this.fsPromises.stat(n)];case 5:return(l=c.sent()).isFile()?[4,this.reconcileFileCreation(e,t,l)]:[3,7];case 6:return c.sent(),[3,11];case 7:return l.isDirectory()?Ud?[4,this.startWatchPath(t)]:[3,9]:[3,11];case 8:c.sent(),c.label=9;case 9:return[4,this.reconcileFolderCreation(e,t)];case 10:c.sent(),c.label=11;case 11:return[2]}}))}))},e.prototype.reconcileDeletion=function(e,t,n){return void 0===n&&(n=!0),v(this,void 0,Promise,(function(){var i,r,o=this;return y(this,(function(a){if("/"===t)return this.trigger("closed",t),[2];if(this.stopWatchPath(t),!(i=this.files[t]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(e,t)}))}),100),[2];if("folder"===i.type)for(r in this.files)this.files.hasOwnProperty(r)&&r.startsWith(t+"/")&&this.removeFile(r);return this.removeFile(t),[2]}))}))},e.prototype.trigger=function(e,t,n,i){this.handler&&this.handler(e,t,n,i)},e.prototype.getRealPath=function(e){for(var t=e;t;){if(this.files.hasOwnProperty(t)){var n=e.substr(t.length);return this.files[t].realpath+n}t=re(t)}return e},e.prototype.getFullPath=function(e){var t=this.getRealPath(e);return this.getFullRealPath(t)},e.prototype.getFullRealPath=function(e){return this.path.join(this.basePath,e)},e.prototype.kill=function(){this.killLastAction&&(this.killLastAction(new Error("File system operation timed out.")),this.killLastAction=null)},e.prototype.queue=function(e){var t=this,n=function(){var n=new Promise((function(e,n){return t.killLastAction=n}));return t.thingsHappening(),Promise.race([n,e()])},i=this.promise.then(n,n);return this.promise=i,i},e.prototype.removeFile=function(e){var t=this.files[e];delete this.files[e],t&&("file"===t.type?this.trigger("file-removed",e):"folder"===t.type&&this.trigger("folder-removed",e))},e.readLocalFile=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=window.require)?(n=t("fs"),i=B,[4,n.promises.readFile(e)]):[3,2];case 1:return[2,i.apply(void 0,[r.sent()])];case 2:return[2,null]}}))}))},e.mkdir=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return(t=window.require)?[4,t("fs").promises.mkdir(e,{recursive:!0})]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}}))}))},e}(),_d="language",jd="en",Gd={am:"አማርኛ",ar:"اَلْعَرَبِيَّةُ",cs:"čeština",da:"Dansk",de:"Deutsch",en:"English",es:"Español",fa:"فارسی",fr:"Français",hu:"Magyar",id:"Bahasa Indonesia",it:"Italiano",ja:"日本語",kh:"ខ្មែរ",ko:"한국어",ms:"Bahasa Melayu",nl:"Nederlands",no:"Norsk",pl:"Polski",pt:"Português","pt-BR":"Português do Brasil",ro:"Română",ru:"Pусский",sq:"Shqip",th:"ไทย",tr:"Türkçe",uk:"Українська",vi:"Tiếng Việt",zh:"简体中文","zh-TW":"繁體中文"},Kd=Object.keys(Gd).sort(),Yd={zh:"zh-cn",cz:"cs",no:"nn"},Xd={interpolation:{prefix:"{{{{",suffix:"}}}}"}},$d="default";function Zd(e,t){if(String.isString(e))return null!==t&&String.isString(t)?t:e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=Zd(e[i],t&&t[i]||null));return n}function Qd(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).replace(/_[0-9]/g,(function(e){return"-"+e.substring(1)}))}i18next.init({fallbackLng:jd,ns:[$d],defaultNS:$d,initImmediate:!1,interpolation:{alwaysFormat:!0,escapeValue:!1,format:function(e,t){return"number"==typeof e?e.toLocaleString():e}}});var Jd=function e(t,n){var i={};for(var r in t)if(t.hasOwnProperty(r)){var o=n(r),a=t[r];String.isString(a)?i[o]=a:i[o]=e(a,n)}return i}(OBSIDIAN_DEFAULT_I18N,Qd);i18next.addResourceBundle(jd,$d,Jd);var ef=Promise.resolve(),tf=localStorage.getItem(_d);if(tf){ef=v(void 0,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),tf.contains("/")||tf.contains("\\")?(e=JSON.parse(window.require("original-fs").readFileSync(tf,"utf8")),i18next.addResourceBundle("dev",$d,e),[4,i18next.changeLanguage("dev")]):[3,2];case 1:return o.sent(),[2];case 2:return i=(n=JSON).parse,[4,ajaxPromise({url:"/i18n/"+tf+".json"})];case 3:return t=i.apply(n,[o.sent()]),i18next.addResourceBundle(tf,$d,t),[4,i18next.changeLanguage(tf)];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),console.error("Failed to load language pack.",r),[3,6];case 6:return[2]}}))}));try{var nf=tf.toLowerCase();Yd.hasOwnProperty(nf)&&(nf=Yd[nf]),window.moment.locale(nf)}catch(e){}}window.selectLanguageFileLocation=function(){if(Lt.isDesktopApp){var e=electron.remote.dialog.showOpenDialogSync({title:"Pick location of translation file",filters:[{name:"Translation file",extensions:["json"]}],properties:["openFile","dontAddToRecent"]});if(e.length>0){var t=e[0];localStorage.setItem(_d,t),location.reload()}}},Vt&&(window.i18nGenBundles=function(){if(Lt.isDesktopApp){var e=window.require("original-fs"),t=electron.ipcRenderer.sendSync("resources");for(var n in Gd)if(Gd.hasOwnProperty(n)){var i=t+"/i18n/"+n+".json";try{if(e.existsSync(i)){var r=e.readFileSync(i,"utf8"),o=JSON.parse(r),a=Zd(Jd,o),s=JSON.stringify(a,null,"\t");e.writeFileSync(i,s,"utf8"),console.log("Saved bundle for",n)}}catch(e){console.error("Failed to process translation for",n,e)}}}});var rf=function e(t,n){var i={};return new Proxy(n,{get:function(n,r){return i.hasOwnProperty(r)?i[r]:i[r]=e(t+Qd(r)+".",(function(e,n){return String.isString(e)?i18next.t(t+Qd(r)+"."+e,n):i18next.t(t+Qd(r),e)}))}})}("",i18next.t.bind(i18next));function of(e){if(!e)return"";var t=e.split("-"),n={aa:"Afar",ab:"Abkhaz",ae:"Avestan",af:"Afrikaans",ak:"Akan",am:"Amharic",an:"Aragonese",ar:"Arabic",as:"Assamese",av:"Avaric",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Belarusian",bg:"Bulgarian",bi:"Bislama",bm:"Bambara",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",ce:"Chechen",ch:"Chamorro",co:"Corsican",cr:"Cree",cs:"Czech",cu:"Old Church Slavonic",cv:"Chuvash",cy:"Welsh",da:"Danish",de:"German",dv:"Divehi",dz:"Dzongkha",ee:"Ewe",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",ff:"Fula",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Western Frisian",ga:"Irish",gd:"Scottish Gaelic",gl:"Galician",gn:"Guaraní",gu:"Gujarati",gv:"Manx",ha:"Hausa",he:"Hebrew",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",ht:"Haitian",hu:"Hungarian",hy:"Armenian",hz:"Herero",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ig:"Igbo",ii:"Nuosu",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ki:"Kikuyu",kj:"Kwanyama",kk:"Kazakh",kl:"Kalaallisut",km:"Khmer",kn:"Kannada",ko:"Korean",kr:"Kanuri",ks:"Kashmiri",ku:"Kurdish",kv:"Komi",kw:"Cornish",ky:"Kyrgyz",la:"Latin",lb:"Luxembourgish",lg:"Ganda",li:"Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",mg:"Malagasy",mh:"Marshallese",mi:"Māori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",nb:"Norwegian Bokmål",nd:"Northern Ndebele",ne:"Nepali",ng:"Ndonga",nl:"Dutch",nn:"Norwegian Nynorsk",no:"Norwegian",nr:"Southern Ndebele",nv:"Navajo",ny:"Chichewa",oc:"Occitan",oj:"Ojibwe",om:"Oromo",or:"Oriya",os:"Ossetian",pa:"Panjabi",pi:"Pāli",pl:"Polish",ps:"Pashto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sg:"Sango",si:"Sinhala",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Swati",st:"Southern Sotho",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zh:"Chinese",zu:"Zulu"},i={aar:"Afar",abk:"Abkhaz",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe; Adygei",afa:"Afro-Asiatic languages",afh:"Afrihili",afr:"Afrikaans",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",ale:"Aleut",alg:"Algonquian languages",alt:"Southern Altai",amh:"Amharic",ang:"English, Old (ca.450-1100)",anp:"Angika",apa:"Apache languages",ara:"Arabic",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",arg:"Aragonese",arm:"Armenian",arn:"Mapudungun; Mapuche",arp:"Arapaho",art:"Artificial languages",arw:"Arawak",asm:"Assamese",ast:"Asturian; Bable; Leonese; Asturleonese",ath:"Athapascan languages",aus:"Australian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",bad:"Banda languages",bai:"Bamileke languages",bak:"Bashkir",bal:"Baluchi",bam:"Bambara",ban:"Balinese",baq:"Basque",bas:"Basa",bat:"Baltic languages",bej:"Beja; Bedawiyet",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bik:"Bikol",bin:"Bini; Edo",bis:"Bislama",bla:"Siksika",bnt:"Bantu languages",bos:"Bosnian",bra:"Braj",bre:"Breton",btk:"Batak languages",bua:"Buriat",bug:"Buginese",bul:"Bulgarian",bur:"Burmese",byn:"Blin; Bilin",cad:"Caddo",cai:"Central American Indian languages",car:"Galibi Carib",cat:"Catalan",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cha:"Chamorro",chb:"Chibcha",che:"Chechen",chg:"Chagatai",chi:"Chinese",chk:"Chuukese",chm:"Mari",chn:"Chinook jargon",cho:"Choctaw",chp:"Chipewyan; Dene Suline",chr:"Cherokee",chu:"Old Church Slavonic",chv:"Chuvash",chy:"Cheyenne",cmc:"Chamic languages",cnr:"Montenegrin",cop:"Coptic",cor:"Cornish",cos:"Corsican",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",cre:"Cree",crh:"Crimean Tatar; Crimean Turkish",crp:"Creoles and pidgins",csb:"Kashubian",cus:"Cushitic languages",cze:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",day:"Land Dayak languages",del:"Delaware",den:"Slave (Athapascan)",dgr:"Dogrib",din:"Dinka",div:"Divehi",doi:"Dogri",dra:"Dravidian languages",dsb:"Lower Sorbian",dua:"Duala",dum:"Dutch, Middle (ca.1050-1350)",dut:"Dutch",dyu:"Dyula",dzo:"Dzongkha",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fao:"Faroese",fat:"Fanti",fij:"Fijian",fil:"Filipino; Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",fon:"Fon",fre:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",frr:"Northern Frisian",frs:"Eastern Frisian",fry:"Western Frisian",ful:"Fula",fur:"Friulian",gaa:"Ga",gay:"Gayo",gba:"Gbaya",gem:"Germanic languages",geo:"Georgian",ger:"German",gez:"Geez",gil:"Gilbertese",gla:"Scottish Gaelic",gle:"Irish",glg:"Galician",glv:"Manx",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek",grn:"Guaraní",gsw:"Swiss German; Alemannic; Alsatian",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Himachali languages; Western Pahari languages",hin:"Hindi",hit:"Hittite",hmn:"Hmong; Mong",hmo:"Hiri Motu",hrv:"Croatian",hsb:"Upper Sorbian",hun:"Hungarian",hup:"Hupa",iba:"Iban",ibo:"Igbo",ice:"Icelandic",ido:"Ido",iii:"Nuosu",ijo:"Ijo languages",iku:"Inuktitut",ile:"Interlingue",ilo:"Iloko",ina:"Interlingua",inc:"Indic languages",ind:"Indonesian",ine:"Indo-European languages",inh:"Ingush",ipk:"Inupiaq",ira:"Iranian languages",iro:"Iroquoian languages",ita:"Italian",jav:"Javanese",jbo:"Lojban",jpn:"Japanese",jpr:"Judeo-Persian",jrb:"Judeo-Arabic",kaa:"Kara-Kalpak",kab:"Kabyle",kac:"Kachin; Jingpho",kal:"Kalaallisut",kam:"Kamba",kan:"Kannada",kar:"Karen languages",kas:"Kashmiri",kau:"Kanuri",kaw:"Kawi",kaz:"Kazakh",kbd:"Kabardian",kha:"Khasi",khi:"Khoisan languages",khm:"Khmer",kho:"Khotanese; Sakan",kik:"Kikuyu",kin:"Kinyarwanda",kir:"Kyrgyz",kmb:"Kimbundu",kok:"Konkani",kom:"Komi",kon:"Kongo",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",krc:"Karachay-Balkar",krl:"Karelian",kro:"Kru languages",kru:"Kurukh",kua:"Kwanyama",kum:"Kumyk",kur:"Kurdish",kut:"Kutenai",lad:"Ladino",lah:"Lahnda",lam:"Lamba",lao:"Lao",lat:"Latin",lav:"Latvian",lez:"Lezghian",lim:"Limburgish",lin:"Lingala",lit:"Lithuanian",lol:"Mongo",loz:"Lozi",ltz:"Luxembourgish",lua:"Luba-Lulua",lub:"Luba-Katanga",lug:"Ganda",lui:"Luiseno",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",mac:"Macedonian",mad:"Madurese",mag:"Magahi",mah:"Marshallese",mai:"Maithili",mak:"Makasar",mal:"Malayalam",man:"Mandingo",mao:"Māori",map:"Austronesian languages",mar:"Marathi",mas:"Masai",may:"Malay",mdf:"Moksha",mdr:"Mandar",men:"Mende",mga:"Irish, Middle (900-1200)",mic:"Mi'kmaq; Micmac",min:"Minangkabau",mis:"Uncoded languages",mkh:"Mon-Khmer languages",mlg:"Malagasy",mlt:"Maltese",mnc:"Manchu",mni:"Manipuri",mno:"Manobo languages",moh:"Mohawk",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",mus:"Creek",mwl:"Mirandese",mwr:"Marwari",myn:"Mayan languages",myv:"Erzya",nah:"Nahuatl languages",nai:"North American Indian languages",nap:"Neapolitan",nau:"Nauru",nav:"Navajo",nbl:"Southern Ndebele",nde:"Northern Ndebele",ndo:"Ndonga",nds:"Low German; Low Saxon; German, Low; Saxon, Low",nep:"Nepali",new:"Nepal Bhasa; Newari",nia:"Nias",nic:"Niger-Kordofanian languages",niu:"Niuean",nno:"Norwegian Nynorsk",nob:"Norwegian Bokmål",nog:"Nogai",non:"Norse, Old",nor:"Norwegian",nqo:"N'Ko",nso:"Pedi; Sepedi; Northern Sotho",nub:"Nubian languages",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",nya:"Chichewa",nym:"Nyamwezi",nyn:"Nyankole",nyo:"Nyoro",nzi:"Nzima",oci:"Occitan",oji:"Ojibwe",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetian",ota:"Turkish, Ottoman (1500-1928)",oto:"Otomian languages",paa:"Papuan languages",pag:"Pangasinan",pal:"Pahlavi",pam:"Pampanga; Kapampangan",pan:"Panjabi",pap:"Papiamento",pau:"Palauan",peo:"Persian, Old (ca.600-400 B.C.)",per:"Persian",phi:"Philippine languages",phn:"Phoenician",pli:"Pāli",pol:"Polish",pon:"Pohnpeian",por:"Portuguese",pra:"Prakrit languages",pro:"Provençal, Old (to 1500); Occitan, Old (to 1500)",pus:"Pashto","qaa-qtz":"Reserved for local use",que:"Quechua",raj:"Rajasthani",rap:"Rapanui",rar:"Rarotongan; Cook Islands Maori",roa:"Romance languages",roh:"Romansh",rom:"Romany",rum:"Romanian",run:"Kirundi",rup:"Aromanian; Arumanian; Macedo-Romanian",rus:"Russian",sad:"Sandawe",sag:"Sango",sah:"Yakut",sai:"South American Indian languages",sal:"Salishan languages",sam:"Samaritan Aramaic",san:"Sanskrit",sas:"Sasak",sat:"Santali",scn:"Sicilian",sco:"Scots",sel:"Selkup",sem:"Semitic languages",sga:"Irish, Old (to 900)",sgn:"Sign Languages",shn:"Shan",sid:"Sidamo",sin:"Sinhala",sio:"Siouan languages",sit:"Sino-Tibetan languages",sla:"Slavic languages",slo:"Slovak",slv:"Slovenian",sma:"Southern Sami",sme:"Northern Sami",smi:"Sami languages",smj:"Lule Sami",smn:"Inari Sami",smo:"Samoan",sms:"Skolt Sami",sna:"Shona",snd:"Sindhi",snk:"Soninke",sog:"Sogdian",som:"Somali",son:"Songhai languages",sot:"Southern Sotho",spa:"Spanish",srd:"Sardinian",srn:"Sranan Tongo",srp:"Serbian",srr:"Serer",ssa:"Nilo-Saharan languages",ssw:"Swati",suk:"Sukuma",sun:"Sundanese",sus:"Susu",sux:"Sumerian",swa:"Swahili",swe:"Swedish",syc:"Classical Syriac",syr:"Syriac",tah:"Tahitian",tai:"Tai languages",tam:"Tamil",tat:"Tatar",tel:"Telugu",tem:"Timne",ter:"Tereno",tet:"Tetum",tgk:"Tajik",tgl:"Tagalog",tha:"Thai",tib:"Tibetan",tig:"Tigre",tir:"Tigrinya",tiv:"Tiv",tkl:"Tokelau",tlh:"Klingon; tlhIngan-Hol",tli:"Tlingit",tmh:"Tamashek",tog:"Tonga (Nyasa)",ton:"Tonga",tpi:"Tok Pisin",tsi:"Tsimshian",tsn:"Tswana",tso:"Tsonga",tuk:"Turkmen",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",tut:"Altaic languages",tvl:"Tuvalu",twi:"Twi",tyv:"Tuvinian",udm:"Udmurt",uga:"Ugaritic",uig:"Uyghur",ukr:"Ukrainian",umb:"Umbundu",und:"Undetermined",urd:"Urdu",uzb:"Uzbek",vai:"Vai",ven:"Venda",vie:"Vietnamese",vol:"Volapük",vot:"Votic",wak:"Wakashan languages",wal:"Wolaitta; Wolaytta",war:"Waray",was:"Washo",wel:"Welsh",wen:"Sorbian languages",wln:"Walloon",wol:"Wolof",xal:"Kalmyk; Oirat",xho:"Xhosa",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",zap:"Zapotec",zbl:"Blissymbols; Blissymbolics; Bliss",zen:"Zenaga",zgh:"Standard Moroccan Tamazight",zha:"Zhuang",znd:"Zande languages",zul:"Zulu",zun:"Zuni",zxx:"No linguistic content; Not applicable",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki"},r={AF:"Afghanistan",AX:"Åland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"Côte d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Réunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthélemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};return t.length>1?(n[t[0]]||i[t[0]]||t[0])+" ("+(r[t[1]]||t[1])+")"+t.slice(2).map((function(e){return"(".concat(e,")")})).join(""):t.length>0?n[t[0]]||i[t[0]]||r[t[0]]||t[0]:""}var af=dr.define(),sf=jl.inputHandler.of((function(e,t,n,i){if("-"!==i)return!1;var r=e.state.selection.main;if(t!=r.from||n!=r.to)return!1;var o=e.state.doc.lineAt(t);if(o.from>0)return!1;if(/^--$/.test(o.text)){return e.dispatch({changes:[{insert:"-\n\n---\n",from:o.to}],selection:{anchor:t+2},effects:[af.of()],userEvent:"input.type"}),!0}return!1})),lf=dr.define(),cf=dr.define(),uf=new Map,hf=_i.define({create:function(){return ca.none},update:function(e,t){e=e.map(t.changes);for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(lf)?e=e.update({add:r.value,sort:!0}):r.is(cf)&&(e=e.update({filter:r.value}))}return e},provide:function(e){return jl.decorations.from(e)}});function pf(e){return"set"!==e.annotation(fr.userEvent)}function df(e,t){if(t.line<0)return 0;var n=t.line+1;if(n>e.lines)return e.length;var i=e.line(n);return isFinite(t.ch)?t.ch<0?i.from+Math.max(0,i.length+t.ch):i.from+t.ch:i.to}function ff(e,t){t=Math.clamp(t,0,e.length);var n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}function gf(e,t,n){return e.from<=n&&e.to>=t}function mf(e,t,n){for(var i=0,r=e;i<r.length;i++){if(gf(r[i],t,n))return!0}return!1}function vf(e,t,n,i){var r=!1;return e.between(n,i,(function(e,n,i){if(i===t)return r=!0,!1})),r}var yf=dr.define();function bf(e,t){return e.some((function(e){return e.effects.some((function(e){return e.is(t)}))}))}function wf(e,t){return void 0===t&&(t=0),{line:e,ch:t}}function kf(e,t){return{line:e.line,ch:e.ch+t}}function Cf(e,t){return e.line===t.line&&e.ch===t.ch}function Ef(e,t){return e.line===t.line?e.ch<=t.ch:e.line<=t.line}function xf(e,t){return function(e,t){var n=e.from,i=t.from;return n.line===i.line?n.ch-i.ch:n.line-i.line}(t,e)}var Sf=/^([>\s]*)(([*+-] |(\d+)([.)] ))(?:\[(.)\] )?)?/,Mf=/^([>\s]*)(#{1,6} )?(.*)/,Tf=[{regex:/(！)?【【$/,replace:function(e){return e[1]?"![[":"[["}},{regex:/】】$/,replace:function(){return"]]"}},{regex:/【【$/,replace:function(){return"[["}}],Df=function(){function e(){}return e.prototype.getDoc=function(){return this},e.prototype.setLine=function(e,t){this.replaceRange(t,wf(e,0),wf(e,this.getLine(e).length))},e.prototype.somethingSelected=function(){return!!this.getSelection()},e.prototype.setCursor=function(e,t){return Number.isNumber(e)?this.setSelection({line:e,ch:t}):this.setSelection(e)},e.prototype.posAtMouse=function(e){return this.posAtCoords(e.clientX,e.clientY)},e.prototype.insertMarkdownLink=function(){var e=this.getSelection(),t=this.getCursor("from"),n=this.getCursor("to");e?this.transaction({replaceSelection:"[".concat(e,"]()"),selection:{from:kf(t,e.length+3)}}):t.line===n.line&&t.ch===n.ch&&this.transaction({replaceSelection:"[]()",selection:{from:kf(t,1)}})},e.prototype.triggerWikilink=function(e){var t=this.getSelection(),n=this.getCursor("from"),i=this.getCursor("to");t?(this.replaceSelection(e?"![[".concat(t,"]]"):"[[".concat(t,"]]")),this.setSelection(kf(n,t.length+2))):n.line===i.line&&n.ch===i.ch&&(this.replaceSelection(e?"![[]]":"[[]]"),this.setSelection(kf(n,e?3:2)))},e.prototype.insertText=function(e){var t=this.lineCount()-1,n=wf(t,this.getLine(t).length);this.replaceRange(e,n),n=wf(t=this.lineCount()-1,this.getLine(t).length),this.setSelection(n)},e.prototype.processLines=function(e,t,n){void 0===n&&(n=!0);for(var i=this.listSelections(),r=function(e){for(var t=[],n=0,i=e;n<i.length;n++)for(var r=i[n],o=Math.min(r.anchor.line,r.head.line),a=Math.max(r.anchor.line,r.head.line),s=o;s<=a;s++)t.push(s);return Array.from(new Set(t)).sort()}(i),o=[],a=0,s=r;a<s.length;a++){var l=s[a],c=this.getLine(l);if(n&&r.length>1&&!c.trim())o.push(null);else{var u=e(l,c);o.push(u)}}for(var h=[],p=0;p<r.length;p++){l=r[p],u=o[p];if(!n||null!==u)(d=t(l,c=this.getLine(l),u))&&h.push(d)}if(0!==h.length){if(1===i.length){var d=h[0],f=i[0],g=f.anchor;if(0===g.ch&&Cf(g,f.head)&&g.line===d.from.line){var m=d.text.length-(d.to?d.to.ch-d.from.ch:0);return g.ch+=m,g.ch<0&&(g.ch=0),void this.transaction({changes:h,selection:{from:g}})}}this.transaction({changes:h})}},e.prototype.setHeading=function(e){this.processLines((function(e,t){return t.match(Mf)}),(function(t,n,i){var r=0===e?"":Array(e).fill("#").join("")+" ";return{from:wf(t,i[1].length),to:wf(t,n.length-i[3].length),text:r}}))},e.prototype.toggleBlockquote=function(){var e=/^\s*>(\s*)/,t=!1;this.processLines((function(n,i){var r=i.match(e);return r||(t=!0),r}),(function(e,n,i){var r=i;if(t&&!r)return{from:wf(e,0),text:"> "};if(!t&&r){var o=r[0].length;if(r[1].startsWith(" ")){for(var a=r[1];a.startsWith("    ");)a=a.substring(4);o-=r[1].length,a.startsWith(" ")&&o++}return{from:wf(e,0),to:wf(e,o),text:""}}}),!1)},e.prototype.toggleBulletList=function(){var e=!1;this.processLines((function(t,n){var i=n.match(Sf);return i[3]&&!i[4]||(e=!0),i}),(function(t,n,i){return i?{from:wf(t,0),to:wf(t,i[0].length),text:i[1]+(e?"- ":"")}:null}))},e.prototype.toggleNumberList=function(){var e=!1;this.processLines((function(t,n){var i=n.match(Sf);return i[4]||(e=!0),i}),(function(t,n,i){return i?{from:wf(t,0),to:wf(t,i[0].length),text:i[1]+(e?"1. ":"")}:null})),e&&this.afterIndent()},e.prototype.toggleCheckList=function(e){var t=3;this.processLines((function(n,i){var r=i.match(Sf);return t>2&&" "===r[6]&&(t=2),t>1&&!r[6]&&(t=1),e&&t>0&&!r[3]&&(t=0),r}),(function(n,i,r){if(!r)return null;var o=r[0],a=r[1],s=r[3],l={from:wf(n,0),to:wf(n,o.length),text:i.substr(0,o.length)},c=a+(s||"- ");return l.text=c,1===t?r[6]||(l.text=c+"[ ] "):2===t?l.text=c+"[x] ":3===t&&(l.text=e?c:c+"[ ] "),l}))},e.prototype.insertCallout=function(){var e=this.getCursor("from"),t=this.getCursor("to");if(!Cf(e,t)||this.getLine(e.line).substring(0,e.ch).trim()){var n=[],i="> [!NOTE]\n> ",r={from:wf(e.line,4),to:wf(e.line,8)};e.line>0&&this.getLine(e.line-1)&&(i="\n"+i,r.from.line+=1,r.to.line+=1),n.push({from:wf(e.line,0),text:i});for(var o=e.line+1;o<=t.line;o++)n.push({from:wf(o,0),text:"> "});t.line<this.lineCount()-1&&this.getLine(t.line+1)&&n.push({from:wf(t.line+1,0),text:"\n"}),this.transaction({changes:n,selection:r})}else this.transaction({changes:[{from:e,to:t,text:"\n> [!NOTE] Title\n> Contents\n"}],selection:{from:wf(e.line+1,4),to:wf(e.line+1,8)}})},e.prototype.insertCodeblock=function(){this.insertBlock("```","```")},e.prototype.insertMathBlock=function(){this.insertBlock("$$","$$")},e.prototype.indentList=function(){this.exec("indentMore"),this.afterIndent()},e.prototype.unindentList=function(){this.exec("indentLess"),this.afterIndent()},e.prototype.afterIndent=function(){for(var e,t=this,n=this.listSelections(),i=[],r=[],o=0,a=n;o<a.length;o++){var s=a[o];r.push(Math.min(s.head.line,s.anchor.line),Math.max(s.head.line,s.anchor.line)+1)}r=(e=r,Array.from(new Set(e))).sort();for(var l=-1,c=function(e){var n=t.getLine(e);if(n){var r=Sf.exec(n);if(r&&r[4]){for(var o=r[1],a=r[5],s=e-1,c=0,u=null;s>=0;){var h=t.getLine(s),p=Sf.exec(h);if(!p||!p[4])break;var d=p[1];if(d===o){p[4]?c=parseInt(p[4],10):u=p;break}if(d.length<o.length)break;s--}var f=o.length+r[2].length;if(u)return i.push({text:o+u[2],from:wf(e),to:wf(e,f)}),void(l=e);c++,i.push({text:o+c+a,from:wf(e),to:wf(e,f)}),l=e;for(var g=e+1,m=t.lineCount();g<m;){var v=t.getLine(g);if(v){var y=Sf.exec(v);if(!y||!y[2])break;var b=y[1];if(b===o&&y[4]&&(c++,i.push({text:o+c+y[5],from:wf(g),to:wf(g,b.length+y[2].length)}),l=g),b.length<o.length)break;g++}else g++}}}},u=0,h=r;u<h.length;u++){var p=h[u];p>l&&c(p)}this.transaction({changes:i})},e.prototype.newlineAndIndentContinueMarkdownList=function(){for(var e=this,t=this.listSelections(),n=[],i=function(t){var i=t.head;if(t.head.line!==t.anchor.line||t.head.ch!==t.anchor.ch)return!1;var r=e.getLine(i.line),o=Sf.exec(r);if(!o)return!1;var a=o[0],s=o[1],l=o[2],c=o[3],u=o[4],h=o[5],p=o[6];if(i.ch<a.length||!l&&!s)return!1;if(""===r.substr(a.length).trim()){if(!s)return n.push({text:"",from:wf(i.line),to:i}),!0;if(s.endsWith(">")||s.endsWith("> ")){if(l)return n.push({text:"",from:wf(i.line,s.length),to:i}),!0;var d=s.endsWith(">")?1:2;if(i.line>0)if(e.getLine(i.line-1)===s)return n.push({text:"",from:wf(i.line-1,s.length-d),to:wf(i.line-1,s.length)},{text:"",from:wf(i.line,s.length-d),to:wf(i.line,s.length)}),!0;var f=s.substr(0,s.length-d);return n.push({text:"\n"+f,from:wf(i.line,s.length-d),to:wf(i.line,s.length)}),!0}if(s.endsWith("\t"))return n.push({text:"",from:wf(i.line,s.length-1),to:wf(i.line,s.length)}),!0;for(var g=0;g<4&&" "===s.charAt(s.length-g-1);g++);return g>0?(n.push({text:"",from:wf(i.line,s.length-g),to:wf(i.line,s.length)}),!0):(n.push({text:"",from:wf(i.line),to:wf(i.line,s.length)}),!0)}if(!l)return n.push({text:r.charAt(i.ch-1)+"\n"+s,from:wf(i.line,i.ch-1),to:i}),!0;var m=c;u&&(m=parseInt(u,10)+1+h),p&&(m+="[ ] ");var v=Sf.exec(r.substring(i.ch));if(v&&v[3]&&(m=""),n.push({text:r.charAt(i.ch-1)+"\n"+s+m,from:wf(i.line,i.ch-1),to:i}),v&&v[1]&&n.push({text:"",from:i,to:wf(i.line,i.ch+v[1].length)}),u)for(var y=parseInt(u,10)+2,b=i.line+1,w=e.lineCount();b<w;b++){var k=Sf.exec(e.getLine(b));if(!k||!k[2])break;if((f=k[1])===s){var C=k[4],E=parseInt(C,10);C&&!isNaN(E)&&(y=Math.max(y,E),n.push({text:String(y),from:wf(b,s.length),to:wf(b,s.length+C.length)}),y++)}else if(!(f.length>s.length))break}return!0},r=0,o=t;r<o.length;r++){if(!i(o[r]))return this.exec("newlineAndIndent")}this.transaction({changes:n}),this.afterIndent()},e.prototype.newlineAndIndentOnly=function(){for(var e=this,t=this.listSelections(),n=[],i=function(t){var i=t.head;if(t.head.line!==t.anchor.line||t.head.ch!==t.anchor.ch)return!1;var r=e.getLine(i.line),o=Sf.exec(r);if(!o)return!1;var a=o[0],s=o[1],l=o[2];return!(i.ch<a.length)&&(n.push({text:r.charAt(i.ch-1)+"\n"+s+(l?l.replace(/\t/g,"    ").replace(/./g," "):""),from:wf(i.line,i.ch-1),to:i}),!0)},r=0,o=t;r<o.length;r++){if(!i(o[r]))return this.newlineOnly()}this.transaction({changes:n})},e.prototype.newlineOnly=function(){this.transaction({replaceSelection:"\n"})},e.prototype.expandText=function(){var e=this.getCursor("anchor"),t=this.getCursor("head");if(e.line===t.line&&e.ch===t.ch)for(var n=this.getLine(e.line).substr(0,e.ch),i=0,r=Tf;i<r.length;i++){var o=r[i],a=n.match(o.regex);if(a){var s=a[0].length,l=o.replace(a);this.replaceRange(l,kf(e,-s),e);break}}},e}();function Af(e,t){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];n.push(o[0],o[1])}for(var a=Lf(e,n),s=[],l=0;l<t.length;l++)s.push({from:a[2*l],to:a[2*l+1]});return s}function Lf(e,t){for(var n=0,i=0,r=e.indexOf("\n"),o=[],a=0,s=t;a<s.length;a++){for(var l=s[a];r<l;){if(-1===r){r=e.length;break}n++,i=r+1,r=e.indexOf("\n",i)}o.push({line:n,ch:l-i})}return o}var Pf=function(e){var t=e.state,n=t.doc.lineAt(t.selection.main.from),i=zf(e.state,n.from);return i.line?Of(e):!!i.block&&Vf(e)};function If(e,t){return function(n){var i=n.state,r=n.dispatch;if(i.readOnly)return!1;var o=e(t,i);return!!o&&(r(i.update(o)),!0)}}var Of=If(Uf,0),Ff=If(Uf,1),Bf=If(Uf,2),Nf=If(qf,0),Rf=If(qf,1),Hf=If(qf,2),Vf=If((function(e,t){return qf(e,t,function(e){for(var t=[],n=0,i=e.selection.ranges;n<i.length;n++){var r=i[n],o=e.doc.lineAt(r.from),a=r.to<=o.to?o:e.doc.lineAt(r.to),s=t.length-1;s>=0&&t[s].to>o.from?t[s].to=a.to:t.push({from:o.from,to:a.to})}return t}(t))}),0);function zf(e,t){var n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function qf(e,t,n){void 0===n&&(n=t.selection.ranges);var i=n.map((function(e){return zf(t,e.from).block}));if(!i.every((function(e){return e})))return null;var r=n.map((function(e,n){return function(e,t,n,i){var r,o,a=t.open,s=t.close,l=e.sliceDoc(n-50,n),c=e.sliceDoc(i,i+50),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,p=l.length-u;if(l.slice(p-a.length,p)==a&&c.slice(h,h+s.length)==s)return{open:{pos:n-u,margin:u&&1},close:{pos:i+h,margin:h&&1}};i-n<=100?r=o=e.sliceDoc(n,i):(r=e.sliceDoc(n,n+50),o=e.sliceDoc(i-50,i));var d=/^\s*/.exec(r)[0].length,f=/\s*$/.exec(o)[0].length,g=o.length-f-s.length;return r.slice(d,d+a.length)==a&&o.slice(g,g+s.length)==s?{open:{pos:n+d+a.length,margin:/\s/.test(r.charAt(d+a.length))?1:0},close:{pos:i-f-s.length,margin:/\s/.test(o.charAt(g-1))?1:0}}:null}(t,i[n],e.from,e.to)}));if(2!=e&&!r.every((function(e){return e})))return{changes:t.changes(n.map((function(e,t){return r[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}]})))};if(1!=e&&r.some((function(e){return e}))){for(var o=[],a=0,s=void 0;a<r.length;a++)if(s=r[a]){var l=i[a],c=s.open,u=s.close;o.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:o}}return null}function Uf(e,t,n){void 0===n&&(n=t.selection.ranges);for(var i=[],r=-1,o=0,a=n;o<a.length;o++){var s=a[o],l=s.from,c=s.to,u=i.length,h=1e9;if(k=zf(t,l).line){for(var p=l;p<=c;){if((w=t.doc.lineAt(p)).from>r&&(l==c||c>w.from)){r=w.from;var d=(C=/^\s*/.exec(w.text)[0].length)==w.length,f=w.text.slice(C,C+k.length)==k?C:-1;C<w.text.length&&C<h&&(h=C),i.push({line:w,comment:f,token:k,indent:C,empty:d,single:!1})}p=w.to+1}if(h<1e9)for(var g=u;g<i.length;g++)i[g].indent<i[g].line.text.length&&(i[g].indent=h);i.length==u+1&&(i[u].single=!0)}}if(2!=e&&i.some((function(e){return e.comment<0&&(!e.empty||e.single)}))){for(var m=[],v=0,y=i;v<y.length;v++){var b=y[v],w=b.line,k=b.token,C=b.indent;d=b.empty;!b.single&&d||m.push({from:w.from+C,insert:k+" "})}var E=t.changes(m);return{changes:E,selection:t.selection.map(E,1)}}if(1!=e&&i.some((function(e){return e.comment>=0}))){m=[];for(var x=0,S=i;x<S.length;x++){var M=S[x];w=M.line,f=M.comment,k=M.token;if(f>=0){c=(l=w.from+f)+k.length;" "==w.text[c-w.from]&&c++,m.push({from:l,to:c})}}return{changes:m}}return null}var Wf=ur.define(),_f=ur.define(),jf=Hi.define(),Gf=Hi.define({combine:function(e){return Mr(e,{minDepth:100,newGroupDelay:500,joinToEvent:function(e,t){return t}},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:function(e,t){return function(n,i){return e(n,i)||t(n,i)}}})}});var Kf=_i.define({create:function(){return dg.empty},update:function(e,t){var n,i,r=t.state.facet(Gf),o=t.annotation(Wf);if(o){var a=t.docChanged?Bi.single((n=t.changes,i=0,n.iterChangedRanges((function(e,t){return i=t})),i)):void 0,s=rg.fromTransaction(t,a),l=o.side,c=0==l?e.undone:e.done;return c=s?og(c,c.length,r.minDepth,s):lg(c,t.startState.selection),new dg(0==l?o.rest:c,0==l?c:o.rest)}var u=t.annotation(_f);if("full"!=u&&"before"!=u||(e=e.isolate()),!1===t.annotation(fr.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);var h=rg.fromTransaction(t),p=t.annotation(fr.time),d=t.annotation(fr.userEvent);return h?e=e.addChanges(h,p,d,r,t):t.selection&&(e=e.addSelection(t.startState.selection,p,d,r.newGroupDelay)),"full"!=u&&"after"!=u||(e=e.isolate()),e},toJSON:function(e){return{done:e.done.map((function(e){return e.toJSON()})),undone:e.undone.map((function(e){return e.toJSON()}))}},fromJSON:function(e){return new dg(e.done.map(rg.fromJSON),e.undone.map(rg.fromJSON))}});function Yf(e){return void 0===e&&(e={}),[Kf,Gf.of(e),jl.domEventHandlers({beforeinput:function(e,t){var n="historyUndo"==e.inputType?Zf:"historyRedo"==e.inputType?Qf:null;return!!n&&(e.preventDefault(),n(t))}})]}var Xf=Kf;function $f(e,t){return function(n){var i=n.state,r=n.dispatch;if(!t&&i.readOnly)return!1;var o=i.field(Kf,!1);if(!o)return!1;var a=o.pop(e,i,t);return!!a&&(r(a),!0)}}var Zf=$f(0,!1),Qf=$f(1,!1),Jf=$f(0,!0),eg=$f(1,!0);function tg(e){return function(t){var n=t.field(Kf,!1);if(!n)return 0;var i=0==e?n.done:n.undone;return i.length-(i.length&&!i[0].changes?1:0)}}var ng=tg(0),ig=tg(1),rg=function(){function e(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}return e.prototype.setSelAfter=function(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)},e.prototype.toJSON=function(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){return new e(t.changes&&Ti.fromJSON(t.changes),[],t.mapped&&Mi.fromJSON(t.mapped),t.startSelection&&Bi.fromJSON(t.startSelection),t.selectionsAfter.map(Bi.fromJSON))},e.fromTransaction=function(t,n){for(var i=sg,r=0,o=t.startState.facet(jf);r<o.length;r++){var a=(0,o[r])(t);a.length&&(i=i.concat(a))}return!i.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),i,void 0,n||t.startState.selection,sg)},e.selection=function(t){return new e(void 0,sg,void 0,void 0,t)},e}();function og(e,t,n,i){var r=t+1>n+20?t-n-1:0,o=e.slice(r,t);return o.push(i),o}function ag(e,t){return e.length?t.length?e.concat(t):e:t}var sg=[];function lg(e,t){if(e.length){var n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),og(e,e.length-1,1e9,n.setSelAfter(i)))}return[rg.selection([t])]}function cg(e){var t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function ug(e,t){if(!e.length)return e;for(var n=e.length,i=sg;n;){var r=hg(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){var o=e.slice(0,n);return o[n-1]=r,o}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[rg.selection(i)]:sg}function hg(e,t,n){var i=ag(e.selectionsAfter.length?e.selectionsAfter.map((function(e){return e.map(t)})):sg,n);if(!e.changes)return rg.selection(i);var r=e.changes.map(t),o=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new rg(r,dr.mapEffects(e.effects,t),a,e.startSelection.map(o),i)}var pg=/^(input\.type|delete)($|\.)/,dg=function(){function e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=void 0),this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}return e.prototype.isolate=function(){return this.prevTime?new e(this.done,this.undone):this},e.prototype.addChanges=function(t,n,i,r,o){var a=this.done,s=a[a.length-1];return new e(a=s&&s.changes&&!s.changes.empty&&t.changes&&(!i||pg.test(i))&&(!s.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(e,t){var n=[],i=!1;return e.iterChangedRanges((function(e,t){return n.push(e,t)})),t.iterChangedRanges((function(e,t,r,o){for(var a=0;a<n.length;){var s=n[a++],l=n[a++];o>=s&&r<=l&&(i=!0)}})),i}(s.changes,t.changes))||"input.type.compose"==i)?og(a,a.length-1,r.minDepth,new rg(t.changes.compose(s.changes),ag(t.effects,s.effects),s.mapped,s.startSelection,sg)):og(a,a.length,r.minDepth,t),sg,n,i)},e.prototype.addSelection=function(t,n,i,r){var o,a,s=this.done.length?this.done[this.done.length-1].selectionsAfter:sg;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(o=s[s.length-1],a=t,o.ranges.length==a.ranges.length&&0===o.ranges.filter((function(e,t){return e.empty!=a.ranges[t].empty})).length)?this:new e(lg(this.done,t),this.undone,n,i)},e.prototype.addMapping=function(t){return new e(ug(this.done,t),ug(this.undone,t),this.prevTime,this.prevUserEvent)},e.prototype.pop=function(e,t,n){var i=0==e?this.done:this.undone;if(0==i.length)return null;var r=i[i.length-1];if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Wf.of({side:e,rest:cg(i)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){var o=1==i.length?sg:i.slice(0,i.length-1);return r.mapped&&(o=ug(o,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Wf.of({side:e,rest:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null},e}();dg.empty=new dg(sg,sg);var fg=[{key:"Mod-z",run:Zf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Qf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Qf,preventDefault:!0},{key:"Mod-u",run:Jf,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:eg,preventDefault:!0}];function gg(e,t){return Bi.create(e.ranges.map(t),e.mainIndex)}function mg(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function vg(e,t){var n=e.state,i=e.dispatch,r=gg(n.selection,t);return!r.eq(n.selection)&&(i(mg(n,r)),!0)}function yg(e,t){return Bi.cursor(t?e.to:e.from)}function bg(e,t){return vg(e,(function(n){return n.empty?e.moveByChar(n,t):yg(n,t)}))}function wg(e){return e.textDirectionAt(e.state.selection.main.head)==ja.LTR}var kg=function(e){return bg(e,!wg(e))},Cg=function(e){return bg(e,wg(e))},Eg=function(e){return bg(e,!0)},xg=function(e){return bg(e,!1)};function Sg(e,t){return vg(e,(function(n){return n.empty?e.moveByGroup(n,t):yg(n,t)}))}var Mg=function(e){return Sg(e,!wg(e))},Tg=function(e){return Sg(e,wg(e))},Dg=function(e){return Sg(e,!0)},Ag=function(e){return Sg(e,!1)};function Lg(e,t,n){var i=e.state.charCategorizer(t.from);return e.moveByChar(t,n,(function(r){var o=Cr.Space,a=t.from,s=!1,l=!1,c=!1,u=function(t){if(s)return!1;a+=n?t.length:-t.length;var r,u=i(t);if(o==Cr.Space&&(o=u),o!=u)return!1;if(o==Cr.Word)if(t.toLowerCase()==t){if(!n&&l)return!1;c=!0}else if(c){if(n)return!1;s=!0}else{if(l&&n&&i(r=e.state.sliceDoc(a,a+1))==Cr.Word&&r.toLowerCase()==r)return!1;l=!0}return!0};return u(r),u}))}function Pg(e,t){return vg(e,(function(n){return n.empty?Lg(e,n,t):yg(n,t)}))}var Ig=function(e){return Pg(e,!0)},Og=function(e){return Pg(e,!1)};function Fg(e,t,n){if(t.type.prop(n))return!0;var i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Bg(e,t,n){for(var i=Hh(e).resolveInner(t.head),r=n?mn.closedBy:mn.openedBy,o=t.head;;){var a=n?i.childAfter(o):i.childBefore(o);if(!a)break;Fg(e,a,r)?i=a:o=n?a.to:a.from}var s,l;return l=i.type.prop(r)&&(s=n?pd(e,i.from,1):pd(e,i.to,-1))&&s.matched?n?s.end.to:s.end.from:n?i.to:i.from,Bi.cursor(l,n?-1:1)}var Ng=function(e){return vg(e,(function(t){return Bg(e.state,t,!wg(e))}))},Rg=function(e){return vg(e,(function(t){return Bg(e.state,t,wg(e))}))};function Hg(e,t){return vg(e,(function(n){if(!n.empty)return yg(n,t);var i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)}))}var Vg=function(e){return Hg(e,!1)},zg=function(e){return Hg(e,!0)};function qg(e){var t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(var o=0,a=e.state.facet(jl.scrollMargins);o<a.length;o++){var s=(0,a[o])(e);(null==s?void 0:s.top)&&(i=Math.max(null==s?void 0:s.top,i)),(null==s?void 0:s.bottom)&&(r=Math.max(null==s?void 0:s.bottom,r))}t=e.scrollDOM.clientHeight-i-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function Ug(e,t){var n,i=qg(e),r=e.state,o=gg(r.selection,(function(n){return n.empty?e.moveVertically(n,t,i.height):yg(n,t)}));if(o.eq(r.selection))return!1;if(i.selfScroll){var a=e.coordsAtPos(r.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),l=s.top+i.marginTop,c=s.bottom-i.marginBottom;a&&a.top>l&&a.bottom<c&&(n=jl.scrollIntoView(o.main.head,{y:"start",yMargin:a.top-l}))}return e.dispatch(mg(r,o),{effects:n}),!0}var Wg=function(e){return Ug(e,!1)},_g=function(e){return Ug(e,!0)};function jg(e,t,n){var i=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?i.to:i.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==i.from&&i.length){var o=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&t.head!=i.from+o&&(r=Bi.cursor(i.from+o))}return r}var Gg=function(e){return vg(e,(function(t){return jg(e,t,!0)}))},Kg=function(e){return vg(e,(function(t){return jg(e,t,!1)}))},Yg=function(e){return vg(e,(function(t){return jg(e,t,!wg(e))}))},Xg=function(e){return vg(e,(function(t){return jg(e,t,wg(e))}))},$g=function(e){return vg(e,(function(t){return Bi.cursor(e.lineBlockAt(t.head).from,1)}))},Zg=function(e){return vg(e,(function(t){return Bi.cursor(e.lineBlockAt(t.head).to,-1)}))};function Qg(e,t,n){var i=!1,r=gg(e.selection,(function(t){var r=pd(e,t.head,-1)||pd(e,t.head,1)||t.head>0&&pd(e,t.head-1,1)||t.head<e.doc.length&&pd(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;var o=r.start.from==t.head?r.end.to:r.end.from;return n?Bi.range(t.anchor,o):Bi.cursor(o)}));return!!i&&(t(mg(e,r)),!0)}var Jg=function(e){return Qg(e.state,e.dispatch,!1)},em=function(e){return Qg(e.state,e.dispatch,!0)};function tm(e,t){var n=gg(e.state.selection,(function(e){var n=t(e);return Bi.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(mg(e.state,n)),!0)}function nm(e,t){return tm(e,(function(n){return e.moveByChar(n,t)}))}var im=function(e){return nm(e,!wg(e))},rm=function(e){return nm(e,wg(e))},om=function(e){return nm(e,!0)},am=function(e){return nm(e,!1)};function sm(e,t){return tm(e,(function(n){return e.moveByGroup(n,t)}))}var lm=function(e){return sm(e,!wg(e))},cm=function(e){return sm(e,wg(e))},um=function(e){return sm(e,!0)},hm=function(e){return sm(e,!1)};function pm(e,t){return tm(e,(function(n){return Lg(e,n,t)}))}var dm=function(e){return pm(e,!0)},fm=function(e){return pm(e,!1)},gm=function(e){return tm(e,(function(t){return Bg(e.state,t,!wg(e))}))},mm=function(e){return tm(e,(function(t){return Bg(e.state,t,wg(e))}))};function vm(e,t){return tm(e,(function(n){return e.moveVertically(n,t)}))}var ym=function(e){return vm(e,!1)},bm=function(e){return vm(e,!0)};function wm(e,t){return tm(e,(function(n){return e.moveVertically(n,t,qg(e).height)}))}var km=function(e){return wm(e,!1)},Cm=function(e){return wm(e,!0)},Em=function(e){return tm(e,(function(t){return jg(e,t,!0)}))},xm=function(e){return tm(e,(function(t){return jg(e,t,!1)}))},Sm=function(e){return tm(e,(function(t){return jg(e,t,!wg(e))}))},Mm=function(e){return tm(e,(function(t){return jg(e,t,wg(e))}))},Tm=function(e){return tm(e,(function(t){return Bi.cursor(e.lineBlockAt(t.head).from)}))},Dm=function(e){return tm(e,(function(t){return Bi.cursor(e.lineBlockAt(t.head).to)}))},Am=function(e){var t=e.state;return(0,e.dispatch)(mg(t,{anchor:0})),!0},Lm=function(e){var t=e.state;return(0,e.dispatch)(mg(t,{anchor:t.doc.length})),!0},Pm=function(e){var t=e.state;return(0,e.dispatch)(mg(t,{anchor:t.selection.main.anchor,head:0})),!0},Im=function(e){var t=e.state;return(0,e.dispatch)(mg(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0},Om=function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0},Fm=function(e){var t=e.state,n=e.dispatch,i=$m(t).map((function(e){var n=e.from,i=e.to;return Bi.range(n,Math.min(i+1,t.doc.length))}));return n(t.update({selection:Bi.create(i),userEvent:"select"})),!0},Bm=function(e){var t=e.state,n=e.dispatch,i=gg(t.selection,(function(e){for(var n,i=Hh(t).resolveInner(e.head,1);!(i.from<e.from&&i.to>=e.to||i.to>e.to&&i.from<=e.from)&&(null===(n=i.parent)||void 0===n?void 0:n.parent);)i=i.parent;return Bi.range(i.to,i.from)}));return n(mg(t,i)),!0},Nm=function(e){var t=e.state,n=e.dispatch,i=t.selection,r=null;return i.ranges.length>1?r=Bi.create([i.main]):i.main.empty||(r=Bi.create([Bi.cursor(i.main.head)])),!!r&&(n(mg(t,r)),!0)};function Rm(e,t){if(e.state.readOnly)return!1;var n="delete.selection",i=e.state,r=i.changeByRange((function(i){var r=i.from,o=i.to;if(r==o){var a=t(r);a<r?(n="delete.backward",a=Hm(e,a,!1)):a>r&&(n="delete.forward",a=Hm(e,a,!0)),r=Math.min(r,a),o=Math.max(o,a)}else r=Hm(e,r,!1),o=Hm(e,o,!0);return r==o?{range:i}:{changes:{from:r,to:o},range:Bi.cursor(r)}}));return!r.changes.empty&&(e.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?jl.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Hm(e,t,n){if(e instanceof jl)for(var i=0,r=e.state.facet(jl.atomicRanges).map((function(t){return t(e)}));i<r.length;i++){r[i].between(t,t,(function(e,i){e<t&&i>t&&(t=n?i:e)}))}return t}var Vm=function(e,t){return Rm(e,(function(n){var i,r,o=e.state,a=o.doc.lineAt(n);if(!t&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(i=a.text.slice(0,n-a.from))){if("\t"==i[i.length-1])return n-1;for(var s=Wr(i,o.tabSize)%np(o)||np(o),l=0;l<s&&" "==i[i.length-1-l];l++)n--;r=n}else(r=mi(a.text,n-a.from,t,t)+a.from)==n&&a.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);return r}))},zm=function(e){return Vm(e,!1)},qm=function(e){return Vm(e,!0)},Um=function(e,t){return Rm(e,(function(n){for(var i=n,r=e.state,o=r.doc.lineAt(i),a=r.charCategorizer(i),s=null;;){if(i==(t?o.to:o.from)){i==n&&o.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}var l=mi(o.text,i-o.from,t)+o.from,c=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),u=a(c);if(null!=s&&u!=s)break;" "==c&&i==n||(s=u),i=l}return i}))},Wm=function(e){return Um(e,!1)},_m=function(e){return Um(e,!0)},jm=function(e){return Rm(e,(function(t){var n=e.lineBlockAt(t).to;return t<n?n:Math.min(e.state.doc.length,t+1)}))},Gm=function(e){return Rm(e,(function(t){var n=e.lineBlockAt(t).from;return t>n?n:Math.max(0,t-1)}))},Km=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;for(var i=[],r=0,o="",a=t.doc.iter();;){if(a.next(),a.lineBreak||a.done){var s=o.search(/\s+$/);if(s>-1&&i.push({from:r-(o.length-s),to:r}),a.done)break;o=""}else o=a.value;r+=a.value.length}return!!i.length&&(n(t.update({changes:i,userEvent:"delete"})),!0)},Ym=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=t.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:ii.of(["",""])},range:Bi.cursor(e.from)}}));return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},Xm=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=t.changeByRange((function(e){if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};var n=e.from,i=t.doc.lineAt(n),r=n==i.from?n-1:mi(i.text,n-i.from,!1)+i.from,o=n==i.to?n+1:mi(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(r,n))},range:Bi.cursor(o)}}));return!i.changes.empty&&(n(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function $m(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.from),s=e.doc.lineAt(o.to);if(o.empty||o.to!=s.from||(s=e.doc.lineAt(o.to-1)),n>=a.number){var l=t[t.length-1];l.to=s.to,l.ranges.push(o)}else t.push({from:a.from,to:s.to,ranges:[o]});n=s.number+1}return t}function Zm(e,t,n){if(e.readOnly)return!1;for(var i=[],r=[],o=0,a=$m(e);o<a.length;o++){var s=a[o];if(n?s.to!=e.doc.length:0!=s.from){var l=e.doc.lineAt(n?s.to+1:s.from-1),c=l.length+1;if(n){i.push({from:s.to,to:l.to},{from:s.from,insert:l.text+e.lineBreak});for(var u=0,h=s.ranges;u<h.length;u++){var p=h[u];r.push(Bi.range(Math.min(e.doc.length,p.anchor+c),Math.min(e.doc.length,p.head+c)))}}else{i.push({from:l.from,to:s.from},{from:s.to,insert:e.lineBreak+l.text});for(var d=0,f=s.ranges;d<f.length;d++){p=f[d];r.push(Bi.range(p.anchor-c,p.head-c))}}}}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:Bi.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}var Qm=function(e){return Zm(e.state,e.dispatch,!1)},Jm=function(e){return Zm(e.state,e.dispatch,!0)};function ev(e,t,n){if(e.readOnly)return!1;for(var i=[],r=0,o=$m(e);r<o.length;r++){var a=o[r];n?i.push({from:a.from,insert:e.doc.slice(a.from,a.to)+e.lineBreak}):i.push({from:a.to,insert:e.lineBreak+e.doc.slice(a.from,a.to)})}return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var tv=function(e){return ev(e.state,e.dispatch,!1)},nv=function(e){return ev(e.state,e.dispatch,!0)},iv=function(e){if(e.state.readOnly)return!1;var t=e.state,n=t.changes($m(t).map((function(e){var n=e.from,i=e.to;return n>0?n--:i<t.doc.length&&i++,{from:n,to:i}}))),i=gg(t.selection,(function(t){return e.moveVertically(t,!0)})).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0},rv=function(e){var t=e.state;return(0,e.dispatch)(t.update(t.replaceSelection(t.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0};var ov=sv(!1),av=sv(!0);function sv(e){return function(t){var n=t.state,i=t.dispatch;if(n.readOnly)return!1;var r=n.changeByRange((function(t){var i=t.from,r=t.to,o=n.doc.lineAt(i),a=!e&&i==r&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};var n,i=Hh(e).resolveInner(t),r=i.childBefore(t),o=i.childAfter(t);return r&&o&&r.to<=t&&o.from>=t&&(n=r.type.prop(mn.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from?{from:r.to,to:o.from}:null}(n,i);e&&(i=r=(r<=o.to?o:n.doc.lineAt(r)).to);var s=new ap(n,{simulateBreak:i,simulateDoubleBreak:!!a}),l=rp(s,i);for(null==l&&(l=/^\s*/.exec(n.doc.lineAt(i).text)[0].length);r<o.to&&/\s/.test(o.text[r-o.from]);)r++;a?(i=a.from,r=a.to):i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);var c=["",ip(n,l)];return a&&c.push(ip(n,s.lineIndent(o.from,-1))),{changes:{from:i,to:r,insert:ii.of(c)},range:Bi.cursor(i+1+c[1].length)}}));return i(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function lv(e,t){var n=-1;return e.changeByRange((function(i){for(var r=[],o=i.from;o<=i.to;){var a=e.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(t(a,r,i),n=a.number),o=a.to+1}var s=e.changes(r);return{changes:r,range:Bi.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}var cv=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=Object.create(null),r=new ap(t,{overrideIndentation:function(e){var t=i[e];return null==t?-1:t}}),o=lv(t,(function(e,n,o){var a=rp(r,e.from);if(null!=a){/\S/.test(e.text)||(a=0);var s=/^\s*/.exec(e.text)[0],l=ip(t,a);(s!=l||o.from<e.from+s.length)&&(i[e.from]=a,n.push({from:e.from,to:e.from+s.length,insert:l}))}}));return o.changes.empty||n(t.update(o,{userEvent:"indent"})),!0},uv=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(lv(t,(function(e,n){n.push({from:e.from,insert:t.facet(tp)})})),{userEvent:"input.indent"})),!0)},hv=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(lv(t,(function(e,n){var i=/^\s*/.exec(e.text)[0];if(i){for(var r=Wr(i,t.tabSize),o=0,a=ip(t,Math.max(0,r-np(t)));o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+i.length,insert:a.slice(o)})}})),{userEvent:"delete.dedent"})),!0)},pv=function(e){var t=e.state,n=e.dispatch;return t.selection.ranges.some((function(e){return!e.empty}))?uv({state:t,dispatch:n}):(n(t.update(t.replaceSelection("\t"),{scrollIntoView:!0,userEvent:"input"})),!0)},dv=[{key:"Ctrl-b",run:kg,shift:im,preventDefault:!0},{key:"Ctrl-f",run:Cg,shift:rm},{key:"Ctrl-p",run:Vg,shift:ym},{key:"Ctrl-n",run:zg,shift:bm},{key:"Ctrl-a",run:$g,shift:Tm},{key:"Ctrl-e",run:Zg,shift:Dm},{key:"Ctrl-d",run:qm},{key:"Ctrl-h",run:zm},{key:"Ctrl-k",run:jm},{key:"Ctrl-Alt-h",run:Wm},{key:"Ctrl-o",run:Ym},{key:"Ctrl-t",run:Xm},{key:"Ctrl-v",run:_g}],fv=[{key:"ArrowLeft",run:kg,shift:im,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Mg,shift:lm,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Yg,shift:Sm,preventDefault:!0},{key:"ArrowRight",run:Cg,shift:rm,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Tg,shift:cm,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Xg,shift:Mm,preventDefault:!0},{key:"ArrowUp",run:Vg,shift:ym,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Am,shift:Pm},{mac:"Ctrl-ArrowUp",run:Wg,shift:km},{key:"ArrowDown",run:zg,shift:bm,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Lm,shift:Im},{mac:"Ctrl-ArrowDown",run:_g,shift:Cm},{key:"PageUp",run:Wg,shift:km},{key:"PageDown",run:_g,shift:Cm},{key:"Home",run:Kg,shift:xm,preventDefault:!0},{key:"Mod-Home",run:Am,shift:Pm},{key:"End",run:Gg,shift:Em,preventDefault:!0},{key:"Mod-End",run:Lm,shift:Im},{key:"Enter",run:ov},{key:"Mod-a",run:Om},{key:"Backspace",run:zm,shift:zm},{key:"Delete",run:qm},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Wm},{key:"Mod-Delete",mac:"Alt-Delete",run:_m},{mac:"Mod-Backspace",run:Gm},{mac:"Mod-Delete",run:jm}].concat(dv.map((function(e){return{mac:e.key,run:e.run,shift:e.shift}}))),gv=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ng,shift:gm},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Rg,shift:mm},{key:"Alt-ArrowUp",run:Qm},{key:"Shift-Alt-ArrowUp",run:tv},{key:"Alt-ArrowDown",run:Jm},{key:"Shift-Alt-ArrowDown",run:nv},{key:"Escape",run:Nm},{key:"Mod-Enter",run:av},{key:"Alt-l",mac:"Ctrl-l",run:Fm},{key:"Mod-i",run:Bm,preventDefault:!0},{key:"Mod-[",run:hv},{key:"Mod-]",run:uv},{key:"Mod-Alt-\\",run:cv},{key:"Shift-Mod-k",run:iv},{key:"Shift-Mod-\\",run:Jg},{key:"Mod-/",run:Pf},{key:"Alt-A",run:Nf}].concat(fv),mv={key:"Tab",run:uv,shift:hv};function vv(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?e.setAttribute(i,r):null!=r&&(e[i]=r)}t++}for(;t<arguments.length;t++)yv(e,arguments[t]);return e}function yv(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)yv(e,t[n])}}var bv="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},wv=function(){function e(e,t,n,i,r,o){void 0===n&&(n=0),void 0===i&&(i=e.length),this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?function(e){return r(bv(e))}:bv,this.query=this.normalize(t)}return e.prototype.peek=function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ki(this.buffer,this.bufferPos)},e.prototype.next=function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()},e.prototype.nextOverlapping=function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=Ci(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Ei(e);for(var i=this.normalize(t),r=0,o=n;;r++){var a=i.charCodeAt(r),s=this.match(a,o);if(r==i.length-1){if(s)return this.value=s,this;break}o==n&&r<t.length&&t.charCodeAt(r)==a&&o++}}},e.prototype.match=function(e,t){for(var n=null,i=0;i<this.matches.length;i+=2){var r=this.matches[i],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?n={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n},e}();"undefined"!=typeof Symbol&&(wv.prototype[Symbol.iterator]=function(){return this});var kv={from:-1,to:-1,match:/.*/.exec("")},Cv="gm"+(null==/x/.unicode?"":"u"),Ev=function(){function e(e,t,n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=e.length),this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=kv,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Mv(e,t,n,i,r);this.re=new RegExp(t,Cv+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();var o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Tv(e,i),this.getLine(this.curLineStart)}return e.prototype.getLine=function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())},e.prototype.nextLine=function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)},e.prototype.next=function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=Tv(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}},e}(),xv=new WeakMap,Sv=function(){function e(e,t){this.from=e,this.text=t}return Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.text.length},enumerable:!1,configurable:!0}),e.get=function(t,n,i){var r=xv.get(t);if(!r||r.from>=i||r.to<=n){var o=new e(n,t.sliceString(n,i));return xv.set(t,o),o}if(r.from==n&&r.to==i)return r;var a=r.text,s=r.from;return s>n&&(a=t.sliceString(n,s)+a,s=n),r.to<i&&(a+=t.sliceString(r.to,i)),xv.set(t,new e(s,a)),new e(n,a.slice(n-s,i-s))},e}(),Mv=function(){function e(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=kv,this.matchPos=Tv(e,i),this.re=new RegExp(t,Cv+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Sv.get(e,i,this.chunkEnd(i+5e3))}return e.prototype.chunkEnd=function(e){return e>=this.to?this.to:this.text.lineAt(e).to},e.prototype.next=function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){var n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=Tv(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Sv.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}},e}();function Tv(e,t){if(t>=e.length)return t;for(var n,i=e.lineAt(t);t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function Dv(e){var t=vv("input",{class:"cm-textfield",name:"line"});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(n){var i=e.state,r=i.doc.lineAt(i.selection.main.head),o=n[1],a=n[2],s=n[3],l=n[4],c=s?+s.slice(1):0,u=a?+a:r.number;if(a&&l){var h=u/100;o&&(h=h*("-"==o?-1:1)+r.number/i.doc.lines),u=Math.round(i.doc.lines*h)}else a&&o&&(u=u*("-"==o?-1:1)+r.number);var p=i.doc.line(Math.max(1,Math.min(i.doc.lines,u))),d=Bi.cursor(p.from+Math.max(0,Math.min(c,p.length)));e.dispatch({effects:[Av.of(!1),jl.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}}return{dom:vv("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:Av.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:function(e){e.preventDefault(),n()}},vv("label",e.state.phrase("Go to line"),": ",t)," ",vv("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Ev.prototype[Symbol.iterator]=Mv.prototype[Symbol.iterator]=function(){return this});var Av=dr.define(),Lv=_i.define({create:function(){return!0},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(Av)&&(e=r.value)}return e},provide:function(e){return xu.from(e,(function(e){return e?Dv:null}))}}),Pv=function(e){var t=wu(e,Dv);if(!t){var n=[Av.of(!0)];null==e.state.field(Lv,!1)&&n.push(dr.appendConfig.of([Lv,Iv])),e.dispatch({effects:n}),t=wu(e,Dv)}return t&&t.dom.querySelector("input").focus(),!0},Iv=jl.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Ov={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Fv=Hi.define({combine:function(e){return Mr(e,Ov,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function Bv(e){var t=[zv,Vv];return e&&t.push(Fv.of(e)),t}var Nv=ca.mark({class:"cm-selectionMatch"}),Rv=ca.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Hv(e,t,n,i){return!(0!=n&&e(t.sliceDoc(n-1,n))==Cr.Word||i!=t.doc.length&&e(t.sliceDoc(i,i+1))==Cr.Word)}var Vv=Ba.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){var t=e.state.facet(Fv),n=e.state,i=n.selection;if(i.ranges.length>1)return ca.none;var r,o=i.main,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return ca.none;var s=n.wordAt(o.head);if(!s)return ca.none;a=n.charCategorizer(o.head),r=n.sliceDoc(s.from,s.to)}else{var l=o.to-o.from;if(l<t.minSelectionLength||l>200)return ca.none;if(t.wholeWords){if(r=n.sliceDoc(o.from,o.to),!Hv(a=n.charCategorizer(o.head),n,o.from,o.to)||!function(e,t,n,i){return e(t.sliceDoc(n,n+1))==Cr.Word&&e(t.sliceDoc(i-1,i))==Cr.Word}(a,n,o.from,o.to))return ca.none}else if(!(r=n.sliceDoc(o.from,o.to).trim()))return ca.none}for(var c=[],u=0,h=e.visibleRanges;u<h.length;u++)for(var p=h[u],d=new wv(n.doc,r,p.from,p.to);!d.next().done;){var f=d.value,g=f.from,m=f.to;if((!a||Hv(a,n,g,m))&&(o.empty&&g<=o.from&&m>=o.to?c.push(Rv.range(g,m)):(g>=o.to||m<=o.from)&&c.push(Nv.range(g,m)),c.length>t.maxMatches))return ca.none}return ca.set(c)},e}(),{decorations:function(e){return e.decorations}}),zv=jl.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var qv=function(e){var t=e.state,n=e.dispatch,i=t.selection.ranges;if(i.some((function(e){return e.from===e.to})))return function(e){var t=e.state,n=e.dispatch,i=t.selection,r=Bi.create(i.ranges.map((function(e){return t.wordAt(e.head)||Bi.cursor(e.head)})),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)}({state:t,dispatch:n});var r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((function(e){return t.sliceDoc(e.from,e.to)!=r})))return!1;var o=function(e,t){for(var n,i,r=e.selection,o=r.main,a=r.ranges,s=e.wordAt(o.head),l=s&&s.from==o.from&&s.to==o.to,c=function(r,o){if(o.next(),!o.done){if(r&&a.some((function(e){return e.from==o.value.from})))return n=r,i=o,"continue";if(l){var s=e.wordAt(o.value.from);if(!s||s.from!=o.value.from||s.to!=o.value.to)return n=r,i=o,"continue"}return{value:o.value}}if(r)return{value:null};o=new wv(e.doc,t,0,Math.max(0,a[a.length-1].from-1)),n=r=!0,i=o},u=!1,h=new wv(e.doc,t,a[a.length-1].to);;){var p=c(u,h);if(u=n,h=i,"object"==typeof p)return p.value}}(t,r);return!!o&&(n(t.update({selection:t.selection.addRange(Bi.range(o.from,o.to),!1),effects:jl.scrollIntoView(o.to)})),!0)},Uv=Hi.define({combine:function(e){return Mr(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:function(e){return new ky(e)},scrollToMatch:function(e){return jl.scrollIntoView(e)}})}});function Wv(e){return e?[Uv.of(e),My]:My}var _v=function(){function e(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Cv),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}return e.prototype.unquote=function(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"}))},e.prototype.eq=function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord},e.prototype.create=function(){return this.regexp?new Zv(this):new Kv(this)},e.prototype.getCursor=function(e,t,n){void 0===t&&(t=0);var i=e.doc?e:Sr.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?Yv(this,i,t,n):Gv(this,i,t,n)},e}(),jv=function(e){this.spec=e};function Gv(e,t,n,i){return new wv(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:function(e){return e.toLowerCase()},e.wholeWord?function(e,t){return function(n,i,r,o){return(o>n||o+r.length<i)&&(o=Math.max(0,n-2),r=e.sliceString(o,Math.min(e.length,i+2))),!(t(Xv(r,n-o))==Cr.Word&&t($v(r,n-o))==Cr.Word||t($v(r,i-o))==Cr.Word&&t(Xv(r,i-o))==Cr.Word)}}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}var Kv=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.nextMatch=function(e,t,n){var i=Gv(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=Gv(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value},t.prototype.prevMatchInRange=function(e,t,n){for(var i=n;;){for(var r=Math.max(t,i-1e4-this.spec.unquoted.length),o=Gv(this.spec,e,r,i),a=null;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==t)return null;i-=1e4}},t.prototype.prevMatch=function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)},t.prototype.getReplacement=function(e){return this.spec.unquote(this.spec.replace)},t.prototype.matchAll=function(e,t){for(var n=Gv(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i},t.prototype.highlight=function(e,t,n,i){for(var r=Gv(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)},t}(jv);function Yv(e,t,n,i){return new Ev(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),function(e,t,n){return!n[0].length||(r(Xv(n.input,n.index))!=Cr.Word||r($v(n.input,n.index))!=Cr.Word)&&(r($v(n.input,n.index+n[0].length))!=Cr.Word||r(Xv(n.input,n.index+n[0].length))!=Cr.Word)}):void 0},n,i);var r}function Xv(e,t){return e.slice(mi(e,t,!1),t)}function $v(e,t){return e.slice(t,mi(e,t))}var Zv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.nextMatch=function(e,t,n){var i=Yv(this.spec,e,n,e.doc.length).next();return i.done&&(i=Yv(this.spec,e,0,t).next()),i.done?null:i.value},t.prototype.prevMatchInRange=function(e,t,n){for(var i=1;;i++){for(var r=Math.max(t,n-1e4*i),o=Yv(this.spec,e,r,n),a=null;!o.next().done;)a=o.value;if(a&&(r==t||a.from>r+10))return a;if(r==t)return null}},t.prototype.prevMatch=function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)},t.prototype.getReplacement=function(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t})))},t.prototype.matchAll=function(e,t){for(var n=Yv(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i},t.prototype.highlight=function(e,t,n,i){for(var r=Yv(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)},t}(jv),Qv=dr.define(),Jv=dr.define(),ey=_i.define({create:function(e){return new iy(gy(e).create(),null)},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(Qv)?e=new iy(r.value.create(),e.panel):r.is(Jv)&&(e=new iy(e.query,r.value?fy:null))}return e},provide:function(e){return xu.from(e,(function(e){return e.panel}))}});function ty(e){var t=e.field(ey,!1);return t?t.query.spec:gy(e)}function ny(e){var t;return null!=(null===(t=e.field(ey,!1))||void 0===t?void 0:t.panel)}var iy=function(e,t){this.query=e,this.panel=t},ry=ca.mark({class:"cm-searchMatch"}),oy=ca.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ay=Ba.fromClass(function(){function e(e){this.view=e,this.decorations=this.highlight(e.state.field(ey))}return e.prototype.update=function(e){var t=e.state.field(ey);(t!=e.startState.field(ey)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))},e.prototype.highlight=function(e){var t=e.query;if(!e.panel||!t.spec.valid)return ca.none;for(var n=this.view,i=new Ir,r=0,o=n.visibleRanges,a=o.length;r<a;r++){for(var s=o[r],l=s.from,c=s.to;r<a-1&&c>o[r+1].from-500;)c=o[++r].to;t.highlight(n.state,l,c,(function(e,t){var r=n.state.selection.ranges.some((function(n){return n.from==e&&n.to==t}));i.add(e,t,r?oy:ry)}))}return i.finish()},e}(),{decorations:function(e){return e.decorations}});function sy(e){return function(t){var n=t.state.field(ey,!1);return n&&n.query.spec.valid?e(t,n):yy(t)}}var ly=sy((function(e,t){var n=t.query,i=e.state.selection.main.to,r=n.nextMatch(e.state,i,i);if(!r)return!1;var o=Bi.single(r.from,r.to),a=e.state.facet(Uv);return e.dispatch({selection:o,effects:[xy(e,r),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),vy(e),!0})),cy=sy((function(e,t){var n=t.query,i=e.state,r=i.selection.main.from,o=n.prevMatch(i,r,r);if(!o)return!1;var a=Bi.single(o.from,o.to),s=e.state.facet(Uv);return e.dispatch({selection:a,effects:[xy(e,o),s.scrollToMatch(a.main,e)],userEvent:"select.search"}),vy(e),!0})),uy=sy((function(e,t){var n=t.query.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:Bi.create(n.map((function(e){return Bi.range(e.from,e.to)}))),userEvent:"select.search.matches"}),!0)})),hy=function(e){var t=e.state,n=e.dispatch,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;for(var r=i.main,o=r.from,a=r.to,s=[],l=0,c=new wv(t.doc,t.sliceDoc(o,a));!c.next().done;){if(s.length>1e3)return!1;c.value.from==o&&(l=s.length),s.push(Bi.range(c.value.from,c.value.to))}return n(t.update({selection:Bi.create(s,l),userEvent:"select.search.matches"})),!0},py=sy((function(e,t){var n=t.query,i=e.state,r=i.selection.main,o=r.from,a=r.to;if(i.readOnly)return!1;var s=n.nextMatch(i,o,o);if(!s)return!1;var l,c,u=[],h=[];if(s.from==o&&s.to==a&&(c=i.toText(n.getReplacement(s)),u.push({from:s.from,to:s.to,insert:c}),s=n.nextMatch(i,s.from,s.to),h.push(jl.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(o).number)+"."))),s){var p=0==u.length||u[0].from>=s.to?0:s.to-s.from-c.length;l=Bi.single(s.from-p,s.to-p),h.push(xy(e,s)),h.push(i.facet(Uv).scrollToMatch(l.main,e))}return e.dispatch({changes:u,selection:l,effects:h,userEvent:"input.replace"}),!0})),dy=sy((function(e,t){var n=t.query;if(e.state.readOnly)return!1;var i=n.matchAll(e.state,1e9).map((function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}}));if(!i.length)return!1;var r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:jl.announce.of(r),userEvent:"input.replace.all"}),!0}));function fy(e){return e.state.facet(Uv).createPanel(e)}function gy(e,t){var n,i,r,o,a,s=e.selection.main,l=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!l)return t;var c=e.facet(Uv);return new _v({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(a=null==t?void 0:t.wholeWord)&&void 0!==a?a:c.wholeWord})}function my(e){var t=wu(e,fy);return t&&t.dom.querySelector("[main-field]")}function vy(e){var t=my(e);t&&t==e.root.activeElement&&t.select()}var yy=function(e){var t=e.state.field(ey,!1);if(t&&t.panel){var n=my(e);if(n&&n!=e.root.activeElement){var i=gy(e.state,t.query.spec);i.valid&&e.dispatch({effects:Qv.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[Jv.of(!0),t?Qv.of(gy(e.state,t.query.spec)):dr.appendConfig.of(My)]});return!0},by=function(e){var t=e.state.field(ey,!1);if(!t||!t.panel)return!1;var n=wu(e,fy);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Jv.of(!1)}),!0},wy=[{key:"Mod-f",run:yy,scope:"editor search-panel"},{key:"F3",run:ly,shift:cy,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ly,shift:cy,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:by,scope:"editor search-panel"},{key:"Mod-Shift-l",run:hy},{key:"Alt-g",run:Pv},{key:"Mod-d",run:qv,preventDefault:!0}],ky=function(){function e(e){var t=this;this.view=e;var n=this.query=e.state.field(ey).query.spec;function i(e,t,n){return vv("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=vv("input",{value:n.search,placeholder:Cy(e,"Find"),"aria-label":Cy(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=vv("input",{value:n.replace,placeholder:Cy(e,"Replace"),"aria-label":Cy(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=vv("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=vv("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=vv("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit}),this.dom=vv("div",{onkeydown:function(e){return t.keydown(e)},class:"cm-search"},w(w([this.searchField,i("next",(function(){return ly(e)}),[Cy(e,"next")]),i("prev",(function(){return cy(e)}),[Cy(e,"previous")]),i("select",(function(){return uy(e)}),[Cy(e,"all")]),vv("label",null,[this.caseField,Cy(e,"match case")]),vv("label",null,[this.reField,Cy(e,"regexp")]),vv("label",null,[this.wordField,Cy(e,"by word")])],e.state.readOnly?[]:[vv("br"),this.replaceField,i("replace",(function(){return py(e)}),[Cy(e,"replace")]),i("replaceAll",(function(){return dy(e)}),[Cy(e,"replace all")])],!0),[vv("button",{name:"close",onclick:function(){return by(e)},"aria-label":Cy(e,"close"),type:"button"},["×"])],!1))}return e.prototype.commit=function(){var e=new _v({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Qv.of(e)}))},e.prototype.keydown=function(e){nc(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?cy:ly)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),py(this.view))},e.prototype.update=function(e){for(var t=0,n=e.transactions;t<n.length;t++)for(var i=0,r=n[t].effects;i<r.length;i++){var o=r[i];o.is(Qv)&&!o.value.eq(this.query)&&this.setQuery(o.value)}},e.prototype.setQuery=function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord},e.prototype.mount=function(){this.searchField.select()},Object.defineProperty(e.prototype,"pos",{get:function(){return 80},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.view.state.facet(Uv).top},enumerable:!1,configurable:!0}),e}();function Cy(e,t){return e.state.phrase(t)}var Ey=/[\s\.,:;?!]/;function xy(e,t){var n=t.from,i=t.to,r=e.state.doc.lineAt(n),o=e.state.doc.lineAt(i).to,a=Math.max(r.from,n-30),s=Math.min(o,i+30),l=e.state.sliceDoc(a,s);if(a!=r.from)for(var c=0;c<30;c++)if(!Ey.test(l[c+1])&&Ey.test(l[c])){l=l.slice(c);break}if(s!=o)for(c=l.length-1;c>l.length-30;c--)if(!Ey.test(l[c-1])&&Ey.test(l[c])){l=l.slice(0,c);break}return jl.announce.of("".concat(e.state.phrase("current match"),". ").concat(l," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))}var Sy=jl.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),My=[ey,$i.lowest(ay),Sy],Ty=new window.TurndownService({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",fence:"```",linkStyle:"inlined"});Ty.remove(["script","style","title"]),Ty.addRule("strikethrough",{filter:["del","s"],replacement:function(e){return"~~"+e+"~~"}}),Ty.addRule("highlight",{filter:["mark"],replacement:function(e){return"=="+e+"=="}});var Dy=/highlight-(?:text|source)-([a-z0-9]+)/;Ty.addRule("highlightedCodeBlock",{filter:function(e){var t=e.firstChild;return"DIV"===e.nodeName&&Dy.test(e.className)&&t&&"PRE"===t.nodeName},replacement:function(e,t,n){var i=((t.className||"").match(Dy)||[null,""])[1];return"\n\n"+n.fence+i+"\n"+t.firstChild.textContent+"\n"+n.fence+"\n\n"}}),Ty.addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var i=n.bulletListMarker+" ",r=t.parentNode;if("OL"===r.nodeName){var o=r.getAttr("start"),a=Array.prototype.indexOf.call(r.children,t);i=(o?Number(o)+a:a+1)+". "}return i+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),Ty.addRule("taskListItems",{filter:function(e){return e.instanceOf(HTMLInputElement)&&"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,t){return t.checked?"[x] ":"[ ] "}}),Ty.addRule("tableCell",{filter:["th","td"],replacement:function(e,t){return(0===Array.prototype.indexOf.call(t.parentNode.childNodes,t)?"|":"")+function(e){return(e=e.trim().replace(/\|+/g,"\\|").replace(/\n\r?/g,"<br>"))+"|"}(e)+Iy(t,"   |")}});var Ay={left:":--",right:"--:",center:":-:"};function Ly(e){if(!e)return!1;var t,n,i=e.parentNode;return"THEAD"===i.nodeName||i.firstChild===e&&("TABLE"===i.nodeName||(n=(t=i).previousSibling,"TBODY"===t.nodeName&&(!n||"THEAD"===n.nodeName&&/^\s*$/i.test(n.textContent))))&&Array.prototype.every.call(e.childNodes,(function(e){return"TH"===e.nodeName}))}function Py(e){var t=e.getAttribute("colspan");if(!t)return 0;var n=parseInt(t);return isNaN(n)?0:Math.max(0,n-1)}function Iy(e,t){return t.repeat(Py(e))}function Oy(e){return Ty.turndown(e)}Ty.addRule("tableRow",{filter:"tr",replacement:function(e,t){var n="";if(Ly(t))for(var i=0;i<t.cells.length;i++){var r=t.cells[i],o=(r.getAttribute("align")||"").toLowerCase(),a=Ay[o]||"---";n+=(0===i?"|":"")+a+"|"+Iy(r,a+"|")}return"\n"+e+(n?"\n"+n:"")}}),Ty.addRule("table",{filter:"table",replacement:function(e,t){var n=t.rows[0];if(!Ly(n)){for(var i=n.cells.length,r=0;r<n.cells.length;r++)i+=Py(n.cells[r]);e="|"+"   |".repeat(i)+"\n|"+"---|".repeat(i)+"\n"+e.replace(/^[\r\n]+/,"")}return"\n\n"+(e=e.replace(/[\r\n]+/g,"\n"))+"\n\n"}}),Ty.addRule("tableSection",{filter:["thead","tbody","tfoot"],replacement:function(e){return e}}),Ty.escape=function(e){return e};var Fy=["accentColor","theme","cssTheme","enabledCssSnippets","showViewHeader","nativeMenus","translucency","textFontFamily","interfaceFontFamily","monospaceFontFamily","baseFontSize","baseFontSizeAction"],By={alwaysUpdateLinks:!1,spellcheck:!0,spellcheckLanguages:null,readableLineLength:!0,strictLineBreaks:!1,propertiesInDocument:"visible",showInlineTitle:!0,showViewHeader:!0,mobileQuickRibbonItem:"",useMarkdownLinks:!1,showUnsupportedFiles:!1,autoPairBrackets:!0,autoPairMarkdown:!0,smartIndentList:!0,foldHeading:!0,foldIndent:!0,showLineNumber:!1,showIndentGuide:!0,useTab:!0,tabSize:4,rightToLeft:!1,autoConvertHtml:!0,vimMode:!1,emacsyKeys:!0,legacyEditor:!1,livePreview:!0,nativeMenus:null,attachmentFolderPath:"/",newFileLocation:"root",newFileFolderPath:"/",newLinkFormat:"shortest",userIgnoreFilters:null,fileSortOrder:"alphabetical",focusNewTab:!0,defaultViewMode:"source",promptDelete:!0,trashOption:"system",pdfExportSettings:{pageSize:"Letter",landscape:!1,margin:"0",downscalePercent:100},mobilePullAction:"command-palette:open",mobileToolbarCommands:["editor:insert-wikilink","editor:insert-embed","editor:insert-tag","editor:attach-file","editor:set-heading","editor:toggle-bold","editor:toggle-italics","editor:toggle-strikethrough","editor:toggle-highlight","editor:toggle-code","editor:toggle-blockquote","editor:toggle-comment","editor:insert-link","editor:toggle-bullet-list","editor:toggle-numbered-list","editor:toggle-checklist-status","editor:indent-list","editor:unindent-list","editor:undo","editor:redo","editor:configure-toolbar"],hotkeys:{},theme:"obsidian",accentColor:"",cssTheme:"",enabledCssSnippets:[],translucency:!1,textFontFamily:"",interfaceFontFamily:"",monospaceFontFamily:"",baseFontSize:16,baseFontSizeAction:!0,types:{}},Ny=function(){function e(){this._={}}return e.prototype.on=function(e,t,n){var i=this._,r=i[e];r||(i[e]=r=[]);var o={e:this,name:e,fn:t,ctx:n};return r.push(o),o},e.prototype.off=function(e,t){var n=this._,i=n[e],r=[];if(i&&t)for(var o=0;o<i.length;o++)i[o].fn!==t&&r.push(i[o]);r.length>0?n[e]=r:delete n[e]},e.prototype.offref=function(e){if(e){var t=e.name,n=this._,i=n[t],r=[];if(i&&e)for(var o=0;o<i.length;o++)i[o]!==e&&r.push(i[o]);r.length?n[t]=r:delete n[t]}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._,r=i[e];if(r){r=r.slice();for(var o=0;o<r.length;o++)this.tryTrigger(r[o],t)}},e.prototype.tryTrigger=function(e,t){try{e.fn.apply(e.ctx,t)}catch(e){setTimeout((function(){throw e}),0)}},e}(),Ry="#^[]|",Hy=be?'*"\\/<>:|?':"\\/:"+(Ee?'*?<>"':""),Vy=Hy.split("").join(" "),zy=Ry.split("").join(" "),qy=new RegExp("["+Ye(Hy)+"]"),Uy=new RegExp("["+Ye(Ry)+"]"),Wy=/^(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])$/i;function _y(e){try{return jy(e),!0}catch(e){return!1}}function jy(e){if(be){var t=e.charAt(e.length-1);if("."===t||" "===t)throw new Error("File names cannot end with a dot or a space.");var n=ae(e);if(Wy.test(n))throw new Error("File name is forbidden: "+n)}if(e.split("/").some((function(e){return qy.test(e)})))throw new Error("File name cannot contain any of the following characters: "+Vy)}var Gy=".obsidian",Ky=function(){function e(e,t){this.parent=null,this.deleted=!1,this.vault=e,this.setPath(t)}return e.prototype.setPath=function(e){this.path=e,this.name=ie(e)},e.prototype.getNewPathAfterRename=function(e){return e=e.replace(/[\x00-\x1F]/g," ").trim(),this.parent?this.parent.isRoot()?e:this.parent.path+"/"+e:""},e}(),Yy=new WeakMap,Xy=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.saving=!1,i.stat=null,i}return f(t,e),t.prototype.setPath=function(t){e.prototype.setPath.call(this,t),this.basename=ae(this.name),this.extension=le(this.name)},t.prototype.getShortName=function(){return"md"===this.extension?this.basename:this.name},t.prototype.getNewPathAfterRename=function(t){return e.prototype.getNewPathAfterRename.call(this,ce(t,this.extension))},t.prototype.cache=function(e){if(null!=e){var t=this.vault.cacheLimit;e.length<=t?Yy.set(this,e):Yy.delete(this)}else Yy.delete(this)},t.prototype.updateCacheLimit=function(){var e=this.vault.cacheLimit;Yy.has(this)&&Yy.get(this).length>e&&Yy.delete(this)},t}(Ky),$y=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.children=[],i}return f(t,e),t.prototype.isRoot=function(){return"/"===this.path},t.prototype.getParentPrefix=function(){return this.isRoot()?"":this.path+"/"},t.prototype.getFileCount=function(){for(var e=0,n=0,i=this.children;n<i.length;n++){var r=i[n];e+=r instanceof t?r.getFileCount():1}return e},t.prototype.getFolderCount=function(){for(var e=0,n=0,i=this.children;n<i.length;n++){var r=i[n];r instanceof t&&(e+=1+r.getFolderCount())}return e},t}(Ky),Zy=function(e){function t(t){var n=e.call(this)||this;return n.fileMap={},n.config={},n.configTs=0,n.configDir=Gy,n.requestSaveConfig=rt(n.saveConfig.bind(n),1e3,!0),n.cacheLimit=65536,n.reloadConfig=rt((function(){return v(n,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:e=this.getConfigFile("app"),t=this.getConfigFile("appearance"),n=!1,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.adapter.stat(e)];case 2:return c.sent().mtime>this.configTs&&(n=!0),[3,4];case 3:return c.sent(),n=!0,[3,4];case 4:return c.trys.push([4,6,,7]),[4,this.adapter.stat(t)];case 5:return c.sent().mtime>this.configTs&&(n=!0),[3,7];case 6:return c.sent(),n=!0,[3,7];case 7:return n?(this.configTs=Date.now(),[4,this.readConfigJson("app")]):[2];case 8:return i=c.sent(),[4,this.readConfigJson("appearance")];case 9:for(l in r=c.sent(),o=Object.assign({},r,i),a=this.config,s=!1,o)o.hasOwnProperty(l)&&(a.hasOwnProperty(l)&&JSON.stringify(a[l])===JSON.stringify(o[l])||(a[l]=o[l],s=!0));for(l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(delete a[l],s=!0);return s&&this.trigger("config-changed"),[2]}}))}))}),500,!0),n.adapter=t,n.root=new $y(n,""),n.onChange("folder-created","/"),n.root=n.fileMap["/"],n}return f(t,e),t.prototype.getName=function(){return this.adapter.getName()},t.prototype.setFileCacheLimit=function(e){this.cacheLimit=e;var t=this.fileMap;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i instanceof Xy&&i.updateCacheLimit()}},t.validateConfigDir=function(e){return"."!==e&&e.startsWith(".")&&!qy.test(e)},t.prototype.setConfigDir=function(e){t.validateConfigDir(e)||(e=Gy),this.configDir=e},t.prototype.setupConfig=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return t=(e=this).adapter,n=e.configDir,[4,t.exists(n)];case 1:return h.sent()?[3,3]:[4,t.mkdir(n)];case 2:h.sent(),h.label=3;case 3:return this.configTs=Date.now(),i=null,[4,this.readConfigJson("app")];case 4:return r=h.sent(),[4,this.readConfigJson("appearance")];case 5:return o=h.sent(),r?[3,7]:[4,this.readJson(n+"/config")];case 6:i=h.sent(),h.label=7;case 7:for(l in a=this.config=Object.assign({},i,o,r),s={editorFontFamily:"textFontFamily"})s.hasOwnProperty(l)&&a.hasOwnProperty(l)&&(c=s[l],u=a[l],delete a[l],!a.hasOwnProperty(c)&&u&&(a[c]=u));return i?[4,this.saveConfig()]:[3,12];case 8:h.sent(),h.label=9;case 9:return h.trys.push([9,11,,12]),[4,this.adapter.remove(n+"/config")];case 10:return h.sent(),[3,12];case 11:return h.sent(),[3,12];case 12:return this.requestSaveConfig(),[2]}}))}))},t.prototype.saveConfig=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=(e=this).adapter,n=e.configDir,[4,t.exists(n)];case 1:return l.sent()?[3,3]:[4,t.mkdir(n)];case 2:l.sent(),l.label=3;case 3:for(a in i=this.config,r={},o={},i)s=a,i.hasOwnProperty(s)&&(Fy.contains(s)?o[s]=i[s]:r[s]=i[s]);return[4,this.writeConfigJson("app",r)];case 4:return l.sent(),[4,this.writeConfigJson("appearance",o)];case 5:return l.sent(),this.configTs=Date.now(),[2]}}))}))},t.prototype.getConfig=function(e){var t=this.config[e];return void 0===t?By[e]:t},t.prototype.setConfig=function(e,t){void 0!==t?this.config[e]=t:delete this.config[e],this.requestSaveConfig(),this.trigger("config-changed")},t.prototype.readPluginData=function(e){var t=he(e+"/data.json");return this.readJson(t)},t.prototype.writePluginData=function(e,t){var n=he(e+"/data.json");return this.writeJson(n,t,!0)},t.prototype.getConfigFile=function(e){return this.configDir+"/"+e+".json"},t.prototype.readConfigJson=function(e){return this.readJson(this.getConfigFile(e))},t.prototype.writeConfigJson=function(e,t){return this.writeJson(this.getConfigFile(e),t,!0)},t.prototype.deleteConfigJson=function(e){var t=he(this.configDir+"/"+e+".json");return this.adapter.remove(t)},t.prototype.readJson=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:t=he(e),o.label=1;case 1:return o.trys.push([1,3,,4]),i=(n=JSON).parse,[4,this.adapter.read(t)];case 2:return[2,i.apply(n,[o.sent()])];case 3:return"ENOENT"===(r=o.sent()).code?[2,null]:(console.error(r),[3,4]);case 4:return[2,void 0]}}))}))},t.prototype.writeJson=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=he(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.adapter.write(i,JSON.stringify(t,void 0,n?2:void 0))];case 2:return r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.load=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.adapter.watch(this.onChange.bind(this))];case 1:return e.sent(),this.adapter instanceof Wd?[4,this.adapter.watchHiddenRecursive(this.configDir)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.getAbstractFileByPath=function(e){return this.fileMap.hasOwnProperty(e)?this.fileMap[e]:null},t.prototype.getAbstractFileByPathInsensitive=function(e){var t=this.fileMap;if(t.hasOwnProperty(e))return t[e];var n=e.toLowerCase();for(var i in t)if(t.hasOwnProperty(i)&&i.length===n.length&&i.toLowerCase()===n)return t[i];return null},t.prototype.isEmpty=function(){return 1===Object.keys(this.fileMap).length},t.prototype.getRoot=function(){return this.root},t.prototype.checkForDuplicate=function(e,t){var n=e.getNewPathAfterRename(t),i=this.fileMap[n];return i&&i!==e},t.prototype.checkPath=function(e){jy(e)},t.prototype.onChange=function(e,t,n,i){if("folder-created"===e){var r=new $y(this,t);this.fileMap[t]=r,this.addChild(r),this.trigger("create",this.fileMap[t])}else if("file-created"===e){var o=new Xy(this,t);o.stat=i,this.fileMap[t]=o,this.addChild(o),this.trigger("create",this.fileMap[t])}else if("modified"===e){if(!this.fileMap.hasOwnProperty(t))return;(a=this.fileMap[t])instanceof Xy&&(a.stat=i,a.saving||a.cache(null)),this.trigger("modify",a)}else if("file-removed"===e||"folder-removed"===e){if(this.fileMap.hasOwnProperty(t)){var a=this.fileMap[t];this.removeChild(a),delete this.fileMap[t],a.deleted=!0,this.trigger("delete",a)}}else if("renamed"===e){if(this.fileMap.hasOwnProperty(n)){var s=this.fileMap[n];this.removeChild(s),s.setPath(t),this.addChild(s),this.fileMap[t]=s,delete this.fileMap[n],this.trigger("rename",s,n)}}else"closed"===e?this.trigger("closed"):"raw"===e&&(this.trigger("raw",t),t.startsWith(this.configDir+"/")&&this.adapter instanceof Wd&&this.adapter.watchHiddenRecursive(t),t!==this.getConfigFile("app")&&t!==this.getConfigFile("appearance")||this.reloadConfig())},t.prototype.getDirectParent=function(e){var t=e.path,n=t.lastIndexOf("/");if(-1===n)return this.fileMap["/"];var i=t.slice(0,n),r=this.fileMap[i];return r&&r instanceof $y?r:null},t.prototype.addChild=function(e){var t=e.parent,n=this.getDirectParent(e);n&&n!==t&&(t&&t.children.remove(e),n.children.push(e),e.parent=n)},t.prototype.removeChild=function(e){var t=e.parent;t&&(t.children.remove(e),e.parent=null)},t.prototype.exists=function(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=he(e),[4,this.adapter.exists(n,t)];case 1:return[2,i.sent()]}}))}))},t.prototype.create=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=he(e),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.write(i,t,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof Xy?[2,r]:[2,null]}}))}))},t.prototype.createBinary=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=he(e),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.writeBinary(i,t,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof Xy?[2,r]:[2,null]}}))}))},t.prototype.createFolder=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=he(e),this.checkPath(t),[4,this.adapter.exists(t)];case 1:if(i.sent())throw new Error("Folder already exists.");return[4,this.adapter.mkdir(t)];case 2:return i.sent(),(n=this.getAbstractFileByPath(t))instanceof $y?[2,n]:[2,null]}}))}))},t.prototype.read=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.adapter.read(e.path)];case 1:return 65279===(t=n.sent()).charCodeAt(0)&&(t=t.substring(1)),e.cache(t),[2,t]}}))}))},t.prototype.cachedRead=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return Yy.has(e)?[2,Yy.get(e)]:[2,this.read(e)]}))}))},t.prototype.readBinary=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.adapter.readBinary(e.path)];case 1:t=n.sent();try{"md"===e.extension&&t.byteLength<=this.cacheLimit&&e.cache((new TextDecoder).decode(t))}catch(e){}return[2,t]}}))}))},t.prototype.readRaw=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){return t=he(e),[2,this.adapter.read(t)]}))}))},t.prototype.getResourcePath=function(e){return this.adapter.getResourcePath(e.path)},t.prototype.delete=function(e,t){return void 0===t&&(t=!1),v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return e?e===this.root?[2]:e instanceof Xy?[4,this.adapter.remove(e.path)]:[3,2]:[3,4];case 1:return n.sent(),[3,4];case 2:return e instanceof $y?[4,this.adapter.rmdir(e.path,t)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.trash=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e?e===this.root?[2]:t?[4,this.adapter.trashSystem(e.path)]:[3,2]:[2];case 1:if(n.sent())return[2];n.label=2;case 2:return[4,this.adapter.trashLocal(e.path)];case 3:return n.sent(),[2]}}))}))},t.prototype.rename=function(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=he(t),e.path===n?[2]:(this.checkPath(n),[4,this.adapter.rename(e.path,n)]);case 1:return i.sent(),[2]}}))}))},t.prototype.modify=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=e.saving,e.saving=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),(n=n||{}).immediate=function(){return e.cache(t)},[4,this.adapter.write(e.path,t,n)];case 2:return o.sent(),[3,5];case 3:throw r=o.sent(),e.cache(null),r;case 4:return e.saving=i,[7];case 5:return[2]}}))}))},t.prototype.modifyBinary=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=e.saving,e.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.writeBinary(e.path,t,n)];case 2:return r.sent(),[3,4];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.append=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=e.saving,e.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.append(e.path,t,n)];case 2:return r.sent(),[3,4];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.process=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:i=e.saving,e.saving=!0,o.label=1;case 1:return o.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return e.cache(null)},[4,this.adapter.process(e.path,t,n)];case 2:return r=o.sent(),e.cache(r),[2,r];case 3:return e.saving=i,[7];case 4:return[2]}}))}))},t.prototype.copy=function(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=(n=he(t)).normalize("NFC"),this.checkPath(n),[4,this.adapter.copy(e.path,n)];case 1:return r.sent(),(i=this.getAbstractFileByPath(n))instanceof Xy?[2,i]:[2,null]}}))}))},t.prototype.getAllLoadedFiles=function(){var e=[];for(var t in this.fileMap)if(this.fileMap.hasOwnProperty(t)){var n=this.fileMap[t];e.push(n)}return e},t.prototype.getAvailablePath=function(e,t){for(var n=1,i=ce(e,t);this.getAbstractFileByPathInsensitive(i);)i=ce(e+" "+n,t),n++;return i},t.prototype.getAvailablePathForAttachments=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return i=this.getConfig("attachmentFolderPath"),r="."===i||"./"===i,o=null,i.startsWith("./")&&(o=i.slice(2)),r?i=n?n.parent.path:"":o&&(i=(n?n.parent.getParentPrefix():"")+o),i=he(i),(a=this.getAbstractFileByPathInsensitive(i))||!o?[3,2]:[4,this.createFolder(i)];case 1:s.sent(),a=this.getAbstractFileByPathInsensitive(i),s.label=2;case 2:return a instanceof $y?[2,this.getAvailablePath(a.getParentPrefix()+e,t)]:[2,this.getAvailablePath(e,t)]}}))}))},t.prototype.resolveFileUrl=function(e){if(Lt.isDesktopApp){e.startsWith(Lt.resourcePathPrefix)&&(e="file:///"+e.substring(Lt.resourcePathPrefix.length).split("?")[0]);var t=It("url");if(t&&e.startsWith("file://")){var n=t.fileURLToPath(e);return this.resolveFilePath(n)}}return null},t.prototype.resolveFilePath=function(e){var t=this.adapter;if(Lt.isDesktopApp&&t instanceof Wd){var n=t.getBasePath();if(e.startsWith(n)){var i=he(e.substring(n.length)),r=this.getAbstractFileByPath(i);if(r instanceof Xy)return r}}return null},t.recurseChildren=function(e,t){for(var n=[e];n.length>0;){var i=n.pop();if(i&&(t(i),i instanceof $y)){var r=i.children;n=n.concat(r)}}},t.prototype.getMarkdownFiles=function(){var e=[],n=this.getRoot();return t.recurseChildren(n,(function(t){t instanceof Xy&&"md"===t.extension&&e.push(t)})),e},t.prototype.getFiles=function(){var e=[],n=this.getRoot();return t.recurseChildren(n,(function(t){t instanceof Xy&&e.push(t)})),e},t.prototype.iterateFiles=function(e,t){return C(this,arguments,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<e.length?(i=e[n],r="","md"!==i.extension?[3,6]:t?[4,k(this.cachedRead(i))]:[3,3]):[3,10];case 2:return o=a.sent(),[3,5];case 3:return[4,k(this.read(i))];case 4:o=a.sent(),a.label=5;case 5:r=o,a.label=6;case 6:return[4,k({file:i,content:r})];case 7:return[4,a.sent()];case 8:a.sent(),a.label=9;case 9:return n++,[3,1];case 10:return[2]}}))}))},t.prototype.generateFiles=function(e,t){return C(this,arguments,(function(){var n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:u.trys.push([0,12,13,18]),n=E(e),u.label=1;case 1:return[4,k(n.next())];case 2:return(i=u.sent()).done?[3,11]:(r=i.value,o="","md"!==r.extension&&"canvas"!==r.extension?[3,7]:t?[4,k(this.cachedRead(r))]:[3,4]);case 3:return a=u.sent(),[3,6];case 4:return[4,k(this.read(r))];case 5:a=u.sent(),u.label=6;case 6:o=a,u.label=7;case 7:return[4,k({file:r,content:o})];case 8:return[4,u.sent()];case 9:u.sent(),u.label=10;case 10:return[3,1];case 11:return[3,18];case 12:return s=u.sent(),l={error:s},[3,18];case 13:return u.trys.push([13,,16,17]),i&&!i.done&&(c=n.return)?[4,k(c.call(n))]:[3,15];case 14:u.sent(),u.label=15;case 15:return[3,17];case 16:if(l)throw l.error;return[7];case 17:return[7];case 18:return[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny);function Qy(e,t){if(Lt.isMobile){var n=[];e.addEventListener("touchstart",(function(i){if(!(i.touches.length>1)){var r=i.touches[0];if("stylus"!==r.touchType){var o=r.clientX,a=r.clientY,s=document.elementFromPoint(o,a);if(!(s instanceof HTMLCanvasElement)&&e.contains(s)){var l=r.identifier,c=Date.now(),u=!1,h="x",p=r.clientX,d=r.clientY,f=c,g=0,m=0;if(n.length>0)for(var v=0,y=n;v<y.length;v++){y[v].cancel()}n=[];var b=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){var i=t[n];if(i.identifier===l)return i}t=e.touches;for(n=0;n<t.length;n++){if(t[n].identifier===l)return null}return E(),null},w=function(e){if(b(e)&&(E(),0!==n.length)){var t,i;"x"===h?(t=p-o,i=g):(t=d-a,i=m);for(var r=(i=800*i*window.devicePixelRatio)+t,s=0,l=n;s<l.length;s++){l[s].finish(p,d,r)}n=[]}},k=function(e){if(b(e)&&(E(),0!==n.length)){for(var t=0,i=n;t<i.length;t++){i[t].cancel()}n=[]}},C=function(e){var i=b(e);if(i){var r=i.clientX,l=i.clientY;if(!u){if(Date.now()-c>200)return void E();var v=Math.abs(r-o),y=Math.abs(l-a),w=Math.max(v,y);if(w<10)return;u=!0;for(var k=s,C="x"===(h=v===w?"x":"y")?r-o:l-a;k;){var x="x"===h?k.scrollWidth-k.clientWidth:k.scrollHeight-k.clientHeight;if(x>0){var S=getComputedStyle(k),M="x"===h?S.overflowX:S.overflowY;if("auto"===M||"scroll"===M){var T="x"===h?k.scrollLeft:k.scrollTop;if(C>0&&T>0||C<0&&T<x-1)return void E()}}k=k.parentElement}if(window.getSelection().toString())return void E();t({evt:e,touch:i,points:e.touches.length,targetEl:s,startX:o,startY:a,x:r,y:l,direction:h,registerCallback:function(e){return n.push(e)}})}if(0!==n.length){e.preventDefault();var D=Date.now(),A=D-f,L=1-.8;g=.8*g+(r-p)/A*L,m=.8*m+(l-d)/A*L,p=r,d=l,f=D;for(var P=0,I=n;P<I.length;P++){I[P].move(r,l)}}else E()}},E=function(){window.removeEventListener("touchcancel",k),window.removeEventListener("touchend",w),window.removeEventListener("touchmove",C)};window.addEventListener("touchcancel",k),window.addEventListener("touchend",w),window.addEventListener("touchmove",C,{passive:!1})}}}}),{passive:!1})}}var Jy=[];function eb(e){Jy.contains(e)||Jy.push(e)}function tb(e){Jy.contains(e)&&Jy.remove(e)}var nb=function(){function e(){this._loaded=!1,this._events=[],this._children=[]}return e.prototype.load=function(){if(!this._loaded){this._loaded=!0,this.onload();for(var e=0,t=this._children.slice();e<t.length;e++){t[e].load()}}},e.prototype.onload=function(){},e.prototype.unload=function(){if(this._loaded){this._loaded=!1;for(var e=this._children,t=this._events;e.length>0;){e.pop().unload()}for(;t.length>0;){t.pop()()}this.onunload()}},e.prototype.onunload=function(){},e.prototype.addChild=function(e){return this._children.push(e),this._loaded&&e.load(),e},e.prototype.removeChild=function(e){var t=this._children,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),e.unload()),e},e.prototype.register=function(e){this._events.push(e)},e.prototype.registerEvent=function(e){this.register((function(){return e.e.offref(e)}))},e.prototype.registerDomEvent=function(e,t,n,i){e.addEventListener(t,n,i),this.register((function(){return e.removeEventListener(t,n,i)}))},e.prototype.registerScopeEvent=function(e){this.register((function(){return e.scope.unregister(e)}))},e.prototype.registerInterval=function(e){return this.register((function(){return clearInterval(e)})),e},e}();const ib={accessibility:[[1,16,4,1],[6,"m18 19 1-7-6 1"],[6,"m5 8 3-3 5.5 3-2.36 3.5"],[6,"M4.24 14.5a5 5 0 0 0 6.88 6"],[6,"M13.76 17.5a5 5 0 0 0-6.88-6"]],activity:[[2,"22 12 18 12 15 21 9 3 6 12 2 12"]],"air-vent":[[6,"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"],[6,"M6 8h12"],[6,"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12"],[6,"M6.6 15.6A2 2 0 1 0 10 17v-5"]],airplay:[[6,"M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],[3,"12 15 17 21 7 21 12 15"]],"alarm-check":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"m9 13 2 2 4-4"]],"alarm-clock-off":[[6,"M6.87 6.87a8 8 0 1 0 11.26 11.26"],[6,"M19.9 14.25a8 8 0 0 0-9.15-9.15"],[6,"m22 6-3-3"],[6,"M6.26 18.67 4 21"],[6,"m2 2 20 20"],[6,"M4 4 2 6"]],"alarm-clock":[[1,12,13,8],[6,"M12 9v4l2 2"],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"]],"alarm-minus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M9 13h6"]],"alarm-plus":[[1,12,13,8],[6,"M5 3 2 6"],[6,"m22 6-3-3"],[6,"M6.38 18.7 4 21"],[6,"M17.64 18.67 20 21"],[6,"M12 10v6"],[6,"M9 13h6"]],album:[[5,3,3,18,18,2,2],[2,"11 3 11 11 14 8 17 11 17 3"]],"alert-circle":[[1,12,12,10],[0,12,8,12,12],[0,12,16,12.01,16]],"alert-octagon":[[3,"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],[0,12,8,12,12],[0,12,16,12.01,16]],"alert-triangle":[[6,"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"],[0,12,9,12,13],[0,12,17,12.01,17]],"align-center-horizontal":[[6,"M2 12h20"],[6,"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4"],[6,"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4"],[6,"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1"],[6,"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1"]],"align-center-vertical":[[6,"M12 2v20"],[6,"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4"],[6,"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4"],[6,"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1"],[6,"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1"]],"align-center":[[0,21,6,3,6],[0,17,12,7,12],[0,19,18,5,18]],"align-end-horizontal":[[5,4,2,6,16,2],[5,14,9,6,9,2],[6,"M22 22H2"]],"align-end-vertical":[[5,2,4,16,6,2],[5,9,14,9,6,2],[6,"M22 22V2"]],"align-horizontal-distribute-center":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M17 22v-5"],[6,"M17 7V2"],[6,"M7 22v-3"],[6,"M7 5V2"]],"align-horizontal-distribute-end":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M10 2v20"],[6,"M20 2v20"]],"align-horizontal-distribute-start":[[5,4,5,6,14,2],[5,14,7,6,10,2],[6,"M4 2v20"],[6,"M14 2v20"]],"align-horizontal-justify-center":[[5,2,5,6,14,2],[5,16,7,6,10,2],[6,"M12 2v20"]],"align-horizontal-justify-end":[[5,2,5,6,14,2],[5,12,7,6,10,2],[6,"M22 2v20"]],"align-horizontal-justify-start":[[5,6,5,6,14,2],[5,16,7,6,10,2],[6,"M2 2v20"]],"align-horizontal-space-around":[[5,9,7,6,10,2],[6,"M4 22V2"],[6,"M20 22V2"]],"align-horizontal-space-between":[[5,3,5,6,14,2],[5,15,7,6,10,2],[6,"M3 2v20"],[6,"M21 2v20"]],"align-justify":[[0,3,6,21,6],[0,3,12,21,12],[0,3,18,21,18]],"align-left":[[0,21,6,3,6],[0,15,12,3,12],[0,17,18,3,18]],"align-right":[[0,21,6,3,6],[0,21,12,9,12],[0,21,18,7,18]],"align-start-horizontal":[[5,4,6,6,16,2],[5,14,6,6,9,2],[6,"M22 2H2"]],"align-start-vertical":[[5,6,14,9,6,2],[5,6,4,16,6,2],[6,"M2 2v20"]],"align-vertical-distribute-center":[[5,5,14,14,6,2],[5,7,4,10,6,2],[6,"M22 7h-5"],[6,"M7 7H1"],[6,"M22 17h-3"],[6,"M5 17H2"]],"align-vertical-distribute-end":[[5,5,14,14,6,2],[5,7,4,10,6,2],[6,"M2 20h20"],[6,"M2 10h20"]],"align-vertical-distribute-start":[[5,5,14,14,6,2],[5,7,4,10,6,2],[6,"M2 14h20"],[6,"M2 4h20"]],"align-vertical-justify-center":[[5,5,16,14,6,2],[5,7,2,10,6,2],[6,"M2 12h20"]],"align-vertical-justify-end":[[5,5,12,14,6,2],[5,7,2,10,6,2],[6,"M2 22h20"]],"align-vertical-justify-start":[[5,5,16,14,6,2],[5,7,6,10,6,2],[6,"M2 2h20"]],"align-vertical-space-around":[[5,7,9,10,6,2],[6,"M22 20H2"],[6,"M22 4H2"]],"align-vertical-space-between":[[5,5,15,14,6,2],[5,7,3,10,6,2],[6,"M2 21h20"],[6,"M2 3h20"]],anchor:[[1,12,5,3],[0,12,22,12,8],[6,"M5 12H2a10 10 0 0 0 20 0h-3"]],angry:[[1,12,12,10],[6,"M16 16s-1.5-2-4-2-4 2-4 2"],[6,"M7.5 8 10 9"],[6,"m14 9 2.5-1"],[6,"M9 10h0"],[6,"M15 10h0"]],annoyed:[[1,12,12,10],[6,"M8 15h8"],[6,"M8 9h2"],[6,"M14 9h2"]],aperture:[[1,12,12,10],[0,14.31,8,20.05,17.94],[0,9.69,8,21.17,8],[0,7.38,12,13.12,2.06],[0,9.69,16,3.95,6.06],[0,14.31,16,2.83,16],[0,16.62,12,10.88,21.94]],apple:[[6,"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"],[6,"M10 2c1 .5 2 2 2 5"]],"archive-restore":[[5,2,4,20,5,2],[6,"M12 13v7"],[6,"m9 16 3-3 3 3"],[6,"M4 9v9a2 2 0 0 0 2 2h2"],[6,"M20 9v9a2 2 0 0 1-2 2h-2"]],archive:[[5,2,4,20,5,2],[6,"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9"],[6,"M10 13h4"]],armchair:[[6,"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"],[6,"M3 11v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"],[6,"M5 18v2"],[6,"M19 18v2"]],"arrow-big-down":[[6,"M9 3h6v11h4l-7 7-7-7h4z"]],"arrow-big-left":[[6,"m3 12 7-7v4h11v6H10v4z"]],"arrow-big-right":[[6,"m21 12-7-7v4H3v6h11v4z"]],"arrow-big-up":[[6,"M9 21V10H5l7-7 7 7h-4v11z"]],"arrow-down-circle":[[1,12,12,10],[2,"8 12 12 16 16 12"],[0,12,8,12,16]],"arrow-down-left-from-circle":[[2,"8,22 2,22 2,16 "],[0,2,22,12,12],[6,"M2,12C2,6.5,6.5,2,12,2s10,4.5,10,10s-4.5,10-10,10"]],"arrow-down-left":[[0,17,7,7,17],[2,"17 17 7 17 7 7"]],"arrow-down-right-from-circle":[[2,"22,16 22,22 16,22 "],[0,22,22,12,12],[6,"M12,22C6.5,22,2,17.5,2,12S6.5,2,12,2s10,4.5,10,10"]],"arrow-down-right":[[0,7,7,17,17],[2,"17 7 17 17 7 17"]],"arrow-down":[[0,12,5,12,19],[2,"19 12 12 19 5 12"]],"arrow-left-circle":[[1,12,12,10],[2,"12 8 8 12 12 16"],[0,16,12,8,12]],"arrow-left-right":[[2,"17 11 21 7 17 3"],[0,21,7,9,7],[2,"7 21 3 17 7 13"],[0,15,17,3,17]],"arrow-left":[[0,19,12,5,12],[2,"12 19 5 12 12 5"]],"arrow-right-circle":[[1,12,12,10],[2,"12 16 16 12 12 8"],[0,8,12,16,12]],"arrow-right":[[0,5,12,19,12],[2,"12 5 19 12 12 19"]],"arrow-up-circle":[[1,12,12,10],[2,"16 12 12 8 8 12"],[0,12,16,12,8]],"arrow-up-down":[[2,"11 17 7 21 3 17"],[0,7,21,7,9],[2,"21 7 17 3 13 7"],[0,17,15,17,3]],"arrow-up-left-from-circle":[[6,"M12,2c5.5,0,10,4.5,10,10s-4.5,10-10,10S2,17.5,2,12"],[2,"2,8 2,2 8,2 "],[0,2,2,12,12]],"arrow-up-left":[[0,17,17,7,7],[2,"7 17 7 7 17 7"]],"arrow-up-right-from-circle":[[2,"16,2 22,2 22,8 "],[0,22,2,12,12],[6,"M22,12c0,5.5-4.5,10-10,10S2,17.5,2,12S6.5,2,12,2"]],"arrow-up-right":[[0,7,17,17,7],[2,"7 7 17 7 17 17"]],"arrow-up":[[0,12,19,12,5],[2,"5 12 12 5 19 12"]],asterisk:[[6,"M12 6v12"],[6,"M17.196 9 6.804 15"],[6,"m6.804 9 10.392 6"]],"at-sign":[[1,12,12,4],[6,"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"]],atom:[[1,12,12,1],[6,"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"],[6,"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"]],award:[[1,12,8,6],[6,"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"]],axe:[[6,"m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"],[6,"M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"]],"axis-3d":[[6,"M4 4v16h16"],[6,"m4 20 7-7"]],baby:[[6,"M9 12h.01"],[6,"M15 12h.01"],[6,"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"],[6,"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"]],backpack:[[6,"M4 20V10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2Z"],[6,"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"],[6,"M8 21v-5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v5"],[6,"M8 10h8"],[6,"M8 18h8"]],"baggage-claim":[[6,"M22 18H6a2 2 0 0 1-2-2V7a2 2 0 0 0-2-2"],[6,"M17 14V4a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v10"],[5,8,6,13,8,1],[1,18,20,2],[1,9,20,2]],ban:[[1,12,12,10],[0,4.93,4.93,19.07,19.07]],banana:[[6,"M4 13c3.5-2 8-2 10 2a5.5 5.5 0 0 1 8 5"],[6,"M5.15 17.89c5.52-1.52 8.65-6.89 7-12C11.55 4 11.5 2 13 2c3.22 0 5 5.5 5 8 0 6.5-4.2 12-10.49 12C5.11 22 2 22 2 20c0-1.5 1.14-1.55 3.15-2.11Z"]],banknote:[[5,2,6,20,12,2],[1,12,12,2],[6,"M6 12h.01M18 12h.01"]],"bar-chart-2":[[0,18,20,18,10],[0,12,20,12,4],[0,6,20,6,14]],"bar-chart-3":[[6,"M3 3v18h18"],[6,"M18 17V9"],[6,"M13 17V5"],[6,"M8 17v-3"]],"bar-chart-4":[[6,"M3 3v18h18"],[6,"M13 17V9"],[6,"M18 17V5"],[6,"M8 17v-3"]],"bar-chart-horizontal":[[6,"M3 3v18h18"],[6,"M7 16h8"],[6,"M7 11h12"],[6,"M7 6h3"]],"bar-chart":[[0,12,20,12,10],[0,18,20,18,4],[0,6,20,6,16]],baseline:[[6,"M4 20h16"],[6,"m6 16 6-12 6 12"],[6,"M8 12h8"]],bath:[[6,"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"],[0,10,5,8,7],[0,2,12,22,12],[0,7,19,7,21],[0,17,19,17,21]],"battery-charging":[[6,"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"],[6,"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"],[6,"m11 7-3 5h4l-3 5"],[0,22,11,22,13]],"battery-full":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13],[0,10,11,10,13],[0,14,11,14,13]],"battery-low":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13]],"battery-medium":[[5,2,7,16,10,2,2],[0,22,11,22,13],[0,6,11,6,13],[0,10,11,10,13]],"battery-warning":[[6,"M14 7h2a2 2 0 0 1 2 2v6c0 1-1 2-2 2h-2"],[6,"M6 7H4a2 2 0 0 0-2 2v6c0 1 1 2 2 2h2"],[0,22,11,22,13],[0,10,7,10,13],[0,10,17,10,17.01]],battery:[[5,2,7,16,10,2,2],[0,22,11,22,13]],beaker:[[6,"M4.5 3h15"],[6,"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"],[6,"M6 14h12"]],"bean-off":[[6,"M9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22a13.96 13.96 0 0 0 9.9-4.1"],[6,"M10.75 5.093A6 6 0 0 1 22 8c0 2.411-.61 4.68-1.683 6.66"],[6,"M5.341 10.62a4 4 0 0 0 6.487 1.208M10.62 5.341a4.015 4.015 0 0 1 2.039 2.04"],[0,2,2,22,22]],bean:[[6,"M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z"],[6,"M5.341 10.62a4 4 0 1 0 5.279-5.28"]],"bed-double":[[6,"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8"],[6,"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"],[6,"M12 4v6"],[6,"M2 18h20"]],"bed-single":[[6,"M3 20v-8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8"],[6,"M5 10V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v4"],[6,"M3 18h18"]],bed:[[6,"M2 4v16"],[6,"M2 8h18a2 2 0 0 1 2 2v10"],[6,"M2 17h20"],[6,"M6 8v9"]],beef:[[1,12.5,8.5,2.5],[6,"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z"],[6,"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5"]],beer:[[6,"M17 11h1a3 3 0 0 1 0 6h-1"],[6,"M9 12v6"],[6,"M13 12v6"],[6,"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z"],[6,"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"]],"bell-minus":[[6,"M13.73 21a2 2 0 0 1-3.46 0"],[6,"M21 5h-6"],[6,"M18.021 9C18.29 15.193 21 17 21 17H3s3-2 3-9a6 6 0 0 1 7-5.916"]],"bell-off":[[6,"M13.73 21a2 2 0 0 1-3.46 0"],[6,"M18.63 13A17.888 17.888 0 0 1 18 8"],[6,"M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"],[6,"M18 8a6 6 0 0 0-9.33-5"],[6,"m2 2 20 20"]],"bell-plus":[[6,"M18.387 12C19.198 15.799 21 17 21 17H3s3-2 3-9a6 6 0 0 1 7-5.916"],[6,"M13.73 21a2 2 0 0 1-3.46 0"],[6,"M18 2v6"],[6,"M21 5h-6"]],"bell-ring":[[6,"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],[6,"M13.73 21a2 2 0 0 1-3.46 0"],[6,"M2 8c0-2.2.7-4.3 2-6"],[6,"M22 8a10 10 0 0 0-2-6"]],bell:[[6,"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],[6,"M13.73 21a2 2 0 0 1-3.46 0"]],bike:[[1,18.5,17.5,3.5],[1,5.5,17.5,3.5],[1,15,5,1],[6,"M12 17.5V14l-3-3 4-3 2 3h2"]],binary:[[6,"M6 20h4"],[6,"M14 10h4"],[6,"M6 14h2v6"],[6,"M14 4h2v6"],[5,6,4,4,6],[5,14,14,4,6]],bird:[[6,"M16 7h.01"],[6,"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20"],[6,"m20 7 2 .5-2 .5"],[6,"M10 18v3"],[6,"M14 17.75V21"],[6,"M7 18a6 6 0 0 0 3.84-10.61"]],bitcoin:[[6,"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727"]],blinds:[[6,"M3 3h18"],[6,"M20 7H8"],[6,"M20 11H8"],[6,"M10 19h10"],[6,"M8 15h12"],[6,"M4 3v14"],[1,4,19,2]],"bluetooth-connected":[[6,"m7 7 10 10-5 5V2l5 5L7 17"],[0,18,12,21,12],[0,3,12,6,12]],"bluetooth-off":[[6,"m17 17-5 5V12l-5 5"],[6,"m2 2 20 20"],[6,"M14.5 9.5 17 7l-5-5v4.5"]],"bluetooth-searching":[[6,"m7 7 10 10-5 5V2l5 5L7 17"],[6,"M20.83 14.83a4 4 0 0 0 0-5.66"],[6,"M18 12h.01"]],bluetooth:[[6,"m7 7 10 10-5 5V2l5 5L7 17"]],bold:[[6,"M14 12a4 4 0 0 0 0-8H6v8"],[6,"M15 20a4 4 0 0 0 0-8H6v8Z"]],bomb:[[1,11,13,9],[6,"m19.5 9.5 1.8-1.8a2.4 2.4 0 0 0 0-3.4l-1.6-1.6a2.41 2.41 0 0 0-3.4 0l-1.8 1.8"],[6,"m22 2-1.5 1.5"]],bone:[[6,"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z"]],"book-copy":[[6,"M2,16V4c0-1.1,0.9-2,2-2h11"],[6,"M5,14H4c-1.1,0-2,0.9-2,2s0.9,2,2,2h1"],[6,"M22,18H11c-1.1,0-2,0.9-2,2l0,0"],[6,"M11,6h11v16H11c-1.1,0-2-0.9-2-2V8C9,6.9,9.9,6,11,6z"]],"book-down":[[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2Z"],[6,"M12 13V7"],[6,"m9 10 3 3 3-3"]],"book-key":[[6,"M20,2l-4.5,4.5"],[6,"M19,3l1,1"],[1,14,8,2],[6,"M4,19.5C4,18.1,5.1,17,6.5,17H20"],[6,"M20,8v14H6.5C5.1,22,4,20.9,4,19.5v-15C4,3.1,5.1,2,6.5,2H14"]],"book-lock":[[6,"M4,19.5C4,18.1,5.1,17,6.5,17H20"],[6,"M18,6V4c0-1.1-0.9-2-2-2s-2,0.9-2,2v2"],[6,"M20,15v7H6.5C5.1,22,4,20.9,4,19.5v-15C4,3.1,5.1,2,6.5,2H10"],[6,"M13,6h6c0.6,0,1,0.4,1,1v3c0,0.6-0.4,1-1,1h-6c-0.6,0-1-0.4-1-1V7C12,6.4,12.4,6,13,6z"]],"book-marked":[[2,"10,2 10,10 13,7 16,10 16,2"],[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"]],"book-minus":[[0,9,10,15,10],[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"]],"book-open-check":[[6,"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z"],[6,"m16 12 2 2 4-4"],[6,"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3"]],"book-open":[[6,"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"],[6,"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"]],"book-plus":[[0,12,7,12,13],[0,9,10,15,10],[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"]],"book-template":[[6,"M20,22h-2"],[6,"M20,15v2l-2,0"],[6,"M4,19.5V15"],[6,"M20,8v3"],[6,"M18,2h2v2"],[6,"M4,11V9"],[6,"M12,2h2"],[6,"M12,22h2"],[6,"M12,17h2"],[6,"M8,22H6.5C5.1,22,4,20.9,4,19.5S5.1,17,6.5,17H8"],[6,"M4,5V4.5C4,3.1,5.1,2,6.5,2H8"]],"book-up":[[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2Z"],[6,"M12,13V7"],[6,"M9,10l3-3l3,3"]],"book-x":[[6,"M9.5,7l5,5"],[6,"M14.5,7l-5,5"],[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"]],book:[[6,"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],[6,"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"]],"bookmark-minus":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[0,15,10,9,10]],"bookmark-plus":[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[0,12,7,12,13],[0,15,10,9,10]],bookmark:[[6,"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"]],bot:[[5,3,11,18,10,2],[1,12,5,2],[6,"M12 7v4"],[0,8,16,8,16],[0,16,16,16,16]],"box-select":[[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h1"],[6,"M14 3h1"],[6,"M14 21h1"],[6,"M3 9v1"],[6,"M21 9v1"],[6,"M3 14v1"],[6,"M21 14v1"]],box:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],boxes:[[6,"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"],[6,"m7 16.5-4.74-2.85"],[6,"m7 16.5 5-3"],[6,"M7 16.5v5.17"],[6,"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"],[6,"m17 16.5-5-3"],[6,"m17 16.5 4.74-2.85"],[6,"M17 16.5v5.17"],[6,"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"],[6,"M12 8 7.26 5.15"],[6,"m12 8 4.74-2.85"],[6,"M12 13.5V8"]],"brain-circuit":[[6,"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z"],[6,"M16 8V5c0-1.1.9-2 2-2"],[6,"M12 13h4"],[6,"M12 18h6a2 2 0 0 1 2 2v1"],[6,"M12 8h8"],[6,"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"],[6,"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"],[6,"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"],[6,"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"]],"brain-cog":[[6,"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08A2.5 2.5 0 0 0 9.5 22c1.21 0 2.5-.74 2.5-2.5m0-15a2.5 2.5 0 0 1 4.96-.46 2.5 2.5 0 0 1 1.98 3 2.5 2.5 0 0 1 1.32 4.24 3 3 0 0 1-.34 5.58 2.5 2.5 0 0 1-2.96 3.08A2.5 2.5 0 0 1 14.5 22c-1.21 0-2.5-.74-2.5-2.5m0-15V5m0 14.5V19"],[1,12,12,2],[6,"M12 9v1"],[6,"M12 14v1"],[6,"m14.6 10.5-.87.5"],[6,"m10.27 13-.87.5"],[6,"m14.6 13.5-.87-.5"],[6,"m10.27 11-.87-.5"]],brain:[[6,"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"],[6,"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"]],briefcase:[[5,2,7,20,14,2,2],[6,"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"]],brush:[[6,"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08"],[6,"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z"]],bug:[[5,8,6,8,14,4],[6,"m19 7-3 2"],[6,"m5 7 3 2"],[6,"m19 19-3-2"],[6,"m5 19 3-2"],[6,"M20 13h-4"],[6,"M4 13h4"],[6,"m10 4 1 2"],[6,"m14 4-1 2"]],"building-2":[[6,"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"],[6,"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"],[6,"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"],[6,"M10 6h4"],[6,"M10 10h4"],[6,"M10 14h4"],[6,"M10 18h4"]],building:[[5,4,2,16,20,2,2],[6,"M9 22v-4h6v4"],[6,"M8 6h.01"],[6,"M16 6h.01"],[6,"M12 6h.01"],[6,"M12 10h.01"],[6,"M12 14h.01"],[6,"M16 10h.01"],[6,"M16 14h.01"],[6,"M8 10h.01"],[6,"M8 14h.01"]],bus:[[6,"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2"],[6,"M14 17H9"],[1,6.5,17.5,2.5],[1,16.5,17.5,2.5]],cake:[[6,"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"],[6,"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1"],[6,"M2 21h20"],[6,"M7 8v2"],[6,"M12 8v2"],[6,"M17 8v2"],[6,"M7 4h.01"],[6,"M12 4h.01"],[6,"M17 4h.01"]],calculator:[[5,4,2,16,20,2],[0,8,6,16,6],[0,16,14,16,18],[6,"M16 10h.01"],[6,"M12 10h.01"],[6,"M8 10h.01"],[6,"M12 14h.01"],[6,"M8 14h.01"],[6,"M12 18h.01"],[6,"M8 18h.01"]],"calendar-check-2":[[6,"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[6,"m16 20 2 2 4-4"]],"calendar-check":[[5,3,4,18,18,2,2],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[6,"m9 16 2 2 4-4"]],"calendar-clock":[[6,"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],[6,"M16 2v4"],[6,"M8 2v4"],[6,"M3 10h5"],[6,"M17.5 17.5 16 16.25V14"],[6,"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"]],"calendar-days":[[5,3,4,18,18,2,2],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[6,"M8 14h.01"],[6,"M12 14h.01"],[6,"M16 14h.01"],[6,"M8 18h.01"],[6,"M12 18h.01"],[6,"M16 18h.01"]],"calendar-heart":[[6,"M21 10V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h7"],[6,"M16 2v4"],[6,"M8 2v4"],[6,"M3 10h18"],[6,"M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"]],"calendar-minus":[[6,"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[0,16,19,22,19]],"calendar-off":[[6,"M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],[6,"M21 15.5V6a2 2 0 0 0-2-2H9.5"],[6,"M16 2v4"],[6,"M3 10h7"],[6,"M21 10h-5.5"],[0,2,2,22,22]],"calendar-plus":[[6,"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[0,19,16,19,22],[0,16,19,22,19]],"calendar-range":[[5,3,4,18,18,2,2],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[6,"M17 14h-6"],[6,"M13 18H7"],[6,"M7 14h.01"],[6,"M17 18h.01"]],"calendar-search":[[6,"M21 12V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h7.5"],[6,"M16 2v4"],[6,"M8 2v4"],[6,"M3 10h18"],[6,"M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6v0Z"],[6,"m22 22-1.5-1.5"]],"calendar-x2":[[6,"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[0,17,17,22,22],[0,17,22,22,17]],"calendar-x":[[5,3,4,18,18,2,2],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10],[0,10,14,14,18],[0,14,14,10,18]],calendar:[[5,3,4,18,18,2,2],[0,16,2,16,6],[0,8,2,8,6],[0,3,10,21,10]],"camera-off":[[0,2,2,22,22],[6,"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],[6,"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],[6,"M14.121 15.121A3 3 0 1 1 9.88 10.88"]],camera:[[6,"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],[1,12,13,3]],"candy-off":[[6,"m8.5 8.5-1 1a4.95 4.95 0 0 0 7 7l1-1"],[6,"M11.843 6.187A4.947 4.947 0 0 1 16.5 7.5a4.947 4.947 0 0 1 1.313 4.657"],[6,"M14 16.5V14"],[6,"M14 6.5v1.843"],[6,"M10 10v7.5"],[6,"m16 7 1-5 1.367.683A3 3 0 0 0 19.708 3H21v1.292a3 3 0 0 0 .317 1.341L22 7l-5 1"],[6,"m8 17-1 5-1.367-.683A3 3 0 0 0 4.292 21H3v-1.292a3 3 0 0 0-.317-1.341L2 17l5-1"],[0,2,2,22,22]],candy:[[6,"m9.5 7.5-2 2a4.95 4.95 0 1 0 7 7l2-2a4.95 4.95 0 1 0-7-7Z"],[6,"M14 6.5v10"],[6,"M10 7.5v10"],[6,"m16 7 1-5 1.37.68A3 3 0 0 0 19.7 3H21v1.3c0 .46.1.92.32 1.33L22 7l-5 1"],[6,"m8 17-1 5-1.37-.68A3 3 0 0 0 4.3 21H3v-1.3a3 3 0 0 0-.32-1.33L2 17l5-1"]],car:[[6,"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2"],[1,6.5,16.5,2.5],[1,16.5,16.5,2.5]],carrot:[[6,"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46"],[6,"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z"],[6,"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z"]],"case-lower":[[1,17,12,3],[0,14,7,14,15],[1,7,12,3],[0,10,9,10,15]],"case-sensitive":[[2,"3,15 7,7 11,15"],[0,4,13,10,13],[1,18,12,3],[0,21,9,21,15]],"case-upper":[[2,"3,15 7,7 11,15"],[0,4,13,10,13],[6,"M15 7h4c1.1 0 2 .9 2 2s-.9 2-2 2h-4V7z"],[6,"M15 11h4.5c1.1 0 2 .9 2 2s-.9 2-2 2H15v-4z"]],cast:[[6,"M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"],[6,"M2 12a9 9 0 0 1 8 8"],[6,"M2 16a5 5 0 0 1 4 4"],[0,2,20,2.01,20]],castle:[[6,"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z"],[6,"M18 11V4H6v7"],[6,"M15 22v-4a3 3 0 0 0-3-3v0a3 3 0 0 0-3 3v4"],[6,"M22 11V9"],[6,"M2 11V9"],[6,"M6 4V2"],[6,"M18 4V2"],[6,"M10 4V2"],[6,"M14 4V2"]],cat:[[6,"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"],[6,"M8 14v.5"],[6,"M16 14v.5"],[6,"M11.25 16.25h1.5L12 17l-.75-.75Z"]],"check-check":[[6,"M18 6 7 17l-5-5"],[6,"m22 10-7.5 7.5L13 16"]],"check-circle-2":[[6,"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"],[6,"m9 12 2 2 4-4"]],"check-circle":[[6,"M22 11.08V12a10 10 0 1 1-5.93-9.14"],[2,"22 4 12 14.01 9 11.01"]],"check-square":[[2,"9 11 12 14 22 4"],[6,"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"]],check:[[2,"20 6 9 17 4 12"]],"chef-hat":[[6,"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"],[0,6,17,18,17]],cherry:[[6,"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z"],[6,"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z"],[6,"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12"],[6,"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z"]],"chevron-down-square":[[5,3,3,18,18,2,2],[2,"16,10 12,14 8,10"]],"chevron-down":[[2,"6 9 12 15 18 9"]],"chevron-first":[[2,"17 18 11 12 17 6"],[6,"M7 6v12"]],"chevron-last":[[2,"7 18 13 12 7 6"],[6,"M17 6v12"]],"chevron-left-square":[[5,3,3,18,18,2,2],[2,"14,16 10,12 14,8"]],"chevron-left":[[2,"15 18 9 12 15 6"]],"chevron-right-square":[[5,3,3,18,18,2,2],[2,"10,8 14,12 10,16"]],"chevron-right":[[2,"9 18 15 12 9 6"]],"chevron-up-square":[[5,3,3,18,18,2,2],[2,"8,14 12,10 16,14"]],"chevron-up":[[2,"18 15 12 9 6 15"]],"chevrons-down-up":[[6,"m7 20 5-5 5 5"],[6,"m7 4 5 5 5-5"]],"chevrons-down":[[2,"7 13 12 18 17 13"],[2,"7 6 12 11 17 6"]],"chevrons-left-right":[[6,"m9 7-5 5 5 5"],[6,"m15 7 5 5-5 5"]],"chevrons-left":[[2,"11 17 6 12 11 7"],[2,"18 17 13 12 18 7"]],"chevrons-right-left":[[6,"m20 17-5-5 5-5"],[6,"m4 17 5-5-5-5"]],"chevrons-right":[[2,"13 17 18 12 13 7"],[2,"6 17 11 12 6 7"]],"chevrons-up-down":[[6,"m7 15 5 5 5-5"],[6,"m7 9 5-5 5 5"]],"chevrons-up":[[2,"17 11 12 6 7 11"],[2,"17 18 12 13 7 18"]],chrome:[[1,12,12,10],[1,12,12,4],[0,21.17,8,12,8],[0,3.95,6.06,8.54,14],[0,10.88,21.94,15.46,14]],church:[[6,"m18 7 4 2v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9l4-2"],[6,"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"],[6,"M18 22V5l-6-3-6 3v17"],[6,"M12 7v5"],[6,"M10 9h4"]],"cigarette-off":[[0,2,2,22,22],[6,"M12 12H2v4h14"],[6,"M22 12v4"],[6,"M18 12h-.5"],[6,"M7 12v4"],[6,"M18 8c0-2.5-2-2.5-2-5"],[6,"M22 8c0-2.5-2-2.5-2-5"]],cigarette:[[6,"M18 12H2v4h16"],[6,"M22 12v4"],[6,"M7 12v4"],[6,"M18 8c0-2.5-2-2.5-2-5"],[6,"M22 8c0-2.5-2-2.5-2-5"]],"circle-dot":[[1,12,12,10],[1,12,12,1]],"circle-ellipsis":[[1,12,12,10],[6,"M17 12h.01"],[6,"M12 12h.01"],[6,"M7 12h.01"]],"circle-equal":[[6,"M7 10h10"],[6,"M7 14h10"],[1,12,12,10]],"circle-off":[[6,"m2 2 20 20"],[6,"M8.4 2.7c1.2-.4 2.4-.7 3.7-.7 5.5 0 10 4.5 10 10 0 1.3-.2 2.5-.7 3.6"],[6,"M19.1 19.1C17.3 20.9 14.8 22 12 22 6.5 22 2 17.5 2 12c0-2.7 1.2-5.2 3-7"]],"circle-slash-2":[[1,12,12,10],[6,"M22 2 2 22"]],"circle-slash":[[0,9,15,15,9],[1,12,12,10]],circle:[[1,12,12,10]],"circuit-board":[[5,3,3,18,18,2],[6,"M11 9h4a2 2 0 0 0 2-2V3"],[1,9,9,2],[6,"M7 21v-4a2 2 0 0 1 2-2h4"],[1,15,15,2]],citrus:[[6,"M21.66 17.67a1.08 1.08 0 0 1-.04 1.6A12 12 0 0 1 4.73 2.38a1.1 1.1 0 0 1 1.61-.04z"],[6,"M19.65 15.66A8 8 0 0 1 8.35 4.34"],[6,"m14 10-5.5 5.5"],[6,"M14 17.85V10H6.15"]],clapperboard:[[6,"M4 11v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8H4Z"],[6,"m4 11-.88-2.87a2 2 0 0 1 1.33-2.5l11.48-3.5a2 2 0 0 1 2.5 1.32l.87 2.87L4 11.01Z"],[6,"m6.6 4.99 3.38 4.2"],[6,"m11.86 3.38 3.38 4.2"]],"clipboard-check":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"m9 14 2 2 4-4"]],"clipboard-copy":[[5,8,2,8,4,1,1],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"],[6,"M16 4h2a2 2 0 0 1 2 2v4"],[6,"M21 14H11"],[6,"m15 10-4 4 4 4"]],"clipboard-edit":[[5,8,2,8,4,1,1],[6,"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"],[6,"M4 13.5V6a2 2 0 0 1 2-2h2"]],"clipboard-list":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M12 11h4"],[6,"M12 16h4"],[6,"M8 11h.01"],[6,"M8 16h.01"]],"clipboard-paste":[[6,"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"],[6,"m17 10 4 4-4 4"]],"clipboard-signature":[[5,8,2,8,4,1,1],[6,"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5"],[6,"M16 4h2a2 2 0 0 1 1.73 1"],[6,"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[6,"M8 18h1"]],"clipboard-type":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"M9 12v-1h6v1"],[6,"M11 17h2"],[6,"M12 11v6"]],"clipboard-x":[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],[6,"m15 11-6 6"],[6,"m9 11 6 6"]],clipboard:[[5,8,2,8,4,1,1],[6,"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"]],"clock-1":[[1,12,12,10],[2,"12 6 12 12 14.5 8"]],"clock-10":[[1,12,12,10],[2,"12 6 12 12 8 10"]],"clock-11":[[1,12,12,10],[2,"12 6 12 12 9.5 8"]],"clock-12":[[1,12,12,10],[2,"12 6 12 12"]],"clock-2":[[1,12,12,10],[2,"12 6 12 12 16 10"]],"clock-3":[[1,12,12,10],[2,"12 6 12 12 16.5 12"]],"clock-4":[[1,12,12,10],[2,"12 6 12 12 16 14"]],"clock-5":[[1,12,12,10],[2,"12 6 12 12 14.5 16"]],"clock-6":[[1,12,12,10],[2,"12 6 12 12 12 16.5"]],"clock-7":[[1,12,12,10],[2,"12 6 12 12 9.5 16"]],"clock-8":[[1,12,12,10],[2,"12 6 12 12 8 14"]],"clock-9":[[1,12,12,10],[2,"12 6 12 12 7.5 12"]],clock:[[1,12,12,10],[2,"12 6 12 12 16 14"]],"cloud-cog":[[6,"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"],[1,12,17,3],[6,"M12 13v1"],[6,"M12 20v1"],[6,"M16 17h-1"],[6,"M9 17H8"],[6,"m15 14-.88.88"],[6,"M9.88 19.12 9 20"],[6,"m15 20-.88-.88"],[6,"M9.88 14.88 9 14"]],"cloud-drizzle":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M8 19v1"],[6,"M8 14v1"],[6,"M16 19v1"],[6,"M16 14v1"],[6,"M12 21v1"],[6,"M12 16v1"]],"cloud-fog":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 17H7"],[6,"M17 21H9"]],"cloud-hail":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 14v2"],[6,"M8 14v2"],[6,"M16 20h.01"],[6,"M8 20h.01"],[6,"M12 16v2"],[6,"M12 22h.01"]],"cloud-lightning":[[6,"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"],[6,"m13 12-3 5h4l-3 5"]],"cloud-moon-rain":[[6,"M10.083 9A6.002 6.002 0 0 1 16 4a4.243 4.243 0 0 0 6 6c0 2.22-1.206 4.16-3 5.197"],[6,"M3 20a5 5 0 1 1 8.9-4H13a3 3 0 0 1 2 5.24"],[6,"M11 20v2"],[6,"M7 19v2"]],"cloud-moon":[[6,"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"],[6,"M10.083 9A6.002 6.002 0 0 1 16 4a4.243 4.243 0 0 0 6 6c0 2.22-1.206 4.16-3 5.197"]],"cloud-off":[[6,"m2 2 20 20"],[6,"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"],[6,"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"]],"cloud-rain-wind":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"m9.2 22 3-7"],[6,"m9 13-3 7"],[6,"m17 13-3 7"]],"cloud-rain":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M16 14v6"],[6,"M8 14v6"],[6,"M12 16v6"]],"cloud-snow":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M8 15h.01"],[6,"M8 19h.01"],[6,"M12 17h.01"],[6,"M12 21h.01"],[6,"M16 15h.01"],[6,"M16 19h.01"]],"cloud-sun-rain":[[6,"M12 2v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"M20 12h2"],[6,"m19.07 4.93-1.41 1.41"],[6,"M15.947 12.65a4 4 0 0 0-5.925-4.128"],[6,"M3 20a5 5 0 1 1 8.9-4H13a3 3 0 0 1 2 5.24"],[6,"M11 20v2"],[6,"M7 19v2"]],"cloud-sun":[[6,"M12 2v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"M20 12h2"],[6,"m19.07 4.93-1.41 1.41"],[6,"M15.947 12.65a4 4 0 0 0-5.925-4.128"],[6,"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"]],cloud:[[6,"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"]],cloudy:[[6,"M17.5 21H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"],[6,"M22 10a3 3 0 0 0-3-3h-2.207a5.502 5.502 0 0 0-10.702.5"]],clover:[[6,"M16.2 3.8a2.7 2.7 0 0 0-3.81 0l-.4.38-.4-.4a2.7 2.7 0 0 0-3.82 0C6.73 4.85 6.67 6.64 8 8l4 4 4-4c1.33-1.36 1.27-3.15.2-4.2z"],[6,"M8 8c-1.36-1.33-3.15-1.27-4.2-.2a2.7 2.7 0 0 0 0 3.81l.38.4-.4.4a2.7 2.7 0 0 0 0 3.82C4.85 17.27 6.64 17.33 8 16"],[6,"M16 16c1.36 1.33 3.15 1.27 4.2.2a2.7 2.7 0 0 0 0-3.81l-.38-.4.4-.4a2.7 2.7 0 0 0 0-3.82C19.15 6.73 17.36 6.67 16 8"],[6,"M7.8 20.2a2.7 2.7 0 0 0 3.81 0l.4-.38.4.4a2.7 2.7 0 0 0 3.82 0c1.06-1.06 1.12-2.85-.21-4.21l-4-4-4 4c-1.33 1.36-1.27 3.15-.2 4.2z"],[6,"m7 17-5 5"]],"code-2":[[6,"m18 16 4-4-4-4"],[6,"m6 8-4 4 4 4"],[6,"m14.5 4-5 16"]],code:[[2,"16 18 22 12 16 6"],[2,"8 6 2 12 8 18"]],codepen:[[3,"12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"],[0,12,22,12,15.5],[2,"22 8.5 12 15.5 2 8.5"],[2,"2 15.5 12 8.5 22 15.5"],[0,12,2,12,8.5]],codesandbox:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[2,"7.5 4.21 12 6.81 16.5 4.21"],[2,"7.5 19.79 7.5 14.6 3 12"],[2,"21 12 16.5 14.6 16.5 19.79"],[2,"3.27 6.96 12 12.01 20.73 6.96"],[0,12,22.08,12,12]],coffee:[[6,"M17 8h1a4 4 0 1 1 0 8h-1"],[6,"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"],[0,6,2,6,4],[0,10,2,10,4],[0,14,2,14,4]],cog:[[6,"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],[6,"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],[6,"M12 2v2"],[6,"M12 22v-2"],[6,"m17 20.66-1-1.73"],[6,"M11 10.27 7 3.34"],[6,"m20.66 17-1.73-1"],[6,"m3.34 7 1.73 1"],[6,"M14 12h8"],[6,"M2 12h2"],[6,"m20.66 7-1.73 1"],[6,"m3.34 17 1.73-1"],[6,"m17 3.34-1 1.73"],[6,"m11 13.73-4 6.93"]],coins:[[1,8,8,6],[6,"M18.09 10.37A6 6 0 1 1 10.34 18"],[6,"M7 6h1v4"],[6,"m16.71 13.88.7.71-2.82 2.82"]],columns:[[5,3,3,18,18,2,2],[0,12,3,12,21]],command:[[6,"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"]],compass:[[1,12,12,10],[3,"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"]],component:[[6,"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z"],[6,"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z"],[6,"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z"],[6,"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z"]],"concierge-bell":[[6,"M2 18a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2H2v-2Z"],[6,"M20 16a8 8 0 1 0-16 0"],[6,"M12 4v4"],[6,"M10 4h4"]],construction:[[5,2,6,20,8,1],[6,"M17 14v7"],[6,"M7 14v7"],[6,"M17 3v3"],[6,"M7 3v3"],[6,"M10 14 2.3 6.3"],[6,"m14 6 7.7 7.7"],[6,"m8 6 8 8"]],contact:[[6,"M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2"],[5,3,4,18,18,2],[1,12,10,2],[0,8,2,8,4],[0,16,2,16,4]],contrast:[[1,12,12,10],[6,"M12 18a6 6 0 0 0 0-12v12z"]],cookie:[[6,"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"],[6,"M8.5 8.5v.01"],[6,"M16 15.5v.01"],[6,"M12 12v.01"],[6,"M11 17v.01"],[6,"M7 14v.01"]],"copy-check":[[6,"m12 15 2 2 4-4"],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-minus":[[0,12,15,18,15],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-plus":[[0,15,12,15,18],[0,12,15,18,15],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-slash":[[0,12,18,18,12],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],"copy-x":[[0,12,12,18,18],[0,12,18,18,12],[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],copy:[[5,8,8,14,14,2,2],[6,"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"]],copyleft:[[1,12,12,10],[6,"M9 9.35a4 4 0 1 1 0 5.3"]],copyright:[[1,12,12,10],[6,"M15 9.354a4 4 0 1 0 0 5.292"]],"corner-down-left":[[2,"9 10 4 15 9 20"],[6,"M20 4v7a4 4 0 0 1-4 4H4"]],"corner-down-right":[[2,"15 10 20 15 15 20"],[6,"M4 4v7a4 4 0 0 0 4 4h12"]],"corner-left-down":[[2,"14 15 9 20 4 15"],[6,"M20 4h-7a4 4 0 0 0-4 4v12"]],"corner-left-up":[[2,"14 9 9 4 4 9"],[6,"M20 20h-7a4 4 0 0 1-4-4V4"]],"corner-right-down":[[2,"10 15 15 20 20 15"],[6,"M4 4h7a4 4 0 0 1 4 4v12"]],"corner-right-up":[[2,"10 9 15 4 20 9"],[6,"M4 20h7a4 4 0 0 0 4-4V4"]],"corner-up-left":[[2,"9 14 4 9 9 4"],[6,"M20 20v-7a4 4 0 0 0-4-4H4"]],"corner-up-right":[[2,"15 14 20 9 15 4"],[6,"M4 20v-7a4 4 0 0 1 4-4h12"]],cpu:[[5,4,4,16,16,2],[5,9,9,6,6],[6,"M15 2v2"],[6,"M15 20v2"],[6,"M2 15h2"],[6,"M2 9h2"],[6,"M20 15h2"],[6,"M20 9h2"],[6,"M9 2v2"],[6,"M9 20v2"]],"creative-commons":[[1,12,12,10],[6,"M10 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"],[6,"M17 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"]],"credit-card":[[5,2,5,20,14,2],[0,2,10,22,10]],croissant:[[6,"m4.6 13.11 5.79-3.21c1.89-1.05 4.79 1.78 3.71 3.71l-3.22 5.81C8.8 23.16.79 15.23 4.6 13.11Z"],[6,"m10.5 9.5-1-2.29C9.2 6.48 8.8 6 8 6H4.5C2.79 6 2 6.5 2 8.5a7.71 7.71 0 0 0 2 4.83"],[6,"M8 6c0-1.55.24-4-2-4-2 0-2.5 2.17-2.5 4"],[6,"m14.5 13.5 2.29 1c.73.3 1.21.7 1.21 1.5v3.5c0 1.71-.5 2.5-2.5 2.5a7.71 7.71 0 0 1-4.83-2"],[6,"M18 16c1.55 0 4-.24 4 2 0 2-2.17 2.5-4 2.5"]],crop:[[6,"M6 2v14a2 2 0 0 0 2 2h14"],[6,"M18 22V8a2 2 0 0 0-2-2H2"]],cross:[[6,"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z"]],crosshair:[[1,12,12,10],[0,22,12,18,12],[0,6,12,2,12],[0,12,6,12,2],[0,12,22,12,18]],crown:[[6,"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"]],"cup-soda":[[6,"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8"],[6,"M5 8h14"],[6,"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0"],[6,"m12 8 1-6h2"]],"curly-braces":[[6,"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1"],[6,"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"]],currency:[[1,12,12,8],[0,3,3,6,6],[0,21,3,18,6],[0,3,21,6,18],[0,21,21,18,18]],"database-backup":[[4,12,5,9,3],[6,"M3 12c0 1.18 2.03 2.2 5 2.7"],[6,"M21 5v4.5"],[6,"m12 16 1.27-1.35a4.75 4.75 0 1 1 .41 5.74"],[6,"M12 12v4h4"],[6,"M3 5v14c0 1.43 2.97 2.63 7 2.93"]],database:[[4,12,5,9,3],[6,"M3 5V19A9 3 0 0 0 21 19V5"],[6,"M3 12A9 3 0 0 0 21 12"]],delete:[[6,"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z"],[0,18,9,12,15],[0,12,9,18,15]],diamond:[[5,12,1,15.56,15.56,2.41,0,"rotate(45 12 1)"]],"dice-1":[[5,3,3,18,18,2,2],[6,"M12 12h.01"]],"dice-2":[[5,3,3,18,18,2,2],[6,"M15 9h.01"],[6,"M9 15h.01"]],"dice-3":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M12 12h.01"],[6,"M8 16h.01"]],"dice-4":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M8 8h.01"],[6,"M8 16h.01"],[6,"M16 16h.01"]],"dice-5":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M8 8h.01"],[6,"M8 16h.01"],[6,"M16 16h.01"],[6,"M12 12h.01"]],"dice-6":[[5,3,3,18,18,2,2],[6,"M16 8h.01"],[6,"M16 12h.01"],[6,"M16 16h.01"],[6,"M8 8h.01"],[6,"M8 12h.01"],[6,"M8 16h.01"]],dices:[[5,2,10,12,12,2,2],[6,"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"],[6,"M6 18h.01"],[6,"M10 14h.01"],[6,"M15 6h.01"],[6,"M18 9h.01"]],diff:[[6,"M12 3v14"],[6,"M5 10h14"],[6,"M5 21h14"]],"disc-2":[[1,12,12,4],[1,12,12,10],[0,12,12,12,12.01]],disc:[[1,12,12,10],[1,12,12,2]],"divide-circle":[[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8],[1,12,12,10]],"divide-square":[[5,3,3,18,18,2,2],[0,8,12,16,12],[0,12,16,12,16],[0,12,8,12,8]],divide:[[1,12,6,1],[0,5,12,19,12],[1,12,18,1]],"dna-off":[[6,"M15 2c-1.35 1.5-2.092 3-2.5 4.5M9 22c1.35-1.5 2.092-3 2.5-4.5"],[6,"M2 15c3.333-3 6.667-3 10-3m10-3c-1.5 1.35-3 2.092-4.5 2.5"],[6,"m17 6-2.5-2.5"],[6,"m14 8-1.5-1.5"],[6,"m7 18 2.5 2.5"],[6,"m3.5 14.5.5.5"],[6,"m20 9 .5.5"],[6,"m6.5 12.5 1 1"],[6,"m16.5 10.5 1 1"],[6,"m10 16 1.5 1.5"],[0,2,2,22,22]],dna:[[6,"M2 15c6.667-6 13.333 0 20-6"],[6,"M9 22c1.798-1.998 2.518-3.995 2.807-5.993"],[6,"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993"],[6,"m17 6-2.5-2.5"],[6,"m14 8-1-1"],[6,"m7 18 2.5 2.5"],[6,"m3.5 14.5.5.5"],[6,"m20 9 .5.5"],[6,"m6.5 12.5 1 1"],[6,"m16.5 10.5 1 1"],[6,"m10 16 1.5 1.5"]],dog:[[6,"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5"],[6,"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5"],[6,"M8 14v.5"],[6,"M16 14v.5"],[6,"M11.25 16.25h1.5L12 17l-.75-.75Z"],[6,"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306"]],"dollar-sign":[[0,12,2,12,22],[6,"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"]],"door-closed":[[6,"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14"],[6,"M2 20h20"],[6,"M14 12v.01"]],"door-open":[[6,"M13 4h3a2 2 0 0 1 2 2v14"],[6,"M2 20h3"],[6,"M13 20h9"],[6,"M10 12v.01"],[6,"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"]],"download-cloud":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M12 12v9"],[6,"m8 17 4 4 4-4"]],download:[[6,"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],[2,"7 10 12 15 17 10"],[0,12,15,12,3]],dribbble:[[1,12,12,10],[6,"M19.13 5.09C15.22 9.14 10 10.44 2.25 10.94"],[6,"M21.75 12.84c-6.62-1.41-12.14 1-16.38 6.32"],[6,"M8.56 2.75c4.37 6 6 9.42 8 17.72"]],droplet:[[6,"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"]],droplets:[[6,"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"],[6,"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"]],drumstick:[[6,"M15.45 15.4c-2.13.65-4.3.32-5.7-1.1-2.29-2.27-1.76-6.5 1.17-9.42 2.93-2.93 7.15-3.46 9.43-1.18 1.41 1.41 1.74 3.57 1.1 5.71-1.4-.51-3.26-.02-4.64 1.36-1.38 1.38-1.87 3.23-1.36 4.63z"],[6,"m11.25 15.6-2.16 2.16a2.5 2.5 0 1 1-4.56 1.73 2.49 2.49 0 0 1-1.41-4.24 2.5 2.5 0 0 1 3.14-.32l2.16-2.16"]],dumbbell:[[6,"m6.5 6.5 11 11"],[6,"m21 21-1-1"],[6,"m3 3 1 1"],[6,"m18 22 4-4"],[6,"m2 6 4-4"],[6,"m3 10 7-7"],[6,"m14 21 7-7"]],"ear-off":[[6,"M6 18.5a3.5 3.5 0 1 0 7 0c0-1.57.92-2.52 2.04-3.46"],[6,"M6 8.5c0-.75.13-1.47.36-2.14"],[6,"M8.8 3.15A6.5 6.5 0 0 1 19 8.5c0 1.63-.44 2.81-1.09 3.76"],[6,"M12.5 6A2.5 2.5 0 0 1 15 8.5M10 13a2 2 0 0 0 1.82-1.18"],[0,2,2,22,22]],ear:[[6,"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0"],[6,"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4"]],"edit-2":[[6,"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"]],"edit-3":[[6,"M12 20h9"],[6,"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"]],edit:[[6,"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],[6,"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"]],"egg-fried":[[1,11.5,12.5,3.5],[6,"M3 8c0-3.5 2.5-6 6.5-6 5 0 4.83 3 7.5 5s5 2 5 6c0 4.5-2.5 6.5-7 6.5-2.5 0-2.5 2.5-6 2.5s-7-2-7-5.5c0-3 1.5-3 1.5-5C3.5 10 3 9 3 8Z"]],"egg-off":[[6,"M6.399 6.399C5.362 8.157 4.65 10.189 4.5 12c-.37 4.43 1.27 9.95 7.5 10 3.256-.026 5.259-1.547 6.375-3.625"],[6,"M19.532 13.875A14.07 14.07 0 0 0 19.5 12c-.36-4.34-3.95-9.96-7.5-10-1.04.012-2.082.502-3.046 1.297"],[0,2,2,22,22]],egg:[[6,"M12 22c6.23-.05 7.87-5.57 7.5-10-.36-4.34-3.95-9.96-7.5-10-3.55.04-7.14 5.66-7.5 10-.37 4.43 1.27 9.95 7.5 10z"]],"equal-not":[[0,5,9,19,9],[0,5,15,19,15],[0,19,5,5,19]],equal:[[0,5,9,19,9],[0,5,15,19,15]],eraser:[[6,"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"],[6,"M22 21H7"],[6,"m5 11 9 9"]],euro:[[6,"M4 10h12"],[6,"M4 14h9"],[6,"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"]],expand:[[6,"m21 21-6-6m6 6v-4.8m0 4.8h-4.8"],[6,"M3 16.2V21m0 0h4.8M3 21l6-6"],[6,"M21 7.8V3m0 0h-4.8M21 3l-6 6"],[6,"M3 7.8V3m0 0h4.8M3 3l6 6"]],"external-link":[[6,"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],[2,"15 3 21 3 21 9"],[0,10,14,21,3]],"eye-off":[[6,"M9.88 9.88a3 3 0 1 0 4.24 4.24"],[6,"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"],[6,"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"],[0,2,2,22,22]],eye:[[6,"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],[1,12,12,3]],facebook:[[6,"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"]],factory:[[6,"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"],[6,"M17 18h1"],[6,"M12 18h1"],[6,"M7 18h1"]],fan:[[6,"M10.827 16.379a6.082 6.082 0 0 1-8.618-7.002l5.412 1.45a6.082 6.082 0 0 1 7.002-8.618l-1.45 5.412a6.082 6.082 0 0 1 8.618 7.002l-5.412-1.45a6.082 6.082 0 0 1-7.002 8.618l1.45-5.412Z"],[6,"M12 12v.01"]],"fast-forward":[[3,"13 19 22 12 13 5 13 19"],[3,"2 19 11 12 2 5 2 19"]],feather:[[6,"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"],[0,16,8,2,22],[0,17.5,15,9,15]],figma:[[6,"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"],[6,"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"],[6,"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"],[6,"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"],[6,"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"]],"file-archive":[[6,"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"],[2,"14 2 14 8 20 8"],[1,10,20,2],[6,"M10 7V6"],[6,"M10 12v-1"],[6,"M10 18v-2"]],"file-audio-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v2"],[2,"14 2 14 8 20 8"],[6,"M2 17v-3a4 4 0 0 1 8 0v3"],[1,9,17,1],[1,3,17,1]],"file-audio":[[6,"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],[2,"14 2 14 8 20 8"],[6,"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z"],[6,"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z"],[6,"M2 19v-3a6 6 0 0 1 12 0v3"]],"file-axis-3d":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M8 10v8h8"],[6,"m8 18 4-4"]],"file-badge-2":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[6,"M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"],[6,"m14 12.5 1 5.5-3-1-3 1 1-5.5"]],"file-badge":[[6,"M4 7V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-6"],[2,"14 2 14 8 20 8"],[6,"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"],[6,"M7 16.5 8 22l-3-1-3 1 1-5.5"]],"file-bar-chart-2":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M12 18v-6"],[6,"M8 18v-1"],[6,"M16 18v-3"]],"file-bar-chart":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M12 18v-4"],[6,"M8 18v-2"],[6,"M16 18v-6"]],"file-box":[[6,"M14.5 22H18a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M2.97 13.12c-.6.36-.97 1.02-.97 1.74v3.28c0 .72.37 1.38.97 1.74l3 1.83c.63.39 1.43.39 2.06 0l3-1.83c.6-.36.97-1.02.97-1.74v-3.28c0-.72-.37-1.38-.97-1.74l-3-1.83a1.97 1.97 0 0 0-2.06 0l-3 1.83Z"],[6,"m7 17-4.74-2.85"],[6,"m7 17 4.74-2.85"],[6,"M7 17v5"]],"file-check-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"m3 15 2 2 4-4"]],"file-check":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"m9 15 2 2 4-4"]],"file-clock":[[6,"M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],[2,"14 2 14 8 20 8"],[1,8,16,6],[6,"M9.5 17.5 8 16.25V14"]],"file-code":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"m9 18 3-3-3-3"],[6,"m5 12-3 3 3 3"]],"file-cog-2":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[1,12,15,2],[6,"M12 12v1"],[6,"M12 17v1"],[6,"m14.6 13.5-.87.5"],[6,"m10.27 16-.87.5"],[6,"m14.6 16.5-.87-.5"],[6,"m10.27 14-.87-.5"]],"file-cog":[[6,"M4 6V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4"],[2,"14 2 14 8 20 8"],[1,6,14,3],[6,"M6 10v1"],[6,"M6 17v1"],[6,"M10 14H9"],[6,"M3 14H2"],[6,"m9 11-.88.88"],[6,"M3.88 16.12 3 17"],[6,"m9 17-.88-.88"],[6,"M3.88 11.88 3 11"]],"file-diff":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[6,"M12 13V7"],[6,"M9 10h6"],[6,"M9 17h6"]],"file-digit":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M10 12h2v6"],[5,2,12,4,6],[6,"M10 18h4"]],"file-down":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M12 18v-6"],[6,"m9 15 3 3 3-3"]],"file-edit":[[6,"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],[2,"14 2 14 8 20 8"],[6,"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"]],"file-heart":[[6,"M4 6V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4"],[2,"14 2 14 8 20 8"],[6,"M10.29 10.7a2.43 2.43 0 0 0-2.66-.52c-.29.12-.56.3-.78.53l-.35.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L6.5 18l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"]],"file-image":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[1,10,13,2],[6,"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22"]],"file-input":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M2 15h10"],[6,"m9 18 3-3-3-3"]],"file-json-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M4 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"],[6,"M8 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"]],"file-json":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"],[6,"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"]],"file-key-2":[[6,"M4 10V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4"],[2,"14 2 14 8 20 8"],[1,4,16,2],[6,"m10 10-4.5 4.5"],[6,"m9 11 1 1"]],"file-key":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[1,10,16,2],[6,"m16 10-4.5 4.5"],[6,"m15 11 1 1"]],"file-line-chart":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"m16 13-3.5 3.5-2-2L8 17"]],"file-lock-2":[[6,"M4 5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4"],[2,"14 2 14 8 20 8"],[5,2,13,8,5,1],[6,"M8 13v-2a2 2 0 1 0-4 0v2"]],"file-lock":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[5,8,12,8,6,1],[6,"M15 12v-2a3 3 0 1 0-6 0v2"]],"file-minus-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M3 15h6"]],"file-minus":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[0,9,15,15,15]],"file-output":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M2 15h10"],[6,"m5 12-3 3 3 3"]],"file-pie-chart":[[6,"M16 22h2a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v3"],[2,"14 2 14 8 20 8"],[6,"M4.04 11.71a5.84 5.84 0 1 0 8.2 8.29"],[6,"M13.83 16A5.83 5.83 0 0 0 8 10.17V16h5.83Z"]],"file-plus-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M3 15h6"],[6,"M6 12v6"]],"file-plus":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[0,12,18,12,12],[0,9,15,15,15]],"file-question":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[6,"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2"],[6,"M12 17h.01"]],"file-scan":[[6,"M20 10V7.5L14.5 2H6a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h4.5"],[2,"14 2 14 8 20 8"],[6,"M16 22a2 2 0 0 1-2-2"],[6,"M20 22a2 2 0 0 0 2-2"],[6,"M20 14a2 2 0 0 1 2 2"],[6,"M16 14a2 2 0 0 0-2 2"]],"file-search-2":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[1,11.5,14.5,2.5],[6,"M13.25 16.25 15 18"]],"file-search":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v3"],[2,"14 2 14 8 20 8"],[6,"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[6,"m9 18-1.5-1.5"]],"file-signature":[[6,"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],[6,"M8 18h1"],[6,"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"]],"file-spreadsheet":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M8 13h2"],[6,"M8 17h2"],[6,"M14 13h2"],[6,"M14 17h2"]],"file-symlink":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"],[2,"14 2 14 8 20 8"],[6,"m10 18 3-3-3-3"],[6,"M4 18v-1a2 2 0 0 1 2-2h6"]],"file-terminal":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"m8 16 2-2-2-2"],[6,"M12 18h4"]],"file-text":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[0,16,13,8,13],[0,16,17,8,17],[0,10,9,8,9]],"file-type-2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[2,"14 2 14 8 20 8"],[6,"M2 13v-1h6v1"],[6,"M4 18h2"],[6,"M5 12v6"]],"file-type":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M9 13v-1h6v1"],[6,"M11 18h2"],[6,"M12 12v6"]],"file-up":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M12 12v6"],[6,"m15 15-3-3-3 3"]],"file-video-2":[[6,"M4 8V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4"],[2,"14 2 14 8 20 8"],[6,"m10 15.5 4 2.5v-6l-4 2.5"],[5,2,12,8,6,1]],"file-video":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"m10 11 5 3-5 3v-6Z"]],"file-volume-2":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[6,"M11.5 13.5c.32.4.5.94.5 1.5s-.18 1.1-.5 1.5"],[6,"M15 12c.64.8 1 1.87 1 3s-.36 2.2-1 3"],[6,"M8 15h.01"]],"file-volume":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v3"],[2,"14 2 14 8 20 8"],[6,"m7 10-3 2H2v4h2l3 2v-8Z"],[6,"M11 11c.64.8 1 1.87 1 3s-.36 2.2-1 3"]],"file-warning":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[6,"M12 9v4"],[6,"M12 17h.01"]],"file-x2":[[6,"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],[6,"M14 2v6h6"],[6,"m3 12.5 5 5"],[6,"m8 12.5-5 5"]],"file-x":[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"],[0,9.5,12.5,14.5,17.5],[0,14.5,12.5,9.5,17.5]],file:[[6,"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[2,"14 2 14 8 20 8"]],files:[[6,"M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V6.5L15.5 2z"],[6,"M3 7.6v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8"],[6,"M15 2v5h5"]],film:[[5,2,2,20,20,2.18,2.18],[0,7,2,7,22],[0,17,2,17,22],[0,2,12,22,12],[0,2,7,7,7],[0,2,17,7,17],[0,17,17,22,17],[0,17,7,22,7]],"filter-x":[[6,"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"],[6,"m22 3-5 5"],[6,"m17 3 5 5"]],filter:[[3,"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"]],fingerprint:[[6,"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4"],[6,"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2"],[6,"M17.29 21.02c.12-.6.43-2.3.5-3.02"],[6,"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4"],[6,"M8.65 22c.21-.66.45-1.32.57-2"],[6,"M14 13.12c0 2.38 0 6.38-1 8.88"],[6,"M2 16h.01"],[6,"M21.8 16c.2-2 .131-5.354 0-6"],[6,"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2"]],"fish-off":[[6,"M18 12.47v.03m0-.5v.47m-.475 5.056A6.744 6.744 0 0 1 15 18c-3.56 0-7.56-2.53-8.5-6 .348-1.28 1.114-2.433 2.121-3.38m3.444-2.088A8.802 8.802 0 0 1 15 6c3.56 0 6.06 2.54 7 6-.309 1.14-.786 2.177-1.413 3.058"],[6,"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33m7.48-4.372A9.77 9.77 0 0 1 16 6.07m0 11.86a9.77 9.77 0 0 1-1.728-3.618"],[6,"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98M8.53 3h5.27a2 2 0 0 1 1.98 1.67l.23 1.4M2 2l20 20"]],fish:[[6,"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"],[6,"M18 12v.5"],[6,"M16 17.93a9.77 9.77 0 0 1 0-11.86"],[6,"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33"],[6,"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4"],[6,"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98"]],"flag-off":[[6,"M8 2c3 0 5 2 8 2s4-1 4-1v11"],[6,"M4 22V4"],[6,"M4 15s1-1 4-1 5 2 8 2"],[0,2,2,22,22]],"flag-triangle-left":[[6,"M17 22V2L7 7l10 5"]],"flag-triangle-right":[[6,"M7 22V2l10 5-10 5"]],flag:[[6,"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"],[0,4,22,4,15]],flame:[[6,"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"]],"flashlight-off":[[6,"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4"],[6,"M7 2h11v4c0 2-2 2-2 4v1"],[0,11,6,18,6],[0,2,2,22,22]],flashlight:[[6,"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z"],[0,6,6,18,6],[0,12,12,12,12]],"flask-conical-off":[[6,"M10 10 4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-1.272-2.542"],[6,"M10 2v2.343"],[6,"M14 2v6.343"],[6,"M8.5 2h7"],[6,"M7 16h9"],[0,2,2,22,22]],"flask-conical":[[6,"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"],[6,"M8.5 2h7"],[6,"M7 16h10"]],"flask-round":[[6,"M10 2v7.31"],[6,"M14 9.3V1.99"],[6,"M8.5 2h7"],[6,"M14 9.3a6.5 6.5 0 1 1-4 0"],[6,"M5.52 16h12.96"]],"flip-horizontal-2":[[6,"m3 7 5 5-5 5V7"],[6,"m21 7-5 5 5 5V7"],[6,"M12 20v2"],[6,"M12 14v2"],[6,"M12 8v2"],[6,"M12 2v2"]],"flip-horizontal":[[6,"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3"],[6,"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"],[6,"M12 20v2"],[6,"M12 14v2"],[6,"M12 8v2"],[6,"M12 2v2"]],"flip-vertical-2":[[6,"m17 3-5 5-5-5h10"],[6,"m17 21-5-5-5 5h10"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"]],"flip-vertical":[[6,"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3"],[6,"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3"],[6,"M4 12H2"],[6,"M10 12H8"],[6,"M16 12h-2"],[6,"M22 12h-2"]],"flower-2":[[6,"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1"],[1,12,8,2],[6,"M12 10v12"],[6,"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z"],[6,"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z"]],flower:[[6,"M12 7.5a4.5 4.5 0 1 1 4.5 4.5M12 7.5A4.5 4.5 0 1 0 7.5 12M12 7.5V9m-4.5 3a4.5 4.5 0 1 0 4.5 4.5M7.5 12H9m7.5 0a4.5 4.5 0 1 1-4.5 4.5m4.5-4.5H15m-3 4.5V15"],[1,12,12,3],[6,"m8 16 1.5-1.5"],[6,"M14.5 9.5 16 8"],[6,"m8 8 1.5 1.5"],[6,"M14.5 14.5 16 16"]],focus:[[1,12,12,3],[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"]],"folder-archive":[[6,"M22 20V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h6"],[1,16,19,2],[6,"M16 11v-1"],[6,"M16 17v-2"]],"folder-check":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"m9 13 2 2 4-4"]],"folder-clock":[[6,"M7 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2"],[1,16,16,6],[6,"M16 14v2l1 1"]],"folder-closed":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"M2 10h20"]],"folder-cog-2":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,12,13,2],[6,"M12 10v1"],[6,"M12 15v1"],[6,"m14.6 11.5-.87.5"],[6,"m10.27 14-.87.5"],[6,"m14.6 14.5-.87-.5"],[6,"m10.27 12-.87-.5"]],"folder-cog":[[6,"M10.5 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v3"],[1,18,18,3],[6,"M18 14v1"],[6,"M18 21v1"],[6,"M22 18h-1"],[6,"M15 18h-1"],[6,"m21 15-.88.88"],[6,"M15.88 20.12 15 21"],[6,"m21 21-.88-.88"],[6,"M15.88 15.88 15 15"]],"folder-down":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"M12 10v6"],[6,"m15 13-3 3-3-3"]],"folder-edit":[[6,"M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],[6,"M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"]],"folder-git-2":[[6,"M22 13V8a1.974 1.974 0 0 0-2-2h-7.9c-.3 0-.7-.1-.9-.2-.3-.2-.5-.4-.7-.7l-.9-1.2c-.2-.3-.4-.5-.7-.7-.3-.1-.6-.2-1-.2H4a1.974 1.974 0 0 0-2 2v13c0 1.1.9 2 2 2h5"],[1,20,19,2],[1,13,12,2],[6,"M18 19c-2.8 0-5-2.2-5-5v8"]],"folder-git":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,12,13,2],[0,6,13,10,13],[0,14,13,18,13]],"folder-heart":[[6,"M11 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v1.5"],[6,"M21.29 13.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 21l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z"]],"folder-input":[[6,"M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],[6,"M2 13h10"],[6,"m9 16 3-3-3-3"]],"folder-key":[[6,"M10 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v2"],[1,16,20,2],[6,"m22 14-4.5 4.5"],[6,"m21 15 1 1"]],"folder-lock":[[6,"M10 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v2.5"],[5,14,17,8,5,1],[6,"M20 17v-2a2 2 0 1 0-4 0v2"]],"folder-minus":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[0,9,13,15,13]],"folder-open":[[6,"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2"]],"folder-output":[[6,"M2 7.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2"],[6,"M2 13h10"],[6,"m5 10-3 3 3 3"]],"folder-plus":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[0,12,10,12,16],[0,9,13,15,13]],"folder-search-2":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,11.5,12.5,2.5],[6,"M13.27 14.27 15 16"]],"folder-search":[[6,"M11 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v4"],[1,17,17,3],[6,"m21 21-1.5-1.5"]],"folder-symlink":[[6,"M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2"],[6,"m8 16 3-3-3-3"],[6,"M2 16v-1a2 2 0 0 1 2-2h6"]],"folder-tree":[[6,"M13 10h7a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"],[6,"M13 21h7a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.88a1 1 0 0 1-.9-.55l-.44-.9a1 1 0 0 0-.9-.55H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"],[6,"M3 3v2c0 1.1.9 2 2 2h3"],[6,"M3 3v13c0 1.1.9 2 2 2h3"]],"folder-up":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"M12 10v6"],[6,"m9 13 3-3 3 3"]],"folder-x":[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[6,"m9.5 10.5 5 5"],[6,"m14.5 10.5-5 5"]],folder:[[6,"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"]],folders:[[6,"M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],[6,"M2 8v11c0 1.1.9 2 2 2h14"]],footprints:[[6,"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"],[6,"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"],[6,"M16 17h4"],[6,"M4 13h4"]],forklift:[[6,"M12 12H5a2 2 0 0 0-2 2v5"],[1,13,19,2],[1,5,19,2],[6,"M8 19h3m5-17v17h6M6 12V7c0-1.1.9-2 2-2h3l5 5"]],"form-input":[[5,2,6,20,12,2],[6,"M12 12h.01"],[6,"M17 12h.01"],[6,"M7 12h.01"]],forward:[[2,"15 17 20 12 15 7"],[6,"M4 18v-2a4 4 0 0 1 4-4h12"]],frame:[[0,22,6,2,6],[0,22,18,2,18],[0,6,2,6,22],[0,18,2,18,22]],framer:[[6,"M5 16V9h14V2H5l14 14h-7m-7 0 7 7v-7m-7 0h7"]],frown:[[1,12,12,10],[6,"M16 16s-1.5-2-4-2-4 2-4 2"],[0,9,9,9.01,9],[0,15,9,15.01,9]],fuel:[[0,3,22,15,22],[0,4,9,14,9],[6,"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18"],[6,"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5"]],"function-square":[[5,3,3,18,18,2,2],[6,"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3"],[6,"M9 11.2h5.7"]],"gamepad-2":[[0,6,11,10,11],[0,8,9,8,13],[0,15,12,15.01,12],[0,18,10,18.01,10],[6,"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"]],gamepad:[[0,6,12,10,12],[0,8,10,8,14],[0,15,13,15.01,13],[0,18,11,18.01,11],[5,2,6,20,12,2]],gauge:[[6,"m12 15 3.5-3.5"],[6,"M20.3 18c.4-1 .7-2.2.7-3.4C21 9.8 17 6 12 6s-9 3.8-9 8.6c0 1.2.3 2.4.7 3.4"]],gavel:[[6,"m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10"],[6,"m16 16 6-6"],[6,"m8 8 6-6"],[6,"m9 7 8 8"],[6,"m21 11-8-8"]],gem:[[3,"6 3 18 3 22 9 12 22 2 9"],[6,"m12 22 4-13-3-6"],[6,"M12 22 8 9l3-6"],[6,"M2 9h20"]],ghost:[[6,"M9 10h.01"],[6,"M15 10h.01"],[6,"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"]],gift:[[2,"20 12 20 22 4 22 4 12"],[5,2,7,20,5],[0,12,22,12,7],[6,"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"],[6,"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"]],"git-branch-plus":[[6,"M6 3v12"],[6,"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[6,"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[6,"M15 6a9 9 0 0 0-9 9"],[6,"M18 15v6"],[6,"M21 18h-6"]],"git-branch":[[0,6,3,6,15],[1,18,6,3],[1,6,18,3],[6,"M18 9a9 9 0 0 1-9 9"]],"git-commit":[[1,12,12,3],[0,3,12,9,12],[0,15,12,21,12]],"git-compare":[[1,18,18,3],[1,6,6,3],[6,"M13 6h3a2 2 0 0 1 2 2v7"],[6,"M11 18H8a2 2 0 0 1-2-2V9"]],"git-fork":[[1,12,18,3],[1,6,6,3],[1,18,6,3],[6,"M18 9v1a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V9"],[6,"M12 12v3"]],"git-merge":[[1,18,18,3],[1,6,6,3],[6,"M6 21V9a9 9 0 0 0 9 9"]],"git-pull-request-closed":[[1,18,18,3],[1,6,6,3],[6,"M18 11.5V15"],[6,"m21 3-6 6"],[6,"m21 9-6-6"],[0,6,9,6,21]],"git-pull-request-draft":[[1,18,18,3],[1,6,6,3],[6,"M18 6V5"],[6,"M18 11v-1"],[0,6,9,6,21]],"git-pull-request":[[1,18,18,3],[1,6,6,3],[6,"M13 6h3a2 2 0 0 1 2 2v7"],[0,6,9,6,21]],github:[[6,"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"],[6,"M9 18c-4.51 2-5-2-7-2"]],gitlab:[[6,"m22 13.29-3.33-10a.42.42 0 0 0-.14-.18.38.38 0 0 0-.22-.11.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18l-2.26 6.67H8.32L6.1 3.26a.42.42 0 0 0-.1-.18.38.38 0 0 0-.26-.08.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18L2 13.29a.74.74 0 0 0 .27.83L12 21l9.69-6.88a.71.71 0 0 0 .31-.83Z"]],"glass-water":[[6,"M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z"],[6,"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0"]],glasses:[[1,6,15,4],[1,18,15,4],[6,"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"],[6,"M2.5 13 5 7c.7-1.3 1.4-2 3-2"],[6,"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"]],"globe-2":[[6,"M21.54 15H17a2 2 0 0 0-2 2v4.54"],[6,"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17"],[6,"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"],[1,12,12,10]],globe:[[1,12,12,10],[0,2,12,22,12],[6,"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"]],grab:[[6,"M18 11.5V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4"],[6,"M14 10V8a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"],[6,"M10 9.9V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5"],[6,"M6 14v0a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"],[6,"M18 11v0a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0"]],"graduation-cap":[[6,"M22 10v6M2 10l10-5 10 5-10 5z"],[6,"M6 12v5c3 3 9 3 12 0v-5"]],grape:[[6,"M22 5V2l-5.89 5.89"],[1,16.6,15.89,3],[1,8.11,7.4,3],[1,12.35,11.65,3],[1,13.91,5.85,3],[1,18.15,10.09,3],[1,6.56,13.2,3],[1,10.8,17.44,3],[1,5,19,3]],grid:[[5,3,3,18,18,2,2],[0,3,9,21,9],[0,3,15,21,15],[0,9,3,9,21],[0,15,3,15,21]],"grip-horizontal":[[1,12,9,1],[1,19,9,1],[1,5,9,1],[1,12,15,1],[1,19,15,1],[1,5,15,1]],"grip-vertical":[[1,9,12,1],[1,9,5,1],[1,9,19,1],[1,15,12,1],[1,15,5,1],[1,15,19,1]],grip:[[1,12,5,1],[1,19,5,1],[1,5,5,1],[1,12,12,1],[1,19,12,1],[1,5,12,1],[1,12,19,1],[1,19,19,1],[1,5,19,1]],hammer:[[6,"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"],[6,"M17.64 15 22 10.64"],[6,"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91"]],"hand-metal":[[6,"M18 12.5V10a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4"],[6,"M14 11V9a2 2 0 1 0-4 0v2"],[6,"M10 10.5V5a2 2 0 1 0-4 0v9"],[6,"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5"]],hand:[[6,"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"],[6,"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"],[6,"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"],[6,"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"]],"hard-drive":[[0,22,12,2,12],[6,"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"],[0,6,16,6.01,16],[0,10,16,10.01,16]],"hard-hat":[[6,"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z"],[6,"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5"],[6,"M4 15v-3a6 6 0 0 1 6-6h0"],[6,"M14 6h0a6 6 0 0 1 6 6v3"]],hash:[[0,4,9,20,9],[0,4,15,20,15],[0,10,3,8,21],[0,16,3,14,21]],haze:[[6,"m5.2 6.2 1.4 1.4"],[6,"M2 13h2"],[6,"M20 13h2"],[6,"m17.4 7.6 1.4-1.4"],[6,"M22 17H2"],[6,"M22 21H2"],[6,"M16 13a4 4 0 0 0-8 0"],[6,"M12 5V2.5"]],"heading-1":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"m17 12 3-2v8"]],"heading-2":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"]],"heading-3":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"],[6,"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"]],"heading-4":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17 10v4h4"],[6,"M21 10v8"]],"heading-5":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[6,"M17 13v-3h4"],[6,"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17"]],"heading-6":[[6,"M4 12h8"],[6,"M4 18V6"],[6,"M12 18V6"],[1,19,16,2],[6,"M20 10c-2 2-3 3.5-3 6"]],heading:[[6,"M6 12h12"],[6,"M6 20V4"],[6,"M18 20V4"]],headphones:[[6,"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"]],"heart-crack":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"m12 13-1-1 2-2-3-3 2-2"]],"heart-handshake":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"],[6,"m18 15-2-2"],[6,"m15 18-2-2"]],"heart-off":[[0,2,2,22,22],[6,"M16.5 16.5 12 21l-7-7c-1.5-1.45-3-3.2-3-5.5a5.5 5.5 0 0 1 2.14-4.35"],[6,"M8.76 3.1c1.15.22 2.13.78 3.24 1.9 1.5-1.5 2.74-2 4.5-2A5.5 5.5 0 0 1 22 8.5c0 2.12-1.3 3.78-2.67 5.17"]],"heart-pulse":[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"],[6,"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"]],heart:[[6,"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"]],"help-circle":[[1,12,12,10],[6,"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],[0,12,17,12.01,17]],"helping-hand":[[6,"m3 15 5.12-5.12A3 3 0 0 1 10.24 9H13a2 2 0 1 1 0 4h-2.5m4-.68 4.17-4.89a1.88 1.88 0 0 1 2.92 2.36l-4.2 5.94A3 3 0 0 1 14.96 17H9.83a2 2 0 0 0-1.42.59L7 19"],[6,"m2 14 6 6"]],hexagon:[[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"]],highlighter:[[6,"m9 11-6 6v3h9l3-3"],[6,"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"]],history:[[6,"M3 3v5h5"],[6,"M3.05 13A9 9 0 1 0 6 5.3L3 8"],[6,"M12 7v5l4 2"]],home:[[6,"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"],[2,"9 22 9 12 15 12 15 22"]],"hop-off":[[6,"M17.5 5.5C19 7 20.5 9 21 11c-1.323.265-2.646.39-4.118.226"],[6,"M5.5 17.5C7 19 9 20.5 11 21c.5-2.5.5-5-1-8.5"],[6,"M17.5 17.5c-2.5 0-4 0-6-1"],[6,"M20 11.5c1 1.5 2 3.5 2 4.5"],[6,"M11.5 20c1.5 1 3.5 2 4.5 2 .5-1.5 0-3-.5-4.5"],[6,"M22 22c-2 0-3.5-.5-5.5-1.5"],[6,"M4.783 4.782C1.073 8.492 1 14.5 5 18c1-1 2-4.5 1.5-6.5 1.5 1 4 1 5.5.5M8.227 2.57C11.578 1.335 15.453 2.089 18 5c-.88.88-3.7 1.761-5.726 1.618"],[0,2,2,22,22]],hop:[[6,"M17.5 5.5C19 7 20.5 9 21 11c-2.5.5-5 .5-8.5-1"],[6,"M5.5 17.5C7 19 9 20.5 11 21c.5-2.5.5-5-1-8.5"],[6,"M16.5 11.5c1 2 1 3.5 1 6-2.5 0-4 0-6-1"],[6,"M20 11.5c1 1.5 2 3.5 2 4.5-1.5.5-3 0-4.5-.5"],[6,"M11.5 20c1.5 1 3.5 2 4.5 2 .5-1.5 0-3-.5-4.5"],[6,"M20.5 16.5c1 2 1.5 3.5 1.5 5.5-2 0-3.5-.5-5.5-1.5"],[6,"M4.783 4.782C8.493 1.072 14.5 1 18 5c-1 1-4.5 2-6.5 1.5 1 1.5 1 4 .5 5.5-1.5.5-4 .5-5.5-.5C7 13.5 6 17 5 18c-4-3.5-3.927-9.508-.217-13.218Z"],[6,"M4.5 4.5 3 3c-.184-.185-.184-.816 0-1"]],hotel:[[6,"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"],[6,"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16"],[6,"M8 7h.01"],[6,"M16 7h.01"],[6,"M12 7h.01"],[6,"M12 11h.01"],[6,"M16 11h.01"],[6,"M8 11h.01"],[6,"M10 22v-6.5m4 0V22"]],hourglass:[[6,"M5 22h14"],[6,"M5 2h14"],[6,"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"],[6,"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"]],"ice-cream-2":[[6,"M12 17c5 0 8-2.69 8-6H4c0 3.31 3 6 8 6Zm-4 4h8m-4-3v3M5.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M12.14 11a3.5 3.5 0 1 1 6.71 0"],[6,"M15.5 6.5a3.5 3.5 0 1 0-7 0"]],"ice-cream":[[6,"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11"],[6,"M17 7A5 5 0 0 0 7 7"],[6,"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4"]],"image-minus":[[6,"M21 9v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],[0,16,5,22,5],[1,9,9,2],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"]],"image-off":[[0,2,2,22,22],[6,"M10.41 10.41a2 2 0 1 1-2.83-2.83"],[0,13.5,13.5,6,21],[0,18,12,21,15],[6,"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59"],[6,"M21 15V5a2 2 0 0 0-2-2H9"]],"image-plus":[[6,"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],[0,16,5,22,5],[0,19,2,19,8],[1,9,9,2],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"]],image:[[5,3,3,18,18,2,2],[1,9,9,2],[6,"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"]],import:[[6,"M12 3v12"],[6,"m8 11 4 4 4-4"],[6,"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4"]],inbox:[[2,"22 12 16 12 14 15 10 15 8 12 2 12"],[6,"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"]],indent:[[2,"3 8 7 12 3 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],"indian-rupee":[[6,"M6 3h12"],[6,"M6 8h12"],[6,"m6 13 8.5 8"],[6,"M6 13h3"],[6,"M9 13c6.667 0 6.667-10 0-10"]],infinity:[[6,"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z"]],info:[[1,12,12,10],[0,12,16,12,12],[0,12,8,12.01,8]],inspect:[[6,"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"],[6,"m12 12 4 10 1.7-4.3L22 16Z"]],instagram:[[5,2,2,20,20,5,5],[6,"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"],[0,17.5,6.5,17.51,6.5]],italic:[[0,19,4,10,4],[0,14,20,5,20],[0,15,4,9,20]],"japanese-yen":[[6,"M12 9.5V21m0-11.5L6 3m6 6.5L18 3"],[6,"M6 15h12"],[6,"M6 11h12"]],joystick:[[6,"M21 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2Z"],[6,"M6 15v-2"],[6,"M12 15V9"],[1,12,6,3]],key:[[1,7.5,15.5,5.5],[6,"m21 2-9.6 9.6"],[6,"m15.5 7.5 3 3L22 7l-3-3"]],keyboard:[[5,2,4,20,16,2,2],[6,"M6 8h.001"],[6,"M10 8h.001"],[6,"M14 8h.001"],[6,"M18 8h.001"],[6,"M8 12h.001"],[6,"M12 12h.001"],[6,"M16 12h.001"],[6,"M7 16h10"]],"lamp-ceiling":[[6,"M12 2v5"],[6,"M6 7h12l4 9H2l4-9Z"],[6,"M9.17 16a3 3 0 1 0 5.66 0"]],"lamp-desk":[[6,"m14 5-3 3 2 7 8-8-7-2Z"],[6,"m14 5-3 3-3-3 3-3 3 3Z"],[6,"M9.5 6.5 4 12l3 6"],[6,"M3 22v-2c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v2H3Z"]],"lamp-floor":[[6,"M9 2h6l3 7H6l3-7Z"],[6,"M12 9v13"],[6,"M9 22h6"]],"lamp-wall-down":[[6,"M11 13h6l3 7H8l3-7Z"],[6,"M14 13V8a2 2 0 0 0-2-2H8"],[6,"M4 9h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H4v6Z"]],"lamp-wall-up":[[6,"M11 4h6l3 7H8l3-7Z"],[6,"M14 11v5a2 2 0 0 1-2 2H8"],[6,"M4 15h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H4v-6Z"]],lamp:[[6,"M8 2h8l4 10H4L8 2Z"],[6,"M12 12v6"],[6,"M8 22v-2c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v2H8Z"]],landmark:[[0,3,22,21,22],[0,6,18,6,11],[0,10,18,10,11],[0,14,18,14,11],[0,18,18,18,11],[3,"12 2 20 7 4 7"]],languages:[[6,"m5 8 6 6"],[6,"m4 14 6-6 2-3"],[6,"M2 5h12"],[6,"M7 2h1"],[6,"m22 22-5-10-5 10"],[6,"M14 18h6"]],"laptop-2":[[5,3,4,18,12,2,2],[0,2,20,22,20]],laptop:[[6,"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"]],"lasso-select":[[6,"M7 22a5 5 0 0 1-2-4"],[6,"M7 16.93c.96.43 1.96.74 2.99.91"],[6,"M3.34 14A6.8 6.8 0 0 1 2 10c0-4.42 4.48-8 10-8s10 3.58 10 8a7.19 7.19 0 0 1-.33 2"],[6,"M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"],[6,"M14.33 22h-.09a.35.35 0 0 1-.24-.32v-10a.34.34 0 0 1 .33-.34c.08 0 .15.03.21.08l7.34 6a.33.33 0 0 1-.21.59h-4.49l-2.57 3.85a.35.35 0 0 1-.28.14v0z"]],lasso:[[6,"M7 22a5 5 0 0 1-2-4"],[6,"M3.3 14A6.8 6.8 0 0 1 2 10c0-4.4 4.5-8 10-8s10 3.6 10 8-4.5 8-10 8a12 12 0 0 1-5-1"],[6,"M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"]],laugh:[[1,12,12,10],[6,"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z"],[0,9,9,9.01,9],[0,15,9,15.01,9]],layers:[[3,"12 2 2 7 12 12 22 7 12 2"],[2,"2 17 12 22 22 17"],[2,"2 12 12 17 22 12"]],"layout-dashboard":[[5,3,3,7,9],[5,14,3,7,5],[5,14,12,7,9],[5,3,16,7,5]],"layout-grid":[[5,3,3,7,7],[5,14,3,7,7],[5,14,14,7,7],[5,3,14,7,7]],"layout-list":[[5,3,14,7,7],[5,3,3,7,7],[0,14,4,21,4],[0,14,9,21,9],[0,14,15,21,15],[0,14,20,21,20]],"layout-template":[[6,"M21 3H3v7h18V3z"],[6,"M21 14h-5v7h5v-7z"],[6,"M12 14H3v7h9v-7z"]],layout:[[5,3,3,18,18,2,2],[0,3,9,21,9],[0,9,21,9,9]],leaf:[[6,"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"],[6,"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"]],library:[[6,"m16 6 4 14"],[6,"M12 6v14"],[6,"M8 8v12"],[6,"M4 4v16"]],"life-buoy":[[1,12,12,10],[1,12,12,4],[0,4.93,4.93,9.17,9.17],[0,14.83,14.83,19.07,19.07],[0,14.83,9.17,19.07,4.93],[0,14.83,9.17,18.36,5.64],[0,4.93,19.07,9.17,14.83]],"lightbulb-off":[[6,"M9 18h6"],[6,"M10 22h4"],[6,"m2 2 20 20"],[6,"M9 2.804A6 6 0 0 1 18 8a4.65 4.65 0 0 1-1.03 3"],[6,"M8.91 14a4.61 4.61 0 0 0-1.41-2.5C6.23 10.23 6 9 6 8a6 6 0 0 1 .084-1"]],lightbulb:[[0,9,18,15,18],[0,10,22,14,22],[6,"M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"]],"line-chart":[[6,"M3 3v18h18"],[6,"m19 9-5 5-4-4-3 3"]],"link-2off":[[6,"M9 17H7A5 5 0 0 1 7 7"],[6,"M15 7h2a5 5 0 0 1 4 8"],[0,8,12,12,12],[0,2,2,22,22]],"link-2":[[6,"M9 17H7A5 5 0 0 1 7 7h2"],[6,"M15 7h2a5 5 0 1 1 0 10h-2"],[0,8,12,16,12]],link:[[6,"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],[6,"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"]],linkedin:[[6,"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"],[5,2,9,4,12],[1,4,4,2]],"list-checks":[[0,10,6,21,6],[0,10,12,21,12],[0,10,18,21,18],[2,"3 6 4 7 6 5"],[2,"3 12 4 13 6 11"],[2,"3 18 4 19 6 17"]],"list-end":[[6,"M16 12H3"],[6,"M16 6H3"],[6,"M10 18H3"],[6,"M21 6v10a2 2 0 0 1-2 2h-4"],[6,"m16 16-2 2 2 2"]],"list-minus":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"M21 12h-6"]],"list-music":[[6,"M21 15V6"],[6,"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"],[6,"M12 12H3"],[6,"M16 6H3"],[6,"M12 18H3"]],"list-ordered":[[0,10,6,21,6],[0,10,12,21,12],[0,10,18,21,18],[6,"M4 6h1v4"],[6,"M4 10h2"],[6,"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"]],"list-plus":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"M18 9v6"],[6,"M21 12h-6"]],"list-start":[[6,"M16 12H3"],[6,"M16 18H3"],[6,"M10 6H3"],[6,"M21 18V8a2 2 0 0 0-2-2h-5"],[6,"m16 8-2-2 2-2"]],"list-tree":[[6,"M21 12h-8"],[6,"M21 6H8"],[6,"M21 18h-8"],[6,"M3 6v4c0 1.1.9 2 2 2h3"],[6,"M3 10v6c0 1.1.9 2 2 2h3"]],"list-video":[[6,"M12 12H3"],[6,"M16 6H3"],[6,"M12 18H3"],[6,"m16 12 5 3-5 3v-6Z"]],"list-x":[[6,"M11 12H3"],[6,"M16 6H3"],[6,"M16 18H3"],[6,"m19 10-4 4"],[6,"m15 10 4 4"]],list:[[0,8,6,21,6],[0,8,12,21,12],[0,8,18,21,18],[0,3,6,3.01,6],[0,3,12,3.01,12],[0,3,18,3.01,18]],"loader-2":[[6,"M21 12a9 9 0 1 1-6.219-8.56"]],loader:[[0,12,2,12,6],[0,12,18,12,22],[0,4.93,4.93,7.76,7.76],[0,16.24,16.24,19.07,19.07],[0,2,12,6,12],[0,18,12,22,12],[0,4.93,19.07,7.76,16.24],[0,16.24,7.76,19.07,4.93]],"locate-fixed":[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[1,12,12,7],[1,12,12,3]],"locate-off":[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[6,"M7.11 7.11C5.83 8.39 5 10.1 5 12c0 3.87 3.13 7 7 7 1.9 0 3.61-.83 4.89-2.11"],[6,"M18.71 13.96c.19-.63.29-1.29.29-1.96 0-3.87-3.13-7-7-7-.67 0-1.33.1-1.96.29"],[0,2,2,22,22]],locate:[[0,2,12,5,12],[0,19,12,22,12],[0,12,2,12,5],[0,12,19,12,22],[1,12,12,7]],lock:[[5,3,11,18,11,2,2],[6,"M7 11V7a5 5 0 0 1 10 0v4"]],"log-in":[[6,"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"],[2,"10 17 15 12 10 7"],[0,15,12,3,12]],"log-out":[[6,"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],[2,"16 17 21 12 16 7"],[0,21,12,9,12]],luggage:[[6,"M6 20h0a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h0"],[6,"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14"],[6,"M10 20h4"],[1,16,20,2],[1,8,20,2]],magnet:[[6,"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15"],[6,"m5 8 4 4"],[6,"m12 15 4 4"]],"mail-check":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"m16 19 2 2 4-4"]],"mail-minus":[[6,"M22 15V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M16 19h6"]],"mail-open":[[6,"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"],[6,"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"]],"mail-plus":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M19 16v6"],[6,"M16 19h6"]],"mail-question":[[6,"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M18 15.28c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2"],[6,"M20 22v.01"]],"mail-search":[[6,"M22 12.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h7.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6v0Z"],[1,18,18,3],[6,"m22 22-1.5-1.5"]],"mail-warning":[[6,"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"M20 14v4"],[6,"M20 22v.01"]],"mail-x":[[6,"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9"],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"],[6,"m17 17 4 4"],[6,"m21 17-4 4"]],mail:[[5,2,4,20,16,2],[6,"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"]],mailbox:[[6,"M22 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.5C2 7 4 5 6.5 5H18c2.2 0 4 1.8 4 4v8Z"],[2,"15,9 18,9 18,11"],[6,"M6.5 5C9 5 11 7 11 9.5V17a2 2 0 0 1-2 2v0"],[0,6,10,7,10]],mails:[[5,6,4,16,13,2],[6,"m22 7-7.1 3.78c-.57.3-1.23.3-1.8 0L6 7"],[6,"M2 8v11c0 1.1.9 2 2 2h14"]],"map-pin-off":[[6,"M5.43 5.43A8.06 8.06 0 0 0 4 10c0 6 8 12 8 12a29.94 29.94 0 0 0 5-5"],[6,"M19.18 13.52A8.66 8.66 0 0 0 20 10a8 8 0 0 0-8-8 7.88 7.88 0 0 0-3.52.82"],[6,"M9.13 9.13A2.78 2.78 0 0 0 9 10a3 3 0 0 0 3 3 2.78 2.78 0 0 0 .87-.13"],[6,"M14.9 9.25a3 3 0 0 0-2.15-2.16"],[0,2,2,22,22]],"map-pin":[[6,"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"],[1,12,10,3]],map:[[3,"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"],[0,9,3,9,18],[0,15,6,15,21]],martini:[[6,"M8 22h8"],[6,"M12 11v11"],[6,"m19 3-7 8-7-8Z"]],"maximize-2":[[2,"15 3 21 3 21 9"],[2,"9 21 3 21 3 15"],[0,21,3,14,10],[0,3,21,10,14]],maximize:[[6,"M8 3H5a2 2 0 0 0-2 2v3"],[6,"M21 8V5a2 2 0 0 0-2-2h-3"],[6,"M3 16v3a2 2 0 0 0 2 2h3"],[6,"M16 21h3a2 2 0 0 0 2-2v-3"]],medal:[[6,"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"],[6,"M11 12 5.12 2.2"],[6,"m13 12 5.88-9.8"],[6,"M8 7h8"],[1,12,17,5],[6,"M12 18v-2h-.5"]],"megaphone-off":[[6,"M9.26 9.26 3 11v3l14.14 3.14"],[6,"M21 15.34V6l-7.31 2.03"],[6,"M11.6 16.8a3 3 0 1 1-5.8-1.6"],[0,2,2,22,22]],megaphone:[[6,"m3 11 18-5v12L3 14v-3z"],[6,"M11.6 16.8a3 3 0 1 1-5.8-1.6"]],meh:[[1,12,12,10],[0,8,15,16,15],[0,9,9,9.01,9],[0,15,9,15.01,9]],menu:[[0,4,12,20,12],[0,4,6,20,6],[0,4,18,20,18]],"message-circle":[[6,"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"]],"message-square-dashed":[[6,"M3 6V5c0-1.1.9-2 2-2h2"],[6,"M11 3h3"],[6,"M18 3h1c1.1 0 2 .9 2 2"],[6,"M21 9v2"],[6,"M21 15c0 1.1-.9 2-2 2h-1"],[6,"M14 17h-3"],[6,"m7 17-4 4v-5"],[6,"M3 12v-2"]],"message-square-plus":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[0,9,10,15,10],[0,12,7,12,13]],"message-square":[[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"]],"messages-square":[[6,"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z"],[6,"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"]],"mic-2":[[6,"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12"],[1,17,7,5]],"mic-off":[[0,2,2,22,22],[6,"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"],[6,"M5 10v2a7 7 0 0 0 12 5"],[6,"M15 9.34V5a3 3 0 0 0-5.68-1.33"],[6,"M9 9v3a3 3 0 0 0 5.12 2.12"],[0,12,19,12,22]],mic:[[6,"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"],[6,"M19 10v2a7 7 0 0 1-14 0v-2"],[0,12,19,12,22]],microscope:[[6,"M6 18h8"],[6,"M3 22h18"],[6,"M14 22a7 7 0 1 0 0-14h-1"],[6,"M9 14h2"],[6,"M8 6h4"],[6,"M13 10V6.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2.5a.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V10c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2Z"]],microwave:[[5,2,4,20,15,2],[5,6,8,8,7,1],[6,"M18 8v7"],[6,"M6 19v2"],[6,"M18 19v2"]],milestone:[[6,"M18 6H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h13l4-3.5L18 6Z"],[6,"M12 13v8"],[6,"M12 3v3"]],"milk-off":[[6,"M8 2h8"],[6,"M9 2v1.343M15 2v2.789a4 4 0 0 0 .672 2.219l.656.984a4 4 0 0 1 .672 2.22v1.131M7.8 7.8l-.128.192A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3"],[6,"M7 15a6.47 6.47 0 0 1 5 0 6.472 6.472 0 0 0 3.435.435"],[0,2,2,22,22]],milk:[[6,"M8 2h8"],[6,"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2"],[6,"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0"]],"minimize-2":[[2,"4 14 10 14 10 20"],[2,"20 10 14 10 14 4"],[0,14,10,21,3],[0,3,21,10,14]],minimize:[[6,"M8 3v3a2 2 0 0 1-2 2H3"],[6,"M21 8h-3a2 2 0 0 1-2-2V3"],[6,"M3 16h3a2 2 0 0 1 2 2v3"],[6,"M16 21v-3a2 2 0 0 1 2-2h3"]],"minus-circle":[[1,12,12,10],[0,8,12,16,12]],"minus-square":[[5,3,3,18,18,2,2],[0,8,12,16,12]],minus:[[0,5,12,19,12]],"monitor-off":[[6,"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2"],[6,"M22 15V5a2 2 0 0 0-2-2H9"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m2 2 20 20"]],"monitor-smartphone":[[6,"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8"],[6,"M10 19v-3.96 3.15"],[6,"M7 19h5"],[5,16,12,6,10,2]],"monitor-speaker":[[6,"M5.5 20H8"],[6,"M17 9h.01"],[5,12,4,10,16,2],[6,"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4"],[1,17,15,1]],monitor:[[5,2,3,20,14,2,2],[0,8,21,16,21],[0,12,17,12,21]],moon:[[6,"M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"]],"more-horizontal":[[1,12,12,1],[1,19,12,1],[1,5,12,1]],"more-vertical":[[1,12,12,1],[1,12,5,1],[1,12,19,1]],"mountain-snow":[[6,"m8 3 4 8 5-5 5 15H2L8 3z"],[6,"M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19"]],mountain:[[6,"m8 3 4 8 5-5 5 15H2L8 3z"]],"mouse-pointer-2":[[6,"m4 4 7.07 17 2.51-7.39L21 11.07z"]],"mouse-pointer-click":[[6,"m9 9 5 12 1.774-5.226L21 14 9 9z"],[6,"m16.071 16.071 4.243 4.243"],[6,"m7.188 2.239.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656-2.12 2.122"]],"mouse-pointer":[[6,"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"],[6,"m13 13 6 6"]],mouse:[[5,6,3,12,18,6],[6,"M12 7v4"]],"move-3d":[[6,"M5 3v16h16"],[6,"m5 19 6-6"],[6,"m2 6 3-3 3 3"],[6,"m18 16 3 3-3 3"]],"move-diagonal-2":[[2,"5 11 5 5 11 5"],[2,"19 13 19 19 13 19"],[0,5,5,19,19]],"move-diagonal":[[2,"13 5 19 5 19 11"],[2,"11 19 5 19 5 13"],[0,19,5,5,19]],"move-horizontal":[[2,"18 8 22 12 18 16"],[2,"6 8 2 12 6 16"],[0,2,12,22,12]],"move-vertical":[[2,"8 18 12 22 16 18"],[2,"8 6 12 2 16 6"],[0,12,2,12,22]],move:[[2,"5 9 2 12 5 15"],[2,"9 5 12 2 15 5"],[2,"15 19 12 22 9 19"],[2,"19 9 22 12 19 15"],[0,2,12,22,12],[0,12,2,12,22]],"music-2":[[1,8,18,4],[6,"M12 18V2l7 4"]],"music-3":[[1,12,18,4],[6,"M16 18V2"]],"music-4":[[6,"M9 18V5l12-2v13"],[6,"m9 9 12-2"],[1,6,18,3],[1,18,16,3]],music:[[6,"M9 18V5l12-2v13"],[1,6,18,3],[1,18,16,3]],"navigation-2off":[[6,"M9.31 9.31 5 21l7-4 7 4-1.17-3.17"],[6,"M14.53 8.88 12 2l-1.17 3.17"],[0,2,2,22,22]],"navigation-2":[[3,"12 2 19 21 12 17 5 21 12 2"]],"navigation-off":[[6,"M8.43 8.43 3 11l8 2 2 8 2.57-5.43"],[6,"M17.39 11.73 22 2l-9.73 4.61"],[0,2,2,22,22]],navigation:[[3,"3 11 22 2 13 21 11 13 3 11"]],network:[[5,9,2,6,6],[5,16,16,6,6],[5,2,16,6,6],[6,"M5 16v-4h14v4"],[6,"M12 12V8"]],newspaper:[[6,"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"],[6,"M18 14h-8"],[6,"M15 18h-5"],[6,"M10 6h8v4h-8V6Z"]],nfc:[[6,"M6 8.32a7.43 7.43 0 0 1 0 7.36"],[6,"M9.46 6.21a11.76 11.76 0 0 1 0 11.58"],[6,"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8"],[6,"M16.37 2a20.16 20.16 0 0 1 0 20"]],"nut-off":[[6,"M12 4V2"],[6,"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592a7.01 7.01 0 0 0 4.125-2.939"],[6,"M19 10v3.343"],[6,"M12 12c-1.349-.573-1.905-1.005-2.5-2-.546.902-1.048 1.353-2.5 2-1.018-.644-1.46-1.08-2-2-1.028.71-1.69.918-3 1 1.081-1.048 1.757-2.03 2-3 .194-.776.84-1.551 1.79-2.21m11.654 5.997c.887-.457 1.28-.891 1.556-1.787 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4-.74 0-1.461.068-2.15.192"],[0,2,2,22,22]],nut:[[6,"M12 4V2"],[6,"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592A7.003 7.003 0 0 0 19 14v-4"],[6,"M12 4C8 4 4.5 6 4 8c-.243.97-.919 1.952-2 3 1.31-.082 1.972-.29 3-1 .54.92.982 1.356 2 2 1.452-.647 1.954-1.098 2.5-2 .595.995 1.151 1.427 2.5 2 1.31-.621 1.862-1.058 2.5-2 .629.977 1.162 1.423 2.5 2 1.209-.548 1.68-.967 2-2 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4Z"]],octagon:[[3,"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"]],option:[[6,"M3 3h6l6 18h6"],[6,"M14 3h7"]],orbit:[[1,12,12,3],[1,18,6,2],[1,6,18,2],[6,"M12 20a8 8 0 0 0 6.82-12.17"],[6,"M12 4a8 8 0 0 0-6.82 12.17"]],outdent:[[2,"7 8 3 12 7 16"],[0,21,12,11,12],[0,21,6,11,6],[0,21,18,11,18]],"package-2":[[6,"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"],[6,"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"],[6,"M12 3v6"]],"package-check":[[6,"m16 16 2 2 4-4"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"M16.5 9.4 7.55 4.24"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-minus":[[6,"M16 16h6"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"M16.5 9.4 7.55 4.24"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-open":[[6,"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z"],[6,"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z"],[0,12,22,12,13],[6,"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5"]],"package-plus":[[6,"M16 16h6"],[6,"M19 13v6"],[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"M16.5 9.4 7.55 4.24"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"package-search":[[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"M16.5 9.4 7.55 4.24"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12],[1,18.5,15.5,2.5],[6,"M20.27 17.27 22 19"]],"package-x":[[6,"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"],[6,"M16.5 9.4 7.55 4.24"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12],[6,"m17 13 5 5m-5 0 5-5"]],package:[[6,"M16.5 9.4 7.55 4.24"],[6,"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[2,"3.29 7 12 12 20.71 7"],[0,12,22,12,12]],"paint-bucket":[[6,"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"],[6,"m5 2 5 5"],[6,"M2 13h15"],[6,"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"]],"paintbrush-2":[[6,"M14 19.9V16h3a2 2 0 0 0 2-2v-2H5v2c0 1.1.9 2 2 2h3v3.9a2 2 0 1 0 4 0Z"],[6,"M6 12V2h12v10"],[6,"M14 2v4"],[6,"M10 2v2"]],paintbrush:[[6,"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"],[6,"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"],[6,"M14.5 17.5 4.5 15"]],palette:[[1,13.5,6.5,.5],[1,17.5,10.5,.5],[1,8.5,7.5,.5],[1,6.5,12.5,.5],[6,"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"]],palmtree:[[6,"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4"],[6,"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3"],[6,"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35z"],[6,"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14"]],paperclip:[[6,"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"]],"parking-circle-off":[[1,12,12,10],[6,"m5 5 14 14"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.34"]],"parking-circle":[[1,12,12,10],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"parking-square-off":[[6,"M3.59 3.59A2 2 0 0 1 5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-.59 1.41"],[6,"M3 8.66V19c0 1.1.9 2 2 2h10.34"],[6,"m2 2 20 20"],[6,"M13 13a3 3 0 1 0 0-6H9v2"],[6,"M9 17v-2.34"]],"parking-square":[[5,3,3,18,18,2],[6,"M9 17V7h4a3 3 0 0 1 0 6H9"]],"party-popper":[[6,"M5.8 11.3 2 22l10.7-3.79"],[6,"M4 3h.01"],[6,"M22 8h.01"],[6,"M15 2h.01"],[6,"M22 20h.01"],[6,"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"],[6,"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17"],[6,"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7"],[6,"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"]],"pause-circle":[[1,12,12,10],[0,10,15,10,9],[0,14,15,14,9]],"pause-octagon":[[6,"M10 15V9"],[6,"M14 15V9"],[6,"M7.714 2h8.572L22 7.714v8.572L16.286 22H7.714L2 16.286V7.714L7.714 2z"]],pause:[[5,6,4,4,16],[5,14,4,4,16]],"pen-tool":[[6,"m12 19 7-7 3 3-7 7-3-3z"],[6,"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"],[6,"m2 2 7.586 7.586"],[1,11,11,2]],pencil:[[0,18,2,22,6],[6,"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z"]],percent:[[0,19,5,5,19],[1,6.5,6.5,2.5],[1,17.5,17.5,2.5]],"person-standing":[[1,12,5,1],[6,"m9 20 3-6 3 6"],[6,"m6 8 6 2 6-2"],[6,"M12 10v4"]],"phone-call":[[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[6,"M14.05 2a9 9 0 0 1 8 7.94"],[6,"M14.05 6A5 5 0 0 1 18 10"]],"phone-forwarded":[[2,"18 2 22 6 18 10"],[0,14,6,22,6],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-incoming":[[2,"16 2 16 8 22 8"],[0,22,2,16,8],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-missed":[[0,22,2,16,8],[0,16,2,22,8],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"phone-off":[[6,"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"],[0,22,2,2,22]],"phone-outgoing":[[2,"22 8 22 2 16 2"],[0,16,8,22,2],[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],phone:[[6,"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"]],"picture-in-picture-2":[[6,"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4"],[5,12,13,10,7,2]],"picture-in-picture":[[6,"M8 4.5v5H3m-1-6 6 6m13 0v-3c0-1.16-.84-2-2-2h-7m-9 9v2c0 1.05.95 2 2 2h3"],[5,12,13.5,10,7,0,2]],"pie-chart":[[6,"M21.21 15.89A10 10 0 1 1 8 2.83"],[6,"M22 12A10 10 0 0 0 12 2v10z"]],"piggy-bank":[[6,"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z"],[6,"M2 9v1c0 1.1.9 2 2 2h1"],[6,"M16 11h0"]],pilcrow:[[6,"M13 4v16"],[6,"M17 4v16"],[6,"M19 4H9.5a4.5 4.5 0 0 0 0 9H13"]],pill:[[6,"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"],[6,"m8.5 8.5 7 7"]],"pin-off":[[0,2,2,22,22],[0,12,17,12,22],[6,"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12"],[6,"M15 9.34V6h1a2 2 0 0 0 0-4H7.89"]],pin:[[0,12,17,12,22],[6,"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"]],pipette:[[6,"m2 22 1-1h3l9-9"],[6,"M3 21v-3l9-9"],[6,"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z"]],pizza:[[6,"M15 11h.01"],[6,"M11 15h.01"],[6,"M16 16h.01"],[6,"m2 16 20 6-6-20A20 20 0 0 0 2 16"],[6,"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4"]],"plane-landing":[[6,"M2 22h20"],[6,"M3.77 10.77 2 9l2-4.5 1.1.55c.55.28.9.84.9 1.45s.35 1.17.9 1.45L8 8.5l3-6 1.05.53a2 2 0 0 1 1.09 1.52l.72 5.4a2 2 0 0 0 1.09 1.52l4.4 2.2c.42.22.78.55 1.01.96l.6 1.03c.49.88-.06 1.98-1.06 2.1l-1.18.15c-.47.06-.95-.02-1.37-.24L4.29 11.15a2 2 0 0 1-.52-.38Z"]],"plane-takeoff":[[6,"M2 22h20"],[6,"M6.36 17.4 4 17l-2-4 1.1-.55a2 2 0 0 1 1.8 0l.17.1a2 2 0 0 0 1.8 0L8 12 5 6l.9-.45a2 2 0 0 1 2.09.2l4.02 3a2 2 0 0 0 2.1.2l4.19-2.06a2.41 2.41 0 0 1 1.73-.17L21 7a1.4 1.4 0 0 1 .87 1.99l-.38.76c-.23.46-.6.84-1.07 1.08L7.58 17.2a2 2 0 0 1-1.22.18Z"]],plane:[[6,"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"]],"play-circle":[[1,12,12,10],[3,"10 8 16 12 10 16 10 8"]],play:[[3,"5 3 19 12 5 21 5 3"]],"plug-2":[[6,"M9 2v6"],[6,"M15 2v6"],[6,"M12 17v5"],[6,"M5 8h14"],[6,"M6 11V8h12v3a6 6 0 1 1-12 0v0Z"]],"plug-zap":[[6,"m13 2-2 2.5h3L12 7"],[6,"M12 22v-3"],[6,"M10 13v-2.5"],[6,"M10 12.5v-2"],[6,"M14 12.5v-2"],[6,"M16 15a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2z"]],plug:[[6,"M12 22v-5"],[6,"M9 7V2"],[6,"M15 7V2"],[6,"M6 13V8h12v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4Z"]],"plus-circle":[[1,12,12,10],[0,12,8,12,16],[0,8,12,16,12]],"plus-square":[[5,3,3,18,18,2,2],[0,12,8,12,16],[0,8,12,16,12]],plus:[[0,12,5,12,19],[0,5,12,19,12]],pocket:[[6,"M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"],[2,"8 10 12 14 16 10"]],podcast:[[1,12,11,1],[6,"M11 17a1 1 0 0 1 2 0c0 .5-.34 3-.5 4.5a.5.5 0 0 1-1 0c-.16-1.5-.5-4-.5-4.5Z"],[6,"M8 14a5 5 0 1 1 8 0"],[6,"M17 18.5a9 9 0 1 0-10 0"]],pointer:[[6,"M22 14a8 8 0 0 1-8 8"],[6,"M18 11v-1a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"],[6,"M14 10V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1"],[6,"M10 9.5V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v10"],[6,"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"]],"pound-sterling":[[6,"M18 7c0-5.333-8-5.333-8 0"],[6,"M10 7v14"],[6,"M6 21h12"],[6,"M6 13h10"]],"power-off":[[6,"M18.36 6.64A9 9 0 0 1 20.77 15"],[6,"M6.16 6.16a9 9 0 1 0 12.68 12.68"],[6,"M12 2v4"],[6,"m2 2 20 20"]],power:[[6,"M18.36 6.64a9 9 0 1 1-12.73 0"],[0,12,2,12,12]],printer:[[2,"6 9 6 2 18 2 18 9"],[6,"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"],[5,6,14,12,8]],puzzle:[[6,"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z"]],"qr-code":[[5,3,3,5,5,1],[5,16,3,5,5,1],[5,3,16,5,5,1],[6,"M21 16h-3a2 2 0 0 0-2 2v3"],[6,"M21 21v.01"],[6,"M12 7v3a2 2 0 0 1-2 2H7"],[6,"M3 12h.01"],[6,"M12 3h.01"],[6,"M12 16v.01"],[6,"M16 12h1"],[6,"M21 12v.01"],[6,"M12 21v-1"]],quote:[[6,"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"],[6,"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"]],"radio-receiver":[[6,"M5 16v2"],[6,"M19 16v2"],[5,2,8,20,8,2],[6,"M18 12h0"]],"radio-tower":[[6,"M4.9 16.1C1 12.2 1 5.8 4.9 1.9"],[6,"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5"],[1,12,9,2],[6,"M16.2 4.8c2 2 2.26 5.11.8 7.47"],[6,"M19.1 1.9a9.96 9.96 0 0 1 0 14.1"],[6,"M9.5 18h5"],[6,"m8 22 4-11 4 11"]],radio:[[6,"M4.9 19.1C1 15.2 1 8.8 4.9 4.9"],[6,"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"],[1,12,12,2],[6,"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"],[6,"M19.1 4.9C23 8.8 23 15.1 19.1 19"]],rat:[[6,"M14 16.5v-.77a2.73 2.73 0 0 1 3.27-2.68l3.02.6a1.4 1.4 0 0 0 1.5-2.08l-1.63-2.8a3 3 0 1 0-3.35-4.82"],[6,"M16 9h-.01"],[6,"M17 5.12V5a3 3 0 1 0-5.24 2h-1A6.77 6.77 0 0 0 4 13.77C4 16.1 5.9 18 8.23 18H9"],[6,"M13 22H4a2 2 0 1 1 0-4h12"],[6,"M13.67 18c.21-.44.33-.94.33-1.45A3.65 3.65 0 0 0 10.26 13"]],receipt:[[6,"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z"],[6,"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],[6,"M12 17V7"]],"rectangle-horizontal":[[5,2,6,20,12,2]],"rectangle-vertical":[[5,6,2,12,20,2]],recycle:[[6,"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5"],[6,"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12"],[6,"m14 16-3 3 3 3"],[6,"M8.293 13.596 7.196 9.5 3.1 10.598"],[6,"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843"],[6,"m13.378 9.633 4.096 1.098 1.097-4.096"]],"redo-2":[[6,"m15 14 5-5-5-5"],[6,"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13"]],redo:[[6,"M21 7v6h-6"],[6,"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"]],"refresh-ccw":[[6,"M3 2v6h6"],[6,"M21 12A9 9 0 0 0 6 5.3L3 8"],[6,"M21 22v-6h-6"],[6,"M3 12a9 9 0 0 0 15 6.7l3-2.7"]],"refresh-cw":[[6,"M21 2v6h-6"],[6,"M3 12a9 9 0 0 1 15-6.7L21 8"],[6,"M3 22v-6h6"],[6,"M21 12a9 9 0 0 1-15 6.7L3 16"]],refrigerator:[[6,"M5 6a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6Z"],[6,"M5 10h14"],[6,"M15 7v6"]],regex:[[6,"M17 3v10"],[6,"m12.67 5.5 8.66 5"],[6,"m12.67 10.5 8.66-5"],[6,"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z"]],"remove-formatting":[[6,"M4 7V4h16v3"],[6,"M5 20h6"],[6,"M13 4 8 20"],[6,"m15 15 5 5"],[6,"m20 15-5 5"]],"repeat-1":[[6,"m17 2 4 4-4 4"],[6,"M3 11v-1a4 4 0 0 1 4-4h14"],[6,"m7 22-4-4 4-4"],[6,"M21 13v1a4 4 0 0 1-4 4H3"],[6,"M11 10h1v4"]],repeat:[[6,"m17 2 4 4-4 4"],[6,"M3 11v-1a4 4 0 0 1 4-4h14"],[6,"m7 22-4-4 4-4"],[6,"M21 13v1a4 4 0 0 1-4 4H3"]],"replace-all":[[5,2,14,8,8,2],[6,"m3 7 3 3 3-3"],[6,"M6 10V5a2.95 2.95 0 0 1 3-3h1"],[6,"M22 8a2 2 0 0 1-2 2"],[6,"M20 2a2 2 0 0 1 2 2"],[6,"M14 4a2 2 0 0 1 2-2"],[6,"M16 10a2 2 0 0 1-2-2"],[6,"M14 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"],[6,"M20 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"]],replace:[[5,2,14,8,8,2],[6,"m3 7 3 3 3-3"],[6,"M6 10V5a2.95 2.95 0 0 1 3-3h1"],[6,"M22 8a2 2 0 0 1-2 2"],[6,"M20 2a2 2 0 0 1 2 2"],[6,"M14 4a2 2 0 0 1 2-2"],[6,"M16 10a2 2 0 0 1-2-2"]],"reply-all":[[2,"7 17 2 12 7 7"],[2,"12 17 7 12 12 7"],[6,"M22 18v-2a4 4 0 0 0-4-4H7"]],reply:[[2,"9 17 4 12 9 7"],[6,"M20 18v-2a4 4 0 0 0-4-4H4"]],rewind:[[3,"11 19 2 12 11 5 11 19"],[3,"22 19 13 12 22 5 22 19"]],rocket:[[6,"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"],[6,"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"],[6,"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"],[6,"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"]],"rocking-chair":[[2,"3.5 2 6.5 12.5 18 12.5"],[0,9.5,12.5,5.5,20],[0,15,12.5,18.5,20],[6,"M2.75 18a13 13 0 0 0 18.5 0"]],"rotate-3d":[[6,"M16.466 7.5C15.643 4.237 13.952 2 12 2 9.239 2 7 6.477 7 12s2.239 10 5 10c.342 0 .677-.069 1-.2"],[6,"m15.194 13.707 3.814 1.86-1.86 3.814"],[6,"M19 15.57c-1.804.885-4.274 1.43-7 1.43-5.523 0-10-2.239-10-5s4.477-5 10-5c4.838 0 8.873 1.718 9.8 4"]],"rotate-ccw":[[6,"M3 2v6h6"],[6,"M3 13a9 9 0 1 0 3-7.7L3 8"]],"rotate-cw":[[6,"M21 2v6h-6"],[6,"M21 13a9 9 0 1 1-3-7.7L21 8"]],router:[[5,2,14,20,8,2],[6,"M6.01 18H6"],[6,"M10.01 18H10"],[6,"M15 10v4"],[6,"M17.84 7.17a4 4 0 0 0-5.66 0"],[6,"M20.66 4.34a8 8 0 0 0-11.31 0"]],rss:[[6,"M4 11a9 9 0 0 1 9 9"],[6,"M4 4a16 16 0 0 1 16 16"],[1,5,19,1]],ruler:[[6,"M21.3 8.7 8.7 21.3c-1 1-2.5 1-3.4 0l-2.6-2.6c-1-1-1-2.5 0-3.4L15.3 2.7c1-1 2.5-1 3.4 0l2.6 2.6c1 1 1 2.5 0 3.4Z"],[6,"m7.5 10.5 2 2"],[6,"m10.5 7.5 2 2"],[6,"m13.5 4.5 2 2"],[6,"m4.5 13.5 2 2"]],"russian-ruble":[[6,"M14 11c5.333 0 5.333-8 0-8"],[6,"M6 11h8"],[6,"M6 15h8"],[6,"M9 21V3"],[6,"M9 3h5"]],sailboat:[[6,"M22 18H2a4 4 0 0 0 4 4h12a4 4 0 0 0 4-4Z"],[6,"M21 14 10 2 3 14h18Z"],[6,"M10 2v16"]],salad:[[6,"M7 21h10"],[6,"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z"],[6,"M11.38 12a2.4 2.4 0 0 1-.4-4.77 2.4 2.4 0 0 1 3.2-2.77 2.4 2.4 0 0 1 3.47-.63 2.4 2.4 0 0 1 3.37 3.37 2.4 2.4 0 0 1-1.1 3.7 2.51 2.51 0 0 1 .03 1.1"],[6,"m13 12 4-4"],[6,"M10.9 7.25A3.99 3.99 0 0 0 4 10c0 .73.2 1.41.54 2"]],sandwich:[[6,"M3 11v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-3"],[6,"M12 19H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-3.83"],[6,"m3 11 7.77-6.04a2 2 0 0 1 2.46 0L21 11H3Z"],[6,"M12.97 19.77 7 15h12.5l-3.75 4.5a2 2 0 0 1-2.78.27Z"]],save:[[6,"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],[2,"17 21 17 13 7 13 7 21"],[2,"7 3 7 8 15 8"]],"scale-3d":[[6,"M5 7v12h12"],[6,"m5 19 6-6"],[5,3,3,4,4,1],[5,17,17,4,4,1]],scale:[[6,"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"],[6,"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"],[6,"M7 21h10"],[6,"M12 3v18"],[6,"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"]],scaling:[[6,"M21 3 9 15"],[6,"M12 3H3v18h18v-9"],[6,"M16 3h5v5"],[6,"M14 15H9v-5"]],"scan-face":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[6,"M9 9h.01"],[6,"M15 9h.01"]],"scan-line":[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"],[0,7,12,17,12]],scan:[[6,"M3 7V5a2 2 0 0 1 2-2h2"],[6,"M17 3h2a2 2 0 0 1 2 2v2"],[6,"M21 17v2a2 2 0 0 1-2 2h-2"],[6,"M7 21H5a2 2 0 0 1-2-2v-2"]],"school-2":[[1,12,10,1],[6,"M22 20V8h-4l-6-4-6 4H2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z"],[6,"M6 17v.01"],[6,"M6 13v.01"],[6,"M18 17v.01"],[6,"M18 13v.01"],[6,"M14 22v-5a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5"]],school:[[6,"m4 6 8-4 8 4"],[6,"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"],[6,"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"],[6,"M18 5v17"],[6,"M6 5v17"],[1,12,9,2]],scissors:[[1,6,6,3],[1,6,18,3],[0,20,4,8.12,15.88],[0,14.47,14.48,20,20],[0,8.12,8.12,12,12]],"screen-share-off":[[6,"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m22 3-5 5"],[6,"m17 3 5 5"]],"screen-share":[[6,"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3"],[6,"M8 21h8"],[6,"M12 17v4"],[6,"m17 8 5-5"],[6,"M17 3h5v5"]],scroll:[[6,"M10 17v2a2 2 0 0 1-2 2v0a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v3h3"],[6,"M22 17v2a2 2 0 0 1-2 2H8"],[6,"M19 17V5a2 2 0 0 0-2-2H4"],[6,"M22 17H10"]],search:[[1,11,11,8],[0,21,21,16.65,16.65]],send:[[0,22,2,11,13],[3,"22 2 15 22 11 13 2 9 22 2"]],"separator-horizontal":[[0,3,12,21,12],[2,"8 8 12 4 16 8"],[2,"16 16 12 20 8 16"]],"separator-vertical":[[0,12,3,12,21],[2,"8 8 4 12 8 16"],[2,"16 16 20 12 16 8"]],"server-cog":[[6,"M5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-1"],[6,"M5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-1"],[6,"M6 6h.01"],[6,"M6 18h.01"],[1,12,12,3],[6,"M12 8v1"],[6,"M12 15v1"],[6,"M16 12h-1"],[6,"M9 12H8"],[6,"m15 9-.88.88"],[6,"M9.88 14.12 9 15"],[6,"m15 15-.88-.88"],[6,"M9.88 9.88 9 9"]],"server-crash":[[6,"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2"],[6,"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2"],[6,"M6 6h.01"],[6,"M6 18h.01"],[6,"m13 6-4 6h6l-4 6"]],"server-off":[[6,"M7 2h13a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-5"],[6,"M10 10 2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 0 0 2 2h6z"],[6,"M22 17v-1a2 2 0 0 0-2-2h-1"],[6,"M4 14a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16.5l1-.5.5.5-8-8H4z"],[6,"M6 18h.01"],[6,"m2 2 20 20"]],server:[[5,2,2,20,8,2,2],[5,2,14,20,8,2,2],[0,6,6,6.01,6],[0,6,18,6.01,18]],"settings-2":[[6,"M20 7h-9"],[6,"M14 17H5"],[1,17,17,3],[1,7,7,3]],settings:[[6,"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],[1,12,12,3]],"share-2":[[1,18,5,3],[1,6,12,3],[1,18,19,3],[0,8.59,13.51,15.42,17.49],[0,15.41,6.51,8.59,10.49]],share:[[6,"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"],[2,"16 6 12 2 8 6"],[0,12,2,12,15]],sheet:[[5,3,3,18,18,2,2],[0,3,9,21,9],[0,3,15,21,15],[0,9,9,9,21],[0,15,9,15,21]],"shield-alert":[[6,"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[6,"M12 8v4"],[6,"M12 16h.01"]],"shield-check":[[6,"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[6,"m9 12 2 2 4-4"]],"shield-close":[[6,"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[0,9.5,9,14.5,14],[0,14.5,9,9.5,14]],"shield-off":[[6,"M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"],[6,"M4.73 4.73 4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"],[0,2,2,22,22]],"shield-question":[[6,"M12 17h.01"],[6,"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"],[6,"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3"]],shield:[[6,"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"]],ship:[[6,"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76"],[6,"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6"],[6,"M12 10v4"],[6,"M12 2v3"]],shirt:[[6,"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"]],"shopping-bag":[[6,"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"],[0,3,6,21,6],[6,"M16 10a4 4 0 0 1-8 0"]],"shopping-cart":[[1,8,21,1],[1,19,21,1],[6,"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"]],shovel:[[6,"M2 22v-5l5-5 5 5-5 5z"],[6,"M9.5 14.5 16 8"],[6,"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2"]],"shower-head":[[6,"m4 4 2.5 2.5"],[6,"M13.5 6.5a4.95 4.95 0 0 0-7 7"],[6,"M15 5 5 15"],[6,"M14 17v.01"],[6,"M10 16v.01"],[6,"M13 13v.01"],[6,"M16 10v.01"],[6,"M11 20v.01"],[6,"M17 14v.01"],[6,"M20 11v.01"]],shrink:[[6,"m15 15 6 6m-6-6v4.8m0-4.8h4.8"],[6,"M9 19.8V15m0 0H4.2M9 15l-6 6"],[6,"M15 4.2V9m0 0h4.8M15 9l6-6"],[6,"M9 4.2V9m0 0H4.2M9 9 3 3"]],shrub:[[6,"M12 22v-7l-2-2"],[6,"M17 8v.8A6 6 0 0 1 13.8 20v0H10v0A6.5 6.5 0 0 1 7 8h0a5 5 0 0 1 10 0Z"],[6,"m14 14-2 2"]],shuffle:[[2,"16 3 21 3 21 8"],[0,4,20,21,3],[2,"21 16 21 21 16 21"],[0,15,15,21,21],[0,4,4,9,9]],"sidebar-close":[[5,3,3,18,18,2,2],[6,"M9 3v18"],[6,"m16 15-3-3 3-3"]],"sidebar-open":[[5,3,3,18,18,2,2],[6,"M9 3v18"],[6,"m14 9 3 3-3 3"]],sidebar:[[5,3,3,18,18,2,2],[0,9,3,9,21]],sigma:[[6,"M18 7V4H6l6 8-6 8h12v-3"]],"signal-high":[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"],[6,"M17 20V8"]],"signal-low":[[6,"M2 20h.01"],[6,"M7 20v-4"]],"signal-medium":[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"]],"signal-zero":[[6,"M2 20h.01"]],signal:[[6,"M2 20h.01"],[6,"M7 20v-4"],[6,"M12 20v-8"],[6,"M17 20V8"],[6,"M22 4v16"]],siren:[[6,"M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z"],[6,"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z"],[6,"M21 12h1"],[6,"M18.5 4.5 18 5"],[6,"M2 12h1"],[6,"M12 2v1"],[6,"m4.929 4.929.707.707"],[6,"M12 12v6"]],"skip-back":[[3,"19 20 9 12 19 4 19 20"],[0,5,19,5,5]],"skip-forward":[[3,"5 4 15 12 5 20 5 4"],[0,19,5,19,19]],skull:[[1,9,12,1],[1,15,12,1],[6,"M8 20v2h8v-2"],[6,"m12.5 17-.5-1-.5 1h1z"],[6,"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20"]],slack:[[5,13,2,3,8,1.5],[6,"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5"],[5,8,14,3,8,1.5],[6,"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5"],[5,14,13,8,3,1.5],[6,"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5"],[5,2,8,8,3,1.5],[6,"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5"]],slice:[[6,"m8 14-6 6h9v-3"],[6,"M18.37 3.63 8 14l3 3L21.37 6.63a2.12 2.12 0 1 0-3-3Z"]],"sliders-horizontal":[[0,21,4,14,4],[0,10,4,3,4],[0,21,12,12,12],[0,8,12,3,12],[0,21,20,16,20],[0,12,20,3,20],[0,14,2,14,6],[0,8,10,8,14],[0,16,18,16,22]],sliders:[[0,4,21,4,14],[0,4,10,4,3],[0,12,21,12,12],[0,12,8,12,3],[0,20,21,20,16],[0,20,12,20,3],[0,2,14,6,14],[0,10,8,14,8],[0,18,16,22,16]],"smartphone-charging":[[5,5,2,14,20,2,2],[6,"M12.667 8 10 12h4l-2.667 4"]],"smartphone-nfc":[[5,2,6,7,12,1],[6,"M13 8.32a7.43 7.43 0 0 1 0 7.36"],[6,"M16.46 6.21a11.76 11.76 0 0 1 0 11.58"],[6,"M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"]],smartphone:[[5,5,2,14,20,2,2],[6,"M12 18h.01"]],"smile-plus":[[6,"M22 11v1a10 10 0 1 1-9-10"],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[0,9,9,9.01,9],[0,15,9,15.01,9],[6,"M16 5h6"],[6,"M19 2v6"]],smile:[[1,12,12,10],[6,"M8 14s1.5 2 4 2 4-2 4-2"],[0,9,9,9.01,9],[0,15,9,15.01,9]],snowflake:[[0,2,12,22,12],[0,12,2,12,22],[6,"m20 16-4-4 4-4"],[6,"m4 8 4 4-4 4"],[6,"m16 4-4 4-4-4"],[6,"m8 20 4-4 4 4"]],sofa:[[6,"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"],[6,"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z"],[6,"M4 18v2"],[6,"M20 18v2"],[6,"M12 4v9"]],"sort-asc":[[6,"M11 11h4"],[6,"M11 15h7"],[6,"M11 19h10"],[6,"M9 7 6 4 3 7"],[6,"M6 6v14"]],"sort-desc":[[6,"M11 5h10"],[6,"M11 9h7"],[6,"M11 13h4"],[6,"m3 17 3 3 3-3"],[6,"M6 18V4"]],soup:[[6,"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z"],[6,"M7 21h10"],[6,"M19.5 12 22 6"],[6,"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62"],[6,"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62"],[6,"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62"]],space:[[2,"22,17 22,19 2,19 2,17"]],speaker:[[5,4,2,16,20,2,2],[1,12,14,4],[0,12,6,12.01,6]],spline:[[6,"M21 6V4c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h2c.6 0 1-.4 1-1Z"],[6,"M7 20v-2c0-.6-.4-1-1-1H4a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h2c.6 0 1-.4 1-1Z"],[6,"M5 17A12 12 0 0 1 17 5"]],"split-square-horizontal":[[6,"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3"],[6,"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3"],[0,12,4,12,20]],"split-square-vertical":[[6,"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3"],[6,"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3"],[0,4,12,20,12]],sprout:[[6,"M7 20h10"],[6,"M10 20c5.5-2.5.8-6.4 3-10"],[6,"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"],[6,"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"]],square:[[5,3,3,18,18,2,2]],stamp:[[6,"M5 22h14"],[6,"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z"],[6,"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13"]],"star-half":[[6,"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2"]],"star-off":[[6,"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43"],[6,"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91"],[0,2,2,22,22]],star:[[3,"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"]],"step-back":[[0,18,20,18,4],[3,"14,20 4,12 14,4"]],"step-forward":[[0,6,4,6,20],[3,"10,4 20,12 10,20"]],stethoscope:[[6,"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"],[6,"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"],[1,20,10,2]],sticker:[[6,"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z"],[6,"M15 3v6h6"],[6,"M10 16s.8 1 2 1c1.3 0 2-1 2-1"],[6,"M8 13h0"],[6,"M16 13h0"]],"sticky-note":[[6,"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z"],[6,"M15 3v6h6"]],"stop-circle":[[1,12,12,10],[5,9,9,6,6]],store:[[6,"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"],[6,"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"],[6,"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"],[6,"M2 7h20"],[6,"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"]],"stretch-horizontal":[[5,2,4,20,6,2],[5,2,14,20,6,2]],"stretch-vertical":[[5,4,2,6,20,2],[5,14,2,6,20,2]],strikethrough:[[6,"M16 4H9a3 3 0 0 0-2.83 4"],[6,"M14 12a4 4 0 0 1 0 8H6"],[0,4,12,20,12]],subscript:[[6,"m4 5 8 8"],[6,"m12 5-8 8"],[6,"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07"]],subtitles:[[6,"M7 13h4"],[6,"M15 13h2"],[6,"M7 9h2"],[6,"M13 9h4"],[6,"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10Z"]],"sun-dim":[[6,"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"],[6,"M12 4h.01"],[6,"M20 12h.01"],[6,"M12 20h.01"],[6,"M4 12h.01"],[6,"M17.657 6.343h.01"],[6,"M17.657 17.657h.01"],[6,"M6.343 17.657h.01"],[6,"M6.343 6.343h.01"]],"sun-medium":[[6,"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"],[6,"M12 3v1"],[6,"M12 20v1"],[6,"M3 12h1"],[6,"M20 12h1"],[6,"m18.364 5.636-.707.707"],[6,"m6.343 17.657-.707.707"],[6,"m5.636 5.636.707.707"],[6,"m17.657 17.657.707.707"]],"sun-moon":[[6,"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"],[6,"M12 8a2.828 2.828 0 1 0 4 4"],[6,"M12 2v2"],[6,"M12 20v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"m17.66 17.66 1.41 1.41"],[6,"M2 12h2"],[6,"M20 12h2"],[6,"m6.34 17.66-1.41 1.41"],[6,"m19.07 4.93-1.41 1.41"]],"sun-snow":[[6,"M10 9a3 3 0 1 0 0 6"],[6,"M2 12h1"],[6,"M14 21V3"],[6,"M10 4V3"],[6,"M10 21v-1"],[6,"m3.64 18.36.7-.7"],[6,"m4.34 6.34-.7-.7"],[6,"M14 12h8"],[6,"m17 4-3 3"],[6,"m14 17 3 3"],[6,"m21 15-3-3 3-3"]],sun:[[1,12,12,4],[6,"M12 2v2"],[6,"M12 20v2"],[6,"m4.93 4.93 1.41 1.41"],[6,"m17.66 17.66 1.41 1.41"],[6,"M2 12h2"],[6,"M20 12h2"],[6,"m6.34 17.66-1.41 1.41"],[6,"m19.07 4.93-1.41 1.41"]],sunrise:[[6,"M12 2v8"],[6,"m4.93 10.93 1.41 1.41"],[6,"M2 18h2"],[6,"M20 18h2"],[6,"m19.07 10.93-1.41 1.41"],[6,"M22 22H2"],[6,"m8 6 4-4 4 4"],[6,"M16 18a4 4 0 0 0-8 0"]],sunset:[[6,"M12 10V2"],[6,"m4.93 10.93 1.41 1.41"],[6,"M2 18h2"],[6,"M20 18h2"],[6,"m19.07 10.93-1.41 1.41"],[6,"M22 22H2"],[6,"m16 6-4 4-4-4"],[6,"M16 18a4 4 0 0 0-8 0"]],superscript:[[6,"m4 19 8-8"],[6,"m12 19-8-8"],[6,"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06"]],"swiss-franc":[[6,"M10 21V3h8"],[6,"M6 16h9"],[6,"M10 9.5h7"]],"switch-camera":[[6,"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5"],[6,"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"],[1,12,12,3],[6,"m18 22-3-3 3-3"],[6,"m6 2 3 3-3 3"]],sword:[[2,"14.5 17.5 3 6 3 3 6 3 17.5 14.5"],[0,13,19,19,13],[0,16,16,20,20],[0,19,21,21,19]],swords:[[2,"14.5 17.5 3 6 3 3 6 3 17.5 14.5"],[0,13,19,19,13],[0,16,16,20,20],[0,19,21,21,19],[2,"14.5 6.5 18 3 21 3 21 6 17.5 9.5"],[0,5,14,9,18],[0,7,17,4,20],[0,3,19,5,21]],syringe:[[6,"m18 2 4 4"],[6,"m17 7 3-3"],[6,"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5"],[6,"m9 11 4 4"],[6,"m5 19-3 3"],[6,"m14 4 6 6"]],"table-2":[[6,"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"]],table:[[5,3,3,18,18,2,2],[0,3,9,21,9],[0,3,15,21,15],[0,12,3,12,21]],tablet:[[5,4,2,16,20,2,2],[0,12,18,12.01,18]],tablets:[[1,7,7,5],[1,17,17,5],[6,"M12 17h10"],[6,"m3.46 10.54 7.08-7.08"]],tag:[[6,"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],[6,"M7 7h.01"]],tags:[[6,"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],[6,"M6 9.01V9"],[6,"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"]],target:[[1,12,12,10],[1,12,12,6],[1,12,12,2]],tent:[[6,"M19 20 10 4"],[6,"m5 20 9-16"],[6,"M3 20h18"],[6,"m12 15-3 5"],[6,"m12 15 3 5"]],"terminal-square":[[6,"m7 11 2-2-2-2"],[6,"M11 13h4"],[5,3,3,18,18,2,2]],terminal:[[2,"4 17 10 11 4 5"],[0,12,19,20,19]],"test-tube-2":[[6,"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01v0a2.83 2.83 0 0 1 0-4L17 3"],[6,"m16 2 6 6"],[6,"M12 16H4"]],"test-tube":[[6,"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2"],[6,"M8.5 2h7"],[6,"M14.5 16h-5"]],"test-tubes":[[6,"M9 2v17.5A2.5 2.5 0 0 1 6.5 22v0A2.5 2.5 0 0 1 4 19.5V2"],[6,"M20 2v17.5a2.5 2.5 0 0 1-2.5 2.5v0a2.5 2.5 0 0 1-2.5-2.5V2"],[6,"M3 2h7"],[6,"M14 2h7"],[6,"M9 16H4"],[6,"M20 16h-5"]],"text-cursor-input":[[6,"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"],[6,"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"],[6,"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"],[6,"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"],[6,"M9 7v10"]],"text-cursor":[[6,"M17 22h-1a4 4 0 0 1-4-4V6a4 4 0 0 1 4-4h1"],[6,"M7 22h1a4 4 0 0 0 4-4v-1"],[6,"M7 2h1a4 4 0 0 1 4 4v1"]],"text-selection":[[6,"M5 3a2 2 0 0 0-2 2"],[6,"M19 3a2 2 0 0 1 2 2"],[6,"M21 19a2 2 0 0 1-2 2"],[6,"M5 21a2 2 0 0 1-2-2"],[6,"M9 3h1"],[6,"M9 21h1"],[6,"M14 3h1"],[6,"M14 21h1"],[6,"M3 9v1"],[6,"M21 9v1"],[6,"M3 14v1"],[6,"M21 14v1"],[0,7,8,15,8],[0,7,12,17,12],[0,7,16,13,16]],text:[[6,"M17 6.1H3"],[6,"M21 12.1H3"],[6,"M15.1 18H3"]],"thermometer-snowflake":[[6,"M2 12h10"],[6,"M9 4v16"],[6,"m3 9 3 3-3 3"],[6,"M12 6 9 9 6 6"],[6,"m6 18 3-3 1.5 1.5"],[6,"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"]],"thermometer-sun":[[6,"M12 9a4 4 0 0 0-2 7.5"],[6,"M12 3v2"],[6,"m6.6 18.4-1.4 1.4"],[6,"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"],[6,"M4 13H2"],[6,"M6.34 7.34 4.93 5.93"]],thermometer:[[6,"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"]],"thumbs-down":[[6,"M17 14V2"],[6,"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z"]],"thumbs-up":[[6,"M7 10v12"],[6,"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"]],ticket:[[6,"M3 7v2a3 3 0 1 1 0 6v2c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2Z"],[6,"M13 5v2"],[6,"M13 17v2"],[6,"M13 11v2"]],"timer-off":[[6,"M10 2h4"],[6,"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7"],[6,"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2"],[6,"m2 2 20 20"],[6,"M12 12v-2"]],"timer-reset":[[6,"M10 2h4"],[6,"M12 14v-4"],[6,"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],[6,"M9 17H4v5"]],timer:[[0,10,2,14,2],[0,12,14,15,11],[1,12,14,8]],"toggle-left":[[5,2,6,20,12,6,6],[1,8,12,2]],"toggle-right":[[5,2,6,20,12,6,6],[1,16,12,2]],tornado:[[6,"M21 4H3"],[6,"M18 8H6"],[6,"M19 12H9"],[6,"M16 16h-6"],[6,"M11 20H9"]],"tower-control":[[6,"M18.2 12.27 20 6H4l1.8 6.27a1 1 0 0 0 .95.73h10.5a1 1 0 0 0 .96-.73Z"],[6,"M8 13v9"],[6,"M16 22v-9"],[6,"m9 6 1 7"],[6,"m15 6-1 7"],[6,"M12 6V2"],[6,"M13 2h-2"]],"toy-brick":[[5,3,8,18,12,1],[6,"M10 8V5c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v3"],[6,"M19 8V5c0-.6-.4-1-1-1h-3a1 1 0 0 0-1 1v3"]],train:[[5,4,3,16,16,2],[6,"M4 11h16"],[6,"M12 3v8"],[6,"m8 19-2 3"],[6,"m18 22-2-3"],[6,"M8 15h0"],[6,"M16 15h0"]],"trash-2":[[6,"M3 6h18"],[6,"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],[6,"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],[0,10,11,10,17],[0,14,11,14,17]],trash:[[6,"M3 6h18"],[6,"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],[6,"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"]],"tree-deciduous":[[6,"M8 19h8a4 4 0 0 0 3.8-2.8 4 4 0 0 0-1.6-4.5c1-1.1 1-2.7.4-4-.7-1.2-2.2-2-3.6-1.7a3 3 0 0 0-3-3 3 3 0 0 0-3 3c-1.4-.2-2.9.5-3.6 1.7-.7 1.3-.5 2.9.4 4a4 4 0 0 0-1.6 4.5A4 4 0 0 0 8 19Z"],[6,"M12 19v3"]],"tree-pine":[[6,"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"],[6,"M12 22v-3"]],trees:[[6,"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z"],[6,"M7 16v6"],[6,"M13 19v3"],[6,"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5"]],trello:[[5,3,3,18,18,2,2],[5,7,7,3,9],[5,14,7,3,5]],"trending-down":[[2,"22 17 13.5 8.5 8.5 13.5 2 7"],[2,"16 17 22 17 22 11"]],"trending-up":[[2,"22 7 13.5 15.5 8.5 10.5 2 17"],[2,"16 7 22 7 22 13"]],triangle:[[6,"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"]],trophy:[[6,"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"],[6,"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"],[6,"M4 22h16"],[6,"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"],[6,"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"],[6,"M18 2H6v7a6 6 0 0 0 12 0V2Z"]],truck:[[6,"M10 17h4V5H2v12h3"],[6,"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5"],[6,"M14 17h1"],[1,7.5,17.5,2.5],[1,17.5,17.5,2.5]],"tv-2":[[6,"M7 21h10"],[5,2,3,20,14,2]],tv:[[5,2,7,20,15,2,2],[2,"17 2 12 7 7 2"]],twitch:[[6,"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"]],twitter:[[6,"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"]],type:[[2,"4 7 4 4 20 4 20 7"],[0,9,20,15,20],[0,12,4,12,20]],umbrella:[[6,"M22 12a9.92 9.92 0 0 0-3.24-6.41 10.12 10.12 0 0 0-13.52 0A9.92 9.92 0 0 0 2 12Z"],[6,"M12 12v8a2 2 0 0 0 4 0"],[0,12,2,12,3]],underline:[[6,"M6 4v6a6 6 0 0 0 12 0V4"],[0,4,20,20,20]],"undo-2":[[6,"M9 14 4 9l5-5"],[6,"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"]],undo:[[6,"M3 7v6h6"],[6,"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"]],"unlink-2":[[6,"M15 7h2a5 5 0 0 1 0 10h-2m-6 0H7A5 5 0 0 1 7 7h2"]],unlink:[[6,"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71"],[6,"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71"],[0,8,2,8,5],[0,2,8,5,8],[0,16,19,16,22],[0,19,16,22,16]],unlock:[[5,3,11,18,11,2,2],[6,"M7 11V7a5 5 0 0 1 9.9-1"]],"upload-cloud":[[6,"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],[6,"M12 12v9"],[6,"m16 16-4-4-4 4"]],upload:[[6,"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],[2,"17 8 12 3 7 8"],[0,12,3,12,15]],usb:[[1,10,7,1],[1,4,20,1],[6,"M4.7 19.3 19 5"],[6,"m21 3-3 1 2 2Z"],[6,"M9.26 7.68 5 12l2 5"],[6,"m10 14 5 2 3.5-3.5"],[6,"m18 12 1-1 1 1-1 1Z"]],"user-check":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[2,"16 11 18 13 22 9"]],"user-cog":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[1,19,11,2],[6,"M19 8v1"],[6,"M19 13v1"],[6,"m21.6 9.5-.87.5"],[6,"m17.27 12-.87.5"],[6,"m21.6 12.5-.87-.5"],[6,"m17.27 10-.87-.5"]],"user-minus":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,22,11,16,11]],"user-plus":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,19,8,19,14],[0,22,11,16,11]],"user-x":[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[0,17,8,22,13],[0,22,8,17,13]],user:[[6,"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],[1,12,7,4]],users:[[6,"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],[1,9,7,4],[6,"M22 21v-2a4 4 0 0 0-3-3.87"],[6,"M16 3.13a4 4 0 0 1 0 7.75"]],"utensils-crossed":[[6,"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"],[6,"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7"],[6,"m2.1 21.8 6.4-6.3"],[6,"m19 5-7 7"]],utensils:[[6,"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"],[6,"M7 2v20"],[6,"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"]],"utility-pole":[[6,"M12 2v20"],[6,"M2 5h20"],[6,"M3 3v2"],[6,"M7 3v2"],[6,"M17 3v2"],[6,"M21 3v2"],[6,"m19 5-7 7-7-7"]],vegan:[[6,"M2 2a26.6 26.6 0 0 1 10 20c.9-6.82 1.5-9.5 4-14"],[6,"M16 8c4 0 6-2 6-6-4 0-6 2-6 6"],[6,"M17.41 3.6a10 10 0 1 0 3 3"]],"venetian-mask":[[6,"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z"],[6,"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z"],[6,"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z"]],verified:[[6,"M12 3c-1.2 0-2.4.6-3 1.7A3.6 3.6 0 0 0 4.6 9c-1 .6-1.7 1.8-1.7 3s.7 2.4 1.7 3c-.3 1.2 0 2.5 1 3.4.8.8 2.1 1.2 3.3 1 .6 1 1.8 1.6 3 1.6s2.4-.6 3-1.7c1.2.3 2.5 0 3.4-1 .8-.8 1.2-2 1-3.3 1-.6 1.6-1.8 1.6-3s-.6-2.4-1.7-3c.3-1.2 0-2.5-1-3.4a3.7 3.7 0 0 0-3.3-1c-.6-1-1.8-1.6-3-1.6Z"],[6,"m9 12 2 2 4-4"]],"vibrate-off":[[6,"m2 8 2 2-2 2 2 2-2 2"],[6,"m22 8-2 2 2 2-2 2 2 2"],[6,"M8 8v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2"],[6,"M16 10.34V6c0-.55-.45-1-1-1h-4.34"],[0,2,2,22,22]],vibrate:[[6,"m2 8 2 2-2 2 2 2-2 2"],[6,"m22 8-2 2 2 2-2 2 2 2"],[5,8,5,8,14,1]],"video-off":[[6,"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8"],[6,"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z"],[0,2,2,22,22]],video:[[6,"m22 8-6 4 6 4V8Z"],[5,2,6,14,12,2,2]],view:[[6,"M5 12s2.545-5 7-5c4.454 0 7 5 7 5s-2.546 5-7 5c-4.455 0-7-5-7-5z"],[6,"M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"],[6,"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2"],[6,"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2"]],voicemail:[[1,6,12,4],[1,18,12,4],[0,6,16,18,16]],"volume-1":[[3,"11 5 6 9 2 9 2 15 6 15 11 19 11 5"],[6,"M15.54 8.46a5 5 0 0 1 0 7.07"]],"volume-2":[[3,"11 5 6 9 2 9 2 15 6 15 11 19 11 5"],[6,"M15.54 8.46a5 5 0 0 1 0 7.07"],[6,"M19.07 4.93a10 10 0 0 1 0 14.14"]],"volume-x":[[3,"11 5 6 9 2 9 2 15 6 15 11 19 11 5"],[0,22,9,16,15],[0,16,9,22,15]],volume:[[3,"11 5 6 9 2 9 2 15 6 15 11 19 11 5"]],vote:[[6,"m9 12 2 2 4-4"],[6,"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"],[6,"M22 19H2"]],wallet:[[6,"M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"],[6,"M4 6v12c0 1.1.9 2 2 2h14v-4"],[6,"M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"]],"wand-2":[[6,"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"],[6,"m14 7 3 3"],[6,"M5 6v4"],[6,"M19 14v4"],[6,"M10 2v2"],[6,"M7 8H3"],[6,"M21 16h-4"],[6,"M11 3H9"]],wand:[[6,"M15 4V2"],[6,"M15 16v-2"],[6,"M8 9h2"],[6,"M20 9h2"],[6,"M17.8 11.8 19 13"],[6,"M15 9h0"],[6,"M17.8 6.2 19 5"],[6,"m3 21 9-9"],[6,"M12.2 6.2 11 5"]],warehouse:[[6,"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z"],[6,"M6 18h12"],[6,"M6 14h12"],[5,6,10,12,12]],watch:[[1,12,12,6],[2,"12 10 12 12 13 13"],[6,"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05"],[6,"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05"]],waves:[[6,"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"],[6,"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"]],webcam:[[1,12,10,8],[1,12,10,3],[6,"M7 22h10"],[6,"M12 22v-4"]],webhook:[[6,"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2"],[6,"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06"],[6,"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8"]],"wheat-off":[[6,"m2 22 10-10"],[6,"m16 8-1.17 1.17"],[6,"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"m8 8-.53.53a3.5 3.5 0 0 0 0 4.94L9 15l1.53-1.53c.55-.55.88-1.25.98-1.97"],[6,"M10.91 5.26c.15-.26.34-.51.56-.73L13 3l1.53 1.53a3.5 3.5 0 0 1 .28 4.62"],[6,"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"],[6,"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"m16 16-.53.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.49 3.49 0 0 1 1.97-.98"],[6,"M18.74 13.09c.26-.15.51-.34.73-.56L21 11l-1.53-1.53a3.5 3.5 0 0 0-4.62-.28"],[0,2,2,22,22]],wheat:[[6,"M2 22 16 8"],[6,"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"],[6,"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"],[6,"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"],[6,"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"]],"whole-word":[[1,17,12,3],[0,14,7,14,15],[1,7,12,3],[0,10,9,10,15],[2,"22,17 22,19 2,19 2,17"]],"wifi-off":[[0,2,2,22,22],[6,"M8.5 16.5a5 5 0 0 1 7 0"],[6,"M2 8.82a15 15 0 0 1 4.17-2.65"],[6,"M10.66 5c4.01-.36 8.14.9 11.34 3.76"],[6,"M16.85 11.25a10 10 0 0 1 2.22 1.68"],[6,"M5 13a10 10 0 0 1 5.24-2.76"],[0,12,20,12.01,20]],wifi:[[6,"M5 13a10 10 0 0 1 14 0"],[6,"M8.5 16.5a5 5 0 0 1 7 0"],[6,"M2 8.82a15 15 0 0 1 20 0"],[0,12,20,12.01,20]],wind:[[6,"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"],[6,"M9.6 4.6A2 2 0 1 1 11 8H2"],[6,"M12.6 19.4A2 2 0 1 0 14 16H2"]],"wine-off":[[6,"M8 22h8"],[6,"M7 10h3m7 0h-1.343"],[6,"M12 15v7"],[6,"M7.307 7.307A12.33 12.33 0 0 0 7 10a5 5 0 0 0 7.391 4.391M8.638 2.981C8.75 2.668 8.872 2.34 9 2h6c1.5 4 2 6 2 8 0 .407-.05.809-.145 1.198"],[0,2,2,22,22]],wine:[[6,"M8 22h8"],[6,"M7 10h10"],[6,"M12 15v7"],[6,"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z"]],"wrap-text":[[0,3,6,21,6],[6,"M3 12h15a3 3 0 1 1 0 6h-4"],[2,"16 16 14 18 16 20"],[0,3,18,10,18]],wrench:[[6,"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"]],"x-circle":[[1,12,12,10],[0,15,9,9,15],[0,9,9,15,15]],"x-octagon":[[3,"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],[0,15,9,9,15],[0,9,9,15,15]],"x-square":[[5,3,3,18,18,2,2],[0,9,9,15,15],[0,15,9,9,15]],x:[[0,18,6,6,18],[0,6,6,18,18]],youtube:[[6,"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"],[6,"m10 15 5-3-5-3z"]],"zap-off":[[2,"12.41 6.75 13 2 10.57 4.92"],[2,"18.57 12.91 21 10 15.66 10"],[2,"8 8 3 14 12 14 11 22 16 16"],[0,2,2,22,22]],zap:[[3,"13 2 3 14 12 14 11 22 21 10 12 10 13 2"]],"zoom-in":[[1,11,11,8],[0,21,21,16.65,16.65],[0,11,8,11,14],[0,8,11,14,11]],"zoom-out":[[1,11,11,8],[0,21,21,16.65,16.65],[0,8,11,14,11]]};var rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function ob(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),n}function ab(e){var t=e[0];if(0===t)return ob("line",{x1:e[1],y1:e[2],x2:e[3],y2:e[4]});if(1===t)return ob("circle",{cx:e[1],cy:e[2],r:e[3]});if(2===t)return ob("polyline",{points:e[1]});if(3===t)return ob("polygon",{points:e[1]});if(4===t)return ob("ellipse",{cx:e[1],cy:e[2],rx:e[3],ry:e[4]});if(5===t){var n={x:e[1],y:e[2],width:e[3],height:e[4]};return e[5]&&(n.rx=e[5]),e[6]&&(n.ry=e[6]),e[7]&&(n.transform=e[7]),ob("rect",n)}return 6===t?ob("path",{d:e[1]}):void 0}function sb(e){for(var t=ob("svg",rb),n=0,i=e;n<i.length;n++){var r=i[n];t.appendChild(ab(r))}return t}var lb={"create-new":"edit",trash:"trash-2",search:"search","right-triangle":"right-triangle",document:"file",folder:"folder-open",pencil:"edit-3","left-arrow":"chevron-left","right-arrow":"chevron-right","three-horizontal-bars":"menu","dot-network":"git-fork","audio-file":"file-audio","image-file":"image","pdf-file":"file-text",gear:"settings",documents:"files",blocks:"layout-list","go-to-file":"file-input",presentation:"monitor","cross-in-box":"x-square",microphone:"mic","microphone-filled":"mic","two-columns":"columns",link:"link","popup-open":"arrow-up-right",checkmark:"check",hashtag:"hash","left-arrow-with-tail":"arrow-left","right-arrow-with-tail":"arrow-right","up-arrow-with-tail":"arrow-up","down-arrow-with-tail":"arrow-down","lines-of-text":"align-left","vertical-three-dots":"more-vertical",pin:"pin","magnifying-glass":"search",info:"info","horizontal-split":"separator-horizontal","vertical-split":"separator-vertical","calendar-with-checkmark":"calendar-check","folder-minus":"folder-minus","sheets-in-box":"sheets-in-box","up-and-down-arrows":"move-vertical","broken-link":"unlink",cross:"x","any-key":"plus-circle",reset:"rotate-ccw",star:"star","crossed-star":"star-off",dice:"dice","filled-pin":"pin",enter:"log-in",help:"help",vault:"vault","open-vault":"open-vault","paper-plane":"send","bullet-list":"list","uppercase-lowercase-a":"uppercase-lowercase-a","star-list":"star-list","expand-vertically":"move-vertical",languages:"languages",switch:"repeat","pane-layout":"layout",install:"download-cloud",sync:"refresh-cw","check-in-circle":"check-circle-2","sync-small":"sync-small","check-small":"check-small",paused:"paused","forward-arrow":"forward","stacked-levels":"folder-tree","bracket-glyph":"bracket-glyph","note-glyph":"sticky-note","tag-glyph":"tag","price-tag-glyph":"tag","heading-glyph":"heading-glyph","bold-glyph":"bold","italic-glyph":"italic","strikethrough-glyph":"strikethrough","highlight-glyph":"highlighter","code-glyph":"code-2","quote-glyph":"quote","link-glyph":"link","bullet-list-glyph":"list","number-list-glyph":"list-ordered","checkbox-glyph":"check-square","undo-glyph":"undo-2","redo-glyph":"redo-2","up-chevron-glyph":"chevron-up","down-chevron-glyph":"chevron-down","left-chevron-glyph":"chevron-left","right-chevron-glyph":"chevron-right","percent-sign-glyph":"percent","keyboard-glyph":"keyboard","double-up-arrow-glyph":"chevrons-up","double-down-arrow-glyph":"chevrons-down","image-glyph":"paperclip","wrench-screwdriver-glyph":"wrench",clock:"clock","plus-with-circle":"plus-circle","minus-with-circle":"minus-circle","indent-glyph":"indent","unindent-glyph":"outdent",fullscreen:"maximize","exit-fullscreen":"minimize",cloud:"cloud","run-command":"terminal","compress-glyph":"minimize-2","enlarge-glyph":"maximize-2","scissors-glyph":"scissors","up-curly-arrow-glyph":"corner-right-up","down-curly-arrow-glyph":"corner-right-down","plus-minus-glyph":"diff","links-going-out":"links-going-out","links-coming-in":"links-coming-in","add-note-glyph":"file-plus","duplicate-glyph":"copy","clock-glyph":"clock","calendar-glyph":"calendar-days","command-glyph":"terminal-square","dice-glyph":"dice-glyph","file-explorer-glyph":"files","graph-glyph":"git-fork","import-glyph":"download","navigate-glyph":"navigation","open-elsewhere-glyph":"arrow-up-right","presentation-glyph":"monitor","paper-plane-glyph":"send","question-mark-glyph":"question-mark-glyph","restore-file-glyph":"rotate-ccw","search-glyph":"search","star-glyph":"star","play-audio-glyph":"play-circle","stop-audio-glyph":"stop-circle","tomorrow-glyph":"calendar-plus","wand-glyph":"wand","workspace-glyph":"layout","yesterday-glyph":"calendar-minus","box-glyph":"box-glyph","merge-files-glyph":"git-merge","merge-files":"git-merge","two-blank-pages":"copy",scissors:"scissors",paste:"clipboard-check","paste-text":"clipboard-type",split:"git-branch-plus","select-all-text":"box-select",wand:"wand-2","github-glyph":"file-code","reading-glasses":"glasses","user-manual-filled":"book-open","discord-filled":"discord","chat-bubbles-filled":"message-circle","experiment-filled":"experiment"},cb={"refresh-cw-off":'<path d="M21 8L18.74 5.74A9.75 9.75 0 0 0 12 3C11 3 10.03 3.16 9.13 3.47"/><path d="M8 16H3v5"/><path d="M3 12C3 9.51 4 7.26 5.64 5.64"/><path d="m3 16 2.26 2.26A9.75 9.75 0 0 0 12 21c2.49 0 4.74-1 6.36-2.64"/><path d="M21 12c0 1-.16 1.97-.47 2.87"/><path d="M21 3v5h-5"/><path d="M22 22 2 2"/>',"bracket-glyph":'<path d="M9 21C7.89336 21 5 21 5 21C5 21 5 6.79076 5 3C5 3 8.21882 3.00004 9 3.00004"/><path d="M15 2.99996C16.1066 2.99996 19 2.99996 19 2.99996C19 2.99996 19 17.2092 19 21C19 21 15.7812 21 15 21"/>',"box-glyph":'<path d="M21 13V12.5714C21 11.8964 20.8189 11 19.7143 11L4.28571 11C3.18114 11 3 11.8964 3 12.5714V20.4286C3 21.1036 3.18114 22 4.28571 22H14"/><path d="M21 4.14286C21 3.65194 20.8189 3 19.7143 3L4.28571 3C3.18114 3 3 3.65194 3 4.14286"/><path d="M21 8.14286C21 7.65194 20.8189 7 19.7143 7L4.28571 7C3.18114 7 3 7.65194 3 8.14286"/><path d="M19 16V22"/><path d="M16 19H22"/>',"check-small":'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M7.5 12.5L10.5 15.5L16 10"/>',"dice-glyph":'<path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"/><path d="M17 16C17 16.5523 16.5523 17 16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16Z"/><path d="M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z"/><path d="M9 8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8Z"/>',dice:'<path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"/><path d="M17 16C17 16.5523 16.5523 17 16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16Z"/><path d="M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z"/><path d="M9 8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8Z"/>',discord:'<path d="M8.795 17.0865C8.34168 17.7478 7.8561 18.3864 7.34 19C3.65 18.895 2.25 16.5 2.25 16.5C2.30245 13.1065 3.12479 9.7693 4.655 6.74C6.00009 5.68771 7.63906 5.07965 9.345 5L9.845 6.155C10.5591 6.05585 11.279 6.00407 12 6C12.7242 6.00238 13.4474 6.05249 14.165 6.15L14.665 4.995C16.3726 5.07897 18.0117 5.69233 19.355 6.75C20.8803 9.7771 21.6991 13.1107 21.75 16.5C21.75 16.5 20.35 18.895 16.66 19C16.1517 18.3894 15.6744 17.7536 15.23 17.095M18.46 15.645C16.54 16.6175 14.682 17.59 12 17.59C9.318 17.59 7.46 16.6175 5.54 15.645" /><path d="M9.25 13.5C9.66421 13.5 10 12.9404 10 12.25C10 11.5596 9.66421 11 9.25 11C8.83579 11 8.5 11.5596 8.5 12.25C8.5 12.9404 8.83579 13.5 9.25 13.5Z" /><path d="M14.75 13.5C15.1642 13.5 15.5 12.9404 15.5 12.25C15.5 11.5596 15.1642 11 14.75 11C14.3358 11 14 11.5596 14 12.25C14 12.9404 14.3358 13.5 14.75 13.5Z" />',"right-triangle":'<path d="M3 8L12 17L21 8"/>',"heading-glyph":'<path d="M9 4H4"/><path d="M20 4H15"/><path d="M20 20H15"/><path d="M9 20H4"/><path d="M18 12L6 12"/><path d="M6 20L6 4"/><path d="M18 20L18 4"/>',help:'<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"/><path d="M9.09009 9.00003C9.32519 8.33169 9.78924 7.76813 10.4 7.40916C11.0108 7.05019 12.079 6.94542 12.7773 7.06519C13.9093 7.25935 14.9767 8.25497 14.9748 9.49073C14.9748 11.9908 12 11.2974 12 14"/><path d="M12 17H12.01"/>',"keyboard-toggle":'<path d="M20 3H4C2.89543 3 2 3.89543 2 5V13C2 14.1046 2.89543 15 4 15H20C21.1046 15 22 14.1046 22 13V5C22 3.89543 21.1046 3 20 3Z"/><path d="M6 7H6.001"/><path d="M10 7H10.001"/><path d="M14 7H14.001"/><path d="M18 7H18.001"/><path d="M6 11H6.001"/><path d="M18 11H18.001"/><path d="M10 11H14"/><path d="M7 19L12 21L17 19"/>',"broken-link":'<path d="M12 18.26L10.4886 19.7786L10.4886 19.761C9.64543 20.5738 8.51382 21.0192 7.34221 20.9994C6.17061 20.9795 5.05478 20.496 4.23971 19.655C3.44441 18.8312 3 17.7313 3 16.5868C3 15.4423 3.44441 14.3425 4.23971 13.5186L5.75111 12"/><path d="M12 5.75153L13.5114 4.24023C14.3546 3.42658 15.4862 2.98075 16.6578 3.00064C17.8294 3.02052 18.9452 3.50449 19.7603 4.34629C20.5556 5.17092 21 6.27188 21 7.4175C21 8.56311 20.5556 9.66407 19.7603 10.4887L18.2489 12"/><path d="M3 8L6 8"/><path d="M8 3L8 6"/><path d="M18 16L21 16"/><path d="M16 18L16 21"/>',experiment:'<path d="M9.18747 9.75V3H14.8125V9.75L20.1485 15.5707C20.5733 16.0343 20.8542 16.6115 20.9567 17.2319C21.0592 17.8523 20.9789 18.4891 20.7257 19.0646C20.4725 19.6402 20.0573 20.1297 19.5307 20.4733C19.0041 20.817 18.3889 21 17.7601 21H6.23994C5.61113 21 4.99591 20.817 4.46931 20.4733C3.94271 20.1297 3.52749 19.6402 3.27428 19.0646C3.02108 18.4891 2.94084 17.8523 3.04334 17.2319C3.14584 16.6115 3.42666 16.0343 3.85154 15.5707L9.18747 9.75Z"/><path d="M8 3H16"/><path d="M5 14C9.08333 16.25 9.66667 14 12 14C14.3333 14 14.9167 16.25 19 14"/>',"left-arrow":'<path d="M16.5 3.5L7.5 12.5L16.5 21.5"/>',link:'<path d="M13.1404 10C13.6728 10.3955 14.1134 10.9001 14.4322 11.4796C14.7511 12.0591 14.9407 12.6999 14.9882 13.3586C15.0357 14.0172 14.94 14.6783 14.7076 15.297C14.4751 15.9157 14.1115 16.4775 13.6412 16.9443L10.8588 19.7073C9.98423 20.5462 8.81284 21.0103 7.59697 20.9998C6.38109 20.9893 5.21801 20.505 4.35822 19.6512C3.49844 18.7974 3.01074 17.6424 3.00018 16.435C2.98961 15.2276 3.45702 14.0644 4.30173 13.1959L5.88768 11.6117"/><path d="M10.8596 14C10.3272 13.6045 9.88658 13.0999 9.56776 12.5204C9.24894 11.9409 9.05935 11.3001 9.01185 10.6414C8.96435 9.98279 9.06004 9.32171 9.29245 8.70302C9.52486 8.08433 9.88853 7.52251 10.3588 7.05567L13.1412 4.29268C14.0158 3.45384 15.1872 2.98968 16.403 3.00017C17.6189 3.01067 18.782 3.49497 19.6418 4.34877C20.5016 5.20257 20.9893 6.35756 20.9998 7.56498C21.0104 8.77239 20.543 9.93562 19.6983 10.8041L18.1123 12.379"/>',"link-glyph":'<path d="M13.1404 10C13.6728 10.3955 14.1134 10.9001 14.4322 11.4796C14.7511 12.0591 14.9407 12.6999 14.9882 13.3586C15.0357 14.0172 14.94 14.6783 14.7076 15.297C14.4751 15.9157 14.1115 16.4775 13.6412 16.9443L10.8588 19.7073C9.98423 20.5462 8.81284 21.0103 7.59697 20.9998C6.38109 20.9893 5.21801 20.505 4.35822 19.6512C3.49844 18.7974 3.01074 17.6424 3.00018 16.435C2.98961 15.2276 3.45702 14.0644 4.30173 13.1959L5.88768 11.6117"/><path d="M10.8596 14C10.3272 13.6045 9.88658 13.0999 9.56776 12.5204C9.24894 11.9409 9.05935 11.3001 9.01185 10.6414C8.96435 9.98279 9.06004 9.32171 9.29245 8.70302C9.52486 8.08433 9.88853 7.52251 10.3588 7.05567L13.1412 4.29268C14.0158 3.45384 15.1872 2.98968 16.403 3.00017C17.6189 3.01067 18.782 3.49497 19.6418 4.34877C20.5016 5.20257 20.9893 6.35756 20.9998 7.56498C21.0104 8.77239 20.543 9.93562 19.6983 10.8041L18.1123 12.379"/>',"links-coming-in":'<path d="M8.70467 12C8.21657 11.6404 7.81269 11.1817 7.52044 10.6549C7.22819 10.1281 7.0544 9.54553 7.01086 8.94677C6.96732 8.348 7.05504 7.74701 7.26808 7.18456C7.48112 6.62212 7.81449 6.11138 8.24558 5.68697L10.7961 3.17516C11.5978 2.41258 12.6716 1.99062 13.7861 2.00016C14.9007 2.0097 15.9668 2.44997 16.755 3.22615C17.5431 4.00234 17.9902 5.05233 17.9998 6.14998C18.0095 7.24763 17.5811 8.30511 16.8067 9.09467L15.9014 10"/><path d="M11.2953 8C11.7834 8.35957 12.1873 8.81831 12.4796 9.34512C12.7718 9.87192 12.9456 10.4545 12.9891 11.0532C13.0327 11.652 12.945 12.253 12.7319 12.8154C12.5189 13.3779 12.1855 13.8886 11.7544 14.313L9.20392 16.8248C8.40221 17.5874 7.32844 18.0094 6.21389 17.9998C5.09933 17.9903 4.03318 17.55 3.24504 16.7738C2.4569 15.9977 2.00985 14.9477 2.00016 13.85C1.99047 12.7524 2.41893 11.6949 3.19326 10.9053L4.09859 10"/><path d="M17 21L14 18L17 15"/><path d="M21 18H14"/>',"links-going-out":'<path d="M8.70467 12C8.21657 11.6404 7.81269 11.1817 7.52044 10.6549C7.22819 10.1281 7.0544 9.54553 7.01086 8.94677C6.96732 8.348 7.05504 7.74701 7.26808 7.18456C7.48112 6.62212 7.81449 6.11138 8.24558 5.68697L10.7961 3.17516C11.5978 2.41258 12.6716 1.99062 13.7861 2.00016C14.9007 2.0097 15.9668 2.44997 16.755 3.22615C17.5431 4.00234 17.9902 5.05233 17.9998 6.14998C18.0095 7.24763 17.5811 8.30511 16.8067 9.09467L15.9014 10"/><path d="M11.2953 8C11.7834 8.35957 12.1873 8.81831 12.4796 9.34512C12.7718 9.87192 12.9456 10.4545 12.9891 11.0532C13.0327 11.652 12.945 12.253 12.7319 12.8154C12.5189 13.3779 12.1855 13.8886 11.7544 14.313L9.20392 16.8248C8.40221 17.5874 7.32844 18.0094 6.21389 17.9998C5.09933 17.9903 4.03318 17.55 3.24504 16.7738C2.4569 15.9977 2.00985 14.9477 2.00016 13.85C1.99047 12.7524 2.41893 11.6949 3.19326 10.9053L4.09859 10"/><path d="M18 21L21 18L18 15"/><path d="M14 18H21"/>',"open-vault":'<path d="M10 21L4.5 21C3.39543 21 3 20.5255 3 19.2L3 4.80001C3 3.47452 3.39543 3.00001 4.5 3.00001L10 3"/><path d="M21 7L22.5 7"/><path d="M21 16L22.5 16"/><path d="M21 18.9104L21 5.09381C21 5.09381 21 3.94236 19.5 3.36674L11.5 1.06397C11.5 1.06397 10 0.488257 10 2.79104L10 21.0928C10 23.5159 11.5 22.9403 11.5 22.9403L19.5 20.6375C21 20.0618 21 18.9104 21 18.9104Z"/><ellipse cx="16" cy="11" rx="1.5" ry="3"/><path d="M16 14L16 17"/>',paused:'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M10 15V9"/><path d="M14 15V9"/>',"question-mark-glyph":'<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"/><path d="M9.09009 9.00003C9.32519 8.33169 9.78924 7.76813 10.4 7.40916C11.0108 7.05019 12.079 6.94542 12.7773 7.06519C13.9093 7.25935 14.9767 8.25497 14.9748 9.49073C14.9748 11.9908 12 11.2974 12 14"/><path d="M12 17H12.01"/>',"right-arrow":'<path d="M7.5 21.5L16.5 12.5L7.5 3.5"/>',"sidebar-left":'<path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"/><path d="M10 4V20"/><path d="M4 7H7"/><path d="M4 10H7"/><path d="M4 13H7"/>',"sidebar-right":'<path d="M3 3H21C22.1046 3 23 3.89543 23 5V19C23 20.1046 22.1046 21 21 21H3C1.89543 21 1 20.1046 1 19V5C1 3.89543 1.89543 3 3 3Z"/><path d="M14 4V20"/><path d="M20 7H17"/><path d="M20 10H17"/><path d="M20 13H17"/>',"sheets-in-box":'<path d="M19 16V22"/><path d="M16 19H22"/><path d="M20.7297 13.0005C20.7297 12.4701 20.519 11.9613 20.1439 11.5863C19.7689 11.2112 19.2602 11.0005 18.7297 11.0005H4.72974C4.1993 11.0005 3.6906 11.2112 3.31552 11.5863C2.94045 11.9613 2.72974 12.4701 2.72974 13.0005L2.72974 19.9886C2.72974 20.519 2.94045 21.0277 3.31552 21.4028C3.6906 21.7779 4.1993 21.9886 4.72974 21.9886H13"/><path d="M21 8C21 8 21 7 20 7H4C3.00199 7 3 7.99347 3 7.99347"/><path d="M21 4C21 4 21.0066 3 20 3L4 3C3 3 3 4 3 4"/>',"star-list":'<path d="M10 12H3"/><path d="M16 6H3"/><path d="M10 18H3"/><path d="M17 11L18.236 13.3039L21 13.6756L19 15.4679L19.472 18L17 16.8039L14.528 18L15 15.4679L13 13.6756L15.764 13.3039L17 11Z"/>',"sync-small":'<path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M12 21C16.9707 21 21 16.9707 21 12C21 7.0293 16.9707 3 12 3C7.0293 3 3 7.0293 3 12C3 16.9707 7.0293 21 12 21Z"/><path d="M7.6394 11.0114C8.08785 9.01426 9.87182 7.52222 12.0044 7.52222C14 7.52222 15 9 16.0121 10.0057M8.00579 14.0042C9 15 10 16.4695 12.0044 16.4695C14.1282 16.4695 15.9062 14.9897 16.3638 13.0049"/><path d="M16.5 8.5V10.5H14.5"/><path d="M8 16L8 14L10 14"/>',tabs:'<path d="M6 17V19.4444C6 20.3036 6.69645 21 7.55556 21H18.4444C19.3036 21 20 20.3036 20 19.4444V8.55556C20 7.69645 19.3036 7 18.4444 7H16"/><path d="M14.4444 3H3.55556C2.69645 3 2 3.69645 2 4.55556V15.4444C2 16.3036 2.69645 17 3.55556 17H14.4444C15.3036 17 16 16.3036 16 15.4444V4.55556C16 3.69645 15.3036 3 14.4444 3Z"/>',"uppercase-lowercase-a":'<path d="M10.5 14L4.5 14"/><path d="M12.5 18L7.5 6"/><path d="M3 18L7.5 6"/><path d="M15.9526 10.8322C15.9526 10.8322 16.6259 10 18.3832 10C20.1406 9.99999 20.9986 11.0587 20.9986 11.9682V16.7018C20.9986 17.1624 21.2815 17.7461 21.7151 18"/><path d="M20.7151 13.5C18.7151 13.5 15.7151 14.2837 15.7151 16C15.7151 17.7163 17.5908 18.2909 18.7151 18C19.5635 17.7804 20.5265 17.3116 20.889 16.6199"/>',vault:'<path d="M21 19.2L21 4.8C21 3.47452 20.6046 3 19.5 3L4.5 3C3.39543 3 3 3.47452 3 4.8L3 19.2C3 20.5255 3.39543 21 4.5 21L19.5 21C20.6046 21 21 20.5255 21 19.2Z"/><path d="M14.9675 10.56C15.0601 11.1841 14.9535 11.8216 14.6629 12.3817C14.3722 12.9418 13.9124 13.396 13.3488 13.6797C12.7851 13.9634 12.1464 14.0621 11.5234 13.9619C10.9004 13.8616 10.3249 13.5675 9.87868 13.1213C9.43249 12.6751 9.13835 12.0996 9.0381 11.4766C8.93786 10.8536 9.0366 10.2149 9.3203 9.65123C9.60399 9.08759 10.0582 8.62776 10.6183 8.33713C11.1784 8.04651 11.8159 7.93989 12.4401 8.03245C13.0767 8.12687 13.6662 8.42355 14.1213 8.87868C14.5765 9.33381 14.8731 9.92326 14.9675 10.56Z"/><path d="M12 14L12 17"/><path d="M21 7L22.5 7"/><path d="M21 16L22.5 16"/>',"stack-horizontal":'<path d="M10 5H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm10 0h-2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2ZM2 2v20"/>',"stack-vertical":'<path d="M19 10V8a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm0 10v-2a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm3-18H2"/>',"stretch-horizontal":'<path d="M18 8V6c0-1.105-.767-2-1.714-2H7.714C6.768 4 6 4.895 6 6v2c0 1.105.768 2 1.714 2h8.572C17.233 10 18 9.105 18 8Zm0 10v-2c0-1.105-.767-2-1.714-2H7.714C6.768 14 6 14.895 6 16v2c0 1.105.768 2 1.714 2h8.572c.947 0 1.714-.895 1.714-2ZM2 2v20M22 2v20"/>',"stretch-vertical":'<path d="M16 18h2c1.105 0 2-.767 2-1.714V7.714C20 6.768 19.105 6 18 6h-2c-1.105 0-2 .768-2 1.714v8.572c0 .947.895 1.714 2 1.714ZM6 18h2c1.105 0 2-.767 2-1.714V7.714C10 6.768 9.105 6 8 6H6c-1.105 0-2 .768-2 1.714v8.572C4 17.233 4.895 18 6 18ZM22 2H2m20 20H2"/>',"distribute-space-horizontal":'<path d="M7 5H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm12 0h-2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2ZM3 2v20M21 2v20"/>',"distribute-space-vertical":'<path d="M19 7V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm0 12v-2a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2Zm3-16H2m20 18H2"/>',"zoom-to-selection":'<path d="M2 6V4a2 2 0 0 1 2-2h2m12 0h2a2 2 0 0 1 2 2v2m0 12v2a2 2 0 0 1-2 2h-2M6 22H4a2 2 0 0 1-2-2v-2m9-2a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm7 2-3-3"/>',"create-group":'<path d="M2 6V4a2 2 0 0 1 2-2h2m12 0h2a2 2 0 0 1 2 2v2m0 12v2a2 2 0 0 1-2 2h-2M6 22H4a2 2 0 0 1-2-2v-2m9-12H6v5h5V6Zm7 7h-5v5h5v-5Z"/>',"snap-to-object":'<path d="M21 3H3m18 18H3"/><circle cx="3" cy="3" r="2"/><circle cx="3" cy="21" r="2"/><circle cx="21" cy="3" r="2"/><circle cx="21" cy="21" r="2"/><path d="M15.111 8H8.89a.889.889 0 0 0-.89.889v6.222c0 .491.398.889.889.889h6.222a.889.889 0 0 0 .889-.889V8.89a.889.889 0 0 0-.889-.89Z"/>',"line-horizontal":'<path d="M3 12h18"/>',"aspect-ratio":'<path d="M19 4H5c-1.105 0-2 .796-2 1.778v12.444C3 19.204 3.895 20 5 20h14c1.105 0 2-.796 2-1.778V5.778C21 4.796 20.105 4 19 4Z"/><path d="M14 8h3v2m-7 6H7v-2"/>',"rectangle-vertical-double":'<path d="M8 2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Zm12 0h-4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"/>'},ub={},hb={viewBox:"0 0 100 100"},pb={};function db(e,t){if(!pb.hasOwnProperty(e)){var n=t();if(!n)return null;n.classList.add("svg-icon",e),pb[e]=n}return pb[e].cloneNode(!0)}function fb(e){return e.startsWith("lucide-")?db(e,(function(){var t=e.substring("lucide-".length);return ib.hasOwnProperty(t)?sb(ib[t]):null})):ub.hasOwnProperty(e)?db(e,(function(){var t=ob("svg",hb);return t.innerHTML=ub[e],t})):cb.hasOwnProperty(e)?db(e,(function(){var t=ob("svg",rb);return t.innerHTML=cb[e],t})):(lb.hasOwnProperty(e)&&(e=lb[e]),ib.hasOwnProperty(e)?db("lucide-"+e,(function(){return sb(ib[e])})):null)}function gb(e,t){var n=e.firstChild;if(!(n&&n.instanceOf(SVGSVGElement)&&n.classList.contains(t))){n&&e.removeChild(n);var i=fb(t);i&&e.appendChild(i)}}function mb(e,t){delete pb[e],ub[e]=t}function vb(e){delete pb[e],delete ub[e]}function yb(){return[].concat(Object.keys(ib).map((function(e){return"lucide-"+e}))).concat(Object.keys(ub)).concat(Object.keys(cb))}function bb(e,t){e.focus();var n=e.win,i=n.document.createRange();i.selectNodeContents(e),isBoolean(t)&&i.collapse(t);var r=n.getSelection();r&&(r.removeAllRanges(),r.addRange(i),Lt.isMobile&&ze((function(){e.scrollIntoView({block:"nearest"})})))}function wb(){var e=activeDocument.activeElement;e&&e.instanceOf(HTMLElement)&&e.blur();var t=activeWindow.getSelection();t&&t.removeAllRanges()}function kb(e,t){for(var n=e.document.body;t.win.frameElement;)t=t.win.frameElement;return n.contains(t)}var Cb=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Cb={passive:!1}}}))}catch(e){}function Eb(e,t,n){var i,r,o;n=n||{},t.show();var a=null!==(i=n.gap)&&void 0!==i?i:0,s=n.offsetParent||t.offsetParent||t.doc.documentElement,l=null!==(r=n.horizontalAlignment)&&void 0!==r?r:"left",c=null!==(o=n.preventOverlap)&&void 0!==o&&o,u=s.scrollTop+10,h=s.scrollTop+s.clientHeight-10,p=Math.min(e.top,h),d=Math.max(e.bottom,u),f=t.offsetHeight,g=e.top-u,m=h-e.bottom,v=0,y="";m>=f+a?(v=d+a,y="bottom"):g>=f+a||c&&g>m?(v=p-a-f,y="top"):c?(v=d+a,y="bottom"):s.clientHeight<f+a?(v=u,y="overlap"):(v=h-f,y="overlap");var b=s.scrollLeft+10,w=s.scrollLeft+s.clientWidth-10,k=t.offsetWidth,C="left"===l?e.left:e.right-k;return C<b?C=b:C>w-k&&(C=w-k),t.style.top="".concat(v,"px"),t.style.left="".concat(C,"px"),{top:v,left:C,vresult:y}}function xb(e,t){e.addClass("mod-fade");t.addEventListener("scroll",rt((function(){var n=t.scrollLeft,i=t.scrollWidth,r=t.offsetWidth;e.toggleClass("mod-at-start",0===n),e.toggleClass("mod-at-end",Math.ceil(n)>=i-r)}),10))}function Sb(e,t){var n=e.clientX,i=e.clientY,r=t.getBoundingClientRect();return n>=r.x&&n<=r.x+r.width&&i>=r.y&&i<=r.y+r.height}function Mb(e,t){for(var n=0,i=0,r=t?t.offsetParent:null;e&&e!==t&&e!==r;){n+=e.offsetTop,i+=e.offsetLeft;for(var o=e.offsetParent,a=e.parentElement;a&&a!==o;)n-=a.scrollTop,i-=a.scrollLeft,a=a.parentElement;o&&o!==t&&o!==r&&(n-=o.scrollTop,i-=o.scrollLeft),e=o}return{top:n,left:i}}function Tb(e,t){var n=Mb(e,t);return{left:n.left,right:n.left+e.offsetWidth,top:n.top,bottom:n.top+e.offsetHeight}}function Db(e,t){var n=!1,i=null;return{get loaded(){return n},get promise(){if(n)return Promise.resolve();if(!i){t&&t.before&&t.before();var r=function(e){return new Promise((function(t,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.addEventListener("load",(function(){return t(i)})),i.addEventListener("error",(function(e){return n(e)})),document.body.appendChild(i)}))}(e);r.catch((function(e){e.detach(),i=null})),i=r.then((function(){n=!0,i=null,t&&t.after&&t.after()}))}return i},then:function(e){return n?Promise.resolve(e()):this.promise.then(e)}}}function Ab(e,t){if(3!==e.nodeType)for(var n=e.firstChild;n;)Ab(n,t),n=n.nextSibling;else t.push(e)}function Lb(e,t,n){var i=[];Ab(e,i);var r=i.map((function(e){return e.textContent||""}));return Pb(i,r,t,n)}function Pb(e,t,n,i){for(var r=0,o=null,a=-1,s=null,l=-1,c=0;c<t.length;c++){var u=r+t[c].length;if(r<=n&&n<=u&&(o=e[c],a=n-r),r<=i&&i<=u){s=e[c],l=i-r;break}r=u}if(o&&s){var h=document.createRange();return h.setStart(o,a),h.setEnd(s,l),h}return null}function Ib(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:e.addClass("is-loading"),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t()];case 2:return n=i.sent(),[3,4];case 3:return e.removeClass("is-loading"),[7];case 4:return[2,n]}}))}))}function Ob(e){e.addEventListener("mousemove",(function(t){var n=e.clientHeight,i=e.scrollHeight;if(i>n){var r=(t.clientY-e.getBoundingClientRect().y-30)/(n-60);e.scrollTop=(i-n)*Math.clamp(r,0,1)}}))}for(var Fb=new Map,Bb=0,Nb="a abbr acronym b bdi bdo big br button canvas cite code data del dfn em embed i iframe img input ins kbd label map mark meter noscript object outputpicture progress q ruby s samp select small span strong sub sup svg textarea time u tt var video wbr".split(" ");Bb<Nb.length;Bb++){var Rb=Nb[Bb];Fb.set(Rb,!0)}for(var Hb=0,Vb="address article aside blockquote details dialog dd div dl dt fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr li main nav ol p pre ul".split(" ");Hb<Vb.length;Hb++){Rb=Vb[Hb];Fb.set(Rb,!1)}var zb=/^[a-z]+$/i;function qb(e){if(!e||!zb.test(e))return!1;if(Fb.has(e))return Fb.get(e);var t,n;try{t=document.createElement(e),document.body.appendChild(t),n=getComputedStyle(t).display}catch(e){}t&&document.body.removeChild(t);var i=n&&n.startsWith("inline");return Fb.set(e,i),i}function Ub(e,t){var n=e.querySelector(["a[href]","button","input","select","textarea",'[contenteditable]:not([contenteditable="false"])',"[tabindex]"].map((function(e){return e+':not([disabled]):not([tabindex="-1"])'})).join(","));return n&&(n.instanceOf(HTMLElement)||n.instanceOf(SVGElement))?(n.focus(t),n):null}var Wb=new WeakMap;function _b(e,t){for(var n=[e];n.length;){var i=n.pop();if(!0!==t(i))for(var r=i.firstElementChild;r;)n.push(r),r=r.nextElementSibling}}function jb(e){if(qb(e.tagName.toLowerCase()))return!0;var t=getComputedStyle(e);return!("none"!==t.display&&!t.display.startsWith("inline"))||(("auto"===t.overflowY||"scroll"===t.overflowY)&&e.scrollTop>0?Wb.set(e,e.scrollTop):Wb.delete(e),!1)}function Gb(e){_b(e,jb)}function Kb(e){var t=Wb.get(e);return t&&(e.scrollTop=t,Wb.delete(e)),!1}function Yb(e){_b(e,Kb)}function Xb(e){var t=0,n=0;e.addEventListener("scroll",(function(){t=e.scrollLeft,n=e.scrollTop}),{passive:!0}),e.onNodeInserted((function(){!n&&!t||e.scrollLeft||e.scrollTop||(e.scrollLeft=t,e.scrollTop=n)}))}function $b(e,t,n){for(var i=e.targetNode;i&&i!==t;){if(i.instanceOf(Element)&&(i.scrollHeight>i.clientHeight||n&&i.scrollWidth>i.clientWidth)){var r=getComputedStyle(i),o=r.overflowY;if("auto"===o||"scroll"===o)return!0;if(n){var a=r.overflowX;if("auto"===a||"scroll"===a)return!0}}i=i.parentNode}return!1}function Zb(e){Lt.isMobile&&(e.addClass("mod-tappable"),e.addEventListener("touchstart",(function(t){if(1===t.touches.length){var n=t.timeStamp,i=t.touches[0].clientX,r=t.touches[0].clientY,o=!1,a=t.touches[0].identifier;e.addClass("mod-tap");var s=function(t){if(kt(t,a)&&!o){c(),o=!0;var i=Math.max(0,300-(t.timeStamp-n));setTimeout((function(){return e.removeClass("mod-tap")}),i)}},l=function(e){var t=kt(e,a);if(t){var n=t.clientX,o=t.clientY,l=n-i,c=o-r;l*l+c*c>25&&s(e)}},c=function(){e.removeEventListener("touchmove",l),e.removeEventListener("touchcancel",s),e.removeEventListener("touchend",s)};e.addEventListener("touchmove",l),e.addEventListener("touchcancel",s),e.addEventListener("touchend",s)}})))}function Qb(e){var t=e.frameElement;if(!t)return null;for(var n={x:0,y:0,scale:1,win:e};null!==t;){var i=t.getBoundingClientRect(),r=i.width/t.clientWidth;n.scale*=r,n.x=n.x*r+i.x,n.y=n.y*r+i.y,n.win=t.win,t=t.win.frameElement}return n}function Jb(e,t){var n=0,i=e.win;e.addEventListener("mousedown",(function(e){e.detail>1&&i.clearTimeout(n)})),e.addEventListener("click",(function(r){if(!(r.defaultPrevented||r.detail>1||r.shiftKey)){var o=i.getSelection();if(o.rangeCount>0)for(var a=0;a<o.rangeCount;a++){if(((p=o.getRangeAt(a)).startContainer!==p.endContainer||p.startOffset!==p.endOffset)&&(e.contains(p.startContainer)||e.contains(p.endContainer)))return}var s=!1,l=r.targetNode;if(l&&l.instanceOf(Element)){var c=r.clientX,u=r.clientY;for(a=0;a<l.childNodes.length;a++){var h=l.childNodes[a];if(h.nodeType===Node.TEXT_NODE){var p;(p=new Range).setStart(h,0),p.setEnd(h,h.textContent.length);for(var d=p.getClientRects(),f=0;f<d.length;f++){var g=d[f];if(g.x<=c&&c<=g.x+g.width&&g.y<=u&&u<=g.y+g.height){s=!0;break}}if(s)break}}}i=r.win,n=i.setTimeout((function(){r.defaultPrevented||(r.preventDefault(),t(r))}),s?150:10)}}))}function ew(e,t){if(void 0===t&&(t=!1),e.normalize(),1!==e.childNodes.length||e.firstChild.nodeType!==Node.TEXT_NODE){var n=t?e.textContent:e.getText();e.textContent=n,e.isActiveElement()&&bb(e,!1)}}function tw(e,t){t.preventDefault();var n=t.clipboardData.getData("text/plain"),i=e.doc;if(i.queryCommandSupported("insertText"))i.execCommand("insertText",!1,n);else{var r=window.getSelection(),o=r.getRangeAt(0);if(!e.contains(o.commonAncestorContainer))return;o.deleteContents();var a=document.createTextNode(n);o.insertNode(a),o.selectNodeContents(a),o.collapse(!1),r.removeAllRanges(),r.addRange(o)}e.normalize()}for(var nw={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",93:"ContextMenu",95:"Sleep",106:"*",107:"+",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},iw=1;iw<25;iw++)nw[111+iw]="F"+iw;for(iw=65;iw<91;iw++){var rw=String.fromCharCode(iw);nw[iw]=rw.toUpperCase()}for(iw=96;iw<106;iw++)nw[iw]="Numpad"+String.fromCharCode(iw-48);var ow={ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"};function aw(e){var t=e.key;if(!t){var n=e.which||e.keyCode;t=nw[n]}return t}var sw=ye?{Mod:"⌘",Ctrl:"⌃",Meta:"⌘",Alt:"⌥",Shift:"⇧"}:{Mod:"Ctrl",Ctrl:"Ctrl",Meta:"Win",Alt:"Alt",Shift:"Shift"},lw=["Mod","Ctrl","Meta","Alt","Shift"];var cw=function(){function e(e){this.tabFocusContainerEl=null,this.keys=[],this.parent=e}return e.prototype.registerKey=function(e,t,n){return this.register(e,t,n)},e.prototype.register=function(e,t,n){var i={scope:this,modifiers:e?hw.compileModifiers(e):null,key:t,func:n};return this.keys.push(i),i},e.prototype.unregister=function(e){this.keys.remove(e)},e.prototype.setTabFocusContainerEl=function(e){this.tabFocusContainerEl=e},e.prototype.handleKey=function(e,t){for(var n=0,i=this.keys;n<i.length;n++){var r=i[n];if(hw.isMatch(r,t)){var o=r.func(e,t);if(void 0!==o)return o;if(null!==r.key||null!==r.modifiers)return o}}if(this.parent)return this.parent.handleKey(e,t)},e}(),uw=function(e){function t(t,n){var i=e.call(this,t)||this;return i.cb=n,i}return f(t,e),t.prototype.handleKey=function(t,n){var i=this.cb();return i?i.handleKey(t,n):e.prototype.handleKey.call(this,t,n)},t}(cw),hw=function(){function e(){this.modifiers="",this.rootScope=new cw,this.scope=this.rootScope,this.prevScopes=[],window.addEventListener("keydown",this.onKeyEvent.bind(this),!0),window.addEventListener("focusin",this.onFocusIn.bind(this))}return e.init=function(){return e.global||(e.global=new e),e.global},e.prototype.getRootScope=function(){return this.rootScope},e.prototype.pushScope=function(e){this.scope!==e&&(this.prevScopes.push(this.scope),this.scope=e)},e.prototype.popScope=function(e){e!==this.rootScope&&(this.scope===e?this.scope=this.prevScopes.pop()||this.rootScope:this.prevScopes.remove(e))},e.prototype.onKeyEvent=function(t){this.updateModifiers(t);var n=this.scope;if(n){var i=aw(t);if(!e.isModifierKey(i)){var r=function(e){var t=e.which||e.keyCode;return nw[t]||"Key"+t}(t);54===t.which&&"^"==t.key&&"KeyI"===t.code&&(r="KeyI");var o={modifiers:this.modifiers,key:i,vkey:r};return!1===n.handleKey(t,o)?(t.preventDefault(),t.stopPropagation(),!1):void 0}}},e.prototype.onFocusIn=function(e){var t=this,n=this.scope;if(n&&n.tabFocusContainerEl){var i=n.tabFocusContainerEl,r=e.targetNode;r&&r!==activeDocument.body&&r.instanceOf(Element)&&!i.contains(r)&&setTimeout((function(){if(t.scope===n&&!Ub(i)){var e=activeDocument.activeElement;e&&e instanceof HTMLElement&&e.blur()}}),0)}},e.prototype.updateModifiers=function(t){this.modifiers=e.getModifiers(t)},e.getModifiers=function(t){var n=[];return t.ctrlKey&&n.push("Ctrl"),t.metaKey&&n.push("Meta"),t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),e.compileModifiers(n)},e.compileModifiers=function(e){return e.map((function(e){return"Mod"===e?"MacOS"===me?"Meta":"Ctrl":e})).sort().join(",")},e.decompileModifiers=function(e){return e.split(",").map((function(e){return"MacOS"===me&&"Meta"===e||"MacOS"!==me&&"Ctrl"===e?"Mod":e})).filter((function(e){return e}))},e.isModifierKey=function(e){return"Control"===e||"Alt"===e||"Shift"===e||"OS"===e||"Meta"===e},e.prototype.matchModifiers=function(e){return this.modifiers===e},e.prototype.hasModifier=function(t){return e.decompileModifiers(this.modifiers).contains(t)},e.isModifier=function(e,t){return"Ctrl"===t?e.ctrlKey:"Meta"===t?e.metaKey:"Alt"===t?e.altKey:"Shift"===t?e.shiftKey:"Mod"===t&&("MacOS"===me?e.metaKey:e.ctrlKey)},e.isMatch=function(e,t){var n=e.modifiers,i=e.key;return(null===n||n===t.modifiers)&&(!i||(i===t.vkey||!(!t.key||i.toLowerCase()!==t.key.toLowerCase())))},e.isModEvent=function(t){return!!t&&(function(e){return(e.instanceOf(MouseEvent)||e.instanceOf(PointerEvent))&&1===e.button}(t)?"tab":!!e.isModifier(t,"Mod")&&(e.isModifier(t,"Alt")?e.isModifier(t,"Shift")?"window":"split":"tab"))},e}(),pw=function(){function e(e){this.submenu=null,this.disabled=!1,this.checked=null,this.section="",this.menu=e;var t=this.dom=createDiv("menu-item");this.iconEl=t.createDiv("menu-item-icon"),this.titleEl=t.createDiv("menu-item-title"),t.addEventListener("click",this.handleEvent.bind(this))}return e.prototype.setTitle=function(e){return"string"==typeof e?this.titleEl.setText(e):(this.titleEl.empty(),this.titleEl.appendChild(e)),this},e.prototype.setIcon=function(e){return e?gb(this.iconEl,e):this.iconEl.empty(),this},e.prototype.removeIcon=function(){return this.iconEl.detach(),this},e.prototype.setActive=function(e){return this.setChecked(e)},e.prototype.setChecked=function(e){e?this.checkIconEl||gb(this.checkIconEl=this.dom.createDiv("menu-item-icon mod-checked"),"lucide-check"):this.checkIconEl&&this.checkIconEl.detach();return this.checked=e,this.dom.toggleClass("mod-checked",e),this},e.prototype.setDisabled=function(e){return this.disabled=e,this.dom.toggleClass("is-disabled",e),this},e.prototype.setWarning=function(e){return this.dom.toggleClass("is-warning",e),this},e.prototype.setIsLabel=function(e){return this.dom.toggleClass("is-label",e),this},e.prototype.setSubmenu=function(){this.submenu||(this.dom.addClass("has-submenu"),this.submenu=new fw,gb(this.dom.createDiv("menu-item-icon mod-submenu"),"lucide-chevron-right"),this.onClick((function(e){return e.preventDefault()})));return this.submenu},e.prototype.onClick=function(e){return this.callback=e,this},e.prototype.handleEvent=function(e){if(this.disabled)e.preventDefault();else{var t=this.callback;t&&t(e)}},e.prototype.setSection=function(e){return this.section=e,this.dom.setAttr("data-section",e),this},e.create=function(t){return new e(t)},e}(),dw=function(e){this.menu=e,this.dom=createDiv("menu-separator")},fw=function(e){function t(){var n=e.call(this)||this;n.unloading=!1,n.useNativeMenu=t.useNativeMenu,n.items=[],n.sections=[],n.submenuConfigs={},n.onMouseOver=function(e){for(var t=e.targetNode,i=n.items,r=0;r<i.length;r++){var o=i[r];if(o.dom===t||o.dom.contains(t)){n.select(r);var a=n.parentMenu;if(a)for(var s=a.items,l=0;l<s.length;l++){var c=s[l];if(c instanceof pw&&c.submenu===n){a.selected!==l&&a.select(l);break}}return void(o instanceof pw&&n.openSubmenuSoon(o))}}},n.selected=-1,n.openSubmenuSoon=rt(n.openSubmenu.bind(n),250,!0),n.scope=new cw(hw.global.getRootScope());var i=n.dom=createDiv("menu"),r=n.bgEl=createDiv("suggestion-bg");if(r.style.opacity="0",r.addEventListener("mousedown",(function(e){return e.preventDefault()})),i.addEventListener("mousedown",(function(e){0===e.button&&e.preventDefault()})),Lt.isPhone){var o=function(e){e.registerCallback({move:function(t,n){e.evt.stopPropagation(),i.style.overscrollBehavior="none";var o=i.offsetHeight,a=Math.clamp((n-e.startY)/o,0,1);i.style.transform="translateY(".concat(a*o,"px)"),r.style.opacity=String(1-a)},cancel:function(){i.style.overscrollBehavior="",i.style.transform="",r.style.opacity=""},finish:function(t,o,a){i.style.overscrollBehavior="";var s,l=i.offsetHeight,c=Math.clamp((o-e.startY)/l,0,1);a<l/2?(Ie(i,new Te({duration:200*(s=c)}).addProp("transform",null,"translateY(0)","")),Ie(r,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"1",""))):(Ie(i,new Te({duration:100*(s=1-c),fn:"ease-out"}).addProp("transform",null,"translateY(".concat(l,"px)"),""),(function(){n.dom.detach(),n.hide()})),Ie(r,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"0")))}})};Qy(i,(function(e){1===e.points&&"y"===e.direction&&(i.scrollTop>0||o(e))})),Qy(r,(function(e){1===e.points&&"y"===e.direction&&o(e)}))}return r.onClickEvent((function(){return n.hide()})),n.scope.register([],"ArrowUp",n.onArrowUp.bind(n)),n.scope.register([],"ArrowDown",n.onArrowDown.bind(n)),n.scope.register([],"ArrowLeft",n.onArrowLeft.bind(n)),n.scope.register([],"ArrowRight",n.onArrowRight.bind(n)),n.scope.register([],"Enter",n.onEnter.bind(n)),n.scope.register([],"Escape",n.hide.bind(n)),Lt.isDesktop&&i.addEventListener("mouseover",n.onMouseOver),n}return f(t,e),t.prototype.onload=function(){var e=this;this.registerDomEvent(window,"click",this.onMenuClick.bind(this)),this.registerDomEvent(window,"mousedown",(function(t){var n=t.targetNode;n&&!e.isInside(n)&&e.hide()})),this.registerDomEvent(window,"contextmenu",this.hide.bind(this)),hw.global.pushScope(this.scope)},t.prototype.onunload=function(){hw.global.popScope(this.scope)},t.prototype.onMenuClick=function(e){var t=e.targetNode;t&&t.instanceOf(Element)&&(t.matchParent(".menu-item.has-submenu")||t.matchParent(".menu-item.is-label"))||this.hide()},t.prototype.isInside=function(e){var t;if(this.dom.contains(e)||(null===(t=this.parentEl)||void 0===t?void 0:t.contains(e)))return!0;for(var n=this.parentMenu;n;){if(n.dom.contains(e))return!0;n=n.parentMenu}for(var i=this.currentSubmenu;i;){if(i.dom.contains(e))return!0;i=i.currentSubmenu}return!1},t.prototype.sort=function(){for(var e=this,t=e.items,n=e.sections,i=e.submenuConfigs,r={"":[]},o=0,a=t;o<a.length;o++){var s="";(b=a[o])instanceof pw&&(s=b.section),""===s||n.contains(s)||n.push(s);var l=r[s];r.hasOwnProperty(s)||(l=r[s]=[]),l.push(b)}t=[];for(var c=null,u=null,h="",p=0,d=n;p<d.length;p++){s=d[p];if(r.hasOwnProperty(s)){var f=s.split(".")[0];c!==f&&(null!==c&&t.push(new dw(this)),c=f);var g=r[s];if(g.length>1&&!Lt.isMobile){var m="";for(var v in i)if(i.hasOwnProperty(v)&&(s===v||s.substring(v.length+1)===v+".")){m=v;break}if(m){if(u&&m===h)u.items.push(new dw(this));else{var y=i[m],b=pw.create(this);t.push(b),b.setTitle(y.title),y.icon&&b.setIcon(y.icon),y.disabled&&b.setDisabled(!0),u=b.setSubmenu(),h=m}for(var w=0,k=r[s];w<k.length;w++){b=k[w];u.items.push(b)}continue}}for(var C=0,E=g;C<E.length;C++){b=E[C];t.push(b)}}}if(!n.contains(""))for(var x=0,S=r[""];x<S.length;x++){b=S[x];t.push(b)}for(;t.last()instanceof dw;)t.pop();this.items=t,this.dom.setChildrenInPlace(t.map((function(e){return e.dom})))},t.prototype.addSections=function(e){var t=this.sections;e=e.filter((function(e){return!t.contains(e)}));var n=t.indexOf("");return-1===n&&(n=t.length),t.splice.apply(t,w([n,0],e,!1)),this},t.prototype.setSectionSubmenu=function(e,t){return this.submenuConfigs[e]=t,this},t.prototype.setNoIcon=function(){return this.dom.addClass("mod-no-icon"),this},t.prototype.setUseNativeMenu=function(e){return this.useNativeMenu=e,this},t.prototype.addItem=function(e){if(this._loaded)return this;var t=pw.create(this);return this.items.push(t),e(t),this},t.prototype.addSeparator=function(){if(this._loaded)return this;var e=new dw(this);return this.items.push(e),this},t.prototype.setParentElement=function(e){return this.parentEl&&this.parentEl.removeClass("has-active-menu"),this.parentEl=e,this},t.prototype.showAtMouseEvent=function(e){return this.showAtPosition({x:e.clientX,y:e.clientY},e.doc)},t.prototype.showAtPosition=function(e,t){var n=this;if(this.unload(),0===this.items.length)return this;var i=(t=t||activeDocument).body,r=e.x,o=e.y,a=Qb(i.win);if(a){var s=a.scale;r=r*s+a.x,o=o*s+a.y,i=(t=(w=a.win).document).body}if(this.parentEl&&this.parentEl.addClass("has-active-menu"),this.sort(),!Lt.isDesktopApp||!this.useNativeMenu){eb(this),setTimeout(this.load.bind(this),0);var l=this.dom,c=this.bgEl;if(i.appendChild(l),i.appendChild(c),Lt.isPhone){var u=l.offsetHeight-1;Ie(l,new Te({duration:150}).addProp("transform","translateY(".concat(u,"px)"),"")),Ie(c,new Te({duration:150}).addProp("opacity","0","0.85")),l.style.left="0",l.style.top="0"}else{var h=l.offsetWidth,p=l.offsetHeight,d=i.clientWidth,f=i.clientHeight,g=parseFloat(getComputedStyle(i).paddingTop);g&&!isNaN(g)||(g=0);var m=r,v=m;e.width?e.overlap?(m=r,v=r+e.width):(m=r+e.width,v=r):(m=r+2,v=r-2);var y=l.style,b=v-h>=0;!(m+h<=d)||e.left&&b?y.left=Math.max(0,v-h)+"px":y.left=m+"px",y.top=o+p>f?Math.max(g,o-p+2)+"px":o+2+"px",Ob(l),c.style.opacity="0.85"}return this}var w=t.win,k=function(e){for(var t=[],n=function(e){if(e instanceof pw){var n={label:e.titleEl.getText().replace(/\B&\B/,"&&"),enabled:!e.disabled,checked:e.checked,type:isBoolean(e.checked)?"checkbox":void 0,click:function(t,n,i){return e.handleEvent(new MouseEvent("click",i))}};e.submenu&&(n.submenu=k(e.submenu.items)),t.push(n)}else e instanceof dw&&t.push({type:"separator"})},i=0,r=e;i<r.length;i++){n(r[i])}return t},C=k(this.items),E=w.electron.remote.Menu.buildFromTemplate(C);E.on("menu-will-close",(function(){return n.hide()}));var x=w.electron.remote.getCurrentWebContents(),S=Math.pow(1.2,x.getZoomLevel());E.popup({x:Math.round(r*S),y:Math.round(o*S),window:w.electron.remote.getCurrentWindow()})},t.prototype.hide=function(){var e=this;if(this.unload(),this.unloading)return this;this.unloading=!0,tb(this),this.unselect(),this.closeSubmenu(),this.parentMenu&&this.parentMenu.currentSubmenu===this&&(this.parentMenu.currentSubmenu=null),this.parentMenu=null,this.parentEl&&(this.parentEl.removeClass("has-active-menu"),this.parentEl=null);var t=this,n=t.dom,i=t.bgEl,r=t.hideCallback;if(Lt.isPhone&&n.isShown()){var o=n.offsetHeight-1;Ie(n,new Te({duration:150}).addProp("transform","","translateY(".concat(o,"px)")),(function(){n.detach(),r&&r(),e.unloading=!1})),Ie(i,new Te({duration:150}).addProp("opacity",null,"0"),(function(){i.detach()}))}else n.detach(),i.detach(),r&&r(),this.unloading=!1;return this},t.prototype.close=function(){this.hide()},t.prototype.onHide=function(e){this.hideCallback=e},t.prototype.onArrowUp=function(e){e.preventDefault();for(var t=this.items,n=this.selected-1,i=0;i<t.length;){var r=t[n];if(r&&r instanceof pw&&!r.disabled)return this.select(n),!1;--n<0&&(n=t.length-1),i++}return!1},t.prototype.onArrowDown=function(e){e.preventDefault();for(var t=this.items,n=this.selected+1,i=0;i<t.length;){var r=t[n];if(r&&r instanceof pw&&!r.disabled)return this.select(n),!1;++n>=t.length&&(n=0),i++}return!1},t.prototype.onArrowLeft=function(e){return e.preventDefault(),this.parentMenu&&this.hide(),!1},t.prototype.onArrowRight=function(e){e.preventDefault();var t=this.items[this.selected];return t instanceof pw&&t.submenu&&(this.openSubmenu(t),this.currentSubmenu&&this.currentSubmenu.select(0)),!1},t.prototype.onEnter=function(e){var t=this.items[this.selected];return t&&t instanceof pw&&(t.handleEvent(e),this.hide()),!1},t.prototype.unselect=function(){var e=this.items[this.selected];e&&e.dom.removeClass("selected"),this.selected=null,this.closeSubmenu()},t.prototype.select=function(e){var t=this.items,n=this.selected;if(0!==t.length){e<0&&(e=t.length-1),e>=t.length&&(e=0);var i=t[n];i&&i.dom.removeClass("selected"),this.selected=e;var r=t[e];r.dom.addClass("selected"),r.dom.scrollIntoView({block:"nearest"})}},t.prototype.openSubmenu=function(e){this.openSubmenuSoon.cancel();var t=e.submenu,n=e.dom,i=this.currentSubmenu;if(i!==t&&!e.disabled&&(i&&this.closeSubmenu(),t)){t.parentMenu=this,this.currentSubmenu=t;var r=getComputedStyle(this.dom),o=parseFloat(r.paddingTop)+parseFloat(r.borderTopWidth),a=parseFloat(r.paddingLeft)+parseFloat(r.borderLeftWidth)+2,s=parseFloat(r.paddingRight)+parseFloat(r.borderRightWidth)+2,l=n.getBoundingClientRect();t.showAtPosition({x:l.x-a,y:l.y-o,width:l.width+a+s},n.doc)}},t.prototype.closeSubmenu=function(){this.openSubmenuSoon.cancel();var e=this.currentSubmenu;e&&(e.hide(),e.parentMenu=null,this.currentSubmenu=null)},t.useNativeMenu=!1,t}(nb);function gw(e,t){return{x:e,y:t}}function mw(e){return gw(e.clientX,e.clientY)}function vw(e,t,n,i){return{x:e,y:t,width:n,height:i}}function yw(e,t){return vw(e.x,e.y,t.width,t.height)}function bw(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function ww(e,t,n){if(void 0===n&&(n=5),e.isPrimary){var i=null;if(0!==n||(i=t())){var r=e.view,o=mw(e),a=function(n){if(n.pointerId===e.pointerId){if(!i){if(bw(o,mw(n))<5)return;if(!(i=t()))return void d()}i&&i.move&&i.move(n)}},s=function(t){t.button===e.button&&t.pointerId===e.pointerId&&(d(),i&&i.end&&i.end(t))},l=function(t){t.button===e.button&&t.pointerId===e.pointerId&&(d(),i&&i.cancel&&i.cancel())},c=function(e){d(),i&&i.end&&i.end(e)},u=function(){d(),i&&i.cancel&&i.cancel()},h=function(e){"Escape"===e.key&&(d(),i&&i.cancel&&i.cancel()),i&&i.keydown&&i.keydown(e)},p=function(e){i&&i.keyup&&i.keyup(e)},d=function(){r.removeEventListener("pointermove",a),r.removeEventListener("pointerup",s),r.removeEventListener("pointercancel",l),r.removeEventListener("dragstart",c),r.removeEventListener("drop",c),r.removeEventListener("contextmenu",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",p),i&&i.cleanup&&i.cleanup()};return r.addEventListener("pointermove",a),r.addEventListener("pointerup",s),r.addEventListener("pointercancel",l),r.addEventListener("dragstart",c),r.addEventListener("drop",c),r.addEventListener("contextmenu",u),window.addEventListener("keydown",h),window.addEventListener("keyup",p),d}}}function kw(e,t){var n=e.win,i=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},r=n.setTimeout((function(){e.removeEventListener(t,i,{capture:!0}),n.clearTimeout(r)}),0);e.addEventListener(t,i,{capture:!0})}function Cw(e,t){e.setData("text/plain",t)}function Ew(e,t){e.setData("text/plain",t),e.setData("text/uri-list",t)}function xw(e){for(var t=0;t<e.items.length;t++){if("file"===e.items[t].kind)return!0}return!(!Lt.isIosApp||-1===e.types.indexOf("Files"))}function Sw(e,t,n){for(var i=[],r=0,o=Array.from(e.items);r<o.length;r++){var a,s=o[r];if("file"===s.kind)if(a=s.getAsFile()){var l=a.path||"",c=a.name,u=le(c),h=ae(c),p=null;if(!l){var d=a.type;"image/png"===d?(u="png",h="Pasted image"):"image/jpeg"===d&&(u="jpg",h="Pasted image")}n&&(p=l?Ft(l):lt(a)),i.push({name:h,filepath:l,extension:u,data:p})}}"clipboard"!==t||0!==i.length||!Lt.isDesktopApp||e.getData("text/plain")||hw.global.hasModifier("Shift")||(a=function(){var e=It("electron");if(!e)return null;var t=e.remote.clipboard,n=t.readImage();if(n&&!n.isEmpty()){var i=R(n.toPNG());return{name:"Pasted image",extension:"png",data:Promise.resolve(i)}}var r="";if("Windows"===me?r=t.readBuffer("FileNameW").toString("ucs2").replace("\0",""):"MacOS"===me&&(r=t.read("public.file-url"))&&(r=r.replace("file://",""),r=decodeURI(r)),!r)return null;var o=ie(he(r)),a=le(o);return{filepath:r,name:ae(o),extension:a,data:Ft(r)}}())&&i.push(a);return i}var Mw=n(914),Tw=n.n(Mw),Dw=n(2854),Aw=n.n(Dw),Lw=n(5572),Pw=Tw(),Iw=Lw.Parser,Ow=function(){function e(){this.transformers=[]}return e.prototype.addTransformer=function(e){this.transformers.push(e)},e.prototype.removeTransformer=function(e){for(var t=this.transformers,n=0;n<t.length;)t[n]===e?t.splice(n,1):n++},e}();function Fw(e,t,n,i,r){i.locator=r;var o=e.prototype.inlineTokenizers,a=e.prototype.inlineMethods;o[t]=i,a.splice(a.indexOf(n),0,t)}function Bw(e,t,n,i,r){i.locator=r;var o=e.prototype.blockTokenizers,a=e.prototype.blockMethods;o[t]=i,a.splice(a.indexOf(n),0,t)}function Nw(e,t,n){for(var i=0;i<e.length&&e[i][0]!==t;i++);e.splice(i+1,0,[n])}var Rw=Aw();function Hw(e,t){var n=t.position.end,i=t.position.end,r=t.children;return r.length>0&&(n=r[0].position.start,i=r[r.length-1].position.end),e.substring(n.offset,i.offset).trim()}function Vw(e){if(!e)return"";var t=e.indexOf("|");return-1!==t&&("\\"===e.charAt(t-1)&&t--,e=e.slice(0,t)),e=e.trim()}function zw(e){return!(!e.startsWith("./")&&!e.startsWith("../"))||-1===e.indexOf(":")}function qw(e){try{return new URL(e).toString()}catch(e){console.log(e)}return encodeURI(decodeURI(e))}function Uw(e){if((e=e.trim()).startsWith("<")){var t=e.indexOf(">");if(-1!==t)return e.substring(1,t)}var n=/\s/.exec(e);return n?e.substring(0,n.index):e}var Ww=/\u00A0/g;function _w(e){return e.replace(Ww," ")}function jw(e){return e.replace(/[\\\x00\x08\x0B\x0C\x0E-\x1F ]/g,(function(e){return encodeURIComponent(e)}))}function Gw(e){var t=e.match(/^#{1,6} (.*)/m);return null!==t?t[1]:null}function Kw(e){return e.split("#").filter((function(e){return!!e})).join(" > ").trim()}function Yw(e){var t="",n=e.indexOf("|"),i=n>0;return i?(t=e.substr(n+1).trim(),e=e.substr(0,n).trim()):t=Kw(e=e.trim()),e.endsWith("\\")&&(e=e.substr(0,e.length-1)),{href:e=_w(e).trim(),title:t,isAlias:i}}var Xw=n(773),$w=n.n(Xw),Zw=n(6630),Qw=n.n(Zw),Jw=n(939),ek=n.n(Jw);const tk=Symbol.for("yaml.alias"),nk=Symbol.for("yaml.document"),ik=Symbol.for("yaml.map"),rk=Symbol.for("yaml.pair"),ok=Symbol.for("yaml.scalar"),ak=Symbol.for("yaml.seq"),sk=Symbol.for("yaml.node.type"),lk=e=>!!e&&"object"==typeof e&&e[sk]===tk,ck=e=>!!e&&"object"==typeof e&&e[sk]===nk,uk=e=>!!e&&"object"==typeof e&&e[sk]===ik,hk=e=>!!e&&"object"==typeof e&&e[sk]===rk,pk=e=>!!e&&"object"==typeof e&&e[sk]===ok,dk=e=>!!e&&"object"==typeof e&&e[sk]===ak;function fk(e){if(e&&"object"==typeof e)switch(e[sk]){case ik:case ak:return!0}return!1}function gk(e){if(e&&"object"==typeof e)switch(e[sk]){case tk:case ik:case ok:case ak:return!0}return!1}class mk{constructor(e){Object.defineProperty(this,sk,{value:e})}}const vk=Symbol("break visit"),yk=Symbol("skip children"),bk=Symbol("remove node");function wk(e,t){if(ck(e)){kk(null,e.contents,t,Object.freeze([e]))===bk&&(e.contents=null)}else kk(null,e,t,Object.freeze([]))}function kk(e,t,n,i){let r;if("function"==typeof n?r=n(e,t,i):uk(t)?n.Map&&(r=n.Map(e,t,i)):dk(t)?n.Seq&&(r=n.Seq(e,t,i)):hk(t)?n.Pair&&(r=n.Pair(e,t,i)):pk(t)?n.Scalar&&(r=n.Scalar(e,t,i)):lk(t)&&n.Alias&&(r=n.Alias(e,t,i)),gk(r)||hk(r)){const t=i[i.length-1];if(fk(t))t.items[e]=r;else if(hk(t))"key"===e?t.key=r:t.value=r;else{if(!ck(t)){const e=lk(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}t.contents=r}return kk(e,r,n,i)}if("symbol"!=typeof r)if(fk(t)){i=Object.freeze(i.concat(t));for(let e=0;e<t.items.length;++e){const r=kk(e,t.items[e],n,i);if("number"==typeof r)e=r-1;else{if(r===vk)return vk;r===bk&&(t.items.splice(e,1),e-=1)}}}else if(hk(t)){i=Object.freeze(i.concat(t));const e=kk("key",t.key,n,i);if(e===vk)return vk;e===bk&&(t.key=null);const r=kk("value",t.value,n,i);if(r===vk)return vk;r===bk&&(t.value=null)}return r}wk.BREAK=vk,wk.SKIP=yk,wk.REMOVE=bk;const Ck={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Ek{constructor(e,t){this.marker=null,this.yaml=Object.assign({},Ek.defaultYaml,e),this.tags=Object.assign({},Ek.defaultTags,t)}atDocument(){const e=new Ek(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ek.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ek.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Ek.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ek.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,i]=n;return this.tags[e]=i,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,!0),!1)}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,i]=e.match(/^(.*!)([^!]*)$/);i||t(`The ${e} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(i):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>Ck[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(e&&n.length>0&&gk(e.contents)){const t={};wk(e.contents,((e,n)=>{gk(n)&&n.tag&&(t[n.tag]=!0)})),i=Object.keys(t)}else i=[];for(const[r,o]of n)"!!"===r&&"tag:yaml.org,2002:"===o||e&&!i.some((e=>e.startsWith(o)))||t.push(`%TAG ${r} ${o}`);return t.join("\n")}}function xk(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>xk(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n)return e.toJSON(t);const i=n.anchors&&n.anchors.get(e);i&&(n.onCreate=e=>{i.res=e,delete n.onCreate});const r=e.toJSON(t,n);return i&&n.onCreate&&n.onCreate(r),r}return n&&n.keep||"bigint"!=typeof e?e:Number(e)}Ek.defaultYaml={explicit:!1,version:"1.2"},Ek.defaultTags={"!!":"tag:yaml.org,2002:"};class Sk extends mk{constructor(e){super(tk),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}toJSON(e,t){if(!t)return xk(this.source,"string"==typeof e?e:null,t);const{anchors:n,maxAliasCount:i}=t,r=n&&n.get(this.source);if(!r||void 0===r.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(i>=0&&(r.count+=1,0===r.aliasCount&&(r.aliasCount=Mk(this.source,n)),r.count*r.aliasCount>i)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return r.res}toString({anchors:e,doc:t,implicitKey:n,inStringifyKey:i},r,o){let a=Object.keys(e).find((t=>e[t]===this.source));if(!a&&i&&(a=t.anchors.getName(this.source)||t.anchors.newName()),a)return`*${a}${n?" ":""}`;const s=t.anchors.getName(this.source)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${s} [${this.range}]`)}}function Mk(e,t){if(lk(e)){const n=t&&t.get(e.source);return n?n.count*n.aliasCount:0}if(fk(e)){let n=0;for(const i of e.items){const e=Mk(i,t);e>n&&(n=e)}return n}if(hk(e)){const n=Mk(e.key,t),i=Mk(e.value,t);return Math.max(n,i)}return 1}const Tk=e=>!e||"function"!=typeof e&&"object"!=typeof e;class Dk extends mk{constructor(e){super(ok),this.value=e}toJSON(e,t){return t&&t.keep?this.value:xk(this.value,e,t)}toString(){return String(this.value)}}Dk.BLOCK_FOLDED="BLOCK_FOLDED",Dk.BLOCK_LITERAL="BLOCK_LITERAL",Dk.PLAIN="PLAIN",Dk.QUOTE_DOUBLE="QUOTE_DOUBLE",Dk.QUOTE_SINGLE="QUOTE_SINGLE";function Ak(e,t,n){var i,r;if(gk(e))return e;if(hk(e)){const t=null===(r=(i=n.schema.map).createNode)||void 0===r?void 0:r.call(i,n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{onAlias:o,onTagObj:a,prevObjects:s}=n,{map:l,seq:c,tags:u}=n.schema;t&&t.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let h=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),i=e.find((e=>!e.format))||e[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return n.find((t=>t.identify&&t.identify(e)&&!t.format))}(e,t,u);if(!h){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e)return new Dk(e);h=e instanceof Map?l:Symbol.iterator in Object(e)?c:l}a&&(a(h),delete n.onTagObj);const p={value:void 0,node:void 0};if(e&&"object"==typeof e){const t=s.get(e);if(t)return o(t);p.value=e,s.set(e,p)}const d=(null==h?void 0:h.createNode)?h.createNode(n.schema,e,n):new Dk(e);return t&&(d.tag=t),p.node=d,d}function Lk(e,t,n){return n?n.includes("\n")?`${e}\n`+n.replace(/^/gm,`${t||""}#`):e.endsWith(" ")?`${e}#${n}`:`${e} #${n}`:e}const Pk="flow",Ik="block",Ok="quoted";function Fk(e,t,n="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!r||r<0)return e;const l=Math.max(1+o,1+r-t.length);if(e.length<=l)return e;const c=[],u={};let h,p,d=r-t.length;"number"==typeof i&&(i>r-Math.max(2,o)?c.push(0):d=r-i);let f,g=!1,m=-1,v=-1,y=-1;for(n===Ik&&(m=Bk(e,m),-1!==m&&(d=m+l));f=e[m+=1];){if(n===Ok&&"\\"===f){switch(v=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if("\n"===f)n===Ik&&(m=Bk(e,m)),d=m+l,h=void 0;else{if(" "===f&&p&&" "!==p&&"\n"!==p&&"\t"!==p){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(h=m)}if(m>=d)if(h)c.push(h),d=h+l,h=void 0;else if(n===Ok){for(;" "===p||"\t"===p;)p=f,f=e[m+=1],g=!0;const t=m>y+1?m-2:v-1;if(u[t])return e;c.push(t),u[t]=!0,d=t+l,h=void 0}else g=!0}p=f}if(g&&s&&s(),0===c.length)return e;a&&a();let b=e.slice(0,c[0]);for(let i=0;i<c.length;++i){const r=c[i],o=c[i+1]||e.length;0===r?b=`\n${t}${e.slice(0,o)}`:(n===Ok&&u[r]&&(b+=`${e[r]}\\`),b+=`\n${t}${e.slice(r+1,o)}`)}return b}function Bk(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const Nk=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Rk=e=>/^(%|---|\.\.\.)/m.test(e);function Hk(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:i}=t,r=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(Rk(e)?"  ":"");let a="",s=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(s,e)+"\\ ",e+=1,s=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(s,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,s=e+1}break;case"n":if(i||'"'===n[e+2]||n.length<r)e+=1;else{for(a+=n.slice(s,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=o," "===n[e+2]&&(a+="\\"),e+=1,s=e+1}break;default:e+=1}return a=s?a+n.slice(s):n,i?a:Fk(a,o,Ok,Nk(t))}function Vk(e,t){if(t.implicitKey){if(/\n/.test(e))return Hk(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return Hk(e,t);const n=t.indent||(Rk(e)?"  ":""),i="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?i:Fk(i,n,Pk,Nk(t))}function zk({comment:e,type:t,value:n},i,r,o){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Hk(n,i);const a=i.indent||(i.forceBlockIndent||Rk(n)?"  ":""),s=a?"2":"1",l=t!==Dk.BLOCK_FOLDED&&(t===Dk.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const i=t-n,r=e.length;if(r<=i)return!1;for(let t=0,n=0;t<r;++t)if("\n"===e[t]){if(t-n>i)return!0;if(n=t+1,r-n<=i)return!1}return!0}(n,i.options.lineWidth,a.length));let c=l?"|":">";if(!n)return c+"\n";let u="",h="";if(n=n.replace(/[\n\t ]*$/,(e=>{const t=e.indexOf("\n");return-1===t?c+="-":n!==e&&t===e.length-1||(c+="+",o&&o()),h=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(e=>{-1!==e.indexOf(" ")&&(c+=s);const t=e.match(/ +$/);return t?(u=e.slice(0,-t[0].length),t[0]):(u=e,"")})),h&&(h=h.replace(/\n+(?!\n|$)/g,`$&${a}`)),u&&(u=u.replace(/\n+/g,`$&${a}`)),e&&(c+=" #"+e.replace(/ ?[\r\n]+/g," "),r&&r()),!n)return`${c}${s}\n${a}${h}`;if(l)return n=n.replace(/\n+/g,`$&${a}`),`${c}\n${a}${u}${n}${h}`;n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);const p=Fk(`${u}${n}${h}`,a,Ik,Nk(i));return`${c}\n${a}${p}`}function qk(e,t,n,i){const{implicitKey:r,inFlow:o}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:s}=e;s!==Dk.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=Dk.QUOTE_DOUBLE);const l=e=>{switch(e){case Dk.BLOCK_FOLDED:case Dk.BLOCK_LITERAL:return r||o?Hk(a.value,t):zk(a,t,n,i);case Dk.QUOTE_DOUBLE:return Hk(a.value,t);case Dk.QUOTE_SINGLE:return Vk(a.value,t);case Dk.PLAIN:return function(e,t,n,i){var r;const{comment:o,type:a,value:s}=e,{actualString:l,implicitKey:c,indent:u,inFlow:h}=t;if(c&&/[\n[\]{},]/.test(s)||h&&/[[\]{},]/.test(s))return Hk(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s)){const r=-1!==s.indexOf('"'),o=-1!==s.indexOf("'");let a;return a=r&&!o?Vk:o&&!r?Hk:t.options.singleQuote?Vk:Hk,c||h||-1===s.indexOf("\n")?a(s,t):zk(e,t,n,i)}if(!c&&!h&&a!==Dk.PLAIN&&-1!==s.indexOf("\n"))return zk(e,t,n,i);if(""===u&&Rk(s))return t.forceBlockIndent=!0,zk(e,t,n,i);const p=s.replace(/\n+/g,`$&\n${u}`);if(l)for(const e of t.doc.schema.tags)if(e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null===(r=e.test)||void 0===r?void 0:r.test(p)))return Hk(s,t);const d=c?p:Fk(p,u,Pk,Nk(t));return!o||h||-1===d.indexOf("\n")&&-1===o.indexOf("\n")?d:(n&&n(),function(e,t,n){return n?`#${n.replace(/[\s\S]^/gm,`$&${t}#`)}\n${t}${e}`:e}(d,u,o))}(a,t,n,i);default:return null}};let c=l(s);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,i=r&&e||n;if(c=l(i),null===c)throw new Error(`Unsupported default string type ${i}`)}return c}const Uk=(e,t)=>({anchors:Object.create(null),doc:e,indent:"",indentStep:"number"==typeof t.indent?" ".repeat(t.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true"},t)});function Wk(e,t,n,i){if(hk(e))return e.toString(t,n,i);if(lk(e))return e.toString(t);let r;const o=gk(e)?e:t.doc.createNode(e,{onTagObj:e=>r=e});r||(r=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))||n[0]}let n,i;if(pk(t)){i=t.value;const r=e.filter((e=>e.identify&&e.identify(i)));n=r.find((e=>e.format===t.format))||r.find((e=>!e.format))}else i=t,n=e.find((e=>e.nodeClass&&i instanceof e.nodeClass));if(!n){const e=i&&i.constructor?i.constructor.name:typeof i;throw new Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,o));const a=function(e,t,{anchors:n,doc:i}){const r=[],o=i.anchors.getName(e);return o&&(n[o]=e,r.push(`&${o}`)),e.tag?r.push(i.directives.tagString(e.tag)):t.default||r.push(i.directives.tagString(t.tag)),r.join(" ")}(o,r,t);a.length>0&&(t.indentAtStart=(t.indentAtStart||0)+a.length+1);const s="function"==typeof r.stringify?r.stringify(o,t,n,i):pk(o)?qk(o,t,n,i):o.toString(t,n,i);return a?pk(o)||"{"===s[0]||"["===s[0]?`${a} ${s}`:`${a}\n${t.indent}${s}`:s}function _k(e,t,n){let i=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=i,i=e}else{const e={};Object.defineProperty(e,"symbol"==typeof n?n:String(n),{value:i,writable:!0,enumerable:!0,configurable:!0}),i=e}}return Ak(i,void 0,{onAlias(){throw new Error("Repeated objects are not supported here")},prevObjects:new Map,schema:e})}const jk=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class Gk extends mk{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}addIn(e,t){if(jk(e))this.add(t);else{const[n,...i]=e,r=this.get(n,!0);if(fk(r))r.addIn(i,t);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`);this.set(n,_k(this.schema,i,t))}}}deleteIn([e,...t]){if(0===t.length)return this.delete(e);const n=this.get(e,!0);if(fk(n))return n.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],n){const i=this.get(e,!0);return 0===t.length?!n&&pk(i)?i.value:i:fk(i)?i.getIn(t,n):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!t||gk(t))return!1;const n=t.value;return null==n||e&&pk(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([e,...t]){if(0===t.length)return this.has(e);const n=this.get(e,!0);return!!fk(n)&&n.hasIn(t)}setIn([e,...t],n){if(0===t.length)this.set(e,n);else{const i=this.get(e,!0);if(fk(i))i.setIn(t,n);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`);this.set(e,_k(this.schema,t,n))}}}_toString(e,{blockItem:t,flowChars:n,itemIndent:i},r,o){const{indent:a,indentStep:s}=e,l=this.flow||e.inFlow;l&&(i+=s),e=Object.assign({},e,{indent:i,inFlow:l,type:null});let c=!1,u=!1;const h=this.items.reduce(((t,n,r)=>{let o=null;if(gk(n)||hk(n)){if(!c&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore)for(const e of n.commentBefore.match(/^.*$/gm))t.push({type:"comment",str:`#${e}`});n.comment&&(o=n.comment);const e=n;l&&(!c&&n.spaceBefore||n.commentBefore||n.comment||e.key&&(e.key.commentBefore||e.key.comment)||e.value&&(e.value.commentBefore||e.value.comment))&&(u=!0)}c=!1;let a=Wk(n,e,(()=>o=null),(()=>c=!0));return l&&!u&&a.includes("\n")&&(u=!0),l&&r<this.items.length-1&&(a+=","),a=Lk(a,i,o),c&&(o||l)&&(c=!1),t.push({type:"item",str:a}),t}),[]);let p;if(0===h.length)p=n.start+n.end;else if(l){const{start:e,end:t}=n,i=h.map((e=>e.str));if(u||i.reduce(((e,t)=>e+t.length+2),2)>Gk.maxFlowStringSingleLineLength){p=e;for(const e of i)p+=e?`\n${s}${a}${e}`:"\n";p+=`\n${a}${t}`}else p=`${e} ${i.join(" ")} ${t}`}else{const e=h.map(t);p=e.shift()||"";for(const t of e)p+=t?`\n${a}${t}`:"\n"}return this.comment?(p+="\n"+this.comment.replace(/^/gm,`${a}#`),r&&r()):c&&o&&o(),p}}function Kk(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function Yk(e,t,n){const i=Ak(e,void 0,n),r=Ak(t,void 0,n);return new $k(i,r)}Gk.maxFlowStringSingleLineLength=60;function Xk(e,t,n){if(!lk(n)||!uk(n.source))throw new Error("Merge sources must be map aliases");const i=n.source.toJSON(null,e,Map);for(const[e,n]of i)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}class $k extends mk{constructor(e,t=null){super(rk),this.key=e,this.value=t}get commentBefore(){return gk(this.key)?this.key.commentBefore:void 0}set commentBefore(e){if(null==this.key&&(this.key=new Dk(null)),!gk(this.key)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}get spaceBefore(){return gk(this.key)?this.key.spaceBefore:void 0}set spaceBefore(e){if(null==this.key&&(this.key=new Dk(null)),!gk(this.key)){throw new Error("Pair.spaceBefore is an alias for Pair.key.spaceBefore. To set it, the key must be a Node.")}this.key.spaceBefore=e}addToJSMap(e,t){if(e&&e.doc.schema.merge&&(e=>e===$k.MERGE_KEY||pk(e)&&e.value===$k.MERGE_KEY&&(!e.type||e.type===Dk.PLAIN))(this.key))if(dk(this.value))for(const n of this.value.items)Xk(e,t,n);else if(Array.isArray(this.value))for(const n of this.value)Xk(e,t,n);else Xk(e,t,this.value);else{const n=xk(this.key,"",e);if(t instanceof Map){const i=xk(this.value,n,e);t.set(n,i)}else if(t instanceof Set)t.add(n);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(gk(e)&&n&&n.doc){const t=Uk(n.doc,{});t.inFlow=!0,t.inStringifyKey=!0;const i=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(i);e.length>40&&(e=e.substring(0,36)+'..."'),Kk(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(t)}(this.key,n,e),r=xk(this.value,i,e);i in t?Object.defineProperty(t,i,{value:r,writable:!0,enumerable:!0,configurable:!0}):t[i]=r}}return t}toJSON(e,t){const n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}toString(e,t,n){if(!e||!e.doc)return JSON.stringify(this);const{allNullValues:i,doc:r,indent:o,indentStep:a,options:{indentSeq:s,simpleKeys:l}}=e;let{key:c,value:u}=this,h=gk(c)&&c.comment||null;if(l){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(fk(c)){throw new Error("With simple keys, collection cannot be used as a key value")}}let p=!l&&(!c||h&&null==u||fk(c)||(pk(c)?c.type===Dk.BLOCK_FOLDED||c.type===Dk.BLOCK_LITERAL:"object"==typeof c));e=Object.assign({},e,{allNullValues:!1,implicitKey:!p&&(l||!i),indent:o+a});let d=!1,f=Wk(c,e,(()=>h=null),(()=>d=!0));if(!p&&!e.inFlow&&f.length>1024){if(l)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(i&&(!l||e.inFlow)||null==u&&(p||e.inFlow))return f=Lk(f,e.indent,h),this.comment?(h&&!this.comment.includes("\n")?f+=`\n${e.indent||""}#${this.comment}`:f=Lk(f,e.indent,this.comment),t&&t()):d&&!h&&n&&n(),e.inFlow&&!p?f:`? ${f}`;f=p?`? ${Lk(f,e.indent,h)}\n${o}:`:Lk(`${f}:`,e.indent,h),this.comment&&(!h||p||this.comment.includes("\n")?f=Lk(f,e.indent,this.comment):f+=`\n${e.indent||""}#${this.comment}`,t&&t());let g="",m=null;if(gk(u)){if(u.spaceBefore&&(g="\n"),u.commentBefore){g+=`\n${u.commentBefore.replace(/^/gm,`${e.indent}#`)}`}m=u.comment}else u&&"object"==typeof u&&(u=r.createNode(u));e.implicitKey=!1,p||h||this.comment||!pk(u)||(e.indentAtStart=f.length+1),d=!1,s||!(a.length>=2)||e.inFlow||p||!dk(u)||u.flow||u.tag||r.anchors.getName(u)||(e.indent=e.indent.substr(2));const v=Wk(u,e,(()=>m=null),(()=>d=!0));let y=" ";if(g||h||this.comment)y=`${g}\n${e.indent}`;else if(!p&&fk(u)){("["===v[0]||"{"===v[0])&&!v.includes("\n")||(y=`\n${e.indent}`)}else"\n"===v[0]&&(y="");return d&&!m&&n&&n(),Lk(f+y+v,e.indent,m)}}$k.MERGE_KEY="<<";const Zk={anchorPrefix:"a",intAsBigInt:!1,keepUndefined:!1,logLevel:"warn",prettyErrors:!0,strict:!0,version:"1.2"};class Qk extends Gk{constructor(e){super(ak,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=Jk(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=Jk(e);if("number"!=typeof n)return;const i=this.items[n];return!t&&pk(i)?i.value:i}has(e){const t=Jk(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=Jk(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[n];pk(i)&&Tk(t)?i.value=t:this.items[n]=t}toJSON(e,t){const n=[];t&&t.onCreate&&t.onCreate(n);let i=0;for(const e of this.items)n.push(xk(e,String(i++),t));return n}toString(e,t,n){return e?super._toString(e,{blockItem:e=>"comment"===e.type?e.str:`- ${e.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  "},t,n):JSON.stringify(this)}}function Jk(e){let t=pk(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}class eC{constructor(e){this.map=Object.create(null),this.prefix=e}createAlias(e,t){return this.setAnchor(e,t),new Sk(e)}createMergePair(...e){const t=new Dk($k.MERGE_KEY),n=e.map((e=>{if(lk(e)){if(uk(e.source))return e}else if(uk(e))return this.createAlias(e);throw new Error("Merge sources must be Map nodes or their Aliases")}));if(1===n.length)return new $k(t,n[0]);const i=new Qk;return i.items=n,new $k(t,i)}getName(e){return Object.keys(this.map).find((t=>this.map[t]===e))}getNames(){return Object.keys(this.map)}getNode(e){return this.map[e]}newName(e){e||(e=this.prefix);const t=Object.keys(this.map);for(let n=1;;++n){const i=`${e}${n}`;if(!t.includes(i))return i}}setAnchor(e,t){const{map:n}=this;if(!e)return t?(delete n[t],t):null;if(!pk(e)&&!fk(e))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(t){if(/[\x00-\x19\s,[\]{}]/.test(t))throw new Error("Anchor names must not contain whitespace or control characters");const i=n[t];i&&i!==e&&(n[this.newName(t)]=i)}const i=Object.keys(n).find((t=>n[t]===e));if(i){if(!t||i===t)return i;delete n[i]}else t||(t=this.newName());return n[t]=e,t}}function tC({format:e,minFractionDigits:t,tag:n,value:i}){if("bigint"==typeof i)return String(i);const r="number"==typeof i?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let o=JSON.stringify(i);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}function nC(e,t){const n=pk(t)?t.value:t;for(const i of e)if(hk(i)){if(i.key===t||i.key===n)return i;if(pk(i.key)&&i.key.value===n)return i}}class iC extends Gk{constructor(e){super(ik,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=hk(e)?e:new $k(e&&"object"==typeof e&&"key"in e?e.key:e,e.value);const i=nC(this.items,n.key),r=this.schema&&this.schema.sortMapEntries;if(i){if(!t)throw new Error(`Key ${n.key} already set`);pk(i.value)&&Tk(n.value)?i.value.value=n.value:i.value=n.value}else if(r){const e=this.items.findIndex((e=>r(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=nC(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=nC(this.items,e),i=n&&n.value;return!t&&pk(i)?i.value:i}has(e){return!!nC(this.items,e)}set(e,t){this.add(new $k(e,t),!0)}toJSON(e,t,n){const i=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(i);for(const e of this.items)e.addToJSMap(t,i);return i}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!hk(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),super._toString(e,{blockItem:e=>e.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||""},t,n)}}const rC={collection:"map",createNode:function(e,t,n){const{keepUndefined:i,replacer:r}=n,o=new iC(e),a=(e,a)=>{if("function"==typeof r)a=r.call(t,e,a);else if(Array.isArray(r)&&!r.includes(e))return;(void 0!==a||i)&&o.items.push(Yk(e,a,n))};if(t instanceof Map)for(const[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o},default:!0,nodeClass:iC,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(uk(e)||t("Expected a mapping for this tag"),e)};const oC={collection:"seq",createNode:function(e,t,n){const{replacer:i}=n,r=new Qk(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof i){const n=t instanceof Set?o:String(e++);o=i.call(t,n,o)}r.items.push(Ak(o,void 0,n))}}return r},default:!0,nodeClass:Qk,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(dk(e)||t("Expected a sequence for this tag"),e)},aC=[rC,oC,{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,i)=>qk(e,t=Object.assign({actualString:!0},t),n,i)}],sC=e=>"bigint"==typeof e||Number.isInteger(e),lC=(e,t,n,{intAsBigInt:i})=>i?BigInt(e):parseInt(e.substring(t),n);function cC(e,t,n){const{value:i}=e;return sC(i)&&i>=0?n+i.toString(t):tC(e)}const uC={identify:e=>null==e,createNode:()=>new Dk(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Dk(null),stringify:({source:e},t)=>e&&uC.test.test(e)?e:t.options.nullStr},hC={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Dk("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&hC.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}},pC={identify:e=>sC(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>lC(e,2,8,n),stringify:e=>cC(e,8,"0o")},dC={identify:sC,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>lC(e,0,10,n),stringify:tC},fC={identify:e=>sC(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>lC(e,2,16,n),stringify:e=>cC(e,16,"0x")},gC={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:tC},mC={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify:({value:e})=>Number(e).toExponential()},vC={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Dk(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:tC},yC=aC.concat([uC,hC,pC,dC,fC,gC,mC,vC]);function bC(e){return"bigint"==typeof e||Number.isInteger(e)}const wC=({value:e})=>JSON.stringify(e),kC=[rC,oC].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:wC},{identify:e=>null==e,createNode:()=>new Dk(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:wC},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:wC},{identify:bC,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>bC(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:wC}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),CC={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},i,r,o){const a=n;let s;if("function"==typeof Buffer)s=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<a.length;++t)e+=String.fromCharCode(a[t]);s=btoa(e)}}if(t||(t=Dk.BLOCK_LITERAL),t!==Dk.QUOTE_DOUBLE){const e=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),n=Math.ceil(s.length/e),r=new Array(n);for(let t=0,i=0;t<n;++t,i+=e)r[t]=s.substr(i,e);s=r.join(t===Dk.BLOCK_LITERAL?"\n":" ")}return qk({comment:e,type:t,value:s},i,r,o)}};function EC(e,t){if(dk(e))for(let n=0;n<e.items.length;++n){let i=e.items[n];if(!hk(i)){if(uk(i)){i.items.length>1&&t("Each pair must have its own sequence indicator");const e=i.items[0]||new $k(null);i.commentBefore&&(e.commentBefore=e.commentBefore?`${i.commentBefore}\n${e.commentBefore}`:i.commentBefore),i.comment&&(e.comment=e.comment?`${i.comment}\n${e.comment}`:i.comment),i=e}e.items[n]=hk(i)?i:new $k(i)}}else t("Expected a sequence for this tag");return e}function xC(e,t,n){const{replacer:i}=n,r=new Qk(e);r.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,s;if("function"==typeof i&&(e=i.call(t,String(o++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);a=e[0],s=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);a=t[0],s=e[a]}else a=e;r.items.push(Yk(a,s,n))}return r}const SC={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:EC,createNode:xC};class MC extends Qk{constructor(){super(),this.add=iC.prototype.add.bind(this),this.delete=iC.prototype.delete.bind(this),this.get=iC.prototype.get.bind(this),this.has=iC.prototype.has.bind(this),this.set=iC.prototype.set.bind(this),this.tag=MC.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t&&t.onCreate&&t.onCreate(n);for(const e of this.items){let i,r;if(hk(e)?(i=xk(e.key,"",t),r=xk(e.value,i,t)):i=xk(e,"",t),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,r)}return n}}MC.tag="tag:yaml.org,2002:omap";const TC={collection:"seq",identify:e=>e instanceof Map,nodeClass:MC,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=EC(e,t),i=[];for(const{key:e}of n.items)pk(e)&&(i.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):i.push(e.value));return Object.assign(new MC,n)},createNode(e,t,n){const i=xC(e,t,n),r=new MC;return r.items=i.items,r}};class DC extends iC{constructor(e){super(e),this.tag=DC.tag}add(e){let t;t=hk(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new $k(e.key,null):new $k(e,null);nC(this.items,t.key)||this.items.push(t)}get(e,t){const n=nC(this.items,e);return!t&&hk(n)?pk(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=nC(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new $k(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}DC.tag="tag:yaml.org,2002:set";const AC={collection:"map",identify:e=>e instanceof Set,nodeClass:DC,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(uk(e)){if(e.hasAllNullValues(!0))return Object.assign(new DC,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:i}=n,r=new DC(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof i&&(e=i.call(t,e,e)),r.items.push(Yk(e,null,n));return r}};function LC(e,t){const n=e[0],i="-"===n||"+"===n?e.substring(1):e,r=e=>t?BigInt(e):Number(e),o=i.replace(/_/g,"").split(":").reduce(((e,t)=>e*r(60)+r(t)),r(0));return"-"===n?r(-1)*o:o}function PC(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return tC(e);let i="";t<0&&(i="-",t*=n(-1));const r=n(60),o=[t%r];return t<60?o.unshift(0):(t=(t-o[0])/r,o.unshift(t%r),t>=60&&(t=(t-o[0])/r,o.unshift(t))),i+o.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const IC={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>LC(e,n),stringify:PC},OC={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>LC(e,!1),stringify:PC},FC={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(FC.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,i,r,o,a,s]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,i-1,r,o||0,a||0,s||0,l);const u=t[8];if(u&&"Z"!==u){let e=LC(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},BC={identify:e=>null==e,createNode:()=>new Dk(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Dk(null),stringify:({source:e},t)=>e&&BC.test.test(e)?e:t.options.nullStr};function NC({value:e,source:t},n){return t&&(e?RC:HC).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const RC={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Dk(!0),stringify:NC},HC={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Dk(!1),stringify:NC},VC=e=>"bigint"==typeof e||Number.isInteger(e);function zC(e,t,n,{intAsBigInt:i}){const r=e[0];if("-"!==r&&"+"!==r||(t+=1),e=e.substring(t).replace(/_/g,""),i){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===r?BigInt(-1)*t:t}const o=parseInt(e,n);return"-"===r?-1*o:o}function qC(e,t,n){const{value:i}=e;if(VC(i)){const e=i.toString(t);return i<0?"-"+n+e.substr(1):n+e}return tC(e)}const UC=aC.concat([BC,RC,HC,{identify:VC,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>zC(e,2,2,n),stringify:e=>qC(e,2,"0b")},{identify:VC,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>zC(e,1,8,n),stringify:e=>qC(e,8,"0")},{identify:VC,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>zC(e,0,10,n),stringify:tC},{identify:VC,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>zC(e,2,16,n),stringify:e=>qC(e,16,"0x")},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:tC},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify:({value:e})=>Number(e).toExponential()},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Dk(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const i=e.substring(n+1).replace(/_/g,"");"0"===i[i.length-1]&&(t.minFractionDigits=i.length)}return t},stringify:tC}],CC,TC,SC,AC,IC,OC,FC),WC={core:yC,failsafe:aC,json:kC,yaml11:UC},_C={binary:CC,bool:hC,float:vC,floatExp:mC,floatNaN:gC,floatTime:OC,int:dC,intHex:fC,intOct:pC,intTime:IC,map:rC,null:uC,omap:TC,pairs:SC,seq:oC,set:AC,timestamp:FC};const jC=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0,GC={"tag:yaml.org,2002:binary":_C.binary,"tag:yaml.org,2002:omap":_C.omap,"tag:yaml.org,2002:pairs":_C.pairs,"tag:yaml.org,2002:set":_C.set,"tag:yaml.org,2002:timestamp":_C.timestamp};class KC{constructor({customTags:e,merge:t,resolveKnownTags:n,schema:i,sortMapEntries:r}){this.map=_C.map,this.seq=_C.seq,this.merge=!!t,this.name=i||"core",this.knownTags=n?GC:{},this.tags=function(e,t,n,i){let r=e[i.replace(/\W/g,"")];if(!r){const t=Object.keys(e).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${t}`)}if(Array.isArray(n))for(const e of n)r=r.concat(e);else"function"==typeof n&&(r=n(r.slice()));return r.map((e=>{if("string"!=typeof e)return e;const n=t[e];if(n)return n;const i=Object.keys(t).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${i}`)}))}(WC,_C,e,this.name),this.sortMapEntries=!0===r?jC:r||null}}function YC(e,t,n,i){if(i&&"object"==typeof i)if(Array.isArray(i))for(let t=0,n=i.length;t<n;++t){const n=i[t],r=YC(e,i,String(t),n);void 0===r?delete i[t]:r!==n&&(i[t]=r)}else if(i instanceof Map)for(const t of Array.from(i.keys())){const n=i.get(t),r=YC(e,i,t,n);void 0===r?i.delete(t):r!==n&&i.set(t,r)}else if(i instanceof Set)for(const t of Array.from(i)){const n=YC(e,i,t,t);void 0===n?i.delete(t):n!==t&&(i.delete(t),i.add(n))}else for(const[t,n]of Object.entries(i)){const r=YC(e,i,t,n);void 0===r?delete i[t]:r!==n&&(i[t]=r)}return e.call(t,n,i)}class XC{constructor(e,t,n){let i;this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,sk,{value:nk}),"function"==typeof t||Array.isArray(t)?i=t:void 0===n&&t&&(n=t,t=void 0);const r=Object.assign({},Zk,n);this.options=r,this.anchors=new eC(this.options.anchorPrefix);let{version:o}=r;(null==n?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Ek({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,{replacer:i})}add(e){$C(this.contents)&&this.contents.add(e)}addIn(e,t){$C(this.contents)&&this.contents.addIn(e,t)}createNode(e,{flow:t,keepUndefined:n,onTagObj:i,replacer:r,tag:o}={}){if("function"==typeof r)e=r.call({"":e},"",e);else if(Array.isArray(r)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,t=r.filter(e).map(String);t.length>0&&(r=r.concat(t))}"boolean"!=typeof n&&(n=!!this.options.keepUndefined);const a=[],s=Ak(e,o,{keepUndefined:n,onAlias(e){const t=new Sk(e);return a.push(t),t},onTagObj:i,prevObjects:new Map,replacer:r,schema:this.schema});for(const e of a){e.source=e.source.node;let t=this.anchors.getName(e.source);t||(t=this.anchors.newName(),this.anchors.map[t]=e.source)}return t&&fk(s)&&(s.flow=!0),s}createPair(e,t,n={}){const i=this.createNode(e,n),r=this.createNode(t,n);return new $k(i,r)}delete(e){return!!$C(this.contents)&&this.contents.delete(e)}deleteIn(e){return jk(e)?null!=this.contents&&(this.contents=null,!0):!!$C(this.contents)&&this.contents.deleteIn(e)}get(e,t){return fk(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return jk(e)?!t&&pk(this.contents)?this.contents.value:this.contents:fk(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!fk(this.contents)&&this.contents.has(e)}hasIn(e){return jk(e)?void 0!==this.contents:!!fk(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=_k(this.schema,[e],t):$C(this.contents)&&this.contents.set(e,t)}setIn(e,t){jk(e)?this.contents=t:null==this.contents?this.contents=_k(this.schema,Array.from(e),t):$C(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},t);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},t);break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${t}`)}}this.schema=new KC(n)}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:i,onAnchor:r,reviver:o}={}){const a=Object.values(this.anchors.map).map((e=>[e,{alias:[],aliasCount:0,count:1}])),s=a.length>0?new Map(a):null,l={anchors:s,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof i?i:100,stringify:Wk},c=xk(this.contents,t||"",l);if("function"==typeof r&&s)for(const{count:e,res:t}of s.values())r(t,e);return"function"==typeof o?YC(o,{"":c},"",c):c}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}const t=[];let n=!0===e.directives;if(!1!==e.directives){const e=this.directives.toString(this);e?(t.push(e),n=!0):this.directives.marker&&(n=!0)}n&&t.push("---"),this.commentBefore&&(1!==t.length&&t.unshift(""),t.unshift(this.commentBefore.replace(/^/gm,"#")));const i=Uk(this,e);let r=!1,o=null;if(this.contents){gk(this.contents)&&(this.contents.spaceBefore&&n&&t.push(""),this.contents.commentBefore&&t.push(this.contents.commentBefore.replace(/^/gm,"#")),i.forceBlockIndent=!!this.comment,o=this.contents.comment);const e=o?void 0:()=>r=!0;let a=Wk(this.contents,i,(()=>o=null),e);o&&(a=Lk(a,"",o)),"|"!==a[0]&&">"!==a[0]||"---"!==t[t.length-1]?t.push(a):t[t.length-1]=`--- ${a}`}else t.push(Wk(this.contents,i));return this.comment&&(r&&!o||""===t[t.length-1]||t.push(""),t.push(this.comment.replace(/^/gm,"#"))),t.join("\n")+"\n"}}function $C(e){if(fk(e))return!0;throw new Error("Expected a YAML collection as document contents")}class ZC extends Error{constructor(e,t,n){if(!n)throw new Error(`Invalid arguments for new ${e}`);super(),this.name=e,this.message=n,this.offset=t}}class QC extends ZC{constructor(e,t){super("YAMLParseError",e,t)}}class JC extends ZC{constructor(e,t){super("YAMLWarning",e,t)}}const eE=(e,t)=>n=>{if(-1===n.offset)return;n.linePos=t.linePos(n.offset);const{line:i,col:r}=n.linePos;n.message+=` at line ${i}, column ${r}`;let o=r-1,a=e.substring(t.lineStarts[i-1],t.lineStarts[i]).replace(/[\n\r]+$/,"");if(o>=60&&a.length>80){const e=Math.min(o-39,a.length-79);a="…"+a.substring(e),o-=e-1}if(a.length>80&&(a=a.substring(0,79)+"…"),i>1&&/^ *$/.test(a.substring(0,o))){let n=e.substring(t.lineStarts[i-2],t.lineStarts[i-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),a=n+a}if(/[^ ]/.test(a)){const e=" ".repeat(o)+"^";n.message+=`:\n\n${a}\n${e}\n`}};function tE(e,t,n,i,r,o){let a=0,s=!1,l=n,c=n,u="",h=!1,p=!1,d="",f="",g="",m=null,v=null;for(const n of t){switch(n.type){case"space":l&&"doc-start"!==i&&"\t"===n.source[0]&&o(r+a,"Tabs are not allowed as indentation"),c=!0;break;case"comment":{e.options.strict&&!c&&o(r+a,"Comments must be separated from other tokens by white space characters");const t=n.source.substring(1);h?u+=d+t:u=t,h=!0,d="";break}case"newline":l&&!h&&(s=!0),l=!0,p=!0,c=!0,d+=n.source;break;case"anchor":f&&o(r+a,"A node can have at most one anchor"),f=n.source.substring(1),null===v&&(v=r+a),l=!1,c=!1;break;case"tag":{g&&o(r+a,"A node can have at most one tag");const t=e.directives.tagName(n.source,(e=>o(r,e)));t&&(g=t),null===v&&(v=r+a),l=!1,c=!1;break}case i:m={indent:n.indent,offset:r+a},l=!1,c=!1;break;default:o(r+a,`Unexpected ${n.type} token`),l=!1,c=!1}n.source&&(a+=n.source.length)}return{found:m,spaceBefore:s,comment:u,hasNewline:p,anchor:f,tagName:g,length:a,start:null!=v?v:r+a}}function nE(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":return e.source.includes("\n");case"flow-collection":for(const t of e.items)switch(t.type){case"newline":return!0;case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":case"flow-collection":if(nE(t))return!0}return!1;default:return!0}}const iE="All mapping items must start at the same column";function rE(e,t,n,i){let r="";if(e){let o=!1,a=!1,s="";for(const{source:l,type:c}of e){switch(c){case"space":o=!0;break;case"comment":{n&&!o&&i(t,"Comments must be separated from other tokens by white space characters");const e=l.substring(1);a?r+=s+e:r=e,a=!0,s="";break}case"newline":a&&(s+=l),o=!0;break;default:i(t,`Unexpected ${c} at node end`)}t+=l.length}}return{comment:r,offset:t}}function oE(e,t,n,i,r,o){let a;switch(n.type){case"block-map":a=function({composeNode:e,composeEmptyNode:t},n,{indent:i,items:r,offset:o},a,s){var l;const c=o,u=new iC(n.schema);a&&n.anchors.setAnchor(u,a);for(const{start:a,key:c,sep:h,value:p}of r){const r=tE(n,a,!0,"explicit-key-ind",o,s),d=!r.found;if(d){if(c&&("block-seq"===c.type?s(o,"A block sequence may not be used as an implicit map key"):"indent"in c&&c.indent!==i&&s(o,iE)),!r.anchor&&!r.tagName&&!h){r.comment&&(u.comment?u.comment+="\n"+r.comment:u.comment=r.comment);continue}}else(null===(l=r.found)||void 0===l?void 0:l.indent)!==i&&s(o,iE);o+=r.length,d&&nE(c)&&s(o,"Implicit keys need to be on a single line");const f=o,g=c?e(n,c,r,s):t(n,o,a,null,r,s);o=g.range[1];const m=tE(n,h||[],!c||"block-scalar"===c.type,"map-value-ind",o,s);if(o+=m.length,m.found){d&&("block-map"!==(null==p?void 0:p.type)||m.hasNewline||s(o,"Nested mappings are not allowed in compact mappings"),n.options.strict&&r.start<m.found.offset-1024&&s(o,"The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const i=p?e(n,p,m,s):t(n,o,h,null,m,s);o=i.range[1],u.items.push(new $k(g,i))}else d&&s(f,"Implicit map keys need to be followed by map values"),m.comment&&(g.comment?g.comment+="\n"+m.comment:g.comment=m.comment),u.items.push(new $k(g))}return u.range=[c,o],u}(e,t,n,i,o);break;case"block-seq":a=function({composeNode:e,composeEmptyNode:t},n,{items:i,offset:r},o,a){const s=r,l=new Qk(n.schema);o&&n.anchors.setAnchor(l,o);for(const{start:o,value:s}of i){const i=tE(n,o,!0,"seq-item-ind",r,a);if(r+=i.length,!i.found){if(!(i.anchor||i.tagName||s)){i.comment&&(l.comment=i.comment);continue}a(r,s&&"block-seq"===s.type?"All sequence items must start at the same column":"Sequence item without - indicator")}const c=s?e(n,s,i,a):t(n,r,o,null,i,a);r=c.range[1],l.items.push(c)}return l.range=[s,r],l}(e,t,n,i,o);break;case"flow-collection":a=function({composeNode:e,composeEmptyNode:t},n,i,r,o){const a="{"===i.start.source,s=a?new iC(n.schema):new Qk(n.schema);s.flow=!0,r&&n.anchors.setAnchor(s,r);let l=null,c=null,u=!1,h="",p=!1,d=!1,f="",g="",m="",v=i.offset+1,y=!1,b=!1,w=!1,k=!1,C=null;function E(){const e={spaceBefore:u,comment:h,anchor:g,tagName:m};return u=!1,h="",d=!1,f="",g="",m="",e}function x(e){if(c?d&&(c.comment=h):c=t(n,v,i.items,e,E(),o),a||b)s.items.push(l?new $k(l,c):new $k(c));else{const e=s;if(l){const t=new iC(n.schema);t.flow=!0,t.items.push(new $k(l,c)),e.items.push(t)}else e.items.push(c)}}for(let r=0;r<i.items.length;++r){const S=i.items[r];let M=!0;switch(S.type){case"space":p=!0;break;case"comment":{n.options.strict&&!p&&o(v,"Comments must be separated from other tokens by white space characters");const e=S.source.substring(1);d?h+=f+e:h=e,y=!1,d=!0,f="";break}case"newline":if(y&&!d&&(u=!0),w){if(d){let e=s.items[s.items.length-1];hk(e)&&(e=e.value||e.key),gk(e)?e.comment=h:o(v,"Error adding trailing comment to node"),h="",d=!1}w=!1}else f+=S.source,a||l||!c||(k=!0);y=!0,p=!0;break;case"anchor":g&&o(v,"A node can have at most one anchor"),g=S.source.substring(1),y=!1,w=!1,p=!1;break;case"tag":{m&&o(v,"A node can have at most one tag");const e=n.directives.tagName(S.source,(e=>o(v,e)));e&&(m=e),y=!1,w=!1,p=!1;break}case"explicit-key-ind":(g||m)&&o(v,"Anchors and tags must be after the ? indicator"),b=!0,y=!1,w=!1,p=!1;break;case"map-value-ind":if(l){if(c){o(v,"Missing {} around pair used as mapping key");const e=new iC(n.schema);e.flow=!0,e.items.push(new $k(l,c)),e.range=[l.range[0],c.range[1]],l=e,c=null}}else if(c){if(n.options.strict){const e="Implicit keys of flow sequence pairs need to be on a single line";if(k)o(v,e);else if(C){nE(C)&&o(v,e);const t="offset"in C&&C.offset;"number"==typeof t&&t<v-1024&&o(v,"The : indicator must be at most 1024 chars after the start of an implicit flow sequence key"),C=null}}l=c,c=null}else l=t(n,v,i.items,r,E(),o);d&&(l.comment=h,h="",d=!1),b=!1,w=!1,p=!1;break;case"comma":l||c||g||m||b?x(r):o(v,"Unexpected , in flow "+(a?"map":"sequence")),l=null,c=null,b=!1,w=!0,p=!1,k=!1,C=null;break;case"block-map":case"block-seq":o(v,"Block collections are not allowed within flow collections");default:c&&o(v,"Missing , between flow collection items"),a||l||b||(C=S),c=e(n,S,E(),o),v=c.range[1],y=!1,M=!1,w=!1,p=!1}M&&(v+=S.source.length)}(l||c||g||m||b)&&x(i.items.length);const S=a?"}":"]",[M,...T]=i.end;M&&M.source===S||o(v,`Expected flow ${a?"map":"sequence"} to end with ${S}`);if(M&&(v+=M.source.length),T.length>0){const e=rE(T,v,n.options.strict,o);e.comment&&(s.comment=h),v=e.offset}return s.range=[i.offset,v],s}(e,t,n,i,o)}if(!r)return a;const s=a.constructor;if("!"===r||r===s.tagName)return a.tag=s.tagName,a;const l=uk(a)?"map":"seq";let c=t.schema.tags.find((e=>e.collection===l&&e.tag===r));if(!c){const e=t.schema.knownTags[r];if(!e||e.collection!==l)return o(a.range[0],`Unresolved tag: ${r}`,!0),a.tag=r,a;t.schema.tags.push(Object.assign({},e,{default:!1})),c=e}const u=c.resolve(a,(e=>o(a.range[0],e)),t.options),h=gk(u)?u:new Dk(u);return h.range=a.range,h.tag=r,(null==c?void 0:c.format)&&(h.format=c.format),h}function aE(e,t,n){const i=function({offset:e,props:t},n,i){if("block-scalar-header"!==t[0].type)return i(e,"Block scalar header not found"),null;const{source:r}=t[0],o=r[0];let a=0,s="",l=-1;for(let t=1;t<r.length;++t){const n=r[t];if(s||"-"!==n&&"+"!==n){const i=Number(n);!a&&i?a=i:-1===l&&(l=e+t)}else s=n}-1!==l&&i(l,`Block scalar header includes extra characters: ${r}`);let c=!1,u="",h=r.length;for(let r=1;r<t.length;++r){const o=t[r];switch(o.type){case"space":c=!0;case"newline":h+=o.source.length;break;case"comment":if(n&&!c){i(e+h,"Comments must be separated from other tokens by white space characters")}h+=o.source.length,u=o.source.substring(1);break;case"error":i(e+h,o.message),h+=o.source.length;break;default:{i(e+h,`Unexpected token in block scalar header: ${o.type}`);const t=o.source;t&&"string"==typeof t&&(h+=t.length)}}}return{mode:o,indent:a,chomp:s,comment:u,length:h}}(e,t,n);if(!i)return{value:"",type:null,comment:"",length:0};const r=">"===i.mode?Dk.BLOCK_FOLDED:Dk.BLOCK_LITERAL,o=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],i=n.match(/^( *)/),r=[i&&i[1]?[i[1],n.slice(i[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)r.push([t[e],t[e+1]]);return r}(e.source):[];let a=o.length;for(let e=o.length-1;e>=0;--e){const t=o[e][1];if(""!==t&&"\r"!==t)break;a=e}if(!e.source||0===a){const t="+"===i.chomp?o.map((e=>e[0])).join("\n"):"";let n=i.length;return e.source&&(n+=e.source.length),{value:t,type:r,comment:i.comment,length:n}}let s=e.indent+i.indent,l=e.offset+i.length,c=0;for(let e=0;e<a;++e){const[t,r]=o[e];if(""!==r&&"\r"!==r){if(t.length<s){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,e)}0===i.indent&&(s=t.length),c=e;break}0===i.indent&&t.length>s&&(s=t.length),l+=t.length+r.length+1}let u="",h="",p=!1;for(let e=0;e<c;++e)u+=o[e][0].slice(s)+"\n";for(let e=c;e<a;++e){let[t,a]=o[e];l+=t.length+a.length+1;const c="\r"===a[a.length-1];if(c&&(a=a.slice(0,-1)),a&&t.length<s){const e=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(l-a.length-(c?2:1),e),t=""}r===Dk.BLOCK_LITERAL?(u+=h+t.slice(s)+a,h="\n"):t.length>s||"\t"===a[0]?(" "===h?h="\n":p||"\n"!==h||(h="\n\n"),u+=h+t.slice(s)+a,h="\n",p=!0):""===a?"\n"===h?u+="\n":h="\n":(u+=h+a,h=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let e=a;e<o.length;++e)u+="\n"+o[e][0].slice(s);"\n"!==u[u.length-1]&&(u+="\n");break;default:u+="\n"}return{value:u,type:r,comment:i.comment,length:i.length+e.source.length}}function sE({offset:e,type:t,source:n,end:i},r,o){let a,s;const l=(t,n)=>o(e+t,n);switch(t){case"scalar":a=Dk.PLAIN,s=function(e,t){switch(e[0]){case"\t":t(0,"Plain value cannot start with a tab character");break;case"|":case">":t(0,`Plain value cannot start with block scalar indicator ${e[0]}`);break;case"@":case"`":t(0,`Plain value cannot start with reserved character ${e[0]}`);break}return lE(e.trim())}(n,l);break;case"single-quoted-scalar":a=Dk.QUOTE_SINGLE,s=function(e,t){"'"===e[e.length-1]&&1!==e.length||t(e.length,"Missing closing 'quote");return lE(e.slice(1,-1)).replace(/''/g,"'")}(n,l);break;case"double-quoted-scalar":a=Dk.QUOTE_DOUBLE,s=function(e,t){let n="";for(let i=1;i<e.length-1;++i){const r=e[i];if("\r"!==r||"\n"!==e[i+1])if("\n"===r){const{fold:t,offset:r}=cE(e,i);n+=t,i=r}else if("\\"===r){let r=e[++i];const o=uE[r];if(o)n+=o;else if("\n"===r)for(r=e[i+1];" "===r||"\t"===r;)r=e[1+ ++i];else if("x"===r||"u"===r||"U"===r){const o={x:2,u:4,U:8}[r];n+=hE(e,i+1,o,t),i+=o}else{const r=e.substr(i-1,2);t(i-1,`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const t=i;let o=e[i+1];for(;" "===o||"\t"===o;)o=e[1+ ++i];"\n"!==o&&(n+=i>t?e.slice(t,i+1):r)}else n+=r}'"'===e[e.length-1]&&1!==e.length||t(e.length,'Missing closing "quote');return n}(n,l);break;default:return o(e,`Expected a flow scalar value, but found: ${t}`),{value:"",type:null,comment:"",length:n.length}}const c=rE(i,0,r,l);return{value:s,type:a,comment:c.comment,length:n.length+c.offset}}function lE(e){const t=e.split(/[ \t]*\r?\n[ \t]*/);let n=t[0],i=" ";for(let e=1;e<t.length-1;++e){const r=t[e];""===r?"\n"===i?n+=i:i="\n":(n+=i+r,i=" ")}return t.length>1&&(n+=i+t[t.length-1]),n}function cE(e,t){let n="",i=e[t+1];for(;!(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i||"\r"===i&&"\n"!==e[t+2]);)"\n"===i&&(n+="\n"),i=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const uE={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function hE(e,t,n,i){const r=e.substr(t,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const r=e.substr(t-2,n+2);return i(t-2,`Invalid escape sequence ${r}`),r}return String.fromCodePoint(o)}function pE(e,t,n,i,r){const{offset:o}=t,{value:a,type:s,comment:l,length:c}="block-scalar"===t.type?aE(t,e.options.strict,r):sE(t,e.options.strict,r),u=i?function(e,t,n,i){var r;if("!"===n)return dE(e);const o=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;o.push(t)}for(const e of o)if(null===(r=e.test)||void 0===r?void 0:r.test(t))return e;const a=e.knownTags[n];if(a&&!a.collection)return e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a;return i(0,`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),dE(e)}(e.schema,a,i,r):function(e,t,n){var i;if(n)for(const n of e.tags)if(n.default&&(null===(i=n.test)||void 0===i?void 0:i.test(t)))return n;return dE(e)}(e.schema,a,"scalar"===t.type);let h;try{const t=u?u.resolve(a,(e=>r(o,e)),e.options):a;h=pk(t)?t:new Dk(t)}catch(e){r(o,e.message),h=new Dk(a)}return h.range=[o,o+c],h.source=a,s&&(h.type=s),i&&(h.tag=i),(null==u?void 0:u.format)&&(h.format=u.format),l&&(h.comment=l),n&&e.anchors.setAnchor(h,n),h}const dE=e=>e.tags.find((e=>!e.collection&&"tag:yaml.org,2002:str"===e.tag));function fE(e,t,n){if(t){null===n&&(n=t.length);for(let i=n-1;i>=0;--i){let n=t[i];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++i];"space"===(null==n?void 0:n.type);)e+=n.source.length,n=t[++i];break}}return e}const gE={composeNode:mE,composeEmptyNode:vE};function mE(e,t,n,i){const{spaceBefore:r,comment:o,anchor:a,tagName:s}=n;let l;switch(t.type){case"alias":l=function(e,{offset:t,source:n,end:i},r){const o=n.substring(1),a=e.anchors.getNode(o);a||r(t,`Aliased anchor not found: ${o}`);const s=new Sk(a),l=rE(i,t+n.length,e.options.strict,r);s.range=[t,l.offset],l.comment&&(s.comment=l.comment);return s}(e,t,i),(a||s)&&i(t.offset,"An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=pE(e,t,a,s,i);break;case"block-map":case"block-seq":case"flow-collection":l=oE(gE,e,t,a,s,i);break;default:throw console.log(t),new Error(`Unsupporten token type: ${t.type}`)}return r&&(l.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?l.comment=o:l.commentBefore=o),l}function vE(e,t,n,i,{spaceBefore:r,comment:o,anchor:a,tagName:s},l){const c=pE(e,{type:"scalar",offset:fE(t,n,i),indent:-1,source:""},a,s,l);return r&&(c.spaceBefore=!0),o&&(c.comment=o),c}function yE(e){let t="",n=!1,i=!1;for(let r=0;r<e.length;++r){const o=e[r];switch(o[0]){case"#":t+=(""===t?"":i?"\n\n":"\n")+o.substring(1),n=!0,i=!1;break;case"%":"#"!==e[r+1][0]&&(r+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:t,afterEmptyLine:i}}class bE{constructor(e,t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n)=>{n?this.warnings.push(new JC(e,t)):this.errors.push(new QC(e,t))},this.next=e=>{switch(e.type){case"directive":this.directives.add(e.source,this.onError),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:i,value:r,end:o},a){const s=Object.assign({directives:t},e),l=new XC(void 0,s),c=tE(l,i,!0,"doc-start",n,a);c.found&&(l.directives.marker=!0),l.contents=r?mE(l,r,c,a):vE(l,n+c.length,i,null,c,a);const u=rE(o,l.contents.range[1],!1,a);return u.comment&&(l.comment=u.comment),l.range=[n,u.offset],l}(this.options,this.directives,e,this.onError);this.decorate(t,!1),this.doc&&this.onDocument(this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new QC(-1,t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new QC(e.offset,t));break}const t=rE(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[1]=t.offset;break}default:this.errors.push(new QC(-1,`Unsupported token ${e.type}`))}},this.directives=new Ek({version:(null==t?void 0:t.version)||Zk.version}),this.onDocument=e,this.options=t}decorate(e,t){const{comment:n,afterEmptyLine:i}=yE(this.prelude);if(n){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(i||e.directives.marker||!r)e.commentBefore=n;else if(fk(r)&&!r.flow&&r.items.length>0){const e=r.items[0],t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=r.commentBefore;r.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:yE(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),this.onDocument(this.doc),this.doc=null;else if(e){const e=Object.assign({directives:this.directives},this.options),n=new XC(void 0,e);this.atDirectives&&this.onError(t,"Missing directives-end indicator line"),n.range=[0,t],this.decorate(n,!1),this.onDocument(n)}}}class wE{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const i=t+n>>1;this.lineStarts[i]<e?t=i+1:n=i}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}const kE="";function CE(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const EE=[",","[","]","{","}"],xE=[" ",",","[","]","{","}","\n","\r","\t"],SE=e=>!e||xE.includes(e);class ME{constructor(e){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0,this.push=e}lex(e,t){e&&(this.buffer=this.buffer?this.buffer+e:e),this.atEnd=!t;let n=this.next||"stream";for(;n&&(t||this.hasChars(1));)n=this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&CE(this.buffer[e+3]))return-1}return e}getLine(){let e=this.buffer.indexOf("\n",this.pos);return-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}parseNext(e){switch(e){case"stream":return this.parseStream();case"line-start":return this.parseLineStart();case"block-start":return this.parseBlockStart();case"doc":return this.parseDocument();case"flow":return this.parseFlowCollection();case"quoted-scalar":return this.parseQuotedScalar();case"block-scalar":return this.parseBlockScalar();case"plain-scalar":return this.parsePlainScalar()}}parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const i=e[n-1];" "!==i&&"\t"!==i||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const i=this.pushCount(t)+this.pushSpaces(!0);return this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=this.pushSpaces(!0);return this.pushCount(e.length-t),this.pushNewline(),"stream"}return this.push(""),this.parseLineStart()}parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&CE(this.charAt(3)))return this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&CE(this.charAt(3)))return this.pushCount(3),"stream"}return this.indentValue=this.pushSpaces(!1),this.indentNext>this.indentValue&&!CE(this.charAt(1))&&(this.indentNext=this.indentValue),this.parseBlockStart()}parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&CE(t)){const e=this.pushCount(1)+this.pushSpaces(!0);return this.indentNext=this.indentValue+1,this.indentValue+=e,this.parseBlockStart()}return"doc"}parseDocument(){this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=this.pushIndicators();switch(e[t]){case"#":this.pushCount(e.length-t);case void 0:return this.pushNewline(),this.parseLineStart();case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return this.pushCount(1),"doc";case"*":return this.pushUntil(SE),"doc";case'"':case"'":return this.parseQuotedScalar();case"|":case">":return t+=this.parseBlockScalarHeader(),t+=this.pushSpaces(!0),this.pushCount(e.length-t),this.pushNewline(),this.parseBlockScalar();default:return this.parsePlainScalar()}}parseFlowCollection(){let e,t,n=-1;do{e=this.pushNewline(),t=this.pushSpaces(!0),e>0&&(this.indentValue=n=t)}while(e+t>0);const i=this.getLine();if(null===i)return this.setNext("flow");if(-1!==n&&n<this.indentNext||0===n&&(i.startsWith("---")||i.startsWith("..."))&&CE(i[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===i[0]||"}"===i[0])))return this.flowLevel=0,this.push(""),this.parseLineStart()}let r=0;for(;","===i[r];)r+=this.pushCount(1)+this.pushSpaces(!0);switch(r+=this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return this.pushCount(i.length-r),"flow";case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return this.pushUntil(SE),"flow";case'"':case"'":return this.flowKey=!0,this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||CE(e)||","===e)return this.pushCount(1),this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,this.parsePlainScalar()}}parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}let n=this.buffer.indexOf("\n",this.pos);if(-1!==n&&n<t){for(;-1!==n&&n<t;){const e=this.continueScalar(n+1);if(-1===e)break;n=this.buffer.indexOf("\n",e)}-1!==n&&n<t&&(t=n-1)}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return this.pushUntil((e=>CE(e)||"#"===e))}parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let i=this.pos;e=this.buffer[i];++i)switch(e){case" ":n+=1;break;case"\n":t=i,n=0;break;case"\r":{const e=this.buffer[i+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];for("\r"===n&&(n=this.buffer[--e]);" "===n||"\t"===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos))break;t=e}return this.push(kE),this.pushToIndex(t+1,!0),this.parseLineStart()}parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,i=this.pos-1;for(;t=this.buffer[++i];)if(":"===t){const t=this.buffer[i+1];if(CE(t)||e&&","===t)break;n=i}else if(CE(t)){const r=this.buffer[i+1];if("#"===r||e&&EE.includes(r))break;if("\r"===t&&("\n"===r?(i+=1,t="\n"):n=i),"\n"===t){const e=this.continueScalar(i+1);if(-1===e)break;i=Math.max(i,e-2)}}else{if(e&&EE.includes(t))break;n=i}return t||this.atEnd?(this.push(kE),this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}pushCount(e){return e>0?(this.push(this.buffer.substr(this.pos,e)),this.pos+=e,e):0}pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(this.push(n),this.pos+=n.length,n.length):(t&&this.push(""),0)}pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return this.pushVerbatimTag()+this.pushSpaces(!0)+this.pushIndicators();case"&":return this.pushUntil(SE)+this.pushSpaces(!0)+this.pushIndicators();case":":case"?":case"-":if(CE(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),this.pushCount(1)+this.pushSpaces(!0)+this.pushIndicators()}return 0}pushVerbatimTag(){let e=this.pos+2,t=this.buffer[e];for(;!CE(t)&&">"!==t;)t=this.buffer[++e];return this.pushToIndex(">"===t?e+1:e,!1)}pushNewline(){const e=this.buffer[this.pos];return"\n"===e?this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?this.pushCount(2):0}pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const i=n-this.pos;return i>0&&(this.push(this.buffer.substr(this.pos,i)),this.pos=n),i}pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return this.pushToIndex(t,!1)}}function TE(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function DE(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function AE(e){let t=!1;for(let n=0;n<e.length;++n)switch(e[n].type){case"space":break;case"comment":t=!0;break;case"newline":if(!t)return!1;break;default:return!1}if(t)for(let t=e.length-1;t>=0;--t)switch(e[t].type){case"space":break;case"newline":return!0;default:return!1}return!1}function LE(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep||t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function PE(e){var t;if(0===e.length)return[];let n=e.length;e:for(;--n>=0;)switch(e[n].type){case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(t=e[++n])||void 0===t?void 0:t.type););return e.splice(n,e.length)}class IE{constructor(e,t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.next=e=>{if(this.source=e,this.atScalar)return this.atScalar=!1,this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case kE:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}},this.lexer=new ME(this.next),this.push=e,this.onNewLine=t}parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(e,t),t||this.end()}end(){for(;this.stack.length>0;)this.pop()}get sourceToken(){return{type:this.type,indent:this.indent,source:this.source}}step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return this.stream();switch(e.type){case"document":return this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.scalar(e);case"block-scalar":return this.blockScalar(e);case"block-map":return this.blockMap(e);case"block-seq":return this.blockSequence(e);case"flow-collection":return this.flowCollection(e);case"doc-end":return this.documentEnd(e)}this.pop()}else{for(;this.stack.length>0;)this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}pop(e){const t=e||this.stack.pop();if(t)if(0===this.stack.length)this.push(t);else{const e=this.peek(1);switch("block-scalar"!==t.type&&"flow-collection"!==t.type||(t.indent="indent"in e?e.indent:-1),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!TE(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":e.items.push(t);break;default:this.pop(),this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&!DE(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";this.push({type:"error",source:"",message:e})}}stream(){switch(this.type){case"directive-line":return void this.push({type:"directive",source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void this.push(this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source})}document(e){if(e.value)return this.lineEnd(e);switch(this.type){case"doc-start":return void(DE(e.start)?(this.pop(),this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source})}scalar(e){if("map-value-ind"===this.type){const t=PE(LE(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else this.lineEnd(e)}blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}this.pop();break;default:this.pop(),this.step()}}blockMap(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,!n.sep&&AE(n.start)){const i=e.items[e.items.length-2],r=null===(t=null==i?void 0:i.value)||void 0===t?void 0:t.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken))}if(this.indent>=e.indent){const t=!this.onKeyLine&&this.indent===e.indent&&(n.sep||DE(n.start));switch(this.type){case"anchor":case"tag":return void(t||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken));case"explicit-key-ind":return n.sep||TE(n.start,"explicit-key-ind")?t||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):n.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(n.sep)if(n.value||t&&!TE(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(TE(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(TE(n.start,"explicit-key-ind")&&function(e){switch(null==e?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}(n.key)&&!TE(n.sep,"newline")){const e=PE(n.start),t=n.key,i=n.sep;i.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:t,sep:i}]})}else n.sep.push(this.sourceToken);else Object.assign(n,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);return void(t||n.value?(e.items.push({start:[],key:i,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(i):(Object.assign(n,{key:i,sep:[]}),this.onKeyLine=!0))}default:{const i=this.startBlockValue(e);if(i)return t&&"block-seq"!==i.type&&TE(n.start,"explicit-key-ind")&&e.items.push({start:[]}),void this.stack.push(i)}}}this.pop(),this.step()}blockSequence(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(!n.value&&AE(n.start)){const i=e.items[e.items.length-2],r=null===(t=null==i?void 0:i.value)||void 0===t?void 0:t.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken));case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;return void n.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(n.value||TE(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return this.stack.push(t)}this.pop(),this.step()}flowCollection(e){if("flow-error-end"===this.type){let e;do{this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"space":case"comment":case"newline":case"comma":case"explicit-key-ind":case"map-value-ind":case"anchor":case"tag":return void e.items.push(this.sourceToken);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return void e.items.push(this.flowScalar(this.type));case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const t=this.startBlockValue(e);if(t)return this.stack.push(t);this.pop(),this.step()}else{const t=this.peek(2);if("block-map"!==t.type||"map-value-ind"!==this.type&&("newline"!==this.type||t.items[t.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=PE(LE(t)),i=e.end.splice(1,e.end.length);i.push(this.sourceToken);const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else this.lineEnd(e);else this.pop(),this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken]};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":return this.onKeyLine=!0,{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"map-value-ind":{this.onKeyLine=!0;const t=PE(LE(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&this.pop())}lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":this.pop(),this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&this.pop()}}}function OE(e){const t=!e||!1!==e.prettyErrors;return{lineCounter:e&&e.lineCounter||t&&new wE||null,prettyErrors:t}}function FE(e,t,n){let i;"function"==typeof t?i=t:void 0===n&&t&&"object"==typeof t&&(n=t);const r=function(e,t){const{lineCounter:n,prettyErrors:i}=OE(t);let r=null;const o=new bE((e=>{if(r){if("silent"!==r.options.logLevel){const t="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.push(new QC(e.range[0],t))}}else r=e}),t);return new IE(o.next,null==n?void 0:n.addNewLine).parse(e),o.end(!0,e.length),i&&n&&(r.errors.forEach(eE(e,n)),r.warnings.forEach(eE(e,n))),r}(e,n);if(!r)return null;if(r.warnings.forEach((e=>Kk(r.options.logLevel,e))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},n))}var BE=n(914),NE=n(2854),RE=n(7361),HE=n(1744),VE=n(6630),zE=n(719),qE=n(5426),UE=n(6115),WE=n(1696),_E=n(4617),jE={}.hasOwnProperty,GE=!1;function KE(e,t){var n=function(e,t){var n=t||{};void 0===n.allowDangerousHTML||GE||(GE=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var i=n.allowDangerousHtml||n.allowDangerousHTML,r={};return a.dangerous=i,a.definition=n.definitions||VE(e),a.footnoteById=r,a.footnoteOrder=[],a.augment=o,a.handlers=Object.assign({},_E,n.handlers),a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,NE(e,"footnoteDefinition",(function(e){var t=String(e.identifier).toUpperCase();jE.call(r,t)||(r[t]=e)})),a;function o(e,t){var n,i;return e&&e.data&&((n=e.data).hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=Object.assign({},t.properties,n.hProperties)),t.children&&n.hChildren&&(t.children=n.hChildren)),i=e&&e.position?e:{position:e},HE(i)||(t.position={start:RE.start(i),end:RE.end(i)}),t}function a(e,t,n,i){return null==i&&"object"==typeof n&&"length"in n&&(i=n,n={}),o(e,{type:"element",tagName:t,properties:n||{},children:i||[]})}}(e,t),i=zE(n,e),r=WE(n);return r&&(i.children=i.children.concat(BE("text","\n"),r)),i}var YE=32,XE=91;function $E(e,t,n,i){for(var r=e.length,o=-1;++o<r;)if(t[e[o][0]].apply(n,i))return!0;return!1}function ZE(e){var t=e.match(/^\s*([0-9]+)\s*(?:x\s*([0-9]+)\s*)?$/);return t?{x:parseInt(t[1]),y:t[2]?parseInt(t[2]):0}:null}function QE(e,t){var n=ZE(e);if(!n)return!1;var i=n.x,r=n.y,o=t.data=t.data||{},a=o.hProperties=o.hProperties||{};return a.width=String(i),0!==r&&(a.height=String(r)),!0}var JE=/^#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+/;var ex=Iw;ex.globalOptions={breaks:!0,commonmark:!0};var tx=new Ow,nx=new Ow,ix={};function rx(e){var t=ek()(e),n=new ex(String(t),t);n.setOptions(ex.globalOptions);for(var i=n.parse(),r=0,o=tx.transformers;r<o.length;r++){(0,o[r])(i,e)}return i}!function(e){var t=/\s/,n=function(e){return t.test(e)},i="==";Fw(e,"mark","text",(function(e,t,r){if(this.options.gfm&&t.substr(0,2)===i&&"===="!==t.substr(0,4)&&!n(t.charAt(2))){var o="",a="",s="",l="",c=1,u=t.length,h=e.now();for(h.column+=2,h.offset+=2;++c<u;){if(!("="!==(o=t.charAt(c))||"="!==a||s&&n(s)))return!!r||e(i+l+i)({type:"mark",children:this.tokenizeInline(l,h),data:{hName:"mark"}});l+=a,s=a,a=o}}}),(function(e,t){return e.indexOf(i,t)}))}(ex),function(e){var t=/!?\[\[/g,n=/^(!?)\[\[(.+?)]]/;Fw(e,"ilink","link",(function(e,t,i){var r=n.exec(t);if(r){var o=r[2].trim();if(-1!==o.indexOf("[["))return!1;if(i)return!0;var a="!"===r[1],s=Yw(o),l=s.href,c=s.title,u=s.isAlias;if(a)return e(r[0])({type:"iembed",href:l,title:c,data:{hName:"span",hProperties:{className:"internal-embed",src:l,alt:c},hChildren:[{type:"text",value:c}]}});var h={className:"internal-link",href:l,dataHref:l};return u&&(h["aria-label"]=Kw(l),h["data-tooltip-position"]="top"),e(r[0])({type:"ilink",href:l,title:c,data:{hName:"a",hProperties:h,hChildren:[{type:"text",value:c}]}})}}),(function(e,n){t.lastIndex=n;var i=t.exec(e);return i?i.index:-1}))}(ex),function(e){var t=/^#\d+$/,n=/\s/;Fw(e,"tag","image",(function(e,n,i){var r=JE.exec(n);if(r){var o=r[0];return!t.test(o)&&(!!i||e(o)({type:"tag",tag:o,data:{hName:"a",hProperties:{className:"tag",href:o},hChildren:[{type:"text",value:o}]}}))}}),(function(e,t){for(var i=t;-1!==(i=e.indexOf("#",i));){if(i<=0)return i;var r=e.charAt(i-1);if(n.test(r))return i;i++}}))}(ex),function(e){function t(e){if("boolean"==typeof e.checked){var t=e,n=t.data=t.data||{},i=n.hProperties=n.hProperties||{};i.className="task-list-item",e.checked&&(i.className+=" is-checked"),e.checklist&&(i.dataTask=e.checklist);var r=t.children[0];r&&"paragraph"===r.type&&(t=r),t.children.unshift({type:"checklist",data:{hName:"input",hProperties:{className:"task-list-item-checkbox",type:"checkbox",checked:e.checked}},position:e.position}),delete e.checked}}e.addTransformer((function(e){Rw(e,"listItem",t)}))}(tx),function(e){Fw(e,"math","text",(function(e,t,n){var i,r,o,a,s,l,c,u=t.length,h=!1,p=!1,d=0;if(92===t.charCodeAt(d)&&(p=!0,d++),36===t.charCodeAt(d)){if(d++,p)return!!n||e(t.slice(0,d))({type:"text",value:"$"});if(36===t.charCodeAt(d)&&(h=!0,d++),o=t.charCodeAt(d),h||32!==o&&9!==o){for(a=d;d<u;){if(r=o,o=t.charCodeAt(d+1),36===r){if(i=t.charCodeAt(d-1),!h&&(32!==i&&9!==i&&(o!=o||o<48||o>57))||h&&36===o){if(s=d-1,d++,h)for(var f=++d;f<u;){var g=t.charAt(f);if("\n"===g){d=f+1;break}if(!/\s/.test(g))break;f++}l=d;break}}else 92===r&&(d++,o=t.charCodeAt(d+1));d++}if(void 0!==l)return!!n||(c=t.slice(a,s+1),e(t.slice(0,l))({type:"inlineMath",value:c,data:{hName:"span",hProperties:{className:h?"math math-block":"math math-inline"},hChildren:[{type:"text",value:c}]}}))}}}),(function(e,t){return e.indexOf("$",t)}))}(ex),function(e){Bw(e,"math","fencedCode",(function(e,t,n){for(var i,r,o,a,s,l,c,u,h,p,d,f=t.length,g=0;g<f&&32===t.charCodeAt(g);)g++;for(s=g;g<f&&36===t.charCodeAt(g);)g++;if(!((l=g-s)<2)){for(;g<f&&32===t.charCodeAt(g);)g++;for(c=g;g<f;){if(36===(i=t.charCodeAt(g)))return;if(10===i)break;g++}if(10===t.charCodeAt(g)){if(n)return!0;for(r=[],c!==g&&r.push(t.slice(c,g)),g++,o=-1===(o=t.indexOf("\n",g+1))?f:o;g<f;){for(u=!1,p=g,d=o,a=o,h=0;a>p&&32===t.charCodeAt(a-1);)a--;for(;a>p&&36===t.charCodeAt(a-1);)h++,a--;for(l<=h&&t.indexOf("$",p)===a&&(u=!0,d=a);p<=d&&p-g<s&&32===t.charCodeAt(p);)p++;if(u)for(;d>p&&32===t.charCodeAt(d-1);)d--;if(u&&p===d||r.push(t.slice(p,d)),u)break;g=o+1,o=-1===(o=t.indexOf("\n",g+1))?f:o}return r=r.join("\n"),e(t.slice(0,o))({type:"math",value:r,data:{hName:"div",hProperties:{className:"math math-block"},hChildren:[{type:"text",value:r}]}})}}}));var t=e.prototype;Nw(t.interruptParagraph,"fencedCode","math"),Nw(t.interruptList,"fencedCode","math"),Nw(t.interruptBlockquote,"fencedCode","math")}(ex),function(e){for(var t=e.prototype,n=t.blockMethods,i=[],r=0;r<n.length;r++){var o=n[r];"newline"!==o&&"indentedCode"!==o&&"paragraph"!==o&&"footnoteDefinition"!==o&&i.push([o])}i.push(["footnoteDefinition"]),t.interruptFootnoteDefinition=i,Fw(e,"inlineNote","reference",(function(e,t,n){var i,r,o,a,s,l,c,u=t.length+1,h=0,p=0;if(94===t.charCodeAt(h++)&&t.charCodeAt(h++)===XE){for(o=h;h<u;){if((r=t.charCodeAt(h))!=r)return;if(void 0===l)if(92===r)h+=2;else if(r===XE)p++,h++;else if(93===r){if(0===p){a=h,h++;break}p--,h++}else if(96===r){for(s=h,l=1;96===t.charCodeAt(s+l);)l++;h+=l}else h++;else if(96===r){for(s=h,c=1;96===t.charCodeAt(s+c);)c++;h+=c,l===c&&(l=void 0),c=void 0}else h++}if(void 0!==a)return!!n||((i=e.now()).column+=2,i.offset+=2,e(t.slice(0,h))({type:"footnote",children:this.tokenizeInline(t.slice(o,a),i)}))}}),(function(e,t){return e.indexOf("^[",t)})),Bw(e,"footnoteDefinition","definition",(function(e,t,n){for(var i,r,o,s,l,c,u,h,p,d,f,g,m,v=this,y=v.interruptFootnoteDefinition,b=v.offset,w=t.length+1,k=0,C=[];k<w&&(9===(s=t.charCodeAt(k))||s===YE);)k++;if(t.charCodeAt(k++)===XE&&94===t.charCodeAt(k++)){for(r=k;k<w;){if((s=t.charCodeAt(k))!=s||10===s||9===s||s===YE)return;if(93===s){o=k,k++;break}k++}if(void 0!==o&&r!==o&&58===t.charCodeAt(k++)){if(n)return!0;for(i=t.slice(r,o),l=e.now(),p=0,d=0,f=k,g=[];k<w;){if((s=t.charCodeAt(k))!=s||10===s)m={start:p,contentStart:f||k,contentEnd:k,end:k},g.push(m),10===s&&(p=k+1,d=0,f=void 0,m.end=p);else if(void 0!==d)if(s===YE||9===s)(d+=s===YE?1:4-d%4)>4&&(d=void 0,f=k);else{if(d<4&&m&&(m.contentStart===m.contentEnd||$E(y,a,v,[e,t.slice(k,1024),!0])))break;d=void 0,f=k}k++}for(k=-1,w=g.length;w>0&&(m=g[w-1]).contentStart===m.contentEnd;)w--;for(c=e(t.slice(0,m.contentEnd));++k<w;)m=g[k],b[l.line+k]=(b[l.line+k]||0)+(m.contentStart-m.start),C.push(t.slice(m.contentStart,m.end));return u=v.enterBlock(),h=v.tokenizeBlock(C.join(""),l),u(),c({type:"footnoteDefinition",identifier:i.toLowerCase(),label:i,children:h})}}})),Fw(e,"footnoteCall","reference",(function(e,t,n){var i,r,o,a,s=t.length+1,l=0;if(t.charCodeAt(l++)===XE&&94===t.charCodeAt(l++)){for(r=l;l<s;){if((a=t.charCodeAt(l))!=a||10===a||9===a||a===YE)return;if(93===a){o=l,l++;break}l++}if(void 0!==o&&r!==o)return!!n||(i=t.slice(r,o),e(t.slice(0,l))({type:"footnoteReference",identifier:i.toLowerCase(),label:i}))}}),(function(e,t){return e.indexOf("[",t)}));var a=t.blockTokenizers,s=t.inlineTokenizers,l=a.definition,c=s.reference;function u(e,t,n){var i=0;if(33===t.charCodeAt(i)&&i++,t.charCodeAt(i)===XE&&94!==t.charCodeAt(i+1))return c.call(this,e,t,n)}a.definition=function(e,t,n){for(var i=0,r=t.charCodeAt(i);r===YE||9===r;)r=t.charCodeAt(++i);if(r===XE&&94!==t.charCodeAt(i+1))return l.call(this,e,t,n)},s.reference=u,u.locator=c.locator}(ex),function(e){var t=e.prototype.inlineTokenizers,n=t.break,i=function(e,t,i){if(!this.options.breaks&&!this.options.breakOnce)return n.call(this,e,t,i);for(var r,o=t.length,a=-1;++a<o;){if(10===(r=t.charCodeAt(a)))return this.options.breakOnce=!1,!!i||e(t.slice(0,a+1))({type:"break"});if(32!==r)return}};i.locator=n.locator,t.break=i}(ex),function(e){var t="---",n=t.length,i=function(e,i,r){if(i.slice(0,n)===t&&"\n"===i.charAt(n)){for(var o=i.indexOf(t,n);-1!==o&&"\n"!==i.charAt(o-1);)o=i.indexOf(t,o+n);return-1!==o?!!r||e(i.slice(0,o+t.length))({type:"yaml",value:i.slice(t.length+1,o-1)}):void 0}};i.onlyAtStart=!0;var r=e.prototype;r.blockMethods.unshift("frontmatter"),r.blockTokenizers.frontmatter=i}(ex),function(e){var t=/^\^([a-zA-Z0-9\-]+)$/,n=/\s/;Fw(e,"blockid","text",(function(e,n,i){var r=t.exec(n);if(r){var o=r[1];return!!i||e(r[0])({type:"blockid",id:o})}}),(function(e,t){for(var i=t;-1!==(i=e.indexOf("^",i));){if(i<=0)return-1;var r=e.charAt(i-1);if(n.test(r))return i;i++}}));var i=/^\^([a-zA-Z0-9\-]+)(?=$|\n$|\n\n)/;Bw(e,"blockid","paragraph",(function(e,t,n){var r=i.exec(t);if(r){var o=r[1];return!!n||e(r[0])({type:"blockid",id:o})}}))}(ex),function(e){e.addTransformer((function(e){Rw(e,"link",(function(e,t,n){var i=e.url;if(i&&zw(i)){var r=void 0;try{r=decodeURI(i)}catch(e){return}var o=_w(r).trim();n.children[t]={type:"ilink",href:o,title:"",converted:!0,data:{url:i,hName:"a",hProperties:{href:o,dataHref:o,className:"internal-link",title:e.title}},children:e.children,position:e.position}}}))}))}(tx),function(e){e.addTransformer((function(e){Rw(e,"image",(function(e,t,n){var i=e.url;if(i&&zw(i)){var r=void 0;try{r=decodeURI(i)}catch(e){return}var o=_w(r).trim();n.children[t]={type:"iembed",href:o,title:e.alt,data:{hName:"div",hProperties:{className:"internal-embed",src:o,alt:e.alt}},children:e.children,position:e.position}}}))}))}(tx),function(e){e.addTransformer((function(e){var t=[],n={},i={};function r(e,t,n){var i=String(t+1),r=i;n>0&&(r+="-"+n),e.type="fnRef",e.data={hName:"sup",hProperties:{className:"footnote-ref","data-footnote-id":"fnref-"+r}},e.children=[{type:"element",data:{hName:"a",hProperties:{className:"footnote-link",href:"#fn-"+i},hChildren:[{type:"text",value:"["+r+"]"}]}}]}Rw(e,"footnoteDefinition",(function(e){var t=String(e.identifier);i[":"+t]=-1,n[":"+t]={children:e.children,position:e.position}})),Rw(e,["footnote","footnoteReference"],(function(e){if("footnote"===e.type){var o=t.length,a=String(o);t.push({count:1,identifier:a}),n[a]={children:e.children,position:e.position},r(e,o,0)}else{a=String(e.identifier);if(!i.hasOwnProperty(":"+a))return e.type="text",void(e.value=a);-1===(o=i[":"+a])&&(o=t.length,i[":"+a]=o,t.push({count:0,identifier:":"+a}));var s=t[o],l=s.count;s.count++,r(e,o,l)}}));for(var o=[],a=0;a<t.length;a++){var s=t[a],l=n[s.identifier];if(l){var c=l.children,u=c[c.length-1];u&&"paragraph"===u.type&&(c=u.children);for(var h=String(a+1),p=0;p<s.count;p++){var d=h;p>0&&(d+="-"+p),c.push({type:"element",data:{hName:"a",hProperties:{className:"footnote-backref footnote-link",href:"#fnref-"+d},hChildren:[{type:"text",value:"↩︎"}]}})}o.push({type:"listItem",synthetic:!0,data:{hProperties:{"data-footnote-id":"fn-"+h}},children:l.children,position:l.position})}}if(0!==o.length){var f,g=e.children[e.children.length-1],m={start:f=g?g.position.end:{line:1,column:1,offset:0},end:f};e.children=e.children.concat({type:"text",value:"\n",position:m},{type:"element",position:m,data:{hName:"section",hProperties:{className:"footnotes"}},children:[{type:"thematicBreak",position:m},{type:"list",position:m,ordered:!0,start:1,spread:!1,children:o}]})}}))}(tx),function(e){e.addTransformer((function(e){Rw(e,"image",(function(e){var t=e.alt;if(t){var n=t.lastIndexOf("|");if(-1!==n)QE(t.substr(n+1),e)&&(e.alt=t.substr(0,n))}}))}))}(tx),function(e){e.addTransformer((function(e){Rw(e,"iembed",(function(e){var t=e.title;if(t){var n=t.lastIndexOf("|");if(-1!==n)QE(t.substr(n+1),e)&&(t=t.substr(0,n));else QE(t,e)&&(t="");t||(t=e.href),e.data.hProperties.alt=t}}))}))}(tx),function(e,t){t.blockid=function(){return null},e.addTransformer((function(e){for(var t,n=e.children,i=function(e){var i=n[e];if("blockid"===i.type){if(e>0)n[e-1].id=i.id;return n.splice(e,1),e--,t=e,"continue"}if("list"===i.type)return Rw(i,"listItem",(function(e){var t=null;Rw(e,["list","blockid"],(function(e){return"list"===e.type?"skip":(t=e.id,!1)})),t&&(e.id=t)})),t=e,"continue";var r=null;Rw(i,"blockid",(function(e){r=e.id})),r&&(i.id=r),t=e},r=0;r<n.length;r++)i(r),r=t}))}(tx,ix),function(e){e.addTransformer((function(e,t){Rw(e,"heading",(function(e,n,i){var r=Hw(t,e);e.data={hProperties:{dataHeading:r}}}))}))}(tx),function(e,t){t.callout=function(e,t){var n=t.callout,i=n.color,r=null;if(i){i=i.replace(/^#([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return"#"+t+t+n+n+i+i}));var o=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);o&&(r="--callout-color: "+[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)].join(",")+";")}return e(t,"div",{className:"callout",dataCallout:n.type,dataCalloutIcon:n.icon,dataCalloutFold:n.fold,dataCalloutMetadata:n.data,style:r},qE(e,t))},t["callout-title"]=function(e,t){return e(t,"div",{className:"callout-title"},[e({},"div",{className:"callout-icon"}),e({},"div",{className:"callout-title-inner"},qE(e,t))])},t["callout-content"]=function(e,t){return e(t,"div",{className:"callout-content"},UE(qE(e,t),!0))},e.addTransformer((function(e){Rw(e,"blockquote",(function(e){var t=e.callout;if(t){e.type="callout";var n=[],i=e.children,r=i&&i[0];if(r&&r.position.start.line===e.position.start.line)if("paragraph"===r.type){for(var o=r.children,a=0,s=void 0;a<o.length;a++)if("break"===o[a].type){s=o[a];break}var l=i.slice(1);s?(n.push({type:"callout-title",position:{start:r.position.start,end:s.position.start},children:o.slice(0,a)}),r.position.start=s.position.end,r.children=o.slice(a+1),l.unshift(r)):n.push({type:"callout-title",position:r.position,children:o}),l.length>0&&n.push({type:"callout-content",position:{start:l[0].position.start,end:l[l.length-1].position.end},children:l})}else{n.push({type:"callout-title",position:r.position,children:[r]});var c=i[1];if(c){var u=c.position.start,h=i[i.length-1].position.end;n.push({type:"callout-content",position:{start:u,end:h},children:i.slice(1)})}}else{var p={start:e.position.start,end:e.position.start},d=t.type.trim().replace(/\-/g," ").toLowerCase();d=d.charAt(0).toUpperCase()+d.substr(1),n.push({type:"callout-title",position:p,children:[{type:"text",value:d,position:p}]}),r&&n.push({type:"callout-content",position:e.position,children:i})}e.children=n}}))}))}(tx,ix),function(e){function t(e){var t=e.properties;if(t&&!t.className){t.className="external-link",t.target="_blank",t.rel="noopener";var n="",i=e.children;i&&i.length>0&&(n=i[0].value),t.href!==n&&(t["aria-label"]=t.href,t["data-tooltip-position"]="top")}}e.addTransformer((function(e){Rw(e,{type:"element",tagName:"a"},t)}))}(nx),function(e,t){t.yaml=function(e,t){var n=t.value||"";return e(t.position,"pre",{className:"frontmatter"},[e(t,"code",{className:"language-yaml"},[Pw("text",n)])])}}(0,ix),function(e,t){var n=/^%%(.+?)%%/;Fw(e,"comment","text",(function(e,t,i){var r=n.exec(t);if(r){if(i)return!0;var o=e.now();return o.column+=2,o.offset+=2,e(r[0])({type:"comment",children:this.tokenizeInline(r[1],o)})}}),(function(e,t){return e.indexOf("%%",t)})),t.comment=function(){return null},Bw(e,"comment","fencedCode",(function(e,t,n){for(var i=t.length,r=0;r<i&&32===t.charCodeAt(r);)r++;for(var o=r;r<i&&37===t.charCodeAt(r);)r++;var a=r-o;if(!(a<2)){for(var s=r;r<i;){var l=t.charCodeAt(r);if(37===l)return;if(10===l)break;r++}if(n)return!0;for(var c=i,u=0;r<i;){if(37===t.charCodeAt(r)){if(a===++u){c=r+1;break}}else u=0;r++}var h=t.substring(s,c-a),p=e.now();return e(t.slice(0,c))({type:"comment",value:h,children:this.tokenizeInline(h,p)})}}));var i=e.prototype;Nw(i.interruptParagraph,"fencedCode","comment"),Nw(i.interruptList,"fencedCode","comment"),Nw(i.interruptBlockquote,"fencedCode","comment")}(ex,ix);var ox=/^---(\r?\n)/g,ax=/---(\r?\n|$)/g;function sx(e){ox.lastIndex=0;var t=ox.exec(e);if(!t)return null;var n=t.index,i=ox.lastIndex;ax.lastIndex=i;for(var r=ax.exec(e);r&&"\n"!==e.charAt(r.index-1);)r=ax.exec(e);if(!r)return null;var o=r.index,a=ax.lastIndex;return{frontMatter:e.slice(i,o),from:i,to:o,blockFrom:n,blockTo:a}}function lx(e){var t=e.children[0];return t&&"yaml"===t.type&&e.children.shift(),e}function cx(e){var t=e.children[0];if(t&&"yaml"===t.type)try{var n=FE(t.value,void 0,{});if(n&&"object"==typeof n&&!Array.isArray(n))return n||void 0}catch(e){return null}}function ux(e,t){(t=t||{}).allowDangerousHtml=!0,t.handlers=ix;for(var n=KE(e,t),i=0,r=nx.transformers;i<r.length;i++){(0,r[i])(n,"")}return $w()(n,{allowDangerousHtml:!0})}var hx=Object.prototype.hasOwnProperty;function px(e,t){if(!e)return null;if("string"==typeof t)return hx.call(e,t)?e[t]:null;for(var n in e)if(hx.call(e,n)&&t.test(n))return e[n];return null}function dx(e,t,n){if(!e)return null;var i=px(e,t);if(!i)return null;var r=[];if("string"==typeof i&&(i=i.split(/[,\n]/)),Array.isArray(i)){for(var o=0,a=i;o<a.length;o++){var s=a[o];if("string"==typeof s)if(n)for(var l=0,c=s.split(/\s/g);l<c.length;l++){var u=c[l];u&&r.push(u)}else(s=s.trim())&&r.push(s)}return 0===r.length?null:r}return null}function fx(e){return e?dx(e,/^alias(es)?$/i):null}function gx(e){if(!e)return null;var t=dx(e,/^tag(s)?$/i,!0);if(t)for(var n=0;n<t.length;n++){var i=t[n];"#"!==i.charAt(0)&&(t[n]="#"+i)}return t}function mx(e){return e?dx(e,/^cssclass(es)?$/i,!0):null}function vx(e){return Qw()(e)}function yx(e){var t=[];if(!e)return t;for(var n=0,i=e;n<i.length;n++){var r=i[n];t.push(bx(r))}return t}function bx(e){if(!e)return"";var t=e.type;if("iembed"===t)return e.href;if("listItem"===t){var n=yx(e.children);return 1===n.length?n[0]+"\n":n.join("\n")}if("tag"===t)return e.tag;var i=e.value||e.alt||e.title||e.hasOwnProperty("children")&&yx(e.children).join("")||"";return"paragraph"===t||"break"===t?i+="\n":i.endsWith("\n")&&(i=i.substring(0,i.length-1)),"tableCell"===t?i+=" ":"tableRow"===t&&(i+="\n"),i}function wx(e){return e.hasOwnProperty("position")}function kx(e){return e.hasOwnProperty("key")}function Cx(e){return e.hasOwnProperty("heading")}function Ex(e){return{line:e.line-1,col:e.column-1,offset:e.offset}}function xx(e){return{start:Ex(e.start),end:Ex(e.end)}}function Sx(e){var t=[],n=function(e,n,r){var o=e?e+"."+n:n;if("string"==typeof r){if(r.startsWith("[[")&&r.endsWith("]]")){var a=Yw(r.substring(2,r.length-2)),s=a.title,l=a.href;t.push({key:o,link:l,original:r,displayText:s})}}else i(o,r)},i=function(e,t){if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];n(e,String(i),r)}else if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&n(e,o,t[o])};return i("",e),t}function Mx(e,t){var n={links:[],embeds:[],tags:[],headings:[],sections:[],listItems:[],blocks:{}},i=rx(e),r=i.children[0];if(r&&"yaml"===r.type){var o=cx(i);o&&(n.frontmatter=o,n.frontmatterPosition=xx(r.position),n.frontmatterLinks=Sx(o))}for(var a=0,s=i.children;a<s.length;a++){var l=s[a],c=xx(l.position),u={type:l.type,position:c},h=l.id;h&&"string"==typeof h&&(u.id=h,n.blocks[h.toLowerCase()]={position:c,id:h}),n.sections.push(u)}return Rw(i,["heading","ilink","iembed","tag","listItem","footnoteDefinition"],(function(i,r,o){if("footnoteDefinition"===i.type)return Rw.SKIP;if("heading"===i.type&&"root"===o.type){var a=Hw(e,i);n.headings.push({position:xx(i.position),heading:a,level:i.depth||1})}else if("ilink"===i.type){var s=e.substring(i.position.start.offset,i.position.end.offset),l=i.href||"";!(u=i.title||"")&&i.converted&&(u=bx(i));var c={position:xx(i.position),link:l,original:s,displayText:u};t&&delete c.original,n.links.push(c)}else if("iembed"===i.type){s=e.substring(i.position.start.offset,i.position.end.offset),l=i.href||"";var u=i.title||"";c={position:xx(i.position),link:l,original:s,displayText:u};t&&delete c.original,n.embeds.push(c)}else if("tag"===i.type){var h=i.tag||"";n.tags.push({position:xx(i.position),tag:h})}else if("listItem"===i.type&&!i.synthetic){var p=xx(i.position),d=i.children;if(d&&d.length>1)for(var f=d.length-1;f>=0;f--){var g=d[f];if("list"!==g.type){p.end=Ex(g.position.end);break}g.listParentPosition=i.position}var m=0;"list"===o.type&&(o.listParentPosition?m=o.listParentPosition.start.line-1:0===(m=-(o.position.start.line-1))&&(m=-1));var v={position:p,parent:m},y=i.checklist;"string"==typeof y&&(v.task=y);var b=i.id;b&&"string"==typeof b&&(v.id=b,n.blocks[b.toLowerCase()]={position:p,id:b}),n.listItems.push(v)}})),0===n.links.length&&delete n.links,0===n.embeds.length&&delete n.embeds,0===n.tags.length&&delete n.tags,0===n.headings.length&&delete n.headings,(0===n.sections.length||t)&&delete n.sections,0===n.listItems.length&&delete n.listItems,0===Object.keys(n.blocks).length&&delete n.blocks,n}function Tx(e,t){if(!e)return e;if(e.links)for(var n=0,i=e.links;n<i.length;n++){t(i[n])}if(e.embeds)for(var r=0,o=e.embeds;r<o.length;r++){t(o[r])}if(e.tags)for(var a=0,s=e.tags;a<s.length;a++){t(s[a])}if(e.headings)for(var l=0,c=e.headings;l<c.length;l++){t(c[l])}if(e.sections)for(var u=0,h=e.sections;u<h.length;u++){t(h[u])}if(e.listItems)for(var p=0,d=e.listItems;p<d.length;p++){t(d[p])}if(e.blocks)for(var f in e.blocks)e.blocks.hasOwnProperty(f)&&t(e.blocks[f]);return e}function Dx(e){var t=e.start,n=e.end;return[t.line,t.col,t.offset,n.line,n.col,n.offset]}function Ax(e){var t=e.position;t&&(delete e.position,e.pos=Dx(t))}function Lx(e){return{start:{line:e[0],col:e[1],offset:e[2]},end:{line:e[3],col:e[4],offset:e[5]}}}function Px(e){var t=e.pos;t&&Array.isArray(t)&&6===t.length&&(delete e.pos,e.position=Lx(t))}function Ix(e){var t;if(e.frontmatter&&Array.isArray(e.frontmatter)&&(e.frontmatter=null,delete e.frontmatterPos,delete e.frontmatterLinks),e.frontmatter){var n=null!==(t=e.frontmatterPos)&&void 0!==t?t:e.frontmatter.pos;n&&(e.frontmatterPosition=Lx(n)),delete e.frontmatterPos,delete e.frontmatter.pos,e.frontmatterLinks||(e.frontmatterLinks=Sx(e.frontmatter))}return Tx(e,Px)}function Ox(e,t,n){return function(e,t,n){for(var i=0,r=e.length;i<r;){var o=(i+r)/2|0,a=t(e[o]);if(0===a)return o;a<0?i=o+1:r=o}return n?r:i}(e,(function(e){return t<e.position.start.offset?1:t>e.position.end.offset?-1:0}),n)}function Fx(e){return(e=_w(e).normalize("NFC")).split("#")[0]}function Bx(e){var t=(e=_w(e).normalize("NFC")).split("#")[0];return{path:t,subpath:e.substr(t.length)}}function Nx(e,t){return!!e&&(!0===Hx(e.links,t)||!0===Hx(e.embeds,t))}function Rx(e,t){return!!e&&(!0===Hx(e.frontmatterLinks,t)||(!0===Hx(e.links,t)||!0===Hx(e.embeds,t)))}function Hx(e,t){if(!e)return!1;for(var n=0,i=e;n<i.length;n++){if(!0===t(i[n]))return!0}return!1}function Vx(e){if(!e)return null;var t=[],n=gx(e.frontmatter);if(n)for(var i=0,r=n;i<r.length;i++){var o=r[i];t.push(o)}var a=e.tags;if(a)for(var s=0,l=a;s<l.length;s++){o=l[s];t.push(o.tag)}return t}var zx=/[!"#$%&()*+,.:;<=>?@^`{|}~\/\[\]\\\r\n]/g,qx=/([:#|^\\\r\n]|%%|\[\[|]])/g;function Ux(e){return e.replace(zx," ").replace(/\s+/g," ").trim()}function Wx(e){return e.replace(qx," ").replace(/\s+/g," ").trim()}function _x(e,t){if(!e||!t)return null;var n=t.split("#").filter((function(e){return!!e}));if(!n||0===n.length)return null;if(1===n.length){var i=n[0];if(i.startsWith("^")){var r=i.substr(1).toLowerCase(),o=e.blocks;if(o&&o.hasOwnProperty(r))for(var a in o)if(a.toLowerCase()===r&&o.hasOwnProperty(a)){var s=o[a],l=null;if(e.listItems)for(var c=0,u=e.listItems;c<u.length;c++){var h=u[c];if(h.id&&h.id.toLowerCase()===r){l=h;break}}return{type:"block",block:s,list:l,start:s.position.start,end:s.position.end}}}}var p=e.headings;if(!p||0===p.length)return null;for(var d=0,f=0,g=null,m=null,v=0,y=p;v<y.length;v++){var b=y[v];if(g&&b.level<=f){m=b;break}!g&&b.level>f&&Ux(b.heading).toLowerCase()===Ux(n[d]).toLowerCase()&&(d++,f=b.level,d===n.length&&(g=b))}return g?{type:"heading",current:g,next:m,start:g.position.start,end:m?m.position.start:null}:null}function jx(e,t,n,i){void 0===i&&(i=!1);var r="",o="",a="",s="";if("block"===n.type&&n.list){var l=function(e,t){var n=e.listItems;if(!n)return t;var i=n.indexOf(t);if(-1===i)return t;var r=new Set;r.add(t.position.start.line);for(var o=t,a=i+1;a<n.length;a++){var s=n[a];if(!r.has(s.parent))break;r.add(s.position.start.line),o=s}return o}(t,n.list),c=function(e,t){var n=e.position.start,i=t.position.end;return{start:n.offset-n.col,end:i.offset}}(n.list,l),u=c.start,h=c.end;r=e.substring(0,u),o=e.substring(h);var p=function(e){var t=e.split("\n"),n=t[0].match(/^\s*/)[0],i=n.replace(/\t/g,"    ").length;if(i>0)for(var r=0;r<t.length;r++){for(var o=t[r],a=0,s=0;a<o.length&&s<i;)s+="\t"===o.charAt(a)?4:1,a++;t[r]=o.substr(a)}return{indent:n,text:t.join("\n")}}(e.substring(u,h));e=p.text,a=p.indent}else{u=n.start.offset,h=n.end?n.end.offset:e.length;var d=u;i&&"heading"===n.type&&(d=n.current.position.end.offset+1,s=e.substring(u,d)),r=e.substring(0,u),o=e.substring(h),e=e.substring(d,h)}return{before:r,after:o,indent:a,heading:s,content:e}}var Gx=null,Kx=null;function Yx(e){e||(e=document);var t=e.body;t.on("mouseover","[aria-label]",Qx),t.on("mouseout","[aria-label]",Jx),t.addEventListener("mouseup",rS)}var Xx=null;function $x(){Xx&&(clearTimeout(Xx),Xx=null)}function Zx(e){return"true"===getComputedStyle(e).getPropertyValue("--no-tooltip").trim()}function Qx(e,t){ft(e,t)&&(wt(e)||Zx(t)||tS(t))}function Jx(e,t){if(ft(e,t)){rS();var n=e.relatedTarget;if(n&&n.matchParent){var i=n.matchParent("[aria-label]");if(i&&i.instanceOf(HTMLElement)){if(Zx(i))return;tS(i)}}}}var eS=new WeakMap;function tS(e){$x();var t=e.getAttribute("aria-label")||"";eS.has(e)&&(t=eS.get(e)(e));var n="bottom";e.hasAttribute("data-tooltip-position")&&(n=e.getAttribute("data-tooltip-position"));var i=[];e.hasAttribute("data-tooltip-classes")&&(i=(e.getAttribute("data-tooltip-classes")||"").split(" "));var r=750;e.hasAttribute("data-tooltip-delay")&&(r=parseInt(e.getAttribute("data-tooltip-delay")||""),isNaN(r)&&(r=750)),iS(e,t,{placement:n,classes:i,delay:r})}var nS=0;function iS(e,t,n){var i=Date.now(),r=(n=n||{}).placement,o=void 0===r?"bottom":r,a=n.classes,s=void 0===a?[]:a,l=n.gap,c=void 0===l?8:l,u=n.horizontalParent,h=n.delay,p=void 0===h?0:h;if(p>0&&(Gx||i>nS+100))return $x(),n.delay=0,void(Xx=window.setTimeout((function(){return iS(e,t,n)}),p));if(t){var d=e.doc,f=e.getBoundingClientRect(),g=f.top,m=f.left,v=f.width,y=f.height;if(u){var b=u.getBoundingClientRect();m=b.left,v=b.width}Gx&&Kx===e?Gx.setText(t):(rS(),Gx=createDiv({cls:"tooltip",text:t}));var w=Gx.createDiv("tooltip-arrow"),k=0,C=0;"bottom"===o?(k=g+y+c,C=m+v/2):"right"===o?(k=g+y/2,C=m+v+c,s.push("mod-right")):"left"===o?(k=g+y/2,C=m-c,s.push("mod-left")):"top"===o&&(k=g-c-5,C=m+v/2,s.push("mod-top")),Gx.addClasses(s),Gx.style.top="0px",Gx.style.left="0px",Gx.style.width="",Gx.style.height="",Gx.parentNode||d.body.appendChild(Gx);var E=Gx.getBoundingClientRect(),x=["bottom","top"].contains(o)?E.width/2:E.width,S="right"===o||"left"===o?E.height/2:E.height;"left"===o?C-=x:"top"===o&&(k-=S);var M=d.body.clientHeight,T=d.body.clientWidth;if(k+S>M&&(k=M-S-c),k=Math.max(k,c),"top"===o||"bottom"===o){if(C+x>T)C-=D=C+x+c-T,w.style.left="initial",w.style.right=x-D-c/2+"px";else if(C-c-x<0){var D;C+=D=-(C-c-x),w.style.right="initial",w.style.left=x-D-c/2+"px"}C=Math.max(C,c)}Gx.style.top=k+"px",Gx.style.left=C+"px",Gx.style.width=E.width+"px",Gx.style.height=E.height+"px",Kx=e}}function rS(){$x(),Gx&&(nS=Date.now(),Gx.detach(),Gx=null,Kx=null)}function oS(e,t){var n=t||{},i=n.placement,r=n.classes,o=n.delay;i&&"bottom"!==i&&e.setAttribute("data-tooltip-position",i),r&&e.setAttribute("data-tooltip-classes",r.join(" ")),o&&e.setAttribute("data-tooltip-delay",String(o))}function aS(e,t,n){e.setAttribute("aria-label",t),oS(e,n),Kx===e&&iS(e,t,n)}function sS(e,t,n){e.setAttribute("aria-label",""),eS.set(e,t),oS(e,n),Kx===e&&iS(e,t(e),n)}var lS={none:[],copy:["copy"],copyLink:["copy","link"],copyMove:["copy","move"],link:["link"],linkMove:["link","move"],move:["move"],all:["copy","link","move"],uninitialized:[]};function cS(e,t){t&&function(e,t){if("none"===t)return!0;var n=lS[e.dataTransfer.effectAllowed];return!!n&&n.contains(t)}(e,t)&&(e.dataTransfer.dropEffect=t)}var uS=function(){function e(e){var t=this;this.ghostEl=null,this.actionEl=null,this.draggable=null,this.sourceEls=null,this.sourceClass="",this.hoverEl=null,this.hoverClass="",this.overlayEl=createDiv("workspace-drop-overlay"),this.shouldHideOverlay=!1,this.dragStart=null,this.onTouchEnd=function(e){0===e.touches.length&&t.onDragEnd()},this.app=e,window.addEventListener("dragstart",this.onDragStartGlobal.bind(this)),window.addEventListener("dragover",this.onDragOverFirst.bind(this),{capture:!0}),window.addEventListener("dragover",this.onDragOver.bind(this));var n=function(e){e.view===window?t.onDragEnd():setTimeout((function(){return t.onDragEnd()}))};window.addEventListener("dragend",n),window.addEventListener("drop",n)}return e.prototype.onDragStartGlobal=function(e){if(rS(),Lt.isIosApp&&(vt(),navigator.vibrate(200)),!this.draggable){var t=window.getSelection();if(!(t.rangeCount>0)||t.getRangeAt(0).collapsed){var n=e.target;if("IMG"===n.nodeName){var i=n.src,r=this.app.vault.resolveFileUrl(i);r&&this.onDragStart(e,this.dragFile(e,r))}}}},e.prototype.onDragOverFirst=function(){var e=this;this.setAction(null),this.updateHover(null,""),this.shouldHideOverlay=!0,setTimeout((function(){e.shouldHideOverlay&&e.hideOverlay()}))},e.prototype.onDragOver=function(e){Lt.isMobile&&(e.preventDefault(),"none"===e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"));var t=e.clientX,n=e.clientY;if(0!==t||0!==n){var i=this.ghostEl,r=this.dragStart;if(i){Lt.isMobile?(t-=i.offsetWidth/2,n-=i.offsetHeight+20):(t+=5,n+=5),i.style.left=t+"px",i.style.top=n+"px";var o=e.doc;i.parentNode!==o.body&&o.body.appendChild(i),i.show()}r&&!r.moved&&(Math.abs(r.evt.clientX-e.clientX)>5||Math.abs(r.evt.clientY-e.clientY)>5)&&(r.moved=!0)}},e.prototype.onDragEnd=function(){var e=this.ghostEl,t=this.dragStart;if(e&&(e.detach(),this.ghostEl=null),this.dragStart=null,this.draggable=null,this.updateSource(null,""),this.updateHover(null,""),document.body.removeClass("is-grabbing"),window.removeEventListener("touchend",this.onTouchEnd),this.removeOverlay(),t&&!t.moved){var n=t.evt;n.target.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:n.ctrlKey,altKey:n.altKey,metaKey:n.metaKey,shiftKey:n.shiftKey,screenX:n.screenX,screenY:n.screenY,bubbles:!0,cancelable:!0,clientX:n.clientX,clientY:n.clientY}))||navigator.vibrate(200)}},e.prototype.onDragStart=function(e,t){var n=e.dataTransfer;this.draggable=t,Lt.isMobile&&(this.dragStart={evt:e,moved:!1},window.addEventListener("touchend",this.onTouchEnd),kw(e.targetNode,"contextmenu")),document.body.addClass("is-grabbing"),n.effectAllowed="all";var i=this.ghostEl;i&&i.detach();var r=this.ghostEl=e.doc.body.createDiv("drag-ghost"),o=r.createDiv("drag-ghost-self");t.icon&&gb(o,t.icon),t.title&&o.createSpan({text:t.title}),this.actionEl=r.createDiv("drag-ghost-action"),hS(e);var a=!0;if(n.items.length>0)for(var s=0,l=Array.from(n.items);s<l.length;s++){var c=l[s];if("string"!==c.kind||""!==n.getData(c.type)){a=!1;break}}a&&n.setData("text/plain",t.title||"-")},e.prototype.handleDrag=function(e,t){var n=this;e.draggable=!0,e.addEventListener("dragstart",(function(e){var i=t(e);i&&n.onDragStart(e,i)}))},e.prototype.dragFile=function(e,t,n){return Ew(e.dataTransfer,this.app.getObsidianUrl(t)),{source:n,type:"file",icon:"lucide-file",title:de(t.path),file:t}},e.prototype.dragFolder=function(e,t,n){return Cw(e.dataTransfer,t.name),{source:n,type:"folder",icon:"lucide-folder-open",title:t.name,file:t}},e.prototype.dragFiles=function(e,t,n){if(0===t.length)return null;for(var i,r=0,o=0,a=[],s=0,l=t;s<l.length;s++){var c=l[s];c instanceof Xy?(r++,a.push(this.app.getObsidianUrl(c))):c instanceof $y&&o++}return o>0&&r>0?i="".concat(r," files and ").concat(o," folders"):o>0?i="".concat(o," folders"):r>0&&(i="".concat(r," files")),Ew(e.dataTransfer,a.join("\n")),{source:n,type:"files",icon:"lucide-files",title:i,files:t}},e.prototype.dragLink=function(e,t,n,i){var r=this.app.metadataCache.getFirstLinkpathDest(Fx(t),n),o=t,a=t;return r&&(o=this.app.getObsidianUrl(r),a=de(r.path)),Ew(e.dataTransfer,o),{source:i,type:"link",icon:"lucide-link",title:a,linktext:t,sourcePath:n,file:r}},e.prototype.handleDrop=function(e,t,n){var i=this,r=function(e){if((n||i.draggable)&&!e.defaultPrevented){var r=t(e,i.draggable,!0);if(r){e.preventDefault();var o=r.action,a=r.dropEffect,s=r.hoverEl,l=r.hoverClass;o&&i.setAction(o),a&&(e.dataTransfer.dropEffect=a),s&&l&&i.updateHover(s,l)}}};e.addEventListener("dragover",r),e.addEventListener("dragenter",r),e.addEventListener("drop",(function(e){(n||i.draggable)&&(e.defaultPrevented||t(e,i.draggable,!1)&&e.preventDefault())}))},e.prototype.setAction=function(e){var t=this.actionEl;t&&(e?(t.setText(e),t.show()):t.hide())},e.prototype.updateSource=function(e,t){if(this.sourceEls)for(var n=0,i=this.sourceEls;n<i.length;n++){i[n].removeClass(this.sourceClass)}if(this.sourceEls=e,this.sourceClass=t,e)for(var r=0,o=e;r<o.length;r++){o[r].addClass(t)}},e.prototype.updateHover=function(e,t){e!==this.hoverEl&&(this.hoverEl&&this.hoverEl.removeClass(this.hoverClass),this.hoverEl=e,this.hoverClass=t,e&&e.addClass(t))},e.prototype.showOverlay=function(e,t){var n=this.overlayEl;n.parentNode!==e.body&&e.body.appendChild(n),n.show(),n.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"),n.style.width=t.width+"px",n.style.height=t.height+"px",this.shouldHideOverlay=!1},e.prototype.hideOverlay=function(){this.overlayEl.hide()},e.prototype.removeOverlay=function(){this.overlayEl.detach()},e}();function hS(e){var t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.doc.body.append(t),e.dataTransfer.setDragImage(t,0,0),setTimeout((function(){return t.detach()}),0)}var pS=Object.entries,dS=Object.setPrototypeOf,fS=Object.isFrozen,gS=Object.getPrototypeOf,mS=Object.getOwnPropertyDescriptor,vS=Object.freeze,yS=Object.seal,bS=Object.create,wS="undefined"!=typeof Reflect&&Reflect,kS=wS.apply,CS=wS.construct;kS||(kS=function(e,t,n){return e.apply(t,n)}),vS||(vS=function(e){return e}),yS||(yS=function(e){return e}),CS||(CS=function(e,t){return new(e.bind.apply(e,w([void 0],t,!1)))});var ES,xS=BS(Array.prototype.forEach),SS=BS(Array.prototype.pop),MS=BS(Array.prototype.push),TS=BS(String.prototype.toLowerCase),DS=BS(String.prototype.toString),AS=BS(String.prototype.match),LS=BS(String.prototype.replace),PS=BS(String.prototype.indexOf),IS=BS(String.prototype.trim),OS=BS(RegExp.prototype.test),FS=(ES=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CS(ES,t)});function BS(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return kS(e,t,i)}}function NS(e,t,n){n=n||TS,dS&&dS(e,null);for(var i=t.length;i--;){var r=t[i];if("string"==typeof r){var o=n(r);o!==r&&(fS(t)||(t[i]=o),r=o)}e[r]=!0}return e}function RS(e){for(var t=bS(null),n=0,i=pS(e);n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}return t}function HS(e,t){for(;null!==e;){var n=mS(e,t);if(n){if(n.get)return BS(n.get);if("function"==typeof n.value)return BS(n.value)}e=gS(e)}return function(e){return console.warn("fallback value for",e),null}}var VS=vS(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zS=vS(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qS=vS(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),US=vS(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),WS=vS(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),_S=vS(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jS=vS(["#text"]),GS=vS(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),KS=vS(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YS=vS(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),XS=vS(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$S=yS(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ZS=yS(/<%[\w\W]*|[\w\W]*%>/gm),QS=yS(/\${[\w\W]*}/gm),JS=yS(/^data-[\-\w.\u00B7-\uFFFF]/),eM=yS(/^aria-[\-\w]+$/),tM=yS(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nM=yS(/^(?:\w+script|data):/i),iM=yS(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rM=yS(/^html$/i),oM=Object.freeze({__proto__:null,MUSTACHE_EXPR:$S,ERB_EXPR:ZS,TMPLIT_EXPR:QS,DATA_ATTR:JS,ARIA_ATTR:eM,IS_ALLOWED_URI:tM,IS_SCRIPT_OR_DATA:nM,ATTR_WHITESPACE:iM,DOCTYPE_NAME:rM}),aM=function(){return"undefined"==typeof window?null:window},sM=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var lM=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aM(),n=function(t){return e(t)};if(n.version="3.0.1",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var i=t.document,r=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,c=t.NodeFilter,u=t.NamedNodeMap,h=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,p=t.HTMLFormElement,d=t.DOMParser,f=t.trustedTypes,g=l.prototype,m=HS(g,"cloneNode"),v=HS(g,"nextSibling"),y=HS(g,"childNodes"),b=HS(g,"parentNode");if("function"==typeof a){var k=r.createElement("template");k.content&&k.content.ownerDocument&&(r=k.content.ownerDocument)}var C=sM(f,i),E=C?C.createHTML(""):"",x=r.implementation,S=r.createNodeIterator,M=r.createDocumentFragment,T=r.getElementsByTagName,D=i.importNode,A={};n.isSupported="function"==typeof pS&&"function"==typeof b&&x&&void 0!==x.createHTMLDocument;var L,P,I=oM.MUSTACHE_EXPR,O=oM.ERB_EXPR,F=oM.TMPLIT_EXPR,B=oM.DATA_ATTR,N=oM.ARIA_ATTR,R=oM.IS_SCRIPT_OR_DATA,H=oM.ATTR_WHITESPACE,V=oM.IS_ALLOWED_URI,z=null,q=NS({},w(w(w(w(w([],VS,!0),zS,!0),qS,!0),WS,!0),jS,!0)),U=null,W=NS({},w(w(w(w([],GS,!0),KS,!0),YS,!0),XS,!0)),_=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,G=null,K=!0,Y=!0,X=!1,$=!0,Z=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!0,oe=!1,ae="user-content-",se=!0,le=!1,ce={},ue=null,he=NS({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pe=null,de=NS({},["audio","video","img","source","image","track"]),fe=null,ge=NS({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml",be=ye,we=!1,ke=null,Ce=NS({},[me,ve,ye],DS),Ee=["application/xhtml+xml","text/html"],xe="text/html",Se=null,Me=r.createElement("form"),Te=function(e){return e instanceof RegExp||e instanceof Function},De=function(e){Se&&Se===e||(e&&"object"==typeof e||(e={}),e=RS(e),L=L=-1===Ee.indexOf(e.PARSER_MEDIA_TYPE)?xe:e.PARSER_MEDIA_TYPE,P="application/xhtml+xml"===L?DS:TS,z="ALLOWED_TAGS"in e?NS({},e.ALLOWED_TAGS,P):q,U="ALLOWED_ATTR"in e?NS({},e.ALLOWED_ATTR,P):W,ke="ALLOWED_NAMESPACES"in e?NS({},e.ALLOWED_NAMESPACES,DS):Ce,fe="ADD_URI_SAFE_ATTR"in e?NS(RS(ge),e.ADD_URI_SAFE_ATTR,P):ge,pe="ADD_DATA_URI_TAGS"in e?NS(RS(de),e.ADD_DATA_URI_TAGS,P):de,ue="FORBID_CONTENTS"in e?NS({},e.FORBID_CONTENTS,P):he,j="FORBID_TAGS"in e?NS({},e.FORBID_TAGS,P):{},G="FORBID_ATTR"in e?NS({},e.FORBID_ATTR,P):{},ce="USE_PROFILES"in e&&e.USE_PROFILES,K=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Z=e.SAFE_FOR_TEMPLATES||!1,Q=e.WHOLE_DOCUMENT||!1,te=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,oe=e.SANITIZE_NAMED_PROPS||!1,se=!1!==e.KEEP_CONTENT,le=e.IN_PLACE||!1,V=e.ALLOWED_URI_REGEXP||V,be=e.NAMESPACE||ye,_=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(_.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(Y=!1),ne&&(te=!0),ce&&(z=NS({},w([],jS,!0)),U=[],!0===ce.html&&(NS(z,VS),NS(U,GS)),!0===ce.svg&&(NS(z,zS),NS(U,KS),NS(U,XS)),!0===ce.svgFilters&&(NS(z,qS),NS(U,KS),NS(U,XS)),!0===ce.mathMl&&(NS(z,WS),NS(U,YS),NS(U,XS))),e.ADD_TAGS&&(z===q&&(z=RS(z)),NS(z,e.ADD_TAGS,P)),e.ADD_ATTR&&(U===W&&(U=RS(U)),NS(U,e.ADD_ATTR,P)),e.ADD_URI_SAFE_ATTR&&NS(fe,e.ADD_URI_SAFE_ATTR,P),e.FORBID_CONTENTS&&(ue===he&&(ue=RS(ue)),NS(ue,e.FORBID_CONTENTS,P)),se&&(z["#text"]=!0),Q&&NS(z,["html","head","body"]),z.table&&(NS(z,["tbody"]),delete j.tbody),vS&&vS(e),Se=e)},Ae=NS({},["mi","mo","mn","ms","mtext"]),Le=NS({},["foreignobject","desc","title","annotation-xml"]),Pe=NS({},["title","style","font","a","script"]),Ie=NS({},zS);NS(Ie,qS),NS(Ie,US);var Oe=NS({},WS);NS(Oe,_S);var Fe=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:be,tagName:"template"});var n=TS(e.tagName),i=TS(t.tagName);return!!ke[e.namespaceURI]&&(e.namespaceURI===ve?t.namespaceURI===ye?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===i||Ae[i]):Boolean(Ie[n]):e.namespaceURI===me?t.namespaceURI===ye?"math"===n:t.namespaceURI===ve?"math"===n&&Le[i]:Boolean(Oe[n]):e.namespaceURI===ye?!(t.namespaceURI===ve&&!Le[i])&&(!(t.namespaceURI===me&&!Ae[i])&&(!Oe[n]&&(Pe[n]||!Ie[n]))):!("application/xhtml+xml"!==L||!ke[e.namespaceURI]))},Be=function(e){MS(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Ne=function(e,t){try{MS(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){MS(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!U[e])if(te||ne)try{Be(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Re=function(e){var t,n;if(ee)e="<remove></remove>"+e;else{var i=AS(e,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===L&&be===ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=C?C.createHTML(e):e;if(be===ye)try{t=(new d).parseFromString(o,L)}catch(e){}if(!t||!t.documentElement){t=x.createDocument(be,"template",null);try{t.documentElement.innerHTML=we?E:o}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),be===ye?T.call(t,Q?"html":"body")[0]:Q?t.documentElement:a},He=function(e){return S.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ve=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},ze=function(e){return"object"==typeof s?e instanceof s:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},qe=function(e,t,i){A[e]&&xS(A[e],(function(e){e.call(n,t,i,Se)}))},Ue=function(e){var t;if(qe("beforeSanitizeElements",e,null),Ve(e))return Be(e),!0;var i=P(e.nodeName);if(qe("uponSanitizeElement",e,{tagName:i,allowedTags:z}),e.hasChildNodes()&&!ze(e.firstElementChild)&&(!ze(e.content)||!ze(e.content.firstElementChild))&&OS(/<[/\w]/g,e.innerHTML)&&OS(/<[/\w]/g,e.textContent))return Be(e),!0;if(!z[i]||j[i]){if(!j[i]&&_e(i)){if(_.tagNameCheck instanceof RegExp&&OS(_.tagNameCheck,i))return!1;if(_.tagNameCheck instanceof Function&&_.tagNameCheck(i))return!1}if(se&&!ue[i]){var r=b(e)||e.parentNode,o=y(e)||e.childNodes;if(o&&r)for(var a=o.length-1;a>=0;--a)r.insertBefore(m(o[a],!0),v(e))}return Be(e),!0}return e instanceof l&&!Fe(e)?(Be(e),!0):"noscript"!==i&&"noembed"!==i||!OS(/<\/no(script|embed)/i,e.innerHTML)?(Z&&3===e.nodeType&&(t=e.textContent,t=LS(t,I," "),t=LS(t,O," "),t=LS(t,F," "),e.textContent!==t&&(MS(n.removed,{element:e.cloneNode()}),e.textContent=t)),qe("afterSanitizeElements",e,null),!1):(Be(e),!0)},We=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Me))return!1;if(Y&&!G[t]&&OS(B,t));else if(K&&OS(N,t));else if(!U[t]||G[t]){if(!(_e(e)&&(_.tagNameCheck instanceof RegExp&&OS(_.tagNameCheck,e)||_.tagNameCheck instanceof Function&&_.tagNameCheck(e))&&(_.attributeNameCheck instanceof RegExp&&OS(_.attributeNameCheck,t)||_.attributeNameCheck instanceof Function&&_.attributeNameCheck(t))||"is"===t&&_.allowCustomizedBuiltInElements&&(_.tagNameCheck instanceof RegExp&&OS(_.tagNameCheck,n)||_.tagNameCheck instanceof Function&&_.tagNameCheck(n))))return!1}else if(fe[t]);else if(OS(V,LS(n,H,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==PS(n,"data:")||!pe[e]){if(X&&!OS(R,LS(n,H,"")));else if(n)return!1}else;return!0},_e=function(e){return e.indexOf("-")>0},je=function(e){var t,i,r,o;qe("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(o=a.length;o--;){var l=(t=a[o]).name,c=t.namespaceURI;if(i="value"===l?t.value:IS(t.value),r=P(l),s.attrName=r,s.attrValue=i,s.keepAttr=!0,s.forceKeepAttr=void 0,qe("uponSanitizeAttribute",e,s),i=s.attrValue,!s.forceKeepAttr&&(Ne(l,e),s.keepAttr))if($||!OS(/\/>/i,i)){Z&&(i=LS(i,I," "),i=LS(i,O," "),i=LS(i,F," "));var u=P(e.nodeName);if(We(u,r,i)){if(!oe||"id"!==r&&"name"!==r||(Ne(l,e),i=ae+i),C&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(c);else switch(f.getAttributeType(u,r)){case"TrustedHTML":i=C.createHTML(i);break;case"TrustedScriptURL":i=C.createScriptURL(i)}try{c?e.setAttributeNS(c,l,i):e.setAttribute(l,i),SS(n.removed)}catch(e){}}}else Ne(l,e)}qe("afterSanitizeAttributes",e,null)}},Ge=function e(t){var n,i=He(t);for(qe("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)qe("uponSanitizeShadowNode",n,null),Ue(n)||(n.content instanceof o&&e(n.content),je(n));qe("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){var t,r,a,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((we=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ze(e)){if("function"!=typeof e.toString)throw FS("toString is not a function");if("string"!=typeof(e=e.toString()))throw FS("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||De(c),n.removed=[],"string"==typeof e&&(le=!1),le){if(e.nodeName){var u=P(e.nodeName);if(!z[u]||j[u])throw FS("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(r=(t=Re("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?t=r:t.appendChild(r);else{if(!te&&!Z&&!Q&&-1===e.indexOf("<"))return C&&ie?C.createHTML(e):e;if(!(t=Re(e)))return te?null:ie?E:""}t&&ee&&Be(t.firstChild);for(var h=He(le?e:t);a=h.nextNode();)Ue(a)||(a.content instanceof o&&Ge(a.content),je(a));if(le)return e;if(te){if(ne)for(l=M.call(t.ownerDocument);t.firstChild;)l.appendChild(t.firstChild);else l=t;return(U.shadowroot||U.shadowrootmod)&&(l=D.call(i,l,!0)),l}var p=Q?t.outerHTML:t.innerHTML;return Q&&z["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&OS(rM,t.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+p),Z&&(p=LS(p,I," "),p=LS(p,O," "),p=LS(p,F," ")),C&&ie?C.createHTML(p):p},n.setConfig=function(e){De(e),J=!0},n.clearConfig=function(){Se=null,J=!1},n.isValidAttribute=function(e,t,n){Se||De({});var i=P(e),r=P(t);return We(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(A[e]=A[e]||[],MS(A[e],t))},n.removeHook=function(e){if(A[e])return SS(A[e])},n.removeHooks=function(e){A[e]&&(A[e]=[])},n.removeAllHooks=function(){A={}},n}();function cM(e,t,n,i){for(var r=e.getAttribute(t),o=[],a=0,s=r.split(n);a<s.length;a++){var l=s[a];l=l.trim().toLowerCase(),i.hasOwnProperty(l)&&i[l]&&o.push(l)}var c=o.join(n);c!==r&&e.setAttribute(t,c)}window.DOMPurify=lM,lM.addHook("afterSanitizeAttributes",(function(e){e.instanceOf(HTMLAnchorElement)&&(e.setAttribute("target","_blank"),e.hasAttribute("rel")||e.setAttribute("rel","noopener"))}));var uM={ALLOW_UNKNOWN_PROTOCOLS:!0,RETURN_DOM_FRAGMENT:!0,FORBID_TAGS:["style"],ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","allowfullscreen","allow","data-tooltip-position"]};function hM(e){return document.importNode(lM.sanitize(e,uM),!0)}var pM=["bmp","png","jpg","jpeg","gif","svg","webp"],dM=["mp3","wav","m4a","3gp","flac","ogg","oga","opus"],fM=["mp4","webm","ogv","mov","mkv"],gM=["pdf"],mM=["md"],vM=["canvas"],yM=["json","css","js"],bM=[].concat(pM,dM,fM,gM,mM,vM);function wM(e){return bM.contains(e)}function kM(e,t,n){var i=e.fileManager,r=e.vault;if("file"===t.type)return[i.generateMarkdownLink(t.file,n)];if("files"===t.type){for(var o=[],a=0,s=t.files;a<s.length;a++){(p=s[a])instanceof Xy&&o.push(i.generateMarkdownLink(p,n))}return o}if("link"===t.type){if(t.file){var l=Bx(t.linktext).subpath;return[i.generateMarkdownLink(t.file,n,l)]}return[t.linktext]}if("heading"===t.type){l=Wx(t.heading.heading);return[i.generateMarkdownLink(t.file,n,"#"+l)]}if("bookmarks"===t.type){o=[];for(var c=0,u=t.items;c<u.length;c++){var h=u[c].item;if("file"===h.type){var p,d=h.path,f=(l=h.subpath,h.title);(p=r.getAbstractFileByPath(d))instanceof Xy&&o.push(i.generateMarkdownLink(p,n,l,f))}}return o}return[]}var CM=function(){function e(e){this.app=e.app,this.info=e}return e.prototype.getPath=function(){var e;return(null===(e=this.info.file)||void 0===e?void 0:e.path)||""},e.prototype.handlePaste=function(e){if(e.defaultPrevented||this.app.workspace.trigger("editor-paste",e,this.info.editor,this.info),e.defaultPrevented)return!0;var t=this.handleDataTransfer(e.clipboardData);if(t)return this.info.editor.replaceSelection(t,"paste"),e.preventDefault(),!0;e.clipboardData.getData("obsidian/properties")&&this.info instanceof iK&&this.info.handlePaste(e);var n=Sw(e.clipboardData,"clipboard",!0);return n.length>0&&(e.preventDefault(),this.insertFiles(n)),!1},e.prototype.handleDragOver=function(e){var t=this.app.dragManager.draggable;if(t){if(ye?e.shiftKey:e.altKey)return;if("file"===t.type)cS(e,"link"),this.app.dragManager.setAction(rf.interface.dragAndDrop.insertLinkHere());else if("files"===t.type)cS(e,"link"),this.app.dragManager.setAction(rf.interface.dragAndDrop.insertLinksHere());else if("link"===t.type)cS(e,"link"),this.app.dragManager.setAction(rf.interface.dragAndDrop.insertLinkHere());else if("heading"===t.type)cS(e,"link"),this.app.dragManager.setAction(rf.interface.dragAndDrop.insertLinkHere());else if("bookmarks"===t.type){t.items.filter((function(e){return"file"===e.item.type})).length>0&&(cS(e,"link"),this.app.dragManager.setAction(rf.interface.dragAndDrop.insertLinkHere()))}}else e.ctrlKey?cS(e,"link"):cS(e,"copy")},e.prototype.handleDrop=function(e){var t=this.app,n=this.info,i=null,r=t.dragManager.draggable;if(r){if(n instanceof iK&&(ye?e.shiftKey:e.altKey))return e.preventDefault(),n.handleDrop(e,r,!1),!0;i=kM(this.app,r,this.getPath()).join("\n")}else{if(e.defaultPrevented||this.app.workspace.trigger("editor-drop",e,this.info.editor,this.info),e.defaultPrevented)return!0;e.shiftKey||(i=this.handleDataTransfer(e.dataTransfer)),i||(i=this.handleDropIntoEditor(e))}var o=this.info.editor,a=o.posAtMouse(e);return o.setCursor(a),!!String.isString(i)&&(o.replaceSelection(i),o.focus(),e.preventDefault(),!0)},e.prototype.handleDropIntoEditor=function(e){if(ye?e.altKey:e.ctrlKey){for(var t=[],n=0,i=Sw(e.dataTransfer,"drop",!1);n<i.length;n++){var r=i[n].filepath;if(r){var o=this.app.vault.resolveFilePath(r);if(o)t.push(this.app.fileManager.generateMarkdownLink(o,this.getPath()));else{var a=ie(pe(r)),s=le(a),l="md"===s?ae(a):a,c=jw(r);c=c.startsWith("/")?"file://"+c:"file:///"+c;var u="[".concat(l,"](").concat(c,")");pM.contains(s)&&(u="!"+u),t.push(u)}}}return 0===t.length?null:t.join("\n")}var h=Sw(e.dataTransfer,"drop",!0);return h.length>0&&e.preventDefault(),this.insertFiles(h),null},e.prototype.handleDataTransfer=function(e){var t=this,n=e.getData("text/html");if(n){if(!this.app.vault.getConfig("autoConvertHtml"))return null;var i=hM(n),r=createEl("div");if(r.appendChild(i),e.files.length>0&&/^<img [^>]+>$/.test(r.innerHTML.trim()))return null;for(var o=[],a=0,s=i.findAll("img, audio, video");a<s.length;a++){var l=s[a];if(l.instanceOf(HTMLImageElement)||l.instanceOf(HTMLMediaElement)){if(Lt.isDesktopApp&&l.src.startsWith(Lt.resourcePathPrefix)){l.src="file:///"+l.src.substring(Lt.resourcePathPrefix.length);var c=this.app.vault.resolveFileUrl(l.src);c instanceof Xy&&(l.src=this.app.metadataCache.fileToLinktext(c,this.getPath(),!0))}l.src.startsWith("data:")&&l.src.length>1e3&&(o.push(l.src),l.detach())}}return v(t,void 0,void 0,(function(){var e,t,n,i,r,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:for(t in e=[],o)e.push(t);n=0,h.label=1;case 1:if(!(n<e.length))return[3,7];i=e[n],h.label=2;case 2:return h.trys.push([2,5,,6]),r=i.match(/^data:([\w/\-.]+);base64,(.*)/),a=r[1],l="image/jpeg"===a,(s="image/png"===a)||l?(c=z(r[2]),[4,this.saveAttachment("Pasted image",s?"png":"jpg",c,!0)]):[3,4];case 3:h.sent(),h.label=4;case 4:return[3,6];case 5:return u=h.sent(),console.error(u),[3,6];case 6:return n++,[3,1];case 7:return[2]}}))})),Oy(r.innerHTML.trim())}var u=e.getData("text/plain")||"",h=e.getData("text/uri-list");if(h&&h.toLowerCase()!==u.toLowerCase()){var p=le(ie(h)),d="[".concat(u,"](").concat(h,")");return pM.contains(p)&&(d="!"+d),d}return null},e.prototype.insertFiles=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:t=0,u.label=1;case 1:return t<e.length?(n=e[t],i=n.name,r=n.extension,o=n.filepath,a=n.data,s=t<e.length-1,o&&(l=this.app.vault.resolveFilePath(o))?(this.insertAttachmentEmbed(l,s),[3,4]):[4,a]):[3,5];case 2:return(c=u.sent())?[4,this.saveAttachment(i,r,c,s)]:[3,4];case 3:u.sent(),u.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))},e.prototype.saveAttachment=function(e,t,n,i){return v(this,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return"Pasted image"===e&&(e+=" "+window.moment().format("YYYYMMDDHHmmss")),[4,this.app.saveAttachment(e,t,n)];case 1:return(r=o.sent())&&this.insertAttachmentEmbed(r,i),[2]}}))}))},e.prototype.insertAttachmentEmbed=function(e,t){var n=this.app.fileManager.generateMarkdownLink(e,this.getPath());t&&(n+="\n\n"),this.info.editor.replaceSelection(n)},e.prototype.onContextMenu=function(e,t){return void 0===t&&(t=!1),v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M=this;return y(this,(function(T){switch(T.label){case 0:return e.defaultPrevented||Lt.isMobile&&e.instanceOf(PointerEvent)&&"mouse"===e.pointerType&&-1===e.button?[2]:(n=this.app,(i=this.info.editor).hasFocus()?(r=null,o=i.posAtMouse(e),Lt.isDesktopApp&&(e.button||e.buttons||e.which||(a=i.getCursor("from"),s=i.getCursor("to"),Ef(a,o)&&Ef(o,s)||(o=i.getCursor("head"),r=i.listSelections(),e.stopPropagation()))),o?(l=(new fw).addSections(["title","correction","spellcheck","open","edit","action","view","info","","danger"]),c=!0,u=!0,h=!0,d=Lt.isDesktopApp&&e.win.electron,f=!1,d&&e.isTrusted?[4,jt(e)]:[3,2]):[2]):[2]);case 1:if(!(g=T.sent())||e.defaultPrevented)return[2];if(p=d.remote.webContents.fromId(g.webContentsId),S=g.editFlags||{},c=S.canCut,u=S.canCopy,h=S.canPaste,p&&g.misspelledWord){if(0===(m=g.dictionarySuggestions||[]).length)l.addItem((function(e){return e.setSection("correction").setTitle(rf.editor.spellcheck.noSuggestion())}));else for(m.length>6&&(m=m.slice(0,6)),b=function(e){l.addItem((function(t){return t.setSection("correction").setTitle(e).setIcon("lucide-repeat").onClick((function(){l.hide(),p.replaceMisspelling(e)}))}))},w=0,k=m;w<k.length;w++)C=k[w],b(C);l.addItem((function(e){return e.setSection("spellcheck").setTitle(rf.editor.spellcheck.addToDictionary()).setIcon("lucide-folder-tree").onClick((function(){p.session.addWordToSpellCheckerDictionary(g.misspelledWord),p.replaceMisspelling(g.misspelledWord)}))}))}return[3,3];case 2:f=!0,T.label=3;case 3:if(r&&i.setSelections(r),E=i.getClickableTokenAt(o))"internal-link"!==E.type&&"external-link"!==E.type||l.addItem((function(e){return e.setSection("edit").setTitle(rf.editor.menu.editLink()).setIcon("lucide-text-cursor-input").onClick((function(){i.focus(),i.setSelection(E.start,E.end)}))})),"internal-link"===E.type?n.workspace.handleLinkContextMenu(l,E.text,this.getPath()):"external-link"===E.type?n.workspace.handleExternalLinkContextMenu(l,E.text):E.type;else if(Lt.isMobile&&!t)return[2];return n.workspace.trigger("editor-menu",l,i,this.info),Lt.isDesktopApp&&Lt.isMacOS&&(x=i.getSelection().trim()).length>0&&l.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.lookupSelection({selection:Id(x,40)})).setIcon("lucide-library").onClick((function(){return v(M,void 0,void 0,(function(){return y(this,(function(e){return d.remote.getCurrentWebContents().showDefinitionForSelection(),[2]}))}))}))})),Lt.isMobile||(l.addItem((function(e){return e.setSection("edit").setTitle(rf.interface.menu.cut()).setIcon("lucide-scissors").setDisabled(!c).onClick((function(){return v(M,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return d&&p?(p.cut(),[3,3]):[3,1];case 1:return e=i.getSelection(),i.replaceSelection(""),[4,navigator.clipboard.writeText(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}))})),l.addItem((function(e){return e.setSection("edit").setTitle(rf.interface.menu.copy()).setIcon("lucide-copy").setDisabled(!u).onClick((function(){return v(M,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return d&&p?(p.copy(),[3,3]):[3,1];case 1:return e=i.getSelection(),[4,navigator.clipboard.writeText(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}))})),l.addItem((function(e){return e.setSection("edit").setTitle(rf.interface.menu.paste()).setIcon("lucide-clipboard-check").setDisabled(!h).onClick((function(){return v(M,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return d&&p?(p.paste(),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:e=t.sent(),i.replaceSelection(e),t.label=3;case 3:return[2]}}))}))}))})),l.addItem((function(e){return e.setSection("edit").setTitle(rf.interface.menu.pasteAsPlainText()).setIcon("lucide-clipboard-type").setDisabled(!h).onClick((function(){return v(M,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return d&&p?(p.pasteAndMatchStyle(),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:e=t.sent(),i.replaceSelection(e),t.label=3;case 3:return[2]}}))}))}))})),l.addItem((function(e){return e.setSection("edit").setTitle(rf.interface.menu.selectAll()).setIcon("lucide-box-select").onClick((function(){var e=i.lineCount()-1;i.setSelection({line:0,ch:0},{line:e,ch:i.getLine(e).length})}))}))),Lt.isMobile&&wb(),l.showAtMouseEvent(e),f&&e.preventDefault(),[2]}}))}))},e}(),EM=ca.line({attributes:{class:"cm-active"}}),xM=Ba.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){for(var t=-1,n=[],i=0,r=e.state.selection.ranges;i<r.length;i++){var o=r[i],a=e.lineBlockAt(o.head);a.from>t&&(n.push(EM.range(a.from)),t=a.from)}return ca.set(n)},e}(),{decorations:function(e){return e.decorations}}),SM=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elementClass="cm-active",t}return f(t,e),t}(Su)),MM=Mu.compute(["selection"],(function(e){for(var t=[],n=-1,i=0,r=e.selection.ranges;i<r.length;i++){var o=r[i],a=e.doc.lineAt(o.head).from;a>n&&(n=a,t.push(SM.range(a)))}return Pr.of(t)})),TM={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},DM=dr.define({map:function(e,t){var n=t.mapPos(e,-1,Si.TrackAfter);return null==n?void 0:n}}),AM=dr.define({map:function(e,t){return t.mapPos(e)}}),LM=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(Tr));LM.startSide=1,LM.endSide=-1;var PM=_i.define({create:function(){return Pr.empty},update:function(e,t){if(t.selection){var n=t.state.doc.lineAt(t.selection.main.head).from,i=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(i,-1)&&(e=Pr.empty)}e=e.map(t.changes);for(var r=function(t){t.is(DM)?e=e.update({add:[LM.range(t.value,t.value+1)]}):t.is(AM)&&(e=e.update({filter:function(e){return e!=t.value}}))},o=0,a=t.effects;o<a.length;o++){r(a[o])}return e}});var IM="()[]{}<>";function OM(e){for(var t=0;t<IM.length;t+=2)if(IM.charCodeAt(t)==e)return IM.charAt(t+1);return Ci(e<128?e:e+1)}function FM(e,t){return e.languageDataAt("closeBrackets",t)[0]||TM}var BM="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),NM=jl.inputHandler.of((function(e,t,n,i){if((BM?e.composing:e.compositionStarted)||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==Ei(ki(i,0))||t!=r.from||n!=r.to)return!1;var o=function(e,t){for(var n=FM(e,e.selection.main.head),i=n.brackets||TM.brackets,r=0,o=i;r<o.length;r++){var a=o[r],s=OM(ki(a,0));if(t==a)return s==a?UM(e,a,i.indexOf(a+a+a)>-1):zM(e,a,s,n.before||TM.before);if(t==s&&HM(e,e.selection.main.from))return qM(e,a,s)}return null}(e.state,i);return!!o&&(e.dispatch(o),!0)})),RM=[{key:"Backspace",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=FM(t,t.selection.main.head).brackets||TM.brackets,r=null,o=t.changeByRange((function(e){if(e.empty)for(var n=function(e,t){var n=e.sliceString(t-2,t);return Ei(ki(n,0))==n.length?n:n.slice(1)}(t.doc,e.head),o=0,a=i;o<a.length;o++){var s=a[o];if(s==n&&VM(t.doc,e.head)==OM(ki(s,0)))return{changes:{from:e.head-s.length,to:e.head+s.length},range:Bi.cursor(e.head-s.length),userEvent:"delete.backward"}}return{range:r=e}}));return r||n(t.update(o,{scrollIntoView:!0})),!r}}];function HM(e,t){var n=!1;return e.field(PM).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n}function VM(e,t){var n=e.sliceString(t,t+2);return n.slice(0,Ei(ki(n,0)))}function zM(e,t,n,i){var r=null,o=e.changeByRange((function(o){if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:DM.of(o.to+t.length),range:Bi.range(o.anchor+t.length,o.head+t.length)};var a=VM(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:DM.of(o.head+t.length),range:Bi.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function qM(e,t,n){var i=null,r=e.selection.ranges.map((function(t){return t.empty&&VM(e.doc,t.head)==n?Bi.cursor(t.head+n.length):i=t}));return i?null:e.update({selection:Bi.create(r,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((function(e){var t=e.from;return AM.of(t)}))})}function UM(e,t,n){var i=null,r=e.changeByRange((function(r){if(!r.empty){var o=t,a=t;return n&&r.from>=2&&e.doc.sliceString(r.from-2,r.from)===t+t&&("\n"!==e.doc.sliceString(r.from,r.from+1)&&(o=t+"\n"),"\n"!==e.doc.sliceString(r.to-1,r.to)&&(a="\n"+t)),{changes:[{insert:o,from:r.from},{insert:a,from:r.to}],effects:DM.of(r.to+o.length),range:Bi.range(r.anchor+o.length,r.head+o.length)}}var s=r.head,l=VM(e.doc,s);if(l==t){if(WM(e,s))return{changes:{insert:t+t,from:s},effects:DM.of(s+t.length),range:Bi.cursor(s+t.length)};if(HM(e,s)){var c=n&&e.sliceDoc(s,s+3*t.length)==t+t+t;return{range:Bi.cursor(s+t.length*(c?3:1)),effects:AM.of(s)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&WM(e,s-2*t.length))return{changes:{insert:t+"\n"+t+t+t,from:s},effects:DM.of(s+t.length),range:Bi.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=Cr.Word){var u=e.sliceDoc(s-1,s);if(u!=t&&e.charCategorizer(s)(u)!=Cr.Word&&!function(e,t,n){for(var i=Hh(e).resolveInner(t,-1),r=0;r<5;r++){if(e.sliceDoc(i.from,i.from+n.length)==n)return!0;var o=i.to==t&&i.parent;if(!o)break;i=o}return!1}(e,s,t))return{changes:{insert:t+t,from:s},effects:DM.of(s+t.length),range:Bi.cursor(s+t.length)}}}return{range:i=r}}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function WM(e,t){var n=Hh(e).resolveInner(t+1);return n.parent&&n.from==t}var _M=Hi.define({combine:function(e){return Mr(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(e,t){return Math.min(e,t)},drawRangeCursor:function(e,t){return e||t}})}});function jM(e){return e.startState.facet(_M)!=e.startState.facet(_M)}var GM=pc({above:!0,markers:function(e){for(var t=e.state,n=t.facet(_M),i=[],r=0,o=t.selection.ranges;r<o.length;r++){var a=o[r],s=a==t.selection.main;if(a.empty?!s:n.drawRangeCursor)for(var l=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=a.empty?a:Bi.cursor(a.head,a.head>a.anchor?-1:1),u=0,h=oc.forRange(e,l,c);u<h.length;u++){var p=h[u];i.push(p)}}return i},update:function(e,t){e.transactions.some((function(e){return e.scrollIntoView}))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");var n=jM(e);return n&&KM(e.state,t),e.docChanged||e.selectionSet||n},mount:function(e,t){KM(t.state,e)},class:"cm-cursorLayer"});function KM(e,t){t.style.animationDuration=e.facet(_M).cursorBlinkRate+"ms"}var YM=pc({above:!1,markers:function(e){return e.state.selection.ranges.filter((function(t){return t!==e.state.selection.main})).map((function(t){return t.empty?[]:oc.forRange(e,"cm-selectionBackground",t)})).reduce((function(e,t){return e.concat(t)}),[])},update:function(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||jM(e)},class:"cm-selectionLayer"});function XM(e,t){e.toggleClass("is-collapsed",t);var n=e.find(".collapse-icon");n&&n.toggleClass("is-collapsed",t)}function $M(e,t,n){var i=null;return e.between(t,n,(function(e,t){(!i||i.from>e)&&(i={from:e,to:t})})),i}var ZM=function(e){function t(t){var n=e.call(this)||this;return n.folded=t,n}return f(t,e),t.prototype.eq=function(e){return e.folded==this.folded},t.prototype.toDOM=function(e){var t=createDiv("cm-fold-indicator");t.appendText("​");var n=t.createDiv("collapse-indicator collapse-icon");return XM(t,this.folded),gb(n,"right-triangle"),t.addEventListener("mousedown",(function(e){e.preventDefault()})),t.addEventListener("click",(function(n){var i=e.posAtDOM(t),r=e.state.doc.lineAt(i),o=$M(Tp(e.state),r.from,r.to);if(o)e.dispatch({effects:xp.of(o)});else{var a=kp(e.state,r.from,r.to);a&&e.dispatch({effects:Ep.of(a)})}})),t},t}(sa),QM=ca.widget({widget:new ZM(!0)}),JM=ca.widget({widget:new ZM(!1)}),eT=function(){function e(e){this.decorations=ca.none,this.wasComposing=!1,this.buildDeco(e)}return e.prototype.update=function(e){if(e.view.composing)return this.decorations=this.decorations.map(e.changes),void(this.wasComposing=!0);(e.docChanged||e.viewportChanged||e.startState.facet(Zh)!==e.state.facet(Zh)||Tp(e.startState)!==Tp(e.state)||this.wasComposing)&&(this.wasComposing=!1,this.buildDeco(e.view))},e.prototype.buildDeco=function(e){for(var t=new Ir,n=Tp(e.state),i=0,r=e.viewportLineBlocks;i<r.length;i++){var o=r[i],a=null;if($M(n,o.from,o.to)?a=QM:kp(e.state,o.from,o.to)&&(a=JM),a){var s=e.state.doc.sliceString(o.from,o.to),l=o.from+s.match(/^\s*/)[0].length;t.add(l,l,a)}}this.decorations=t.finish()},e}(),tT=Ba.define((function(e){return new eT(e)}),{decorations:function(e){return e.decorations}}),nT=ca.mark({class:"cm-indent"}),iT=ca.mark({class:"cm-indent cm-active-indent"}),rT=Ba.fromClass(function(){function e(e){this.decorations=this.getDeco(e)}return e.prototype.update=function(e){(e.docChanged||e.viewportChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){var t=new Ir,n=e.state.doc,i=/^[\s>]+/,r=n.lineAt(e.state.selection.main.from),o="",a="",s=r.text.match(Sf);if(s)if(o=s[1],s[2])a=" ".repeat(s[2].length);else for(var l=r.number-1;l>0;){var c=n.line(l),u=c.text.match(Sf);if(!u)break;if(u[2]||u[1]!==o){var h=u[1]||"";u[2]&&o.startsWith(h)&&u[0].length<=o.length&&(r=c,o=u[1],a=" ".repeat(u[2].length));break}l--}for(var p=r.number+1;p<=n.lines;){var d=n.line(p).text;if(!d.startsWith(o))break;if(d=d.substr(o.length),a){if(d.startsWith(a)){p++;continue}a=""}if(!/^(\t| {4})/.test(d))break;p++}for(var f=0,g=e.viewportLineBlocks;f<g.length;f++){var m=g[f],v=n.lineAt(m.from);if(h=v.text.match(i))for(var y=h[0],b=0,w=r.number<v.number&&v.number<p;b<y.length;){var k=y.charAt(b),C=m.from+b,E=!1,x=w&&b===o.length;if(">"===k)b++," "===y.charAt(b)&&b++;else if("\t"===k)E=!0,b++;else{for(var S=!0,M=b+4,T=b;T<M;T++)if(" "!==y.charAt(T)){b=T,S=!1;break}if(!S){b++;continue}E=!0,b=M}E&&t.add(C,m.from+b,x?iT:nT)}}return t.finish()},e}(),{decorations:function(e){return e.decorations}});function oT(e){var t=Sf.exec(e);return t&&t[0]?t[0]:null}function aT(e,t,n){var i=!1;return e.iterate({from:t,to:n,enter:function(e){var t=e.type,n=t.prop(Dd);n&&n.contains("HyperMD-codeblock")&&(i=!0);var r=t.prop(Td);r&&r.contains("hmd-indented-code")&&(i=!0)}}),i}var sT=function(){function e(e){var t=this;this.decorations=ca.none,this.indentCache=new Map,this.markCache=new Map,this.requestUpdateDom=rt(this.updateDom.bind(this),0),this.view=e;var n=e.contentDOM;this.observer=new MutationObserver((function(i){for(var r=new Set,o=0,a=i;o<a.length;o++){for(var s=a[o].target;s.parentNode&&s.parentNode!==n;)s=s.parentNode;s&&n.contains(s)&&r.add(s)}for(var l=0,c=Array.from(r);l<c.length;l++){var u=c[l];if(u.instanceOf(HTMLElement)&&u.hasClass("cm-line")){var h=e.posAtDOM(u),p=e.state.doc.lineAt(h),d=t.indentCache.get(p.number);d&&(d.dirty=!0)}}})),this.observer.observe(n,{subtree:!0,childList:!0,characterData:!0}),this.buildDeco(e)}return e.prototype.destroy=function(){this.observer.disconnect()},e.prototype.update=function(t){var n=this.indentCache;bf(t.transactions,e.clearCache)&&(n.clear(),this.markCache.clear()),(t.docChanged||t.viewportChanged||t.geometryChanged||t.selectionSet||t.focusChanged||this.tree!==Hh(t.view.state))&&this.buildDeco(t.view)},e.prototype.buildDeco=function(t){var n=this.indentCache,i=t.defaultCharacterWidth,r=new Ir,o=this.markCache,a=Hh(t.state);this.tree=a;for(var s=0,l=t.viewportLineBlocks;s<l.length;s++){var c=l[s],u=t.state.doc.lineAt(c.from),h=u.number,p=oT(u.text);if(p&&!aT(a,u.from,u.from+p.length)){var d=void 0,f=n.get(h);if((d=f&&f.text.length===p.length?f.size:Math.floor(Wr(p,t.state.tabSize)*i))>0){var g=o.get(d);g||(g=ca.line({attributes:{style:"text-indent:".concat(-d,"px;padding-inline-start:").concat(e.basePadding+d,"px")}}),o.set(d,g)),r.add(u.from,u.from,g)}}else n.delete(h)}this.decorations=r.finish(),this.requestUpdateDom()},e.prototype.updateDom=function(){var t=this.view,n=this.indentCache,i=t.contentDOM;if(i.offsetParent){for(var r=this.tree,o=[],a=0,s=Array.from(i.childNodes);a<s.length;a++){if((f=s[a]).instanceOf(HTMLElement)&&f.hasClass("cm-line")){var l=t.posAtDOM(f),c=t.state.doc.lineAt(l);if(r.length<c.to)break;if((g=oT(c.text))&&!aT(r,c.from,c.from+g.length))(w=n.get(c.number))&&w.text===g&&!w.dirty||o.push({lineEl:f,pos:c.from,line:c.number,text:g})}}for(var u=[],h=0,p=o;h<p.length;h++){var d=p[h],f=d.lineEl,g=(l=d.pos,c=d.line,d.text),m=t.coordsAtPos(l,1),v=t.coordsAtPos(l+g.length,1),y=f.offsetWidth;if(m&&v){var b=t.textDirectionAt(l);if((S=Math.floor(Math.abs(b===ja.LTR?v.right-m.left:v.left-m.right)))&&S>y/2){if(!(v=t.coordsAtPos(l+g.length,-1)))continue;S=Math.floor(Math.abs(b===ja.LTR?v.right-m.left:v.left-m.right))}if(S&&!(Math.abs(v.top-m.top)>1)){var w,k=!1;(w=n.get(c))&&w.size===S?(w.text=g,w.dirty=!1):(n.set(c,{text:g,size:S,dirty:!1}),k=!0),k&&u.push({lineEl:f,size:S})}}}for(var C=0,E=u;C<E.length;C++){var x=E[C],S=(f=x.lineEl,x.size);f.style.textIndent="".concat(-S,"px"),f.style.paddingInlineStart="".concat(e.basePadding+S,"px")}}},e.basePadding=4,e.clearCache=dr.define(),e}(),lT=Ba.define((function(e){return new sT(e)}),{decorations:function(e){return e.decorations}}),cT=function(){function e(e,t,n,i,r,o,a,s,l){this.left=e,this.top=t,this.height=n,this.fontFamily=i,this.fontSize=r,this.fontWeight=o,this.color=a,this.className=s,this.letter=l}return e.prototype.draw=function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e},e.prototype.adjust=function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.className=this.className,e.textContent=this.letter},e.prototype.eq=function(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.className==e.className&&this.letter==e.letter},e}(),uT=function(){function e(e,t){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=t,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}return e.prototype.setBlinkRate=function(){this.cursorLayer.style.animationDuration="1200ms"},e.prototype.update=function(e){(e.selectionSet||e.geometryChanged||e.viewportChanged||bf(e.transactions,bF))&&(this.scheduleRedraw(),this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink")},e.prototype.scheduleRedraw=function(){this.view.requestMeasure(this.measureReq)},e.prototype.readPos=function(){for(var e=this.view.state,t=[],n=0,i=e.selection.ranges;n<i.length;n++){var r=i[n],o=r==e.selection.main,a=pT(this.cm,this.view,r,o);a&&t.push(a)}return{cursors:t}},e.prototype.drawSel=function(e){var t=this,n=e.cursors;if(n.length!=this.cursors.length||n.some((function(e,n){return!e.eq(t.cursors[n])}))){var i=this.cursorLayer.children;if(i.length!==n.length){this.cursorLayer.textContent="";for(var r=0,o=n;r<o.length;r++){var a=o[r];this.cursorLayer.appendChild(a.draw())}}else n.forEach((function(e,t){return e.adjust(i[t])}));this.cursors=n}},e.prototype.destroy=function(){this.cursorLayer.remove()},e}(),hT=$i.highest(jl.theme({".cm-vimMode .cm-line":{caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",border:"none",whiteSpace:"pre"},"&.cm-focused .cm-fat-cursor":{background:"var(--interactive-accent)",color:"var(--text-on-accent)"},"&:not(.cm-focused) .cm-fat-cursor":{outline:"solid 1px #ff9696",color:"transparent !important"}}));function pT(e,t,n,i){var r,o,a=t.dom.ownerDocument.defaultView.HTMLElement,s=n.head,l=!1,c=e.state.vim;if(c&&(!c.insertMode||e.state.overwrite)){if(l=!0,c.visualBlock&&!i)return null;n.anchor<n.head&&s--}if(l){var u=t.coordsAtPos(s,1);if(!u)return null;var h=function(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==ja.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}(t),p=t.contentDOM,d=t.domAtPos(s);if(d){p=d.node;var f=d.node.childNodes[d.offset];if(f){for(;f instanceof a&&f.firstChild instanceof a;)f=f.firstChild;p=f}}p=p instanceof a?p:p.parentNode;var g=getComputedStyle(p),m=s<t.state.doc.length&&t.state.sliceDoc(s,s+1);m&&/[\uDC00-\uDFFF]/.test(m)&&s>1&&(s--,m=t.state.sliceDoc(s,s+1));var v=u.left,y=null===(o=(r=t).coordsForChar)||void 0===o?void 0:o.call(r,s);if(y&&(v=y.left),m&&"\n"!=m&&"\r"!=m)if("\t"==m){m=" ";var b=t.coordsAtPos(s+1,-1);b&&(v=b.left-(b.left-u.left)/parseInt(g.tabSize))}else/[\uD800-\uDBFF]/.test(m)&&s<t.state.doc.length-1&&(m+=t.state.sliceDoc(s+1,s+2));else m=" ";var w=u.bottom-u.top;return new cT(v-h.left,u.top-h.top,w,g.fontFamily,g.fontSize,g.fontWeight,g.color,i?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",m)}return null}function dT(e,t){var n=t.ch,i=t.line+1;if(i<1)return 0;if(i>e.lines)return e.length;var r=e.line(i);return Math.min(r.from+Math.max(0,n),r.to)}function fT(e,t){if(t<0||t>e.length)return null;var n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}var gT=function(e,t){this.line=e,this.ch=t};function mT(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||[]).concat(n)}}function vT(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var i=e._handlers,r=i&&i[t];if(r){var o=r.indexOf(n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function yT(e,t){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=null===(n=e._handlers)||void 0===n?void 0:n[t];if(o)for(var a=0;a<o.length;++a)o[a].apply(o,i)}function bT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)for(var i=0;i<e.length;++i)e[i].apply(e,t)}var wT,kT={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},CT={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1};try{wT=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(e){wT=/[\w]/}function ET(e,t){var n=e.cm6,i="input.type.compose";if(e.curOp&&(e.curOp.lastChange||(i="input.type.compose.start")),t.annotations&&Array.isArray(t.annotations))try{t.annotations.some((function(e){"input"==e.value&&(e.value=i)}))}catch(e){console.error(e)}else t.userEvent=i;return n.dispatch(t)}function xT(e,t){var n;e.curOp&&(e.curOp.$changeStart=void 0),(t?Zf:Qf)(e.cm6);var i=null===(n=e.curOp)||void 0===n?void 0:n.$changeStart;null!=i&&e.cm6.dispatch({selection:{anchor:i}})}var ST={};"Left|Right|Up|Down|Backspace|Delete".split("|").forEach((function(e){ST[e]=function(t){return nc(t.cm6,{key:e},"editor")}}));var MT=function(){function e(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}return e.prototype.openDialog=function(e,t,n){return PT(this,e,t,n)},e.prototype.openNotification=function(e,t){return function(e,t,n){DT(e,s);var i,r=TT(e,t,n&&n.bottom),o=!1,a=n&&void 0!==n.duration?n.duration:5e3;function s(){o||(o=!0,clearTimeout(i),r.remove(),LT(e,r))}r.onclick=function(e){e.preventDefault(),s()},AT(e,r),a&&(i=window.setTimeout(s,a));return s}(this,e,t)},e.prototype.on=function(e,t){mT(this,e,t)},e.prototype.off=function(e,t){vT(this,e,t)},e.prototype.signal=function(e,t,n){yT(this,e,t,n)},e.prototype.indexFromPos=function(e){return dT(this.cm6.state.doc,e)},e.prototype.posFromIndex=function(e){return fT(this.cm6.state.doc,e)},e.prototype.foldCode=function(e){var t=this.cm6,n=t.state.selection.ranges,i=dT(this.cm6.state.doc,e),r=Bi.create([Bi.range(i,i)],0).ranges;t.state.selection.ranges=r,Lp(t),t.state.selection.ranges=n},e.prototype.firstLine=function(){return 0},e.prototype.lastLine=function(){return this.cm6.state.doc.lines-1},e.prototype.lineCount=function(){return this.cm6.state.doc.lines},e.prototype.setCursor=function(e,t){"object"==typeof e&&(t=e.ch,e=e.line);var n=dT(this.cm6.state.doc,{line:e,ch:t});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp,userEvent:"select"}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()},e.prototype.getCursor=function(e){var t=this.cm6.state.selection.main,n="head"!=e&&e?"anchor"==e?t.anchor:"start"==e?t.from:"end"==e?t.to:null:t.head;if(null==n)throw new Error("Invalid cursor type");return this.posFromIndex(n)},e.prototype.listSelections=function(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map((function(t){return{anchor:fT(e,t.anchor),head:fT(e,t.head)}}))},e.prototype.setSelections=function(e,t){var n=this.cm6.state.doc,i=e.map((function(e){return Bi.range(dT(n,e.anchor),dT(n,e.head))}));this.cm6.dispatch({selection:Bi.create(i,t)})},e.prototype.setSelection=function(e,t,n){var i=this.cm6.state.doc,r=[Bi.range(dT(i,e),dT(i,t))];this.cm6.dispatch({selection:Bi.create(r,0)}),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},e.prototype.getLine=function(e){var t=this.cm6.state.doc;return e<0||e>=t.lines?"":this.cm6.state.doc.line(e+1).text},e.prototype.getLineHandle=function(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new gT(e,0))}},e.prototype.getLineNumber=function(e){var t=this.$lineHandleChanges;if(!t)return null;for(var n=e.index,i=0;i<t.length;i++)if(null==(n=t[i].changes.mapPos(n,1,Si.TrackAfter)))return null;var r=this.posFromIndex(n);return 0==r.ch?r.line:null},e.prototype.releaseLineHandles=function(){this.$lineHandleChanges=void 0},e.prototype.getRange=function(e,t){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(dT(n,e),dT(n,t))},e.prototype.replaceRange=function(e,t,n){n||(n=t);var i=this.cm6.state.doc;ET(this,{changes:{from:dT(i,t),to:dT(i,n),insert:e}})},e.prototype.replaceSelection=function(e){ET(this,this.cm6.state.replaceSelection(e))},e.prototype.replaceSelections=function(e){ET(this,{changes:this.cm6.state.selection.ranges.map((function(t,n){return{from:t.from,to:t.to,insert:e[n]||""}}))})},e.prototype.getSelection=function(){return this.getSelections().join("\n")},e.prototype.getSelections=function(){var e=this.cm6;return e.state.selection.ranges.map((function(t){return e.state.sliceDoc(t.from,t.to)}))},e.prototype.somethingSelected=function(){return this.cm6.state.selection.ranges.some((function(e){return!e.empty}))},e.prototype.getInputField=function(){return this.cm6.contentDOM},e.prototype.clipPos=function(e){var t=this.cm6.state.doc,n=e.ch,i=e.line+1;i<1&&(i=1,n=0),i>t.lines&&(i=t.lines,n=Number.MAX_VALUE);var r=t.line(i);return n=Math.min(Math.max(0,n),r.to-r.from),new gT(i-1,n)},e.prototype.getValue=function(){return this.cm6.state.doc.toString()},e.prototype.setValue=function(e){var t=this.cm6;return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},selection:Bi.range(0,0)})},e.prototype.focus=function(){return this.cm6.focus()},e.prototype.blur=function(){return this.cm6.contentDOM.blur()},e.prototype.defaultTextHeight=function(){return this.cm6.defaultLineHeight},e.prototype.findMatchingBracket=function(e){var t=this.cm6.state,n=dT(t.doc,e),i=pd(t,n+1,-1);return i&&i.end||(i=pd(t,n,1))&&i.end?{to:fT(t.doc,i.end.from)}:{to:void 0}},e.prototype.scanForBracket=function(e,t,n,i){return function(e,t,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,a=r&&r.maxScanLines||1e3,s=[],l=function(e){return e&&e.bracketRegex||/[(){}[\]]/}(r),c=n>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a),u=t.line;u!=c;u+=n){var h=e.getLine(u);if(h){var p=n>0?0:h.length-1,d=n>0?h.length:-1;if(!(h.length>o))for(u==t.line&&(p=t.ch-(n<0?1:0));p!=d;p+=n){var f=h.charAt(p);if(l.test(f)){var g=IT[f];if(g&&">"==g.charAt(1)==n>0)s.push(f);else{if(!s.length)return{pos:new gT(u,p),ch:f};s.pop()}}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}(this,e,t,0,i)},e.prototype.indentLine=function(e,t){t?this.indentMore():this.indentLess()},e.prototype.indentMore=function(){uv(this.cm6)},e.prototype.indentLess=function(){hv(this.cm6)},e.prototype.execCommand=function(t){if("indentAuto"==t)e.commands.indentAuto(this);else if("goLineLeft"==t)Kg(this.cm6);else if("goLineRight"==t){Gg(this.cm6);var n=this.cm6.state,i=n.selection.main.head;i<n.doc.length&&"\n"!==n.sliceDoc(i,i+1)&&xg(this.cm6)}else console.log(t+" is not implemented")},e.prototype.setBookmark=function(e,t){var n=(null==t?void 0:t.insertLeft)?1:-1,i=this.indexFromPos(e);return new NT(this,i,n)},e.prototype.addOverlay=function(e){var t=e.query,n=new _v({regexp:!0,search:t.source,caseSensitive:!/i/.test(t.flags)});if(n.valid){n.forVim=!0,this.cm6Query=n;var i=Qv.of(n);return this.cm6.dispatch({effects:i}),n}},e.prototype.removeOverlay=function(e){if(this.cm6Query){this.cm6Query.forVim=!1;var t=Qv.of(this.cm6Query);this.cm6.dispatch({effects:t})}},e.prototype.getSearchCursor=function(e,t){var n=this,i=null,r=null;null==t.ch&&(t.ch=Number.MAX_VALUE);var o=dT(n.cm6.state.doc,t),a=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,(function(e,t){return t||"\\"+e}));function s(t,n,i){return void 0===n&&(n=0),void 0===i&&(i=t.length),new Ev(t,a,{ignoreCase:e.ignoreCase},n,i)}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var t=n.cm6.state.doc;if(e){var a=i?i.from==i.to?i.to-1:i.from:o;i=function(e,t){for(var i=n.cm6.state.doc,r=1;;r++){for(var o=Math.max(e,t-1e4*r),a=s(i,o,t),l=null;!a.next().done;)l=a.value;if(l&&(o==e||l.from>o+10))return l;if(o==e)return null}}(0,a)}else{var l=i?i.from==i.to?i.to+1:i.to:o;i=function(e){var t=n.cm6.state.doc;if(e>t.length)return null;var i=s(t,e).next();return i.done?null:i.value}(l)}return r=i&&{from:fT(t,i.from),to:fT(t,i.to),match:i.match},i&&i.match},from:function(){return null==r?void 0:r.from},to:function(){return null==r?void 0:r.to},replace:function(e){i&&(ET(n,{changes:{from:i.from,to:i.to,insert:e}}),i.to=i.from+e.length,r&&(r.to=fT(n.cm6.state.doc,i.to)))}}},e.prototype.findPosV=function(e,t,n,i){for(var r=this.cm6,o=r.state.doc,a="page"==n?r.dom.clientHeight:0,s=dT(o,e),l=Bi.range(s,s,i),c=Math.round(Math.abs(t)),u=t>0,h=0;h<c;h++)if("page"==n)l=r.moveVertically(l,u,a);else if("line"==n){var p=r.moveVertically(l,u),d=r.getNextPosUpDown;if(d){var f=d(r.state,l,u);f&&Math.abs(p.head-l.head)>Math.abs(f.head-l.head)&&(p=f)}l=p}var g=fT(o,l.head);return(t<0&&0==l.head&&0!=i&&0==e.line&&0!=e.ch||t>0&&l.head==o.length&&g.ch!=i&&e.line==g.line)&&(g.hitSide=!0),g},e.prototype.charCoords=function(e,t){var n,i,r=this.cm6,o=dT(r.state.doc,e),a=r.coordsAtPos(o)||{left:0,top:0,bottom:0},s=a.left,l=a.top,c=a.bottom,u=0,h=0;return"div"===t?(u=(n=r.contentDOM.getBoundingClientRect()).left,h=n.top):(u=(i=r.scrollDOM.getBoundingClientRect()).left,h=i.top,u-=r.scrollDOM.scrollLeft,h-=r.scrollDOM.scrollTop),{left:s-u,top:l-h,bottom:c-h}},e.prototype.coordsChar=function(e,t){var n,i,r=this.cm6,o=0,a=0;"div"===t?(o=(n=r.contentDOM.getBoundingClientRect()).left,a=n.top):(o=(i=r.scrollDOM.getBoundingClientRect()).left,a=i.top,o-=r.scrollDOM.scrollLeft,a-=r.scrollDOM.scrollTop);var s={x:e.left+o,y:e.top+a},l=this.cm6.posAtCoords(s)||0;return fT(this.cm6.state.doc,l)},e.prototype.getScrollInfo=function(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}},e.prototype.scrollTo=function(e,t){null!=e&&(this.cm6.scrollDOM.scrollLeft=e),null!=t&&(this.cm6.scrollDOM.scrollTop=t)},e.prototype.scrollInfo=function(){return 0},e.prototype.scrollIntoView=function(e,t){e?this.cm6.dispatch({effects:jl.scrollIntoView(this.indexFromPos(e),{yMargin:t})}):this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})},e.prototype.getWrapperElement=function(){return this.cm6.dom},e.prototype.getMode=function(){return{name:this.getOption("mode")}},e.prototype.setSize=function(e,t){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=t+"px",this.refresh()},e.prototype.refresh=function(){this.cm6.measure()},e.prototype.destroy=function(){this.removeOverlay()},e.prototype.getLastEditEnd=function(){return this.posFromIndex(this.$lastChangeEndOffset)},e.prototype.onChange=function(e){var t=this;for(var n in this.$lineHandleChanges&&this.$lineHandleChanges.push(e),this.marks){this.marks[n].update(e.changes)}this.virtualSelection&&(this.virtualSelection=Bi.create(this.virtualSelection.ranges.map((function(t){return t.map(e.changes)})),this.virtualSelection.mainIndex));var i=this.curOp=this.curOp||{};e.changes.iterChanges((function(e,n,r,o,a){(null==i.$changeStart||i.$changeStart>r)&&(i.$changeStart=r),t.$lastChangeEndOffset=o;var s={text:a.toJSON()};i.lastChange?i.lastChange.next=i.lastChange=s:i.lastChange=i.change=s}),!0),i.changeHandlers||(i.changeHandlers=this._handlers.change&&this._handlers.change.slice())},e.prototype.onSelectionChange=function(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0},e.prototype.operation=function(e){var t;this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{t=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return t},e.prototype.onBeforeEndOperation=function(){var e=this.curOp,t=!1;e&&(e.change&&bT(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(bT(e.cursorActivityHandlers,this,null),e.isVimOp&&(t=!0)),this.curOp=null),t&&this.scrollIntoView()},e.prototype.moveH=function(e,t){if("char"==t){var n=this.getCursor();this.setCursor(n.line,n.ch+e)}},e.prototype.setOption=function(e,t){switch(e){case"keyMap":this.state.keyMap=t;break;case"textwidth":this.state.textwidth=t}},e.prototype.getOption=function(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return"\t"==this.cm6.state.facet(tp);case"indentUnit":return this.cm6.state.facet(tp).length||2;case"textwidth":return this.state.textwidth;case"keyMap":return this.state.keyMap||"vim"}},e.prototype.toggleOverwrite=function(e){this.state.overwrite=e},e.prototype.getTokenTypeAt=function(e){var t,n=this.indexFromPos(e),i=Vh(this.cm6.state,n),r=null==i?void 0:i.resolve(n),o=(null===(t=null==r?void 0:r.type)||void 0===t?void 0:t.name)||"";return/comment/i.test(o)?"comment":/string/i.test(o)?"string":""},e.prototype.overWriteSelection=function(e){var t=this.cm6.state.doc,n=this.cm6.state.selection,i=n.ranges.map((function(e){if(e.empty){var n=e.to<t.length?t.sliceString(e.from,e.to+1):"";if(n&&!/\n/.test(n))return Bi.range(e.from,e.to+1)}return e}));this.cm6.dispatch({selection:Bi.create(i,n.mainIndex)}),this.replaceSelection(e)},e.prototype.isInMultiSelectMode=function(){return this.cm6.state.selection.ranges.length>1},e.prototype.virtualSelectionMode=function(){return!!this.virtualSelection},e.prototype.forEachSelection=function(e){var t=this.cm6.state.selection;this.virtualSelection=Bi.create(t.ranges,t.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var i=this.virtualSelection.ranges[n];i&&(this.cm6.dispatch({selection:Bi.create([i])}),e(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null},e.prototype.hardWrap=function(e){return function(e,t){var n=t.column||e.getOption("textwidth")||80,i=0!=t.allowMerge,r=Math.min(t.from,t.to),o=Math.max(t.from,t.to);for(;r<=o;){var a=e.getLine(r);if(a.length>n){if(c=d(a,n,5)){var s=/^\s*/.exec(a)[0];e.replaceRange("\n"+s,new gT(r,c.start),new gT(r,c.end))}o++}else if(i&&/\S/.test(a)&&r!=o){var l=e.getLine(r+1);if(l&&/\S/.test(l)){var c,u=a.replace(/\s+$/,""),h=l.replace(/^\s+/,""),p=u+" "+h;(c=d(p,n,5))&&c.start>u.length||p.length<n?(e.replaceRange(" ",new gT(r,u.length),new gT(r+1,l.length-h.length)),r--,o--):u.length<a.length&&e.replaceRange("",new gT(r,u.length),new gT(r,a.length))}}r++}return r;function d(e,t,n){if(!(e.length<t)){var i=e.slice(0,t),r=e.slice(t),o=/^(?:(\s+)|(\S+)(\s+))/.exec(r),a=/(?:(\s+)|(\s+)(\S+))$/.exec(i),s=0,l=0;return a&&!a[2]&&(s=t-a[1].length,l=t),o&&!o[2]&&(s||(s=t),l=t+o[1].length),s?{start:s,end:l}:a&&a[2]&&a.index>n?{start:a.index,end:a.index+a[2].length}:o&&o[2]?{start:s=t+o[2].length,end:s+o[3].length}:void 0}}}(this,e)},e.isMac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),e.Pos=gT,e.StringStream=gd,e.commands={cursorCharLeft:function(e){kg(e.cm6)},redo:function(e){xT(e,!1)},undo:function(e){xT(e,!0)},newlineAndIndent:function(e){ov({state:e.cm6.state,dispatch:function(t){return ET(e,t)}})},indentAuto:function(e){cv(e.cm6)}},e.defineOption=function(e,t,n){},e.isWordChar=function(e){return wT.test(e)},e.keys=ST,e.keyMap={},e.addClass=function(){},e.rmClass=function(){},e.e_preventDefault=function(e){e.preventDefault()},e.e_stop=function(e){var t,n;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),null===(n=null==e?void 0:e.preventDefault)||void 0===n||n.call(e)},e.keyName=function(e){var t=e.key;if(!CT[t]){"Escape"==t&&(t="Esc")," "==t&&(t="Space"),t.length>1&&(t=t.replace(/Numpad|Arrow/,"")),1==t.length&&(t=t.toUpperCase());var n="";return e.ctrlKey&&(n+="Ctrl-"),e.altKey&&(n+="Alt-"),(n||t.length>1)&&e.shiftKey&&(n+="Shift-"),n+=t}},e.vimKey=function(t){var n=t.key;if(!CT[n]){n.length>1&&"n"==n[0]&&(n=n.replace("Numpad","")),n=kT[n]||n;var i="";return t.ctrlKey&&(i+="C-"),t.altKey&&(i+="A-"),t.metaKey&&(i+="M-"),e.isMac&&t.altKey&&!t.metaKey&&!t.ctrlKey&&(i=i.slice(2)),(i||n.length>1)&&t.shiftKey&&(i+="S-"),(i+=n).length>1&&(i="<"+i+">"),i}},e.lookupKey=function(t,n,i){var r=e.keys[t];r&&i(r)},e.on=mT,e.off=vT,e.signal=yT,e.findMatchingTag=OT,e.findEnclosingTag=FT,e}();function TT(e,t,n){var i=document.createElement("div");return i.appendChild(t),i}function DT(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}function AT(e,t){var n=e.state.dialog;e.state.dialog=t,t&&n!==t&&(n&&n.contains(document.activeElement)&&e.focus(),n&&n.parentElement?n.parentElement.replaceChild(t,n):n&&n.remove(),MT.signal(e,"dialog"))}function LT(e,t){e.state.dialog==t&&(e.state.dialog=null,MT.signal(e,"dialog"))}function PT(e,t,n,i){i||(i={}),DT(e,void 0);var r=TT(0,t,i.bottom),o=!1;function a(t){if("string"==typeof t)s.value=t;else{if(o)return;o=!0,LT(e,r),e.state.dialog||e.focus(),i.onClose&&i.onClose(r)}}AT(e,r);var s=r.getElementsByTagName("input")[0];return s&&(i.value&&(s.value=i.value,!1!==i.selectValueOnOpen&&s.select()),i.onInput&&MT.on(s,"input",(function(e){i.onInput(e,s.value,a)})),i.onKeyUp&&MT.on(s,"keyup",(function(e){i.onKeyUp(e,s.value,a)})),MT.on(s,"keydown",(function(e){i&&i.onKeyDown&&i.onKeyDown(e,s.value,a)||(13==e.keyCode&&n(s.value),(27==e.keyCode||!1!==i.closeOnEnter&&13==e.keyCode)&&(s.blur(),MT.e_stop(e),a()))})),!1!==i.closeOnBlur&&MT.on(s,"blur",(function(){setTimeout((function(){document.activeElement!==s&&a()}))})),s.focus()),a}var IT={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function OT(e,t){}function FT(e,t){var n,i,r=e.cm6.state,o=e.indexFromPos(t);o<r.doc.length&&("<"==r.sliceDoc(o,o+1)&&o++);for(var a=Vh(r,o),s=(null==a?void 0:a.resolve(o))||null;s;){if("OpenTag"==(null===(n=s.firstChild)||void 0===n?void 0:n.type.name)&&"CloseTag"==(null===(i=s.lastChild)||void 0===i?void 0:i.type.name))return{open:BT(r.doc,s.firstChild),close:BT(r.doc,s.lastChild)};s=s.parent}}function BT(e,t){return{from:fT(e,t.from),to:fT(e,t.to)}}var NT=function(){function e(e,t,n){this.cm=e,this.id=e.$mid++,this.offset=t,this.assoc=n,e.marks[this.id]=this}return e.prototype.clear=function(){delete this.cm.marks[this.id]},e.prototype.find=function(){return null==this.offset?null:this.cm.posFromIndex(this.offset)},e.prototype.update=function(e){null!=this.offset&&(this.offset=e.mapPos(this.offset,this.assoc,Si.TrackDel))},e}();var RT="undefined"!=typeof navigator&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent),HT=initVimMode(MT);MT.Vim=HT,window.CodeMirrorAdapter=MT;var VT=jl.theme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none"}}),zT=Ba.fromClass(function(){function e(e){var t=this;this.status="",this.query=null,this.decorations=ca.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.view=e;var n=this.cm=new MT(e);HT.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new uT(e,n),this.updateClass(),this.cm.on("vim-command-done",(function(){n.state.vim&&(n.state.vim.status=""),t.blockCursor.scheduleRedraw(),t.updateStatus()})),this.cm.on("vim-mode-change",(function(e){n.state.vim.mode=e.mode,e.subMode&&(n.state.vim.mode+=" block"),n.state.vim.status="",t.blockCursor.scheduleRedraw(),t.updateClass(),t.updateStatus()})),this.cm.on("dialog",(function(){t.cm.state.statusbar?t.updateStatus():e.dispatch({effects:UT.of(!!t.cm.state.dialog)})})),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=function(e){HT.handleKey(t.cm,"<Esc>","user"),t.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}return e.prototype.update=function(e){var t;if((e.viewportChanged||e.docChanged)&&this.query&&this.highlight(this.query),e.docChanged&&this.cm.onChange(e),e.selectionSet&&this.cm.onSelectionChange(),e.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),e.transactions)for(var n=0,i=e.transactions;n<i.length;n++)for(var r=0,o=i[n].effects;r<o.length;r++){var a=o[r];if(a.is(Qv))if(null===(t=a.value)||void 0===t?void 0:t.forVim){var s=a.value.create();this.highlight(s)}else this.highlight(null)}this.blockCursor.update(e)},e.prototype.updateClass=function(){var e=this.cm.state;!e.vim||e.vim.insertMode&&!e.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")},e.prototype.updateStatus=function(){var e=this.cm.state.statusbar,t=this.cm.state.vim;if(e&&t){var n=this.cm.state.dialog;if(n)n.parentElement!=e&&(e.textContent="",e.appendChild(n));else{e.textContent="";var i=(t.mode||"normal").toUpperCase();t.insertModeReturn&&(i+="(C-O)"),this.statusButton.textContent="--".concat(i,"--"),e.appendChild(this.statusButton)}this.dom.textContent=t.status,e.appendChild(this.dom)}},e.prototype.destroy=function(){HT.leaveVimMode(this.cm),this.cm.state.vim=null,this.updateClass(),this.blockCursor.destroy(),delete this.view.cm},e.prototype.highlight=function(e){if(this.query=e,!e)return this.decorations=ca.none;for(var t=this.view,n=new Ir,i=0,r=t.visibleRanges,o=r.length;i<o;i++){for(var a=r[i],s=a.from,l=a.to;i<o-1&&l>r[i+1].from-500;)l=r[++i].to;e.highlight(t.state,s,l,(function(e,t){n.add(e,t,qT)}))}return this.decorations=n.finish()},e.prototype.handleKey=function(e,t){var n=MT.vimKey(e),i=this.cm;if(n){var r=i.state.vim;if(r){if("<Esc>"==n&&!r.insertMode&&!r.visualMode&&this.query){var o=r.searchState_;o&&(i.removeOverlay(o.getOverlay()),o.setOverlay(null))}var a;if("<C-c>"===n&&!MT.isMac&&i.somethingSelected())return this.waitForCopy=!0,!0;r.status=(r.status||"")+n;try{a=HT.multiSelectHandleKey(i,n,"user")}catch(e){console.error(e),i.state.vim.insertMode||(a=!0)}return r=i.state.vim,!a&&r.insertMode&&i.state.overwrite&&(e.key&&1==e.key.length&&e.key&&!/\n/.test(e.key)?(a=!0,i.overWriteSelection(e.key)):"Backspace"==e.key&&(a=!0,MT.commands.cursorCharLeft(i))),a&&(MT.signal(this.cm,"vim-keypress",n),e.preventDefault(),e.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!a}}},e}(),{eventHandlers:{copy:function(e,t){var n=this;this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then((function(){var e=n.cm,t=e.state.vim;t&&(t.insertMode?e.setSelection(e.getCursor(),e.getCursor()):e.operation((function(){e.curOp&&(e.curOp.isVimOp=!0),HT.handleKey(e,"<Esc>","user")})))})))},compositionstart:function(e,t){this.useNextTextInput=!0},keypress:function(e,t){"Dead"==this.lastKeydown&&this.handleKey(e,t)},keydown:function(e,t){this.lastKeydown=e.key,"Unidentified"==this.lastKeydown||"Process"==this.lastKeydown||"Dead"==this.lastKeydown?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(e,t))}},provide:function(){return[jl.inputHandler.of((function(e,t,n,i){var r,o,a=e.cm||null;if(!a)return!1;var s=null===(r=a.state)||void 0===r?void 0:r.vim,l=a.state.vimPlugin;if(s&&!s.insertMode&&!(null===(o=a.curOp)||void 0===o?void 0:o.isVimOp)){if("\0\0"===i)return!0;if(1==i.length&&l.useNextTextInput)return l.handleKey({key:i,preventDefault:function(){},stopPropagation:function(){}}),function(e){var t=e.scrollDOM.parentElement;if(!t)return;if(RT)return e.contentDOM.textContent="\0\0",void e.contentDOM.dispatchEvent(new CustomEvent("compositionend"));var n=e.scrollDOM.nextSibling,i=window.getSelection(),r=i&&{anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset};e.scrollDOM.remove(),t.insertBefore(e.scrollDOM,n);try{r&&i&&(i.setPosition(r.anchorNode,r.anchorOffset),r.focusNode&&i.extend(r.focusNode,r.focusOffset))}catch(e){console.error(e)}e.focus(),e.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}(e),!0}return!1}))]},decorations:function(e){return e.decorations}});var qT=ca.mark({class:"obsidian-search-match-highlight"}),UT=dr.define(),WT=_i.define({create:function(){return!1},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];r.is(UT)&&(e=r.value)}return e},provide:function(e){return xu.from(e,(function(e){return e?_T:null}))}});function _T(e){var t=document.createElement("div");t.className="cm-vim-panel";var n=e.cm;return n.state.dialog&&t.appendChild(n.state.dialog),{top:!1,dom:t}}var jT=["=","~","$","%"],GT=jl.inputHandler.of((function(e,t,n,i){if(e.composing||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==Ei(ki(i,0))||t!=r.from||n!=r.to)return!1;for(var o=e.state,a=function(t){if(i!==t)return"continue";var n=null,r=o.changeByRange((function(e){return e.empty?{range:n=e}:{changes:[{insert:i,from:e.from},{insert:i,from:e.to}],range:Bi.range(e.anchor+i.length,e.head+i.length)}}));return n?{value:!1}:(e.dispatch(o.update(r,{scrollIntoView:!0,userEvent:"input.type"})),{value:!0})},s=0,l=jT;s<l.length;s++){var c=a(l[s]);if("object"==typeof c)return c.value}return!1}));function KT(e,t){return{modifiers:e,key:t}}function YT(e){return e.startsWith("Key")&&4===e.length?e.charAt(3):e}function XT(e){var t=[];lw.forEach((function(n){e.modifiers.contains(n)&&t.push(sw[n])}));var n=(e.code?YT(e.code):e.key)||"";return t.push(function(e){if(ow.hasOwnProperty(e))return ow[e];var t=e.replace(/([A-Z])/g," $1").trim();return t.charAt(0).toUpperCase()+t.slice(1)}(n)),t.join(ye?" ":" + ")}var $T,ZT,QT,JT=function(){function e(e){this.defaultKeys={},this.customKeys={},this.baked=!1,this.bakedHotkeys=[],this.bakedIds=[],this.app=e,this.app.scope.register(null,null,this.onTrigger.bind(this))}return e.prototype.save=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.writeConfigJson("hotkeys",this.customKeys)];case 1:return e.sent(),[2]}}))}))},e.prototype.load=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return[4,this.app.vault.readConfigJson("hotkeys")];case 1:if(e=i.sent(),t=!1,e||(e=this.app.vault.getConfig("hotkeys"),t=!0),e&&"object"==typeof e){for(n in e)n.startsWith("explorer:")?(e["file-"+n]=e[n],delete e[n]):"star:star-current-file"===n&&(e["starred:star-current-file"]=e[n],delete e[n]);this.customKeys=e||{},this.baked=!1}return t?(this.app.vault.setConfig("hotkeys",void 0),[4,this.save()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.getDefaultHotkeys=function(e){return this.defaultKeys[e]},e.prototype.addDefaultHotkeys=function(e,t){this.defaultKeys[e]=t,this.baked=!1},e.prototype.removeDefaultHotkeys=function(e){delete this.defaultKeys[e],this.baked=!1},e.prototype.getHotkeys=function(e){return this.customKeys[e]},e.prototype.setHotkeys=function(e,t){this.customKeys[e]=t,this.baked=!1,Lt.isDesktopApp&&this.app.appMenuBarManager.requestRender()},e.prototype.removeHotkeys=function(e){delete this.customKeys[e],this.baked=!1},e.prototype.printHotkeyForCommand=function(e){var t=this.getHotkeys(e)||this.getDefaultHotkeys(e);return t.length>0?XT(t[0]):""},e.prototype.bake=function(){if(!this.baked){this.baked=!0;var e=this.defaultKeys,t=this.customKeys,n=[],i=[],r=function(e,t){for(var r=0,o=t;r<o.length;r++){var a=o[r];n.push({modifiers:hw.compileModifiers(a.modifiers),key:a.code?YT(a.code):a.key}),i.push(e)}};for(var o in t)t.hasOwnProperty(o)&&r(o,t[o]);for(var o in e)e.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&r(o,e[o]);this.bakedHotkeys=n,this.bakedIds=i}},e.prototype.onTrigger=function(e,t){this.bake();for(var n=this.bakedHotkeys,i=this.bakedIds,r=0;r<n.length;r++){var o=n[r];if(hw.isMatch(o,t)){var a=i[r],s=this.app.commands.findCommand(a);if(s&&(!e.repeat||s.repeatable))if(this.app.commands.executeCommand(s))return!1}}},e}(),eD="obsidian-search-match-highlight",tD=function(){function e(e,t,n,i){var r=this;this.editor=null,this.scope=null,this.containerEl=null,this.searchContainerEl=null,this.searchInputEl=null,this.replaceInputEl=null,this.cursor=null,this.isActive=!1,this.isReplace=!1,this.app=e,this.editor=t,this.applyScope=i;var o=this.scope=new cw(e.scope);this.containerEl=n,this.searchContainerEl=createDiv("document-search-container");var a=this.searchContainerEl.createDiv("document-search");this.searchInputEl=a.createEl("input",{cls:"document-search-input",type:"text"}),this.searchInputEl.setAttribute("placeholder",rf.editor.search.placeholderFind());var s=a.createDiv({cls:"document-search-buttons",type:"text"});s.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelPrevious()},(function(e){aS(e,XT(KT(["Shift"],"F3")),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.findPrevious()}))})),s.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelNext()},(function(e){aS(e,XT(KT([],"F3")),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.findNext()}))})),s.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelAll()},(function(e){aS(e,XT(KT(["Alt"],"Enter")),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.searchAll()}))})),s.createSpan("document-search-close-button",(function(e){aS(e,rf.editor.search.labelExitSearch(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.hide()}))})),this.searchInputEl.addEventListener("input",this.onSearchInput.bind(this));var l=this.searchContainerEl.createDiv("document-replace");this.replaceInputEl=l.createEl("input",{cls:"document-replace-input",type:"text"}),this.replaceInputEl.setAttribute("placeholder",rf.editor.search.placeholderReplace());var c=l.createDiv({cls:"document-replace-buttons",type:"text"});c.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelReplace()},(function(e){e.addEventListener("click",(function(e){e.preventDefault(),r.replaceCurrentMatch()})),aS(e,XT(KT([],"Enter")),{placement:"top"})})),c.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelReplaceAll()},(function(e){aS(e,XT(KT(["Mod","Alt"],"Enter")),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.replaceAll()}))})),o.register([],"F3",this.findNext.bind(this)),o.register(["Mod"],"G",this.findNext.bind(this)),o.register(["Shift"],"F3",this.findPrevious.bind(this)),o.register(["Mod","Shift"],"G",this.findPrevious.bind(this)),o.register([],"Enter",this.onEnter.bind(this)),o.register(["Shift"],"Enter",this.onShiftEnter.bind(this)),o.register(["Alt"],"Enter",this.onAltEnter.bind(this)),o.register(["Mod","Alt"],"Enter",this.onModAltEnter.bind(this)),o.register([],"Escape",this.hide.bind(this)),o.register([],"Tab",this.goToNextInput.bind(this)),o.register(["Shift"],"Tab",this.goToNextInput.bind(this))}return e.prototype.show=function(e){void 0===e&&(e=!1),this.isActive=!0,this.isReplace=e;var t=this,n=t.containerEl,i=t.searchContainerEl,r=t.editor,o=t.searchInputEl;i.toggleClass("mod-replace-mode",e),n.prepend(i);var a=r.getSelection();a&&(o.value=a),o.focus(),o.select(),this.applyScope(this.scope),this.onSearchInput()},e.prototype.hide=function(){if(this.isActive){this.isActive=!1;var e=this,t=e.editor,n=e.searchContainerEl,i=e.searchInputEl;if(this.cursor&&(i.isActiveElement()||this.replaceInputEl.isActiveElement())){var r=this.cursor.current();r&&t.setSelection(r.from,r.to)}n.detach(),i.value="",i.removeClass("mod-no-match"),this.cursor=null,t.removeHighlights("obsidian-search-match-highlight"),this.applyScope(null),t.focus()}},e.prototype.onSearchInput=function(){var e=this.editor,t=this.getQuery();this.cursor=e.searchCursor(t);var n=this.cursor.findNext();n?this.highlight([n]):this.clear(),this.searchInputEl.toggleClass("mod-no-match",t&&!n)},e.prototype.findPrevious=function(){if(this.cursor){var e=this.cursor.findPrevious();e?this.highlight([e]):this.clear()}},e.prototype.findNextOrReplace=function(){if(this.cursor){var e=this.replaceInputEl.value;this.replaceInputEl.isActiveElement()&&""!==e&&this.cursor.replace(e,"searchReplace"),this.findNext()}},e.prototype.replaceCurrentMatch=function(){if(this.cursor){var e=this.replaceInputEl.value;this.cursor.replace(e,"searchReplace"),this.findNext()}},e.prototype.replaceAll=function(){var e=this.replaceInputEl.value;this.cursor.replaceAll(e,"searchReplace")},e.prototype.findNext=function(){if(this.cursor){var e=this.cursor.findNext();e?this.highlight([e]):this.clear()}},e.prototype.searchAll=function(){var e=this.cursor.findAll();this.highlight(e)},e.prototype.highlight=function(e){this.editor.addHighlights(e,eD,!0,!0);var t=e[0];t&&this.editor.scrollIntoView(t,!0)},e.prototype.clear=function(){this.editor.removeHighlights(eD)},e.prototype.goToNextInput=function(e){var t=this.searchInputEl.doc;this.searchInputEl===t.activeElement?(this.replaceInputEl.focus(),e.preventDefault()):this.replaceInputEl===t.activeElement&&(this.searchInputEl.focus(),e.preventDefault())},e.prototype.getQuery=function(){return this.searchInputEl.value},e.prototype.onEnter=function(e){e.isComposing||!this.searchInputEl.isActiveElement()&&!this.replaceInputEl.isActiveElement()||this.findNextOrReplace()},e.prototype.onShiftEnter=function(e){e.isComposing||!this.searchInputEl.isActiveElement()&&!this.replaceInputEl.isActiveElement()||this.findPrevious()},e.prototype.onAltEnter=function(e){(this.searchInputEl.isActiveElement()||this.replaceInputEl.isActiveElement())&&this.searchAll()},e.prototype.onModAltEnter=function(e){this.isReplace&&this.replaceInputEl.isActiveElement()&&this.replaceAll()},e}(),nD={bold:{nodeType:"strong",surroundingChars:"**",padding:!1},italic:{nodeType:"em",surroundingChars:"*",padding:!1},code:{nodeType:"inline-code",surroundingChars:"`",padding:!1},highlight:{nodeType:"highlight",surroundingChars:"==",padding:!1},strikethrough:{nodeType:"strikethrough",surroundingChars:"~~",padding:!1},comment:{nodeType:"comment",surroundingChars:"%%",padding:!0},math:{nodeType:"math",surroundingChars:"$",padding:!1}},iD=window.CodeMirror,rD=/[^\\][$|]/,oD=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,aD=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i,sD=/^(([^<>()[\]\\.,;:\s@\"`]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\b/,lD=/^\.{0,2}\/[^\>\s]+/,cD=/^(?:[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s])+/;!function(e){e[e.NONE=0]="NONE",e[e.NORMAL=1]="NORMAL",e[e.WITH_SPACE=2]="WITH_SPACE"}(ZT||(ZT={})),function(e){e[e.NONE=0]="NONE",e[e.SIMPLE=1]="SIMPLE",e[e.NORMAL=2]="NORMAL"}(QT||(QT={}));var uD,hD,pD=/^\s*[^\|].*?\|.*[^|]\s*$/,dD=/^\s*[^\|].*\|/,fD=/^\s*\|(?:[^|]+\|)+?\s*$/,gD=/^\s*\|/,mD=/^\s*-+\s*:\s*$/,vD=/^\s*:\s*-+\s*$/,yD=/^\s*:\s*-+\s*:\s*$/,bD=/^\s*-+\s*$/;!function(e){e[e.NONE=0]="NONE",e[e.FRONT_MATTER=1]="FRONT_MATTER",e[e.FRONT_MATTER_END=2]="FRONT_MATTER_END"}(uD||(uD={})),function(e){e[e.NONE=0]="NONE",e[e.BARELINK=1]="BARELINK",e[e.FOOTREF=2]="FOOTREF",e[e.NORMAL=3]="NORMAL",e[e.FOOTNOTE=4]="FOOTNOTE",e[e.MAYBE_FOOTNOTE_URL=5]="MAYBE_FOOTNOTE_URL",e[e.BARELINK2=6]="BARELINK2",e[e.FOOTREF2=7]="FOOTREF2",e[e.INTERNAL_LINK=8]="INTERNAL_LINK",e[e.EMBED=9]="EMBED"}(hD||(hD={}));var wD=(($T={})[hD.BARELINK]="hmd-barelink",$T[hD.BARELINK2]="hmd-barelink2",$T[hD.FOOTREF]="hmd-barelink footref",$T[hD.FOOTNOTE]="hmd-footnote line-HyperMD-footnote",$T[hD.FOOTREF2]="hmd-footref2",$T[hD.INTERNAL_LINK]="hmd-internal-link",$T[hD.EMBED]="hmd-internal-link hmd-embed",$T);function kD(e){e.hmdTable=QT.NONE,e.hmdTableColumns=[],e.hmdTableID=null,e.hmdTableCol=e.hmdTableRow=0}var CD,ED,xD={hr:"line-HyperMD-hr line-background-HyperMD-hr-bg hr",list1:"list-1",list2:"list-2",list3:"list-3",code:"inline-code",hashtag:"hashtag meta"};window.CodeMirror.defineMode("hypermd",(function(e,t){var n={front_matter:!0,math:!0,table:!0,toc:!0,orgModeMarkup:!0,hashtag:!0,fencedCodeBlockHighlighting:!0,name:"markdown",highlightFormatting:!0,taskLists:!0,strikethrough:!0,emoji:!1,highlight:!0,tokenTypeOverrides:xD};Object.assign(n,t),n.tokenTypeOverrides!==xD&&(n.tokenTypeOverrides=Object.assign({},xD,n.tokenTypeOverrides)),n.name="markdown";var i={htmlBlock:null},r=iD.getMode(e,n),o=g({},r);function a(e,t){var n=t.hmdInnerExitChecker(e,t),i=t.hmdInnerStyle,r=(!n||!n.skipInnerMode)&&t.hmdInnerMode.token(e,t.hmdInnerState)||"";return i&&(r+=" "+i),n?(n.style&&(r+=" "+n.style),n.endPos&&(e.pos=n.endPos),t.hmdInnerExitChecker=null,t.hmdInnerMode=null,t.hmdInnerState=null,t.hmdOverride=null):e.start===e.pos&&e.skipToEnd(),r.trim()||null}function s(e){return{token:function(t){var n=t.string.indexOf(e,t.start);return-1===n?t.skipToEnd():0===n?t.pos+=e.length:(t.pos=n,"\\"===t.string.charAt(n-1)&&t.pos++),null}}}function l(e,t){return t||(t={}),function(n,i){return n.string.substr(n.start,e.length)===e?(t.endPos=n.start+e.length,t):null}}function c(t,n,i,r){if("string"==typeof i&&(i=iD.getMode(e,i)),!(i&&"null"!==i.name||(i="endTag"in r?s(r.endTag):"function"==typeof r.fallbackMode&&r.fallbackMode())))throw new Error("no mode");n.hmdInnerExitChecker="endTag"in r?l(r.endTag):r.exitChecker,n.hmdInnerStyle=r.style,n.hmdInnerMode=i,n.hmdOverride=a,n.hmdInnerState=iD.startState(i);var o=r.style||"";return r.skipFirstToken||(o+=" "+i.token(t,n.hmdInnerState)),o.trim()}return o.startState=function(){var e=r.startState();return kD(e),e.hmdOverride=null,e.hmdInnerExitChecker=null,e.hmdInnerMode=null,e.hmdLinkType=hD.NONE,e.hmdNextMaybe=n.front_matter?uD.FRONT_MATTER:uD.NONE,e.hmdNextState=null,e.hmdNextStyle=null,e.hmdNextPos=null,e.hmdHashtag=!1,e},o.copyState=function(e){for(var t=r.copyState(e),n=0,i=["hmdLinkType","hmdNextMaybe","hmdTable","hmdTableID","hmdTableCol","hmdTableRow","hmdOverride","hmdInnerMode","hmdInnerStyle","hmdInnerExitChecker","hmdNextPos","hmdNextState","hmdNextStyle","hmdHashtag","comment","internalLink","internalEmbed","inlineFootnote","hasAlias","isAlias","wasHeading","isHeading","mathed"];n<i.length;n++){var o=i[n];t[o]=e[o]}return t.hmdTableColumns=e.hmdTableColumns.slice(0),e.hmdInnerMode&&(t.hmdInnerState=iD.copyState(e.hmdInnerMode,e.hmdInnerState)),t},o.blankLine=function(e){var t,n=e.hmdInnerMode;return n?n.blankLine&&(t=n.blankLine(e.hmdInnerState)):t=r.blankLine(e),t||(t=""),e.hmdNextMaybe===uD.FRONT_MATTER&&(e.hmdNextMaybe=uD.NONE),-1===e.code&&(t+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg"),kD(e),t.trim()||null},o.indent=function(e,t){var n=e.hmdInnerMode||r,i=n.indent;return"function"==typeof i?i.apply(n,arguments):iD.Pass},o.innerMode=function(e){return e.hmdInnerMode?{mode:e.hmdInnerMode,state:e.hmdInnerState}:r.innerMode(e)},o.token=function(t,o){if(t.tabSize=4,o.hmdOverride)return o.hmdOverride(t,o);if(o.hmdNextMaybe===uD.FRONT_MATTER){if("---"===t.string)return o.hmdNextMaybe=uD.FRONT_MATTER_END,c(t,o,"yaml",{style:"hmd-frontmatter",fallbackMode:function(){return s("---")},exitChecker:function(e,t){return e.string.startsWith("---")&&""===e.string.substring(3).trim()?(t.hmdNextMaybe=uD.NONE,{endPos:e.string.length}):null}});o.hmdNextMaybe=uD.NONE}var a=o.f===i.htmlBlock,u=-1===o.code,h=o.quote,p=0===t.start;p&&(o.hmdLinkType=hD.NONE,o.wasHeading=o.isHeading,o.isHeading=!1,!o.code||1!==o.code&&2!==o.code||(o.code=0));var d,f=o.linkText,g=o.linkHref,m=!(u||a),v=m&&!(o.code||o.indentedCode||o.linkHref),y="",b=!1,w=-1,k=null;if(m){if(o.list&&!o.header&&"#"===t.peek()&&/^\s*[*\-+]\s$/.test(t.string.substr(0,t.pos))){var C=t.match(/^(#+)(?: |$)/,!0);if(C){var E=C[1].length;return o.header=E,"formatting formatting-header formatting-header-"+E+" header header-"+E}}if(n.math&&v&&o.hmdLinkType===hD.NONE&&!o.internalLink&&!o.internalEmbed){var x=t.match(/^(\$)[^\s$]/,!1),S=t.match(/^(\${2})/,!1),M=x?"$":"$$";if(x)(I=t.string.slice(t.pos+1).match(/[^\\]\$(.|$)/))&&I[0].match(/^[^\s\\]\$([^0-9]|$)/)||(x=null);var T=!1;if(x||S){if(0!==t.pos||o.mathed){var D="math";o.quote&&(D+=" line-HyperMD-quote line-HyperMD-quote-"+o.quote+" line-HyperMD-quote-lazy");var A=iD.getMode(e,{name:"stex"}),L="stex"!==A.name;return y+=c(t,o,A,{style:D,skipFirstToken:L,fallbackMode:function(){return s(M)},exitChecker:l(M,{style:"formatting formatting-math formatting-math-end math-"})}),x?(L&&(t.pos+=x[1].length),y+=" formatting formatting-math formatting-math-begin"):(L&&(t.pos+=S[1].length),y+=" formatting formatting-math formatting-math-begin math-block")}T=!0,w=0}o.mathed=T}if(v){o.internalLink?(o.hmdLinkType=hD.INTERNAL_LINK,o.internalLink=!1):o.internalEmbed&&(o.hmdLinkType=hD.EMBED,o.internalEmbed=!1);var P=o.hmdLinkType===hD.INTERNAL_LINK||o.hmdLinkType===hD.EMBED;if(P)if(t.match(/^\|/,!1))o.isAlias=!0,w=t.pos+1,y+=" link-alias-pipe";else if(t.match(/^\]\]/,!1))o.hmdLinkType=hD.NONE,o.linkText=!1,o.isAlias=!1,o.hasAlias=!1,w=t.pos+2,y+=" formatting-link formatting-link-end";else{b=!0,o.isAlias&&(y+=" link-alias"),o.hasAlias&&!o.isAlias&&(y+=" link-has-alias");var I=t.match(/^([^|\]]*?)/,!1);w=t.pos+Math.max(1,I[0].length)}else if(I=t.match(/^(!?\[\[)(.*?)]]/,!1))"!"===I[1].charAt(0)?(y+=" formatting-link formatting-link-start formatting-embed",o.internalEmbed=!0):(y+=" formatting-link formatting-link-start",o.internalLink=!0),w=t.pos+I[1].length,o.hasAlias=I[2].contains("|"),o.f=o.inline=r.startState().inline;if(o.hmdLinkType===hD.FOOTREF)if(b=!0,t.match(/^\]/,!1))o.hmdLinkType=hD.NONE,w=t.pos+1,y+=" footref formatting formatting-link formatting-link-end";else{var I=t.match(/^([^\]]*?)/,!1);w=t.pos+Math.max(1,I[0].length),y+=" footref"}else(I=t.match(/^\[\^(.*?)](:?)/,!1))&&!I[2]&&(y+=" footref formatting formatting-link formatting-link-start",o.hmdLinkType=hD.FOOTREF,b=!0,w=t.pos+1,o.f=o.inline=r.startState().inline);t.match(/^\^([a-zA-Z0-9\-]+)$/)&&(y+=" blockid"),!o.inlineFootnote&&t.match(/^\^\[/,!1)?(o.inlineFootnote=!0,y+=" inline-footnote-start",w=t.pos+2):o.inlineFootnote&&!P&&o.hmdLinkType===hD.NONE&&t.match(/^]/)&&(o.inlineFootnote=!1,y+=" inline-footnote-end",w=t.pos);var O=t.pos;k=function(e){if(o.hmdLinkType===hD.INTERNAL_LINK||o.hmdLinkType===hD.EMBED){var n=t.string.slice(O,e);if(n.indexOf("|")>=1)return O+n.indexOf("|")}var i=t.string.slice(O,e).indexOf("%%");return i>0?O+i:e},o.comment?t.match(/^%%/,!1)&&(y+=" comment comment-end",o.comment=!1,w=t.pos+2):t.match(/^%%/,!1)&&(y+=" comment comment-start",o.comment=!0,w=t.pos+2)}o.comment&&(y+=" comment"),v&&(o.hmdLinkType||o.image||o.linkText||!t.match(aD)&&!t.match(sD)||(y+="url",w=t.pos))}if(o.hmdNextState)t.pos=o.hmdNextPos,y+=" "+(o.hmdNextStyle||""),Object.assign(o,o.hmdNextState),o.hmdNextState=null,o.hmdNextStyle=null,o.hmdNextPos=null;else if(b){var F=r.copyState(o),B=t.pos;y+=" "+(r.token(t,F)||""),t.pos=B}else y+=" "+(r.token(t,o)||"");y.contains("formatting-task")&&(y+=" line-HyperMD-task-line"),-1!==w&&(t.pos=w),k&&(t.pos=k(t.pos)),o.hmdHashtag&&(y+=" "+n.tokenTypeOverrides.hashtag),o.header&&(o.isHeading=!0),!i.htmlBlock&&o.htmlState&&(i.htmlBlock=o.f);var N=o.f===i.htmlBlock,R=-1===o.code;m=m&&!(N||R),(v=v&&m&&!(o.code||o.indentedCode||o.linkHref))&&(d=t.current().match(rD))&&(t.pos=t.start+d.index+1);var H=t.current();if(N!==a&&(N?(y+=" hmd-html-begin",i.htmlBlock=o.f):y+=" hmd-html-end"),(u||R)&&(o.localMode&&u||(y=y.replace("inline-code","")),y+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg hmd-codeblock",R!==u&&(R?u||(y+=" line-HyperMD-codeblock-begin line-background-HyperMD-codeblock-begin-bg"):y+=" line-HyperMD-codeblock-end line-background-HyperMD-codeblock-end-bg")),m){var V=o.hmdTable;if(p&&V)(V==QT.SIMPLE?dD:gD).test(t.string)?(o.hmdTableCol=0,o.hmdTableRow++):kD(o);if(p&&o.header&&(/^(?:---+|===+)\s*$/.test(t.string)&&o.prevLine&&o.prevLine.header?y+=" line-HyperMD-header-line line-HyperMD-header-line-"+o.header:y+=" line-HyperMD-header line-HyperMD-header-"+o.header),o.indentedCode&&(y+=" hmd-indented-code"),o.quote){if(t.match(/^\s*>/,!1)&&!t.eol()||(y+=" line-HyperMD-quote line-HyperMD-quote-"+o.quote,/^ {0,3}\>/.test(t.string)||(y+=" line-HyperMD-quote-lazy")),p&&(d=H.match(/^\s+/)))return t.pos=d[0].length,(y+=" hmd-indent-in-quote").trim();if(o.quote>h)(I=t.match(/^\[!([^\]]+)\]([+\-]?)(?:\s|$)/))&&(y+=" line-HyperMD-callout hmd-callout line-HyperMD-quote line-HyperMD-quote-"+o.quote)}var z=(o.listStack[o.listStack.length-1]||0)+3,q=p&&/^\s+$/.test(H)&&(!1!==o.list||t.indentation()<=z),U=o.list&&/formatting-list/.test(y);if(U||q&&(!1!==o.list||t.match(oD,!1))){var W=o.listStack&&o.listStack.length||0;if(q){if(t.match(oD,!1))!1===o.list&&W++;else{for(;W>0&&t.pos<o.listStack[W-1];)W--;if(!W)return y.trim()||null;y+=" line-HyperMD-list-line-nobullet line-HyperMD-list-line line-HyperMD-list-line-".concat(W)}y+=" hmd-list-indent hmd-list-indent-".concat(W)}else U&&(y+=" line-HyperMD-list-line line-HyperMD-list-line-".concat(W))}if(f!==o.linkText&&(f||o.internalLink||o.internalEmbed||o.inlineFootnote?(o.hmdLinkType in wD&&(y+=" "+wD[o.hmdLinkType]),o.hmdLinkType===hD.FOOTNOTE?o.hmdLinkType=hD.MAYBE_FOOTNOTE_URL:o.hmdLinkType=hD.NONE):(d=t.match(/^([^\]]+)\](\(| ?\[|\:)?/,!1))?d[2]?":"===d[2]&&"["===t.string.substr(0,t.pos).trim()?o.hmdLinkType=hD.FOOTNOTE:"["!==d[2]&&" ["!==d[2]||"]"!==t.string.charAt(t.pos+d[0].length)?o.hmdLinkType=hD.NORMAL:o.hmdLinkType=hD.BARELINK2:"^"===d[1].charAt(0)?o.hmdLinkType=hD.FOOTREF:o.hmdLinkType=hD.BARELINK:o.hmdLinkType=hD.BARELINK),g!==o.linkHref&&(g?o.hmdLinkType&&(y+=" "+wD[o.hmdLinkType],o.hmdLinkType=hD.NONE):"["===H&&"]"!==t.peek()&&(o.hmdLinkType=hD.FOOTREF2)),o.hmdLinkType!==hD.NONE&&(o.hmdLinkType in wD&&(y+=" "+wD[o.hmdLinkType]),o.hmdLinkType===hD.MAYBE_FOOTNOTE_URL&&(/^(?:\]\:)?\s*$/.test(H)||(y=aD.test(H)||lD.test(H)?y.replace("string url","url")+" hmd-footnote-url":y.replace("string url",""),o.hmdLinkType=hD.NONE))),o.inlineFootnote&&(y+=" inline-footnote"),/formatting-escape/.test(y)&&H.length>1){var _=H.length-1,j=y.replace("formatting-escape","escape")+" hmd-escape-char";return o.hmdOverride=function(e,t){return e.pos+=_,t.hmdOverride=null,j.trim()},y+=" hmd-escape-backslash",t.pos-=_,y}if(!y.trim()&&n.table){var G=!1;if("|"===H.charAt(0)&&(t.pos=t.start+1,H="|",G=!0),!V&&o.prevLine&&o.prevLine.stream&&o.prevLine.stream.string.trim()&&!o.wasHeading&&(G=!1),G){if(!V){pD.test(t.string)?V=QT.SIMPLE:fD.test(t.string)&&(V=QT.NORMAL);var K=void 0;if(V){var Y=t.lookAhead(1);if(V===QT.NORMAL?fD.test(Y)?Y=Y.replace(/^\s*\|/,"").replace(/\|\s*$/,""):V=QT.NONE:V===QT.SIMPLE&&(pD.test(Y)||(V=QT.NONE)),V){K=Y.split("|");for(var X=0;X<K.length;X++){var $=K[X];if(mD.test($))$="right";else if(vD.test($))$="left";else if(yD.test($))$="center";else{if(!bD.test($)){V=QT.NONE;break}$="default"}K[X]=$}}}V&&(o.hmdTable=V,o.hmdTableColumns=K,o.hmdTableRow=o.hmdTableCol=0)}if(V){var Z=o.hmdTableColumns.length-1,Q=($=o.hmdTableRow,o.hmdTableCol);0==Q&&(y+=" line-HyperMD-table-".concat(V," line-HyperMD-table-row line-HyperMD-table-row-").concat($)),V===QT.NORMAL&&(0===o.hmdTableCol&&/^\s*\|$/.test(t.string.slice(0,t.pos))||t.match(/^\s*$/,!1))?y+=" hmd-table-sep hmd-table-sep-dummy":o.hmdTableCol<Z&&(y+=" hmd-table-sep hmd-table-sep-".concat(Q),o.hmdTableCol+=1)}}}if(V&&1===o.hmdTableRow&&/emoji/.test(y)&&(y=""),v&&"<"===H){var J=null;if(t.match(/^\![A-Z]+/)?J=">":t.match("?")?J="?>":t.match("![CDATA[")&&(J="]]>"),null!=J)return c(t,o,null,{endTag:J,style:(y+" comment hmd-cdata-html").trim()})}if(n.hashtag&&v)if(o.hmdHashtag){y=y.replace(/((formatting )?formatting-em|em) /g,"");var ee=!1;if(!/formatting/.test(y)&&!/^\s*$/.test(H)){d=H.match(cD);var te=H.length-(d?d[0].length:0);te>0&&(t.backUp(te),ee=!0)}if(ee||(ee=t.eol()),ee||(ee=!cD.test(t.peek())),ee)y+=" hashtag-end "+(re="tag-"+(re=t.current()).replace(/[^_a-zA-Z0-9\-]/g,"")),o.hmdHashtag=!1}else if("#"===H&&!o.linkText&&!o.image&&(p||/^\s*$/.test(t.string.charAt(t.start-1)))){var ne=t.string.slice(t.pos).replace(/\\./g,""),ie=cD.exec(ne);if(ie&&/[^0-9]/.test(ie[0])){var re="tag-"+ie[0].replace(/[^_a-zA-Z0-9\-]/g,"");o.hmdHashtag=!0,y+=" formatting formatting-hashtag hashtag-begin "+n.tokenTypeOverrides.hashtag+" "+re}}}return y.trim()||null},o}),"hypermd"),iD.defineMIME("text/x-hypermd","hypermd"),function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(CD||(CD={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(ED||(ED={}));var SD=window.Capacitor&&"web"!==A.getPlatform(),MD=!!SD&&"ios"===A.getPlatform(),TD=!!SD&&"android"===A.getPlatform(),DD=SD?L("App"):null,AD=(SD&&L("Clipboard"),SD?L("Filesystem"):null),LD=(SD&&L("SplashScreen"),SD?L("StatusBar"):null),PD=SD?L("Device"):null,ID=SD?L("KeepAwake"):null,OD=SD?L("Keyboard"):null,FD=(SD&&L("Haptics"),[]);function BD(){if(0===FD.length)try{ID.keepAwake().catch(console.error)}catch(e){console.error(e)}var e={release:function(){if(FD.remove(e),0===FD.length)try{ID.allowSleep().catch(console.error)}catch(e){console.error(e)}}};return FD.push(e),e}var ND=function(){function e(){this.queue=[],this.offset=0}return e.prototype.get=function(){return this.queue},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length-this.offset},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0==this.queue.length},e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.enqueueArray=function(e){for(var t=this.queue,n=0,i=e;n<i.length;n++){var r=i[n];t.push(r)}},e.prototype.remove=function(e){for(var t=this.queue,n=t.length-1;n>=this.offset;n--)t[n]===e&&t.splice(n,1)},e.prototype.dequeue=function(){var e=this.queue,t=this.offset;if(0!=e.length){var n=e[t];return e[t]=void 0,2*(t+=1)>=e.length&&(this.queue=e.slice(t),t=0),this.offset=t,n}},e.prototype.peek=function(){return this.queue.length>0?this.queue[this.offset]:void 0},e}(),RD=function(){function e(){this.promise=Promise.resolve()}return e.prototype.queue=function(e){var t=this.promise.then(e,e);return this.promise=t,t},e}();function HD(){var e={promise:null,resolve:null,reject:null};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function VD(e,t,n){var i=this;void 0===n&&(n=t);var r=null,o=0,a=null;return function(){return v(i,void 0,Promise,(function(){var i=this;return y(this,(function(s){return a?[2,a]:r&&o>Date.now()?[2,r]:[2,a=v(i,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:o=Date.now()+n,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),a=null,[2,null];case 4:return o=Date.now()+t,a=null,setTimeout((function(){o>Date.now()&&(r=null)}),t),[2,r]}}))}))]}))}))}}var zD=function(){function e(e){this.running=!1,this.cancelled=!1;var t=e||{},n=t.onStart,i=t.onStop,r=t.onCancel;this.onStart=n||null,this.onStop=i||null,this.onCancel=r||null}return e.prototype.start=function(){this.running||(this.running=!0,this.onStart&&this.onStart())},e.prototype.stop=function(){this.running&&(this.running=!1,this.onStop&&this.onStop())},e.prototype.cancel=function(){this.stop(),this.cancelled||(this.cancelled=!0,this.onCancel&&this.onCancel())},e.prototype.isRunning=function(){return this.running},e.prototype.isCancelled=function(){return this.cancelled},e}(),qD=function(){function e(e){this.items=new ND,this.promise=null,this.runnable=new zD(e)}return e.prototype.addList=function(e){this.items.enqueueArray(e),this.notify()},e.prototype.add=function(e){this.items.enqueue(e),this.notify()},e.prototype.remove=function(e){this.items.remove(e)},e.prototype.notify=function(){var e=this.promise;e&&(this.promise=null,setTimeout((function(){e&&e.resolve()}),0))},e.prototype.cancel=function(){this.runnable.cancel()},e.prototype.generator=function(){return C(this,arguments,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.runnable,n.label=1;case 1:return e.isCancelled()?[4,k(void 0)]:[3,3];case 2:return[2,n.sent()];case 3:return 0!==(t=this.items).length?[3,5]:(e.stop(),[4,k((this.promise=HD()).promise)]);case 4:return n.sent(),[3,8];case 5:return e.start(),[4,k(t.dequeue())];case 6:return[4,n.sent()];case 7:n.sent(),n.label=8;case 8:return[3,1];case 9:return[2]}}))}))},e}();function UD(e){return C(this,arguments,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?[4,k(n[t])]:[3,5];case 2:return[4,i.sent()];case 3:i.sent(),i.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))}function WD(e,t){return C(this,arguments,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:i=(n=t||{}).batchSize,r=void 0===i?10:i,o=n.duration,a=void 0===o?5:o,s=n.maxDelay,l=void 0===s?100:s,c=n.beforePause,u=0,h=performance.now(),y.label=1;case 1:y.trys.push([1,9,10,15]),p=E(e),y.label=2;case 2:return[4,k(p.next())];case 3:return(d=y.sent()).done?[3,8]:[4,k(d.value)];case 4:return[4,y.sent()];case 5:return y.sent(),++u%r!=0?[3,7]:(f=performance.now())-h>a?(c&&c(f),[4,k(new Promise((function(e){return dt(e,l)})))]):[3,7];case 6:y.sent(),h=performance.now(),y.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return g=y.sent(),m={error:g},[3,15];case 10:return y.trys.push([10,,13,14]),d&&!d.done&&(v=p.return)?[4,k(v.call(p))]:[3,12];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(m)throw m.error;return[7];case 14:return[7];case 15:return[2]}}))}))}var _D=function(){function e(){this.promises=[]}return e.prototype.add=function(e){this.promises.push(e())},e.prototype.addPromise=function(e){this.promises.push(e)},e.prototype.isEmpty=function(){return 0===this.promises.length},e.prototype.promise=function(){return Promise.all(this.promises)},e}();function jD(e){return new Promise((function(t){return e.then(t,t)}))}var GD=Db("/lib/pdfjs/pdf.min.js",{after:function(){window.pdfjsLib.GlobalWorkerOptions.workerSrc="/lib/pdfjs/pdf.worker.min.js",Ue(window,"pdfjsLib"),Ue(pdfjsLib.GlobalWorkerOptions,"workerSrc")}}),KD=Db("/lib/pdfjs/pdf.viewer.min.js",{after:function(){Ue(window,"pdfjsViewer")}});function YD(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,GD.promise];case 1:return e.sent(),[2,window.pdfjsLib]}}))}))}function XD(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,GD.promise];case 1:return e.sent(),[4,KD.promise];case 2:return e.sent(),[2,window.pdfjsViewer]}}))}))}for(var $D=Db("/lib/codemirror/modes.min.js"),ZD={primaryColor:"var(--background-primary-alt)",fontFamily:"var(--font-mermaid)",secondaryColor:"var(--background-secondary)",tertiaryColor:"var(--background-secondary-alt)",primaryBorderColor:"var(--background-modifier-border)",primaryTextColor:"var(--text-normal)",secondaryBorderColor:"var(--background-modifier-border)",secondaryTextColor:"var(--text-normal)",tertiaryBorderColor:"var(--background-modifier-border)",tertiaryTextColor:"var(--text-normal)",noteBkgColor:"var(--background-primary-alt)",noteTextColor:"var(--text-normal)",noteBorderColor:"var(--background-modifier-border)",lineColor:"var(--text-normal)",textColor:"var(--text-normal)",mainBkg:"var(--background-primary)",errorBkgColor:"var(--background-primary)",errorTextColor:"var(--text-error)",taskTextDarkColor:"var(--text)",nodeBorder:"var(--text-muted)",actorTextColor:"var(--text-normal)",taskTextColor:"var(--text-normal)",requirementTextColor:"var(--text-normal)",tagLabelColor:"var(--text-normal)",transitionLabelColor:"var(--text-normal)",pieSectionTextColor:"var(--text-normal)",classText:"var(--text-normal)",stateLabelColor:"var(--text-normal)",nodeTextColor:"var(--text-normal)",signalTextColor:"var(--text-normal)",titleColor:"var(--text-normal)",transitionColor:"var(--text-normal)",compositeTitleBackground:"var(--background-primary-alt)",compositeBackground:"var(--background-primary)",requirementBackground:"var(--background-primary-alt)",requirementBorderColor:"var(--text-muted)",relationLabelBackground:"var(--background-secondary)",relationLabelColor:"var(--text-normal)",relationColor:"var(--text-normal)",labelTextColor:"var(--text-normal)",scaleLabelColor:"var(--text-normal)",edgeLabelBackground:"var(--background-secondary)",activationBorderColor:"var(--background-modifier-border)",sequenceNumberColor:"var(--background-primary)",activeTaskBkgColor:"var(--background-primary-alt)",fillType0:"var(--background-secondary-alt)",fillType1:"var(--background-secondary-alt)",faceColor:"var(--background-primary)",fillType2:"var(--background-primary-alt)",fillType3:"var(--background-primary-alt)",fillType4:"var(--background-primary-alt)",fillType5:"var(--background-primary-alt)",fillType6:"var(--background-primary-alt)",fillType7:"var(--background-primary-alt)",pieLegendTextColor:"var(--text-normal)",pie1:"#8dd3c7",pie2:"#ffffb3",pie3:"#bebada",pie4:"#fb8072",pie5:"#80b1d3",pie6:"#fdb462",pie7:"#b3de69",pie8:"#fccde5",pie9:"#d9d9d9",pie10:"#bc80bd",pie11:"#ccebc5",pie12:"#ffed6f",git0:"var(--color-red)",git1:"var(--color-orange)",git2:"var(--color-yellow)",git3:"var(--color-green)",git4:"var(--color-cyan)",git5:"var(--color-blue)",git6:"var(--color-purple)",git7:"var(--color-pink)",cScale0:"var(--color-red)",cScale1:"var(--color-orange)",cScale2:"var(--color-yellow)",cScale3:"var(--color-green)",cScale4:"var(--color-cyan)",cScale5:"var(--color-blue)",cScale6:"var(--color-purple)",cScale7:"var(--color-pink)"},QD=0;QD<12;QD++)ZD["cScaleLabel"+QD]="var(--text-normal)";var JD=Db("/lib/mermaid.min.js",{after:function(){mermaid.initialize({startOnLoad:!1,theme:"base",securityLevel:"strict",themeCSS:"foreignObject{overflow: visible}#arrowhead,#sequencenumber,.cluster text,.label text,text,text.actor{fill:var(--text-normal)}line{stroke:var(--text-normal)}g>g>circle,g>g>path{stroke:var(--background-accent);color:var(--text-normal)}.label rect{display:none}.cluster rect{stroke-width:1px}.node circle,.node ellipse,.node path,.node polygon,.node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px}.node .label{text-align:center}.node.clickable{cursor:pointer}.arrowheadPath{fill:var(--text-muted)}.edgePath .path{stroke:var(--text-muted);stroke-width:1.5px}.edgeLabel{background-color:var(--background-primary);text-align:center}.cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100}.actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important}text.actor{stroke:none}.actor-line{stroke:var(--text-muted)}.messageLine0,.messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal)}#crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important}.messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important}.labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt)}.labelText,.loopText{fill:var(--text-normal);stroke:none}.loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border)}.activation0,.activation1,.activation2{fill:var(--background-secondary) stroke: var(--text-muted)}.section{stroke:none;opacity:.2}.section0,.section2{fill:var(--text-accent)}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:var(--text-normal)}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:#d42;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle}.taskText:not([font-size]){font-size:11px}.taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px}.task.clickable,g.clickable{cursor:pointer}.taskText.clickable,.taskTextOutsideLeft.clickable,.taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:var(--interactive-accent);stroke:var(--interactive-accent)}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:var(--text-normal)}.active0,.active1,.active2,.active3,g.classGroup rect,g.stateGroup rect{fill:var(--background-primary-alt); stroke: var(--background-modifier-border)}g.classGroup rect,g.stateGroup rect{stroke:var(--background-modifier-border)}.activeText0,.activeText1,.activeText2,.activeText3{fill:var(--text-normal)!important}.done0,.done1,.done2,.done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:var(--text-normal)!important}.crit0,.crit1,.crit2,.crit3{stroke:#b1361b;fill:#d42;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3,.classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2}.classLabel .box{stroke:none;stroke-width:0;opacity:.5}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.milestone{transform:rotate(45deg) scale(.8,.8)}.milestoneText{font-style:italic}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:var(--text-normal)!important}.titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px}g.classGroup text .title{font-weight:bolder}#aggregationEnd,#aggregationStart,#compositionEnd,#compositionStart,g.classGroup line,g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1}.classLabel .label{font-size:11px}.relation{fill:none}.dashed-line{stroke-dasharray:3}#compositionEnd,#compositionStart{fill:var(--background-modifier-border)}#aggregationEnd,#aggregationStart{fill:var(--background-secondary-alt)}#dependencyEnd,#dependencyStart,#extensionEnd,#extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1}.branch-label,.commit-id,.commit-msg{fill:#d3d3d3;color:#d3d3d3}.pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal)}.state-note text,g.stateGroup text{stroke:none;font-size:10px}g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal)}.stateGroup .composit{fill:#fff;border-bottom:1px}.stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}.state-note{stroke:#645c10;fill:#f3edb3}.state-note text{fill:#000}.stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5}.stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700}.node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal)}.node circle.state-end{stroke:var(--background-primary);stroke-width:2}#statediagram-barbEnd,g.stateGroup text{fill:var(--background-modifier-border)}.statediagram-cluster rect{stroke-width:1px}.statediagram-cluster rect,.statediagram-state .divider{stroke:var(--background-modifier-border)}.statediagram-cluster rect .inner{fill:var(--background-secondary-alt)}.statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary)}.cluster-label text,.node circle.state-end{fill:var(--text-normal)}.statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary)}.note-edge{stroke-dasharray:5}.statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px}.error-icon{fill:var(--background-modifier-error)}.error-text{fill:var(--text-error);stroke:var(--text-error)}",flowchart:{useMaxWidth:!1},sequence:{useMaxWidth:!1},gantt:{useMaxWidth:!0,axisFormatter:[["%Y-%m-%d",function(e){return 1===e.getDay()}]]},journey:{useMaxWidth:!0},class:{useMaxWidth:!0},git:{useMaxWidth:!1},state:{useMaxWidth:!0},er:{useMaxWidth:!1,stroke:"var(--text-muted)"},pie:{useMaxWidth:!0}}),mermaid.mermaidAPI.updateSiteConfig({themeVariables:ZD})}});function eA(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,JD.promise];case 1:return e.sent(),[2,mermaid]}}))}))}var tA=Db("/lib/prism.min.js");function nA(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,tA.promise];case 1:return e.sent(),[2,Prism]}}))}))}var iA=Db("/lib/mathjax/tex-chtml-full.js",{before:function(){window.MathJax={tex:{inlineMath:[],displayMath:[],processEscapes:!1,processEnvironments:!1,processRefs:!1},startup:{typeset:!1},options:{enableMenu:!1,menuOptions:{settings:{renderer:"CHTML"}},renderActions:{assistiveMml:[]},safeOptions:{safeProtocols:{http:!0,https:!0,file:!0,javascript:!1,data:!1}}}},localStorage.removeItem("MathJax-Menu-Settings")}});function rA(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,iA.promise];case 1:return e.sent(),[2]}}))}))}function oA(e,t){return MathJax.tex2chtml(e,{display:t})}var aA=null,sA=0,lA=null,cA=function(){var e=MathJax.chtmlStylesheet();lA&&e===lA||(lA&&lA.detach(),lA=e,document.head.appendChild(e)),lA.dataset.change="1"===lA.dataset.change?"2":"1",aA.resolve(),aA=null};function uA(){return aA||(aA=HD()),clearTimeout(sA),sA=window.setTimeout(cA,100),aA.promise}var hA=/^(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com|youtu\.be)(?:\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(?:\??(?:t|start)=([0-9]+))?(?:\S+)?$/,pA=/^(?:https?:\/\/)?(?:mobile\.)?twitter\.com\/.+\/(\d+)/;function dA(e){if(!e||"string"!=typeof e)return null;var t;if(t=e.match(hA))return e="https://www.youtube.com/embed/"+t[1],t[2]&&(e+="?start="+t[2]),e;if(t=e.match(pA)){var n=document.body.hasClass("theme-dark");return"https://platform.twitter.com/embed/Tweet.html?dnt=true&theme=".concat(n?"dark":"light","&id=").concat(t[1])}return null}function fA(e){var t=createEl("iframe","external-embed mod-receives-events");return t.setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals allow-popups"),t.setAttr("allow","fullscreen"),t.setAttr("frameborder","0"),t.src=e,e.contains("platform.twitter.com")&&(t.setAttr("scrolling","no"),function(e,t){e.addEventListener("framemessage",(function(e){e.detail&&t(e.detail)})),mA(e.win),e.onWindowMigrated((function(){return mA(e.win)}))}(t,(function(e){var n=e.data;if(n){var i=n["twttr.embed"];if(i&&"twttr.private.resize"===i.method){var r=i.params[0].height;Number.isNumber(r)&&(t.style.height=String(Math.min(1e3,r))+"px")}}}))),t}var gA=new WeakSet;function mA(e){gA.has(e)||(gA.add(e),e.addEventListener("message",(function(t){for(var n=0,i=e.document.body.findAll("iframe");n<i.length;n++){var r=i[n];if(r.contentWindow===t.source)return void r.dispatchEvent(new CustomEvent("framemessage",{bubbles:!1,detail:t}))}})))}var vA=function(){function e(){this.map=new WeakMap}return e.prototype.get=function(e){return this.map.get(e)},e.prototype.set=function(e,t){return this.map.set(e,t),this},e.prototype.has=function(e){return this.map.has(e)},e.prototype.delete=function(e){return this.map.delete(e)},e}(),yA=0,bA=function(){function e(){this._="_weakmap_"+yA++}return e.prototype.get=function(e){return this.has(e)?e[this._]:void 0},e.prototype.set=function(e,t){return Object.defineProperty(e,this._,{configurable:!0,value:t}),this},e.prototype.has=function(e){return Object.hasOwnProperty.call(e,this._)},e.prototype.delete=function(e){return this.has(e)&&delete e[this._]},e}();function wA(){return window.WeakMap?new vA:new bA}var kA=function(){function e(e){this.promise=null,this.worker=e,this.worker.onmessage=this.onReceiveMessageFromWorker.bind(this)}return e.prototype.onReceiveMessageFromWorker=function(e){if(this.promise){var t=this.promise;this.promise=null,t.resolve(e.data)}},e.prototype.submit=function(e,t){return this.promise?null:(this.promise=HD(),this.worker.postMessage(e,t),this.promise.promise)},e}();function CA(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,ajaxPromise({url:e})];case 1:return n=i.sent(),[2,new Worker(window.URL.createObjectURL(new Blob([n])),t)]}}))}))}function EA(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){if(ke)return[2,CA(e,t)];try{return[2,new Worker(e,t)]}catch(t){return[2,CA(e)]}return[2]}))}))}var xA=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=t,n}return f(t,e),t}(nb),SA=function(){function e(e){this.rendered=!1,this.height=0,this.computed=!1,this.lines=0,this.lineStart=0,this.lineEnd=0,this.used=!0,this.highlightRanges=null,this.level=0,this.headingCollapsed=!1,this.shown=!0,this.usesFrontMatter=!1,this.html=e||"",this.el=createDiv(),null===e&&(this.rendered=!0)}return e.prototype.render=function(){if(!this.rendered){var e=hM(this.html);this.el.appendChild(e),this.rendered=!0,this.computed=!1}},e.prototype.resetCompute=function(){this.computed=!1;var e=this.highlightRanges;if(e)for(var t=0,n=e;t<n.length;t++){n[t].rects=null}},e.prototype.setCollapsed=function(e){this.headingCollapsed=e,XM(this.el,e)},e}();function MA(e,t){var n=e.firstChild;n&&n.instanceOf(HTMLHeadingElement)&&t(n)}function TA(e,t){for(var n=0,i=e.findAll("li");n<i.length;n++){var r=i[n],o=r.findAll("ul, ol");o&&o.length>0&&t(r)}}var DA=null,AA=!1;var LA=function(){function e(t,n,i,r,o){void 0===o&&(o=!0);var a=this;this.previewEl=null,this.sizerEl=null,this.pusherEl=null,this.header=null,this.footer=null,this.cssClasses=null,this.sections=[],this.asyncSections=[],this.recycledSections=[],this.lastText=null,this.text="",this.frontmatter=null,this.queued=null,this.rendered=null,this.lastRender=0,this.lastScroll=0,this.viewportHeight=0,this.renderedWidth=0,this.renderExtra=1,this.renderExtraMinPx=500,this.addBottomPadding=!1,this.topSpace=0,this.parsing=!1,this.scrolling=!1,this.owner=t,this.workerPath=r;var s=this.previewEl=i.createDiv("markdown-preview-view markdown-rendered"),l=this.sizerEl=s.createDiv("markdown-preview-sizer markdown-preview-section"),c=this.pusherEl=createDiv("markdown-preview-pusher");c.style.width="1px",c.style.height="0.1px",e.registerDomEvents(l,n,this.handleDetached.bind(this)),l.on("click","a.footnote-link",this.onFootnoteLinkClick.bind(this)),l.on("click",".task-list-item-checkbox",this.onCheckboxClick.bind(this)),l.on("click",".heading-collapse-indicator",this.onHeadingCollapseClick.bind(this)),l.on("click","li > .list-collapse-indicator",this.onListCollapseClick.bind(this)),s.addEventListener("scroll",this.onScroll.bind(this),Cb),o&&s.onNodeInserted((function(){return a.queueRender()})),this.onResize()}return e.prototype.set=function(e){this.text=e,this.queueRender()},e.prototype.rerender=function(e){if(this.lastText=null,e)for(var t=0,n=this.sections;t<n.length;t++){var i=n[t];i.rendered=!1,i.el.empty()}this.queueRender()},e.prototype.clear=function(){this.sections=[],this.asyncSections=[],this.recycledSections=[],this.rendered=[],this.sizerEl.empty(),this.text="",this.lastText=null,this.lastScroll=0,this.previewEl.scrollTop=0,this.renderedWidth=0,this.owner.onRenderComplete(),this.cleanupParentComponents(),this.queueRender()},e.prototype.belongsToMe=function(t){return e.belongsToMe(t,this.previewEl,this.handleDetached.bind(this))},e.prototype.handleDetached=function(e){return this.sections.some((function(t){return t.el===e}))},e.prototype.getSectionForElement=function(e){for(var t=0,n=this.sections;t<n.length;t++){var i=n[t];if(i.el.contains(e))return i}return null},e.prototype.getSectionInfo=function(e){if(!this.belongsToMe(e))return null;var t=this.getSectionForElement(e);return t?{text:this.lastText||"",lineStart:t.lineStart,lineEnd:t.lineEnd}:null},e.prototype.getInternalLinkHref=function(e){var t=e.getAttr("data-href")||e.getAttr("href");return t&&this.belongsToMe(e)?t:null},e.prototype.onFootnoteLinkClick=function(e,t){if(0===e.button&&this.belongsToMe(t)){e.preventDefault();var n=t.getAttr("href");if(n&&n.startsWith("#")){for(var i="[data-footnote-id="+(n=n.substr(1))+"]",r=null,o=null,a=0,s=this.sections;a<s.length;a++){var l=s[a];if(o=l.el.find(i)){r=l;break}}if(!o||!r)return;this.showSection(r),this.applyScrollSection(r),this.highlightEl(o),this.updateVirtualDisplay(),o.scrollIntoView({block:"center"}),this.owner.onScroll()}}},e.prototype.onCheckboxClick=function(e,t){if(this.belongsToMe(t)){var n=parseInt(t.getAttribute("data-line"));if(!(n<0||isNaN(n))){var i=this.getSectionContainer(t);if(i){var r=i.lineStart+n;this.owner.onCheckboxClick(e,t,r)}}}},e.prototype.onHeadingCollapseClick=function(e,t){if(0===e.button&&!e.defaultPrevented){var n=t.parentNode;if(n&&n.instanceOf(HTMLHeadingElement)&&this.belongsToMe(n)){var i=this.getSectionContainer(n);i&&(i.setCollapsed(!i.headingCollapsed),this.previewEl.win.getSelection().removeAllRanges(),this.queueRender(),this.owner.onFoldChange())}}},e.prototype.onListCollapseClick=function(e,t){if(0===e.button&&!e.defaultPrevented){var n=t.parentNode;if(n&&n.instanceOf(HTMLLIElement))if(this.belongsToMe(n))if(n.findAll("ul, ol")){e.preventDefault();var i=!n.hasClass("is-collapsed");XM(n,i),window.getSelection().removeAllRanges();var r=this.getSectionContainer(t);r&&(r.resetCompute(),this.queueRender()),this.owner.onFoldChange()}}},e.prototype.queueRender=function(){this.rendered||(this.rendered=[]);var e=this.queued,t=!this.parsing;if(e)t&&!e.high&&(e.cancel(),this.queued=dt(this.onRender.bind(this),0));else{var n=t?0:200;this.queued=dt(this.onRender.bind(this),n)}},e.prototype.parseAsync=function(){var e=this;this.parsing||(this.parsing=!0,v(e,void 0,Promise,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),DA?[3,2]:[4,EA(this.workerPath)];case 1:e=a.sent(),DA=new kA(e),a.label=2;case 2:return DA.promise?[4,DA.promise.promise]:[3,4];case 3:return a.sent(),[3,2];case 4:return t=this.text,[4,DA.submit({parseSections:t,options:ex.globalOptions})];case 5:return n=a.sent(),i=this.previewEl,r=i.scrollTop,this.parseFinish(t,n),i.scrollTop=r,this.onRender(),this.parsing=!1,[3,7];case 6:return o=a.sent(),this.parsing=!1,console.error(o),this.parseSync(),this.queueRender(),[3,7];case 7:return[2]}}))})))},e.prototype.parseSync=function(){var e=this.text,t=function(e){var t=rx(e),n={definitions:vx(t)},i=[],r=[],o=[],a=t.children,s=cx(t);t.children=[null];for(var l=function(e){var s=a[e],l=7;"heading"===s.type&&(l=s.depth||1);var c=s.position.start.line-1,u=s.position.end.line-1;Rw(s,"checklist",(function(e){var t=e.position.start.line-1;e.data.hProperties["data-line"]=String(t-c)})),Rw(s,"listItem",(function(e){var t=e.position.start.line-1,n=e.data=e.data||{};(n.hProperties=n.hProperties||{})["data-line"]=String(t-c)})),t.children[0]=s;var h=ux(t,n);i.push(h),r.push([c,u]),o.push(l)},c=0;c<a.length;c++)l(c);return{sectionHtml:i,lineNumbers:r,levels:o,frontmatter:s}}(e);this.parseFinish(e,t)},e.prototype.parseFinish=function(e,t){for(var n=t.sectionHtml,i=t.lineNumbers,r=t.levels,o=t.frontmatter,a=this,s=a.recycledSections,l=a.header,c=a.footer,u=this.sections,h=new Xe,p=0,d=u;p<d.length;p++){var f=d[p];f!==l&&f!==c&&(f.used=!1,h.add(f.html,f))}for(var g=[],m=0;m<n.length;m++){var v=n[m],y=null,b=h.get(v);if(b&&b.length>0)for(var w=0,k=b;w<k.length;w++){var C=k[w];if(!C.used){C.used=!0,y=C;break}}var E=i[m],x=E[0],S=E[1];y||(y=new SA(v));var M=0===m?0:x,T=m===n.length-1?S+1:i[m+1][0];y.lines=T-M,y.lineStart=x,y.lineEnd=S,y.level=r[m],g.push(y)}var D=JSON.stringify(this.frontmatter)===JSON.stringify(o);if(this.frontmatter=o,D)for(var A=0,L=g;A<L.length;A++){(R=L[A]).usesFrontMatter&&(R.rendered=!1,R.el.empty())}var P=this.cssClasses,I=this.previewEl;P&&(I.removeClasses(P),this.cssClasses=null);var O=mx(o);O&&O.length>0&&(this.cssClasses=O,I.addClasses(O)),l&&g.unshift(l),c&&g.push(c),this.sections=g;var F=this.asyncSections;this.asyncSections=[];for(var B=0,N=F;B<N.length;B++){var R=N[B];g.contains(R)&&this.asyncSections.push(R)}for(var H=0,V=u;H<V.length;H++){(R=V[H]).rendered&&!R.used&&s.push(R)}this.lastText=e,this.lastRender=Date.now()},e.prototype.onRender=function(){var t=this;this.queued=null;var n=this.previewEl;if(!!n.offsetParent&&n.offsetWidth>0){var i=n.scrollTop;this.lastText!==this.text&&(this.text.length<10240?this.parseSync():this.parseAsync());for(var r=this,o=r.sections,a=r.sizerEl,s=r.pusherEl,l=0,c=performance.now(),u=!1,h=function(n){if(n.rendered)return"continue";l++;var i=n.el;n.render();for(var r=0,o=e.recyclers;r<o.length;r++){(0,o[r])(i,p.recycledSections)}MA(i,(function(e){gb(e.createDiv({cls:"heading-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),"right-triangle")})),TA(i,(function(e){gb(e.createDiv({cls:"list-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),"right-triangle")}));for(var a=0,s=i.findAll("ul > li");a<s.length;a++){var h=s[a];h.parentElement.addClass("has-list-bullet"),h.createDiv({cls:"list-bullet",prepend:!0})}var d=[];if((p.owner.postProcess(n,d,p.frontmatter),d.length>0&&(p.asyncSections.push(n),Promise.all(d).then((function(){t.asyncSections.remove(n),n.resetCompute(),t.queueRender()}))),l%10==0)&&performance.now()-c>5)return u=!0,"break"},p=this,d=0,f=o;d<f.length;d++){if("break"===h(S=f[d]))break}for(var g=[],m=!1,v=[s],y=0,b=0,w=o;b<w.length;b++){var k=(S=w[b]).el,C=k.parentElement===a;if(!S.computed&&S.rendered?(C=!0,g.push(S),m=!0,y++):m&&(C=!0,m=!1),C&&v.push(k),y>100){u=!0;break}}a.setChildrenInPlace(v);for(var E=0,x=g;E<x.length;E++){var S=x[E];this.measureSection(S)}if(this.topSpace=s.offsetTop,this.updateShownSections(),this.updateVirtualDisplay(i),u)this.queueRender();else if(this.lastText===this.text){if(this.recycledSections=[],this.asyncSections.length>0)return;if(this.rendered)for(var M=0,T=this.rendered;M<T.length;M++){(0,T[M])()}this.rendered=null,this.owner.onRenderComplete(),this.cleanupParentComponents()}}},e.prototype.updateShownSections=function(){for(var e=7,t=0,n=this.sections;t<n.length;t++){var i=n[t];i.level>e?i.shown=!1:(i.shown=!0,e=7,i.headingCollapsed&&(e=i.level))}},e.prototype.updateVirtualDisplay=function(e){var t=this,n=t.previewEl,i=t.sizerEl,r=t.pusherEl,o=t.sections,a=n.scrollTop;if("number"==typeof e&&(a=e),AA){var s=[];s.push(r);for(var l=0,c=o;l<c.length;l++){var u=c[l];s.push(u.el)}return i.setChildrenInPlace(s),i.style.minHeight="",r.style.marginBottom="0",void(n.scrollTop=a)}this.lastScroll=a;for(var h=n.clientHeight,p=a+h,d=Math.min(a,n.scrollHeight-h),f=Math.max(h*this.renderExtra,this.renderExtraMinPx),g=d-f,m=p+f,v=0,y=0,b=0;b<o.length;b++){(O=(u=o[b]).height)>0&&(v+=O,y++)}var w=0;y>0&&(w=v/y);var k=0,C=this.topSpace,E=[];E.push(r);var x=-1,S=-1,M=-1,T=-1,D=null,A=null,L=window.getSelection();if(L.rangeCount>0){var P=L.getRangeAt(0);!P.collapsed&&n.contains(P.startContainer)&&n.contains(P.endContainer)&&(D=P.startContainer,A=P.endContainer,(D===r||D===i&&P.startOffset<=1)&&(M=0),A===i&&P.endOffset>1&&(T=o.length-1))}for(b=0;b<o.length;b++){var I=(u=o[b]).el;if(D&&(I===D||I.contains(D))&&(M=b),A&&(I===A||I.contains(A))&&(T=b),u.shown){var O=u.height;if(u.computed)(N=C+O)>=g&&C<=m&&(-1===x&&(x=b),S=b),C=N;else C+=O,0===O&&(C+=w)}}var F=x,B=S;-1!==M&&-1!==T&&(F=Math.min(F,M),B=Math.max(B,T)),F<0&&(F=0),++B>o.length-1&&(B=o.length-1),C=this.topSpace;for(b=0;b<o.length;b++){I=(u=o[b]).el;u.shown&&F<=b&&b<=B?E.push(I):I.parentNode===i&&I.detach();var N;O=u.height;u.computed||0!==O||(O=w),u.shown||(O=0),b===F&&(k=C),C=N=C+O}k>0&&(k-=this.topSpace)<0&&(k=0),C-=this.topSpace,C=Math.max(0,C),r.style.marginBottom=k+"px",i.style.minHeight=C-1+"px",i.setChildrenInPlace(E),B!==o.length-1&&B--;for(b=F;b<=B;b++){(u=o[b]).shown&&this.measureSection(u)}n.scrollTop!==a&&(n.scrollTop=a),this.renderHighlights(x,S)},e.prototype.renderHighlights=function(e,t){var n=this.sections,i=this.sizerEl,r=i.offsetParent;if(r){var o=r.getBoundingClientRect(),a=1;r instanceof HTMLElement&&(a=r.offsetWidth/Math.round(o.width));for(var s=[],l=e;l<=t;l++)if(!(l<0||l>=n.length)){var c=n[l];if(c.shown){var u=c.highlightRanges;if(u&&0!==u.length){var h=[];Ab(c.el,h);for(var p=h.map((function(e){return e.textContent})),d=0,f=u;d<f.length;d++){var g=f[d],m=g.rects;if(!m){m=g.rects=[];var v=Pb(h,p,g.start,g.end);if(!v)continue;for(var y=v.getClientRects(),b=0;b<y.length;b++){var w=y[b];m.push({x:(w.x-o.x+r.scrollLeft)*a,y:(w.y-o.y+r.scrollTop)*a,width:w.width*a,height:w.height*a})}}for(var k=0,C=m;k<C.length;k++){var E=C[k],x=createDiv();g.active&&x.addClass("is-active"),x.style.left=E.x+"px",x.style.top=E.y+"px",x.style.width=E.width+"px",x.style.height=E.height+"px",s.push(x)}}}}}if(s.length>0){var S=createDiv("search-highlight");S.setChildrenInPlace(s),i.appendChild(S)}}},e.prototype.measureSection=function(e){if(e.rendered){var t=e.el,n=t.nextSibling,i=t.offsetTop,r=n?n.offsetTop:t.offsetTop+t.offsetHeight;e.height=r-i,e.computed=!0}},e.prototype.onRendered=function(e){this.rendered?this.rendered.push(e):e()},e.prototype.onResize=function(){this.updateEndPadding();var e=this.sections,t=this.previewEl;this.viewportHeight=t.clientHeight;var n=t.offsetWidth;if(n!==this.renderedWidth){this.renderedWidth=n;for(var i=0,r=e;i<r.length;i++){r[i].resetCompute()}this.queueRender()}else this.updateVirtualDisplay()},e.prototype.updateEndPadding=function(){if(this.addBottomPadding){var e=this.previewEl,t=this.sizerEl,n=e.clientHeight;t.style.paddingBottom=Math.round(n/2)+"px"}else this.sizerEl.style.paddingBottom="0"},e.prototype.foldAllHeadings=function(){for(var e=function(e){MA(e.el,(function(){e.setCollapsed(!0)}))},t=0,n=this.sections;t<n.length;t++){e(n[t])}this.updateShownSections(),this.updateVirtualDisplay(),this.owner.onFoldChange()},e.prototype.unfoldAllHeadings=function(){for(var e=0,t=this.sections;e<t.length;e++){var n=t[e];n.setCollapsed(!1),n.shown=!0}this.updateVirtualDisplay(),this.owner.onFoldChange()},e.prototype.foldAllLists=function(){for(var e=function(e){TA(e.el,(function(t){t.addClass("is-collapsed"),e.resetCompute()}))},t=0,n=this.sections;t<n.length;t++){e(n[t])}this.queueRender(),this.owner.onFoldChange()},e.prototype.unfoldAllLists=function(){for(var e=function(e){TA(e.el,(function(t){t.removeClass("is-collapsed"),e.resetCompute()}))},t=0,n=this.sections;t<n.length;t++){e(n[t])}this.queueRender(),this.owner.onFoldChange()},e.prototype.getFoldInfo=function(){var e=[];if(this.frontmatter)for(var t=0,n=this.sections;t<n.length;t++){var i=(u=n[t]).el.find(".metadata-container");if(i){i.hasClass("is-collapsed")&&e.push({from:u.lineStart,to:u.lineEnd});break}}for(var r=function(t){MA(t.el,(function(){t.headingCollapsed&&e.push({from:t.lineStart,to:t.lineEnd})}))},o=0,a=this.sections;o<a.length;o++){r(u=a[o])}for(var s=function(t){TA(t.el,(function(n){if(n.hasClass("is-collapsed")){var i=parseInt(n.getAttribute("data-line"));if(i<0||isNaN(i))return;var r=t.lineStart+i;e.push({from:r,to:r})}}))},l=0,c=this.sections;l<c.length;l++){var u;s(u=c[l])}return e.length>0?{folds:e,lines:this.text.match(/^/gm).length}:null},e.prototype.applyFoldInfo=function(e){var t=this;e&&e.lines!==this.text.match(/^/gm).length||this.onRendered((function(){var n=new Set;if(e)for(var i=0,r=e.folds;i<r.length;i++){var o=r[i];n.add(o.from)}if(t.frontmatter)for(var a=0,s=t.sections;a<s.length;a++){var l=(g=s[a]).el.find(".metadata-container");if(l){XM(l,n.has(g.lineStart));break}}for(var c=function(e){MA(e.el,(function(){e.setCollapsed(n.has(e.lineStart))}))},u=0,h=t.sections;u<h.length;u++){c(g=h[u])}for(var p=function(e){TA(e.el,(function(t){var i=parseInt(t.getAttribute("data-line"));if(!(i<0||isNaN(i))){var r=e.lineStart+i,o=n.has(r);t.hasClass("is-collapsed")!==o&&(XM(t,o),e.resetCompute())}}))},d=0,f=t.sections;d<f.length;d++){var g;p(g=f[d])}t.queueRender()}))},e.prototype.onScroll=function(){var e=this,t=e.previewEl,n=e.lastScroll,i=e.viewportHeight,r=t.scrollTop;Math.abs(n-r)>Math.max(i*this.renderExtra,this.renderExtraMinPx)/2&&this.updateVirtualDisplay(r),this.scrolling?this.scrolling=!1:this.owner.onScroll()},e.prototype.getScroll=function(){var e=this,t=this.previewEl,n=this.sections;if(0===n.length)return null;for(var i=t.scrollTop,r=0,o=this.topSpace,a=0;a<n.length;a++){var s=n[a];if(!s.computed)return null;if(!(i>o+s.height||0===r&&0===s.lines)){var l=s.height;0===r&&(l+=o,o=0);var c=r,u=i-o,h=0;if(s.lines>0){var p=l/s.lines,d=Math.floor(u/p);c+=d,h=u/p-d}for(var f=function(t){return Mb(t,e.previewEl).top},g=f(s.el),m=void 0,v=0,y=0,b=l/s.lines,w=0,k=s.el.findAll("li");w<k.length;w++){var C=k[w];if(this.belongsToMe(C)){var E=parseInt(C.getAttribute("data-line"));if(!(E<0||isNaN(E))&&C.isShown()){if(!(f(C)-g<u)){if((y=E-v)>0){var x=m?f(m):g;b=(f(C)-x)/y}break}v=E,m=C,b=0}}}if(m)0===b&&(b=(s.el.offsetTop+s.height-f(m))/(s.lines-v)),c=r+v,h=(u-(f(m)-g))/b;return c+h}r+=s.lines,s.shown&&(o+=s.height)}return r},e.prototype.applyScroll=function(e,t){var n=this;if(!Number.isNumber(e)||isNaN(e))return!1;if(this.text!==this.lastText)return!1;var i=Math.floor(e),r=e-i;this.scrolling=!0;for(var o=this.sections,a=t||{},s=a.highlight,l=a.center,c=0,u=this.topSpace,h=0;h<o.length;h++){var p=o[h];if(!p.computed)return!1;if(!(c+p.lines<=i)){if(!p.shown&&s&&(this.showSection(p),p.shown))return this.applyScroll(e,t);var d=p.height;0===c&&(d+=u,u=0);var f=d/p.lines,g=i-c,m=0;l&&(m-=(this.previewEl.clientHeight-f)/2);var v=Math.max(0,u+f*(g+r)+m);this.updateVirtualDisplay(v);for(var y=null,b=function(e){return Mb(e,n.previewEl).top},w=0,k=0,C=p.el.findAll("li");k<C.length;k++){var E=C[k];if(this.belongsToMe(E)){var x=parseInt(E.getAttribute("data-line"));if(!(x<0||isNaN(x))&&E.isShown()){if(!(x<=g)){var S=x-w;if(S>0){var M=y?b(y):p.el.offsetTop;f=(b(E)-M)/S}break}w=x,y=E,f=0}}}if(y){0===f&&(f=(p.el.offsetTop+p.height-b(y))/(p.lines-w));var T=b(y)-p.el.offsetTop;v=Math.max(0,u+T+f*(g-w+r)+m),this.previewEl.scrollTop=v}return s&&this.highlightEl(y||p.el),!0}c+=p.lines,p.shown&&(u+=p.height)}return!0},e.prototype.getSectionTop=function(e){for(var t=this.sections,n=0,i=0;i<t.length;i++){var r=t[i];if(r===e)return n;var o=r.height;!r.computed&&0===o&&i>0&&(o=n/i),r.shown||(o=0),n+=o}return-1},e.prototype.showSection=function(e){if(!e.shown){var t=this.sections,n=t.indexOf(e);if(-1!==n){for(var i=e.level;n>=0;){var r=t[n];r.headingCollapsed&&r.level<i&&(r.setCollapsed(!1),i=r.level),n--}this.updateShownSections(),this.updateVirtualDisplay()}}},e.prototype.applyScrollSection=function(e){var t=this.previewEl,n=this.getSectionTop(e);if(-1!==n)return this.scrolling=!0,t.scrollTop=n,!0},e.prototype.applyScrollDelayed=function(e,t,n){var i=this;this.applyScroll(e,t)?n&&n():this.onRendered((function(){i.applyScroll(e,t),n&&n()}))},e.prototype.highlightEl=function(e){for(var t=0,n=this.sections;t<n.length;t++)for(var i=0,r=n[t].el.findAllSelf(".is-flashing");i<r.length;i++){r[i].removeClass("is-flashing")}e.addClass("is-flashing"),setTimeout((function(){e.removeClass("is-flashing")}),3e3)},e.prototype.getSectionContainer=function(e){for(var t=null,n=0,i=this.sections;n<i.length;n++){var r=i[n];if(r.el.contains(e)){t=r;break}}return t},e.prototype.selectRange=function(e){var t=this.sizerEl,n=this.previewEl,i=e.section,r=e.start,o=e.end;this.showSection(i);var a=this.getSectionTop(i);t.contains(i.el)||(n.scrollTop=a,this.updateVirtualDisplay());var s=Lb(i.el,r,o);if(s){var l=function(e){for(;e;){if(e.instanceOf(HTMLElement))return e;e=e.parentNode}return null}(s.startContainer);if(l){var c=n.scrollTop+40,u=c+n.clientHeight-40;(l.offsetTop<c||l.offsetTop+l.offsetHeight>u)&&l.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})}this.updateVirtualDisplay()}},e.prototype.addHeader=function(){this.header||(this.header=new SA(null),this.header.el.addClass("mod-header"),this.sections.unshift(this.header),this.queueRender())},e.prototype.removeHeader=function(){this.header&&(this.sections.remove(this.header),this.header=null,this.queueRender())},e.prototype.addFooter=function(){this.footer||(this.footer=new SA(null),this.footer.el.addClass("mod-footer"),this.sections.push(this.footer),this.queueRender())},e.prototype.removeFooter=function(){this.footer&&(this.sections.remove(this.footer),this.footer=null,this.queueRender())},e.prototype.updateHeader=function(){var e=this.header;e&&(e.resetCompute(),this.queueRender())},e.prototype.updateFooter=function(){var e=this.footer;e&&(e.resetCompute(),this.queueRender())},e.prototype.cleanupParentComponents=function(){for(var e=[],t=0,n=this.owner._children;t<n.length;t++){(o=n[t])instanceof xA&&(this.belongsToMe(o.containerEl)||e.push(o))}for(var i=0,r=e;i<r.length;i++){var o=r[i];this.owner.removeChild(o)}},e.registerPostProcessor=function(e,t){e.sortOrder=t;var n=this.postProcessors;n.push(e),n.sort((function(e,t){return(e.sortOrder||0)-(t.sortOrder||0)}))},e.unregisterPostProcessor=function(e){this.postProcessors.remove(e)},e.registerRecycler=function(e){this.recyclers.push(e)},e.unregisterRecycler=function(e){this.recyclers.remove(e)},e.registerCodeBlockPostProcessor=function(e,t){var n=this.codeBlockPostProcessors;if(n.hasOwnProperty(e))throw new Error("Code block postprocessor for language ".concat(e," is already registered"));n[e]=t},e.unregisterCodeBlockPostProcessor=function(e){delete this.codeBlockPostProcessors[e]},e.createCodeBlockPostProcessor=function(e,t){return function(n,i){var r=n.findAll("code.language-"+e);if(0!==r.length)for(var o=0,a=r;o<a.length;o++){var s=a[o],l=BA(s),c=s.parentElement,u=createDiv("block-language-"+e);c.replaceWith(u);var h=t(l,u,i);h&&i.promises.push(h)}}},e.registerDomEvents=function(t,n,i){function r(n){var r=n.getAttr("data-href")||n.getAttr("href");return r&&e.belongsToMe(n,t,i)?r:null}function o(e,t){if(0===e.button||1===e.button){var i=r(t);i&&n.onInternalLinkClick(e,t,i)}}function a(e,t){!e.defaultPrevented&&Lt.isMobile&&t.instanceOf(HTMLImageElement)&&function(e){var t=e.cloneNode(),n=document.body.createDiv("mobile-image-viewer");n.appendChild(t);var i=t.width,r=t.height,o=t.naturalWidth,a=t.naturalHeight,s=5,l=0,c=0,u=1,h=function(){var e=(u-1)/u/2,n=Math.max(0,i*e),o=Math.max(0,r*e);l=Math.clamp(l,-n,n),c=Math.clamp(c,-o,o),u=Math.clamp(u,1,s),t.style.transform="scale(".concat(u,") translate(").concat(l,"px, ").concat(c,"px)")},p=0,d=0,f=0,g=0,m=function(){cancelAnimationFrame(g);var e=Date.now(),t=e-f;l+=Math.cos(d)*p*t,c+=Math.sin(d)*p*t,h(),(p-=Math.min(.003*t,p))>.01&&(f=e,g=requestAnimationFrame(m))};t.addEventListener("load",(function(){i=t.width,r=t.height,o=t.naturalWidth,a=t.naturalHeight,(s=2*Math.max(o/i,a/r))<1&&(s=1),h()}));var v=null,y=null,b=function(e){cancelAnimationFrame(g);for(var t=Date.now(),n=t-f,i=Array.prototype.slice.call(e.touches),r=null,o=null,a=0,s=i;a<s.length;a++){var b=s[a];v&&b.identifier===v.identifier&&(r=b),y&&b.identifier===y.identifier&&(o=b)}if(o&&!r&&(v=y,r=o,y=null,o=null),r?i.remove(r):i.length>0&&(r=i.first(),i.splice(0,1)),o?i.remove(o):i.length>0&&(o=i.first(),i.splice(0,1)),v&&r&&v.identifier===r.identifier){var w=window.innerWidth/2,k=window.innerHeight/2;if(y&&o&&y.identifier===o.identifier){var C=-l+((v.clientX+y.clientX)/2-w)/u,E=-c+((v.clientY+y.clientY)/2-k)/u,x=(r.clientX+o.clientX)/2,S=(r.clientY+o.clientY)/2,M=v.clientX-y.clientX,T=v.clientY-y.clientY,D=r.clientX-o.clientX,A=r.clientY-o.clientY,L=M*M+T*T,P=D*D+A*A;if(0!==L&&0!==P){var I=Math.sqrt(P/L),O=u*I;l=(x-w)/O-C,c=(S-k)/O-E,u=O,h()}}else{var F=(r.clientX-v.clientX)/u,B=(r.clientY-v.clientY)/u;l+=F,c+=B,p=Math.sqrt(F*F+B*B)/n,d=Math.atan2(B,F),h()}}y=o,(v=r)||y||(g=requestAnimationFrame(m)),f=t};n.addEventListener("touchstart",b),n.addEventListener("touchend",b),n.addEventListener("touchmove",b),n.addEventListener("touchcancel",b),n.addEventListener("click",(function(e){n.remove(),e.preventDefault(),cancelAnimationFrame(g)}))}(t)}t.on("click","a.internal-link",o),t.on("auxclick","a.internal-link",o),t.on("dragstart","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkDrag(e,t,i)})),t.on("contextmenu","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkRightClick(e,t,i)})),t.on("mouseover","a.internal-link",(function(e,t){var i=r(t);i&&n.onInternalLinkMouseover(e,t,i)})),t.on("click","a.external-link",(function(r,o){if(0===r.button||1===r.button){var a=o.getAttr("href");a&&e.belongsToMe(o,t,i)&&n.onExternalLinkClick(r,o,a)}})),t.on("contextmenu","a.external-link",(function(e,t){var i=t.getAttr("href");i&&n.onExternalLinkRightClick(e,t,i)})),t.on("click","a.tag",(function(r,o){if(0===r.button&&e.belongsToMe(o,t,i)){r.preventDefault();var a=o.getText();n.onTagClick(r,o,a)}})),t.on("click","img",a),t.on("contextmenu","img",a)},e.belongsToMe=function(e,t,n){for(;e;){if(e===t)return!0;if(e.classList.contains("markdown-preview-view"))return!1;var i=e.parentElement;if(!i)return!!n&&n(e);e=i}return!1},e.postProcessors=[],e.codeBlockPostProcessors={},e.recyclers=[],e}();LA.registerPostProcessor((function(e,t){var n=e.find(".frontmatter");null==n||n.hide()})),LA.registerPostProcessor((function(e,t){for(var n=0,i=e.findAll("[data-footnote-id]");n<i.length;n++){var r=i[n],o=r.getAttr("data-footnote-id");r.setAttr("data-footnote-id",o+"-"+t.docId),r.id=o+"-"+t.docId}for(var a=0,s=e.findAll("a.footnote-link");a<s.length;a++){var l=s[a],c=l.getAttr("href");l.setAttr("href",c+"-"+t.docId)}}));var PA=function(e,t){return v(void 0,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O;return y(this,(function(y){switch(y.label){case 0:n=BA(t),i=t.parentElement,r=t.doc,0===(o=i.clientWidth)&&(o=e.clientWidth),0===o&&(o=e.win.innerWidth),a="m"+$e(16),s=r.body.createDiv("mermaid"),y.label=1;case 1:return y.trys.push([1,3,,4]),s.style.width=o+"px",s.style.visibility="hidden",s.style.position="absolute",[4,mermaid.render(a,n,s)];case 2:if(l=y.sent().svg,s.detach(),(c=createDiv("mermaid")).innerHTML=l,i.replaceWith(c),FA.set(c,n),(u=c).instanceOf(Element)){for(h=u.findAll('[*|class*="internal-link"] > g.label foreignObject > div'),p=0,d=h;p<d.length;p++)f=d[p],(g=f.textContent)&&(f.empty(),f.createEl("a",{cls:"internal-link",href:g,text:g}));for(m=[u];m.length>0;)v=m.pop(),m.push.apply(m,Array.from(v.childNodes)),v.instanceOf(SVGAElement)&&v.href&&!v.href.baseVal&&(v.href.baseVal=v.getAttr("href"));if(b=u.find("style")){for(w=b.innerHTML,k=w,C=0,E=u.findAll("marker");C<E.length;C++)if(x=E[C],S=x.id){for(M=a+"-"+S,x.id=M,T=0,D=["marker-start","marker-end"];T<D.length;T++)for(A=D[T],L=0,P=u.findAll("[".concat(A,'="url(#').concat(S,')"]'));L<P.length;L++)(O=P[L]).setAttr(A,"url(#".concat(M,")"));w=w.replace(new RegExp("#".concat(Ye(S),"(?!\\w|-)"),"g"),"#"+M)}w!==k&&(b.innerHTML=w)}}return[3,4];case 3:return I=y.sent(),(O=r.getElementById("d"+a))&&O.detach(),s.detach(),console.error(I),t.empty(),t.appendText("Error parsing Mermaid diagram!\n\n".concat(I.str||I.message)),[3,4];case 4:return[2]}}))}))};function IA(e,t){var n=this;return JD.then((function(){return v(n,void 0,void 0,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:for(n=[],i=function(t){t.isShown()||e.isShown()?n.push(PA(e,t)):t.onNodeInserted((function(){return PA(e,t)}),!0)},r=0,o=t;r<o.length;r++)a=o[r],i(a);return n.length>0?[4,Promise.all(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))}))}LA.registerPostProcessor((function(e,t){var n=e.findAll("code.language-mermaid");if(0!==n.length)return IA(t.containerEl,n)}));var OA=function(e,t){for(var n=0,i=e;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".mermaid");r<o.length;r++){var a=o[r];if(t===BA(a))return a}return null};LA.registerRecycler((function(e,t){for(var n=0,i=e.findAll("code.language-mermaid");n<i.length;n++){var r=i[n],o=BA(r),a=OA(t,o);a&&(a.detach(),r.parentElement.replaceWith(a))}}));var FA=wA();function BA(e){if(FA.has(e))return FA.get(e);var t=Ge(e.innerHTML);return FA.set(e,t),t}LA.registerPostProcessor((function(e){var t=e.findAll('code[class*="language-"]:not(.is-loaded)');if(0!==t.length)return tA.then((function(){for(var e=0,n=t;e<n.length;e++){var i=n[e];BA(i),Prism.highlightElement(i),i.addClass("is-loaded")}}))}),100);var NA=function(e){return e.className.split(" ").filter((function(e){return e.startsWith("language-")})).first()},RA=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll('code[class*="language-"].is-loaded');o<a.length;o++){var s=a[o];if(n===FA.get(s)&&t===NA(s))return s}return null};LA.registerRecycler((function(e,t){for(var n=0,i=e.findAll('code[class*="language-"]:not(.is-loaded)');n<i.length;n++){var r=i[n],o=BA(r),a=NA(r),s=RA(t,a,o);s&&(s.detach(),r.replaceWith(s))}}));var HA=wA();LA.registerPostProcessor((function(e){var t=e.findAll(".math:not(.is-loaded)");if(0!==t.length)return iA.then((function(){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=Ge(i.innerHTML);i.empty();try{var o=oA(r,i.classList.contains("math-block"));i.appendChild(o)}catch(e){i.appendText(r)}i.addClass("is-loaded"),HA.set(i,r)}return uA()}))}));var VA=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll(".math.is-loaded");o<a.length;o++){var s=a[o];if(t===HA.get(s)&&s.classList.contains("math-block")===n)return s}return null};function zA(e,t,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];if(e.getAttr(o)!==t.getAttr(o))return!1}return!0}LA.registerRecycler((function(e,t){for(var n=0,i=e.findAll(".math:not(.is-loaded)");n<i.length;n++){var r=i[n],o=Ge(r.innerHTML),a=VA(t,o,r.classList.contains("math-block"));a&&(a.detach(),r.replaceWith(a))}}));var qA=function(e,t){for(var n=0,i=e;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".internal-embed.is-loaded");r<o.length;r++){var a=o[r];if(zA(t,a,["src","width","height","alt"]))return a}return null};LA.registerRecycler((function(e,t){for(var n=0,i=e.findAll(".internal-embed:not(.is-loaded)");n<i.length;n++){var r=i[n],o=qA(t,r);o&&(o.detach(),r.replaceWith(o))}})),LA.registerPostProcessor((function(e){var t=e.findAll("img");if(0!==t.length){for(var n=[],i=function(e){var t=dA(e.src);if(t){var i=fA(t);return e.replaceWith(i),"continue"}e.referrerPolicy="no-referrer",e.complete||n.push(new Promise((function(t){e.addEventListener("load",t),e.addEventListener("error",t)})))},r=0,o=t;r<o.length;r++){i(o[r])}return Promise.all(n)}}));var UA=function(e,t,n){for(var i=0,r=e;i<r.length;i++)for(var o=0,a=r[i].el.findAll("img");o<a.length;o++){var s=a[o];if(s.instanceOf(HTMLImageElement)&&(s.complete&&t===s.src))return s.setAttr("width",n.getAttr("width")),s.setAttr("height",n.getAttr("height")),s.setAttr("alt",n.getAttr("alt")),s}return null};function WA(e,t){if(t.startsWith("'")&&t.endsWith("'"))t=t.substring(1,t.length-1).replace(/\\'/g,"'");else if(t.startsWith('"'))try{var n=JSON.parse(t);String.isString(n)&&(t=n)}catch(e){}if(t.startsWith("<svg")){var i=hM(t).firstChild;i&&i.instanceOf(SVGSVGElement)&&(i.setAttrs({width:16,height:16,fill:"currentColor",stroke:"currentColor"}),e.empty(),e.appendChild(i))}else gb(e,t)}LA.registerRecycler((function(e,t){for(var n=0,i=e.findAll("img");n<i.length;n++){var r=i[n];if(r.instanceOf(HTMLImageElement)){var o=r.src,a=UA(t,o,r);a&&(a.detach(),r.replaceWith(a))}}})),LA.registerPostProcessor((function(e,t){for(var n=function(e){!function(e){var t=e.getAttr("data-callout-fold");if("+"===t||"-"===t){e.addClass("is-collapsible");var n=e.find(".callout-title"),i=e.find(".callout-content");if(n&&i&&!n.find(".callout-fold")){var r=!1,o=function(){return a(!r,!0)},a=function(t,n){r=t,e.toggleClass("is-collapsed",r),s.toggleClass("is-collapsed",r),Be(i,r,n)},s=n.createDiv("callout-fold");s.addEventListener("click",(function(e){0===e.button&&(e.preventDefault(),o())})),gb(s,"lucide-chevron-down"),n.addEventListener("click",(function(e){setTimeout((function(){0!==e.button||e.defaultPrevented||(e.preventDefault(),o())}),0)})),"-"===t&&a(!0,!1)}}}(e);var t=e.find(".callout-icon");if(!t||t.firstChild)return"continue";var n=e.getAttr("data-callout-icon");if(n||(n=e.getCssPropertyValue("--callout-icon")),n)return WA(t,n),"continue";var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttrs({width:16,height:16}),t.appendChild(i),e.isShown()||e.onNodeInserted((function(){var n=e.getCssPropertyValue("--callout-icon");n&&WA(t,n)}),!0)},i=0,r=e.findAll(".callout");i<r.length;i++){n(r[i])}})),LA.registerPostProcessor((function(e,t){for(var n=0,i=e.findAll("table");n<i.length;n++){var r=i[n],o=r.parentNode;o&&o.instanceOf(HTMLElement)&&r===o.firstChild&&r===o.lastChild&&(o.style.overflowX="auto")}}));var _A=function(e,t){return e[0]-t[0]};function jA(e){if(0===e.length)return e;e.sort(_A);for(var t=[e[0]],n=1;n<e.length;n++){var i=t.last();i[1]<e[n][0]?t.push(e[n]):i[1]<e[n][1]&&(i[1]=e[n][1])}return t}var GA=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/,KA=/\s/,YA=/[\u0F00-\u0FFF\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/;function XA(e){for(var t=e.toLowerCase(),n=[],i=0,r=0;r<t.length;r++){var o=t.charAt(r);KA.test(o)?(i!==r&&n.push(t.substring(i,r)),i=r+1):(GA.test(o)||YA.test(o))&&(i!==r&&n.push(t.substring(i,r)),n.push(o),i=r+1)}return i!==t.length&&n.push(t.substring(i,t.length)),{query:e,tokens:n,fuzzy:t.split("")}}function $A(e){var t=XA(e);return function(e){return JA(t,e)}}function ZA(e,t,n,i){if(0===e.length)return 0;var r=0;r-=Math.max(0,e.length-1),r-=i/10;var o=e[0][0];return r-=(e[e.length-1][1]-o+1-t)/100,r-=o/1e3,r-=n/1e4}function QA(e,t,n,i){if(0===e.length)return null;for(var r=n.toLowerCase(),o=0,a=0,s=[],l=0;l<e.length;l++){var c=e[l],u=r.indexOf(c,a);if(-1===u)return null;var h=n.charAt(u);if(u>0&&!GA.test(h)&&!YA.test(h)){var p=n.charAt(u-1);if(h.toLowerCase()!==h&&p.toLowerCase()!==p||h.toUpperCase()!==h&&!GA.test(p)&&!KA.test(p)&&!YA.test(p))if(i){if(u!==a){a+=c.length,l--;continue}}else o+=1}if(0===s.length)s.push([u,u+c.length]);else{var d=s[s.length-1];d[1]<u?s.push([u,u+c.length]):d[1]=u+c.length}a=u+c.length}return{matches:s,score:ZA(s,t.length,r.length,o)}}function JA(e,t){if(""===e.query)return{score:0,matches:[]};var n=QA(e.tokens,e.query,t,!1);return n||QA(e.fuzzy,e.query,t,!0)}function eL(e){e.sort((function(e,t){return t.match.score-e.match.score}))}function tL(e,t){if(e)for(var n=0,i=e;n<i.length;n++){var r=i[n];r[0]+=t,r[1]+=t}}function nL(e,t){for(var n=t.toLowerCase(),i=[],r=0,o=e;r<o.length;r++){var a=o[r];if(a){for(var s=!1,l=-1,c=a.length;-1!==(l=n.indexOf(a,l));)s=!0,i.push([l,l+c]),l+=c+1;if(!s)return null}}return jA(i)}function iL(e){var t=e.toLowerCase().split(" ");return function(n){return function(e,t,n){var i=nL(e,n);return i?{score:ZA(i,t.length,n.length,0),matches:i}:null}(t,e,n)}}function rL(e,t,n,i){void 0===i&&(i=0),oL(e,t,n?n.matches:null,i)}function oL(e,t,n,i){void 0===i&&(i=0),e.appendChild(function(e,t,n){void 0===n&&(n=0);if(!t||0===t.length)return document.createTextNode(e);for(var i=document.createDocumentFragment(),r=0,o=0;r<e.length&&o<t.length;o++){var a=t[o],s=a[0]+n,l=a[1]+n;if(!(l<=0)){if(s>=e.length)break;s<0&&(s=0),s!==r&&i.appendText(e.substring(r,s)),i.createSpan({cls:"suggestion-highlight",text:e.substring(s,l)}),r=l}}r<e.length&&i.appendText(e.substring(r));return i}(t,n,i))}var aL=/A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/,sL=aL.source+/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,lL=new RegExp("[".concat(sL,"]")),cL=function(e){if(0===e.length)return"";var t=e.charAt(0),n=e.charAt(e.length-1),i=lL.test(t),r=lL.test(n);return(i?"(?:^|[^".concat(sL,"])"):"")+"(".concat(Ye(e),")")+(r?"(?![".concat(sL,"])"):"()")},uL=function(){},hL=function(){function e(e,t,n,i){this.cache=null,this.data=null,this.strings=e,this.original=t,this.keys=n,this.caseSensitive=i}return e.prototype.clone=function(){var t=new e(Object.assign({},this.strings),this.original,this.keys.slice(),this.caseSensitive);return t.cache=this.cache,this.data&&(t.data=new Map(this.data)),t},e.prototype.cloneForContent=function(e){var t=this.clone();return t.keys=["content"],t.strings.content=e,t},e.prototype.setData=function(e,t){this.data||(this.data=new Map),this.data.set(e,t)},e.prototype.getData=function(e){return this.data?this.data.get(e):null},e.prototype.deleteData=function(e){this.data&&(this.data.delete(e),0===this.data.size&&(this.data=null))},e}(),pL=["filename","filepath","content","tag"];function dL(e){for(var t=0,n=0,i=pL;n<i.length;n++){var r=i[n];e[r]&&(t+=e[r].length)}return e.properties&&(t+=e.properties.length),t}function fL(e){var t=dL(e);return e&&0===t&&(t=1),t}function gL(e,t){for(var n,i,r=0,o=pL;r<o.length;r++){var a=o[r];t[a]&&(e[a]=t[a].concat(null!==(n=e[a])&&void 0!==n?n:[]))}t.properties&&(e.properties=t.properties.concat(null!==(i=e.properties)&&void 0!==i?i:[]))}var mL=function(){function e(){this.matchedTokens=[]}return e.prototype.eatToken=function(e){var t=e.pos,n=e.tokens;this.matchedTokens.push(n[t]),e.pos++},e.prototype.getContext=function(e){for(var t=0,n=this.matchedTokens;t<n.length;t++){var i=n[t];if(e>=i.pos&&e<=BL(i))return{matcherStack:[this],token:i}}return null},e}(),vL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t={},n=0,i=e.keys;n<i.length;n++){var r=i[n],o=e.strings[r];o&&(t[r]=[[0,o.length]])}return t},t.prototype.getInfo=function(){return""},t.prototype.requiredInputs=function(){return{content:!0}},t}(mL),yL={},bL={},wL=rt((function(){yL={},bL={}}),6e4,!0);function kL(e,t,n){var i=null,r=e.caseSensitive?yL:bL;r.hasOwnProperty(t)&&(i=r[t]),i||(i=r[t]=new RegExp(t,e.caseSensitive?"gm":"gmi"));for(var o=!1,a={},s=0,l=e.keys;s<l.length;s++){var c=l[s],u=e.strings[c];if(u){var h=[];for(i.lastIndex=0;;){var p=i.exec(u);if(!p)break;var d=p[0].length;if(0!==d){if(n){if(!p[1]||0===p[1].length){i.lastIndex++;continue}d=p[1].length}var f=i.lastIndex,g=f-d;h.push([g,f])}else i.lastIndex++}h.length>0&&(a[c]=h,o=!0)}}return o?a:null}var CL=function(e){function t(t){var n=e.call(this)||this;return n.regex=t,n}return f(t,e),t.prototype.match=function(e){if(""!==this.regex)return kL(e,this.regex,!1)},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchRegex()+"/".concat(this.regex,"/")},t.prototype.requiredInputs=function(){return{content:!0}},t}(mL),EL=function(e){function t(t,n){var i=e.call(this)||this;return i.key=t,i.value=n,i}return f(t,e),t.prototype.match=function(e){var t;if(e.strings.hasOwnProperty("content")){var n=null===(t=e.cache)||void 0===t?void 0:t.frontmatter;if(!n)return null;var i=[];for(var r in n)if(n.hasOwnProperty(r)){var o=e.clone();o.keys=["content"],o.strings.content=r,this.key.match(o)&&i.push(r)}for(var a=[],s=0,l=i;s<l.length;s++){var c=l[s];if(null!==this.value){var u=n[c];if(String.isString(u)){var h=e.cloneForContent(u);if((v=this.value.match(h))&&v.content)for(var p=0,d=v.content;p<d.length;p++){var f=d[p];a.push({key:c,pos:f})}}else if(it(u,!0))for(var g=0;g<u.length;g++){var m=u[g];if(String.isString(m)){var v;h=e.cloneForContent(m);if((v=this.value.match(h))&&v.content)for(var y=0,b=v.content;y<b.length;y++){f=b[y];a.push({key:c,subkey:[g],pos:f})}}}}else a.push({key:c})}return a.length>0?{properties:a}:null}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchProperty()},t.prototype.requiredInputs=function(){return{}},t.prototype.getContext=function(t){var n,i=this.key.getContext(t)||(null===(n=this.value)||void 0===n?void 0:n.getContext(t));return i?(i.matcherStack.push(this),i):e.prototype.getContext.call(this,t)},t}(mL),xL=function(e){function t(t){var n=e.call(this)||this;return n.text=t,n.regex=cL(t),n}return f(t,e),t.prototype.match=function(e){if(""!==this.text)return kL(e,this.regex,!0)},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchExactText()+'"'.concat(this.text,'"')},t.prototype.requiredInputs=function(){return{content:!0}},t}(mL),SL=function(e){function t(t){var n=e.call(this,Ye(t))||this;return n.text=t,n}return f(t,e),t.prototype.setText=function(e){this.text=e,this.regex=Ye(e)},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchText()+'"'.concat(this.text,'"')},t.prototype.match=function(t){return""===this.text?null:e.prototype.match.call(this,t)},t}(CL),ML=function(e){function t(t){var n=e.call(this)||this;return n.matchers=[],n.matchers=t,n}return f(t,e),t.prototype.requiredInputs=function(){for(var e={},t=0,n=this.matchers;t<n.length;t++){var i=n[t];Object.assign(e,i.requiredInputs())}return e},t.prototype.getContext=function(t){for(var n=0,i=this.matchers;n<i.length;n++){var r=i[n].getContext(t);if(r)return r.matcherStack.push(this),r}var o=e.prototype.getContext.call(this,t);return o&&o.matcherStack.push(this),o},t}(mL),TL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(e);if(null===r)return null;t?r&&gL(t,r):t=r}return t},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchAll()},t}(ML),DL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){for(var t=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(e);t||void 0===r?r&&gL(t,r):t=r}return t},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchAny()},t}(ML),AL=function(e){function t(t){var n=e.call(this)||this;return n.matcher=t,n}return f(t,e),t.prototype.requiredInputs=function(){return this.matcher.requiredInputs()},t.prototype.getContext=function(t){var n=this.matcher.getContext(t);return n?(n.matcherStack.push(this),n):e.prototype.getContext.call(this,t)},t}(mL),LL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){var t=this.matcher.match(e);if(void 0!==t)return t?null:{}},t.prototype.getInfo=function(){return rf.plugins.search.labelExcluding()},t}(AL);function PL(e,t){return IL({tokens:e,pos:0,operatorStack:[],operators:t})}function IL(e){for(var t=[],n=[];e.pos<e.tokens.length;){var i=OL(e);if(i&&(t.push(i),e.pos<e.tokens.length)){var r=e.tokens[e.pos];if("or"===r.type){n.push(r),e.pos++;continue}}break}if(0===t.length)return null;if(1===t.length)return t[0];var o=new DL(t);return o.matchedTokens=n,o}function OL(e){for(var t=[];e.pos<e.tokens.length;){var n=FL(e);if(!n)break;t.push(n)}return 0===t.length?null:1===t.length?t[0]:new TL(t)}function FL(e){var t=e.tokens[e.pos];if(!t)return null;var n=t.type,i=t.content;if("text"===n&&e.pos<e.tokens.length-1&&"colon"===e.tokens[e.pos+1].type&&!e.operatorStack.contains("[")){var r=t,o=i,a=e.operators[o];if(!a)throw new Error('Operator "'.concat(o,'" not recognized'));if(a.exclusive)for(var s=0,l=e.operatorStack;s<l.length;s++){var c=l[s],u=e.operators[c];if(u.exclusive&&(!u.allowSelf||c!==o))throw new Error('Operator "'.concat(o,'" cannot be nested within "').concat(c,'"'))}e.operatorStack.push(o),e.pos++;var h=e.tokens[e.pos];e.pos++;var p=FL(e);return e.operatorStack.pop(),p||(p=new SL("")),(d=a.operate(p)).matchedTokens.push(r),d.matchedTokens.push(h),d}if("bracket"===n&&"["===i){if(e.operatorStack.contains("["))throw new Error("Property cannot be nested within a property.");return e.operatorStack.push(i),e.pos++,(d=function(e){var t=IL(e);t||(t=new SL(""));var n=null,i=[];if(NL(e,"colon")){var r=e.tokens[e.pos];e.operatorStack.push(r.content),i.push(r),e.pos++,n=IL(e),e.operatorStack.pop()}var o=new EL(t,n);return o.matchedTokens=i,o}(e)).matchedTokens.push(t),e.operatorStack.pop(),NL(e,"bracket")&&d.eatToken(e),d}if("bracket"===n&&"]"===i)return null;if("text"===n)return(d=new SL(i)).eatToken(e),d;if("quote"===n)return(d=new xL(i)).eatToken(e),d;if("regex"===n){try{new RegExp(i)}catch(e){throw console.error(e),new Error("Failed to parse regular expression. ".concat(e.message))}var d;return(d=new CL(i)).eatToken(e),d}if("parenthesis"===n&&"("===i)return e.pos++,(d=function(e){var t=IL(e);if(e.pos<e.tokens.length){var n=e.tokens[e.pos],i=n.type,r=n.content;"parenthesis"===i&&")"===r&&(t&&t.matchedTokens.push(n),e.pos++)}return t}(e))||(d=new SL("")),d.matchedTokens.push(t),d;if("parenthesis"===n&&")"===i)return null;if("or"===n)return null;if("colon"===n)return null;if("not"===n)return e.pos++,(p=FL(e))?((d=new LL(p)).matchedTokens.push(t),d):null;throw new Error("Failed to parse, error at ".concat(t.pos,' "').concat(i,'"'))}function BL(e){var t=e.pos+e.content.length;return"quote"===e.type||"regex"===e.type?t+2:t}function NL(e,t){if(e.pos<e.tokens.length&&e.tokens[e.pos].type===t)return!0;return!1}function RL(e){for(var t=0,n=e.length,i=[],r=function(e,t){"OR"===e?i.push({type:"or",content:e,pos:t}):i.push({type:"text",content:e,pos:t})};t<n;){var o=e.charAt(t);if('"'!==o)if("/"!==o)if("-"!==o)for(var a=t,s="";t<=n;){if(t===n){s&&r(s,a);break}h=e.charAt(t);if(t++,"["===h||"]"===h){s&&r(s,a),i.push({type:"bracket",content:h,pos:t-1});break}if("("===h||")"===h){s&&r(s,a),i.push({type:"parenthesis",content:h,pos:t-1});break}if(":"===h){s&&r(s,a),i.push({type:"colon",content:h,pos:t-1});break}if(" "===h){s&&(r(s,a),a+=s.length);break}s+=h}else{var l=t;t++,i.push({type:"not",content:o,pos:l})}else{var c=t;t++;for(var u="";t<=n;){if(t===n){i.push({type:"regex",content:u,pos:c});break}var h=e.charAt(t);if(t++,"\\"===h&&t<e.length){var p=e.charAt(t);if("/"===p){u+=p,t++;continue}if("\\"===p){u+="\\\\",t++;continue}}if("/"===h){i.push({type:"regex",content:u,pos:c});break}u+=h}}else{var d=t;t++;for(var f="";t<=n;){if(t===n){i.push({type:"quote",content:f,pos:d});break}var h=e.charAt(t);if(t++,"\\"===h&&t<n)f+=e.charAt(t),t++;else{if('"'===h){i.push({type:"quote",content:f,pos:d});break}f+=h}}}}return i}var HL=function(e){function t(t,n){var i=e.call(this,t)||this;return i.caseSensitive=n,i}return f(t,e),t.prototype.match=function(e){var t=e.clone();return t.caseSensitive=this.caseSensitive,this.matcher.match(t)},t.prototype.getInfo=function(){return this.caseSensitive?rf.plugins.search.labelCaseSensitive():rf.plugins.search.labelCaseInsensitive()},t}(AL),VL="filepath",zL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty(VL)){var t=e.clone();return t.keys=[VL],this.matcher.match(t)}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchFilePath()},t.prototype.requiredInputs=function(){return{}},t}(AL),qL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("filename")){var t=e.clone();return t.keys=["filename"],this.matcher.match(t)}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchFileName()},t.prototype.requiredInputs=function(){return{}},t}(AL),UL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.clone();return t.keys=["content"],this.matcher.match(t)}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchContent()},t.prototype.requiredInputs=function(){return{content:!0}},t}(AL),WL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.splitContentMatch=function(e,t){var n=this,i=e.clone();i.keys=["content"];var r=!1,o=!1,a=[];return t(i,(function(e,t){i.strings.content=e;var s=n.matcher.match(i);if(void 0===s)o=!0;else if(s){r=!0;var l=s.content;if(l){tL(l,t);for(var c=0,u=l;c<u.length;c++){var h=u[c];a.push(h)}}}})),r?{content:a}:o?void 0:null},t}(AL),_L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.strings.content;return this.splitContentMatch(e,(function(e,n){for(var i=0,r=0,o=t.split("\n");r<o.length;r++){var a=o[r];n(a,i),i=i+a.length+1}}))}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchLine()},t.prototype.requiredInputs=function(){return{content:!0}},t}(WL),jL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.strings.content;return this.splitContentMatch(e,(function(e,i){if(t.sections)for(var r=0,o=t.sections;r<o.length;r++){var a=o[r];if("list"!==a.type){var s=(h=a.position).start.offset,l=h.end.offset;i(n.substring(s,l),s)}}if(t.listItems)for(var c=0,u=t.listItems;c<u.length;c++){var h;s=(h=u[c].position).start.offset,l=h.end.offset;i(n.substring(s,l),s)}}))}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchBlock()},t.prototype.requiredInputs=function(){return{content:!0}},t}(WL),GL=new uL;var KL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.getData(GL),i=t.headings;if(!i){if(n)return null;e.setData(GL,{sections:null,index:0});var r=this.matcher.match(e);return e.deleteData(GL),r}var o,a,s,l=e.original,c=0;if(n){o=n.sections;var u=n.index,h=o[u];if(0===h.children)return null;c=h.start,a=n.index+1,s=Math.min(o.length,a+h.children)}else o=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=e[i+1],a=r.position.start.offset;0===i&&a>0&&n.push({start:0,end:a,children:0});for(var s=o?o.position.start.offset:t,l=0,c=i+1;c<e.length&&e[c].level>r.level;c++)l++;n.push({start:a,end:s,children:l})}return n}(i,l.length),a=0,s=o.length;return this.splitContentMatch(e,(function(e,t){for(var n=a;n<s;n++){var i=o[n],r=i.start,u=i.end;u<=r||(e.setData(GL,{sections:o,index:n}),t(l.substring(r,u),r-c))}}))}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchSection()},t.prototype.requiredInputs=function(){return{content:!0}},t}(WL),YL=function(e){function t(t,n){var i=this;return t instanceof xL&&""===t.text&&(t=new vL),(i=e.call(this,t)||this).completed=n,i}return f(t,e),t.prototype.match=function(e){if(e.strings.hasOwnProperty("content")){var t=e.cache;if(!t)return null;var n=e.strings.content,i=this.completed;return this.splitContentMatch(e,(function(e,r){if(t.listItems)for(var o=0,a=t.listItems;o<a.length;o++){var s=a[o];if(void 0!==s.task&&("boolean"!=typeof i||i===(" "!==s.task))){var l=s.position,c=l.start.offset,u=l.end.offset;r(n.substring(c,u),c)}}}))}},t.prototype.getInfo=function(){var e=this.completed;return!0===e?rf.plugins.search.labelMatchTaskDone():!1===e?rf.plugins.search.labelMatchTaskTodo():rf.plugins.search.labelMatchTask()},t.prototype.requiredInputs=function(){return{content:!0}},t}(WL),XL=function(e){function t(t){var n=e.call(this)||this;return"#"!==t.text.charAt(0)&&t.setText("#"+t.text),n.matcher=t,n}return f(t,e),t.prototype.match=function(e){var t=new RegExp("^"+this.matcher.regex+"($|\\/)","gmi");if(e.strings.hasOwnProperty("tag")&&t.test(e.strings.tag))return{};if(e.strings.hasOwnProperty("content")){var n=e.cache;if(!n)return null;var i=[],r=!1,o=gx(n.frontmatter);if(o)for(var a=0,s=o;a<s.length;a++){var l=s[a];t.lastIndex=0,t.test(l)&&(r=!0)}var c=n.tags;if(c)for(var u=0,h=c;u<h.length;u++){l=h[u];t.lastIndex=0,t.test(l.tag)&&(i.push([l.position.start.offset,l.position.end.offset]),r=!0)}return r?{content:i}:null}},t.prototype.getInfo=function(){return rf.plugins.search.labelMatchTag()+this.matcher.text},t.prototype.requiredInputs=function(){return{content:!0}},t.prototype.getContext=function(t){var n=this.matcher.getContext(t);return n?(n.matcherStack.push(this),n):e.prototype.getContext.call(this,t)},t}(mL),$L={"match-case":{operate:function(e){return new HL(e,!0)}},"ignore-case":{operate:function(e){return new HL(e,!1)}},path:{exclusive:!0,operate:function(e){return new zL(e)}},file:{exclusive:!0,operate:function(e){return new qL(e)}},content:{exclusive:!0,operate:function(e){return new UL(e)}},line:{exclusive:!0,operate:function(e){return new _L(e)}},block:{exclusive:!0,operate:function(e){return new jL(e)}},section:{exclusive:!0,allowSelf:!0,operate:function(e){return new KL(e)}},task:{exclusive:!0,operate:function(e){return new YL(e,void 0)}},"task-todo":{exclusive:!0,operate:function(e){return new YL(e,!1)}},"task-done":{exclusive:!0,operate:function(e){return new YL(e,!0)}},tag:{exclusive:!0,operate:function(e){if(!(e instanceof SL))throw new Error('Operator "tag" can only be followed by text');return new XL(e)}}},ZL=function(){function e(e,t,n,i){this.app=e,i=i||$L,this.query=t,this.caseSensitive=n;var r=RL(t),o=this.matcher=PL(r,i);this.requiredInputs=o&&o.requiredInputs()}return e.prototype.match=function(e,t){var n=this.app;if("canvas"===e.extension&&n.internalPlugins.getEnabledPluginById("canvas")){var i=void 0;try{i=JSON.parse(t)}catch(e){}if(i&&Array.isArray(i.nodes)){for(var r=!1,o={},a=i.nodes.filter((function(e){return"text"===e.type})),s=n.internalPlugins.getEnabledPluginById("canvas").index.get(e),l=0,c=a;l<c.length;l++){var u=c[l],h=u.id,p=u.text,d=new hL({filename:e.name,filepath:e.path,content:p},p,["content"],this.caseSensitive);d.cache=null==s?void 0:s.caches[h];var f=this._match(d);if(null!==f)if(r=!0,f)o["canvas-".concat(h)]=f.content}var g=this._match(new hL({content:"",filename:e.name,filepath:e.path},"",["content","filename"],this.caseSensitive));if(null!==g&&(r=!0,g&&(o.filename=g.filename)),r)return o}}var m={filename:e.name,filepath:e.path,content:t},v="md"===e.extension?["filename","content"]:[],y=new hL(m,t,v,this.caseSensitive);return"md"===e.extension&&(y.cache=n.metadataCache.getFileCache(e)),this._match(y)},e.prototype.matchTag=function(e){var t={tag:e};return this._match(new hL(t,e,["tag"],this.caseSensitive))},e.prototype.matchFilepath=function(e){var t={filename:ie(e),filepath:e};return this._match(new hL(t,e,["filename"],this.caseSensitive))},e.prototype._match=function(e){wL();var t=this.matcher.match(e);if(t)for(var n=0,i=pL;n<i.length;n++){var r=i[n];t.hasOwnProperty(r)&&(t[r]=jA(t[r]))}return void 0===t&&(t={}),t},e}();function QL(e,t,n,i,r){var o,a;return v(this,void 0,Promise,(function(){var s,l,c,u,h,p,d,f;return y(this,(function(g){switch(g.label){case 0:s=WD(n.generator(),r),g.label=1;case 1:g.trys.push([1,11,12,17]),l=E(s),g.label=2;case 2:return[4,l.next()];case 3:if((c=g.sent()).done)return[3,10];if(u=c.value,e.metadataCache.isUserIgnored(u.path))return[3,9];if(!e.metadataCache.isSupportedFile(u))return[3,9];if(h="md"===u.extension||"canvas"===u.extension,p="",!h||!t.content)return[3,7];g.label=4;case 4:return g.trys.push([4,6,,7]),[4,e.vault.cachedRead(u)];case 5:return p=g.sent(),[3,7];case 6:return d=g.sent(),console.error(d),[3,7];case 7:return n.runnable.isCancelled()?[2]:[4,i(u,p)];case 8:g.sent(),g.label=9;case 9:return[3,2];case 10:return[3,17];case 11:return f=g.sent(),o={error:f},[3,17];case 12:return g.trys.push([12,,15,16]),c&&!c.done&&(a=l.return)?[4,a.call(l)]:[3,14];case 13:g.sent(),g.label=14;case 14:return[3,16];case 15:if(o)throw o.error;return[7];case 16:return[7];case 17:return[2]}}))}))}var JL=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare,eP=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"]],tP={alphabetical:rf.plugins.fileExplorer.labelSortAToZ,alphabeticalReverse:rf.plugins.fileExplorer.labelSortZToA,byModifiedTime:rf.plugins.fileExplorer.labelSortNewToOld,byModifiedTimeReverse:rf.plugins.fileExplorer.labelSortOldToNew,byCreatedTime:rf.plugins.fileExplorer.labelSortCreatedNewToOld,byCreatedTimeReverse:rf.plugins.fileExplorer.labelSortCreatedOldToNew},nP={alphabetical:function(e,t){return JL(e.basename,t.basename)},alphabeticalReverse:function(e,t){return-nP.alphabetical(e,t)},byModifiedTime:function(e,t){return t.stat.mtime-e.stat.mtime},byModifiedTimeReverse:function(e,t){return-nP.byModifiedTime(e,t)},byCreatedTime:function(e,t){return t.stat.ctime-e.stat.ctime},byCreatedTimeReverse:function(e,t){return-nP.byCreatedTime(e,t)}};function iP(e){return nP.hasOwnProperty(e)||(e="alphabetical"),nP[e]}var rP=function(){function e(e){this._children=[],this.owner=e}return e.prototype.addChild=function(e){this._children.push(e),e.parent=this.owner},e.prototype.setChildren=function(e){this.clear();for(var t=0,n=e;t<n.length;t++){var i=n[t];this.addChild(i)}},e.prototype.removeChild=function(e){this._children.remove(e),e.parent=void 0},e.prototype.hasChildren=function(){return this._children.length>0},e.prototype.first=function(){return this._children.first()},e.prototype.last=function(){return this._children.last()},e.prototype.size=function(){return this._children.length},e.prototype.sort=function(e){return this._children.sort(e)},Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._children=[]},e}();function oP(e){return"vChildren"in e&&"childrenEl"in e}function aP(e){for(var t=[],n=e;n.parent;)t.push(n.parent.vChildren.children.indexOf(n)),n=n.parent;return t.reverse()}function sP(e,t,n){if(e){for(var i=0,r=e.vChildren.children;i<r.length;i++){var o=r[i];!t(o)&&oP(o)&&(n&&o.collapsed||sP(o,t,n))}return!1}}function lP(e,t){var n;e=(n=function(e,t){for(var n=aP(e),i=aP(t),r=0;r<n.length;r++){var o=n[r],a=i[r];if(void 0===a)return[t,e];if(o!==a)return o<=a?[e,t]:[t,e]}return[e,t]}(e,t))[0];for(var i=[t=n[1]],r=e;r&&r!==t;)i.push(r),r=cP(r,!1);return i}function cP(e,t){for(;e;){if(!oP(e)||t&&e.collapsed||!e.vChildren.hasChildren())for(var n=!1;e&&e.parent&&!n;){var i=e.parent.vChildren.children,r=i.indexOf(e),o=i[r+1];o?(e=o,n=!0):e=e.parent}else e=e.vChildren.children[0];if(e&&!e.info.hidden)return e.parent?e:null}return null}function uP(e,t){for(;e;){if(!e||!e.parent)return null;var n=e.parent.vChildren.children,i=n.indexOf(e);if(0===i)e=e.parent;else e=hP(n[i-1],t);if(e&&!e.info.hidden)return e}return null}function hP(e,t){if(!e)return null;var n=e;if(oP(n))for(var i=t&&n.collapsed;!i&&oP(n)&&n.vChildren.hasChildren();)n=n.vChildren.last();for(;n.info.hidden;)n=uP(n,!0);return function(e){for(var t,n=e;null===(t=n.parent)||void 0===t?void 0:t.collapsed;)n=n.parent;return n}(n)}function pP(){var e=createDiv();return e.style.width="1px",e.style.height="0.1px",e.style.marginBottom="0",e}var dP=function(e,t){if(t(e),oP(e)){var n=e.vChildren;if(e.childrenEl.parentNode)for(var i=0,r=n.children;i<r.length;i++){var o=r[i];dP(o,t)}}},fP=function(){function e(e){var t=this;this.renderBlockSize=50,this.width=0,this.height=0,this.lastScroll=0,this.queued=null,this.scrollEl=e;var n=getComputedStyle(e).overflowX;this.setWidth="auto"===n||"scroll"===n,e.style.position="relative",e.addEventListener("scroll",this.onScroll.bind(this),Cb),e.onNodeInserted((function(){return t.queueCompute()}))}return e.prototype.invalidate=function(e,t){t?dP(e,(function(e){return e.info.computed=!1})):e.info.computed=!1,this.queueCompute()},e.prototype.invalidateAll=function(){this.rootEl&&(dP(this.rootEl,(function(e){return e.info.computed=!1})),this.queueCompute())},e.prototype.onScroll=function(){var e=this,t=e.scrollEl,n=e.lastScroll,i=e.height,r=t.scrollTop;Math.abs(n-r)>Math.max(i,300)/2&&this.updateVirtualDisplay(r)},e.prototype.onResize=function(){var e=this.scrollEl;if(null!==e.offsetParent){this.height=e.clientHeight;var t=e.clientWidth;t!==this.width?(this.width=t,this.invalidateAll()):this.updateVirtualDisplay()}},e.prototype.queueCompute=function(){var e=this;this.queued||(this.queued=dt((function(){return e.compute()}),50))},e.prototype.compute=function(e){this.queued&&(this.queued.cancel(),this.queued=null);var t=this.scrollEl,n=this.rootEl;if(n){var i=t.scrollTop;if(null!==t.offsetParent){var r={num:0,limit:e?9999:this.renderBlockSize,finished:!0};this._precompute(n),this._layout(n,r),this._measure(n);var o=r.finished;if(o&&oP(n))for(var a=0,s=n.vChildren.children;a<s.length;a++){if(!s[a].info.computed){o=!1;break}}n.info.computed=o,this.updateVirtualDisplay(i),o||this.queueCompute()}}},e.prototype._precompute=function(e){if(oP(e)){var t=e.vChildren,n=e.childrenEl;if(t.hasChildren()&&n.parentNode)for(var i=t.last(),r=0,o=t.children;r<o.length;r++){var a=o[r];this._precompute(a)||(e.info.computed=!1);var s=a!==i;a.info.next!==s&&(a.info.next=s,a.info.computed=!1,e.info.computed=!1)}}return e.info.queued=!1,e.info.computed},e.prototype._layout=function(e,t){var n=e.info;if(n.computed)return!1;if(t.num>=t.limit)return t.finished=!1,!1;var i=!0,r=!1;if(oP(e)){var o=e.vChildren,a=e.childrenEl,s=e.pusherEl;if(a.parentNode){s.style.marginBottom="0";for(var l=[s],c=0,u=!0,h=0,p=o.children;h<p.length;h++){var d=p[h],f=this._layout(d,t);f&&(r=!0),d.info.computed?(dP(d,(function(e){return c+=e.info.height})),(f||u||d.el.parentNode===a)&&(l.push(d.el),u=!1)):(i=!1,f||t.finished?(l.push(d.el),u=!0):u&&(u=!1,l.push(d.el)))}a.setChildrenInPlace(l),a.style.minHeight=c+"px"}}return i&&(n.queued=!0,e.coverEl&&(e.coverEl.style.marginLeft="",e.coverEl.style.paddingLeft=""),t.num++),i||r},e.prototype._measure=function(e){if(!e.info.computed&&oP(e)){var t=e.vChildren;if(e.childrenEl.parentNode)for(var n=0,i=t.children;n<i.length;n++){var r=i[n];this._measure(r),r.info.queued&&(this.measure(e,r),r.info.computed=!0)}}},e.prototype.measure=function(e,t){var n=t.el,i=t.info;if(n.offsetParent){i.hidden=!1;var r=t===e.vChildren.children[0],o=n.nextSibling,a=r?e.childrenEl.offsetTop:n.offsetTop,s=o?o.offsetTop:n.offsetTop+n.offsetHeight,l=0;oP(t)&&(l=t.childrenEl.innerHeight),i.height=s-a-l,0===i.height&&0===l&&(i.hidden=!0),this.setWidth&&(i.width=Math.max(n.scrollWidth,n.offsetWidth)),oP(t)&&(i.childTop=t.childrenEl.offsetTop-a),t.coverEl&&(i.childLeft=Mb(t.el,this.scrollEl).left,i.childLeftPadding=parseInt(getComputedStyle(t.coverEl).paddingLeft))}else i.hidden=!0},e.prototype.updateVirtualDisplay=function(e){var t=this.scrollEl,n=this.rootEl,i=t.scrollTop;"number"==typeof e&&(i=e),this.lastScroll=i;var r=t.clientHeight,o=i+r,a=Math.min(i,t.scrollTop),s=Math.max(r,300),l=a-s,c=o+s,u=parseInt(getComputedStyle(t).paddingLeft),h=0,p=0;dP(n,(function(e){var t=e.info.height;t>0&&(h+=t,p++)})),h/=p,this.update(n,this.getRootTop(),l,c,u,h),t.scrollTop!==i&&(t.scrollTop=i)},e.prototype.update=function(e,t,n,i,r,o){var a=e.info,s=e.coverEl;if(s&&0!==a.childLeft){var l=a.childLeft-r;s.style.setProperty("margin-left",-l+"px","important"),s.style.setProperty("padding-left",l+a.childLeftPadding+"px","important")}if(oP(e)){var c=e.vChildren,u=e.childrenEl,h=e.pusherEl;if(u.parentNode){if(a.hidden)return;var p=this.setWidth,d=0,f=0,g=[h],m=!1,v=0;t+=a.height;for(var y=function(e){var a=0;dP(e,(function(e){return a+=e.info.hidden?0:e.info.height||o})),f+=a;var s=t+a;p&&(v=Math.max(v,e.info.width)),m=!1,s<n?d+=a:t>i||(g.push(e.el),b.update(e,t,n,i,r,o),m=!0),t=s},b=this,w=0,k=c.children;w<k.length;w++){y(x=k[w])}u.setChildrenInPlace(g),0===c.children.length&&u.empty(),h.style.marginBottom=d+"px",p&&(v=Math.max(1,v),h.style.width=v+"px"),u.style.minHeight=m?"":f+"px"}else{g=[];for(var C=0,E=c.children;C<E.length;C++){var x=E[C];g.push(x.el)}u.setChildrenInPlace(g),u.style.minHeight=""}}},e.prototype.scrollIntoView=function(e,t){void 0===t&&(t=0),this.compute(!0);for(var n=0;n<9&&!this.rootEl.info.computed;n++)this.compute(!0);var i=this.findElementTop(e,this.rootEl,this.getRootTop());if(null!==i){var r=i+e.info.height,o=this.scrollEl,a=o.scrollTop,s=a+o.clientHeight;r+=t,(i-=t)<a?o.scrollTop=i:r>s&&(o.scrollTop=r-o.clientHeight),this.updateVirtualDisplay()}},e.prototype.findElementTop=function(e,t,n){if(e===t)return n;if(oP(t)){var i=t.vChildren,r=t.childrenEl,o=t.info;if(r.parentNode){n+=o.childTop;for(var a=function(t){var i=s.findElementTop(e,t,n);if(null!==i)return{value:i};var r=0;dP(t,(function(e){return r+=e.info.hidden?0:e.info.height})),n+=r},s=this,l=0,c=i.children;l<c.length;l++){var u=a(c[l]);if("object"==typeof u)return u.value}}}return null},e.prototype.getRootTop=function(){for(var e=this.scrollEl,t=this.rootEl.childrenEl,n=0;t&&t!==e;)n+=t.offsetTop,t=t.offsetParent;return n},e}(),gP=/\r?\n\r?\n/y;function mP(e,t,n,i,r){!function(e,t,n,i){for(var r=e,o=0;o<n.length;o++){var a=n[o],s=a[0];if(s>=t)break;var l=a[1];l<e||(s<e&&(s=e),l>t&&(l=t),s>r&&i(!1,r,s),i(!0,s,l),r=l)}r<t&&i(!1,r,t)}(n,i,r,(function(n,i,r){var o=t.substring(i,r);n?e.createSpan({cls:"search-result-file-matched-text",text:o}):e.createSpan({text:o})}))}var vP=function(){function e(e,t,n,i,r,o){void 0===o&&(o=!0);var a=this;this.onMatchRender=null,this.collapsible=!0,this.collapsed=!1,this.extraContext=!0,this.showTitle=!0,this.separateMatches=!1,this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.vChildren=new rP(this),this.pusherEl=pP(),this.app=e,this.parentDom=t,this.file=n,this.result=i,this.content=r,this.showTitle=o;var s=this.el=this.containerEl=createDiv("tree-item search-result");if(o){var l=s.createDiv("tree-item-self search-result-file-title is-clickable"),c=this.collapseEl=l.createDiv("tree-item-icon collapse-icon");gb(c,"right-triangle"),c.style.visibility="hidden",gt(l),l.onClickEvent(this.onResultClick.bind(this)),l.addEventListener("mouseover",(function(e){return a.onResultMouseover(e,l)})),l.addEventListener("contextmenu",this.onResultContextMenu.bind(this)),c.addEventListener("click",this.onCollapseClick.bind(this));var u=l.createDiv("tree-item-inner");if(i.filename||i.filepath){var h=void 0,p=void 0;if(i.filepath){if(h=n.path,p=i.filepath,i.filename){for(var d=n.path.length-n.name.length,f=0,m=i.filename;f<m.length;f++){var v=m[f];p.push([v[0]+d,v[1]+d])}p=jA(p)}}else h=n.name,p=i.filename,"md"===n.extension&&(0===p.length||p.last()[1]<=n.basename.length)&&(h=n.basename);mP(u,h,0,h.length,p)}else u.setText("md"===n.extension?n.basename:n.name);var y=dL(g(g({},i),{filename:void 0}));y>0&&l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair").setText(String(y))}this.childrenEl=s.createDiv("search-result-file-matches");var b=this.app.dragManager;b.handleDrag(s,(function(e){return b.dragFile(e,a.file)}))}return e.prototype.renderContentMatches=function(){var e=this,t=this,n=t.app,i=t.file,r=t.result,o=t.content,a=t.collapsible,s=t.extraContext,l=t.separateMatches,c=t.collapseEl;this.vChildren.clear(),this.showTitle&&(c.style.visibility="hidden");var u=!1,h=function(t,n,i,r){u=!0;var o=0,a=function(a,s,c,u){var h=o+1;if(!l)for(;h<t.length;){var p=t[h];if(p[0]>=s)break;if(p[1]>s){s=p[1],h++;break}h++}var d=t.slice(o,h),f=new bP(e,n,i,a,s,d,r);f.onMatchRender=e.onMatchRender,f.render(c,u),e.vChildren.addChild(f),o=h};if(s)for(;o<t.length;){h=t[o];var c=e.getMatchExtraPositions(n,h,i);a(c[0],c[1])}else for(;o<t.length;){var h=t[o],p=e.getMatchMinimalPositions(n,h);a(p[0],p[1],p[2],p[3])}};if("canvas"===i.extension&&o)try{for(var p=JSON.parse(o).nodes.filter((function(e){return"text"===e.type})).sort((function(e,t){return e.y-t.y||e.x-t.x})),d=n.internalPlugins.getEnabledPluginById("canvas").index.get(i),f=function(e){var t=e.id,n="canvas-".concat(t);if(r.hasOwnProperty(n)){var i=r[n];i&&i.length>0&&h(i,e.text,d.caches[t]||{},(function(e){e.match.nodeId=t}))}},g=0,m=p;g<m.length;g++){f(m[g])}}catch(e){}else{var v=this.app.metadataCache.getFileCache(i)||{};r.properties&&r.properties.length>0&&function(t,n,i){u=!0;for(var r=function(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];t.hasOwnProperty(r.key)||(t[r.key]=[]),t[r.key].push(r)}return t}(t),o=0,a=Object.keys(r);o<a.length;o++){var s=r[a[o]],l=new yP(e,i,s);l.onMatchRender=e.onMatchRender,l.render(),e.vChildren.addChild(l)}}(r.properties,0,v),r.content&&r.content.length>0&&h(r.content,o,v)}this.showTitle&&a&&u&&(c.style.visibility=""),this.invalidate()},e.prototype.getMatchMinimalPositions=function(e,t){for(var n=100,i=t[0]-1,r=0;r<n&&i>=0;){if("\n"===e.charAt(i))break;i--,r++}i++;for(var o=r===n,a=t[1],s=0;s<n&&a<e.length;){if("\n"===e.charAt(a))break;a++,s++}return[i,a,o,s===n]},e.prototype.getMatchExtraPositions=function(e,t,n){var i=n.listItems,r=n.sections;if(i){var o=i[u=Ox(i,t[0])];if(o&&t[0]>=o.position.start.offset&&t[1]<=o.position.end.offset){var a=o,s=u+1,l=new Set;for(l.add(a.position.start.line);s<i.length;){var c=i[s];if(!l.has(c.parent))break;l.add(c.position.start.line),s++,a=c}return[o.position.start.offset-o.position.start.col,a.position.end.offset]}}if(r){var u,h=r[u=Ox(r,t[0])];if(h&&t[0]>=h.position.start.offset&&t[1]<=h.position.end.offset)return[h.position.start.offset,h.position.end.offset]}for(var p=t[0],d=p-1e3;p>0&&p>d&&10!==e.charCodeAt(p-1);)p--;for(var f=t[0],g=f+1e3;f<e.length&&f<g&&10!==e.charCodeAt(f);)f++;var m=e.substring(p,f).match(Sf);if(m&&m[2]){for(var v=f;v<e.length;){var y=e.indexOf("\n",v+1);-1===y&&(y=e.length);var b=e.substring(v+1,y).match(Sf);if(b&&b[1].length<=m[1].length)break;v=y}return[p,v]}for(var w=p;w>0&&w>d&&(gP.lastIndex=w,!gP.test(e));)w--;for(;10===e.charCodeAt(w)&&w<p;)w++;for(var k=f;k<e.length&&k<g&&(gP.lastIndex=k,!gP.test(e));)k++;return[w,k]},e.prototype.onCollapseClick=function(e){e.preventDefault(),hw.isModifier(e,"Mod")?this.parentDom.setCollapseAll(!this.collapsed):this.setCollapse(!this.collapsed,!0)},e.prototype.onResultClick=function(e){e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||(e.defaultPrevented||(e.preventDefault(),this.app.workspace.getLeaf(hw.isModEvent(e)).openFile(this.file,{eState:{match:{content:this.content,matches:this.result.content||[]}}})))},e.prototype.onResultMouseover=function(e,t,n){if(!e.defaultPrevented&&ft(e,t)){e.preventDefault();var i=this.file.path,r=null;if(n&&n.length>0)r={scroll:Ze(this.content,n[0][0])};this.app.workspace.trigger("hover-link",{event:e,source:"search",hoverParent:this.parentDom,targetEl:t,linktext:i,state:r})}},e.prototype.onResultContextMenu=function(e){var t=(new fw).addSections(["title","open","action","view","info","","danger"]);this.app.workspace.handleLinkContextMenu(t,this.file.path,"")&&(e.preventDefault(),t.showAtMouseEvent(e))},e.prototype.setCollapse=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return this.collapsed===e?[2]:(this.collapsed=e,i=(n=this).containerEl,r=n.childrenEl,XM(i,e),[4,Ne(r,i,e,t)]);case 1:return o.sent(),this.invalidate(),[2]}}))}))},e.prototype.setCollapsible=function(e){this.collapsible!==e&&(this.collapsible=e,this.collapseEl.style.visibility=e?"":"hidden")},e.prototype.setExtraContext=function(e){this.extraContext!==e&&(this.extraContext=e,this.renderContentMatches())},e.prototype.invalidate=function(){this.parentDom.infinityScroll.invalidate(this,!0)},e}(),yP=function(){function e(e,t,n){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.onMatchRender=null,this.parentDom=e,this.cache=t,this.matches=n;var i=this.el=createDiv("search-result-file-match");gt(i),i.onClickEvent(this.onResultClick.bind(this)),i.addEventListener("mouseover",this.onFocusEnter.bind(this)),i.addEventListener("mouseout",this.onFocusExit.bind(this)),i.addEventListener("contextmenu",(function(t){return e.onResultContextMenu(t)}))}return e.prototype.onResultClick=function(e){if(!(e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||e.defaultPrevented)){e.preventDefault();var t=this.parentDom,n=t.app,i=t.file;n.workspace.getLeaf(hw.isModEvent(e)).openFile(i,{eState:{}})}},e.prototype.onFocusExit=function(e){e&&e.instanceOf(MouseEvent)&&!ft(e,this.el)||this.el.classList.contains("has-focus")},e.prototype.onFocusEnter=function(e){!e||!e.instanceOf(MouseEvent)||ft(e,this.el)},e.prototype.render=function(){var e,t=this,n=t.el,i=t.parentDom,r=t.matches;n.empty();var o=r[0].key;n.createSpan({text:o+": "});var a=(null!==(e=this.cache.frontmatter)&&void 0!==e?e:{})[o];if(Array.isArray(a))for(var s=function(e){var t=a[e];if(!t)return"continue";var i=String(t),o=jA(r.filter((function(t){var n;return t.pos&&(null===(n=t.subkey)||void 0===n?void 0:n[0])===e})).map((function(e){return e.pos})));mP(n,i,0,i.length,o),n.createSpan({text:" "})},l=0;l<a.length;l++)s(l);else if(String.isString(a)){var c=jA(r.map((function(e){return e.pos})).filter(Boolean));mP(n,a,0,a.length,c)}else{var u=String(a);mP(n,u,0,u.length,[])}i.parentDom.infinityScroll.invalidate(this)},e}(),bP=function(){function e(e,t,n,i,r,o,a){var s=this;this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.onMatchRender=null,this.parentDom=e,this.content=t,this.cache=n,this.start=i,this.end=r,this.matches=o,this.mutateEState=a;var l=this.el=createDiv("search-result-file-match");this.showMoreBeforeEl=l.createDiv("search-result-hover-button mod-top",(function(e){gb(e,"lucide-chevron-up"),aS(e,rf.plugins.search.labelMoreContext(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),s.showMoreBefore()}))})),this.showMoreAfterEl=l.createDiv("search-result-hover-button mod-bottom",(function(e){gb(e,"lucide-chevron-down"),aS(e,rf.plugins.search.labelMoreContext(),{placement:"bottom"}),e.addEventListener("click",(function(e){e.preventDefault(),s.showMoreAfter()}))})),this.toggleShowMoreContextButtons(),gt(l),l.onClickEvent(this.onResultClick.bind(this)),l.addEventListener("mouseover",this.onFocusEnter.bind(this)),l.addEventListener("mouseout",this.onFocusExit.bind(this)),l.addEventListener("contextmenu",(function(t){return e.onResultContextMenu(t)}))}return e.prototype.onResultClick=function(e){var t;if(!(e.instanceOf(MouseEvent)&&0!==e.button&&1!==e.button||e.defaultPrevented)){e.preventDefault();var n={match:{content:this.content,matches:this.matches}};null===(t=this.mutateEState)||void 0===t||t.call(this,n);var i=this.parentDom,r=i.app,o=i.file;r.workspace.getLeaf(hw.isModEvent(e)).openFile(o,{eState:n})}},e.prototype.onFocusExit=function(e){e&&e.instanceOf(MouseEvent)&&!ft(e,this.el)||this.el.classList.contains("has-focus")||(this.showMoreBeforeEl.hide(),this.showMoreAfterEl.hide())},e.prototype.onFocusEnter=function(e){if(e&&e.instanceOf(MouseEvent)){if(!ft(e,this.el))return;this.parentDom.onResultMouseover(e,this.el,this.matches)}this.toggleShowMoreContextButtons()},e.prototype.toggleShowMoreContextButtons=function(){this.showMoreBeforeEl.toggle(this.start>0),this.showMoreAfterEl.toggle(this.end<this.content.length)},e.prototype.showMoreBefore=function(){for(var e=this.start;e>0;){e--;var t=this.getPrevPos(e);if(t<e){e=t;break}}this.start=e,this.render(),this.onFocusEnter()},e.prototype.showMoreAfter=function(){for(var e=this.end,t=this.content.length;e<t;){e++;var n=this.getNextPos(e);if(n>e){e=n;break}}this.end=e,this.render(),this.onFocusEnter()},e.prototype.getPrevPos=function(e){var t=this.content,n=this.cache,i=n.listItems,r=n.sections;if(i){var o=i[Ox(i,e,!0)];if(o){var a=o.position,s=a.start,l=a.end;if(s.offset-s.col<=e&&l.offset>=e)return s.offset-s.col}}if(r){var c=r[Ox(r,e,!0)];if(c&&"list"!==c.type){var u=c.position;s=u.start,l=u.end;if(s.offset-s.col<=e&&l.offset>=e)return s.offset-s.col}}for(var h=e;h>0&&10!==t.charCodeAt(h-1);)h--;return h},e.prototype.getNextPos=function(e){var t=this.content,n=this.cache,i=n.listItems,r=n.sections;if(i){var o=i[d=Ox(i,e,!0)];if(o){var a=o.position,s=a.start,l=a.end;if(s.offset-s.col<=e&&l.offset>=e){var c=o,u=d+1,h=new Set;for(h.add(c.position.start.line);u<i.length;){var p=i[u];if(!h.has(p.parent))break;h.add(p.position.start.line),u++,c=p}return c.position.end.offset}}}if(r){var d,f=r[d=Ox(r,e,!0)];if(f&&"list"!==f.type){var g=f.position;s=g.start,l=g.end;if(s.offset-s.col<=e&&l.offset>=e)return l.offset}}for(var m=e;m<t.length&&10!==t.charCodeAt(m);)m++;return m},e.prototype.render=function(e,t){var n=this,i=n.el,r=n.content,o=n.parentDom,a=n.matches,s=n.onMatchRender;i.empty(),e&&i.appendText("..."),mP(i,r,this.start,this.end,a),i.appendChild(this.showMoreBeforeEl),i.appendChild(this.showMoreAfterEl),t&&i.appendText("..."),s&&s(a[0],i),o.parentDom.infinityScroll.invalidate(this)},e}(),wP=function(){function e(e,t,n,i){this.changed=rt(this.onChange.bind(this),0),this.infinityScroll=null,this.vChildren=new rP(this),this.resultDomLookup=new Map,this.focusedItem=null,this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=pP(),this.emptyStateEl=null,this.showingEmptyState=!1,this.working=!1,this.sortOrder="alphabetical",this.cleared=!1,this.collapseAll=!1,this.extraContext=!1,this.app=e,this.el=t,this.emptyStateEl=createDiv({cls:"search-empty-state",text:n}),this.childrenEl=this.el.createDiv("search-results-children");var r=this.infinityScroll=new fP(i||this.el);r.rootEl=this,r.setWidth=!1}return e.prototype.startLoader=function(){this.working=!0,this.el.addClass("is-loading"),this.onChange()},e.prototype.stopLoader=function(){this.cleared=!1,this.working=!1,this.el.removeClass("is-loading"),this.onChange()},e.prototype.onChange=function(){var e=this,t=e.sortOrder,n=e.vChildren,i=e.emptyStateEl,r=e.infinityScroll,o=iP(t);n.sort((function(e,t){return o(e.file,t.file)})),n.hasChildren()||this.cleared?(i.detach(),r.queueCompute()):this.el.appendChild(i)},e.prototype.emptyResults=function(){this.vChildren.clear(),this.resultDomLookup.clear(),this.cleared=!0,this.changed()},e.prototype.getResult=function(e){return this.resultDomLookup.get(e)},e.prototype.removeResult=function(e){var t=this.vChildren,n=this.resultDomLookup,i=n.get(e);return i&&(t.removeChild(i),n.delete(e),this.changed()),i},e.prototype.addResult=function(e,t,n,i){if(void 0===i&&(i=!0),e){var r=this.vChildren,o=this.resultDomLookup,a=this.removeResult(e),s=new vP(this.app,this,e,t,n,i);return a?s.setCollapse(a.collapsed,!1):s.setCollapse(this.collapseAll,!1),s.extraContext=this.extraContext,r.addChild(s),o.set(e,s),this.changed(),s}},e.prototype.toggle=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,Be(this.el,e,t)];case 1:return n.sent(),e||this.infinityScroll.invalidateAll(),[2]}}))}))},e.prototype.setCollapseAll=function(e){this.collapseAll=e;for(var t=0,n=this.vChildren.children;t<n.length;t++){n[t].setCollapse(e,!1)}this.infinityScroll.invalidateAll()},e.prototype.setExtraContext=function(e){this.extraContext=e;for(var t=0,n=this.vChildren.children;t<n.length;t++){n[t].setExtraContext(e)}this.infinityScroll.invalidateAll()},e.prototype.onResize=function(){this.infinityScroll.onResize()},e.prototype.getFiles=function(){return this.vChildren.children.map((function(e){return e.file}))},e.prototype.getMatchCount=function(){for(var e=0,t=0,n=this.vChildren.children;t<n.length;t++){e+=fL(n[t].result)}return e},e.prototype.setFocusedItem=function(e){var t;null===(t=this.focusedItem)||void 0===t||t.el.removeClass("has-focus"),this.focusedItem instanceof bP&&this.focusedItem.onFocusExit(),this.focusedItem=e,e&&(e.el.addClass("has-focus"),this.infinityScroll.scrollIntoView(e),e instanceof bP&&e.onFocusEnter())},e.prototype.changeFocusedItem=function(e){if(null!==this.focusedItem){var t="forwards"===e?cP(this.focusedItem,!0):uP(this.focusedItem,!0);t&&this.setFocusedItem(t)}else{var n="forwards"===e?this.vChildren.first():hP(this,!0);this.setFocusedItem(n)}},e}(),kP=function(e){function t(t,n){var i=e.call(this)||this;return i.queue=null,i.app=t,i.dom=n,i}return f(t,e),t.prototype.onload=function(){var e=this.app.vault;this.registerEvent(e.on("rename",this.onFileChanged,this)),this.registerEvent(e.on("delete",this.onFileDeleted,this)),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this))},t.prototype.onunload=function(){this.stop()},t.prototype.stop=function(){var e=this.queue;e&&(e.cancel(),this.queue=null)},t.prototype.start=function(){var e=this,t=this.app,n=this.dom,i=this.queue=new qD({onStart:function(){n.startLoader()},onStop:function(){n.stopLoader()},onCancel:function(){e.queue=null}}),r=t.vault.getFiles();return r.sort(iP(n.sortOrder)),i.addList(r),i},t.prototype.onFileChanged=function(e){var t=this.queue;t&&t.add(e)},t.prototype.onFileDeleted=function(e){var t=this.queue;t&&t.remove(e),this.dom.removeResult(e)},t}(nb),CP=function(){function e(e,t,n,i){var r=this;this.scope=null,this.searchContainerEl=null,this.searchInputEl=null,this.lastQuery=null,this.highlightRanges=null,this.selectedRange=-1,this.lastText=null,this.renderer=t,this.onClose=i;var o=this.scope=new cw(e.scope),a=(this.searchContainerEl=n.createDiv({cls:"document-search-container",prepend:!0})).createDiv("document-search"),s=this.searchInputEl=a.createEl("input",{cls:"document-search-input",type:"text",placeholder:rf.editor.search.placeholderFind()}),l=a.createDiv({cls:"document-search-buttons",type:"text"});l.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelPrevious()},(function(e){aS(e,"Shift + F3",{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.findPrevious()}))})),l.createEl("button",{cls:"document-search-button",text:rf.editor.search.labelNext()},(function(e){aS(e,"Enter or F3",{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.findNext()}))})),l.createSpan("document-search-close-button",(function(e){aS(e,rf.editor.search.labelExitSearch(),{placement:"top"}),e.addEventListener("click",(function(e){e.preventDefault(),r.close()}))})),s.addEventListener("input",rt(this.onSearchInput.bind(this),150,!0)),o.register([],"F3",this.findNext.bind(this)),o.register(["Mod"],"G",this.findNext.bind(this)),o.register(["Shift"],"F3",this.findPrevious.bind(this)),o.register(["Mod","Shift"],"G",this.findPrevious.bind(this)),o.register([],"Enter",this.onEnter.bind(this)),o.register(["Shift"],"Enter",this.onShiftEnter.bind(this)),o.register([],"Escape",this.close.bind(this));var c=activeWindow.getSelection().toString();c&&(s.value=c),this.updateQuery()}return e.prototype.close=function(){var e=this.searchContainerEl,t=this.searchInputEl;e.detach(),t.value="",t.removeClass("mod-no-match"),this.updateQuery(),this.onClose()},e.prototype.updateQuery=function(){var e=this.getQuery().toLowerCase(),t=this.renderer,n=this.searchInputEl,i=t.lastText;e||(i=null);var r=this.lastText!==i,o=this.lastQuery!==e;if(r&&(this.lastText=i),o&&(this.lastQuery=e,this.selectedRange=-1),r||o){n.removeClass("mod-no-match");for(var a=0,s=t.sections;a<s.length;a++){(h=s[a]).highlightRanges=null}if(t.queueRender(),e){for(var l=[],c=0,u=t.sections;c<u.length;c++){var h,p=[];Ab((h=u[c]).el,p);for(var d=p.map((function(e){return e.textContent})).join("").toLowerCase(),f=[],g=0;-1!==(g=d.indexOf(e,g));){var m=g+e.length,v={section:h,start:g,end:m,active:!1};f.push(v),l.push(v),g=m}f.length>0&&(h.highlightRanges=f)}this.highlightRanges=l,n.toggleClass("mod-no-match",0===l.length)}else this.highlightRanges=null}},e.prototype.onSearchInput=function(){this.updateQuery(),this.selectRange(0)},e.prototype.findNext=function(){this.selectRange(this.selectedRange+1)},e.prototype.findPrevious=function(){this.selectRange(this.selectedRange-1)},e.prototype.selectRange=function(e){var t=this.highlightRanges;if(t&&0!==t.length){e>t.length-1&&(e=0),e<0&&(e=t.length-1);var n=t[this.selectedRange];n&&(n.active=!1),this.selectedRange=e;var i=t[this.selectedRange];i.active=!0,this.renderer.selectRange(i)}},e.prototype.getQuery=function(){return this.searchInputEl.value},e.prototype.onEnter=function(e){!e.isComposing&&this.searchInputEl.isActiveElement()&&this.findNext()},e.prototype.onShiftEnter=function(e){!e.isComposing&&this.searchInputEl.isActiveElement()&&this.findPrevious()},e}(),EP={},xP=function(){function e(e){this.info=e}return e.prototype.onInternalLinkDrag=function(e,t,n){var i=this.info.app;i.dragManager.onDragStart(e,i.dragManager.dragLink(e,n,this.info.path))},e.prototype.onInternalLinkClick=function(e,t,n){e.preventDefault(),this.info.app.workspace.openLinkText(n,this.info.path,hw.isModEvent(e))},e.prototype.onInternalLinkRightClick=function(e,t,n){var i=(new fw).addSections(["title","open","action","view","info","","danger"]);this.info.app.workspace.handleLinkContextMenu(i,n,this.info.path)&&(e.preventDefault(),i.showAtMouseEvent(e))},e.prototype.onExternalLinkClick=function(e,t,n){e.preventDefault(),window.open(n)},e.prototype.onExternalLinkRightClick=function(e,t,n){var i=(new fw).addSections(["title","open","edit","action","view","info","","danger"]);this.info.app.workspace.handleExternalLinkContextMenu(i,n)&&(e.preventDefault(),i.showAtMouseEvent(e))},e.prototype.onInternalLinkMouseover=function(e,t,n){this.info.app.workspace.trigger("hover-link",{event:e,source:"preview",hoverParent:this.info,targetEl:t,linktext:n,sourcePath:this.info.path})},e.prototype.onTagClick=function(e,t,n){var i=this.info.app.internalPlugins.getPluginById("global-search");i&&i.instance.openGlobalSearch("tag:"+n)},e}(),SP=function(e){function t(t,n,i){void 0===i&&(i=!0);var r=e.call(this,n)||this;r.docId=$e(16),r.hoverPopover=null,r.requestUpdateLinks=rt((function(){for(var e=0,t=r.renderer.sections;e<t.length;e++){var n=t[e];n.rendered&&r.resolveLinks(n.el)}}),500),r.app=t;var o=new xP(r);return r.renderer=new LA(r,o,n,"worker.js",i),r}return f(t,e),t.prototype.onload=function(){var e=this.app;this.registerEvent(e.vault.on("modify",this.onFileChange,this)),this.registerEvent(e.vault.on("delete",this.onFileChange,this)),this.registerEvent(e.metadataCache.on("changed",this.onFileChange,this))},t.prototype.onCheckboxClick=function(e,n,i){e.preventDefault();var r=this.renderer.text,o=t.toggleCheckbox(r,i);if(null!==o){var a=this.renderer.getSectionContainer(n);if(a){var s=" "!==o.char,l=i-a.lineStart;if(l>=0){var c=String(l);a.html=a.html.replace(/<li class="task-list-item( is-checked)?" data-task="(.)" data-line="(\d+)"><input class="task-list-item-checkbox" type="checkbox"( checked)? data-line="(\d+)">/g,(function(e,t,n,i,r,a){return i===c&&a===c?'<li class="task-list-item'.concat(s?" is-checked":"",'" data-task="').concat(o.char,'" data-line="').concat(i,'"><input class="task-list-item-checkbox" type="checkbox"').concat(s?" checked":"",' data-line="').concat(a,'">'):e}))}setTimeout((function(){n.checked=s;var e=n.parentNode;e&&e.instanceOf(HTMLLIElement)&&(e.setAttr("data-task",o.char),e.toggleClass("is-checked",s))}),0)}this.edit(o.text)}},t.toggleCheckbox=function(e,t){for(var n=0,i=0;n<t;){if(-1===(i=e.indexOf("\n",i)+1))return null;n++}var r=e.indexOf("\n",i);-1===r&&(r=e.length);var o=e.slice(i,r).search(/\[.\]/);if(-1===o)return null;var a=i+o+1,s=" "===e.charAt(a)?"x":" ";return{text:e.slice(0,a)+s+e.slice(a+1),char:s}},t.prototype.postProcess=function(e,t,n){var i=this,r=DP.postProcess(this.app,{docId:this.docId,sourcePath:this.path,frontmatter:n,promises:t,addChild:function(e){return i.addChild(e)},getSectionInfo:function(e){return i.renderer.getSectionInfo(e)},containerEl:this.renderer.sizerEl,el:e.el});e.usesFrontMatter=!!r.usesFrontMatter,this.resolveLinks(e.el)},t.prototype.onScroll=function(){},t.prototype.onFoldChange=function(){},t.prototype.onRenderComplete=function(){},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t.prototype.onFileChange=function(e){this.requestUpdateLinks()},t.prototype.resolveLinks=function(e){for(var t=this.app,n=this.renderer,i=0,r=e.findAll("a.internal-link");i<r.length;i++){var o=r[i],a=n.getInternalLinkHref(o);if(a){var s=Fx(a),l=t.metadataCache.getFirstLinkpathDest(s,this.path);o.toggleClass("is-unresolved",!l)}}},t.postProcess=function(e,t){for(var n=t.sourcePath,i=t.promises,r=t.el,o=t.displayMode,a=0,s=r.findAll("code.language-query");a<s.length;a++){var l=s[a],c=BA(l).trim(),u=l.parentElement;t.addChild(MP(e,c,u,n))}for(var h=0,p=LA.postProcessors;h<p.length;h++){var d=(0,p[h])(r,t);d&&d.then&&i.push(d)}var f=eF(t.containerEl),g=r.findAll(".internal-embed:not(.is-loaded)");if(g.length>0)for(var m=0,v=g;m<v.length;m++){var y=v[m],b=y.getAttribute("src"),w=lF.load({app:e,linktext:b,sourcePath:n,containerEl:y,displayMode:o,showInline:!0,depth:f});w&&(t.addChild(w),i.push(w.loadFile()))}return t},t.renderMarkdown=function(e,n,i,r){return t.render(null,e,n,i,r)},t.render=function(e,t,n,i,r){if(!(r&&r instanceof nb)){var o=(new Error).stack;if("string"==typeof o){var a=o.match(/plugin:([^:]+)/);if(a){var s=a[1];EP.hasOwnProperty(s)||(EP[s]=!0,console.error(new Error('Plugin "'.concat(s,'" is not passing Component in renderMarkdown. This is needed to avoid memory leaks when embedded contents register global event handlers.'))))}}}var l=rx(t),c=cx(l),u=hM(ux(l));n.appendChild(u);for(var h=[],p={docId:$e(16),sourcePath:i,frontmatter:c,promises:h,addChild:function(e){return r&&r.addChild(e)},getSectionInfo:function(){return null},containerEl:n,el:n,displayMode:!0},d=0,f=LA.postProcessors;d<f.length;d++){var g=(0,f[d])(n,p);g&&g.then&&h.push(g)}if(e&&r){var m=eF(n),v=n.findAll(".internal-embed:not(.is-loaded)");if(v.length>0)for(var y=0,b=v;y<b.length;y++){var w=b[y],k=w.getAttribute("src"),C=lF.load({app:e,linktext:k,sourcePath:i,containerEl:w,displayMode:!0,showInline:!0,depth:m});C&&(p.addChild(C),h.push(C.loadFile()))}}return h.length>0?Promise.all(h).then():Promise.resolve()},t}(xA);function MP(e,t,n,i){var r=createDiv("internal-query");n.replaceWith(r),r.createDiv("internal-query-header",(function(e){e.createSpan("internal-query-header-icon",(function(e){return gb(e,"lucide-search")})),e.createSpan({cls:"internal-query-header-title",text:t})}));var o=r.createDiv("search-result-container");return new AP(e,o,t,i)}var TP=function(e){function t(t,n,i){var r=e.call(this)||this;return r.hoverPopover=null,r.app=t.app,r.containerEl=t.containerEl,r.containerEl.addClass("markdown-embed"),r.file=n,r.subpath=i,t.showInline&&(r.containerEl.addClass("inline-embed"),r.headerEl=r.containerEl.createDiv({cls:"markdown-embed-title",prepend:!0})),r}return f(t,e),t.prototype.loadFile=function(){var e;return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g=this;return y(this,(function(m){switch(m.label){case 0:return n=(t=this).app,i=t.file,r=t.subpath,o=n.metadataCache.getFileCache(i),a=_x(o,r),[4,n.vault.cachedRead(i)];case 1:return s=m.sent(),a&&(s=jx(s,o,a).content),l=rx(s),c=cx(l),u=ux(l),h=hM(u),r||null===(e=this.headerEl)||void 0===e||e.setText(i.basename),(p=this.containerEl.createDiv("markdown-preview-view markdown-rendered")).toggleClass("rtl",n.vault.getConfig("rightToLeft")),p.toggleClass("show-indentation-guide",n.vault.getConfig("showIndentGuide")),p.appendChild(h),d=new xP(this),LA.registerDomEvents(p,d),f=[],DP.postProcess(this.app,{docId:$e(16),sourcePath:i.path,frontmatter:c,promises:f,addChild:function(e){return g.addChild(e)},getSectionInfo:function(){return null},containerEl:p,el:p,displayMode:!0}),f.length>0?[4,Promise.all(f)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[2]}}))}))},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t}(nb),DP=function(e){function t(t){var n=this,i=t.contentEl.createDiv("markdown-reading-view");i.style.width="100%",i.style.height="100%",(n=e.call(this,t.app,i)||this).search=null,n.type="preview",n.view=t;var r=n.renderer;return r.addBottomPadding=!0,n.updateOptions(),n.onResize(),n.onFoldChange=rt((function(){return n.view.onMarkdownFold()}),500),r.addHeader(),r.addFooter(),n}return f(t,e),Object.defineProperty(t.prototype,"file",{get:function(){return this.view.file},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.renderer.header.el.appendChild(this.view.inlineTitleEl),this.renderer.header.el.appendChild(this.view.metadataEditor.containerEl),this.renderer.footer.el.appendChild(this.view.backlinksEl),this.containerEl.show(),this.search&&(this.view.scope=this.search.scope)},t.prototype.hide=function(){this.containerEl.hide(),this.search&&(this.view.scope=null)},t.prototype.get=function(){return this.renderer.text},t.prototype.set=function(e,t){t&&this.clear(),this.renderer.set(e)},t.prototype.clear=function(){this.renderer.clear()},t.prototype.beforeUnload=function(){},t.prototype.rerender=function(e){this.renderer.rerender(e)},t.prototype.getEphemeralState=function(e){},t.prototype.setEphemeralState=function(e){var t=this;if(e.focusMetadata)this.view.metadataEditor.focusPropertyAtIndex(0);else if(e.focus){var n=this.renderer.previewEl;n.tabIndex=-1,n.focus()}e.hasOwnProperty("scroll")&&this.renderer.applyScrollDelayed(e.scroll);var i=function(){return v(t,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<5?[4,this.view.onMarkdownScroll()]:[3,5];case 2:return t.sent()?[2]:[4,sleep(100*(e+1))];case 3:t.sent(),t.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))};if(void 0!==e.line&&e.line>=0&&this.renderer.applyScrollDelayed(e.line,{highlight:!0},i),void 0!==e.match){var r=e.match,o=r.content,a=r.matches;if(a.length>0){var s=Ze(o,a[0][0]);this.renderer.applyScrollDelayed(s,{center:!0,highlight:!0},i)}}},t.prototype.getScroll=function(){return this.renderer.getScroll()},t.prototype.applyScroll=function(e){this.renderer.applyScroll(e)},t.prototype.getFoldInfo=function(){return this.renderer.getFoldInfo()},t.prototype.applyFoldInfo=function(e){this.renderer.applyFoldInfo(e)},t.prototype.onResize=function(){this.renderer.onResize(),null!==this.view.scroll&&this.renderer.applyScrollDelayed(this.view.scroll)},t.prototype.showSearch=function(){var e=this;if(!this.search){var t=this.search=new CP(this.app,this.renderer,this.containerEl,(function(){e.search=null,e.view.scope=null}));this.view.scope=t.scope}this.search.searchInputEl.focus(),this.search.searchInputEl.select()},t.prototype.updateOptions=function(){var e=this.app,t=this.renderer,n=e.vault,i=t.previewEl,r=n.getConfig("readableLineLength");i.toggleClass("is-readable-line-width",r);var o=n.getConfig("foldHeading");i.toggleClass("allow-fold-headings",o);var a=n.getConfig("foldIndent"),s=n.getConfig("showIndentGuide");i.toggleClass("show-indentation-guide",s),i.toggleClass("allow-fold-lists",a),i.toggleClass("rtl",n.getConfig("rightToLeft")),o||t.unfoldAllHeadings(),a||t.unfoldAllLists(),i.toggleClass("show-properties","hidden"!==n.getConfig("propertiesInDocument"));var l=n.getConfig("tabSize");i.style.tabSize=String(l),ex.globalOptions.breaks=!n.getConfig("strictLineBreaks"),this.rerender()},t.prototype.edit=function(e){var t=this;this.renderer.set(e),this.view.onInternalDataChange(),v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.view.save()];case 1:return e.sent(),[2]}}))}))},t.prototype.onScroll=function(){Date.now()-this.renderer.lastRender<100||this.view.onMarkdownScroll()},t.prototype.onRenderComplete=function(){e.prototype.onRenderComplete.call(this),this.search&&null===this.search.highlightRanges&&this.search.updateQuery()},t.prototype.foldAll=function(){var e=this.app.vault,t=e.getConfig("foldHeading"),n=e.getConfig("foldIndent");t&&this.renderer.foldAllHeadings(),n&&this.renderer.foldAllLists()},t.prototype.unfoldAll=function(){var e=this.app.vault,t=e.getConfig("foldHeading"),n=e.getConfig("foldIndent");t&&this.renderer.unfoldAllHeadings(),n&&this.renderer.unfoldAllLists()},t.prototype.getSelection=function(){return window.getSelection().toString()},t}(SP),AP=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;return o.searchQuery=null,o.app=t,o.query=i,o.sourcePath=r,o.dom=new wP(t,n,rf.plugins.search.labelNoMatches()),o.queue=new kP(t,o.dom),o.addChild(o.queue),o}return f(t,e),t.prototype.onload=function(){var e=this,t=e.app,n=e.dom,i=e.sourcePath;n.emptyResults();try{var r=new ZL(t,this.query.replace(/\r?\n/g," "),!1);if(!r.matcher)return;this.searchQuery=r;var o=this.queue.start();QL(t,r.requiredInputs,o,(function(e,t){e.path===i&&(t=t.replace(/```query([\s\S]*?)(```|$)/g,(function(e){return e.replace(/./g," ")})));var o=r.match(e,t);o?n.addResult(e,o,t).renderContentMatches():n.removeResult(e)}))}catch(e){console.log(e)}},t.prototype.onResize=function(){this.dom.onResize()},t}(xA),LP=new Set(["Alt-ArrowUp","Shift-Alt-ArrowUp","Alt-ArrowDown","Shift-Alt-ArrowDown","Alt-l","Alt-v"]),PP=gv.filter((function(e){return!LP.has(e.key)})),IP=function(e,t){var n=t.text.search(/\S/);return-1===n?-1:Wr(t.text.substr(0,n),e.facet(Sr.tabSize))},OP=yp.of((function(e,t,n){try{var i=e.doc.lineAt(t),r=IP(e,i);if(r<0)return;for(var o=null,a=i.number+1,s=e.doc.lines;a<=s;++a){var l=e.doc.line(a),c=IP(e,l);if(-1==c);else{if(!(c>r))break;o=l}}if(o)return{from:n,to:o.to}}catch(e){console.error(e)}return null})),FP=yp.of((function(e,t,n){var i=Hh(e);function r(e){if(i.length<e.to)return!0;var t=i.resolve(e.from,1).type.prop(Td);return t&&/\bheader\b/.test(t)}function o(t){var n=t&&t.text.match(/^\s*(#{1,6})(\s+|$)/);if(n&&r(t))return n[1].length;if(e.doc.lines<=t.number)return 100;var o=e.doc.line(t.number+1);return(n=o.text.match(/^[=\-]+\s*$/))&&i.length>=o.to&&r(o)?"="==o.text[0]?1:2:100}try{var a=e.doc.lines,s=e.doc.lineAt(t);if(s.number===a)return null;var l=o(s);if(100===l)return null;for(var c=e.doc.line(s.number+1),u=s.to;c&&!(o(c)<=l)&&(u=c.to,c.number!==a);)c=e.doc.line(c.number+1);return u===s.to?null:{from:s.to,to:u}}catch(e){console.error(e)}return null})),BP=yp.of((function(e,t,n){var i=e.doc.lineAt(t);if("---"===i.text){for(var r=i.number-1;r>0;r--)if(e.doc.line(r).text.trim())return;for(var o=e.doc.lines,a=i.number+1;a<=o&&"---"!==e.doc.line(a).text;)a++;if(!(a>o))return{from:t,to:e.doc.line(a).to}}})),NP=function(e){for(var t=e.state,n=[],i=1;i<=t.doc.lines;i++){var r=t.doc.line(i),o=kp(t,r.from,r.to);o&&n.push(Ep.of(o))}for(var a=0;a<t.doc.length;){a=(r=e.lineBlockAt(a)).to+1}return n.length&&e.dispatch({effects:n}),!!n.length};function RP(e,t){var n=-1;return e.changeByRange((function(i){for(var r=[],o=i.from;o<=i.to;){var a=e.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(t(a,r,i),n=a.number),o=a.to+1}var s=e.changes(r);return{changes:r,range:Bi.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}var HP=/^[\s>]+/,VP=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(RP(t,(function(e,n){var i=e.from,r=e.text.match(HP);if(r){var o=r[0].lastIndexOf(">");-1!==o&&(" "===r[0].charAt(o+1)&&o++,i=i+o+1)}n.push({from:i,insert:t.facet(tp)})})),{userEvent:"input.indent"})),!0)},zP=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(RP(t,(function(e,n){var i=e.text.match(HP);if(i){var r=i[0],o=r.indexOf(">");if(o>0)n.push({from:e.from,to:e.from+o,insert:""});else if("> "!==r){var a=r.lastIndexOf(">");-1!==a&&" "===r.charAt(a+1)&&a++;var s=a+1,l=r.substr(s);if(l){for(var c=Wr(l,t.tabSize),u=0,h=ip(t,Math.max(0,c-np(t)));u<l.length&&u<h.length&&l.charCodeAt(u)==h.charCodeAt(u);)u++;n.push({from:e.from+s+u,to:e.from+r.length,insert:h.slice(u)})}}}})),{userEvent:"delete.dedent"})),!0)},qP=dr.define(),UP=function(e){var t=_i.define({create:function(){return e},update:function(e,n){for(var i=0,r=n.effects;i<r.length;i++){var o=r[i];o.is(qP)&&o.value.field===t&&(e=o.value.value)}return e}});return t},WP=UP(null),_P=UP(null),jP=UP(null),GP=UP(!1),KP=jl.mouseSelectionStyle.of((function(e,t){if(3!=t.detail||0!=t.button)return null;var n=e.posAtCoords(t);if(null==n)return null;var i=e.state.selection;return{get:function(t,r,o){var a=e.posAtCoords(t);if(null==a)return i;var s=r?i.main.anchor:n,l=e.state.doc.lineAt(s),c=e.state.doc.lineAt(a),u=a>=s?Bi.range(l.from,c.to):Bi.range(l.to,c.from);return o?i.addRange(u):Bi.create([u])},update:function(e){n=e.changes.mapPos(n),i=i.map(e.changes)}}})),YP=new Qi,XP=function(e){return function(t){for(var n=t.state,i=n.doc,r=n.selection,o=[],a=0,s=r.ranges;a<s.length;a++){var l=s[a],c=l.head,u=l.anchor,h=t.lineBlockAt(c),p=t.moveToLineBoundary(l,!1);p.head==c&&p.head!=h.from&&(p=t.moveToLineBoundary(l,!1,!1));var d=i.sliceString(h.from,h.to),f=Sf.exec(d);if(f&&f[0]&&p.head<=h.from+f[0].length){var g=i.sliceString(h.from,h.to),m=Sf.exec(g),v=m[1],y=void 0===v?"":v,b=m[2],w=void 0===b?"":b,k=h.from+y.length+w.length,C=k<c?k:h.from;p=Bi.cursor(C)}e?o.push(Bi.range(u,p.head,p.goalColumn)):o.push(p)}return t.dispatch({selection:Bi.create(o,r.mainIndex)}),!0}},$P=[];$P.push(jl.exceptionSink.of(console.error)),$P.push(function(e){return void 0===e&&(e={}),[_M.of(e),GM,YM]}()),$P.push(Sr.allowMultipleSelections.of(!0)),$P.push(Kc({eventFilter:function(e){return!(0!==e.button||!e.altKey||!e.shiftKey)||(!Lt.isDesktopApp||!Lt.isLinux)&&1===e.button}})),$P.push(Yf()),$P.push(Sr.phrases.of({"folded code":""})),$P.push(jl.lineWrapping),$P.push(vp()),$P.push(lT),$P.push(yd.define(CodeMirror.getMode({},{name:"hypermd"}))),$P.push(Ld),$P.push($i.lowest(hf)),$P.push(xM),$P.push(GT),$P.push(KP),$P.push(jl.clickAddsSelectionRange.of((function(e){return e.altKey&&!e.ctrlKey&&!e.metaKey}))),$P.push(Pd.of("url inline-code property footref hmd-footnote math link-has-alias formatting-link hmd-codeblock blockid hmd-frontmatter")),$P.push(Jl.of(w(w(w([{key:"Home",run:XP(!1),shift:XP(!0),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:XP(!1),shift:XP(!0),preventDefault:!0}],PP,!0),fg,!0),[{key:"Mod-Shift-z",run:Qf,preventDefault:!0}],!1))),$P.push(ep.of((function(e,t){var n=e.state.doc.lineAt(t).text.match(/^\s*/);return n?e.countColumn(n[0]):null}))),$P.push(jl.domEventHandlers({compositionend:function(e,t){setTimeout((function(){return t.dispatch({})}),100)}}));var ZP=YP.of($P),QP=new Qi,JP=function(e){function t(t){var n=e.call(this)||this;return n.init(t),n}return f(t,e),t.prototype.init=function(e){this.cm=e,this.containerEl=e.dom},t.prototype.refresh=function(){this.cm.requestMeasure()},t.prototype.getValue=function(){return this.cm.state.doc.toString()},t.prototype.setValue=function(e){var t=this.cm;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},t.prototype.getLine=function(e){var t=this.cm.state.doc;return e>=t.lines?"":t.line(e+1).text},t.prototype.lineCount=function(){return this.cm.state.doc.lines},t.prototype.lastLine=function(){return this.cm.state.doc.lines-1},t.prototype.getSelection=function(){var e=this.cm,t=e.state.selection.main;return e.state.doc.sliceString(t.from,t.to)},t.prototype.getRange=function(e,t){var n=this.cm,i=n.state.doc;return n.state.doc.sliceString(df(i,e),df(i,t))},t.prototype.replaceSelection=function(e,t){var n=this.cm,i=n.state.replaceSelection(e);i.userEvent=t,n.dispatch(i)},t.prototype.replaceRange=function(e,t,n,i){var r=this.cm,o=r.state.doc,a=df(o,t),s=n?df(o,n):a;r.dispatch({changes:{from:a,to:s,insert:e},scrollIntoView:!0,userEvent:i})},t.prototype.getCursor=function(e){void 0===e&&(e="head");var t=this.cm,n=t.state.selection.main,i=t.state.doc;switch(e){case"from":return ff(i,n.from);case"to":return ff(i,n.to);case"anchor":return ff(i,n.anchor);case"head":return ff(i,n.head)}return null},t.prototype.listSelections=function(){for(var e=this.cm,t=e.state.selection.ranges,n=e.state.doc,i=[],r=0,o=t;r<o.length;r++){var a=o[r];i.push({anchor:ff(n,a.anchor),head:ff(n,a.head)})}return i},t.prototype.setSelection=function(e,t){var n=this.cm,i=n.state.doc,r=df(i,e),o=t?df(i,t):r;n.dispatch({selection:{anchor:r,head:o},scrollIntoView:!0})},t.prototype.setSelections=function(e,t){var n=this.cm,i=n.state.doc;n.dispatch({selection:Bi.create(e.map((function(e){var t=df(i,e.anchor),n=e.head?df(i,e.head):t;return Bi.range(t,n)}))),scrollIntoView:!0})},t.prototype.exec=function(e){t.commands[e](this.cm)},t.prototype.focus=function(){this.cm.focus()},t.prototype.blur=function(){this.cm.contentDOM.blur()},t.prototype.hasFocus=function(){return this.cm.hasFocus},t.prototype.getScrollInfo=function(){var e=this.cm.scrollDOM;return{top:e.scrollTop,left:e.scrollLeft,clientHeight:e.clientHeight,clientWidth:e.clientWidth,height:e.offsetHeight,width:e.offsetWidth}},t.prototype.scrollTo=function(e,t){var n=this.cm.scrollDOM;null==e&&(e=n.scrollLeft),null==t&&(t=n.scrollTop),n.scroll(e,t)},t.prototype.scrollIntoView=function(e,t){var n=this.cm,i=df(n.state.doc,e.from),r=df(n.state.doc,e.to),o=Bi.range(i,r);n.dispatch({effects:jl.scrollIntoView(o,{y:t?"center":"nearest"})})},t.prototype.transaction=function(e,t){var n=e.replaceSelection,i=e.changes,r=e.selection,o=e.selections,a=this.cm,s=a.state.doc,l={},c=[];if(l.scrollIntoView=!0,String.isString(n)){var u=a.state.replaceSelection(n);c.push(u.changes),l.selection=u.selection,l.effects=u.effects}if(i)for(var h=0,p=i;h<p.length;h++){u=p[h];var d=df(s,u.from),f=u.to?df(s,u.to):d;c.push({from:d,to:f,insert:u.text})}if(c.length>0){var g=Ti.of(c,s.length,a.state.facet(Sr.lineSeparator));l.changes=[g],(o||r)&&(s=g.apply(s))}else l.changes=c;if(o)l.selection=Bi.create(o.map((function(e){var t=df(s,e.from),n=e.to?df(s,e.to):t;return Bi.range(t,n)})));else if(r){d=df(s,r.from),f=r.to?df(s,r.to):d;l.selection={anchor:d,head:f}}l.userEvent=t,this.cm.dispatch(l)},t.prototype.wordAt=function(e){var t=this.cm.state.doc,n=this.cm.state.wordAt(df(t,e));return n?{from:ff(t,n.from),to:ff(t,n.to)}:null},t.prototype.posToOffset=function(e){return df(this.cm.state.doc,e)},t.prototype.offsetToPos=function(e){return ff(this.cm.state.doc,e)},t.prototype.undo=function(){Zf(this.cm)},t.prototype.redo=function(){Qf(this.cm)},t.prototype.coordsAtPos=function(e,t){var n=this.cm,i=n.coordsAtPos(df(n.state.doc,e)),r={top:i.top,left:i.left,bottom:i.bottom,right:i.right};if(t){var o=n.scrollDOM.getBoundingClientRect(),a=o.left,s=o.top;a-=n.scrollDOM.scrollLeft,s-=n.scrollDOM.scrollTop,r.top-=s,r.bottom-=s,r.left-=a,r.right-=a}return r},t.prototype.posAtCoords=function(e,t){var n=this.cm,i=n.posAtCoords({x:e,y:t},!1);return null===i?null:ff(n.state.doc,i)},t.prototype.addHighlights=function(e,t,n,i){var r=this.cm,o=[],a=[],s=uf.get(t);s||(s=ca.mark({class:t}),uf.set(t,s));for(var l=r.state.doc,c=Tp(r.state),u=function(e){var t=df(l,e.from),n=df(l,e.to);if(t>=n)return"continue";a.push(s.range(t,n)),i&&c.between(t,n,(function(e,i){n!==e&&t!==i&&o.push(xp.of({from:e,to:i}))}))},h=0,p=e;h<p.length;h++){u(p[h])}n&&o.push(cf.of((function(e,t,n){return n!==s}))),o.push(lf.of(a)),r.dispatch({effects:o})},t.prototype.removeHighlights=function(e){if(this.cm.dom.isShown()&&this.hasHighlight(e))if(e){var t=uf.get(e);this.cm.dispatch({effects:cf.of((function(e,n,i){return i!==t}))})}else this.cm.dispatch({effects:cf.of((function(){return!1}))})},t.prototype.hasHighlight=function(e){var t=this.cm.state.field(hf);if(!e)return t.size>0;for(var n=uf.get(e),i=t.iter();i.value;){if(i.value===n)return!0;i.next()}return!1},t.prototype.getAllFoldableLines=function(){for(var e=this.cm.state,t=[],n=1;n<=e.doc.lines;n++){var i=e.doc.line(n),r=kp(this.cm.state,i.from,i.to);r&&t.push(r)}return t},t.prototype.getFoldOffsets=function(){for(var e=Tp(this.cm.state),t=new Set,n=e.iter();n.value;)t.add(n.from),n.next();return t},t.prototype.foldLess=function(){for(var e=this.cm.state.doc,t=this.getFoldOffsets(),n=this.getAllFoldableLines(),i=[],r=function(r){for(var o=e.lineAt(r.to).to,a={from:r.from,to:o},s=0,l=n.filter((function(e){return gf(a,e.from,e.to)}));s<l.length;s++){var c=l[s];if(t.has(c.from)){i.push(c);break}}},o=0,a=this.cm.state.selection.ranges;o<a.length;o++){r(a[o])}i.length>0&&this.cm.dispatch({effects:i.map((function(e){return xp.of(e)}))})},t.prototype.foldMore=function(){for(var e=this.cm.state.doc,t=this.getFoldOffsets(),n=this.getAllFoldableLines(),i=[],r=function(r){for(var o=e.lineAt(r.to).to,a={from:r.from,to:o},s=n.filter((function(e){return gf(a,e.from,e.to)})),l=s.length-1;l>=0;l--){var c=s[l];if(!t.has(c.from)){i.push(c);break}}},o=0,a=this.cm.state.selection.ranges;o<a.length;o++){r(a[o])}i.length>0&&this.cm.dispatch({effects:i.map((function(e){return Ep.of(e)}))})},t.prototype.insertBlock=function(e,t){for(var n=this.cm.state,i=n.doc,r=n.selection,o=[],a=0,s=Bi.create(r.ranges.map((function(e){var t=i.lineAt(e.from),n=i.lineAt(e.to);return Bi.range(t.from,n.to)}))).ranges;a<s.length;a++){var l=s[a];o.push({insert:e+"\n",from:l.from}),o.push({insert:"\n"+t,from:l.to})}var c=e.length+1;this.cm.dispatch({changes:o,selection:Bi.create(r.ranges.map((function(e){return Bi.range(e.anchor+c,e.head+c)})))})},t.prototype.toggleMarkdownFormatting=function(e){var t=this.cm,n=t.state.selection.ranges[0],i=Hh(t.state).cursor(wn.ExcludeBuffers);i.moveTo(n.from,-1),i.node.parent||i.moveTo(n.from,1);var r=nD[e],o=r.surroundingChars,a=o.length,s=function(){var e;return(null!==(e=i.type.prop(Td))&&void 0!==e?e:"").split(" ").contains(r.nodeType)},l=[],c=void 0;if(s()){if(n.from===n.to){var u=n.from;if(t.state.doc.sliceString(u,u+a)===o){var h=Bi.create([Bi.range(u+a,u+a)]);return void this.cm.dispatch({selection:h})}}for(var p=i.from,d=i.from;i.prevSibling()&&!(i.to<d-1);){if(t.state.doc.sliceString(i.from,i.from+a)===o){p=i.from;break}if(!s())break;d=i.from}l.push({from:p,to:p+a,insert:""}),i.moveTo(n.to,-1),i.node.parent||i.moveTo(n.to,1);var f=i.to;for(d=i.to;i.nextSibling()&&!(i.from>d+1);){if(t.state.doc.sliceString(i.to-a,i.to)===o){f=i.to;break}if(!s())break;f=i.to,d=i.to}t.state.doc.sliceString(f-a,f)===o&&l.push({from:f-a,to:f,insert:""})}else{u=n.from;var g=n.to;if(n.empty){var m=t.state.wordAt(u);m?(u=m.from,g=m.to):(r.padding&&(a+=1),c=Bi.create([Bi.range(u+a,u+a)]))}else{for(;u<g&&/\s+/.test(t.state.sliceDoc(u,u+1));)u++;for(;g>u&&/\s+/.test(t.state.sliceDoc(g-1,g));)g--;if(u===g)return;c=Bi.create([Bi.range(u+a,g+a)])}l.push({from:u,to:u,insert:r.padding?"".concat(r.surroundingChars," "):r.surroundingChars}),l.push({from:g,to:g,insert:r.padding?" ".concat(r.surroundingChars):r.surroundingChars})}this.cm.dispatch({changes:l,selection:c})},t.prototype.searchCursor=function(e){var t=this.cm,n=this,i=function(n,i){return new wv(t.state.doc,e,n,i,(function(e){return e.toLowerCase()}))},r=t.state.selection.main.from,o=t.state.selection.main.to;function a(t,n){for(var r=n;;){for(var o=Math.max(t,r-1e4-e.length),a=i(o,r),s=null;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==t)return null;r-=1e4}}var s=null;return{current:function(){return s},findPrevious:function(){s=null;var e=a(0,r)||a(r,t.state.doc.length);if(!e)return null;var n=t.state.doc;return r=e.from,o=e.to,s={from:ff(n,e.from),to:ff(n,e.to)}},findNext:function(){var e=i(o,void 0).nextOverlapping();if(e.done&&(e=i(0,o).nextOverlapping()),e.done)return s=null;var n=e.value,a=t.state.doc;return r=n.from,o=n.to,s={from:ff(a,n.from),to:ff(a,n.to)}},replace:function(e,t){var i=this.current();i&&n.replaceRange(e,i.from,i.to,t)},findAll:function(){for(var e=i(),n=[],r=t.state.doc;!e.next().done;){var o=e.value;n.push({from:ff(r,o.from),to:ff(r,o.to)})}return n},replaceAll:function(e,t){var i=this.findAll().map((function(t){return{from:t.from,to:t.to,text:e}}));n.transaction({changes:i},t)}}},t.prototype.getClickableTokenAt=function(e){if(!e)return null;var t=this.cm,n=t.state.doc,i=[],r=n.line(e.line+1),o=Hh(t.state),a=r.from;o.iterate({from:r.from,to:r.to,enter:function(e){var t=e.type,n=e.from,r=e.to,o=t.prop(Td);o&&(a<n&&i.push({type:"",from:a,to:n}),i.push({type:o,from:n,to:r}),a=r)}}),a<r.to&&i.push({type:"",from:a,to:r.to});for(var s=df(n,e),l=-1,c=0;c<i.length;c++){var u=i[c];if(u.from<=s&&u.to>=s){l=c;break}}if(!(l<0)){var h=function(e){return n.sliceString(e.from,e.to)},p=i[l],d=p.type,f=d.split(" "),g=h(p),m="hmd-internal-link",v=f.contains(m),y=f.contains("formatting-link")&&["[[","]]"].contains(g);if(v||y){for(var b=l-1;b>=0;){var w=i[b].type;if(!w||!w.contains(m))break;b--}for(var k=l+1;k<i.length;){var C=i[k].type;if(!C||!C.contains(m))break;k++}var E="",x=r.to,S=r.from;for(c=b+1;c<k;c++){var M=i[c];M.type.contains(m)&&(E+=h(M),M.from<x&&(x=M.from),M.to>S&&(S=M.to))}return{type:"internal-link",text:Vw(E),start:ff(n,x),end:ff(n,S)}}if(f.contains("link")){for(var T=l+1;T<i.length;){var D=i[T];if(!D||!D.type.split(" ").contains("link")){if(D){var A=D.type.split(" ");if(A.contains("string")&&A.contains("url"))break}T=-1;break}T++}T>-1&&T<i.length&&(l=T,f=(d=(p=i[T]).type).split(" "))}if(f.contains("url")){var L=h(p);if("("===L?L=h(p=i[l+1]):")"===L&&(L=h(p=i[l-1])),!p)return null;var P=!1;if(f.contains("string")){if(zw(L=Uw(L))){P=!0;try{L=decodeURI(L)}catch(e){return null}L=_w(L).trim()}}else/^([a-z0-9+.-]+):/.test(L)||(L="https://"+L);return P||(L=qw(L)),{type:P?"internal-link":"external-link",text:L,start:ff(n,p.from),end:ff(n,p.to)}}if(f.contains("hashtag")){var I="";for(x=r.to,S=r.from,c=0;c<i.length;c++){var O=i[c];if(O.type&&O.type.split(" ").contains("hashtag"))I+=h(O),O.from<x&&(x=O.from),O.to>S&&(S=O.to);else{if(!(c<l))break;I="",x=s,S=s}}if(I)return{type:"tag",text:I,start:ff(n,x),end:ff(n,S)}}return f.contains("blockid")?{type:"blockid",text:h(p),start:ff(n,p.from),end:ff(n,p.to)}:null}},t.commands={goUp:Vg,goDown:zg,goLeft:kg,goRight:Cg,goStart:Am,goEnd:Lm,goWordLeft:Mg,goWordRight:Tg,indentMore:VP,indentLess:zP,newlineAndIndent:ov,swapLineUp:Qm,swapLineDown:Jm,deleteLine:iv,toggleFold:function(e){return Pp(e)||Lp(e)},foldAll:NP,unfoldAll:Fp},t}(Df),eI=[],tI=function(e){function t(t,n,i){var r=e.call(this)||this;r.cleanupLivePreview=null,r.isScrolling=!1,r.sourceMode=!0,r.isVisible=!0,r.cssClasses=[],r.cursorPopupEl=null,r.app=t,r.owner=i,r.containerEl=n,r.editorSuggest=t.workspace.editorSuggest,r.sourceMode=!r.app.vault.getConfig("livePreview");var o=r.editorEl=n.createDiv("markdown-source-view cm-s-obsidian mod-cm6"),a=r.cm=new jl({parent:o});r.editor=new JP(a),r.clipboardManager=new CM(i),a.contentDOM.detach();var s=(r.sizerEl=a.scrollDOM.createDiv("cm-sizer")).createDiv("cm-contentContainer"),l=a.scrollDOM.find(".cm-gutters");return l&&s.appendChild(l),s.appendChild(a.contentDOM),a.scrollDOM.addEventListener("scroll",(function(){return r.onScroll()})),LA.registerDomEvents(a.contentDOM,new xP(r)),r.clear(),r.updateOptions(),r.search=new tD(t,r.editor,r.editorEl,(function(e){e!==r.scope&&(r.scope&&t.keymap.popScope(r.scope),e&&t.keymap.pushScope(e),r.scope=e)})),o.addEventListener("click",r.onEditorClick.bind(r)),o.addEventListener("mousedown",r.onEditorClick.bind(r),{capture:!0}),Lt.isIosApp&&bt(o,r.onEditorClick.bind(r)),o.addEventListener("contextmenu",(function(e){r.clipboardManager.onContextMenu(e)})),o.on("mouseover",".cm-link, .cm-hmd-internal-link",r.onEditorLinkMouseover.bind(r)),o.addEventListener("dragstart",r.onEditorDragStart.bind(r)),o.onNodeInserted((function(){return r.reinit()})),setTimeout((function(){return r.onResize}),0),r}return f(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this.cm.state.doc.toString()},t.prototype.set=function(e,t){var n=this.cm;if(t){this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null,this.editorSuggest.close();var i=[this.getLocalExtensions(),QP.of(this.getDynamicExtensions()),ZP];try{var r=this.path;if(r){var o=eI.find((function(e){return e.file===r}));if(o&&o.length===e.length){var a=Xf.spec.fromJSON(o.data);i.push(Xf.init((function(){return a})))}}}catch(e){console.error(e)}var s=Sr.create({doc:e,extensions:i});n.setState(s),n.dispatch({effects:[jl.scrollIntoView(0),yf.of()]}),n.scrollDOM.scrollTop=0,n.dispatch({effects:[yf.of()]})}else{for(var l=n.state.doc,c=e.split(/\r?\n/g),u=l.lines,h=0;h<c.length&&h<u&&c[h]===l.line(h+1).text;)h++;if(h===c.length&&h===u)return;for(var p=u-1,d=c.length-1;p>h&&d>h&&l.line(p+1).text===c[d];)p--,d--;var f={line:h,ch:0},g={line:p,ch:l.line(p+1).length},m=c.slice(h,d+1).join("\n");h===Math.min(u,c.length)&&(f={line:h-1,ch:l.line(h).length},c.length>u&&(m="\n"+m)),n.dispatch({changes:{from:df(l,f),to:df(l,g),insert:m},userEvent:"set"}),this.isScrolling=!0}},t.prototype.saveHistory=function(){var e=this.path;if(e)try{var t=this.cm.state,n=t.field(Xf);if(n){var i=Xf.spec.toJSON(n,t),r=function(e){if(e&&Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var i=n[t];if(i.changes&&i.changes.length)return!0}return!1};if(!r(i.done)&&!r(i.undone))return;(eI=eI.filter((function(t){return t.file!==e}))).push({ts:Date.now(),file:e,data:i,length:t.doc.length}),eI.length>20&&eI.shift()}}catch(e){console.error(e)}},t.prototype.reinit=function(){this.cm.setRoot(this.editorEl.doc),this.onResize()},t.prototype.reparent=function(e){this.containerEl=e,e.appendChild(this.editorEl),this.reinit()},t.prototype.show=function(){this.editorEl.show(),this.isVisible=!0},t.prototype.hide=function(){this.editorEl.hide(),this.editorSuggest.close(),this.search.hide(),this.isVisible=!1},t.prototype.clear=function(){this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null;var e=Sr.create({extensions:[this.getLocalExtensions(),QP.of(this.getDynamicExtensions()),ZP]});this.cm.setState(e)},t.prototype.destroy=function(){this.localExtensions=null,this.cleanupLivePreview&&(this.cleanupLivePreview(),this.cleanupLivePreview=null),this.livePreviewPlugin=null,this.cm.setState(Sr.create({})),this.cm.destroy(),this.editorSuggest.close(),this.scope&&this.app.keymap.popScope(this.scope),Lt.isMobile&&this.app.mobileToolbar.hide()},t.prototype.getEditorRange=function(){var e=this.cm,t=e.state.doc,n=ff(t,e.state.selection.main.anchor),i=ff(t,e.state.selection.main.head);return{from:{line:n.line,ch:n.ch},to:{line:i.line,ch:i.ch}}},t.prototype.getSelection=function(){return this.editor.getSelection()},t.prototype.setState=function(e){var t=this.editor,n=e.cursor,i=t.getScrollInfo(),r=e.focus&&(!Lt.isMobile||e.focusOnMobile);(n&&n.from&&(r=!1,Lt.isDesktop&&t.focus(),t.setSelection(n.from,n.to),t.scrollTo(i.left,i.top)),e.focusMetadata)&&(r=!this.owner.focusMetadata({focusHeading:!0}));r&&(t.focus(),t.scrollTo(i.left,i.top),Lt.isMobileApp&&OD&&OD.show()),e.hasOwnProperty("scroll")&&this.applyScroll(e.scroll)},t.prototype.setHighlight=function(e){var t=this.editor;if(void 0!==e.startLoc&&void 0!==e.endLoc){var n=e.startLoc,i=e.endLoc,r={line:n.line,ch:n.col},o=i?{line:i.line,ch:i.col}:{line:t.lastLine(),ch:t.getLine(t.lastLine()).length};this.highlightSearchMatches([{from:r,to:o}]),this.isScrolling=!0,this.onScroll()}else if(void 0!==e.line&&e.line>=0){var a=e.line;r={line:a,ch:0},o={line:a,ch:t.getLine(a).length};t.setSelection(o,o),this.highlightSearchMatches([{from:r,to:o}]),this.isScrolling=!0,this.onScroll()}else if(void 0!==e.match){var s=e.match,l=Af(s.content,s.matches);this.highlightSearchMatches(l),this.isScrolling=!0,this.onScroll()}},t.prototype.highlightSearchMatches=function(e,t,n,i){void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.editor;if(0!==e.length){r.addHighlights(e,"is-flashing",i,!0);var o=e[0];n&&r.setCursor(o.from),t&&r.scrollIntoView({from:o.to,to:o.from},!0)}else r.removeHighlights("is-flashing")},t.prototype.updateEvent=function(){var e=this,t=!1,n=rt((function(){e.editorSuggest.trigger(e.editor,e.file,t),t=!1}),50),i=rt((function(){e.editor.expandText()}),10),r=rt(this.updateLinkPopup.bind(this),300);return function(o){var a=o.transactions,s=o.docChanged&&a.some(pf);s&&(t=!0,i()),(o.docChanged||o.selectionSet)&&(n(),r()),e.onUpdate(o,s)}},t.prototype.getLocalExtensions=function(){var e=this,t=this.localExtensions;if(!t){(t=this.localExtensions=[]).push(WP.init((function(){return e.cm}))),t.push(jP.init((function(){return e.owner})));var n={key:"Tab",run:function(){return e.editor.indentList(),!0},shift:function(){return e.editor.unindentList(),!0}},i=function(){return e.editorSuggest.isShowingSuggestion()};t.push(Jl.of([{key:"ArrowUp",run:i,preventDefault:!0},{key:"ArrowDown",run:i,preventDefault:!0},{key:"Enter",run:i,preventDefault:!0},{key:"Tab",run:i,preventDefault:!0},{key:"Enter",run:function(){return!!e.app.vault.getConfig("smartIndentList")&&(e.editor.newlineAndIndentContinueMarkdownList(),!0)},shift:function(){return!!e.app.vault.getConfig("smartIndentList")&&(e.editor.newlineAndIndentOnly(),!0)},preventDefault:!0},{key:"Escape",run:function(){return e.editor.removeHighlights(),!1},preventDefault:!0},n])),t.push(jl.updateListener.of(this.updateEvent())),t.push(jl.domEventHandlers({dragstart:function(e){return e.dataTransfer.clearData("text/html")},dragover:function(t){return e.clipboardManager.handleDragOver(t)},drop:function(t){return e.clipboardManager.handleDrop(t)},copy:function(t){e.editor.getSelection()||e.editor.getLine(e.editor.getCursor().line)||t.preventDefault()},paste:function(t){return e.clipboardManager.handlePaste(t)},focus:function(){e.app.workspace.activeEditor=e.owner,Lt.isMobile&&e.app.mobileToolbar.show()},blur:function(){Lt.isMobile&&e.app.mobileToolbar.hide(),e.owner instanceof iK&&e.owner.saveImmediately(),e.editorSuggest.close()}}))}return t},t.prototype.getDynamicExtensions=function(){var e=this.app.vault,t=[];e.getConfig("showLineNumber")&&(t.push(Pu({fixed:!1})),t.push(MM),t.push(_u())),e.getConfig("showIndentGuide")&&t.push(rT);var n=e.getConfig("foldHeading"),i=e.getConfig("foldIndent"),r=n||i;this.editorEl.toggleClass("is-folding",r),r&&(t.push(zp()),t.push(tT),n&&t.push(FP),i&&t.push(OP),t.push(BP));var o=e.getConfig("useTab"),a=e.getConfig("tabSize");t.push(Sr.tabSize.of(a));var s=o?"\t":new Array(Math.clamp(a,2,4)).fill(" ").join("");t.push(tp.of(s));var l=e.getConfig("rightToLeft");this.editorEl.toggleClass("is-rtl",l),l&&t.push(jl.theme({"&":{direction:"rtl"}}));var c=e.getConfig("spellcheck");t.push(jl.contentAttributes.of({spellcheck:String(c),autocorrect:"on",autocapitalize:"on",contenteditable:"true"}));var u=!this.sourceMode;if(this.editorEl.toggleClass("is-live-preview",u),this.editorEl.toggleClass("show-properties","visible"===e.getConfig("propertiesInDocument")),t.push(GP.init((function(){return u}))),u){var h=this.livePreviewPlugin;h||(h=this.livePreviewPlugin=iB(this,this.cm)),t.push(h)}var p=e.getConfig("autoPairBrackets"),d=e.getConfig("autoPairMarkdown");if(p||d){var f=[];p&&f.push("(","[","{","'",'"'),d&&f.push("*","_","`","```");var g={brackets:f};t.push([NM,PM]),t.push(Jl.of(RM)),t.push(Sr.languageData.of((function(){return[{closeBrackets:g}]}))),t.push(GT),t.push([sf])}return(Lt.isMobile?!!localStorage.getItem("vim"):e.getConfig("vimMode"))&&t.push([VT,$i.highest(zT),hT,WT]),t.push.apply(t,this.app.workspace.editorExtensions),t},t.prototype.updateOptions=function(){this.cm.dispatch({effects:[QP.reconfigure(this.getDynamicExtensions()),qP.of({field:GP,value:!this.sourceMode})]})},t.prototype.setCssClass=function(e){var t=this.editorEl;if(t.removeClasses(this.cssClasses),e&&e.length>0){var n=t.classList;e=e.filter((function(e){return!n.contains(e)})),t.addClasses(e)}else e=[];this.cssClasses=e},t.prototype.showSearch=function(e){void 0===e&&(e=!1),this.search.show(e)},t.prototype.getScroll=function(){var e=this.cm,t=e.contentDOM.offsetTop,n=e.scrollDOM.scrollTop,i=e.lineBlockAtHeight(Math.max(n-t,0)),r=e.state.doc.lineAt(i.from).number-1,o=e.state.doc.lineAt(i.to).number-1-r+1,a=n-i.top,s=i.height;return 0===r?s+=t:a-=t,r+o*Math.max(0,a)/Math.max(1,s)},t.prototype.applyScroll=function(e){if(Number.isNumber(e)&&!isNaN(e)){var t=this.cm;e<0&&(e=0),e>=t.state.doc.lines&&(e=t.state.doc.lines-.99);var n=Math.floor(e),i=e-n,r=t.state.doc.line(n+1);this.isScrolling=!0,t.dispatch({effects:jl.scrollIntoView(r.from,{y:"nearest"})}),t.requestMeasure({read:function(){},write:function(){t.requestMeasure({read:function(){var e=t.lineBlockAt(r.from),o=t.state.doc.lineAt(e.from).number-1,a=t.state.doc.lineAt(e.to).number-1-o+1,s=n-o,l=e.top,c=e.height,u=t.contentDOM.offsetTop;return 0===o?c+=u:l+=u,l+(s+i)*(c/a)},write:function(e){this.isScrolling=!0,t.scrollDOM.scrollTop=e}})}})}},t.prototype.getFoldInfo=function(){for(var e=this.cm,t=e.state.doc,n=[],i=Tp(e.state).iter();i.value;){var r=ff(t,i.from),o=ff(t,i.to);n.push({from:r.line,to:o.line}),i.next()}return n.length>0?{folds:n,lines:t.lines}:null},t.prototype.applyFoldInfo=function(e){var t=this.cm;if(!e||t.state.doc.lines===e.lines){Fp(t);var n=[];if(e)for(var i=0,r=e.folds;i<r.length;i++){var o=r[i],a=t.state.doc.line(o.from+1),s=kp(t.state,a.from,a.to);s&&n.push(Ep.of(s))}0!==n.length&&t.dispatch({effects:n})}},t.prototype.toggleFoldFrontmatter=function(){if("---"===this.cm.state.doc.lineAt(0).text){var e=kp(this.editor.cm.state,0,0);if(e){var t=$M(Tp(this.cm.state),0,0)?xp:Ep;this.cm.dispatch({effects:t.of(e)})}}},t.prototype.triggerClickableToken=function(e,t){var n=this;if("internal-link"===e.type)setTimeout((function(){n.app.workspace.openLinkText(e.text,n.path,t)}),100);else if("external-link"===e.type)window.open(e.text);else if("tag"===e.type){var i=e.text;i.startsWith("#")||(i="#"+i);var r=this.app.internalPlugins.getPluginById("global-search");r&&r.instance.openGlobalSearch("tag:"+i)}},t.prototype.updateLinkPopup=function(){var e=this;if(Lt.isMobile&&this.sourceMode){var t=this,n=t.cm,i=t.editor,r=t.cursorPopupEl;r&&(r.detach(),this.cursorPopupEl=null);var o=i.getCursor("from"),a=i.getClickableTokenAt(o);if(a){var s=0===a.start.line,l=n.scrollDOM;this.cursorPopupEl=l.createDiv();var c=this.cursorPopupEl.createDiv({cls:"follow-link-popover"});"internal-link"===a.type?c.setText(rf.editor.linkPopover.tooltipFollowLink()):"external-link"===a.type?c.setText(rf.editor.linkPopover.tooltipOpenLink()):"tag"===a.type&&c.setText(rf.editor.linkPopover.tooltipSearchTag()),c.createDiv("popover-arrow"),c.style.position="absolute",s&&c.addClass("mod-bottom"),c.style.cursor="pointer",c.style.zIndex="var(--layer-popover)",c.style.top="0",c.style.left="0";var u=i.coordsAtPos(a.start,!0),h=i.coordsAtPos(a.end,!0),p=c.offsetWidth,d=c.offsetParent?c.offsetParent.clientWidth:l.clientWidth,f=0,g=(u.left+h.left)/2-p/2;f+=s?u.bottom+8:u.top-c.offsetHeight-8,h.top>=u.bottom&&(g=u.left-p/2),c.style.top=f+"px",c.style.left=Math.clamp(g,0,d-p)+"px",c.onClickEvent((function(t){c.detach(),e.triggerClickableToken(a,t.shiftKey||1===t.button),t.preventDefault()})),"internal-link"===a.type&&c.addEventListener("mouseover",(function(t){ft(t,c)&&e.app.workspace.trigger("hover-link",{event:t,source:"editor",hoverParent:e,targetEl:c,linktext:a.text,sourcePath:e.path})}))}}},t.prototype.toggleSource=function(){this.sourceMode=!this.sourceMode,this.updateOptions(),this.cm.dispatch({effects:[yf.of()]})},t.prototype.onUpdate=function(e,t){},t.prototype.onScroll=function(){this.editorSuggest.reposition(),this.isScrolling?this.isScrolling=!1:this.handleScroll()},t.prototype.handleScroll=function(){},t.prototype.onEditorClick=function(e,t){var n=this;if(Lt.isMobile?Lt.isAndroidApp&&"mousedown"===e.type||"click"===e.type&&!e.isTrusted&&!!t||Lt.isIosApp&&"click"===e.type&&e.isTrusted:"click"===e.type&&0===e.button||"mousedown"===e.type&&1===e.button){var i=hw.isModifier(e,"Mod")||1===e.button;if((!this.sourceMode||i)&&(this.sourceMode||0!==e.button||i||!e.altKey&&!e.shiftKey)){var r=t||e.target,o=this.cm.contentDOM;if(o.contains(r)&&r!==o&&r.parentNode!==o){for(var a=r;a&&a!==o;){if(a.instanceOf(HTMLElement)&&"false"===a.contentEditable&&!a.hasClass("external-link")&&!a.draggable)return;a=a.parentNode}var s=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));if(s){var l=hw.isModEvent(e);(function(){if(n.sourceMode)return!0;if(l)return!0;if(!r.instanceOf(HTMLElement))return!1;if("tag"===s.type)return!0;if("internal-link"===s.type){if(!r.matchParent(".cm-underline"))return!1;if(r.matchParent(".cm-hmd-internal-link"))return!0;if(r.matchParent(".cm-link"))return!0}if("external-link"===s.type){if(r.matchParent(".external-link"))return!0;if(!r.matchParent(".cm-underline"))return!1;if(r.matchParent(".cm-url"))return!0;if(r.matchParent(".cm-link"))return!0}return!1})()&&(this.sourceMode&&"tab"===l&&1!==e.button&&!hw.isModifier(e,"Shift")&&(l=!1),this.triggerClickableToken(s,l),e.preventDefault())}}}}},t.prototype.onEditorLinkMouseover=function(e,t){if(ft(e,t)){var n=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));n&&"internal-link"===n.type&&this.app.workspace.trigger("hover-link",{event:e,source:"editor",hoverParent:this,targetEl:t,linktext:n.text,sourcePath:this.path})}},t.prototype.onEditorDragStart=function(e){var t=e.targetNode;if(t instanceof HTMLElement&&t.draggable){var n=this.cm.contentDOM;if(!n.contains(t))return;if(t===n||t.parentNode===n)return;var i=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));if(!i)return;"internal-link"===i.type?this.app.dragManager.onDragStart(e,this.app.dragManager.dragLink(e,i.text,this.path)):"external-link"===i.type&&Ew(e.dataTransfer,i.text)}},t.prototype.onCssChange=function(){this.cm.dispatch({effects:sT.clearCache.of()}),this.editor.refresh()},t.prototype.onViewClick=function(e){var t=this;this.editorSuggest.close(),setTimeout((function(){return t.editor.removeHighlights()}),0)},t.prototype.onResize=function(){var e=this.editor,t=this.containerEl;t.offsetParent&&(this.editorSuggest.reposition(),this.updateBottomPadding(t.clientHeight),Lt.isMobile&&e.hasFocus()&&e.scrollIntoView({from:e.getCursor("anchor"),to:e.getCursor("head")}),e.refresh())},t.prototype.updateBottomPadding=function(e){this.cm.contentDOM.style.paddingBottom=Math.round(e/2)+"px"},t}(nb),nI=["--font-interface-override","--font-text-override","--font-monospace-override","--font-text-size","--accent-h","--accent-s","--accent-l"],iI=["is-frameless","is-focused"],rI=["fullscreenchange","click","contextmenu","auxclick","keydown","keyup","mousedown","mouseup","mousemove","copy","paste","cut","drag","dragstart","dragover","dragend","dragenter","dragleave","drop"];function oI(e){var t=new e.constructor(e.type,e),n=t.preventDefault;t.preventDefault=function(){n.call(t),e.preventDefault()};var i=t.stopPropagation;t.stopPropagation=function(){i.call(t),e.stopPropagation()};var r=t.stopImmediatePropagation;return t.stopImmediatePropagation=function(){r.call(t),e.stopImmediatePropagation()},Object.defineProperty(t,"target",{get:function(){return e.target}}),Object.defineProperty(t,"currentTarget",{get:function(){return e.currentTarget}}),t}function aI(e){for(var t=0,n=rI;t<n.length;t++){var i=n[t];e.addEventListener(i,(function(e){return window.dispatchEvent(oI(e))}),{capture:!0})}}function sI(e,t){void 0===t&&(t=[]);var n=new WeakMap,i=[],r=function(e){var t=n.get(e);if(!t&&(t=e.cloneNode(!0),n.set(e,t),e instanceof HTMLStyleElement&&"MJX-CHTML-styles"===e.id)){for(var i=[],r=e.sheet.cssRules,o=0;o<r.length;o++)i.push(r[o].cssText);t.textContent=i.join("\n")}return t},o=function(){for(var n=w([],t,!0),o=0,a=Array.from(document.head.childNodes);o<a.length;o++){if((c=a[o])instanceof HTMLStyleElement||c instanceof HTMLLinkElement&&"text/css"===c.type){if(c instanceof HTMLStyleElement&&c.textContent.contains("ͼ1"))continue;n.push(r(c))}}for(var s=0,l=i;s<l.length;s++){var c=l[s];n.contains(c)||c.detach()}for(var u=e.document.head,h=u.lastChild,p=n.length-1;p>=0;p--){h!==(c=n[p])?u.insertBefore(c,h?h.nextSibling:null):h=h.previousSibling}i=n},a=function(){for(var t=document.body.className.split(" "),n=new Set(e.document.body.className.split(" ")),i=0,r=iI;i<r.length;i++){var o=r[i];n.has(o)?t.push(o):t.remove(o)}var a=e.parent;a===e?t.push("is-popout-window"):a&&(a.document.body.classList.contains("is-focused")?t.push("is-focused"):t.remove("is-focused")),e.document.body.className=t.join(" ");for(var s=0,l=nI;s<l.length;s++){var c=l[s],u=document.body.style.getPropertyValue(c);e.document.body.style.setProperty(c,u)}},s=new MutationObserver((function(e){for(var t=!1,i=!1,r=function(e){(e instanceof HTMLStyleElement||e instanceof HTMLLinkElement)&&(n.delete(e),t=!0)},s=0,l=e;s<l.length;s++){var c=l[s];if(c.target!==document.body){r(c.target);for(var u=0,h=Array.from(c.addedNodes);u<h.length;u++){r(h[u])}}else i=!0}t&&o(),i&&a()}));return s.observe(document.head,{attributes:!0,attributeFilter:["data-change"],subtree:!0,childList:!0,characterData:!0}),s.observe(document.body,{attributes:!0,attributeFilter:["class","style"]}),e.parent!==e&&e.parent.addEventListener("focuschange",a),o(),a(),function(){s.disconnect(),e.parent&&e.parent.removeEventListener("focuschange",a)}}function lI(e){var t=e.document;if(Lt.isDesktopApp&&e.electronWindow){var n=e.electronWindow,i=function(){t.body.toggleClass("is-focused",n.isFocused()),e.dispatchEvent(new Event("focuschange"))};n.on("focus",i),n.on("blur",i),i()}else{i=function(){return t.body.toggleClass("is-focused",t.hasFocus())};e.addEventListener("focus",i),e.addEventListener("blur",i),i()}}function cI(e){var t=window.globalEnhance.toString();e.eval.call(e,"(".concat(t,")()\n//# sourceURL=enhance.js"))}var uI=function(){function e(e,t){this.eWin=e,this.win=t;var n=this.isMac="darwin"===window.process.platform,i=t.document,r=i.body;r.addClass("is-frameless");var o=this.titleBarEl=i.createElement("div");o.className="titlebar",r.insertBefore(o,r.firstChild);var a=this.titleBarInnerEl=o.createDiv("titlebar-inner");this.titleBarTextEl=a.createDiv({cls:"titlebar-text",text:"Obsidian"}),t.addEventListener("resize",this.updateStatus.bind(this)),new MutationObserver(this.updateTitle.bind(this)).observe(document.head.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),this.leftButtonContainerEl=a.createDiv("titlebar-button-container mod-left");var s=a.createDiv("titlebar-button-container mod-right");if(this.updateStatus(),this.updateTitle(),!n){if(e.minimizable){var l=s.createDiv({cls:"titlebar-button mod-minimize",onclick:function(){return e.minimize()}});l.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><rect fill="currentColor" width="10" height="1" x="1" y="6"></rect></svg>',ef.then((function(){aS(l,rf.interface.window.minimize())}))}if(e.maximizable){var c=s.createDiv({cls:"titlebar-button mod-maximize",onclick:function(){e.isMaximized()?e.unmaximize():e.maximize(),u()}});c.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><rect width="9" height="9" x="1.5" y="1.5" fill="none" stroke="currentColor"></rect></svg>';var u=function(){t.closed||(e.isMaximized()?aS(c,rf.interface.window.restoreDown()):aS(c,rf.interface.window.maximize()))};ef.then((function(){u()})),t.addEventListener("resize",u)}if(e.closable){var h=s.createDiv({cls:"titlebar-button mod-close",onclick:function(){return e.close()}});h.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon></svg>',ef.then((function(){aS(h,rf.interface.window.closeWindow())}))}}hI(a)}return e.prototype.updateTitle=function(){this.titleBarTextEl.setText(this.win.document.title)},e.prototype.updateStatus=function(){var e=this.win,t=this.eWin;if(!e.closed){var n=t.webContents.getZoomFactor(),i=e.document.body;if(i.toggleClass("is-fullscreen",t.isFullScreen()),i.toggleClass("is-maximized",t.isMaximized()),i.style.setProperty("--zoom-factor",String(n)),this.isMac&&"hidden"===e.titlebarStyle){var r=40,o=getComputedStyle(i).getPropertyValue("--header-height");o&&(r=parseFloat(o)),(isNaN(r)||0===r)&&(r=40);var a=Math.floor(r*n/2-8);a<-5&&(a=0),t.setTrafficLightPosition({x:a+2,y:a})}}},e}();function hI(e){Lt.isMacOS&&Lt.isDesktopApp&&e.addEventListener("dblclick",(function(t){if(0===t.button){var n=t.target;if(!n.instanceOf(HTMLElement)||!n.closest(".clickable-icon")&&!n.closest(".workspace-tab-header-inner-close-button")){var i=e.win.electronWindow;i.isMaximizable&&Ot((function(e){var t=e.remote.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string");"Minimize"===t?i.minimize():"Maximize"!==t&&""!==t||(i.isMaximized()?i.unmaximize():i.maximize())}))}}}))}function pI(e){for(var t=e;t!==t.parent&&null!==t.parent;)t=t.parent;var n=t.require;if(n){var i=n("electron");if(i){if(e.electron=i,!i.remote)try{i.remote=n("@electron/remote")}catch(e){console.error(e)}e.electronWindow=i.remote.getCurrentWindow();var r=e.open;e.open=function(e,t,n){return"string"==typeof e&&0===e.indexOf("file:")?(i.ipcRenderer.send("open-url",e),null):r.apply(this,arguments)},e.parent===e&&function(e){var t=e.electron.ipcRenderer.sendSync("frame")||"hidden";e.titlebarStyle=t,"native"!==t&&(e.frameDom=new uI(e.electronWindow,e),"hidden"===t&&e.document.body.addClass("is-hidden-frameless"))}(e)}}}var dI=function(e){function t(t){var n=e.call(this,t.app,t.editorEl,t)||this;if(n.iframeEl=null,n.cleanup=null,n.requestSaveFolds=rt((function(){return n.owner.onMarkdownFold()}),500),n.owner=t,t.useIframe){n.editorEl.detach(),n.editorEl.addClass("mod-inside-iframe");var i=n.iframeEl=n.owner.editorEl.createEl("iframe","embed-iframe is-controlled");i.setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),i.contentDocument&&n.onIframeLoad(),i.onload=n.onIframeLoad.bind(n)}return t instanceof cF&&n.sizerEl.prepend(t.inlineTitleEl),n}return f(t,e),t.prototype.cleanupIframe=function(){this.cleanup&&(this.cleanup(),this.cleanup=null)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.cleanupIframe()},t.prototype.onIframeLoad=function(){var e=this;this.cleanupIframe();var t=this.iframeEl,n=t.contentDocument,i=t.contentWindow,r=createEl("base",{href:location.href});n.head.appendChild(r),aI(i),i.addEventListener("focus",(function(e){t.win.dispatchEvent(oI(e)),t.dispatchEvent(new FocusEvent("focusin",{bubbles:!0}))}),{capture:!0}),i.addEventListener("blur",(function(e){return t.win.dispatchEvent(oI(e))}),{capture:!0}),this.cleanup=sI(i,[r]),i.app=this.app,cI(i),Lt.isDesktopApp&&pI(i),Yx(n),n.body.setCssProps({"--safe-area-inset-top":"0","--safe-area-inset-bottom":"0","--safe-area-inset-left":"0","--safe-area-inset-right":"0"}),activeWindow.setTimeout((function(){return e.reparent(n.body)}))},t.prototype.onUpdate=function(e,t){if(t){var n=e.state.doc;this.owner.save(n.toString()),this.requestSaveFolds()}var i=e.transactions;(bf(i,Ep)||bf(i,xp))&&this.requestSaveFolds()},t.prototype.getDynamicExtensions=function(){var t=this,n=e.prototype.getDynamicExtensions.call(this);return n.push(_P.init((function(){return t}))),n.push(Jl.of([{key:"Escape",run:function(e){var n,i=null===(n=e.cm)||void 0===n?void 0:n.vim;return(!i||!i.insertMode)&&(setTimeout((function(){return t.owner.showPreview(!0)})),!0)}}])),n},Object.defineProperty(t.prototype,"file",{get:function(){var e=this.owner;return e instanceof cF?e.file:null},enumerable:!1,configurable:!0}),t}(tI),fI=function(e){function t(t,n){void 0===n&&(n=!0);var i=e.call(this,t.app,t.previewEl,n)||this;return i.search=null,i.owner=t,i.onFoldChange=rt((function(){return i.owner.onMarkdownFold()}),500),i}return f(t,e),Object.defineProperty(t.prototype,"file",{get:function(){return this.owner.file},enumerable:!1,configurable:!0}),t.prototype.set=function(e){var t=this.app,n=this.renderer;n.set(e),n.previewEl.toggleClass("rtl",t.vault.getConfig("rightToLeft")),n.previewEl.toggleClass("show-indentation-guide",t.vault.getConfig("showIndentGuide")),n.applyFoldInfo(this.owner.getFoldInfo());var i=t.vault.getConfig("foldHeading"),r=t.vault.getConfig("foldIndent");n.previewEl.toggleClass("allow-fold-headings",i),n.previewEl.toggleClass("allow-fold-lists",r),i||n.unfoldAllHeadings(),r||n.unfoldAllLists()},t.prototype.edit=function(e){this.renderer.set(e),this.owner.save(e,!0)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.search&&this.owner.applyScope(null)},t.prototype.showSearch=function(){var e=this;if(!this.search){var t=this.search=new CP(this.app,this.renderer,this.containerEl,(function(){e.search=null,e.owner.applyScope(null)}));this.owner.applyScope(t.scope)}},t}(SP),gI=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.file=null,o.hoverPopover=null,o.supportsProperties=!1,o.editable=!1,o.text="",o.dirty=!1,o.useIframe=!1,o.requestSaveFolds=rt((function(){return o.onMarkdownFold()}),500),o.requestSave=rt((function(){return o.save(o.text,!0)}),2e3),o.app=t,o.containerEl=n,o.file=i,o.state=r,o.previewEl=o.containerEl.createDiv("markdown-embed-content"),o.editorEl=o.containerEl.createDiv("markdown-embed-content"),Xb(o.previewEl),Xb(o.editorEl),o.previewMode=o.addChild(new fI(o)),o}return f(t,e),t.prototype.onload=function(){e.prototype.onload.call(this),this.showPreview()},t.prototype.save=function(e,t){void 0===t&&(t=!1),this.text=e,this.dirty=!t,t||this.requestSave(),this.set(e)},t.prototype.set=function(e,t){this.text=e,this.previewMode.set(e),this.editMode&&this.editMode.set(e,t)},t.prototype.showSearch=function(e){this.editMode?this.editMode.showSearch(e):this.previewMode.showSearch()},t.prototype.destroyEditor=function(e){void 0===e&&(e=!1);var t=this.editMode;t&&(e&&this.save(t.cm.state.doc.toString(),!0),t.destroy(),this.removeChild(t),this.editMode=null),this.editorEl.empty(),this.applyScope(null)},t.prototype.onunload=function(){this.destroyEditor(),this.containerEl.empty(),this.app.workspace.activeEditor===this&&(this.app.workspace.activeEditor=null)},t.prototype.showPreview=function(e){void 0===e&&(e=!1);var t=null;this.editMode&&(t=this.editMode.getScroll()),this.editorEl.hide(),this.previewEl.show(),this.destroyEditor(e);var n=this.getFoldInfo();null!==t&&(this.previewMode.renderer.applyScrollDelayed(t),this.previewMode.renderer.applyFoldInfo(n))},t.prototype.showEditor=function(){if(this.editable){var e=this.previewMode.renderer.getScroll();this.previewEl.hide(),this.editorEl.show();var t=this.editMode;t||(t=this.editMode=this.addChild(new dI(this))),t.set(this.text,!0);var n=this.getFoldInfo();t.editorEl.isShown()?(t.applyFoldInfo(n),t.setState({focus:!0,focusOnMobile:!0})):t.editorEl.onNodeInserted((function(){t.applyFoldInfo(n),t.applyScroll(e),t.setState({focus:!0,focusOnMobile:!0})}),!0)}},Object.defineProperty(t.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){var e;return null===(e=this.editMode)||void 0===e?void 0:e.editor},enumerable:!1,configurable:!0}),t.prototype.getMode=function(){return this.editMode?"source":"preview"},t.prototype.toggleMode=function(){"preview"===this.getMode()?this.showEditor():this.showPreview()},t}(nb);function mI(e,t,n,i){return qy.test(n)?rf.plugins.fileExplorer.msgInvalidCharacters()+Vy:i&&""===n?rf.plugins.fileExplorer.msgEmptyFileName():n.startsWith(".")?rf.plugins.fileExplorer.msgBadDotfile():e.vault.checkForDuplicate(t,n)?rf.plugins.fileExplorer.msgFileAlreadyExists():Uy.test(n)?rf.plugins.fileExplorer.msgUnsafeCharacters()+zy:qy.test(n)?rf.plugins.fileExplorer.msgInvalidCharacters()+Vy:""}function vI(e,t,n){var i=this;return createEl("button","clickable-icon",(function(r){r.ariaDisabled="true",aS(r,"backward"===n?rf.commands.navigateBack():rf.commands.navigateForward()),r.addEventListener("click",(function(r){return v(i,void 0,void 0,(function(){var i,o;return y(this,(function(a){switch(a.label){case 0:return i=hw.isModEvent(r),o=t(),i?[4,e.workspace.duplicateLeaf(t(),i)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return o.history.go("backward"===n?-1:1),[2]}}))}))}));var o=function(o){for(var a="backward"===n?t().history.backHistory:t().history.forwardHistory,s=new fw,l=function(r){s.addItem((function(o){return o.setTitle(Id(a[r].title,50)).setIcon(a[r].icon).onClick((function(o){return v(i,void 0,void 0,(function(){var i,s,l;return y(this,(function(c){switch(c.label){case 0:return i=hw.isModEvent(o),s=t(),i?[4,e.workspace.duplicateLeaf(t(),i)]:[3,2];case 1:s=c.sent(),c.label=2;case 2:return l=a.length-r,"backward"===n&&(l=0-l),s.history.go(l),[2]}}))}))}))}))},c=a.length-1;c>=0;c--)l(c);rS();var u=r.getBoundingClientRect();s.showAtPosition({x:u.x,y:u.bottom,width:u.width,overlap:!0}),o&&s.dom.addEventListener("mouseup",(function(e){var t=e.targetNode;setTimeout((function(){for(var n=0,i=s.items;n<i.length;n++){var r=i[n];if(r instanceof pw&&r.dom.contains(t))return void r.handleEvent(e)}}))}))};r.addEventListener("contextmenu",(function(){return o(!1)})),function(e,t){e.addEventListener("mousedown",(function(e){var n=window.setTimeout((function(){i(),t(e)}),400),i=function(){window.removeEventListener("mouseup",r),window.removeEventListener("mousemove",o),window.clearTimeout(n)},r=function(){i()},o=function(n){var r=n.clientX-e.clientX,o=n.clientY-e.clientY;r*r+o*o>25&&(i(),o>0&&o>Math.abs(r)&&t(e))};window.addEventListener("mouseup",r),window.addEventListener("mousemove",o)}))}(r,(function(){return o(!0)}))}))}var yI=function(e){function t(t){var n=e.call(this)||this;return n.icon="lucide-file",n.navigation=!1,n.app=t.app,n.leaf=t,n.containerEl=t.containerEl.createDiv("workspace-leaf-content"),n.containerEl.setAttribute("data-type",n.getViewType()),n}return f(t,e),t.prototype.open=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return e.appendChild(this.containerEl),this.load(),[4,this.onOpen()];case 1:return t.sent(),[2]}}))}))},t.prototype.close=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.containerEl.detach(),this.unload(),[4,this.onClose()];case 1:return e.sent(),[2]}}))}))},t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onClose=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.getState=function(){return{}},t.prototype.setState=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.getEphemeralState=function(){return{}},t.prototype.setEphemeralState=function(e){},t.prototype.getIcon=function(){return this.icon?this.icon:"lucide-file"},t.prototype.onResize=function(){},t.prototype.onPaneMenu=function(e,t){var n=this;if("tabs"===this.leaf.parent.type||"mobile-drawer"===this.leaf.parent.type){var i=this.leaf,r=this.leaf.parent,o=r.children.indexOf(i),a=r.children.length;if(this instanceof bI&&e.addItem((function(e){return e.setSection("close").setTitle(rf.interface.menu.close()).setIcon("lucide-x").onClick((function(){return n.leaf&&n.leaf.detach()}))})),"tab-header"===t){var s=r.children.filter((function(e){return e!==i&&e.view instanceof bI})).length;e.addItem((function(e){return e.setSection("close").setDisabled(0===s).setTitle(rf.interface.menu.closeOthers()).setIcon("lucide-x").onClick((function(){for(var e=0,t=r.children.slice();e<t.length;e++){var n=t[e];n&&n.canNavigate()&&n!==i&&n.detach()}}))})),e.addItem((function(e){return e.setSection("close").setDisabled(o>=a-1).setTitle(rf.interface.menu.closeRight()).setIcon("lucide-x").onClick((function(){for(var e=0,t=r.children.slice(o+1);e<t.length;e++){var n=t[e];n&&n.canNavigate()&&n&&n.detach()}}))})),e.addItem((function(e){return e.setSection("close").setTitle(rf.interface.menu.closeAll()).setIcon("lucide-x").onClick((function(){for(var e=0,t=r.children.slice();e<t.length;e++){var n=t[e];n&&n.canNavigate()&&n.detach()}}))}))}}},t.prototype.onHeaderMenu=function(e){},t.prototype.getSideTooltipPlacement=function(){var e=this.leaf.getRoot();return"left"===e.side?"right":"right"===e.side?"left":void 0},t.prototype.handleCut=function(e){},t.prototype.handleCopy=function(e){},t.prototype.handlePaste=function(e){},t}(nb),bI=function(e){function t(t){var n=e.call(this,t)||this;n.canDropAnywhere=!1;var i=n.app,r=i.workspace,o=n.headerEl=n.containerEl.createDiv("view-header");n.contentEl=n.containerEl.createDiv("view-content");var a=n.iconEl=o.createDiv("clickable-icon view-header-icon");return a.draggable=!0,Lt.isMobile||aS(a,rf.interface.dragToRearrange()),Lt.isMobile&&o.createEl("button","view-action clickable-icon mod-left-split-toggle",(function(e){Zb(e),aS(e,rf.interface.sidebarExpand()),gb(e,"sidebar-left"),e.addEventListener("click",(function(){n.app.workspace.leftSplit.toggle()}))})),o.createDiv("view-header-nav-buttons",(function(e){n.backButtonEl=vI(i,(function(){return n.leaf}),"backward"),gb(n.backButtonEl,"lucide-arrow-left"),e.appendChild(n.backButtonEl),n.forwardButtonEl=vI(i,(function(){return n.leaf}),"forward"),gb(n.forwardButtonEl,"lucide-arrow-right"),e.appendChild(n.forwardButtonEl)})),n.titleContainerEl=o.createDiv("view-header-title-container mod-at-start",(function(e){n.titleParentEl=e.createDiv({cls:"view-header-title-parent"}),n.titleEl=e.createDiv({cls:"view-header-title"})})),xb(n.titleContainerEl,n.titleEl),n.actionsEl=o.createDiv("view-actions"),Lt.isMobile?(n.moreOptionsButtonEl=n.addAction("lucide-more-vertical",rf.interface.menu.moreOptions(),(function(e){n.onMoreOptions(e)})),n.moreOptionsButtonEl.addEventListener("contextmenu",(function(e){e.preventDefault(),r.rightSplit.expand()})),Zb(n.moreOptionsButtonEl)):n.moreOptionsButtonEl=n.addAction("lucide-more-vertical",rf.interface.menu.moreOptions(),(function(e){e.currentTarget.classList.contains("has-active-menu")||n.onMoreOptions(e)})),a.addEventListener("dragstart",(function(e){r.onDragLeaf(e,n.leaf)})),i.dragManager.handleDrop(n.containerEl,n.handleDrop.bind(n)),n}return f(t,e),t.prototype.updateNavButtons=function(){var e=this.leaf.history,t=e.backHistory,n=e.forwardHistory;this.backButtonEl.ariaDisabled=String(0===t.length),this.forwardButtonEl.ariaDisabled=String(0===n.length)},t.prototype.load=function(){e.prototype.load.call(this);var t=this.app,n=this.leaf;Lt.isMobile?(gb(this.iconEl,"lucide-menu"),this.iconEl.addEventListener("click",(function(){t.workspace.leftSplit.expand()}))):gb(this.iconEl,this.getIcon()),this.titleEl.setText(this.getDisplayText()),this.registerEvent(n.on("group-change",this.onGroupChange,this)),this.registerEvent(n.on("history-change",this.updateNavButtons,this))},t.prototype.handleDrop=function(e,t,n){if(this.canDropAnywhere||(ye?e.shiftKey:e.altKey)||this.headerEl.contains(e.target)){var i=this.leaf.handleDrop(e,t,n);if(i)return i.hoverEl=this.headerEl,i.hoverClass="is-highlighted",i}},t.prototype.onGroupChange=function(){},t.prototype.addAction=function(e,t,n){var i=createEl("a","clickable-icon view-action");return this.actionsEl.prepend(i),gb(i,e),aS(i,t),i.onClickEvent((function(e){if(0===e.button||1===e.button)return n(e)})),i},t.prototype.onMoreOptions=function(e){e.preventDefault();var t=(new fw).addSections(["close","pane","open","action","view","view.linked","info","","danger"]);t.setSectionSubmenu("view.linked",{title:rf.interface.menu.openLinkedView(),icon:"lucide-link"}),this.onPaneMenu(t,"more-options"),this.onMoreOptionsMenu(t);var n=e.target,i=n.getBoundingClientRect();t.setParentElement(n).showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0,left:!0})},t.prototype.onPaneMenu=function(t,n){e.prototype.onPaneMenu.call(this,t,n);var i=this.app,r=this.leaf;this.navigation&&t.addItem((function(e){return e.setSection("pane").setTitle(r.pinned?rf.interface.menu.unpin():rf.interface.menu.pin()).setIcon("lucide-pin").onClick((function(){return r.togglePinned()}))})),r.group?t.addItem((function(e){return e.setSection("pane").setTitle(rf.interface.menu.unlinkTab()).setIcon("lucide-link").onClick((function(){return r.setGroup(null)}))})):Lt.isPhone||t.addItem((function(e){return e.setSection("pane").setTitle(rf.interface.menu.linkTab()).setIcon("lucide-link").onClick((function(){return i.workspace.onStartLink(r)}))})),Lt.isDesktop&&"sidebar-context-menu"!==n&&t.addItem((function(e){return e.setSection("open").setTitle(rf.commands.splitRight()).setIcon("lucide-separator-vertical").onClick((function(){return i.workspace.duplicateLeaf(r,"vertical")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.commands.splitDown()).setIcon("lucide-separator-horizontal").onClick((function(){return i.workspace.duplicateLeaf(r,"horizontal")}))}))},t.prototype.onMoreOptionsMenu=function(e){},t}(yI),wI=function(e){function t(t){var n=e.call(this,t)||this;n.canDropAnywhere=!0,n.navigation=!0;var i=n.emptyStateEl=n.contentEl.createDiv("empty-state"),r=n.clickableAreaEl=i.createDiv("empty-state-container");return n.emptyTitleEl=r.createDiv({cls:"empty-state-title",text:rf.interface.emptyState.noFileOpen()},(function(e){e.createSpan("empty-state-close-button",(function(e){gb(e,"lucide-x"),e.addEventListener("click",(function(){n.leaf.detach()}))}))})),n.actionListEl=r.createDiv("empty-state-action-list"),n.app.dragManager.handleDrop(i,(function(e,t,r){var o=n.leaf.handleDrop(e,t,r);if(o)return o.hoverEl=i,o.hoverClass="is-highlighted",o})),n}return f(t,e),t.prototype.getDisplayText=function(){return rf.interface.labelNewTab()},t.prototype.getViewType=function(){return"empty"},t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){return t=(e=this).app,(n=e.actionListEl).empty(),i="file-explorer:new-file",r="",Lt.isMobile||(o=t.hotkeyManager.printHotkeyForCommand(i))&&(r=" (".concat(o,")")),n.createDiv({cls:"empty-state-action",text:rf.interface.emptyState.createNewFile()+r},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(i,e)}))})),t.vault.isEmpty()||(a="switcher:open",s="",Lt.isMobile||(l=t.hotkeyManager.printHotkeyForCommand(a))&&(s=" (".concat(l,")")),n.createDiv({cls:"empty-state-action",text:rf.interface.emptyState.goToFile()+s},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(a,e)}))})),n.createDiv({cls:"empty-state-action",text:rf.interface.emptyState.seeRecentFiles()+s},(function(e){e.addEventListener("click",(function(e){t.commands.executeCommandById(a,e)}))}))),n.createDiv({cls:"empty-state-action mod-close",text:rf.interface.emptyState.close()},(function(e){e.addEventListener("click",(function(){c.leaf.detach()}))})),[2]}))}))},t}(bI),kI=createDiv("notice-container"),CI=function(){function e(e,t){void 0===t&&(t=4e3);var n=this;activeDocument.body.appendChild(kI);var i=this.noticeEl=kI.createDiv({cls:"notice",text:e});Lt.isMobile?Ie(i,(new Te).addProp("marginBottom",-i.offsetHeight+"px","0","")):Ie(i,(new Te).addProp("transform","translateX(350px)","","")),t&&setTimeout((function(){return n.hide()}),t),i.addEventListener("click",(function(){return n.hide()}))}return e.prototype.setMessage=function(e){return this.noticeEl.setText(e),this},e.prototype.hide=function(){var e=this;setTimeout((function(){var t=e.noticeEl;if(Lt.isMobile)Ie(t,(new Te).addProp("opacity",null,"0",""),(function(){t.detach(),0===kI.childElementCount&&kI.detach()}));else{var n=getComputedStyle(t),i=-(t.offsetHeight+parseInt(n.marginBottom))+"px";Ie(t,(new Te).addProp("marginTop","0",i,""),(function(){t.detach(),0===kI.childElementCount&&kI.detach()}))}}))},e}();window.Notice=CI;var EI=function(e){function t(t){var n=e.call(this,t)||this;return n.allowNoFile=!1,n.navigation=!0,n}return f(t,e),t.prototype.renderBreadcrumbs=function(){var e,t,n=this;this.titleParentEl.empty();var i=null===(t=null===(e=this.file)||void 0===e?void 0:e.parent)||void 0===t?void 0:t.path;if(i&&"/"!==i)for(var r=i.split("/"),o=function(e){var t=r.slice(0,e+1).join("/"),i=r[e];a.titleParentEl.createSpan({cls:"view-header-breadcrumb",text:i}).addEventListener("click",(function(){var e=n.app.internalPlugins.getEnabledPluginById("file-explorer");if(e){var i=n.app.vault.getAbstractFileByPath(he(t));i&&e.revealInFolder(i)}})),a.titleParentEl.createSpan({cls:"view-header-breadcrumb-separator",text:"/"})},a=this,s=0;s<r.length;s++)o(s)},t.prototype.getDisplayText=function(){return this.file?this.file.basename:rf.interface.noFile()},t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("rename",this.onRename.bind(this))),this.registerEvent(t.on("delete",this.onDelete.bind(this)))},t.prototype.getState=function(){var t=e.prototype.getState.call(this),n=this.file;return n&&(t.file=n.path),t},t.prototype.getSyncViewState=function(){var e=this.getState();return e.sync=!0,{state:e,eState:this.getEphemeralState(),active:!1}},t.prototype.syncState=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:if(t=this.leaf,n=t.workspace,i=t.group,r=!0,!i)return[3,5];o=this.getSyncViewState(),a=n.getGroupLeaves(i),s=0,l=a,u.label=1;case 1:return s<l.length?(c=l[s])===t?[3,4]:e||c.view.getViewType()===this.getViewType()?c.working?(r=!1,[3,4]):[3,2]:[3,4]:[3,5];case 2:return[4,c.openFile(this.file,o)];case 3:u.sent(),u.label=4;case 4:return s++,[3,1];case 5:return[2,r]}}))}))},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r,o=this;return y(this,(function(a){switch(a.label){case 0:return i=!1,t.hasOwnProperty("file")?(r=this.app.vault.getAbstractFileByPath(t.file))instanceof Xy?[4,this.loadFile(r)]:[3,2]:[3,4];case 1:return i=a.sent(),[3,4];case 2:return[4,this.loadFile(null)];case 3:i=a.sent(),a.label=4;case 4:return this.file||this.allowNoFile||(n.close=!0),i&&(n.layout=!0,n.history=!0),[4,e.prototype.setState.call(this,t,n)];case 5:return a.sent(),t.sync||!n.layout&&!n.history||(n.done=function(){return o.syncState(!0)}),[2]}}))}))},t.prototype.onClose=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return this.contentEl.empty(),[4,this.loadFile(null)];case 1:return e.sent(),[2]}}))}))},t.prototype.loadFile=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return(t=this.file)===e?[2,!1]:t?[4,this.onUnloadFile(t)]:[3,2];case 1:o.sent(),o.label=2;case 2:if(this.file=null,!e)return[3,6];o.label=3;case 3:return o.trys.push([3,5,,6]),this.file=e,[4,this.onLoadFile(e)];case 4:return o.sent(),[3,6];case 5:return n=o.sent(),this.file=null,new CI('Failed to load "'.concat(e.path,'". ').concat(n.message)),console.error(n),[3,6];case 6:return this.renderBreadcrumbs(),this.titleEl.setText(this.getDisplayText()),i=this.leaf,(r=i.workspace).activeLeaf===i&&r.requestActiveLeafEvents(),this.leaf.updateHeader(),[2,!0]}}))}))},t.prototype.onLoadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onUnloadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},t.prototype.onRename=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return e===this.file&&(this.renderBreadcrumbs(),this.titleEl.setText(e.basename),this.app.workspace.onLayoutChange(),this.leaf.updateHeader()),[2]}))}))},t.prototype.onDelete=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e!==this.file?[3,8]:this.allowNoFile?[4,this.loadFile(null)]:[3,2];case 1:return n.sent(),[3,7];case 2:return(t=this.leaf).history.backHistory.length>0?[4,t.history.back()]:[3,4];case 3:return n.sent(),[3,6];case 4:return[4,t.open(null)];case 5:n.sent(),n.label=6;case 6:this.leaf.view instanceof wI&&t.parent.children.length>1&&t.detach(),n.label=7;case 7:this.app.workspace.onLayoutChange(),n.label=8;case 8:return[2]}}))}))},t.prototype.canAcceptExtension=function(e){return!1},t}(bI);function xI(e,t){iS(e,t,{classes:["mod-wide","mod-error"]})}var SI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fileBeingRenamed=null,t}return f(t,e),t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t);var n=t.rename;if(n){var i=void 0;"start"===n?i=!0:"end"===n&&(i=!1),this.titleEl.isShown()?(Lt.isMobileApp&&(this.titleEl.contentEditable="true"),bb(this.titleEl,i)):this.app.fileManager.promptForFileRename(this.file)}},t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){var e,t=this;return y(this,(function(n){return(e=this.titleEl).tabIndex=-1,Lt.isMobileApp?e.addEventListener("touchstart",(function(){e.contentEditable="true"})):e.contentEditable="true",e.addEventListener("focus",this.onTitleFocus.bind(this)),e.addEventListener("blur",this.onTitleBlur.bind(this)),e.addEventListener("input",(function(){return t.onTitleChange(e)})),e.addEventListener("paste",(function(n){return t.onTitlePaste(e,n)})),e.addEventListener("keydown",this.onTitleKeydown.bind(this)),[2]}))}))},t.prototype.onTitleFocus=function(){var e=this;this.fileBeingRenamed=this.file,this.titleEl.spellcheck=this.app.vault.getConfig("spellcheck"),Ie(this.titleParentEl,new Te({duration:150}).addProp("opacity","1","0","0").addProp("width",this.titleParentEl.clientWidth+"px","0",""),(function(){return e.titleParentEl.detach()}))},t.prototype.onTitleBlur=function(){return v(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:return e=this.titleEl,(t=e.doc.getSelection()).rangeCount>0&&(n=t.getRangeAt(0),i=n.commonAncestorContainer,(e===i||e.contains(i))&&t.removeRange(n)),[4,this.saveTitle(this.titleEl)];case 1:return r.sent()||e.setText(this.file.basename),rS(),this.fileBeingRenamed=null,this.titleEl.spellcheck=!1,Lt.isMobileApp&&(e.contentEditable="false"),this.titleContainerEl.prepend(this.titleParentEl),Ie(this.titleParentEl,new Te({duration:150}).addProp("opacity","0","1","").addProp("width","0",this.titleParentEl.clientWidth+"px","")),this.titleEl.scrollTo({left:0}),[2]}}))}))},t.prototype.onTitlePaste=function(e,t){tw(e,t)},t.prototype.onTitleChange=function(e){var t=this.file;ew(e);var n=e.getText().trim(),i=mI(this.app,t,n,!1);i?xI(e,i):rS()},t.prototype.onTitleKeydown=function(e){var t=this;if(!e.isComposing){var n=function(){i.blur(),t.setEphemeralState({focus:!0,focusOnMobile:i!==t.titleEl})},i=e.targetNode;if("Escape"===e.key&&(e.preventDefault(),this.fileBeingRenamed=null,i.setText(this.file.basename),n()),"Enter"===e.key||"Tab"===e.key)e.preventDefault(),v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.saveTitle(i)];case 1:return e.sent()&&n(),[2]}}))}));else if("ArrowDown"===e.key){var r=i.win.getSelection();if(r&&r.rangeCount>=1&&i.instanceOf(HTMLElement)){var o=r.getRangeAt(0);if(i===o.startContainer||i.contains(o.startContainer)){var a=o.getBoundingClientRect();a.bottom+a.height/2>=i.getBoundingClientRect().bottom&&(e.preventDefault(),i.blur(),i.win.getSelection().empty(),this.setEphemeralState({focus:!0,focusMetadata:!e.altKey}))}}}}},t.prototype.saveTitle=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(n=(t=this).file,i=t.fileBeingRenamed,n!==i||n.deleted)return[2,!0];if(r=e.getText().trim(),o=mI(this.app,n,r,!0))return xI(e,o),[2,!1];if(a=n.getNewPathAfterRename(r),n.path===a)return[2,!0];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(n,a)];case 2:return c.sent(),[3,4];case 3:return(s=c.sent())&&(l=s.message||s.code||s.toString(),xI(e,l)),[2,!1];case 4:return[2,!0]}}))}))},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n);var r=this.file;r&&(t.addItem((function(e){return e.setSection("action").setTitle(rf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return i.app.fileManager.promptForFileRename(r)}))})),t.addItem((function(e){return e.setSection("danger").setTitle(rf.interface.menu.deleteFile()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){return i.app.fileManager.promptForFileDeletion(r)}))})),this.app.workspace.trigger("file-menu",t,r,n,this.leaf))},t}(EI),MI="audio",TI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="lucide-file-audio",t}return f(t,e),t.prototype.getViewType=function(){return MI},t.prototype.canAcceptExtension=function(e){return dM.contains(e)},t.prototype.onLoadFile=function(e){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,xt(r=n.contentEl),r.empty(),o=r.createDiv("audio-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,ht(n,i)]}))}))},t.VIEW_TYPE=MI,t}(SI),DI="image",AI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="lucide-image",t}return f(t,e),t.prototype.getViewType=function(){return DI},t.prototype.canAcceptExtension=function(e){return pM.contains(e)},t.prototype.onLoadFile=function(e){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,(r=n.contentEl).empty(),o=r.createDiv("image-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,ct(n,i)]}))}))},t.VIEW_TYPE=DI,t}(SI),LI=function(){function e(e){var t=this;this.shouldRestoreSelection=!0,this.selection=null,this.win=null,this.dimBackground=!0,this.bgOpacity="0.85",this.app=e,this.scope=new cw,this.scope.register([],"Escape",this.onEscapeKey.bind(this)),this.onWindowClose=this.onWindowClose.bind(this),this.containerEl=createDiv("modal-container");var n=this.bgEl=this.containerEl.createDiv("modal-bg");this.modalEl=this.containerEl.createDiv("modal");var i=this.modalEl.createDiv("modal-close-button");if(this.titleEl=this.modalEl.createDiv("modal-title"),this.contentEl=this.modalEl.createDiv("modal-content"),this.scope.setTabFocusContainerEl(this.containerEl),i.addEventListener("click",this.close.bind(this)),Lt.isDesktopApp&&Lt.isMacOS){var r=null,o=null;n.addEventListener("click",(function(e){Math.hypot(e.screenX-r,e.screenY-o)<5&&t.close()})),Lt.isMacOS&&n.addEventListener("mousedown",(function(e){r=e.screenX,o=e.screenY}))}else n.addEventListener("click",this.close.bind(this));Lt.isMobile&&Qy(this.titleEl,(function(e){if(1===e.points&&"y"===e.direction){var n=t,i=n.modalEl,r=n.bgEl;e.registerCallback({move:function(n,r){var o=i.offsetHeight,a=Math.clamp((r-e.startY)/o,0,1);i.style.transform="translateY(".concat(a*o,"px)"),t.bgEl.style.opacity=String(1-a)},cancel:function(){i.style.transform="",r.style.opacity=""},finish:function(n,o,a){var s,l=i.offsetHeight,c=Math.clamp((o-e.startY)/l,0,1);a<l/2?(Ie(i,new Te({duration:200*(s=c)}).addProp("transform",null,"translateY(0)","")),Ie(r,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"1",""))):(Ie(i,new Te({duration:100*(s=1-c),fn:"ease-out"}).addProp("transform",null,"translateY(".concat(l,"px)"),""),(function(){t.close()})),Ie(r,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"0")))}})}}))}return e.prototype.open=function(){var e=this.app,t=this.containerEl;if(!t.parentNode){var n=this.win=activeWindow;this.shouldRestoreSelection?this.selection=function(e){e||(e=window);var t=e.getSelection();if(!t)return null;var n=e.document.activeElement;if(n===e.document.body&&(n=null),"IFRAME"===(null==n?void 0:n.tagName)){var i=n;i.contentDocument&&(n=i.contentDocument.activeElement)}var r=null;if(n&&t.rangeCount>0){var o=t.getRangeAt(0),a=o.commonAncestorContainer;(n===a||n.contains(a))&&(r=o)}return{win:e,range:r,focusEl:n}}(n):this.selection=null;var i=n.document.activeElement;i&&i.instanceOf(HTMLElement)&&i.blur(),n.getSelection().removeAllRanges(),e.keymap.pushScope(this.scope),n.document.body.appendChild(t),Lt.isPhone&&Le(this.modalEl),this.onOpen();var r=this,o=r.modalEl,a=r.bgEl,s=r.dimBackground;t.toggleClass("mod-dim",s),Lt.isPhone?function(e,t,n){void 0===n&&(n="0.85");var i=e.offsetHeight-1,r=.3*i;Ie(e,new Te({duration:r,fn:"ease-out"}).addProp("transform","translateY(".concat(i,"px)"),"")),t&&Ie(t,new Te({duration:r,fn:"ease-in"}).addProp("opacity","0",n))}(o,a,this.bgOpacity):a.style.opacity=s?this.bgOpacity:"0",eb(this),Lt.isMobile||Ub(o),n!==window&&n.addEventListener("beforeunload",this.onWindowClose)}},e.prototype.close=function(){var e=this,t=this,n=t.app,i=t.win,r=t.containerEl;n.keymap.popScope(this.scope);var o=this.modalEl,a=this.bgEl;Lt.isPhone?function(e,t){return new Promise((function(n){var i=e.offsetHeight-1,r=.3*i;Ie(e,new Te({duration:r,fn:"ease-in"}).addProp("transform","","translateY(".concat(i,"px)"),""),(function(){n(null)})),Ie(t,new Te({duration:r,fn:"ease-in"}).addProp("opacity",null,"0",""))}))}(o,a).then((function(){r.detach(),e.onClose()})):(r.detach(),this.onClose()),tb(this),this.shouldRestoreSelection&&function(e){if(e&&(e.focusEl||e.range)){var t=e.win,n=e.focusEl,i=e.range;t.focus();var r=n&&n.instanceOf(HTMLElement)&&n.hasClass("cm-content");if(i&&!r&&kb(t,i.startContainer)&&kb(t,i.endContainer)){var o=t.getSelection();o&&(o.removeAllRanges(),o.addRange(i))}n&&(n.instanceOf(HTMLElement)||n.instanceOf(SVGElement))&&kb(t,n)&&n.focus({preventScroll:!0})}}(this.selection),i&&i!==window&&i.removeEventListener("beforeunload",this.onWindowClose),this.win=null},e.prototype.onOpen=function(){},e.prototype.onClose=function(){},e.prototype.onWindowClose=function(){this.close()},e.prototype.onEscapeKey=function(){this.close()},e.prototype.setTitle=function(e){return this.titleEl.setText(e),this},e.prototype.setContent=function(e){return String.isString(e)?this.contentEl.setText(e):this.contentEl.appendChild(e),this},e.prototype.setBackgroundOpacity=function(e){return this.bgOpacity=e,this},e.prototype.setDimBackground=function(e){return this.dimBackground=e,this},e}(),PI=function(e){function t(t){var n=e.call(this,t)||this;return n.buttonContainerEl=null,n.containerEl.addClass("mod-confirmation"),n.buttonContainerEl=n.modalEl.createDiv("modal-button-container"),n}return f(t,e),t.prototype.addCheckbox=function(e,t){return this.buttonContainerEl.createEl("label",{cls:"mod-checkbox"},(function(n){n.createEl("input",{attr:{tabindex:-1},type:"checkbox"}).addEventListener("click",t),n.appendText(e)})),this},t.prototype.addButton=function(e,t,n){var i=this,r=Array.isArray(e)?e:[e];return this.buttonContainerEl.createEl("button",{cls:r.join(" "),text:t}).addEventListener("click",(function(e){return v(i,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n(e)];case 1:return t.sent()||this.close(),[2]}}))}))})),this},t.prototype.addCancelButton=function(e){var t=this;return this.addButton("",rf.dialogue.buttonCancel(),(function(){t.close(),e&&e()}))},t.prototype.onClose=function(){rS()},t}(LI),II={enableScripting:!1,externalLinkTarget:2,imageResourcesPath:"/lib/pdfjs/images/",maxCanvasPixels:16777216,pdfBugEnabled:!1,sidebarViewOnLoad:0,viewerCssTheme:0,disablePreferences:!1,disableHistory:!0,verbosity:0,defaultZoomValue:"page-width",cMapPacked:!0,cMapUrl:"/lib/pdfjs/cmaps/",standardFontDataUrl:"/lib/pdfjs/standard_fonts/",workerSrc:"/lib/pdfjs/pdf.worker.min.js",defaultUrl:"",disableTelemetry:!0},OI=function(e){return 255&parseInt(e)},FI=/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*[\d.]+\s*)?\)$/i,BI=/^hsla?\s*\(\s*([\d.]+)(deg|rad|grad|turn)?\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%\s*(,\s*[\d.]+\s*)?\)$/i,NI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function RI(e){var t=e.match(FI);return t?{r:OI(t[1]),g:OI(t[2]),b:OI(t[3]),a:t[4]?Math.clamp(parseFloat(t[4].substring(1)),0,1):1}:null}function HI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function VI(e){var t,n,i,r=e.h,o=e.s,a=e.l;if(r/=360,a/=100,0==(o/=100))t=n=i=a;else{var s=a<.5?a*(1+o):a+o-a*o,l=2*a-s;t=HI(l,s,r+1/3),n=HI(l,s,r),i=HI(l,s,r-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*i)}}function zI(e){var t=e.r,n=e.g,i=e.b;t/=255,n/=255,i/=255;var r,o,a=Math.max(t,n,i),s=Math.min(t,n,i),l=(a+s)/2;if(a==s)r=o=0;else{var c=a-s;switch(o=l>.5?c/(2-a-s):c/(a+s),a){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return{h:Math.round(360*r),s:Math.round(100*o),l:Math.round(100*l)}}function qI(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function UI(e){var t=e.r,n=e.g,i=e.b;return"#"+qI(t)+qI(n)+qI(i)}function WI(e){var t=NI.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function _I(e){return e.r<<16|e.g<<8|e.b}function jI(e){var t=document.body.createDiv();t.style.color="var(".concat(e,")");var n=getComputedStyle(t).color;return t.detach(),RI(n)}function GI(e){var t=WI(e);if(t)return t;if(t=RI(e))return t;var n=function(e){var t=e.match(BI);if(t){var n=t[1],i=t[2],r=parseFloat(n);return"rad"===i?r=180*r/Math.PI:"grad"===i?r*=.9:"turn"===i&&(r*=360),{h:r,s:OI(t[3]),l:OI(t[4]),a:t[5]?Math.clamp(parseFloat(t[5].substring(1)),0,1):1}}return null}(e);return n?VI(n):null}function KI(e){return(299*e.r+587*e.g+114*e.b)/1e3>=150}var YI=function(){function e(e){this.components=[];var t=this.settingEl=e.createDiv("setting-item"),n=this.infoEl=t.createDiv("setting-item-info");this.nameEl=n.createDiv("setting-item-name"),this.descEl=n.createDiv("setting-item-description"),this.controlEl=t.createDiv("setting-item-control")}return e.prototype.setName=function(e){return this.nameEl.setText(e),this},e.prototype.setDesc=function(e){return this.descEl.setText(e),this},e.prototype.setClass=function(e){return this.settingEl.addClass(e),this},e.prototype.setTooltip=function(e,t){return aS(this.nameEl,e,t),this},e.prototype.setHeading=function(){return this.settingEl.addClass("setting-item-heading"),this},e.prototype.setDisabled=function(e){this.settingEl.toggleClass("is-disabled",e);for(var t=0,n=this.components;t<n.length;t++){n[t].setDisabled(e)}return this},e.prototype.setNoInfo=function(){return this.infoEl.hide(),this},e.prototype.addButton=function(e){var t=new ZI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addExtraButton=function(e){var t=new QI(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addToggle=function(e){var t=new JI(this.controlEl);return this.components.push(t),e(t),this.settingEl.addClass("mod-toggle"),this},e.prototype.addText=function(e){var t=new tO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addSearch=function(e){var t=new nO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addTextArea=function(e){var t=new iO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addMomentFormat=function(e){var t=new rO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addDropdown=function(e){var t=new oO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addColorPicker=function(e){var t=new lO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addProgressBar=function(e){var t=new aO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.addSlider=function(e){var t=new sO(this.controlEl);return this.components.push(t),e(t),this},e.prototype.then=function(e){return e(this),this},e.prototype.clear=function(){return this.controlEl.empty(),this.components=[],this},e.prototype.setVisibility=function(e){return this.settingEl.toggle(e),this},e}(),XI=function(){function e(){this.disabled=!1}return e.prototype.then=function(e){return e(this),this},e.prototype.setDisabled=function(e){return this.disabled=e,this},e}(),$I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.registerOptionListener=function(e,t){var n=this;return e[t]=function(e){return void 0!==e&&n.setValue(e),n.getValue()},this},t}(XI),ZI=function(e){function t(t){var n=e.call(this)||this;return(n.buttonEl=t.createEl("button")).addEventListener("click",(function(e){var t=n.clickCallback;!n.disabled&&t&&t(e)})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.buttonEl.disabled=t,this},t.prototype.setCta=function(){return this.buttonEl.addClass("mod-cta"),this},t.prototype.removeCta=function(){return this.buttonEl.removeClass("mod-cta"),this},t.prototype.setWarning=function(){return this.buttonEl.addClass("mod-warning"),this},t.prototype.setTooltip=function(e,t){return aS(this.buttonEl,e,t),this},t.prototype.setButtonText=function(e){return this.buttonEl.setText(e),this},t.prototype.setIcon=function(e){return gb(this.buttonEl,e),this},t.prototype.setClass=function(e){return this.buttonEl.addClass(e),this},t.prototype.onClick=function(e){return this.clickCallback=e,this},t}(XI),QI=function(e){function t(t){var n=e.call(this)||this,i=n.extraSettingsEl=t.createDiv("clickable-icon setting-editor-extra-setting-button");return gb(i,"lucide-settings"),i.addEventListener("click",(function(){var e=n.changeCallback;!n.disabled&&e&&e()})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.extraSettingsEl.toggleClass("is-disabled",t),this},t.prototype.setTooltip=function(e,t){return aS(this.extraSettingsEl,e,t),this},t.prototype.setIcon=function(e){return gb(this.extraSettingsEl,e),this},t.prototype.onClick=function(e){return this.changeCallback=e,this},t}(XI),JI=function(e){function t(t){var n=e.call(this)||this;return n.on=!1,(n.toggleEl=t.createDiv("checkbox-container",(function(e){e.createEl("input",{attr:{type:"checkbox",tabIndex:0}})}))).addEventListener("click",n.onClick.bind(n)),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.toggleEl.toggleClass("is-disabled",t),this},t.prototype.getValue=function(){return this.on},t.prototype.setValue=function(e){var t;return this.on=e,this.toggleEl.toggleClass("is-enabled",e),null===(t=this.changeCallback)||void 0===t||t.call(this,e),this},t.prototype.setSmall=function(){return this.toggleEl.addClass("mod-small"),this},t.prototype.setTooltip=function(e,t){return aS(this.toggleEl,e,t),this},t.prototype.onClick=function(){this.disabled||this.setValue(!this.getValue())},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}($I),eO=function(e){function t(t){var n=e.call(this)||this;return n.inputEl=t,t.addEventListener("input",n.onChanged.bind(n)),t.setAttribute("spellcheck","false"),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.inputEl.disabled=t,this},t.prototype.getValue=function(){return this.inputEl.value},t.prototype.setValue=function(e){return String.isString(e)&&(this.inputEl.value=e),this},t.prototype.setPlaceholder=function(e){return this.inputEl.setAttribute("placeholder",e),this},t.prototype.onChanged=function(){var e=this.changeCallback;e&&e(this.inputEl.value)},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}($I),tO=function(e){function t(t){return e.call(this,t.createEl("input",{type:"text"}))||this}return f(t,e),t}(eO),nO=function(e){function t(t){var n=this,i=t.createDiv("search-input-container"),r=i.createEl("input",{type:"search",attr:{enterkeyhint:"search"}});return(n=e.call(this,r)||this).containerEl=i,n.clearButtonEl=i.createDiv("search-input-clear-button",(function(e){e.addEventListener("click",(function(){n.disabled||(r.value="",r.focus(),n.onChanged())}))})),n}return f(t,e),t.prototype.onChanged=function(){e.prototype.onChanged.call(this)},t.prototype.setValue=function(t){return e.prototype.setValue.call(this,t)},t.prototype.setClass=function(e){return this.containerEl.addClass(e),this},t.prototype.addRightDecorator=function(e){return e(this.containerEl.createDiv("input-right-decorator")),this},t}(eO),iO=function(e){function t(t){return e.call(this,t.createEl("textarea"))||this}return f(t,e),t}(eO),rO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.setDefaultFormat=function(e){return this.defaultFormat=e,this.setPlaceholder(e),this.updateSample(),this},t.prototype.setSampleEl=function(e){return this.sampleEl=e,this.updateSample(),this},t.prototype.setValue=function(t){return e.prototype.setValue.call(this,t),this.updateSample(),this},t.prototype.onChanged=function(){e.prototype.onChanged.call(this),this.updateSample()},t.prototype.updateSample=function(){var e=this.sampleEl;if(e){var t=this.inputEl.value||this.defaultFormat;if(t){var n=window.moment().format(t);e.setText(n)}else e.setText("")}},t}(tO),oO=function(e){function t(t){var n=e.call(this)||this;return n.selectEl=t.createEl("select","dropdown"),n.selectEl.addEventListener("change",(function(){var e=n.changeCallback;e&&e(n.getValue())})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.selectEl.disabled=t,this},t.prototype.addOption=function(e,t){return this.selectEl.createEl("option",{value:e,text:t}),this},t.prototype.addOptions=function(e){for(var t in e)e.hasOwnProperty(t)&&this.selectEl.createEl("option",{value:t,text:e[t]});return this},t.prototype.getValue=function(){return this.selectEl.value},t.prototype.setValue=function(e){return this.selectEl.value=e,this},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}($I),aO=function(e){function t(t){var n=e.call(this)||this;return t.createDiv("setting-progress-bar",(function(e){n.lineEl=e.createDiv("setting-progress-bar-inner")})),n}return f(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){return e=Math.clamp(e,0,100),this.value=e,this.lineEl.style.width="".concat(e,"%"),this},t}($I),sO=function(e){function t(t){var n=e.call(this)||this;n.dynamicTooltip=!1;var i=n.sliderEl=t.createEl("input",{type:"range",cls:"slider"});return i.addEventListener("input",(function(){var e=n.changeCallback;e&&e(n.getValue()),n.dynamicTooltip&&n.showTooltip()})),i.addEventListener("click",(function(e){e.stopPropagation()})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.sliderEl.disabled=t,this},t.prototype.setLimits=function(e,t,n){return this.sliderEl.setAttrs({min:e,max:t,step:n}),this},t.prototype.getValue=function(){return this.sliderEl.valueAsNumber},t.prototype.setValue=function(e){this.sliderEl.valueAsNumber=e;var t=this.changeCallback;return t&&t(e),this},t.prototype.getValuePretty=function(){var e=this.sliderEl,t=this.getValue();return"any"===e.step||parseFloat(e.step)<1?t.toFixed(2):t.toString()},t.prototype.setDynamicTooltip=function(){var e=this.sliderEl;return e.addEventListener("mouseenter",this.showTooltip.bind(this)),e.addEventListener("mouseleave",rS),this.dynamicTooltip=!0,this},t.prototype.showTooltip=function(){iS(this.sliderEl,this.getValuePretty(),{placement:"top"})},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}($I),lO=function(e){function t(t){var n=e.call(this)||this;return n.colorPickerEl=t.createEl("input",{type:"color"}),n.colorPickerEl.addEventListener("change",(function(){var e=n.changeCallback;e&&e(n.getValue())})),n}return f(t,e),t.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.colorPickerEl.disabled=t,this},t.prototype.getValue=function(){return this.colorPickerEl.value},t.prototype.getValueRgb=function(){return WI(this.getValue())||{r:0,g:0,b:0}},t.prototype.getValueHsl=function(){return zI(this.getValueRgb())},t.prototype.getValueInt=function(){return parseInt(this.getValue().slice(1),16)},t.prototype.setValue=function(e){this.colorPickerEl.value=e;var t=this.changeCallback;return t&&t(this.getValue()),this},t.prototype.setValueRgb=function(e){return this.setValue(UI(e))},t.prototype.setValueHsl=function(e){return this.setValueRgb(VI(e))},t.prototype.setValueInt=function(e){return this.setValue("#"+e.toString(16).padStart(6,"0"))},t.prototype.onChange=function(e){return this.changeCallback=e,this},t}($I),cO=rf.pdf,uO=rf.plugins.search,hO=rf.editor.search,pO="pdfjs-search-settings",dO=function(){function e(e,t,n,i){var r=this;this.opened=!1,this.searchSettings={highlightAll:!1,caseSensitive:!1,matchDiacritics:!1,entireWord:!1},this.clickOutsideHandler=function(e){var t=r,n=t.settingsToggleEl,i=t.settingsEl;e.target===i||e.target===n||i.contains(e.target)||(r.toggleSettings(!1),i.win.removeEventListener("click",r.clickOutsideHandler))},this.keyHandlers=null,this.app=e,this.containerEl=t,this.eventBus=n,this.scope=i;var o=e.loadLocalStorage(pO);if(o)try{this.searchSettings=JSON.parse(o)}catch(e){}var a=this.barEl=t.createDiv("pdf-findbar pdf-toolbar mod-hidden"),s=this.searchSettings;a.createDiv("pdf-search-wrapper",(function(e){e.createDiv({cls:"pdf-findbar-message",attr:{"aria-live":"polite"}},(function(e){r.findResultsCountEl=e.createSpan("pdf-toolbar-label pdf-find-results-count")})),new nO(e).setPlaceholder(uO.promptStartSearch()).setClass("global-search-input-container").addRightDecorator((function(e){aS(e,uO.labelMatchCase()),gb(e,"uppercase-lowercase-a"),e.addClass("clickable-icon"),e.addEventListener("click",(function(){s.caseSensitive=!s.caseSensitive,r.saveSettings(),r.dispatchEvent("casesensitivitychange"),e.toggleClass("is-active",s.caseSensitive)})),e.toggleClass("is-active",s.caseSensitive)})).onChange(rt((function(){return r.dispatchEvent("")}),250,!0)).then((function(e){aS(e.clearButtonEl,uO.tooltipClearSearch()),r.searchComponent=e,e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"===e.key&&(Lt.isMobile&&wb(),r.dispatchEvent("again",e.shiftKey))}))})),r.findPreviousButtonEl=e.createEl("button",{cls:"pdf-toolbar-button",text:hO.labelPrevious()},(function(e){aS(e,XT(Lt.isMacOS?KT(["Mod","Shift"],"G"):KT(["Shift"],"F3")),{placement:"top"}),e.addEventListener("click",(function(){r.dispatchEvent("again",!0)}))})),r.findNextButtonEl=e.createEl("button",{cls:"pdf-toolbar-button",text:hO.labelNext()},(function(e){aS(e,XT(Lt.isMacOS?KT(["Mod"],"G"):KT([],"F3")),{placement:"top"}),e.addEventListener("click",(function(){r.dispatchEvent("again",!1)}))})),e.createDiv("clickable-icon pdf-findbar-settings-btn",(function(e){aS(e,uO.labelToggleSearchSettings()),gb(e,"lucide-sliders-horizontal"),r.settingsToggleEl=e,e.addEventListener("click",(function(){r.toggleSettings()}))})),e.createDiv("pdf-toolbar-divider"),e.createDiv("clickable-icon",(function(e){aS(e,rf.interface.emptyState.close()),gb(e,"lucide-x"),e.addEventListener("click",(function(){r.close()}))}))})),this.settingsEl=createDiv("pdf-findbar-settings",(function(e){new YI(e).setName(cO.actionHighlightAll()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.highlightAll).onChange((function(e){s.highlightAll=e,r.saveSettings(),r.dispatchEvent("highlightallchange")}))})),new YI(e).setName(cO.actionMatchDiacritics()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.matchDiacritics).onChange((function(e){s.matchDiacritics=e,r.saveSettings(),r.dispatchEvent("diacriticmatchingchange")}))})),new YI(e).setName(cO.actionWholeWords()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(s.entireWord).onChange((function(e){s.entireWord=e,r.saveSettings(),r.dispatchEvent("entirewordchange")}))}))}))}return e.prototype.toggleSettings=function(e){var t=this,n=this.settingsToggleEl,i=this.settingsEl;if(!1===e||i.isShown())return n.removeClass("is-active"),i.win.removeEventListener("click",this.clickOutsideHandler),void i.detach();var r=n.offsetLeft,o=n.offsetTop,a=n.clientHeight,s=n.clientWidth;n.addClass("is-active"),i.setCssProps({top:"".concat(o+a+6,"px"),left:"".concat(r+s,"px")}),this.containerEl.append(i),setTimeout((function(){i.win.addEventListener("click",t.clickOutsideHandler)}))},e.prototype.saveSettings=function(){try{this.app.saveLocalStorage(pO,JSON.stringify(this.searchSettings))}catch(e){console.error("Error saving PDF search settings",e)}},e.prototype.reset=function(){this.updateUIState()},e.prototype.dispatchEvent=function(e,t){void 0===t&&(t=!1);var n=this.searchComponent,i=this.searchSettings;this.eventBus.dispatch("find",g({source:this,type:e,query:n.inputEl.value,findPrevious:t},i))},e.prototype.updateUIState=function(e,t,n){var i=this.searchComponent,r=i.inputEl,o=i.containerEl,a="";switch(o.removeClasses(["mod-pending","mod-not-found"]),e){case pdfjsViewer.FindState.PENDING:a="mod-pending";break;case pdfjsViewer.FindState.NOT_FOUND:a="mod-not-found"}a&&o.addClass(a),r.setAttribute("aria-invalid",String(e===pdfjsViewer.FindState.NOT_FOUND)),this.updateResultsCount(n)},e.prototype.updateResultsCount=function(e){var t=e||{current:0,total:0},n=t.current,i=t.total,r="";i>0&&(r=i>1e3?cO.msgMaxSearchResults({current:n,limit:1e3}):i>1?cO.msgSearchCount_plural({current:n,total:i}):cO.msgSearchCount({current:n,total:i})),this.findResultsCountEl.textContent=r},e.prototype.showSearch=function(){var e=this.searchComponent.inputEl;this.opened&&e.doc.activeElement!==e?(e.focus(),e.select()):this.toggle()},e.prototype.open=function(){var e=this,t=this,n=t.barEl,i=t.searchComponent,r=t.eventBus,o=t.scope;this.opened||(this.opened=!0,n.removeClass("mod-hidden"),n.parentElement.addClass("findbarOpen"),n.parentElement.setCssProps({"--findbar-height":"".concat(n.clientHeight,"px")})),i.inputEl.select(),i.inputEl.focus(),r.dispatch("findbaropen",{source:this}),this.keyHandlers=[o.register([],"F3",(function(){return e.dispatchEvent("again",!1)})),o.register(["Mod"],"G",(function(){return e.dispatchEvent("again",!1)})),o.register(["Shift"],"F3",(function(){return e.dispatchEvent("again",!0)})),o.register(["Mod","Shift"],"G",(function(){return e.dispatchEvent("again",!0)}))]},e.prototype.close=function(){var e=this,t=e.barEl,n=e.eventBus,i=e.scope,r=e.keyHandlers;if(this.opened){this.opened=!1,t.addClass("mod-hidden"),t.parentElement.removeClass("findbarOpen"),t.parentElement.setCssProps({"--findbar-height":""}),n.dispatch("findbarclose",{source:this});for(var o=0,a=r;o<a.length;o++){var s=a[o];i.unregister(s)}this.keyHandlers=null,this.toggleSettings(!1)}},e.prototype.toggle=function(){return this.opened?(this.close(),!1):(this.open(),!0)},e}(),fO=rf.pdf;var gO=function(){function e(){}return e.prototype.getLanguage=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return[2,localStorage.getItem(_d)]}))}))},e.prototype.getDirection=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return[2,"ltr"]}))}))},e.prototype.get=function(e,t,n){return void 0===t&&(t=null),v(this,void 0,void 0,(function(){return y(this,(function(i){return[2,fO[e](t)||n]}))}))},e.prototype.translate=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){for(t=function(e){return e?Array.from(e.querySelectorAll("*[data-l10n-id]")):[]}(e),n=0,i=t;n<i.length;n++)r=i[n],o=r.dataset,a=o.l10nId,s=o.l10nArgs?JSON.parse(o.l10nArgs):null,a&&s&&(s.attr?r.setAttr(s.attr,fO[a](s)):r.setText(fO[a](s)));return[2]}))}))},e}(),mO=function(){function e(e){void 0===e&&(e="div");var t=this;this.collapsible=!0,this.collapsed=!1;var n=this.el=createDiv("tree-item"),i=this.selfEl=this.el.createEl(e);i.addClass("tree-item-self"),i.addEventListener("click",(function(e){0!==e.button||e.defaultPrevented||t.onSelfClick(e)})),i.addEventListener("auxclick",(function(e){1!==e.button||e.defaultPrevented||t.onSelfClick(e)})),this.coverEl=this.selfEl;var r=this.collapseEl=i.createDiv({cls:"tree-item-icon collapse-icon"});gb(r,"right-triangle"),r.addEventListener("click",this.onCollapseClick.bind(this)),this.innerEl=i.createDiv("tree-item-inner"),this.childrenEl=n.createDiv("tree-item-children")}return e.prototype.onSelfClick=function(e){},e.prototype.onCollapseClick=function(e){0===e.button&&(e.preventDefault(),this.toggleCollapsed(!0))},e.prototype.toggleCollapsed=function(e){if(this.collapsible)return this.setCollapsed(!this.collapsed,e)},e.prototype.setCollapsed=function(e,t){if(this.collapsed!==e)return this.collapsed=e,this.updateCollapsed(t)},e.prototype.setCollapsible=function(e){var t=this.selfEl,n=this.collapseEl;this.collapsible=e,e?t.prepend(n):n.detach(),t.toggleClass("mod-collapsible",e)},e.prototype.setClickable=function(e){this.selfEl.toggleClass("is-clickable",e)},e.prototype.updateCollapsed=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=(t=this).el,i=t.childrenEl,r=t.collapsed,XM(n,r),[4,Ne(i,n,r,e)];case 1:return o.sent(),[2]}}))}))},e}(),vO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=null,t}return f(t,e),t.prototype.render=function(){var e=this.childrenEl,t=this.children;if(null!==t){e.setChildrenInPlace(t.map((function(e){return e.el})));for(var n=0,i=t;n<i.length;n++){i[n].render()}}else e.empty()},t}(mO),yO=function(){function e(e){this.children=[],this.childrenEl=e}return e.prototype.render=function(){var e=this.childrenEl,t=this.children;e.setChildrenInPlace(t.map((function(e){return e.el})));for(var n=0,i=t;n<i.length;n++){i[n].render()}},e.prototype.addRoot=function(e){this.children.push(e)},e.prototype.clear=function(){this.children=[],this.render()},e}(),bO=function(e){function t(t,n,i){var r=e.call(this)||this;return r.owner=t,r.item=n,r.parent=i,r.innerEl.setText(n.title),r.renderLabels(),r.selfEl.addEventListener("contextmenu",(function(e){e.defaultPrevented||r.owner.onItemContextMenu(r,e)})),r}return f(t,e),t.prototype.getExplicitDestination=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return void 0!==this.explicitDest?[2,this.explicitDest]:(e=this,[4,this.fetchExplicitDestination(this.owner.pdfDocument)]);case 1:return[2,e.explicitDest=t.sent()]}}))}))},t.prototype.getPageNumber=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return void 0!==this.pageNumber?[2,this.pageNumber]:(e=this,[4,this.fetchPageNumber(this.owner.pdfDocument)]);case 1:return[2,e.pageNumber=t.sent()]}}))}))},t.prototype.fetchExplicitDestination=function(e){var t;return v(this,void 0,Promise,(function(){var n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(i=(n=this).owner,r=n.item,"string"!=typeof(o=r.dest))return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,i.pdfDocument.getDestination(o)];case 2:return a=l.sent(),e!==i.pdfDocument?[2,null]:a&&Array.isArray(a)&&"number"==typeof(null===(t=a[0])||void 0===t?void 0:t.num)?[2,a]:[3,4];case 3:return s=l.sent(),console.error(s),[2,null];case 4:return[3,6];case 5:if(Array.isArray(o))return[2,o];l.label=6;case 6:return[2,null]}}))}))},t.prototype.fetchPageNumber=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=this.owner,[4,this.getExplicitDestination()];case 1:if(!(n=o.sent()))return[2,null];if(i=null,"object"!=typeof(r=n[0])||null===r)return[3,6];if(i=t.linkService._cachedPageNumber(r))return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,t.pdfDocument.getPageIndex(r)];case 3:return i=o.sent()+1,e!==t.pdfDocument?[2,null]:(t.linkService.cachePageRef(i,r),[3,5]);case 4:return o.sent(),[3,5];case 5:return[3,7];case 6:if(!Number.isInteger(r))return[2,null];i=r+1,o.label=7;case 7:return[2,i]}}))}))},t.prototype.getMarkdownLink=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.getExplicitDestination()];case 1:return e=a.sent(),[4,this.getPageNumber()];case 2:return t=a.sent(),e&&null!==t?(n="page=".concat(t),e[1]&&"XYZ"===e[1].name&&5===e.length&&null!==e[2]&&(i=[e[2]],null!==e[3]&&(i.push(e[3]),null!==e[4]&&i.push(e[4])),n+="&offset=".concat(i.join(","))),(r=this.item.title)&&(r=r.replace(/[\s\n\r]+/g," ")),[2,(o=this.owner.viewer).getMarkdownLink("#".concat(n),"".concat(o.file.basename,", ").concat(r))]):[2,null]}}))}))},t.prototype.renderLabels=function(){var e,t;return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return n=this.owner,[4,this.getPageNumber()];case 1:return i=a.sent(),n.outline&&null!==i?(r=null!==(e=n.pageLabels)&&void 0!==e?e:[],o=String(null!==(t=r[i-1])&&void 0!==t?t:i),this.selfEl.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:o}),[2]):[2]}}))}))},t.prototype.onSelfClick=function(e){e.defaultPrevented||this.owner.onItemClick(this)},t.prototype.render=function(){e.prototype.render.call(this);var t=this.children;this.setCollapsible(t&&t.length>0),this.setClickable(!0);var n=this.item,i=n.bold,r=n.italic;i&&(this.innerEl.style.fontWeight="bold"),r&&(this.innerEl.style.fontStyle="italic")},t.prototype.setActive=function(e){this.selfEl.toggleClass("mod-active",e)},t.prototype.reveal=function(){for(var e=this.parent;null!==e;)e.setCollapsed(!1,!1),e=e.parent;this.selfEl.scrollIntoView({block:"start"})},t}(vO),wO=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;return o.allItems=[],o.highlighted=null,o.pageLabels=null,o.viewer=t,o.eventBus=i,o.linkService=r,i._on("toggleoutlinetree",o.toggleAllTreeItems.bind(o)),i._on("currentoutlineitem",o.findCurrentOutlineItem.bind(o)),i._on("pagechanging",(function(e){o.currentPageNumber=e.pageNumber})),i._on("pagesloaded",(function(e){o.isPagesLoaded=!!e.pagesCount;var t=o.currentOutlineItemCapability;t&&!t.settled&&t.resolve(o.isPagesLoaded)})),i._on("sidebarviewchanged",(function(e){o.sidebarView=e.view})),o.reset(),o}return f(t,e),t.prototype.reset=function(){this.outline=null,this.pageNumberToDestHashCapability=null,this.currentPageNumber=1,this.isPagesLoaded=null,this.highlighted=null,this.allItems=[];var e=this.currentOutlineItemCapability;e&&!e.settled&&e.resolve(!1),e=null,this.clear()},t.prototype.recurseTree=function(e,t,n){if(void 0===n&&(n=null),!e.length)return[];for(var i=[],r=0,o=e;r<o.length;r++){var a=o[r],s=new bO(this,a,n);a.items.length&&s.setCollapsed(!0,!1),s.children=this.recurseTree(a.items,t,s),i.push(s),t.push(s)}return i},t.prototype.setPageNumber=function(e){this.currentPageNumber=e},t.prototype.renderTree=function(e){var t=e.outline,n=e.pdfDocument;if(this.outline&&(this.outline!==t?this.reset():this.clear()),this.outline=t||null,this.pdfDocument=n||null,t){for(var i=this.allItems=[],r=0,o=this.recurseTree(t,i);r<o.length;r++){var a=o[r];this.addRoot(a)}this.highlighted=null,this.render(),this.dispatchEvent(i.length)}else this.dispatchEvent(0)},t.prototype.dispatchEvent=function(e){var t=this.currentOutlineItemCapability=new pdfjsLib.PromiseCapability,n=this,i=n.pdfDocument,r=n.isPagesLoaded,o=n.eventBus;0===e||(null==i?void 0:i.loadingParams.disableAutoFetch)?t.resolve(!1):null!==r&&t.resolve(r),o.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:t.promise})},t.prototype.onItemClick=function(e){var t=this.highlighted,n=this.linkService,i=e.item,r=i.url,o=i.action,a=i.dest,s=i.setOCGState;e.item.dest?(t!==e&&(null==t||t.setActive(!1),e.setActive(!0),this.highlighted=e),r?activeWindow.open(pdfjsViewer.removeNullCharacters(r),"_blank"):o?n.executeNamedAction(o):s?n.executeSetOCGState(s):n.goToDestination(a)):e.children.length&&e.toggleCollapsed(!0)},t.prototype.onItemContextMenu=function(e,t){var n;return v(this,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return(null===(n=this.viewer.opts)||void 0===n?void 0:n.isEmbed)&&t.preventDefault(),[4,e.getMarkdownLink()];case 1:return(i=a.sent())?((r=e.item.title)&&(r=r.replace(/[\s\n\r]+/g," ")),o=r?rf.pdf.actionCopySectionLinkTitle({title:Id(r,40)}):rf.pdf.actionCopySectionLink(),(new fw).addItem((function(e){return e.setTitle(o).setIcon("lucide-copy").onClick((function(){t.view.navigator.clipboard.writeText(i)}))})).showAtMouseEvent(t),[2]):[2]}}))}))},t.prototype.toggleAllTreeItems=function(){var e,t=this.allItems;if(null===(e=this.allItems)||void 0===e?void 0:e.length)for(var n=t[0].collapsed,i=0,r=t;i<r.length;i++){r[i].setCollapsed(!n,!1)}},t.prototype.findCurrentOutlineItem=function(){var e;return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(!this.isPagesLoaded)throw new Error("findCurrentOutlineItem: All pages have not been loaded.");return this.outline&&this.pdfDocument?[4,this.getPageNumberToDestHash(this.pdfDocument)]:[2];case 1:if(!(t=l.sent()))return[2];if(null===(e=this.highlighted)||void 0===e||e.setActive(!1),this.highlighted=null,2!==this.sidebarView)return[2];for(n=this.currentPageNumber;n>0;n--)if(i=t.get(n))for(r=0,o=this.allItems;r<o.length;r++)if(a=o[r],(s=a.item.dest)&&this.linkService.getDestinationHash(s)===i)return a.setActive(!0),a.reveal(),this.highlighted=a,[2];return[2]}}))}))},t.prototype.getPageNumberToDestHash=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(this.pageNumberToDestHashCapability)return[2,this.pageNumberToDestHashCapability.promise];t=this.pageNumberToDestHashCapability=new pdfjsLib.PromiseCapability,n=new Map,i=0,r=this.allItems,c.label=1;case 1:return i<r.length?[4,(o=r[i]).getExplicitDestination()]:[3,5];case 2:return a=c.sent(),[4,o.getPageNumber()];case 3:if(s=c.sent(),e!==this.pdfDocument)return[2,null];l=this.linkService.getDestinationHash(a),n.set(s,l),c.label=4;case 4:return i++,[3,1];case 5:return t.resolve(n.size>0?n:null),[2,t.promise]}}))}))},t.prototype.setPageLabels=function(e){this.pageLabels=e||null,this.pdfDocument&&this.renderTree({outline:this.outline,pdfDocument:this.pdfDocument})},t}(yO),kO=rf.pdf,CO=function(){function e(e,t){this.updateCallback=null,this.reason=null,this.containerEl=e,this.eventBus=t}return e.prototype.buildUI=function(){var e=this,t=this.reason===pdfjsLib.PasswordResponses.INCORRECT_PASSWORD;this.dialogEl=this.containerEl.createDiv("pdf-password-dialog",(function(n){gb(n.createDiv("pdf-lock-icon"),"lucide-lock"),n.createDiv({text:kO.msgPasswordProtected()}),n.createDiv({text:t?kO.msgInvalidPassword():kO.msgEnterPassword(),cls:t?"mod-warning mod-small":"mod-small"}),n.createEl("input",{type:"password",placeholder:rf.setting.account.labelPassword()},(function(t){t.addEventListener("keydown",(function(n){"Enter"===n.code&&e.verify(t.value)})),setTimeout((function(){t.focus()}))}))}))},e.prototype.open=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return this.buildUI(),this.eventBus.dispatch("passwordpromptopen",{source:this}),[2]}))}))},e.prototype.close=function(){var e;return v(this,void 0,void 0,(function(){return y(this,(function(t){return null===(e=this.dialogEl)||void 0===e||e.detach(),this.dialogEl=null,[2]}))}))},e.prototype.verify=function(e){(null==e?void 0:e.length)>0&&this.invokeCallback(e)},e.prototype.invokeCallback=function(e){this.updateCallback&&(this.close(),this.updateCallback(e),this.updateCallback=null)},e.prototype.setUpdateCallback=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){return this.updateCallback=e,this.reason=t,[2]}))}))},e.prototype.reset=function(){this.close(),this.updateCallback=null,this.reason=null},e}(),EO=rf.pdf,xO=function(){function e(e,t,n){var i=this,r=n.pdfViewer,o=r.eventBus;this.pdfViewer=r,this.eventBus=o,this.toolbarEl=t.createDiv({cls:"pdf-toolbar",prepend:!0},(function(t){t.createDiv("pdf-toolbar-left",(function(t){i.toolbarLeftEl=t,i.sidebarToggleEl=t.createDiv("clickable-icon",(function(e){aS(e,EO.actionToggleSidebar()),gb(e,"lucide-layout-list"),e.addEventListener("click",(function(){o.dispatch("togglesidebar",{source:i})}))})),i.sidebarOptionsEl=t.createDiv("clickable-icon",(function(e){gb(e,"lucide-chevron-down"),aS(e,EO.tooltipSidebarOptions());var t=!1;e.addEventListener("click",(function(){if(!t){var n=r.pdfSidebar,a=r.pdfOutlineViewer.outline,s=n.isOpen&&1===n.active,l=n.isOpen&&2===n.active,c=(new fw).addSections(["view","action"]).addItem((function(e){return e.setSection("view").setIcon("lucide-layout-grid").setTitle(EO.actionShowThumbnails()).setChecked(s).onClick((function(){return n.switchView(s?0:1,!0)}))})).addItem((function(e){return e.setSection("view").setIcon("lucide-list").setTitle(EO.actionShowOutline()).setChecked(l).setDisabled(!a).onClick((function(){return n.switchView(l?0:2,!0)}))})).addItem((function(e){return e.setSection("action").setIcon("lucide-list-start").setTitle(EO.actionRevealInOutline()).setDisabled(!a).onClick((function(){l||n.switchView(2,!0),o.dispatch("currentoutlineitem",{source:i})}))}));c.onHide((function(){t=!1}));var u=e.getBoundingClientRect();c.setParentElement(e).showAtPosition({x:u.x,y:u.bottom,width:u.width,overlap:!0,left:!1}),t=!0}}))})),t.createDiv("pdf-toolbar-spacer"),i.zoomOutEl=t.createDiv("clickable-icon",(function(e){aS(e,rf.commands.zoomOut()),gb(e,"lucide-zoom-out"),e.addEventListener("click",(function(){o.dispatch("zoomout",{source:i})}))})),t.createDiv("pdf-toolbar-divider"),i.zoomInEl=t.createDiv("clickable-icon",(function(e){aS(e,rf.commands.zoomIn()),gb(e,"lucide-zoom-in"),e.addEventListener("click",(function(){o.dispatch("zoomin",{source:i})}))})),t.createDiv("clickable-icon",(function(t){gb(t,"lucide-chevron-down"),aS(t,EO.tooltipDisplayOptions());var a=!1;t.addEventListener("click",(function(){if(!a){var s=r.pdfViewer.currentScaleValue,l="page-width"===s,c="page-height"===s,u=r.pdfViewer.spreadMode,h=0===u,p=1===u,d=2===u,f=e.loadLocalStorage(MO),g=(new fw).addSections(["zoom","spread","appearance"]).addItem((function(e){return e.setSection("zoom").setIcon("lucide-move-horizontal").setTitle(EO.actionFitWidth()).setChecked(l).onClick((function(){return o.dispatch("scalechanged",{source:i,value:"page-width"})}))})).addItem((function(e){return e.setSection("zoom").setIcon("lucide-move-vertical").setTitle(EO.actionFitHeight()).setChecked(c).onClick((function(){return o.dispatch("scalechanged",{source:i,value:"page-height"})}))})).addItem((function(e){return e.setSection("spread").setIcon("lucide-rectangle-vertical").setTitle(EO.labelSpreadSingle()).setChecked(h).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:0})}))})).addItem((function(e){return e.setSection("spread").setIcon("rectangle-vertical-double").setTitle(EO.labelSpreadOdd()).setChecked(p).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:1})}))})).addItem((function(e){return e.setSection("spread").setIcon("rectangle-vertical-double").setTitle(EO.labelSpreadEven()).setChecked(d).onClick((function(){return o.dispatch("switchspreadmode",{source:i,mode:2})}))})).addItem((function(t){return t.setSection("appearance").setIcon("lucide-palette").setTitle(EO.labelAdaptToTheme()).setChecked(!!f).onClick((function(){e.saveLocalStorage(MO,f?null:"true"),n.onCSSChange()}))}));g.onHide((function(){a=!1}));var m=t.getBoundingClientRect();g.setParentElement(t).showAtPosition({x:m.x,y:m.bottom,width:m.width,overlap:!0,left:!1}),a=!0}}))})),t.createDiv("pdf-toolbar-spacer"),i.pageInputEl=t.createEl("input",{cls:"pdf-page-input"},(function(e){e.addEventListener("click",(function(){return e.select()})),e.addEventListener("change",(function(){o.dispatch("pagenumberchanged",{source:i,value:e.value})}))})),i.pageNumberEl=t.createSpan("pdf-page-numbers")})),t.createDiv("pdf-toolbar-right",(function(e){i.toolbarRightEl=e}))})),o._on("sidebarviewchanged",(function(e){var t=e.view;i.sidebarToggleEl.toggleClass("is-active",t>0)})),this.eventBus=o,this.reset()}return e.prototype.setPageNumber=function(e,t){this.pageNumber=e,this.pageLabel=t,this.updateUIState(!1)},e.prototype.setPagesCount=function(e,t){this.pagesCount=e,this.hasPageLabels=t,this.updateUIState(!0)},e.prototype.setPageScale=function(e,t){this.pageScaleValue=(e||t).toString(),this.pageScale=t,this.updateUIState(!1)},e.prototype.reset=function(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=pdfjsViewer.DEFAULT_SCALE_VALUE,this.pageScale=pdfjsViewer.DEFAULT_SCALE,this.updateUIState(!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})},e.prototype.updateUIState=function(e){var t,n;void 0===e&&(e=!1);var i=this,r=i.pagesCount,o=i.pageNumber,a=i.pageScale,s=i.pageInputEl,l=i.pageNumberEl;e&&(this.hasPageLabels?s.type="text":(s.type="number",l.textContent=EO.labelOfPages({count:r})),s.max=r.toString()),this.hasPageLabels?(s.value=this.pageLabel,l.textContent=EO.labelPageOfPages({current:o,count:r})):s.value=o.toString(),null===(t=this.prevPageEl)||void 0===t||t.toggleClass("mod-disabled",o<=1),null===(n=this.nextPageEl)||void 0===n||n.toggleClass("mod-disabled",o>=r),this.zoomOutEl.toggleClass("mod-disabled",a<=pdfjsViewer.MIN_SCALE),this.zoomInEl.toggleClass("mod-disabled",a>=pdfjsViewer.MAX_SCALE)},e.prototype.updateLoadingIndicatorState=function(e){void 0===e&&(e=!1),this.pageInputEl.toggleClass("mod-page-loading",e)},e}(),SO=rf.pdf,MO="pdfjs-is-themed";var TO=function(e,t){var n=t.view.document,i=t.targetNode;if(i.instanceOf(HTMLElement)&&i.hasClass("textLayerNode")){var r=n.caretRangeFromPoint(t.clientX,t.clientY);if(r&&i.contains(r.startContainer))return{el:r.startContainer,offset:r.startOffset}}var o=t.clientX,a=t.clientY;if(!e)return null;for(var s=e.container.findAll(".page"),l=new Set(e._getVisiblePages().views.map((function(e){return e.view.div}))),c=null,u=(s=s.filter((function(e){return l.has(e)}))).length-1;u>=0;u--){var h=s[u],p=h.getBoundingClientRect();if(p.top<=a&&p.left<=o){c=h;break}}if(!c){if(0===s.length)return null;c=s[0]}var d=c.findAll(".textLayerNode"),f=null,g=1/0;for(u=d.length-1;u>=0;u--){var m=d[u],v=m.getBoundingClientRect();if(v.top<=a&&v.left<=o){var y=Math.hypot(Math.max(0,o-v.right),Math.max(0,a-v.bottom));(!f||y<g)&&(f=m,g=y)}}if(!f)return d.length?{el:d[0],offset:0}:null;var b=f.getBoundingClientRect(),w=Math.clamp(o,b.left+1,b.right-1),k=Math.clamp(a,b.top+1,b.bottom-1),C=n.caretRangeFromPoint(w,k);if(C&&f.contains(C.startContainer))return{el:C.startContainer,offset:C.startOffset};C=n.createRange();var E=function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.textContent.length;C.setEnd(e,t);for(var n=0,i=t;n<i;){var r=(n+i)/2|0;C.setStart(e,r);var o=C.getClientRects();if(1===o.length){var a=o[0];a.bottom<k||a.top<=k&&a.left<w?n=r+1:i=r}else n=r+1}return{el:e,offset:n}}for(var s=0;s<e.childNodes.length;s++){C.setStart(e,s),C.setEnd(e,s+1);var l=C.getBoundingClientRect();if(l.left<=w&&l.right>=w&&l.top<=k&&l.bottom>=k)return E(e.childNodes[s])}var c=e.parentNode,u=c.indexOf(e);C.setStart(c,u),C.setEnd(c,u+1);var h=C.getBoundingClientRect();return Math.abs(h.right-w)<Math.abs(w-h.left)?{el:c,offset:u+1}:{el:e,offset:0}};return E(f)};function DO(e,t,n){if(!e.contains(t))return null;for(var i,r=e.doc.createNodeIterator(e,NodeFilter.SHOW_TEXT),o=n;(i=r.nextNode())&&t!==i;)o+=i.textContent.length;return o}function AO(e,t){if(!e.contains(t))return null;if(t.instanceOf(HTMLElement)&&t.hasClass("textLayerNode"))return t;for(var n=t;n=n.parentNode;){if(n===e)return null;if(n.instanceOf(HTMLElement)&&n.hasClass("textLayerNode"))return n}return null}function LO(e){if(!e)return null;var t=parseInt(e);return Number.isNaN(t)?null:t}var PO,IO=function(){function e(e,t,n,i){var r=this;this.subpathHighlight=null,this.unloaded=!1,this.annotationHighlight=null,this.highlightedText=[],this.app=e,this.scope=t,this.containerEl=n,this.opts=i,this.resizeObserver=new ResizeObserver(rt((function(){return r.onResize()}),200,!0))}return e.prototype.load=function(){var e,t;return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C=this;return y(this,(function(E){switch(E.label){case 0:return(null===(e=this.opts)||void 0===e?void 0:e.initDelay)?[4,sleep(this.opts.initDelay)]:[3,2];case 1:if(E.sent(),this.unloaded)return[2];E.label=2;case 2:return[4,XD()];case 3:return E.sent(),Lt.isMobile&&(II.maxCanvasPixels=5242880),this.unloaded?[2]:(i=(n=this).app,r=n.opts,o=new pdfjsViewer.EventBus,(a=this.loadingEl=this.containerEl.doc.body.createDiv()).setCssStyles({position:"fixed",opacity:"0",zIndex:"-9999"}),s=a.createDiv("pdf-container"),l=i.loadLocalStorage(MO),c=null,u=!1,l&&(s.addClass("mod-themed"),c=s.getCssPropertyValue("--pdf-page-background"),u=document.body.hasClass("theme-dark")),h=s.createDiv("pdf-content-container"),p=h.createDiv("pdf-viewer-container",(function(e){e.style.position="absolute",e.addEventListener("transitionend",(function(t){t.target===e&&o.dispatch("resize",{source:e})}),!0),e.addEventListener("contextmenu",C.onContextMenu.bind(C)),e.addEventListener("pointerdown",(function(e){C.onAnnotationPointerDown(e),C.onTextSelectionPointerDown(e)}))})),d=p.createDiv("pdf-viewer"),f=h.createDiv("pdf-sidebar-container",(function(e){e.addEventListener("contextmenu",C.onThumbnailContextMenu.bind(C))})),g=f.createDiv("pdf-sidebar-content-wrapper").createDiv("pdf-sidebar-content"),m=g.createDiv("pdf-thumbnail-view"),b=g.createDiv("pdf-outline-view hidden"),w={containerEl:a,contentEl:h,outlineViewEl:b,pdfContainerEl:s,sidebarContainerEl:f,thumbnailViewEl:m,viewerContainerEl:p,viewerEl:d},(k=this.pdfViewer=new pdfjsViewer.ObsidianViewer({baseConfig:II,dom:w,eventBus:o,height:null==r?void 0:r.height,isEmbed:null==r?void 0:r.isEmbed,l10n:new gO,removePageBorders:null==r?void 0:r.removePageBorders,pageBackground:c,pageInvert:u})).toolbar=this.toolbar=new xO(i,a,this),k.findBar=this.findBar=new dO(i,h,o,this.scope),k.passwordPrompt=new CO(p,o),k.pdfOutlineViewer=new wO(this,b,o),h.onWindowMigrated((function(){return v(C,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=k.subpath,[4,k.close()];case 1:return n.sent(),[4,this.loadFile(this.file)];case 2:return n.sent(),e?[4,null===(t=k.pdfLoadingTask)||void 0===t?void 0:t.promise]:[3,4];case 3:n.sent(),k.applySubpath(e),n.label=4;case 4:return[2]}}))}))})),o._on("sidebarviewchanged",(function(e){f.setAttr("data-view",e.view)})),this.scope.register([],"Escape",(function(){C.clearEphemeralUI(),C.findBar.close()})),o._on("find",(function(){return C.clearEphemeralUI()})),this.resizeObserver.observe(s),[4,k.initialize()]);case 4:return E.sent(),this.unloaded?(this.unload(),[2]):(null===(t=this.loadingEl)||void 0===t||t.detach(),this.loadingEl=null,w.containerEl=this.containerEl,this.containerEl.appendChild(this.toolbar.toolbarEl),this.containerEl.appendChild(s),(null==r?void 0:r.isEmbed)&&(null==r?void 0:r.height)&&k.setHeight(r.height),o._on("textlayerrendered",(function(e){var t,n=e.source;if(n){var i=n.textLayer,r=n.id;if(Lt.isMobile&&(null===(t=i.div)||void 0===t||t.addEventListener("copy",(function(e){C.onMobileCopy(e,n)}))),C.subpathHighlight&&"text"===C.subpathHighlight.type){var o=C.subpathHighlight,a=o.page,s=o.range;r===a&&C.highlightText(a,s)}}})),o._on("annotationlayerrendered",(function(e){var t=e.source;if(C.subpathHighlight&&"annotation"===C.subpathHighlight.type){var n=C.subpathHighlight,i=n.page,r=n.id;(null==t?void 0:t.id)===i&&C.highlightAnnotation(i,r)}})),[2])}}))}))},e.prototype.unload=function(){var e,t,n;this.unloaded=!0,this.resizeObserver.disconnect(),null===(e=this.pdfViewer)||void 0===e||e.close(),this.pdfViewer=null,this.toolbar=null,null===(t=this.findBar)||void 0===t||t.close(),this.findBar=null,null===(n=this.loadingEl)||void 0===n||n.detach(),this.loadingEl=null,this.containerEl.empty(),this.destroyAnnotationPopup()},e.prototype.getPage=function(e){return this.pdfViewer.pdfViewer.getPageView(e-1)},e.prototype.renderAnnotationPopup=function(e){var t=this,n=e.layer,i=e.data,r=e.parent,o=r.page,a=o.pageNumber,s=o.view,l=this.getPage(a),c=i.id,u=i.rect,h=i.contentsObj,p=h.dir,d=h.str,f=createDiv("popup");if(f.createDiv({cls:"popupContent",attr:{dir:p}},(function(e){for(var t=d.split(/(?:\r\n?|\n)/),n=0,i=t.length;n<i;n++)e.appendText(t[n]),n<i-1&&e.createEl("br")})),f.createDiv("popupMeta",(function(e){e.createDiv({cls:"popupTitle",text:i.titleObj.str,attr:{dir:i.titleObj.dir}});var n=pdfjsLib.PDFDateString.toDateObject(i.modificationDate);n&&e.createSpan({cls:"popupDate",text:"".concat(n.toLocaleDateString(),", ").concat(n.toLocaleTimeString())}),l&&e.createDiv("clickable-icon",(function(e){gb(e,"lucide-copy"),aS(e,rf.interface.menu.copy()),e.addEventListener("click",(function(){return v(t,void 0,void 0,(function(){var t,n,r;return y(this,(function(o){switch(o.label){case 0:return t=[],[4,this.getAnnotatedText(l,c)];case 1:return(n=o.sent())&&t.push("> ".concat(n)),t.push("".concat(this.getMarkdownLink("#page=".concat(a,"&annotation=").concat(c)))),(null===(r=i.contentsObj)||void 0===r?void 0:r.str)&&t.push("".concat(i.contentsObj.str)),[4,navigator.clipboard.writeText(t.join("\n\n"))];case 2:return o.sent(),gb(e,"lucide-check"),[2]}}))}))}))}))})),Lt.isPhone){var g=new LI(this.app).setBackgroundOpacity("0.4");return g.containerEl.addClass("pdf-annotation-modal"),g.contentEl.append(f),void activeWindow.setTimeout((function(){g.open()}),20)}var m=r.viewport.rawDims,b=m.pageWidth,w=m.pageHeight,k=m.pageX,C=m.pageY,E=pdfjsLib.Util.normalizeRect([u[0],s[3]-u[1]+s[1],u[2],s[3]-u[3]+s[1]]),x=createDiv({cls:"popupWrapper",attr:{"data-annotation-id":i.id}});if(x.append(f),x.setCssStyles({left:"".concat(100*((E[0]+E[2])/2-k)/b,"%"),top:"".concat(100*(E[3]-C)/w,"%")}),i.color){var S=i.color,M=S[0],T=S[1],D=S[2];x.style.setProperty("--annotation-color","".concat(M,", ").concat(T,", ").concat(D))}n.append(x),Ie(x,new Te({duration:200,fn:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).addProp("transform","translate(-50%, -1px) scale(0.97)","translate(-50%, 0) scale(1)",""));var A=this.pdfViewer.dom.viewerContainerEl.getBoundingClientRect(),L=x.getBoundingClientRect();L.top>A.top&&L.bottom<A.bottom||x.scrollIntoView({behavior:"smooth",block:"end"}),this.activeAnnotationPopupEl=x},e.prototype.destroyAnnotationPopup=function(){if(this.activeAnnotationPopupEl){var e=this.activeAnnotationPopupEl;this.activeAnnotationPopupEl=null,Ie(e,new Te({duration:200,fn:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).addProp("transform","translate(-50%, 0) scale(1)","translate(-50%, -1px) scale(0.9)").addProp("opacity","1","0"),(function(){e.detach()}))}},e.prototype.clearEphemeralUI=function(){this.destroyAnnotationPopup(),this.clearAnnotationHighlight(),this.clearTextHighlight(),this.subpathHighlight=null},e.prototype.getAnnotationFromEvt=function(e,t){var n,i=t.targetNode,r=e.annotationLayer;if(!(null==r?void 0:r.div.contains(i)))return null;if(!i.instanceOf(HTMLElement)&&!i.instanceOf(SVGElement))return null;var o=i.dataset.annotationId;return o||(o=null===(n=i.closest("section"))||void 0===n?void 0:n.dataset.annotationId)?r.annotationLayer.getAnnotation(o):null},e.prototype.onAnnotationPointerDown=function(e){var t,n=this;if(0===e.button&&!xe(e)&&!(null===(t=this.activeAnnotationPopupEl)||void 0===t?void 0:t.contains(e.targetNode))){var i=e.target.closest(".page");if(!i||!i.dataset.pageNumber)return this.clearEphemeralUI();var r=i.dataset.pageNumber,o=this.getPage(parseInt(r)),a=e.view,s=e.clientX,l=e.clientY,c=e.pointerId,u=!1,h=function(e){e.pointerId===c&&(Math.hypot(s-e.clientX,l-e.clientY)>5&&(u=!0))},p=function(t){var i;if(t.pointerId===c){d();var r=null===(i=n.activeAnnotationPopupEl)||void 0===i?void 0:i.dataset.annotationId;if(n.clearEphemeralUI(),!u){var a=n.getAnnotationFromEvt(o,e);a&&"Widget"!==a.data.subtype&&a.data.id!==r&&n.renderAnnotationPopup(a)}}},d=function(){a.removeEventListener("pointermove",h),a.removeEventListener("pointerup",p),a.removeEventListener("pointercancel",p)};a.addEventListener("pointermove",h),a.addEventListener("pointerup",p),a.removeEventListener("pointercancel",p)}},e.prototype.onTextSelectionPointerDown=function(e){var t,n=this;if("mouse"===e.pointerType&&0===e.button&&!xe(e)&&!(null===(t=this.activeAnnotationPopupEl)||void 0===t?void 0:t.contains(e.targetNode))){var i=e.view,r=this.pdfViewer.pdfViewer,o=e.pointerId,a=null,s=0,l=mw(e),c=TO(r,e);if(c){this.clearTextHighlight();var u=function(e){if(e.pointerId===o){l=mw(e),e.preventDefault(),e.stopPropagation();var t=TO(r,e);t&&i.getSelection().setBaseAndExtent(c.el,c.offset,t.el,t.offset)}},h=function(e){e.pointerId===o&&(i.removeEventListener("pointermove",u),i.removeEventListener("pointerup",h),i.removeEventListener("pointercancel",h),i.cancelAnimationFrame(a))},p=function(e){a=i.requestAnimationFrame(p);var t=e-s;0===s&&(t=50),s=e,function(e,t,n){var i=e.getBoundingClientRect(),r=Math.min(i.height/3,12),o=Math.min(i.width/3,12),a=t.y;a<i.top+r?e.scrollTop-=2*n*(i.top+r-a)/r:a>i.bottom-r&&(e.scrollTop+=2*n*(a-(i.bottom-r))/r);var s=t.x;s<i.left+o?e.scrollLeft-=2*n*(i.left+o-s)/o:s>i.right-o&&(e.scrollLeft+=2*n*(s-(i.right-o))/o)}(n.pdfViewer.dom.viewerContainerEl,l,t)};i.addEventListener("pointermove",u),i.addEventListener("pointerup",h),i.addEventListener("pointercancel",h),a=i.requestAnimationFrame(p)}}},e.prototype.getPageLinkAlias=function(e){return"".concat(this.file.basename,", ").concat(SO.labelPage({page:e}))},e.prototype.getTextSelectionRangeStr=function(e){var t=e.win.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(n&&!n.collapsed){var i=AO(e,n.startContainer),r=AO(e,n.endContainer);if(i&&r){var o=i.dataset.idx,a=r.dataset.idx,s=DO(i,n.startContainer,n.startOffset),l=DO(r,n.endContainer,n.endOffset);if(null!==s&&null!==l)return"".concat(o,",").concat(s,",").concat(a,",").concat(l)}}return null},e.prototype.onContextMenu=function(e){var t;return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w;return y(this,(function(y){switch(y.label){case 0:return Lt.isDesktopApp?(n=e.target,(i=n.closest(".page"))&&i.instanceOf(HTMLElement)?(r=parseInt(i.dataset.pageNumber),Number.isNaN(r)?[2]:(o=!0,s=!1,(l=Lt.isDesktopApp&&e.win.electron)&&e.isTrusted?[4,jt(e)]:[3,2])):[2]):[2];case 1:return!(c=y.sent())||e.defaultPrevented?[2]:(a=l.remote.webContents.fromId(c.webContentsId),o=(c.editFlags||{}).canCopy,[3,3]);case 2:s=!0,y.label=3;case 3:return u=this.getPage(r),h=e.view.getSelection(),p=h.toString(),d=(new fw).addSections(["action","selection","annotation"]),p&&(p=pdfjsViewer.removeNullCharacters(pdfjsLib.normalizeUnicode(p.replace(/[\n\r]+/g," ")))),Lt.isMacOS&&l&&p&&d.addItem((function(e){return e.setSection("action").setTitle(rf.interface.menu.lookupSelection({selection:Id(p,40)})).setIcon("lucide-library").onClick((function(){l.remote.getCurrentWebContents().showDefinitionForSelection()}))})),f=this.getAnnotationFromEvt(u,e),g=null,m=null,f&&"Widget"!==f.data.subtype?(g=f.data.id,[4,this.getAnnotatedText(u,g)]):[3,5];case 4:m=y.sent(),y.label=5;case 5:return p&&d.addItem((function(e){return e.setSection("selection").setTitle(rf.interface.menu.copy()).setIcon("lucide-copy").setDisabled(!o).onClick((function(){l&&a?a.copy():navigator.clipboard.writeText(p)}))})),(v=this.getTextSelectionRangeStr(i))&&(b=this.getMarkdownLink("#page=".concat(r,"&selection=").concat(v),this.getPageLinkAlias(r)),d.addItem((function(e){return e.setSection("selection").setTitle(SO.actionCopyQuote()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText("> ".concat(p.replace(/[\r\n]+/g," "),"\n\n").concat(b))}))})),d.addItem((function(e){return e.setSection("selection").setTitle(SO.actionCopySelectionLink()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText(b)}))}))),g&&(w=this.getMarkdownLink("#page=".concat(r,"&annotation=").concat(g),this.getPageLinkAlias(r)),m&&d.addItem((function(e){return e.setSection("annotation").setTitle(SO.actionCopyAnnotation()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText("> ".concat(m,"\n\n").concat(w))}))})),d.addItem((function(e){return e.setSection("annotation").setTitle(SO.actionCopyAnnotLink()).setIcon("lucide-copy").onClick((function(){navigator.clipboard.writeText(w)}))}))),this.clearEphemeralUI(),d.showAtMouseEvent(e),((null===(t=this.opts)||void 0===t?void 0:t.isEmbed)||s)&&e.preventDefault(),[2]}}))}))},e.prototype.onMobileCopy=function(e,t){var n=t.div,i=t.id,r=e.clipboardData.getData("text/plain");if(r){var o=this.getTextSelectionRangeStr(n);if(o){var a=this.getMarkdownLink("#page=".concat(i,"&selection=").concat(o),this.getPageLinkAlias(i));e.clipboardData.setData("text/plain","> ".concat(r,"\n\n").concat(a))}}},e.prototype.onThumbnailContextMenu=function(e){var t=e.targetNode;if(t.instanceOf(HTMLElement)&&t.hasClass("thumbnail")){var n=parseInt(t.dataset.pageNumber);if(Number.isNaN(n))return;var i=this.getMarkdownLink("#page=".concat(n),this.getPageLinkAlias(n));(new fw).addItem((function(t){return t.setTitle(SO.actionCopyPageLink({page:n})).setIcon("lucide-copy").onClick((function(){e.view.navigator.clipboard.writeText(i)}))})).showAtMouseEvent(e)}},e.prototype.getAnnotatedText=function(e,t){var n;return v(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return i=e.annotationLayer.annotationLayer.getAnnotation(t),(null==(r=null===(n=i.data)||void 0===n?void 0:n.quadPoints)?void 0:r.length)?(o=e.textLayer).renderingDone?[3,2]:[4,o.textLayerRenderTask.promise]:[2,null];case 1:h.sent(),h.label=2;case 2:for(a="",s=0,l=r;s<l.length;s++)c=l[s],(u=this.getTextByRect(e,[c[2].x,c[2].y,c[1].x,c[1].y]))&&""!==a&&(a+=" "),a+=u;return[2,a.trim()||null]}}))}))},e.prototype.getTextByRect=function(e,t){for(var n,i=t[0],r=t[1],o=t[2],a=t[3],s="",l=0,c=e.textLayer.textContentItems;l<c.length;l++){var u=c[l];if(null===(n=u.chars)||void 0===n?void 0:n.length)for(var h=0,p=u.chars;h<p.length;h++){var d=p[h],f=(d.r[0]+d.r[2])/2,g=(d.r[1]+d.r[3])/2;f>=i&&f<=o&&g>=r&&g<=a&&(s+=d.u)}}return s},e.prototype.clearAnnotationHighlight=function(){this.annotationHighlight&&(this.annotationHighlight.detach(),this.annotationHighlight=null)},e.prototype.highlightAnnotation=function(e,t){var n=this;if(this.clearAnnotationHighlight(),!(e<1||e>this.pdfViewer.pagesCount)){var i=this.getPage(e);if(null==i?void 0:i.div.dataset.loaded){var r=i.annotationLayer.annotationLayer.getAnnotation(t);if(r)i.annotationLayer.div.createDiv("boundingRect mod-focused",(function(e){var t=r.data.rect,i=r.parent.page.view,o=r.parent.viewport.rawDims,a=o.pageWidth,s=o.pageHeight,l=o.pageX,c=o.pageY,u=pdfjsLib.Util.normalizeRect([t[0],i[3]-t[1]+i[1],t[2],i[3]-t[3]+i[1]]);e.setCssStyles({left:"".concat(100*(u[0]-l)/a,"%"),top:"".concat(100*(u[1]-c)/s,"%"),width:"".concat(100*(u[2]-u[0])/a,"%"),height:"".concat(100*(u[3]-u[1])/s,"%")}),n.annotationHighlight=e,activeWindow.setTimeout((function(){pdfjsViewer.scrollIntoView(e,{top:-50})}))}))}}},e.prototype.clearTextHighlight=function(){if(this.highlightedText.length){for(var e=0,t=this.highlightedText;e<t.length;e++){var n=t[e],i=n[0],r=n[1],o=this.getPage(i).textLayer,a=o.textDivs,s=o.textContentItems,l=a[r];l.textContent=s[r].str,l.className=l.hasClass("textLayerNode")?"textLayerNode":""}this.highlightedText=[]}},e.prototype.highlightText=function(e,t){if(this.clearTextHighlight(),!(e<1||e>this.pdfViewer.pagesCount)){var n=this.getPage(e);if(null==n?void 0:n.div.dataset.loaded){var i=n.textLayer,r=i.textDivs,o=i.textContentItems,a=[],s=function(t,n,i){return a.push([e,t]),1===a.length&&pdfjsViewer.scrollIntoView(r[t],{top:-50},!0),r[t].textContent="",l(t,0,n,i)},l=function(t,n,i,s){a.push([e,t]);var l=r[t];if(l.nodeType===Node.TEXT_NODE){var c=createSpan();l.before(c),c.append(l),r[t]=c,l=c}var u=o[t].str.substring(n,i),h=document.createTextNode(u);s?(c=l.createSpan("".concat(s," appended"))).append(h):l.append(h)},c=t[0],u=c[0],h=c[1],p=t[1],d=p[0],f=p[1],g="selected";if(s(u,h),u===d)l(u,h,f,"mod-focused selected");else{l(u,h,void 0,"mod-focused begin selected");for(var m=u+1,v=d;m<v;m++)a.push([e,m]),r[m].classList.add("mod-focused","middle",g);s(d,f,"mod-focused endselected")}l(d,f,void 0),this.highlightedText=a}}},e.prototype.loadFile=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return n=this.pdfViewer,this.unloaded||!n?[2]:(n.subpath=null,this.file=null,i=function(){return v(r,void 0,void 0,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:(i=null===(l=this.opts)||void 0===l?void 0:l.displayMode)&&(n.pdfViewer._scrollMode=3,n.pdfViewer._spreadMode=0),c.label=1;case 1:return c.trys.push([1,5,,6]),r=this.containerEl,t&&this.applySubpath(t),[4,n.open({url:this.app.vault.getResourcePath(e),ownerDocument:r.doc})];case 2:return c.sent(),this.file=e,i?[4,(o=n.pdfViewer)._pagesCapability.promise]:[3,4];case 3:c.sent(),(a=o.getPageView(o._currentPageNumber-1)).canvas.setCssStyles({maxWidth:"".concat(a.width,"px"),zoom:""}),r.createDiv("canvasWrapper").append(a.canvas),"auto"!==n.height&&"page"!==n.height||r.setCssStyles({height:"auto"}),c.label=4;case 4:return[3,6];case 5:return s=c.sent(),console.error(s),[3,6];case 6:return[2]}}))}))},this.containerEl.offsetParent?[4,new Promise((function(e){n.eventBus.on("passwordpromptopen",e,{once:!0}),i().finally(e)}))]:(this.containerEl.onNodeInserted(i,!0),[2]));case 1:return o.sent(),[2]}}))}))},e.prototype.applySubpath=function(e){if(e){var t=this.pdfViewer,n=t.pdfLoadingTask,i=function(e){var t;"#"===e[0]&&(e=e.substring(1));var n=new URLSearchParams(e);if(!n.has("page"))return{dest:e,highlight:null};var i=null!==(t=LO(n.get("page")))&&void 0!==t?t:1,r=n.has("offset")?n.get("offset").split(","):[],o=LO(r[0]),a=LO(r[1]),s=LO(r[2]),l=null===s?[i-1,{name:"FitBH"},a]:[i-1,{name:"XYZ"},o,a,s],c=null;if(n.has("annotation"))c={type:"annotation",page:i,id:n.get("annotation")};else if(n.has("selection")){var u=n.get("selection").split(","),h=LO(u[0]),p=LO(u[1]),d=LO(u[2]),f=LO(u[3]);null!==h&&null!==p&&null!==d&&null!==f&&(c={type:"text",page:i,range:[[h,p],[d,f]]})}var g=n.has("height")?LO(n.get("height")):null;return{dest:JSON.stringify(l),highlight:c,height:g}}(e),r=i.dest,o=i.highlight;n?n.promise.then((function(){t.applySubpath(r)})):t.subpath=r,this.subpathHighlight=o||null}},e.prototype.onResize=function(){this.containerEl.isShown()&&this.pdfViewer&&this.pdfViewer.eventBus.dispatch("resize",{source:this})},e.prototype.on=function(e,t){this.pdfViewer.eventBus._on(e,t)},e.prototype.off=function(e,t){this.pdfViewer.eventBus._off(e,t)},e.prototype.onCSSChange=function(){var e=this.pdfViewer,t=this.app,n=e.dom.pdfContainerEl,i=t.loadLocalStorage(MO),r=i?n.getCssPropertyValue("--pdf-page-background"):null,o=!!i&&document.body.hasClass("theme-dark");r!==e.pageBackground&&(n.toggleClass("mod-themed",!!r),e.setBackground(r,o))},e.prototype.getMarkdownLink=function(e,t,n){var i=this.app.fileManager.generateMarkdownLink(this.file,"",e,t);return n?i:i.substring(1)},e}(),OO=function(e){function t(t,n,i){var r=e.call(this)||this;return r.child=null,r.next=[],r.app=t,r.containerEl=n,r.opts=i,r.scope=new cw(t.scope),r}return f(t,e),t.prototype.onload=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return this.registerEvent(this.app.workspace.on("css-change",(function(){r.then((function(e){return e.onCSSChange()}))}))),this.child?[2]:[4,(e=this.child=new IO(this.app,this.scope,this.containerEl,this.opts)).load()];case 1:if(o.sent(),this.child===e)for(t=this.next,this.next=null,n=0,i=t;n<i.length;n++)(0,i[n])(e);return[2]}}))}))},t.prototype.onunload=function(){this.child&&(this.child.unload(),this.child=null,this.next=[])},t.prototype.then=function(e){this.next?this.next.push(e):this.child&&e(this.child)},t.prototype.loadFile=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,new Promise((function(i){n._loaded||i(),n.then((function(n){n.loadFile(e,t).then(i)}))}))]}))}))},t}(nb),FO=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-file-text";var i=n.viewer=n.addChild(new OO(n.app,n.contentEl,{removePageBorders:Lt.isMobile})),r=n.scope=n.viewer.scope,o=function(e){return function(t){var n,r,o=null===(r=null===(n=i.child)||void 0===n?void 0:n.pdfViewer)||void 0===r?void 0:r.pdfViewer;if(o){var a=o.currentScaleValue;["page-width","page-height"].includes(a)&&(t.preventDefault(),e(o))}}};return r.register([],"ArrowLeft",o((function(e){return e.previousPage()}))),r.register([],"ArrowRight",o((function(e){return e.nextPage()}))),n}return f(t,e),t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("modify",this.onModify,this))},t.prototype.getViewType=function(){return"pdf"},t.prototype.onModify=function(e){e===this.file&&this.onLoadFile(e)},t.prototype.onLoadFile=function(e){return this.viewer.loadFile(e)},t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t),this.viewer.then((function(e){return e.applySubpath(t.subpath)}))},t.prototype.onUnloadFile=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(e){return this.viewer.then((function(e){return e.pdfViewer.close()})),[2]}))}))},t.prototype.showSearch=function(){this.viewer.then((function(e){return e.findBar.showSearch()}))},t.VIEW_TYPE="pdf",t}(SI),BO=function(e){function t(t,n,i){var r=e.call(this)||this;r.app=t.app,r.containerEl=t.containerEl,r.file=n,r.subpath=i;var o="page";if(i){var a=new URLSearchParams(i.substring(1));if(a.has("height")){var s=LO(a.get("height"));s&&s>0&&(o=s)}}return r.containerEl.addClass("pdf-embed"),r.viewer=r.addChild(new OO(r.app,r.containerEl,{removePageBorders:!0,isEmbed:!0,height:o,initDelay:300,displayMode:t.displayMode})),r.viewer.then((function(e){var n=e.toolbar.toolbarRightEl;n.createDiv("pdf-toolbar-spacer"),n.createDiv("clickable-icon",(function(e){gb(e,"lucide-more-vertical"),aS(e,rf.setting.about.buttonOpen()),e.addEventListener("click",(function(){var n=(new fw).setParentElement(e);if(t.app.workspace.handleLinkContextMenu(n,t.linktext,t.sourcePath)){var i=e.getBoundingClientRect();n.showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0,left:!0})}}))})),Xb(e.pdfViewer.dom.viewerContainerEl)})),r}return f(t,e),t.prototype.onload=function(){var t=this;e.prototype.onload.call(this);var n=this.app;this.registerEvent(n.vault.on("modify",(function(e){e===t.file&&t.loadFile()})))},t.prototype.loadFile=function(){return this.viewer.loadFile(this.file,this.subpath)},t}(nb),NO="video",RO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getViewType=function(){return NO},t.prototype.canAcceptExtension=function(e){return fM.contains(e)},t.prototype.onLoadFile=function(e){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).app,xt(r=n.contentEl),r.empty(),o=r.createDiv("video-container"),[4,t.displayInEl(e,i,o)];case 1:return a.sent(),[2]}}))}))},t.displayInEl=function(e,t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){return i=t.vault.getResourcePath(e),[2,pt(n,i)]}))}))},t.VIEW_TYPE=NO,t}(SI),HO=/[^a-zA-Z0-9]/,VO=/\s/,zO=/[\r\n]/,qO=/\n\r?\n$/,UO=/^\r?\n\r?\n/;function WO(e,t){return e<t?e:t}function _O(e,t){return e>t?e:t}!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(PO||(PO={}));var jO=/\W/;function GO(e,t){for(var n=e.length,i=t;i<n;i+=1)if(jO.test(e[i]))return i;return-1}var KO=function(){function e(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return e.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.diffTimeout<=0?Number.MAX_VALUE:Date.now()+1e3*this.diffTimeout);var r=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e===t)return e?[[PO.DIFF_EQUAL,e]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(e,t),s=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var l=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var c=this.diff_compute_(e,t,o,r);return s&&c.unshift([PO.DIFF_EQUAL,s]),l&&c.push([PO.DIFF_EQUAL,l]),this.diff_cleanupMerge(c),c},e.prototype.diff_lineMode=function(e,t){var n=this.diff_linesToChars_(e,t),i=n.chars1,r=n.chars2,o=n.lineArray,a=this.diff_main(i,r,!1);return this.diff_charsToLines_(a,o),a},e.prototype.diff_wordMode=function(e,t){var n=this.diff_wordsToChars_(e,t),i=n.chars1,r=n.chars2,o=n.lineArray,a=this.diff_main(i,r,!1);return this.diff_charsToLines_(a,o),a},e.prototype.diff_wordsToChars_=function(e,t){var n=[],i={};n[0]="";var r=function(e){var t="",r=n.length;return function(e,t){for(var n=0,i=-1;i<e.length-1;){if(-1===(i=GO(e,n))){t(e.substring(n,e.length)),i=e.length;break}n!==i&&t(e.substring(n,i)),t(e[i]),n=i+1}}(e,(function(e){(i.hasOwnProperty?i.hasOwnProperty(e):void 0!==i[e])?t+=String.fromCharCode(i[e]):(t+=String.fromCharCode(r),i[e]=r,n[r++]=e)})),t};return{chars1:r(e),chars2:r(t),lineArray:n}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,i=WO(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)===t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;for(var n=0,i=WO(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)===t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},e.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=0,s=0,l=0,c=0;o<e.length;)e[o][0]===PO.DIFF_EQUAL?(n[i++]=o,a=l,s=c,l=0,c=0,r=e[o][1]):(e[o][0]===PO.DIFF_INSERT?l+=e[o][1].length:c+=e[o][1].length,r&&r.length<=_O(a,s)&&r.length<=_O(l,c)&&(e.splice(n[i-1],0,[PO.DIFF_DELETE,r]),e[n[i-1]+1][0]=PO.DIFF_INSERT,i--,o=--i>0?n[i-1]:-1,a=0,s=0,l=0,c=0,r=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(e[o-1][0]===PO.DIFF_DELETE&&e[o][0]===PO.DIFF_INSERT){var u=e[o-1][1],h=e[o][1],p=this.diff_commonOverlap_(u,h),d=this.diff_commonOverlap_(h,u);p>=d?(p>=u.length/2||p>=h.length/2)&&(e.splice(o,0,[PO.DIFF_EQUAL,h.substring(0,p)]),e[o-1][1]=u.substring(0,u.length-p),e[o+1][1]=h.substring(p),o++):(d>=u.length/2||d>=h.length/2)&&(e.splice(o,0,[PO.DIFF_EQUAL,u.substring(0,d)]),e[o-1][0]=PO.DIFF_INSERT,e[o-1][1]=h.substring(0,h.length-d),e[o+1][0]=PO.DIFF_DELETE,e[o+1][1]=u.substring(d),o++),o++}o++}},e.prototype.diff_cleanupSemanticLossless=function(e){for(var t=1;t<e.length-1;){if(e[t-1][0]===PO.DIFF_EQUAL&&e[t+1][0]===PO.DIFF_EQUAL){var n=e[t-1][1],i=e[t][1],r=e[t+1][1],o=this.diff_commonSuffix(n,i);if(o){var a=i.substring(i.length-o);n=n.substring(0,n.length-o),i=a+i.substring(0,i.length-o),r=a+r}for(var s=n,l=i,c=r,u=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);i.charAt(0)===r.charAt(0);){n+=i.charAt(0),i=i.substring(1)+r.charAt(0),r=r.substring(1);var h=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);h>=u&&(u=h,s=n,l=i,c=r)}e[t-1][1]!==s&&(s?e[t-1][1]=s:(e.splice(t-1,1),t--),e[t][1]=l,c?e[t+1][1]=c:(e.splice(t+1,1),t--))}t++}},e.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=!1,s=!1,l=!1,c=!1;o<e.length;)e[o][0]===PO.DIFF_EQUAL?(e[o][1].length<this.diffEditCost&&(l||c)?(n[i++]=o,a=l,s=c,r=e[o][1]):(i=0,r=null),l=c=!1):(e[o][0]===PO.DIFF_DELETE?c=!0:l=!0,r&&(a&&s&&l&&c||r.length<this.diffEditCost/2&&Number(a)+Number(s)+Number(l)+Number(c)===3)&&(e.splice(n[i-1],0,[PO.DIFF_DELETE,r]),e[n[i-1]+1][0]=PO.DIFF_INSERT,i--,r=null,a&&s?(l=c=!0,i=0):(o=--i>0?n[i-1]:-1,l=c=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([PO.DIFF_EQUAL,""]);for(var t,n=0,i=0,r=0,o="",a="";n<e.length;)switch(e[n][0]){case PO.DIFF_INSERT:r++,a+=e[n][1],n++;break;case PO.DIFF_DELETE:i++,o+=e[n][1],n++;break;case PO.DIFF_EQUAL:i+r>1?(0!==i&&0!==r&&(0!==(t=this.diff_commonPrefix(a,o))&&(n-i-r>0&&e[n-i-r-1][0]===PO.DIFF_EQUAL?e[n-i-r-1][1]+=a.substring(0,t):(e.splice(0,0,[PO.DIFF_EQUAL,a.substring(0,t)]),n++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),n-=i+r,e.splice(n,i+r),o.length&&(e.splice(n,0,[PO.DIFF_DELETE,o]),n++),a.length&&(e.splice(n,0,[PO.DIFF_INSERT,a]),n++),n++):0!==n&&e[n-1][0]===PO.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,o="",a=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(n=1;n<e.length-1;)e[n-1][0]===PO.DIFF_EQUAL&&e[n+1][0]===PO.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),s=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,o=0,a=0;for(n=0;n<e.length&&(e[n][0]!==PO.DIFF_INSERT&&(i+=e[n][1].length),e[n][0]!==PO.DIFF_DELETE&&(r+=e[n][1].length),!(i>t));n++)o=i,a=r;return e.length!==n&&e[n][0]===PO.DIFF_DELETE?a:a+(t-o)},e.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,a=0;a<e.length;a++){var s=e[a][0],l=e[a][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(s){case PO.DIFF_INSERT:t[a]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case PO.DIFF_DELETE:t[a]='<del style="background:#ffe6e6;">'+l+"</del>";break;case PO.DIFF_EQUAL:t[a]="<span>"+l+"</span>"}}return t.join("")},e.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==PO.DIFF_INSERT&&(t[n]=e[n][1]);return t.join("")},e.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==PO.DIFF_DELETE&&(t[n]=e[n][1]);return t.join("")},e.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=e[r][0],a=e[r][1];switch(o){case PO.DIFF_INSERT:n+=a.length;break;case PO.DIFF_DELETE:i+=a.length;break;case PO.DIFF_EQUAL:t+=_O(n,i),n=0,i=0}}return t+=_O(n,i)},e.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case PO.DIFF_INSERT:t[n]="+"+encodeURI(e[n][1]);break;case PO.DIFF_DELETE:t[n]="-"+e[n][1].length;break;case PO.DIFF_EQUAL:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,r=0,o=t.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[i++]=[PO.DIFF_INSERT,decodeURI(s)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var l=parseInt(s,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+s);var c=e.substring(r,r+=l);"="===o[a].charAt(0)?n[i++]=[PO.DIFF_EQUAL,c]:n[i++]=[PO.DIFF_DELETE,c];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(r!==e.length)throw new Error("Delta length ("+r+") does not equal source text length ("+e.length+")");return n},e.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=_O(0,WO(n,e.length)),e===t?0:e.length?e.substring(n,n+t.length)===t?n:this.match_bitap_(e,t,n):-1},e.prototype.patch_make=function(e,t,n){var i,r;if("string"==typeof e&&"string"==typeof t&&void 0===n)i=e,(r=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)r=e,i=this.diff_text1(r);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)i=e,r=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make");i=e,r=n}if(0===r.length)return[];for(var o=[],a=new YO,s=0,l=0,c=0,u=i,h=i,p=0;p<r.length;p++){var d=r[p][0],f=r[p][1];switch(s||d===PO.DIFF_EQUAL||(a.start1=l,a.start2=c),d){case PO.DIFF_INSERT:a.diffs[s++]=r[p],a.length2+=f.length,h=h.substring(0,c)+f+h.substring(c);break;case PO.DIFF_DELETE:a.length1+=f.length,a.diffs[s++]=r[p],h=h.substring(0,c)+h.substring(c+f.length);break;case PO.DIFF_EQUAL:f.length<=2*this.patchMargin&&s&&r.length!==p+1?(a.diffs[s++]=r[p],a.length1+=f.length,a.length2+=f.length):f.length>=2*this.patchMargin&&s&&(this.patch_addContext_(a,u),o.push(a),a=new YO,s=0,u=h,l=c)}d!==PO.DIFF_INSERT&&(l+=f.length),d!==PO.DIFF_DELETE&&(c+=f.length)}return s&&(this.patch_addContext_(a,u),o.push(a)),o},e.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],r=new YO,o=0;o<i.diffs.length;o++)r.diffs[o]=[i.diffs[o][0],i.diffs[o][1]];r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,t[n]=r}return t},e.prototype.patch_apply=function(e,t){if(0===e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],o=0;o<e.length;o++){var a=e[o].start2+i,s=this.diff_text1(e[o].diffs),l=void 0,c=-1;if(s.length>this.matchMaxBits?-1!==(l=this.match_main(t,s.substring(0,this.matchMaxBits),a))&&(-1===(c=this.match_main(t,s.substring(s.length-this.matchMaxBits),a+s.length-this.matchMaxBits))||l>=c)&&(l=-1):l=this.match_main(t,s,a),-1===l)r[o]=!1,i-=e[o].length2-e[o].length1;else{r[o]=!0,i=l-a;var u=void 0;if(s===(u=-1===c?t.substring(l,l+s.length):t.substring(l,c+this.matchMaxBits)))t=t.substring(0,l)+this.diff_text2(e[o].diffs)+t.substring(l+s.length);else{var h=this.diff_main(s,u,!1);if(s.length>this.matchMaxBits&&this.diff_levenshtein(h)/s.length>this.patchDeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p=0,d=0,f=0;f<e[o].diffs.length;f++){var g=e[o].diffs[f];g[0]!==PO.DIFF_EQUAL&&(d=this.diff_xIndex(h,p)),g[0]===PO.DIFF_INSERT?t=t.substring(0,l+d)+g[1]+t.substring(l+d):g[0]===PO.DIFF_DELETE&&(t=t.substring(0,l+d)+t.substring(l+this.diff_xIndex(h,p+g[1].length))),g[0]!==PO.DIFF_DELETE&&(p+=g[1].length)}}}}}return[t=t.substring(n.length,t.length-n.length),r]},e.prototype.patch_addPadding=function(e){for(var t=this.patchMargin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var r=e[0],o=r.diffs;if(0===o.length||o[0][0]!==PO.DIFF_EQUAL)o.unshift([PO.DIFF_EQUAL,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>o[0][1].length){var a=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(0===(o=(r=e[e.length-1]).diffs).length||o[o.length-1][0]!==PO.DIFF_EQUAL)o.push([PO.DIFF_EQUAL,n]),r.length1+=t,r.length2+=t;else if(t>o[o.length-1][1].length){a=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a}return n},e.prototype.patch_splitMax=function(e){for(var t=this.matchMaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var i=e[n];e.splice(n--,1);for(var r=i.start1,o=i.start2,a="";0!==i.diffs.length;){var s=new YO,l=!0;for(s.start1=r-a.length,s.start2=o-a.length,""!==a&&(s.length1=s.length2=a.length,s.diffs.push([PO.DIFF_EQUAL,a]));0!==i.diffs.length&&s.length1<t-this.patchMargin;){var c=i.diffs[0][0],u=i.diffs[0][1];c===PO.DIFF_INSERT?(s.length2+=u.length,o+=u.length,s.diffs.push(i.diffs.shift()),l=!1):c===PO.DIFF_DELETE&&1===s.diffs.length&&s.diffs[0][0]===PO.DIFF_EQUAL&&u.length>2*t?(s.length1+=u.length,r+=u.length,l=!1,s.diffs.push([c,u]),i.diffs.shift()):(u=u.substring(0,t-s.length1-this.patchMargin),s.length1+=u.length,r+=u.length,c===PO.DIFF_EQUAL?(s.length2+=u.length,o+=u.length):l=!1,s.diffs.push([c,u]),u===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(u.length))}a=(a=this.diff_text2(s.diffs)).substring(a.length-this.patchMargin);var h=this.diff_text1(i.diffs).substring(0,this.patchMargin);""!==h&&(s.length1+=h.length,s.length2+=h.length,0!==s.diffs.length&&s.diffs[s.diffs.length-1][0]===PO.DIFF_EQUAL?s.diffs[s.diffs.length-1][1]+=h:s.diffs.push([PO.DIFF_EQUAL,h])),l||e.splice(++n,0,s)}}},e.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var o=n[i].match(r);if(!o)throw new Error("Invalid patch string: "+n[i]);var a=new YO;t.push(a),a.start1=parseInt(o[1],10),""===o[2]?(a.start1--,a.length1=1):"0"===o[2]?a.length1=0:(a.start1--,a.length1=parseInt(o[2],10)),a.start2=parseInt(o[3],10),""===o[4]?(a.start2--,a.length2=1):"0"===o[4]?a.length2=0:(a.start2--,a.length2=parseInt(o[4],10)),i++;for(var s=void 0,l=void 0,c=void 0;i<n.length;){s=n[i].charAt(0),c=n[i].substring(1);try{l=decodeURI(c)}catch(e){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"===s)a.diffs.push([PO.DIFF_DELETE,l]);else if("+"===s)a.diffs.push([PO.DIFF_INSERT,l]);else if(" "===s)a.diffs.push([PO.DIFF_EQUAL,l]);else{if("@"===s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+l)}i++}}return t},e.prototype.diff_compute_=function(e,t,n,i){var r;if(!e)return[[PO.DIFF_INSERT,t]];if(!t)return[[PO.DIFF_DELETE,e]];var o=e.length>t.length?e:t,a=e.length>t.length?t:e,s=o.indexOf(a);if(-1!==s)return r=[[PO.DIFF_INSERT,o.substring(0,s)],[PO.DIFF_EQUAL,a],[PO.DIFF_INSERT,o.substring(s+a.length)]],e.length>t.length&&(r[0][0]=PO.DIFF_DELETE,r[2][0]=PO.DIFF_DELETE),r;if(1===a.length)return[[PO.DIFF_DELETE,e],[PO.DIFF_INSERT,t]];var l=this.diff_halfMatch_(e,t);if(l){var c=l[0],u=l[1],h=l[2],p=l[3],d=l[4],f=this.diff_main(c,h,n,i),g=this.diff_main(u,p,n,i);return f.concat([[PO.DIFF_EQUAL,d]],g)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},e.prototype.diff_lineMode_=function(e,t,n){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var r=i.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([PO.DIFF_EQUAL,""]);for(var a=0,s=0,l=0,c="",u="";a<o.length;){switch(o[a][0]){case PO.DIFF_INSERT:l++,u+=o[a][1];break;case PO.DIFF_DELETE:s++,c+=o[a][1];break;case PO.DIFF_EQUAL:if(s>=1&&l>=1){o.splice(a-s-l,s+l),a=a-s-l;for(var h=this.diff_main(c,u,!1,n),p=h.length-1;p>=0;p--)o.splice(a,0,h[p]);a+=h.length}l=0,s=0,c="",u=""}a++}return o.pop(),o},e.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,r=t.length,o=Math.ceil((i+r)/2),a=o,s=2*o,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var h=i-r,p=h%2!=0,d=0,f=0,g=0,m=0,v=0;v<o&&!(Date.now()>n);v++){for(var y=-v+d;y<=v-f;y+=2){for(var b=a+y,w=void 0,k=(w=y===-v||y!==v&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-y;w<i&&k<r&&e.charAt(w)===t.charAt(k);)w++,k++;if(l[b]=w,w>i)f+=2;else if(k>r)d+=2;else if(p){if((E=a+h-y)>=0&&E<s&&-1!==c[E])if(w>=(x=i-c[E]))return this.diff_bisectSplit_(e,t,w,k,n)}}for(var C=-v+g;C<=v-m;C+=2){for(var E=a+C,x=void 0,S=(x=C===-v||C!==v&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-C;x<i&&S<r&&e.charAt(i-x-1)===t.charAt(r-S-1);)x++,S++;if(c[E]=x,x>i)m+=2;else if(S>r)g+=2;else if(!p){if((b=a+h-C)>=0&&b<s&&-1!==l[b]){k=a+(w=l[b])-b;if(w>=(x=i-x))return this.diff_bisectSplit_(e,t,w,k,n)}}}}return[[PO.DIFF_DELETE,e],[PO.DIFF_INSERT,t]]},e.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),l=t.substring(i),c=this.diff_main(o,a,!1,r),u=this.diff_main(s,l,!1,r);return c.concat(u)},e.prototype.diff_linesToChars_=function(e,t){var n=[],i={};return n[0]="",{chars1:this.diff_linesToCharsMunge_(e,n,i,4e4),chars2:this.diff_linesToCharsMunge_(t,n,i,65535),lineArray:n}},e.prototype.diff_linesToCharsMunge_=function(e,t,n,i){for(var r="",o=0,a=-1,s=t.length;a<e.length-1;){-1===(a=e.indexOf("\n",o))&&(a=e.length-1);var l=e.substring(o,a+1);(n.hasOwnProperty?n.hasOwnProperty(l):void 0!==n[l])?r+=String.fromCharCode(n[l]):(s===i&&(l=e.substring(o),a=e.length),r+=String.fromCharCode(s),n[l]=s,t[s++]=l),o=a+1}return r},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0===n||0===i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=WO(n,i);if(e===t)return r;for(var o=0,a=1;;){var s=e.substring(r-a),l=t.indexOf(s);if(-1===l)return o;a+=l,0!==l&&e.substring(r-a)!==t.substring(0,a)||(o=a,a++)}},e.prototype.diff_halfMatch_=function(e,t){if(this.diffTimeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r,o,a,s,l,c=this.diff_halfMatchI_(n,i,Math.ceil(n.length/4)),u=this.diff_halfMatchI_(n,i,Math.ceil(n.length/2));if(!c&&!u)return null;var h=(r=u?c&&c[4].length>u[4].length?c:u:c)[4];return e.length>t.length?(o=r[0],a=r[1],s=r[2],l=r[3]):(s=r[0],l=r[1],o=r[2],a=r[3]),[o,a,s,l,h]},e.prototype.diff_halfMatchI_=function(e,t,n){for(var i,r,o,a,s=e.substring(n,n+Math.floor(e.length/4)),l="",c=t.indexOf(s,0);-1!==c;){var u=this.diff_commonPrefix(e.substring(n),t.substring(c)),h=this.diff_commonSuffix(e.substring(0,n),t.substring(0,c));l.length<h+u&&(l=t.substring(c-h,c)+t.substring(c,c+u),i=e.substring(0,n-h),r=e.substring(n+u),o=t.substring(0,c-h),a=t.substring(c+u)),c=t.indexOf(s,c+1)}return 2*l.length>=e.length?[i,r,o,a,l]:null},e.prototype.diff_cleanupSemanticScore_=function(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),i=t.charAt(0),r=n.match(HO),o=i.match(HO),a=r&&n.match(VO),s=o&&i.match(VO),l=a&&n.match(zO),c=s&&i.match(zO),u=l&&e.match(qO),h=c&&t.match(UO);return u||h?5:l||c?4:r&&!a&&s?3:a||s?2:r||o?1:0},e.prototype.match_bitap_=function(e,t,n){if(t.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(t),r=this.matchThreshold,o=e.indexOf(t,n);-1!==o&&(r=WO(this.match_bitapScore_(0,o,t,n),r),-1!==(o=e.lastIndexOf(t,n+t.length))&&(r=WO(this.match_bitapScore_(0,o,t,n),r)));var a,s,l=1<<t.length-1;o=-1;for(var c,u=t.length+e.length,h=0;h<t.length;h++){for(a=0,s=u;a<s;)this.match_bitapScore_(h,n+s,t,n)<=r?a=s:u=s,s=Math.floor((u-a)/2+a);u=s;var p=_O(1,n-s+1),d=WO(n+s,e.length)+t.length,f=Array(d+2);f[d+1]=(1<<h)-1;for(var g=d;g>=p;g--){var m=i[e.charAt(g-1)];if(f[g]=0===h?(f[g+1]<<1|1)&m:(f[g+1]<<1|1)&m|(c[g+1]|c[g])<<1|1|c[g+1],f[g]&l){var v=this.match_bitapScore_(h,g-1,t,n);if(v<=r){if(r=v,!((o=g-1)>n))break;p=_O(1,2*n-o)}}}if(this.match_bitapScore_(h+1,n,t,n)>r)break;c=f}return o},e.prototype.match_bitapScore_=function(e,t,n,i){var r=e/n.length,o=Math.abs(i-t);return this.matchDistance?r+o/this.matchDistance:o?1:r},e.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(0!==t.length){if(null==e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!==t.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var r=t.substring(e.start2-i,e.start2);r&&e.diffs.unshift([PO.DIFF_EQUAL,r]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([PO.DIFF_EQUAL,o]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+o.length,e.length2+=r.length+o.length}},e}(),YO=function(){function e(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return e.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case PO.DIFF_INSERT:e="+";break;case PO.DIFF_DELETE:e="-";break;case PO.DIFF_EQUAL:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e}();function XO(e,t,n){var i=new KO,r=i.diff_main(e,t,!0,0);r.length>2&&(i.diff_cleanupSemantic(r),i.diff_cleanupEfficiency(r));var o=i.patch_make(e,r);return i.patch_apply(o,n)[0]}function $O(e){var t=e.split("\n");return t.length>1&&""===t.last()&&t.pop(),t}function ZO(e,t){e.endsWith("\n")||(e+="\n"),t.endsWith("\n")||(t+="\n");var n=new KO,i=n.diff_lineMode(e,t);n.diff_cleanupSemantic(i);for(var r=createDiv("diff-view"),o=function(e,t){var n=createEl("div","diff-line");return t&&n.addClass("mod-"+t),null!=e&&n.setText(e),n.createEl("br"),n},a=[],s=function(e){if(0!==a.length){var t=0===r.childNodes.length,n=t||e?5:10;if(a.length>n){var i=[],o=createDiv("diff-collapsed");o.addEventListener("click",(function(){var e=o.parentNode;if(e){for(var t=0,n=i;t<n.length;t++){var r=n[t];e.insertBefore(r,o)}o.detach()}}));var s=0;if(t){for(var l=0;l<a.length-3;l++)i.push(a[l]),s++;r.appendChild(o);for(l=a.length-3;l<a.length;l++)r.appendChild(a[l])}else if(e){for(l=0;l<3;l++)r.appendChild(a[l]);r.appendChild(o);for(l=3;l<a.length;l++)i.push(a[l]),s++}else{for(l=0;l<3;l++)r.appendChild(a[l]);for(l=3;l<a.length-3;l++)i.push(a[l]),s++;r.appendChild(o);for(l=a.length-3;l<a.length;l++)r.appendChild(a[l])}o.setText("".concat(s," lines folded"))}else for(var c=0,u=a;c<u.length;c++){var h=u[c];r.appendChild(h)}a=[]}},l=[],c=[],u=function(){if(0!==l.length||0!==c.length){for(var e=0,t=l;e<t.length;e++){var n=t[e];r.appendChild(n)}for(var i=0,o=c;i<o.length;i++){n=o[i];r.appendChild(n)}l=[],c=[]}},h=function(e,t){var i=e!==t;if(e&&t&&i){var r=n.diff_wordMode(e,t);if(n.diff_levenshtein(r)<Math.max(e.length,t.length)/2){var h=createFragment(),p=createFragment();return function(e,t){for(var n=0;n<e.length;n++){var i=e[n];t(i[0],i[1])}}(r,(function(e,t){switch(e){case PO.DIFF_INSERT:p.createSpan({cls:"diff-changed",text:t});break;case PO.DIFF_DELETE:h.createSpan({cls:"diff-changed",text:t});break;case PO.DIFF_EQUAL:h.createSpan({text:t}),p.createSpan({text:t})}})),s(),l.push(o(h,"left")),void c.push(o(p,"right"))}}i?(s(),l.push(o(e,"left")),c.push(o(t,"right"))):(u(),a.push(o(e,null)))},p=0;p<i.length;p++){var d=i[p][0],f=$O(i[p][1]),g=p+1;if(d===PO.DIFF_DELETE&&g<i.length&&i[g][0]===PO.DIFF_INSERT){for(var m=$O(i[g][1]),v=Math.max(f.length,m.length),y=0;y<v;y++){h(f[y],m[y])}p++}else for(var b=0,w=f;b<w.length;b++){var k=w[b];switch(d){case PO.DIFF_INSERT:h(null,k);break;case PO.DIFF_DELETE:h(k,null);break;case PO.DIFF_EQUAL:h(k,k)}}}return u(),s(!0),r}function QO(e,t,n){iS(e,t,{classes:["mod-wide","mod-error"]}),n&&setTimeout((function(){return rS()}),2e3)}var JO=new WeakMap;function eF(e){for(;e;){if(JO.has(e))return JO.get(e);e=e.parentElement}return 0}var tF=function(e){function t(t,n){var i=e.call(this)||this;return i.app=t.app,i.containerEl=t.containerEl,i.file=n,i.containerEl.addClass("media-embed"),i}return f(t,e),t.prototype.onunload=function(){xt(this.containerEl),e.prototype.onunload.call(this)},t}(nb),nF=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("image-embed"),i}return f(t,e),t.prototype.loadFile=function(){return AI.displayInEl(this.file,this.app,this.containerEl)},t}(tF),iF=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("audio-embed"),i}return f(t,e),t.prototype.loadFile=function(){return TI.displayInEl(this.file,this.app,this.containerEl)},t}(tF),rF=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.containerEl.addClass("video-embed"),i}return f(t,e),t.prototype.loadFile=function(){return RO.displayInEl(this.file,this.app,this.containerEl)},t}(tF),oF=function(e){function t(t,n,i){var r=e.call(this)||this;return r.app=t.app,r.ctx=t,r.containerEl=t.containerEl,r.containerEl.addClass("file-embed","mod-generic"),r.file=n,r.subpath=i,r.headerEl=r.containerEl.createDiv({cls:"file-embed-title"},(function(e){e.createSpan({cls:"file-embed-icon"},(function(e){gb(e,"lucide-file")})),e.appendText(" "+r.file.name)})),r}return f(t,e),t.prototype.loadFile=function(){return v(this,void 0,Promise,(function(){var e,t,n,i;return y(this,(function(r){return t=(e=this).containerEl,n=e.ctx,i=e.app,t.addEventListener("click",(function(e){i.workspace.getLeaf(hw.isModEvent(e)).openLinkText(n.linktext,n.sourcePath)})),[2]}))}))},t}(nb),aF=function(e){function t(t){var n=e.call(this)||this;return n.file=null,n.onClick=function(e){var t=n.ctx,i=t.app,r=t.linktext,o=t.sourcePath;i.workspace.openLinkText(r,o,hw.isModEvent(e))},n.ctx=t,n.containerEl=t.containerEl,n}return f(t,e),t.prototype.loadFile=function(){return v(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){return t=(e=this).containerEl,n=e.ctx.linktext,t.appendText(rf.plugins.pagePreview.labelEmptyNote({linktext:n})),t.addClass("file-embed","mod-empty"),t.addEventListener("click",this.onClick),[2]}))}))},t.prototype.onload=function(){var t=this;e.prototype.onload.call(this);var n=this.ctx.app,i=rt((function(){if(t._loaded&&!(t._children.length>0)){var e=t.ctx,n=e.app,i=e.linktext,r=e.sourcePath,o=Bx(i).path;if(n.metadataCache.getFirstLinkpathDest(o,r)){t.containerEl.removeClass("file-embed","mod-empty"),t.containerEl.removeEventListener("click",t.onClick),t.containerEl.empty();var a=lF.load(t.ctx);a&&(t.addChild(a),a.loadFile())}}}),500,!0);this.registerEvent(n.vault.on("create",i)),this.registerEvent(n.vault.on("rename",i))},t}(nb),sF=function(e){function t(){var t=e.call(this)||this;return t.embedByExtension={},t.registerExtensions(mM,(function(e,t,n){return e.displayMode?new TP(e,t,n):new cF(e,t,n)})),t.registerExtensions(pM,(function(e,t){return new nF(e,t)})),t.registerExtensions(dM,(function(e,t){return new iF(e,t)})),t.registerExtensions(fM,(function(e,t){return new rF(e,t)})),t.registerExtensions(gM,(function(e,t,n){return new BO(e,t,n)})),t}return f(t,e),t.prototype.unregisterExtensions=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];this.unregisterExtension(i)}},t.prototype.unregisterExtension=function(e){delete this.embedByExtension[e]},t.prototype.registerExtension=function(e,t){var n=this.embedByExtension;if(this.isExtensionRegistered(e))throw new Error('Attempting to register an embed for an already registered extension "'.concat(e,'"'));n[e]=t},t.prototype.registerExtensions=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];this.registerExtension(r,t)}},t.prototype.isExtensionRegistered=function(e){return this.embedByExtension.hasOwnProperty(e)},t.prototype.getEmbedCreator=function(e){return this.isExtensionRegistered(e.extension)?this.embedByExtension[e.extension]:null},t}(Ny),lF=function(){function e(){}return e.load=function(e){var t=e.app,n=e.containerEl,i=e.linktext,r=e.sourcePath;e.depth=e.depth+1,n.empty();var o=null,a=Bx(i),s=a.subpath,l=a.path,c=t.metadataCache.getFirstLinkpathDest(l,r);if(c){var u=t.embedRegistry.getEmbedCreator(c);u&&e.depth<=5&&(o=u(e,c,s)),o||(o=new oF(e,c,s))}return o||(o=new aF(e)),n.addClass("is-loaded"),JO.set(n,e.depth),o},e}(),cF=function(e){function t(t,n,i){var r=e.call(this,t.app,t.containerEl,n,t.state)||this;r.subpath="",r.data="",r.subpathNotFound=!1,r.before="",r.after="",r.heading="",r.indent="",r.lastSavedData=null,r.saving=!1,r.saveAgain=!1,r.fileBeingRenamed=null,r.subpath=i,r.containerEl.addClass("markdown-embed"),t.showInline&&(r.containerEl.addClass("inline-embed"),r.headerEl=r.containerEl.createDiv({cls:"embed-title markdown-embed-title",prepend:!0}),r.containerEl.createDiv("markdown-embed-link",(function(e){gb(e,"lucide-link"),aS(e,"Open link"),gt(e),e.onClickEvent((function(e){0!==e.button&&1!==e.button||(e.preventDefault(),r.app.workspace.openLinkText(t.linktext,t.sourcePath,hw.isModEvent(e)))}))})));var o=r.inlineTitleEl=createDiv("inline-title");return o.contentEditable=r.subpath?"false":"true",o.spellcheck=r.app.vault.getConfig("spellcheck"),o.autocapitalize="on",o.tabIndex=-1,o.enterKeyHint=Lt.isAndroidApp?"enter":"done",o.addEventListeners({focus:function(){return r.fileBeingRenamed=r.file},blur:function(){return r.saveTitle(o)},input:function(){return r.onTitleChange(o)},paste:function(e){return r.onTitlePaste(o,e)},keydown:function(e){return r.onTitleKeydown(e)}}),r}return f(t,e),t.prototype.showPreview=function(t){e.prototype.showPreview.call(this,t);var n=this.previewMode.renderer;n.header||n.addHeader(),n.header.el.prepend(this.inlineTitleEl)},t.prototype.save=function(t,n){var i=this;if(void 0===n&&(n=!1),e.prototype.save.call(this,t,n),!this.subpathNotFound){var r=t,o=this,a=o.before,s=o.after,l=o.heading,c=o.indent;c&&(r=r.split("\n").map((function(e){return c+e})).join("\n")),r=this.data=a+l+r+s,this.app.workspace.onQuickPreview(this.file,r),n&&v(i,void 0,void 0,(function(){var e,t,n,i,o,a;return y(this,(function(s){switch(s.label){case 0:if(this.dirty=!1,t=(e=this).file,n=e.app,i=n.vault,!t||t.deleted)return[2];if(this.saving)return this.saveAgain=!0,[2];if(this.lastSavedData===r||null===this.lastSavedData)return[3,6];o=this.lastSavedData,this.lastSavedData=r,this.saving=!0,s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,jD(i.adapter.promise)];case 2:return s.sent(),[4,i.modify(t,r)];case 3:return s.sent(),[3,6];case 4:throw a=s.sent(),this.lastSavedData=o,console.error(a),new CI(rf.interface.msgFailToSaveFile({filepath:t.path,message:a.message}),0),this.app.fileManager.storeTextFileBackup(t.path,r),a;case 5:return this.saving=!1,this.saveAgain&&this.save(this.text),[7];case 6:return[2]}}))}))}},t.prototype.onTitlePaste=function(e,t){tw(e,t)},t.prototype.onTitleChange=function(e){rS();var t=this.file;ew(e);var n=e.getText().trim(),i=mI(this.app,t,n,!1);i&&QO(e,i,!0)},t.prototype.onTitleKeydown=function(e){if(!e.isComposing)if("Escape"===e.key&&(e.preventDefault(),this.inlineTitleEl.setText(this.file.basename),this.inlineTitleEl.blur()),"Enter"===e.key||"Tab"===e.key)e.preventDefault(),this.inlineTitleEl.blur(),Lt.isMobile&&this.editMode.editor.focus();else if("ArrowDown"===e.key){var t=e.targetNode,n=t.win.getSelection();if(n&&n.rangeCount>=1&&t.instanceOf(HTMLElement)){var i=n.getRangeAt(0);if(t===i.startContainer||t.contains(i.startContainer)){var r=i.getBoundingClientRect();r.bottom+r.height/2>=t.getBoundingClientRect().bottom&&(e.preventDefault(),this.editMode?this.editMode.setState({focus:!0,cursor:{from:{line:0,ch:0},to:{line:0,ch:0}}}):this.inlineTitleEl.blur())}}}},t.prototype.saveTitle=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:if(rS(),n=(t=this).file,i=t.subpath,r=t.fileBeingRenamed,n!==r)return[2];if(o=e.getText().trim(),i)return[3,5];if(a=mI(this.app,n,o,!0))return e.setText(n.basename),QO(e,a,!0),[2];if(s=n.getNewPathAfterRename(o),n.path===s)return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(n,s)];case 2:return u.sent(),[3,4];case 3:return(l=u.sent())&&(c=l.message||l.code||l.toString(),QO(e,c,!0)),[3,4];case 4:e.setText(n.basename),this.fileBeingRenamed=null,u.label=5;case 5:return[2]}}))}))},t.prototype.onload=function(){e.prototype.onload.call(this),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this)),this.registerEvent(this.app.vault.on("rename",this.onFileRename,this))},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.applyScope(null)},t.prototype.onFileChanged=function(e,t,n){e!==this.file||t===this.data||this.dirty||this.loadFileInternal(t,n)},t.prototype.onFileRename=function(e,t){e instanceof Xy&&e===this.file&&!this.subpath&&this.inlineTitleEl.setText(e.basename)},t.prototype.loadFile=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return t=(e=this).app,n=e.file,i=e.headerEl,r=e.previewMode,o=e.subpath,a=e.state,o||(null==i||i.setText(n.basename),this.inlineTitleEl.setText(n.basename),r.registerEvent(t.workspace.on("quick-preview",(function(e,t){e===c.file&&t!==c.data&&c.loadContents(t)})))),l=this,[4,t.vault.cachedRead(n)];case 1:return s=l.data=u.sent(),this.loadFileInternal(s),a&&a.hasOwnProperty("scroll")&&this.previewMode.renderer.applyScrollDelayed(a.scroll,{highlight:!0,center:!0}),this.previewMode.renderer.applyFoldInfo(this.getFoldInfo()),[2]}}))}))},t.prototype.getFoldInfo=function(){return this.app.foldManager.load(this.file)},t.prototype.loadFileInternal=function(e,t){var n=this.file,i=this.lastSavedData;if(this.lastSavedData=e,i){if(i===e)return;if(this.dirty){var r=this.data;if(r===e)return;r!==i&&(e=XO(i,r,e),new CI(rf.interface.msgFileChanged({file:n.path})))}}this.loadContents(e,t)},t.prototype.loadContents=function(e,t){var n=this,i=n.app,r=n.file,o=n.subpath;if(t||(t=i.metadataCache.getFileCache(r)),o&&!t&&(this.subpathNotFound=!1),o&&t){var a=_x(t,o);this.subpathNotFound=!a;var s="",l="",c="",u="";if(a){var h=jx(e,t,a,this.editable);s=h.before,l=h.after,c=h.heading,u=h.indent,e=h.content,"heading"===a.type&&(this.inlineTitleEl.setText(a.current.heading),this.inlineTitleEl.setAttr("data-level",String(a.current.level)))}this.heading=c,this.before=s,this.after=l,this.indent=u}this.subpathNotFound&&(e="### Unable to find section ".concat(o," in ").concat(r.basename)),this.set(e)},t.prototype.applyScope=function(e){e!==this.scope&&(this.scope&&this.app.keymap.popScope(this.scope),e&&this.app.keymap.pushScope(e),this.scope=e)},t.prototype.onMarkdownFold=function(){var e=this.file,t="preview"===this.getMode()?this.previewMode.renderer.getFoldInfo():this.editMode.getFoldInfo();return this.app.foldManager.save(e,t)},t}(gI);function uF(e){return FE(e,null,{})}function hF(e){return function(e,t,n){let i=null;if("function"==typeof t||Array.isArray(t)?i=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n||t||{};if(!e)return}return new XC(e,i,n).toString(n)}(e,null,{nullStr:"",lineWidth:0})}var pF=window.moment;function dF(e,t,n,i){return v(this,void 0,void 0,(function(){var r,o,a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:return i=null!=i?i:$e(6),r=t.editor,o=t.file,[4,t.app.metadataCache.blockCache.getForFile(e,o)];case 1:for(a=d.sent(),s=0,l=a.blocks;s<l.length;s++)if(c=l[s],(u=c.node.position)&&u.start.line-1<=n.line&&u.end.line-1>=n.line)return h={content:a.content,node:c.node},p=fF(h,i),r.cm.dispatch({changes:{from:p.blockEnd,insert:p.addition}}),[2];return[2]}}))}))}function fF(e,t){var n=e.content,i=e.node,r=i.position.start.offset,o=i.position.end.offset,a=0,s="paragraph"===i.type||"listItem"===i.type,l="^"+t;if(s){if(l=" "+l,"listItem"===i.type){var c=i.children;if(c&&c.length>1){var u=c[c.length-1],h=c[c.length-2];"list"===u.type&&(o=h.position.end.offset)}}}else l="\n\n"+l,a=2;return s||"\n"===n.charAt(o)&&"\n"===n.charAt(o+1)||(l+="\n",a++),{blockStart:r,blockEnd:o,addition:l,newlines:a}}function gF(e,t){var n=e.app.metadataCache,i=e.file,r=n.getFileCache(i);if(!r)return null;function o(e){return t.line<e.position.start.line?-1:t.line>e.position.end.line?1:0}var a=nt(r.sections||[],o);return"list"===(null==a?void 0:a.type)?nt(r.listItems||[],o):"heading"===(null==a?void 0:a.type)?nt(r.headings||[],o):a}var mF=new RegExp(JE.source+"$"),vF=/^#\d+$/;function yF(e){return!!e&&mF.test(e)&&!vF.test(e)}var bF=dr.define(),wF=Ba.define((function(){return{mousedown:!1,frontmatterEnd:-1,showProperties:!1}})),kF=new Set(["em","strong","inline-code","strikethrough","highlight","link","image","hmd-internal-link","hmd-embed","formatting-link","footref"]),CF=/^\s*(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,EF=ca.mark({class:"is-invalid"}),xF=ca.replace({block:!0}),SF=ca.replace({}),MF=ca.replace({}),TF=ca.mark({class:"cm-underline",attributes:{draggable:"true"}}),DF=ca.mark({class:"cm-transparent"}),AF=ca.mark({class:"is-unresolved"}),LF=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(e){return createSpan({cls:"cm-blockquote-border cm-transparent",text:">"})},t}(sa),PF=ca.replace({widget:new LF}),IF=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.eq=function(e){return!0},t.prototype.toDOM=function(e){var t=createDiv("hr cm-line");return t.createEl("br"),t.addEventListener("click",(function(){var n=e.posAtDOM(t),i=e.state.doc.lineAt(n);e.dispatch({selection:{head:i.from,anchor:i.to}})})),t.createEl("hr"),t},t.prototype.destroy=function(e){e.detach()},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 20},enumerable:!1,configurable:!0}),t}(sa)),OF=ca.mark({class:"list-bullet"}),FF=function(e){function t(t){var n=e.call(this)||this;return n.content=t,n}return f(t,e),t.prototype.eq=function(e){return e.content===this.content},t.prototype.updateDOM=function(e){if(e.instanceOf(HTMLLabelElement)&&e.firstChild&&e.firstChild.instanceOf(HTMLInputElement)){var t=e.firstChild;return t.setAttribute("data-task",this.content),t.checked=" "!==this.content,!0}return!1},t.prototype.toDOM=function(e){var t=createEl("label","task-list-label"),n=t.createEl("input",{cls:"task-list-item-checkbox",type:"checkbox"});return n.setAttribute("data-task",this.content),n.checked=" "!==this.content,t.addEventListener("mousedown",(function(e){e.preventDefault()})),n.addEventListener("input",(function(){var t=e.posAtDOM(n),i=e.state.doc.lineAt(t),r=i.text.search(/\[.]/);if(-1!==r){var o=i.text.charAt(r+1),a=i.from+r+1;e.dispatch({changes:[{from:a,to:a+1,insert:" "===o?"x":" "}]})}})),t},t}(sa),BF=function(e){function t(t){var n=e.call(this)||this;return n.styles=t,n}return f(t,e),t.prototype.eq=function(e){return this.styles===e.styles},t.prototype.toDOM=function(e){return createSpan(this.styles)},t.prototype.ignoreEvent=function(e){return!1},t}(sa),NF=function(e){function t(t,n){var i=e.call(this)||this;return i.lang=t,i.code=n,i}return f(t,e),t.prototype.eq=function(e){return e.lang===this.lang&&e.code===this.code},t.prototype.toDOM=function(e){var t=this,n=createSpan({cls:"code-block-flair",text:this.lang});return this.lang||gb(n,"lucide-copy"),aS(n,rf.interface.menu.copy()),n.addEventListener("click",(function(){return v(t,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.code).endsWith("\n")&&(e=e.substr(0,e.length-1)),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),new CI(rf.interface.copied({context:"generic"})),[2]}}))}))})),n},t}(sa);var RF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start=-1,t.end=-1,t}return f(t,e),t.prototype.setPos=function(e,t){this.start=e,this.end=t},t.prototype.hookClickHandler=function(e,n){this.setOwner(n),Jb(n,(function(i){for(var r=i.targetNode,o=e.contentDOM;r&&r!==o;){if(r instanceof HTMLElement&&r.hasClass("cm-editor"))return;r=r.parentNode}t.selectElement(e,n)}))},t.prototype.addEditButton=function(e,n){this.setOwner(n);var i=n.createDiv("edit-block-button");gb(i,"lucide-code-2"),aS(i,"Edit this block"),i.addEventListener("click",(function(){t.selectElement(e,n)}))},t.prototype.resizeWidget=function(e,t){new ResizeObserver((function(){return e.requestMeasure()})).observe(t,{box:"border-box"})},t.prototype.toDOM=function(e){var t=this.containerEl;return t||(this.containerEl=t=this.initDOM(e)),t},t.prototype.setOwner=function(e){t.widgetOwner.set(e,this)},t.selectElement=function(e,n){var i=t.getOwner(n),r=i.start,o=i.end;if(r<0||o<0)!function(e,t){try{var n=t.posAtDOM(e);t.dispatch({selection:{head:n,anchor:n}}),t.focus()}catch(e){}}(n,e);else{Lt.isMobile&&(o=r);try{e.focus(),e.dispatch({selection:{head:r,anchor:o},scrollIntoView:!0})}catch(e){}}},t.getOwner=function(e){return t.widgetOwner.get(e)},t.widgetOwner=new WeakMap,t}(sa),HF=function(e){function t(t,n){var i=e.call(this)||this;return i.children=[],i.app=t,i.editor=n,i}return f(t,e),Object.defineProperty(t.prototype,"noReuse",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){this.editor.addChild(e),this.children.push(e)},t}(RF),VF=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.become=function(e,t){this.setOwner(e),this.containerEl=e},t.prototype.updateDOM=function(e,t){return!!this.patchDOM(e,t)&&(this.setOwner(e),this.containerEl=e,!0)},t}(RF),zF=function(e){function t(t,n){var i=e.call(this)||this;return i.url=t,i.title=n,i}return f(t,e),t.prototype.eq=function(e){return this.url===e.url&&this.title===e.title},t.prototype.patchDOM=function(e){return!(dA(this.url)||!e.instanceOf(HTMLImageElement))&&(e.src!==this.url&&(e.src=this.url),this.applyTitle(e,this.title),!0)},t.prototype.initDOM=function(e){var t,n=dA(this.url);if(n)t=fA(n);else{var i=t=createEl("img");i.src=this.url,this.applyTitle(i,this.title)}return this.hookClickHandler(e,t),this.resizeWidget(e,t),t},t.prototype.applyTitle=function(e,t){var n=0,i=0;if(t){var r=function(e){var t=ZE(e);return!!t&&(n=t.x,i=t.y,!0)},o=t.lastIndexOf("|");-1!==o?r(t.substr(o+1))&&(t=t.substr(0,o)):r(t)&&(t="")}t||(t=ie(this.url)),n>0&&(e.width=n),i>0&&(e.height=i),e.setAttr("alt",t)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 30},enumerable:!1,configurable:!0}),t}(VF),qF=function(e){function t(t,n,i,r,o,a){var s=e.call(this,t,n)||this;return s.sourcePath=i,s.href=r,s.title=o,s.depth=a,s}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=t.app,i=t.sourcePath,r=t.href,o=t.title,a=t.depth,s=this.containerEl=createDiv("internal-embed");s.tabIndex=-1,s.setAttr("src",r),this.applyTitle(s,o);var l=lF.load({app:n,linktext:r,sourcePath:i,containerEl:s,displayMode:!1,showInline:!0,depth:a});return l&&(this.addChild(l),l.loadFile()),l instanceof BO?this.addEditButton(e,s):this.hookClickHandler(e,s),this.resizeWidget(e,s),s},t.prototype.applyTitle=function(e,t){this.title=t;var n=0,i=0;if(t){var r=function(e){var t=ZE(e);return!!t&&(n=t.x,i=t.y,!0)},o=t.lastIndexOf("|");-1!==o?r(t.substr(o+1))&&(t=t.substr(0,o)):r(t)&&(t="")}e.setAttr("alt",t||null),e.setAttr("width",0===n?null:String(n)),e.setAttr("height",0===i?null:String(i));var a=e.firstChild;a&&a.instanceOf(HTMLImageElement)&&(a.setAttr("alt",t||null),a.setAttr("width",0===n?null:String(n)),a.setAttr("height",0===i?null:String(i)))},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 100},enumerable:!1,configurable:!0}),t}(HF),UF=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.installed=!1,o.rendered=!1,o.lang=i,o.code=r,o}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=this,i=n.app,r=n.editor,o=n.code,a=n.lang,s=this.containerEl=createDiv("cm-preview-code-block cm-embed-block markdown-rendered");s.tabIndex=-1;var l=s.createEl("pre"),c=l.createEl("code","language-"+a);if(FA.set(c,o),"mermaid"===a)IA(e.contentDOM,[c]);else if("query"===a)this.addChild(MP(i,o,l,r.path));else if(LA.codeBlockPostProcessors.hasOwnProperty(a)){s.empty();var u=s.createDiv("block-language-"+a);(0,LA.codeBlockPostProcessors[a])(o,u,{docId:$e(16),sourcePath:r.path,frontmatter:{},promises:[],addChild:function(e){return t.addChild(e)},getSectionInfo:function(n){return s.contains(n)?{lineStart:t.lineStart,lineEnd:t.lineEnd,text:e.state.doc.toString()}:null},containerEl:e.scrollDOM,el:u});var h=eF(e.scrollDOM),p=s.findAll(".internal-embed:not(.is-loaded)");if(p.length>0)for(var d=0,f=p;d<f.length;d++){var g=f[d],m=g.getAttribute("src"),v=lF.load({app:i,linktext:m,sourcePath:r.path,containerEl:g,displayMode:!0,showInline:!0,depth:h});v&&(this.addChild(v),v.loadFile())}}else c.setText(o);return this.addEditButton(e,s),this.resizeWidget(e,s),s},t.canRenderLang=function(e){return"mermaid"===e||"query"===e||LA.codeBlockPostProcessors.hasOwnProperty(e)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(HF),WF=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.text=i,o.clazz=r,o}return f(t,e),t.prototype.initDOM=function(e){var t=this,n=this,i=n.app,r=n.editor,o=n.text,a=n.clazz,s=this.containerEl=createDiv("cm-embed-block "+a);s.tabIndex=-1;var l=s.createDiv("markdown-rendered"),c=rx(o),u=cx(c);Rw(c,"checklist",(function(e){var t=e.position.start.line-1;e.data.hProperties["data-line"]=String(t)}));var h=hM(ux(c));l.toggleClass("rtl",i.vault.getConfig("rightToLeft")),l.toggleClass("show-indentation-guide",i.vault.getConfig("showIndentGuide")),l.appendChild(h);return DP.postProcess(this.app,{docId:$e(16),sourcePath:r.path,frontmatter:u,promises:[],addChild:function(e){return t.addChild(e)},getSectionInfo:function(){return null},containerEl:s,el:l,displayMode:!1}),this.resolveLinks(),this.hookClickHandler(e,s),this.addEditButton(e,s),this.resizeWidget(e,s),s},t.prototype.resolveLinks=function(){for(var e=this.app,t=this.containerEl,n=0,i=t.findAll("a.internal-link");n<i.length;n++){var r=i[n],o=r.getAttr("data-href")||r.getAttr("href");if(o&&LA.belongsToMe(r,t)){var a=Fx(o),s=e.metadataCache.getFirstLinkpathDest(a,this.editor.path);r.toggleClass("is-unresolved",!s)}}},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(HF),_F=function(e){function t(t,n,i,r){return e.call(this,t,n,r,"cm-callout")||this}return f(t,e),t.prototype.initDOM=function(t){var n=this,i=e.prototype.initDOM.call(this,t);return i.on("click",".task-list-item-checkbox",(function(e,r){if(function(e){for(;e;){if(e===i)return!0;if(e.classList.contains("markdown-preview-view"))return!1;var t=e.parentElement;if(!t)return!1;e=t}}(r)){var o=parseInt(r.getAttribute("data-line"));if(!(o<0||isNaN(o))&&r.instanceOf(HTMLInputElement)){e.preventDefault();var a=SP.toggleCheckbox(n.text,o);null!==a&&(n.text=a.text,t.dom.win.setTimeout((function(){var e=" "!==a.char;r.checked=e;var t=r.parentNode;t&&t.instanceOf(HTMLLIElement)&&(t.setAttr("data-task",a.char),t.toggleClass("is-checked",e))}),0),t.dispatch({changes:[{from:n.start,to:n.end,insert:a.text}]}))}}})),i},t}(WF),jF=function(e){function t(t,n,i){return e.call(this,t,n,i,"cm-table-widget")||this}return f(t,e),t}(WF),GF=function(e){function t(t,n){var i=e.call(this)||this;return i.math=t,i.block=n,i}return f(t,e),t.prototype.eq=function(e){return this.math===e.math&&this.block===e.block},t.prototype.patchDOM=function(e){var t=this.block;return(t&&e.instanceOf(HTMLDivElement)||!(t||!e.instanceOf(HTMLSpanElement)))&&(this.render(e),!0)},t.prototype.initDOM=function(e){var t=this.containerEl=createEl(this.block?"div":"span","math");return this.block&&(t.createEl("br"),t.createEl("br"),this.addEditButton(e,t)),this.hookClickHandler(e,t),this.resizeWidget(e,t),this.render(t),t},t.prototype.render=function(e){var t=this;iA.then((function(){var n=t,i=n.math,r=n.block;e.toggleClass("math-block",r),e.toggleClass("cm-embed-block",r);var o=e.find(".edit-block-button");e.empty();try{var a=oA(i,r);e.appendChild(a)}catch(t){e.appendText(i)}o&&e.appendChild(o),uA()}))},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),t}(VF),KF=["script","style","link","meta","object","embed","webview"],YF=function(e){function t(t,n,i){var r=e.call(this)||this;return r.app=t,r.html=n,r.block=i,r}return f(t,e),t.prototype.eq=function(e){return this.html===e.html&&this.block===e.block},t.prototype.patchDOM=function(e,t){return!1},t.prototype.initDOM=function(e){var t=this.block,n=this.html,i=this.containerEl=createEl(t?"div":"span","cm-html-embed"+(t?" cm-embed-block":""));return i.tabIndex=-1,i.appendChild(hM(n)),t&&this.addEditButton(e,i),this.app.fixFileLinks(i),this.hookClickHandler(e,i),this.resizeWidget(e,i),i},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return 40},enumerable:!1,configurable:!0}),t}(VF),XF=function(){function e(e){this.tree=Hh(e.state),this.decorations=this.buildDeco(e)}return e.prototype.update=function(e){var t,n=Hh(e.state);n.length<e.view.viewport.to||e.view.composing||(null===(t=e.view.plugin(wF))||void 0===t?void 0:t.mousedown)?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||e.selectionSet||bf(e.transactions,bF)||bf(e.transactions,lf)||bf(e.transactions,cf))&&(this.tree=n,this.decorations=this.buildDeco(e.view))},e}(),$F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.update=function(t){var n,i=t.state,r=t.view;if(!t.docChanged&&t.selectionSet&&!(null===(n=t.view.plugin(wF))||void 0===n?void 0:n.mousedown)){var o=i.selection,a=this.decorations,s=!1,l=function(e,t,n,i){return t<=e&&e<=n&&(i===SF?e=Math.min(t,e):i===MF&&(e=Math.max(n,e))),e},c=o.ranges.map((function(e){for(var t=e.anchor,n=e.head,i=t,r=n,o=!1,c=function(e,t,n){var a=l(i,e,t,n),s=l(r,e,t,n);a===i&&s===r||(i=a,r=s,o=!0)},u=0;u<10&&(o=!1,a.between(i,i,c),i!==r&&a.between(r,r,c),o);u++);return i!==t||r!==n?(s=!0,Bi.range(i,r)):e}));s&&t.view.dom.win.setTimeout((function(){o===i.selection&&r.dispatch({selection:Bi.create(c,o.mainIndex)})}))}e.prototype.update.call(this,t)},t.prototype.buildDeco=function(e){if(!this.tree.length)return ca.none;for(var t=e.state,n=e.hasFocus?t.selection.ranges:[],i=t.field(hf),r=uf.get("obsidian-search-match-highlight"),o=function(e,t){return mf(n,e,t)||vf(i,r,e,t)},a=function(e){var n=t.doc.lineAt(e);return o(n.from,n.to)},s=new Ir,l=0,c=function(e,n){var i=e,r=e,c=null,h=function(e){c||(c=[]),c.push(e)},p=function(e){if(c){if(o(i,r))for(var t=0,n=c;t<n.length;t++){(h=n[t]).always&&s.add(h.from,h.to,h.deco)}else{if(c.length>1){var a=c.last();a.deco===SF&&(a.deco=MF)}for(var l=0,u=c;l<u.length;l++){var h=u[l];s.add(h.from,h.to,h.deco)}}c=null}i=e,r=e},d="",f=!1;u.tree.iterate({from:e,to:n,enter:function(e){var n=e.type,i=e.from,c=e.to,u=n.prop(Td),g=function(){return t.doc.sliceString(i,c)};if(i===r&&u||p(i),u){if(i<l)return;l=c;var m=u.split(" "),v=new Set(m);if(v.has("hmd-codeblock"))return;if(v.has("formatting-header")){var y=t.doc.lineAt(i);return void(o(y.from,y.to)||y.text.trim()===g().trim()||s.add(i,c,SF))}if(v.has("formatting-quote"))return void(a(i)||(v.has("quote-1")?s.add(i,i+1,DF):s.add(i,i+1,PF)));v.has("hmd-escape-backslash")&&(a(i)||h({from:i,to:c,deco:SF}));var b=m.some((function(e){return kF.has(e)})),w=v.has("formatting"),k=v.has("string")&&v.has("url"),C=v.has("link")&&!v.has("url")&&!w,E=v.has("hmd-internal-link")&&!v.has("link-has-alias")&&!v.has("link-alias-pipe")&&!v.has("hmd-embed"),x=C||E,S=v.has("image"),M=v.has("formatting-link")||v.has("link-has-alias")||v.has("link-alias-pipe"),T=v.has("formatting-task"),D=v.has("formatting-link-end")||k,A=v.has("formatting-list-ul"),L=v.has("url")&&!v.has("string");if(S?f=!0:f&&!v.has("url")&&(f=!1),v.has("formatting-link-start")&&t.doc.length>=c+2&&"]]"===t.doc.sliceString(c,c+2))return;if(v.has("formatting-link-end")&&i>=2&&"[["===t.doc.sliceString(i-2,i))return;var P=M||k||x||T||A||L;if(v.has("hmd-barelink")&&!v.has("footref")&&(w=P=!1),M&&v.has("link")&&v.has("url"))return o(i,c)||h({from:i,to:c,deco:TF}),c+1<t.doc.length&&">"===t.doc.sliceString(c,c+1)&&h({from:c,to:c+1,deco:MF}),void(r=c+1);if((M&&v.has("link")&&"]"===g()||w&&k&&"("===g())&&(D=!0),(b||P)&&(r=c,w||P)){var I={from:i,to:c,deco:D?MF:SF};if(T){var O=t.doc.sliceString(i+1,i+2);I.deco=ca.widget({widget:new FF(O)})}else if(A){var F=(y=t.doc.lineAt(i)).text.match(Sf);F&&F[6]||(I.deco=OF,I.to=r=i+1)}else if(x){var B=g();E&&B.length>1&&B.startsWith("#")&&(h({from:i,to:i+1,deco:SF}),I.from++),I.deco=TF}else L&&(I.deco=TF);h(I)}if(v.has("url")&&!w)d=g();else if(v.has("url")&&w&&d&&")"===g()&&!f){if(!zw(d)){var N=Array.from(v).map((function(e){return"cm-"+e})).join(" ")+" external-link";h({from:c,to:c,always:!0,deco:ca.widget({widget:new BF(N)})})}d=""}else d=""}}}),p(0)},u=this,h=0,p=e.visibleRanges;h<p.length;h++){var d=p[h];c(d.from,d.to)}return s.finish()},t}(XF),ZF=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.buildDeco=function(e){if(!this.tree.length)return ca.none;for(var t=e.state,n=new Ir,i=0,r=e.visibleRanges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;this.tree.iterate({from:a,to:s,enter:function(e){var i=e.type,r=e.from,o=i.prop(Dd);if(o&&o.contains("HyperMD-task-line")){var a=t.doc.lineAt(r).text.match(Sf);a&&a[6]&&n.add(r,r,ca.line({attributes:{"data-task":a[6]}}))}}})}return n.finish()},t}(XF);function QF(e,t){var n=e.app,i=eF(e.cm.scrollDOM),r=[],o=[],a=[],s=function(t){for(var n=0,i=t;n<i.length;n++)for(var r=0,o=i[n].children;r<o.length;r++){var a=o[r];e.removeChild(a)}};return e.cleanupLivePreview=function(){s(r),r=[],s(o),o=[],s(a),a=[]},_i.define({create:function(){return ca.none},update:function(l,c){var u,h=c.state,p=!0,d=Vh(h,t.viewport.to+2e3,20);if(d||(p=!1),(bf([c],bF)||bf([c],lf)||bf([c],cf))&&(p=!0),(t.composing||(null===(u=t.plugin(wF))||void 0===u?void 0:u.mousedown))&&(p=!1),!p)return l.map(c.changes);d||(d=Hh(h));var f=h.doc,g=t.hasFocus?h.selection.ranges:[],m=h.field(hf),v=uf.get("obsidian-search-match-highlight"),y=function(e,t){return mf(g,e,t)||vf(m,v,e,t)},b=function(e,t,n){return e.block&&n===f.length&&(e.inclusiveEnd=!1),ca.replace(e).range(t,n)},w=e.path,k=[],C=r;r=[];var E=o;o=[];var x=a;a=[];var S=!1,M=-1,T=-1,D=-1,A="",L=!1,P="",I="",O=-1,F=-1,B=-1,N=-1,R=-1,H=!1,V=-1,z="",q=-1,U="",W=-1,_=-1,j=-1,G=-1,K=function(t,o,a){for(var s=Yw(t),l=s.href,c=s.title,u=null,h=0,p=C;h<p.length;h++){var d=p[h];if(d.sourcePath===w&&d.href===l){u=d,C.remove(d);break}}return u?u.title!==c&&u.applyTitle(u.containerEl,c):u=new qF(n,e,w,l,c,i),u.setPos(o,a),r.push(u),u},Y=function(e,t,n){var i=f.lineAt(t),r=i.from,o=i.to,a=i.text,s=t===r&&""===a.substr(n-r).trim();s?y(r,o)?k.push(ca.widget({widget:e,block:s,side:1}).range(o)):k.push(b({widget:e,block:s,side:1},r,o)):y(t,n)?k.push(ca.widget({widget:e,side:1}).range(n)):k.push(ca.replace({widget:e,side:1}).range(t,n))},X=function(i){if(-1!==W&&_<i){for(var r=f.sliceString(W,_),o=null,s=0,l=x;s<l.length;s++){var c=l[s];if(c instanceof _F&&c.text===r){o=c,x.remove(c);break}}y(W,_)||(o||(o=new _F(n,e,t,r)),k.push(b({widget:o,side:1,block:!0},W,_))),o&&(o.setPos(W,_),a.push(o)),W=-1,_=-1}},$=function(t){if(-1!==j&&G<t){for(var i=f.sliceString(j,G),r=null,o=0,s=x;o<s.length;o++){var l=s[o];if(l instanceof jF&&l.text===i){r=l,x.remove(l);break}}y(j,G)||(r||(r=new jF(n,e,i)),k.push(b({widget:r,side:1,block:!0},j,G))),r&&(r.setPos(j,G),a.push(r)),j=-1,G=-1}};return d.iterate({enter:function(t){var i=t.type,r=t.from,a=t.to,s=i.prop(Td);if(s&&(X(r),$(r)),s&&-1===W)if((J=new Set(s.split(" "))).has("hmd-codeblock"),J.has("formatting-math-begin"))N=r,R=a,H=J.has("math-block");else if(-1!==N){if(J.has("formatting-math-end")){var l=r,c=a,u=H,h=f.sliceString(R,l);(p=new GF(h,u)).setPos(u&&h.startsWith("\n")?R+1:R,u&&h.endsWith("\n")?l-1:l),u=u&&function(e,t){var n=f.lineAt(e),i=n.from,r=n.text,o=f.lineAt(t),a=o.from,s=o.text;return""===r.substr(0,e-i).trim()&&""===s.substr(t-a).trim()}(N,c),y(N,c)?H&&k.push(ca.widget({widget:p,block:u,side:1}).range(c)):k.push(b({widget:p,block:u,side:1},N,c)),N=-1,R=-1}}else if(J.has("formatting-link-start"))S=J.has("formatting-embed"),M=r,T=a;else if(M>-1)if(J.has("hmd-internal-link"))A+=f.sliceString(r,a),D=a;else{if(J.has("formatting-link-end")&&A)if(S){var p=K(A,T,D);Y(p,M,a)}else{var d=Bx(m=Yw(A).href).path;n.metadataCache.getFirstLinkpathDest(d,w)||k.push(AF.range(T,D))}A="",M=-1}else if(J.has("image-marker"))L=!0,O=r;else if(J.has("image-alt-text")&&!J.has("formatting"))P=f.sliceString(r,a);else if(L&&J.has("url")&&!J.has("formatting"))I=f.sliceString(r,a),F=r,B=a;else if(L&&I&&J.has("formatting")){p=void 0;if(zw(I=Uw(I))){var g=void 0;try{g=decodeURI(I)}catch(e){return}var m=_w(g).trim();p=K(m+"|"+P,O,a)}else I=qw(I),Lt.isDesktopApp&&I.startsWith("file:///")&&(I=Lt.resourcePathPrefix+I.substr("file:///".length)),(p=new zF(I,P)).setPos(F,B);Y(p,O,a),L=!1,I="",P="",O=-1,F=-1,B=-1}else if(J.has("hmd-html-begin"))q=r;else if(q>-1&&!U&&J.has("tag"))U=f.sliceString(r,a);else if(J.has("hmd-html-end")&&U&&!KF.contains(U)){var v=a,C=f.sliceString(q,v),x=f.lineAt(q),Z=f.lineAt(v);u=!qb(U);if(f.sliceString(x.from,q).trim()||f.sliceString(v,Z.to).trim()||(q=x.from,v=Z.to),!y(q,v))(p=new YF(n,C,u)).setPos(q,v),k.push(b({widget:p,block:u,side:1},q,v));q=-1,U=""}else J.has("hr")&&(y(r,a)||k.push(b({widget:IF,block:!0},r,a)));var Q=i.prop(Dd);if(Q){var J,ee=Q.split(" ");if((J=new Set(ee)).has("HyperMD-callout")&&J.has("HyperMD-quote-1")&&(X(r),W=r,_=a),J.has("HyperMD-quote")&&-1!==W&&(r-_>1?X(r):_=a),J.has("HyperMD-table-row")&&(X(r),r-G>1&&$(r),-1===j&&(j=r),G=a),J.has("HyperMD-codeblock-begin")&&-1===V){var te=f.lineAt(r).text.match(CF);z="",te&&(z=te[2]),V=r}if(J.has("HyperMD-codeblock-end")&&-1!==V){var ne=V;if(V=-1,y(ne,a))return;if((Z=f.lineAt(r)).number<=1)return;if((x=f.lineAt(ne)).number>=f.lines)return;var ie=f.line(x.number+1).from,re=f.line(Z.number-1).to,oe=f.sliceString(ie,re);if(UF.canRenderLang(z)){for(var ae=null,se=0,le=E;se<le.length;se++){var ce=le[se];if(ce.lang===z&&ce.code===oe){ae=ce,E.remove(ae);break}}ae||(ae=new UF(n,e,z,oe)),ae.setPos(ie,re),ae.lineStart=x.number-1,ae.lineEnd=Z.number-1,o.push(ae),k.push(b({widget:ae,block:!0},ne,a))}else{var ue=z;try{var he=CodeMirror.findModeByName(ue);he&&"null"!==he.name&&(ue=he.name)}catch(e){}k.push(SF.range(x.from,x.to)),k.push(ca.widget({widget:new NF(ue,oe)}).range(x.to)),k.push(MF.range(Z.from,Z.to))}}}X(r),$(r)}}),X(d.length+1),$(d.length+1),s(C),s(E),s(x),ca.set(k,!0)},provide:function(e){return jl.decorations.from(e)}})}var JF=function(e){e.dom.win.setTimeout((function(){return e.dispatch({effects:bF.of()})}),10)},eB=[Ba.define((function(e){var t={capture:!0},n=function(n){if(0===n.button){if(e.scrollDOM.scrollHeight>e.scrollDOM.clientHeight)if(n.clientX>e.scrollDOM.getBoundingClientRect().x+e.scrollDOM.clientWidth)return;var i=e.state.selection,r=e.scrollDOM.scrollTop,o=e.plugin(wF);if(o){o.mousedown=!0;var a=e.scrollDOM.doc,s=function(n){0===n.button&&(a.removeEventListener("mouseup",s,t),o.mousedown=!1,e.state.selection===i&&e.scrollDOM.scrollTop===r||e.dom.win.setTimeout((function(){e.dispatch({selection:e.state.selection})}),50))};a.addEventListener("mouseup",s,t)}}};return e.scrollDOM.addEventListener("mousedown",n,t),{destroy:function(){e.scrollDOM.removeEventListener("mousedown",n,t)}}})),jl.domEventHandlers({focus:function(e,t){return JF(t)},blur:function(e,t){return JF(t)},mousedown:function(e){if(0===e.button&&(hw.isModifier(e,"Mod")||!e.shiftKey&&!e.altKey)){var t=e.targetNode;if(t.instanceOf(Element)){var n=t.matchParent('[draggable="true"]');if(n){n.setAttr("contenteditable",!1);var i=e.preventDefault;return e.preventDefault=function(){e.preventDefault=i},!0}}}}})],tB=Ba.define((function(e){return new $F(e)}),{decorations:function(e){return e.decorations}}),nB=Ba.define((function(e){return new ZF(e)}),{decorations:function(e){return e.decorations}});function iB(e,t){var n=QF(e,t),i="",r=null;function o(e){if(e!==i){i=e;try{!function(e){var t,n=null!==(t=uF(e))&&void 0!==t?t:{};if("object"!=typeof n||Array.isArray(n))throw new QC(0,"Frontmatter must be a valid object!")}(e),r=null}catch(e){r=e}}return r}function a(e){var t=-1;if("---"===e.line(1).text)for(var n=2;n<=e.lines;n++){var i=e.line(n);if("---"===i.text){t=i.to;break}}return t}function s(e,t,i){var r=e.doc.lineAt(t.head),o=r.number+(i?1:-1);if(o<1||o>e.doc.lines)return null;var a=e.doc.line(o),s=!0,l=null;if(e.field(n).between(a.from,a.to,(function(e,t,n){if(n.spec.block)return l||e>a.from||t<a.to?(s=!1,!1):void(l||(l=n))})),!s||!l)return null;if(!l.spec.block)return null;var c=t.head-r.from;return Bi.cursor(a.from+Math.min(a.length,c),t.assoc)}function l(e,t,n){var i=e.state,r=i.selection,o=Bi.create(r.ranges.map((function(r){var o=function(r){if(!t&&!r.empty)return Bi.cursor(n?r.to:r.from);var o=e.moveVertically(r,n),a=o.head!=r.head?o:e.moveToLineBoundary(r,n),l=s(i,r,n);return l&&Math.abs(o.head-r.head)>Math.abs(l.head-r.head)?l:a}(r);return t&&(o=Bi.range(r.anchor,o.head,o.goalColumn)),o})),r.mainIndex);return o.eq(i.selection)||e.dispatch(i.update({selection:o,scrollIntoView:!0,userEvent:"select"})),!0}var c=$i.high(Jl.of([{key:"ArrowUp",run:function(e){return l(e,!1,!1)},shift:function(e){return l(e,!0,!1)}},{key:"ArrowDown",run:function(e){return l(e,!1,!0)},shift:function(e){return l(e,!0,!0)}}])),u=$i.low(Ba.define((function(e){return e.getNextPosUpDown=s,{destroy:function(){delete e.getNextPosUpDown}}}))),h=_i.define({create:function(){return ca.none},update:function(n,i){var r=t.plugin(wF);if(!r||!e.owner.supportsProperties)return ca.none;var s=[],l=i.newDoc,c=a(i.newDoc),u=-1!==c&&e.owner.supportsProperties&&"source"!==e.app.vault.getConfig("propertiesInDocument");if(-1!==c){var h=o(l.sliceString(3,c-3));if(h){u=!1,s.push(EF.range(0,c));var p=Math.clamp(4,h.offset+3,c-3);s.push(ca.mark({class:"error-marker",attributes:{"aria-label":rf.properties.labelInvalidYamlMarker()}}).range(p,p+1))}}return u&&s.push(xF.range(0,c)),r.frontmatterEnd=c,r.showProperties=u,ca.set(s,!0)},provide:function(e){return jl.decorations.from(e)}}),p=Sr.transactionFilter.of((function(n){if(t.composing||!pf(n))return n;if(!e.owner.supportsProperties||"source"===e.app.vault.getConfig("propertiesInDocument"))return n;if(bf([n],af))return t.dom.win.setTimeout((function(){e.app.commands.executeCommandById("markdown:add-metadata-property")}),30),n;var i=n.startState.doc,r=a(i);if(-1===r)return n;if(o(i.sliceString(3,r-3)))return n;if(!n.docChanged&&n.selection&&1===n.selection.ranges.length&&1===n.startState.selection.ranges.length&&"select"===n.annotation(fr.userEvent)){var s=n.startState.selection.ranges[0],l=n.selection.ranges[0];if(s.empty&&l.empty&&s.from>r&&l.from<r&&t.lineBlockAt(s.from).from===t.lineBlockAt(l.from).to+1)return e.owner.focusMetadata({focusAddButton:!0}),[]}var c=void 0,u=n.newDoc,h=a(u),p=u.length;p===h&&(p++,c=[{insert:"\n",from:h}]);var d=n.newSelection;if(d.ranges.some((function(e){var t=e.from,n=e.to;return t<=r||n<=r}))){var f=!1;if(n.changes.iterChangedRanges((function(e,t,n,i){e>=3&&t<r-1&&(f=!0),n===i&&t<=r+1&&(f=!0)}),!0),f)return[];var g=function(e){return Math.clamp(r+1,e,p)};return[n,{changes:c,selection:Bi.create(d.ranges.map((function(e){return Bi.range(g(e.anchor),g(e.head))})),d.mainIndex),sequential:!0}]}return n})),d=rt((function(){t.plugin(wF).mousedown=!1,t.dispatch({effects:bF.of()})}),700,!0);return[wF,jl.updateListener.of((function(e){Lt.isMobile&&(e.docChanged?d.run():e.selectionSet&&(t.plugin(wF).mousedown=!0,d()))})),tB,nB,n,c,eB,u,h,p]}var rB={enable:!1},oB=function(){function e(e){var t=this,n=this.rootEl=e.createDiv({cls:"multi-select-container"}),i=function(e){t.addElement(e)&&(t.inputEl.innerText="",t.inputEl.trigger("input"))},r=this.inputEl=this._createInputEl();r.addEventListener("blur",(function(e){r.getText()&&i(r.getText())})),r.addEventListener("keydown",(function(e){if(!e.isComposing)if("Enter"===e.key&&r.getText().length>0)e.preventDefault(),i(r.getText());else if("Backspace"===e.key&&0===t.inputText.length&&t.elements.length>0){e.preventDefault();var n=t.elements[t.elements.length-1];n&&n.focus()}else if("ArrowLeft"===e.key){var o=t.inputEl.win.getSelection();if(o.rangeCount>0)0===o.getRangeAt(0).startOffset&&(e.preventDefault(),t.focusElement(t.elements.length-1))}})),r.addEventListener("blur",(function(e){i(r.getText())})),n.addEventListener("click",(function(e){e.targetNode===n&&r.focus()})),this.elements=[],this.values=[]}return Object.defineProperty(e.prototype,"inputText",{get:function(){return this.inputEl.getText()},enumerable:!1,configurable:!0}),e.prototype.setInputText=function(e){this.inputEl.innerText=e,this.inputEl.trigger("input")},e.prototype._createInputEl=function(){var e=createDiv({cls:"multi-select-input",attr:{contentEditable:!0,tabIndex:0}});return e.addEventListener("input",(function(t){return ew(e,!1)})),e.addEventListener("paste",(function(t){return tw(e,t)})),e},e.prototype.setValues=function(e){return Array.isArray(e)?this.values=e:this.values=[],this.renderValues(),this.triggerChange(),this},e.prototype.onChange=function(e){return this.changeCallback=e,this},e.prototype.setOptionContextmenuHandler=function(e){return this.onOptionContextmenu=e,this},e.prototype.setOptionRenderer=function(e){return this.optionRenderer=e,this.values.length>0&&this.renderValues(),this},e.prototype.allowCreatingOptions=function(e){return this.createOption=e,this},e.prototype.preventDuplicates=function(e){return this.findDuplicate=e,this},e.prototype.setupInputEl=function(e){return this.setupInput=e,this},e.prototype._createElement=function(e){var t,n=null===(t=this.createOption)||void 0===t?void 0:t.call(this,e);return n||null},e.prototype.addElement=function(e){var t,n=this._createElement(e);if(n){var i=null===(t=this.findDuplicate)||void 0===t?void 0:t.call(this,n,this.values);if(void 0!==i&&i>=0&&i<this.elements.length){var r=this.elements[i];return r.hasClass("multi-select-duplicate")||(r.addClass("multi-select-duplicate"),r.win.setTimeout((function(){return r.removeClass("multi-select-duplicate")}),2e3)),!1}this.values.push(n),this.renderValues(),this.triggerChange()}return!!n},e.prototype.editElement=function(e){var t,n=this;if(!(e<0||e>=this.values.length)){var i=this.elements[e],r=this._createInputEl(),o=!1,a=function(t,i){var r;void 0===i&&(i=!1);var a=n._createElement(t);if(a){var s=null===(r=n.findDuplicate)||void 0===r?void 0:r.call(n,a,n.values);if(void 0!==s&&s>=0&&s<n.elements.length&&s!==e){var l=n.elements[s];return l.hasClass("multi-select-duplicate")||(l.addClass("multi-select-duplicate"),l.win.setTimeout((function(){return l.removeClass("multi-select-duplicate")}),2e3)),!1}return o=!1,n.values[e]=a,n.renderValues(),i&&n.focusElement(e),n.triggerChange(),!0}return!1};null===(t=this.setupInput)||void 0===t||t.call(this,r,a),r.addEventListener("focus",(function(e){o=!0})),r.addEventListener("blur",(function(e){if(o){o=!1;var t=r.getText();t?a(t):(n.rootEl.insertBefore(i,r),r.detach())}})),r.addEventListener("keydown",(function(e){e.isComposing||("Enter"===e.key&&r.getText().length>0?(e.preventDefault(),a(r.getText(),!0)):"Escape"===e.key&&(e.preventDefault(),o=!1,n.rootEl.insertBefore(i,r),r.detach(),i.focus()))})),r.innerText=String(this.values[e]),this.rootEl.insertBefore(r,i),i.detach(),bb(r)}},e.prototype.removeElement=function(e,t){void 0===t&&(t=!1),e<0||e>=this.values.length||(this.values=this.values.filter((function(t,n){return n!==e})),this.renderValues(),t&&this.focusElement(e-1),this.triggerChange())},e.prototype.focusElement=function(e){var t=Math.max(0,e),n=this.elements[t];n?n.focus():this.inputEl.focus()},e.prototype.renderValues=function(){var e=this;this.elements=[];for(var t=function(t){var i=n.values[t],r=t,o=n.rootEl.createDiv({cls:"multi-select-pill",attr:{tabIndex:0}}),a=o.createDiv({cls:"multi-select-pill-content"}),s=o.createDiv({cls:"multi-select-pill-remove-button"});gb(s,"lucide-x"),o.addEventListener("contextmenu",(function(t){var n;t.preventDefault();var s=(new fw).addItem((function(t){return t.setSection("edit").setTitle(rf.interface.menu.edit()).setIcon("lucide-edit-3").onClick((function(){return e.editElement(r)}))})).addItem((function(t){return t.setWarning(!0).setSection("danger").setIcon("lucide-trash-2").setTitle(rf.interface.menu.remove()).onClick((function(){return e.removeElement(r)}))}));null===(n=e.onOptionContextmenu)||void 0===n||n.call(e,s,i,{el:a,pillEl:o}),s.showAtMouseEvent(t)})),o.addEventListener("keydown",(function(t){"Enter"===t.key?(t.preventDefault(),e.editElement(r)):"Backspace"===t.key?(t.preventDefault(),e.removeElement(r,!0)):"ArrowUp"===t.key?(t.preventDefault(),e.focusElement(0)):"ArrowDown"===t.key?(t.preventDefault(),e.inputEl.focus()):"ArrowLeft"===t.key?(t.preventDefault(),e.focusElement(r-1)):"ArrowRight"===t.key&&(t.preventDefault(),e.focusElement(r+1))})),n.optionRenderer?n.optionRenderer(i,{el:a,pillEl:o}):a.createSpan({text:String(i)}),n.elements.push(o),s.addEventListener("mousedown",(function(e){return e.preventDefault()})),s.addEventListener("click",(function(t){e.removeElement(r),e.inputEl.trigger("input")}))},n=this,i=0;i<this.values.length;i++)t(i);this.rootEl.setChildrenInPlace(this.elements.concat([this.inputEl])),this.inputEl.setAttr("placeholder",this.elements.length>0?"":rf.properties.labelNoValue())},e.prototype.triggerChange=function(){this.changeCallback&&this.changeCallback(this.values)},e}(),aB=function(){function e(e,t,n){var i=this;this.chooser=e,this.containerEl=t,this.values=[],this.suggestions=[],this.selectedItem=0,t.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("auxclick",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),n.register([],"ArrowUp",this.moveUp),n.register([],"ArrowDown",this.moveDown),n.register([],"PageUp",this.pageUp.bind(this)),n.register([],"PageDown",this.pageDown.bind(this)),n.register([],"Home",(function(e){return i.setSelectedItem(0,e),!1})),n.register([],"End",(function(e){return i.setSelectedItem(i.suggestions.length-1,e),!1})),(Lt.isMacOS||Lt.isIosApp)&&(n.register(["Ctrl"],"p",this.moveUp),n.register(["Ctrl"],"n",this.moveDown)),n.register([],"Enter",(function(e){if(!e.isComposing)return i.useSelectedItem(e),!1}))}return e.prototype.moveUp=function(e){if(!e.isComposing)return this.setSelectedItem(this.selectedItem-1,e),!1},e.prototype.moveDown=function(e){if(!e.isComposing)return this.setSelectedItem(this.selectedItem+1,e),!1},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this.suggestions[this.selectedItem].clientHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numVisibleItems",{get:function(){return Math.floor(this.containerEl.clientHeight/this.rowHeight)},enumerable:!1,configurable:!0}),e.prototype.pageUp=function(e){if(!e.isComposing){var t=this,n=t.containerEl,i=t.numVisibleItems,r=t.rowHeight,o=n.scrollTop-parseFloat(getComputedStyle(n).paddingTop),a=Math.floor(o/r);this.selectedItem<=a&&(a-=i);var s=Math.max(0,a);return this.setSelectedItem(s,e),!1}},e.prototype.pageDown=function(e){if(!e.isComposing){var t=this,n=t.containerEl,i=t.numVisibleItems,r=t.rowHeight,o=n.scrollTop-parseFloat(getComputedStyle(n).paddingTop),a=Math.floor(o/r)+(i-1);this.selectedItem>=a&&(a+=i);var s=Math.min(this.suggestions.length-1,a);return this.setSelectedItem(s,e),!1}},e.prototype.setSuggestions=function(e){var t=this.containerEl;t.empty();var n=[];if(e)for(var i=0,r=e;i<r.length;i++){var o=r[i],a=t.createDiv("suggestion-item");this.chooser.renderSuggestion(o,a),n.push(a)}this.values=e,this.suggestions=n,this.setSelectedItem(0,null)},e.prototype.addMessage=function(e){this.containerEl.createDiv({cls:"suggestion-empty",text:e})},e.prototype.setSelectedItem=function(e,t){var n=this.suggestions;0!==n.length&&(e<0?e=n.length-1:e>=n.length&&(e=0),this.forceSetSelectedItem(e,t))},e.prototype.forceSetSelectedItem=function(e,t){var n,i,r=this.suggestions,o=r[this.selectedItem];o&&o.removeClass("is-selected"),this.selectedItem=e;var a=r[this.selectedItem];a&&(a.addClass("is-selected"),t&&t.instanceOf(KeyboardEvent)&&a.scrollIntoView({block:"nearest"})),null===(i=(n=this.chooser).onSelectedChange)||void 0===i||i.call(n,this.values[e],t)},e.prototype.onSuggestionClick=function(e,t){e.preventDefault();var n=this.suggestions.indexOf(t);this.setSelectedItem(n,e),this.useSelectedItem(e)},e.prototype.onSuggestionMouseover=function(e,t){var n=this.suggestions.indexOf(t);this.setSelectedItem(n,e)},e.prototype.useSelectedItem=function(e){if(!this.values)return!1;var t=this.values[this.selectedItem];return void 0!==t&&(this.chooser.selectSuggestion(t,e),!0)},e}(),sB=function(){function e(e,t){var n=this;this.isOpen=!1,this.app=e,this.scope=new cw(t||e.scope),this.suggestEl=createDiv("suggestion-container");var i=this.suggestEl.createDiv("suggestion");this.suggestions=new aB(this,i,this.scope),this.scope.register([],"Escape",(function(){return n.close(),!1}))}return e.prototype.open=function(){var e=this.app,t=this.suggestEl;this.isOpen||(this.isOpen=!0,e.keymap.pushScope(this.scope),activeDocument.body.appendChild(t),eb(this))},e.prototype.close=function(){var e=this.app,t=this.suggestEl;this.autoDestroy&&(this.autoDestroy(),this.autoDestroy=null),e.keymap.popScope(this.scope),this.isOpen&&(this.isOpen=!1,this.suggestions.setSuggestions([]),t.detach(),tb(this))},e.prototype.reposition=function(e){var t=this.suggestEl;t.style.left="0",t.style.top="0",Eb(e,t,{gap:5,preventOverlap:!0})},e.prototype.setAutoDestroy=function(e){var t=this;this.autoDestroy&&this.autoDestroy(),e&&(this.autoDestroy=function(e,t,n){var i=e.doc,r=setInterval((function(){i.body.contains(e)||(clearInterval(r),n())}),t);return function(){clearInterval(r)}}(e,500,(function(){t.close()})))},e}(),lB=function(e){function t(t,n){var i=e.call(this,t)||this;return i.limit=100,i.textInputEl=n,i.autoReposition=i.autoReposition.bind(i),n.addEventListener("input",i.onInputChange.bind(i)),n.addEventListener("focus",i.onInputChange.bind(i)),n.addEventListener("blur",i.close.bind(i)),i.suggestEl.on("mousedown",".suggestion-item",(function(e){e.preventDefault()})),i}return f(t,e),t.prototype.showSuggestions=function(e){var t=this.textInputEl;if(0!==e.length){if(t.isShown()){var n=this.limit;n>0&&e.length>n&&(e=e.slice(0,n)),this.suggestions.setSuggestions(e),this.open(),this.setAutoDestroy(t)}}else this.close()},t.prototype.setValue=function(e){this.textInputEl.instanceOf(HTMLInputElement)?this.textInputEl.value=e:this.textInputEl.innerText=e},t.prototype.getValue=function(){return this.textInputEl.instanceOf(HTMLInputElement)?this.textInputEl.value:this.textInputEl.innerText},t.prototype.onInputChange=function(){var e=this;if(this.textInputEl.isActiveElement()){var t=this.getValue(),n=this.getSuggestions(t);if(Array.isArray(n))this.showSuggestions(n);else{if(!n)return;v(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.showSuggestions,[4,n];case 1:return e.apply(this,[t.sent()]),[2]}}))}))}}},t.prototype.selectSuggestion=function(e,t){var n;null===(n=this.selectCb)||void 0===n||n.call(this,e,t)},t.prototype.onSelect=function(e){return this.selectCb=e,this},t.prototype.close=function(){e.prototype.close.call(this),this.textInputEl.doc.removeEventListener("scroll",this.autoReposition)},t.prototype.reposition=function(t){e.prototype.reposition.call(this,t),this.lastRect=t},t.prototype.open=function(){e.prototype.open.call(this);var t=this.textInputEl;this.reposition(Tb(t)),t.doc.addEventListener("scroll",this.autoReposition,{capture:!0,passive:!0})},t.prototype.autoReposition=function(){var e=this.lastRect,t=Tb(this.textInputEl);t.bottom===e.bottom&&t.top===e.top&&t.left===e.left&&t.right===e.right||this.reposition(t)},t}(sB);function cB(e){for(var t=createDiv("prompt-instructions"),n=function(e){t.createDiv("prompt-instruction",(function(t){t.createSpan({cls:"prompt-instruction-command",text:e.command}),t.createSpan({text:e.purpose})}))},i=0,r=e;i<r.length;i++){n(r[i])}return t}var uB=function(e){function t(t){var n=e.call(this,t)||this;return n.context=null,n.limit=100,n.suggestEl.addEventListener("mousedown",(function(e){return e.preventDefault()})),n}return f(t,e),t.prototype.setInstructions=function(e){this.suggestEl.appendChild(cB(e))},t.prototype.trigger=function(e,t,n){var i=this,r=e.getCursor("from"),o=e.getCursor("to");if(r.line!==o.line||r.ch!==o.ch)return this.context=null,!1;var a=this.onTrigger(r,e,t);if(a){var s=this.context={editor:e,file:t,start:a.start,end:a.end,query:a.query};if(n){var l=this.getSuggestions(s);if(Array.isArray(l))this.showSuggestions(l);else{if(!l)return;v(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,l];case 1:return(e=t.sent())&&this.showSuggestions(e),[2]}}))}))}}return!0}return this.context=null,!1},t.prototype.showSuggestions=function(e){if(0!==e.length){var t=this.limit;t>0&&e.length>t&&(e=e.slice(0,t)),this.suggestions.setSuggestions(e),this.updatePosition(!0)}else this.close()},t.prototype.updatePosition=function(e){var t=this.context;if(t){var n=t.editor;this.open();var i=n.coordsAtPos(t.start),r=n.coordsAtPos(t.end),o={top:i.top,left:Math.min(i.left,r.left),right:Math.max(i.right,r.right),bottom:r.bottom},a=Qb(n.containerEl.win);if(a){var s=a.scale,l=a.x,c=a.y;o.left=o.left*s+l,o.right=o.right*s+l,o.top=o.top*s+c,o.bottom=o.bottom*s+c}this.reposition(o)}},t.prototype.close=function(){this.context=null,e.prototype.close.call(this)},t}(sB),hB=/(^|\s)#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]*$/g,pB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.onTrigger=function(e,t,n){var i=e.line,r=t.getLine(i),o=r.substr(0,e.ch);if(o.match(hB)&&"#"!==r.substr(e.ch,1)){var a=o.lastIndexOf("#"),s=o.substr(a+1);return{start:{line:i,ch:a},end:{line:i,ch:e.ch},query:s}}return null},t.prototype.renderSuggestion=function(e,t){rL(t,e.tag,e)},t.prototype.selectSuggestion=function(e){var t=this.context;if(this.close(),t){var n=t.editor,i=t.start,r=t.end;n.transaction({changes:[{from:i,to:r,text:"#"+e.tag+" "}]}),setTimeout((function(){return n.focus()}))}},t.prototype.getSuggestions=function(e){return dB(this.app.metadataCache,e.query)},t}(uB);function dB(e,t,n){void 0===n&&(n=!1),t=t.toLowerCase();var i=Object.keys(e.getTags());n||(i=i.map((function(e){return e.slice(1)})));var r=[],o=XA(t);i.sort(JL);for(var a=0,s=i;a<s.length;a++){var l=s[a];if(""===t||"#"===t&&n)r.push({tag:l,score:0,matches:null});else{var c=JA(o,l.toLowerCase());c&&r.push({tag:l,score:c.score,matches:c.matches})}}return r.sort((function(e,t){return t.score-e.score})),r}var fB=Object.freeze({aliases:{name:"aliases",type:"aliases"},cssclasses:{name:"cssclasses",type:"multitext"},tags:{name:"tags",type:"tags"}}),gB=function(e){function t(t){var n=e.call(this)||this;return n.types={},n.properties={},n.app=t,n.loadData(),n.registeredTypeWidgets={aliases:rN,text:JB,multitext:pN,tags:oN,number:lN,checkbox:cN,date:aN,datetime:sN},n.app.metadataCache.on("finished",n.savePropertyInfo,n),n.on("changed",n.savePropertyInfo,n),n}return f(t,e),t.prototype.savePropertyInfo=function(){this.properties=this.app.metadataCache.getAllPropertyInfos()},t.prototype.getAllProperties=function(){return this.properties},t.prototype.getAssignedType=function(e){if(""===e)return"text";var t=e.toLowerCase();for(var n in this.types)if(this.types.hasOwnProperty(n)&&n.toLowerCase()===t)return this.types[n].type;return null},t.prototype.getTypeInfo=function(e){var t,n=e.key,i=e.value,r=e.type,o=void 0,a=this.getAssignedType(n);if(!a){var s=n.toLowerCase();this.properties.hasOwnProperty(s)&&(a=null===(t=this.properties[s])||void 0===t?void 0:t.type)}if(a&&this.registeredTypeWidgets.hasOwnProperty(a)&&(o=this.registeredTypeWidgets[a],null==i||o.validate(i)))return{expected:o,inferred:o};if(this.registeredTypeWidgets.hasOwnProperty(r)){var l=this.registeredTypeWidgets[r];return{inferred:l,expected:null!=o?o:l}}return{inferred:dN,expected:dN}},t.prototype.getPropertyInfo=function(e){var t;return null!==(t=this.properties[e])&&void 0!==t?t:null},t.prototype.getTypes=function(){return Object.keys(this.types)},t.prototype.loadData=function(){return v(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:return[4,this.app.vault.readConfigJson("types")];case 1:if((e=r.sent())&&e.hasOwnProperty("types"))for(n in t=e.types)t.hasOwnProperty(n)&&(i=n.toLowerCase(),this.types.hasOwnProperty(i)||(this.types[i]={name:n,type:t[n]}));return Object.assign(this.types,fB),[2]}}))}))},t.prototype.save=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:for(t in e={},this.types)this.types.hasOwnProperty(t)&&(n=this.types[t],i=n.name,r=n.type,e[i]=r);return[4,this.app.vault.writeConfigJson("types",{types:e})];case 1:return o.sent(),[2]}}))}))},t.prototype.setType=function(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=e.toLowerCase(),(i=this.types[n])?i.type=t:this.types[n]={name:e,type:t},[4,this.save()];case 1:return r.sent(),this.trigger("changed",n),[2]}}))}))},t.prototype.unsetType=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=e.toLowerCase(),delete this.types[t],[4,this.save()];case 1:return n.sent(),this.trigger("changed",t),[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny);function mB(e){var t,n="",i="";return"block"===e.type&&(n=e.file.path,i="#^"+e.node.id),"heading"===e.type&&(n=e.file.path,i="#"+Wx(e.heading)),"file"!==e.type&&"alias"!==e.type||(n=e.file.path,i=""),"linktext"===e.type&&(n=(t=Bx(e.path)).path,i=t.subpath),{path:n,subpath:i}}var vB=function(e,t){return t.score-e.score},yB={type:"none",matches:null,score:0};function bB(e){return e?-(e.length+(e.length>0?e[0][0]/10:0)):0}function wB(e,t,n,i,r){var o,a;return v(this,void 0,Promise,(function(){var s,l,c,u,h,p,d,f,g,m,v,b;return y(this,(function(y){switch(y.label){case 0:if(!n||0===n.length)return[2,[]];s=r.split("#").filter((function(e){return!!e})),r.endsWith("#")&&s.push(""),(l="#"+s.slice(0,s.length-1).join("#")).endsWith("#")||(l+="#"),c=0,u=0,h=[],y.label=1;case 1:y.trys.push([1,6,7,12]),p=E(WD(UD(n),{maxDelay:0})),y.label=2;case 2:return[4,p.next()];case 3:if((d=y.sent()).done)return[3,5];if(f=d.value,e.isCancelled())return[3,5];if(f.level<=u||c>=s.length)return[3,5];g=f.heading.toLowerCase(),c===s.length-1?""===(m=s[c])?h.push({type:"heading",file:t,path:i,subpath:l,level:f.level,heading:f.heading,score:0,matches:null}):(v=JA(XA(m),f.heading))&&h.push({type:"heading",file:t,path:i,subpath:l,level:f.level,heading:f.heading,score:v.score,matches:v.matches}):g===s[c].toLowerCase()&&(c++,u=f.level),y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return b=y.sent(),o={error:b},[3,12];case 7:return y.trys.push([7,,10,11]),d&&!d.done&&(a=p.return)?[4,a.call(p)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:return[2,h]}}))}))}function kB(e,t,n,i,r){var o,a;return v(this,void 0,void 0,(function(){var s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:if(!i)return[2,[]];s=i.content,l=r.toLowerCase().split(" "),c=[],y.label=1;case 1:y.trys.push([1,6,7,12]),u=E(WD(UD(i.blocks),{maxDelay:0})),y.label=2;case 2:return[4,u.next()];case 3:if((h=y.sent()).done)return[3,5];if(p=h.value,e.isCancelled())return[3,5];d=nL(l,p.display.toLowerCase()),f=bB(d),g=null,(m=p.node.id)&&String.isString(m)&&(g=nL(l,m.toLowerCase()))&&(f=0),(d||g)&&c.push({type:"block",file:t,path:n,content:s,display:p.display,node:p.node,score:f,matches:d,idMatch:g}),y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return v=y.sent(),o={error:v},[3,12];case 7:return y.trys.push([7,,10,11]),h&&!h.done&&(a=u.return)?[4,a.call(u)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:return[2,c]}}))}))}function CB(e,t,n){void 0===n&&(n=!1),t.addClass("mod-complex");var i=t.createDiv("suggestion-content"),r=t.createDiv("suggestion-aux"),o=i.createDiv("suggestion-title"),a=i.createDiv("suggestion-note"),s=e.matches;if(!n||"heading"!==e.type&&"block"!==e.type||a.setText(fe(e.file.path)),e.downranked&&t.addClass("mod-downranked"),"none"===e.type)o.setText(rf.editor.linkSuggestion.labelNoMatchFound());else if("file"===e.type){var l=e.path,c=ie(l),u=l.substr(0,l.length-c.length);oL(a,u,s),oL(o,c,s,-u.length)}else if("alias"===e.type)a.setText(e.path),oL(o,e.alias,s),r.createSpan({cls:"suggestion-flair"},(function(e){gb(e,"lucide-forward"),aS(e,rf.interface.tooltip.alias())}));else if("linktext"===e.type)oL(o,e.path,s);else if("heading"===e.type)oL(o,e.heading,s),r.createSpan({cls:"suggestion-flair",text:"H"+e.level});else if("block"===e.type){oL(o,e.display,s);var h=e.node.id;h&&String.isString(h)&&(a.getText().trim()&&a.appendText(" > "),oL(a,h,e.idMatch))}}function EB(e,t,n,i,r,o,a,s,l){var c=null,u="",h="",p=o,d=o,f="markdown"===l&&e.vault.getConfig("useMarkdownLinks"),g=!f,m="",v="",y=function(t,n){return null!==n?n:t.path===a?"":e.metadataCache.fileToLinktext(t,a,g)};if("none"===t.type)"Enter"!==s&&"Tab"!==s||(m=n);else if("file"===t.type)u=t.file.basename,m=e.metadataCache.fileToLinktext(t.file,a,g);else if("alias"===t.type){h=u=t.alias;var b=Bx(t.path).subpath;m=e.metadataCache.fileToLinktext(t.file,a,g),b&&(m+=b)}else if("linktext"===t.type)u=t.path,m=t.path;else if("heading"===t.type){var w=Wx(t.heading);u=w,m=(k=y(t.file,t.path))+t.subpath+w}else if("block"===t.type){u="";var k=y(t.file,t.path),C=t.node;m=C.id?k+"#^"+C.id:k+"#^"+(c=$e(6))}var E=i.match(/^(\s*)(\|)?(.*?)(]])/);if(E&&!E[0].contains("[[")&&(E[2]&&!h&&(h=E[3],u||(u=h)),o+=E[0].length),!h&&"file"===t.type){var x=t.file.extension;("canvas"===x||!pM.contains(x)&&m.contains("/"))&&(h=u)}if(f&&"#"!==s&&"^"!==s)v="[".concat(u,"](").concat(jw(m),")"),p=d=u?r+v.length:r+1;else{"#"===s?(m+="#","file"===t.type&&gM.contains(t.file.extension)&&(m+="page=")):"^"===s&&(m+="^"),h&&(m+="|"+h);var S=m.endsWith("]]")?"":"]]",M=r+(v="[["+m+S).length-2;"Tab"===s?h?(p=M-h.length,d=M):p=d=M:p=d="#"===s||"^"===s||"|"===s?h?M-h.length-1:M:r+v.length}return{replacement:v,start:r,end:o,selectionStart:p,selectionEnd:d,blockId:c}}var xB=function(){function e(e,t){this.runnable=null,this.mode="file",this.global=!1,this.fileSuggestions=null,this.app=e,this.getSourcePath=t}return e.prototype.getSuggestionsAsync=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c;return y(this,(function(u){if(n=t.indexOf("|"),i=null,-1!==n&&(i=t.substr(n+1),t=t.substr(0,n)),null===i){if(t.startsWith("##"))return t=t.substr(2),this.mode="heading",this.global=!0,[2,this.getGlobalHeadingSuggestions(e,t)];if(t.startsWith("^^"))return t=t.substr(2),this.mode="block",this.global=!0,[2,this.getGlobalBlockSuggestions(e,t)]}return this.global=!1,r=Bx(t),o=r.path,a=r.subpath,null!==i?(this.mode="display",[2,this.getDisplaySuggestions(e,o,a,i)]):a?a.startsWith("#^")?(s=a.substr(2),this.mode="block",[2,this.getBlockSuggestions(e,o,s)]):(this.mode="heading",[2,this.getHeadingSuggestions(e,o,a)]):-1!==(l=o.lastIndexOf("^"))?(c=o.substr(l+1),o=o.substr(0,l),this.mode="block",[2,this.getBlockSuggestions(e,o,c)]):(this.mode="file",[2,this.getFileSuggestions(e,o)])}))}))},e.prototype.getDisplaySuggestions=function(e,t,n,i){var r=this.app.metadataCache,o=this.getSourcePath(),a=r.getFirstLinkpathDest(t,o);if(!a)return[];var s=r.getFileCache(a);if(!s||!s.frontmatter)return[];var l=fx(s.frontmatter);if(!l)return[];for(var c=[],u=XA(i),h=0,p=l;h<p.length;h++){var d=p[h],f=JA(u,d);f&&c.push({type:"alias",alias:d,file:a,path:t+n,score:f.score,matches:f.matches})}return c},e.prototype.getHeadingSuggestions=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){return i=this.app.metadataCache,r=this.getSourcePath(),(o=i.getFirstLinkpathDest(t,r))&&"md"===o.extension?(a=i.getFileCache(o),[2,wB(e,o,null==a?void 0:a.headings,t,n)]):[2,[]]}))}))},e.prototype.getGlobalHeadingSuggestions=function(e,t){var n,i;return v(this,void 0,Promise,(function(){var r,o,a,s,l,c,u,h,p,d,f,g,m;return y(this,(function(v){switch(v.label){case 0:r=this.app.metadataCache,o=[],a=XA(t),s=0,l=r.getCachedFiles(),v.label=1;case 1:if(!(s<l.length))return[3,14];if(c=l[s],e.isCancelled())return[3,14];if(r.isUserIgnored(c))return[3,13];if(!((u=this.app.vault.getAbstractFileByPath(c))instanceof Xy)||"md"!==u.extension)return[3,13];if(!(h=r.getCache(c))||!h.headings||0===h.headings.length)return[3,13];v.label=2;case 2:v.trys.push([2,7,8,13]),n=void 0,p=E(WD(UD(h.headings),{maxDelay:0})),v.label=3;case 3:return[4,p.next()];case 4:if((d=v.sent()).done)return[3,6];if(f=d.value,e.isCancelled())return[3,6];(g=JA(a,f.heading))&&o.push({type:"heading",file:u,path:null,subpath:"#",level:f.level,heading:f.heading,score:g.score,matches:g.matches}),v.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return m=v.sent(),n={error:m},[3,13];case 8:return v.trys.push([8,,11,12]),d&&!d.done&&(i=p.return)?[4,i.call(p)]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,12];case 11:if(n)throw n.error;return[7];case 12:return[7];case 13:return s++,[3,1];case 14:return[2,o]}}))}))},e.prototype.getBlockSuggestions=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return i=this.app.metadataCache,r=this.getSourcePath(),(o=i.getFirstLinkpathDest(t,r))&&"md"===o.extension?[4,i.blockCache.getForFile(e,o)]:[2,[]];case 1:return a=s.sent(),[2,kB(e,o,t,a,n)]}}))}))},e.prototype.getGlobalBlockSuggestions=function(e,t){var n,i;return v(this,void 0,Promise,(function(){var r,o,a,s,l,c,u,h,p,d,f,g,m,v,b;return y(this,(function(y){switch(y.label){case 0:r=this.app.metadataCache,o=this.getSourcePath(),a=this.app.vault.getAbstractFileByPath(o),s=t.toLowerCase().split(" "),l=[],y.label=1;case 1:y.trys.push([1,6,7,12]),c=E(WD(r.blockCache.getAll(e),{batchSize:1,maxDelay:0})),y.label=2;case 2:return[4,c.next()];case 3:if((u=y.sent()).done)return[3,5];if(h=u.value,e.isCancelled())return[3,5];if(p=h.file,d=h.content,"md"!==p.extension)return[3,4];for(f=0,g=h.blocks;f<g.length;f++)m=g[f],(v=this.matchBlock(a,p,m,null,d,s))&&l.push(v);y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return b=y.sent(),n={error:b},[3,12];case 7:return y.trys.push([7,,10,11]),u&&!u.done&&(i=c.return)?[4,i.call(c)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:return[2,l]}}))}))},e.prototype.matchBlock=function(e,t,n,i,r,o){if(this.sourcePosition&&t===e&&n.node.position.start.line-1<=this.sourcePosition.line&&n.node.position.end.line-1>=this.sourcePosition.line)return null;var a=nL(o,n.display.toLowerCase()),s=bB(a),l=null,c=n.node.id;return c&&String.isString(c)&&(l=nL(o,c.toLowerCase()))&&(s=0),a||l?{type:"block",file:t,path:i,content:r,display:n.display,node:n.node,score:s,matches:a,idMatch:l}:null},e.prototype.getFileSuggestions=function(e,t){var n,i;return v(this,void 0,Promise,(function(){var r,o,a,s,l,c,u,h,p,d,f,g,m,v,b;return y(this,(function(y){switch(y.label){case 0:if(r=this.app.metadataCache,(o=this.fileSuggestions)||(o=this.fileSuggestions=r.getLinkSuggestions()),a=[],""===t){for(s=0,l=o;s<l.length;s++)if(p=l[s],d=p.file){if(r.isUserIgnored(d.path))continue;(g=p.alias)?a.push({type:"alias",alias:g,file:d,path:p.path,score:d.stat.mtime,matches:null}):a.push({type:"file",file:d,path:p.path,score:d.stat.mtime,matches:null})}else a.push({type:"linktext",path:p.path,score:0,matches:null});return[2,a.sort(vB)]}c=o.length<1e4?$A(t):iL(t),y.label=1;case 1:y.trys.push([1,6,7,12]),u=E(WD(UD(o),{maxDelay:0})),y.label=2;case 2:return[4,u.next()];case 3:if((h=y.sent()).done)return[3,5];if(p=h.value,e.isCancelled())return[3,5];(d=p.file)?(f=r.isUserIgnored(d.path),(g=p.alias)?(m=c(g))&&a.push({type:"alias",alias:g,file:p.file,path:p.path,score:m.score+(f?-10:0),matches:m.matches,downranked:f}):(m=MB(c,p.path))&&a.push({type:"file",file:p.file,path:p.path,score:m.score+(f?-10:0),matches:m.matches,downranked:f})):(m=c(p.path))&&a.push({type:"linktext",path:p.path,score:m.score,matches:m.matches}),y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return v=y.sent(),n={error:v},[3,12];case 7:return y.trys.push([7,,10,11]),h&&!h.done&&(i=u.return)?[4,i.call(u)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:return 1===a.length&&"file"===(b=a[0]).type&&b.file.name.toLowerCase()===t.toLowerCase()?[2,null]:[2,a]}}))}))},e}(),SB=function(e){function t(t){var n=e.call(this,t)||this;return n.suggestManager=new xB(n.app,(function(){var e,t;return null!==(t=null===(e=n.context.file)||void 0===e?void 0:e.path)&&void 0!==t?t:""})),n.setInstructions([{command:rf.editor.linkSuggestion.labelTypeHash(),purpose:rf.editor.linkSuggestion.labelLinkHeading()},{command:rf.editor.linkSuggestion.labelTypeBlock(),purpose:rf.editor.linkSuggestion.labelLinkBlock()},{command:rf.editor.linkSuggestion.labelTypePipe(),purpose:rf.editor.linkSuggestion.labelChangeDisplayText()}]),n.scope.register(["Shift"],"Enter",(function(e){if(!e.isComposing)return n.selectSuggestion({type:"none",matches:[],score:0},e),!1})),n.scope.register([],"Tab",(function(e){if(!e.isComposing&&n.suggestions.useSelectedItem(e))return!1})),n.scope.register(null,"#",(function(e){if(("file"===n.suggestManager.mode||"heading"===n.suggestManager.mode)&&n.suggestions.useSelectedItem(e))return!1})),n.scope.register(null,"^",(function(e){if("file"===n.suggestManager.mode&&n.suggestions.useSelectedItem(e))return!1})),n}return f(t,e),t.prototype.onTrigger=function(e,t,n){var i=e.line,r=t.getLine(i).substr(0,e.ch),o=r.lastIndexOf("[["),a=r.lastIndexOf("]");return-1!==o&&a<o?{start:{line:i,ch:o+2},end:{line:i,ch:e.ch},query:r.substr(o+2)}:null},t.prototype.getSuggestions=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=this.suggestManager.runnable)&&t.cancel(),n=e.query,t=this.suggestManager.runnable=new zD,n=n.trim(),[4,this.suggestManager.getSuggestionsAsync(t,n)];case 1:return!(i=r.sent())||t.isCancelled()?[2,null]:(0===i.length&&(i=[yB]),i.sort(vB),[2,i])}}))}))},t.prototype.showSuggestions=function(t){if(e.prototype.showSuggestions.call(this,t),this.context){var n=this.context.query;n&&"^"!==n&&"#"!==n||this.suggestions.forceSetSelectedItem(-1,null)}},t.prototype.renderSuggestion=function(e,t){CB(e,t,this.suggestManager.global)},t.prototype.selectSuggestion=function(e,t){var n=this.context;if(this.close(),n){var i=n.editor,r=n.start,o=n.end,a=n.file,s=n.query;r=kf(r,-2);var l=EB(this.app,e,s,i.getLine(o.line).substr(o.ch),r.ch,o.ch,(null==a?void 0:a.path)||"",t.instanceOf(KeyboardEvent)?aw(t):"","markdown"),c={line:r.line,ch:0},u=[{from:kf(c,l.start),to:kf(c,l.end),text:l.replacement}],h={from:kf(c,l.selectionStart),to:kf(c,l.selectionEnd)};if("block"===e.type&&l.blockId){var p=fF(e,l.blockId),d=p.blockStart,f=p.blockEnd,g=p.addition,m=p.newlines,v=e.content,y=e.file;if(a!==y)v=v.slice(0,f)+g+v.slice(f),this.app.vault.modify(y,v);else{var b=v.substring(d,f);if(""===b)return void this.close();for(var w=i.getValue(),k=0,C=-99999;;){var E=w.indexOf(b,k);if(-1===E)break;Math.abs(d-E)<Math.abs(d-C)&&(C=E),k=E+b.length}if(C>=0){var x=Lf(w,[C+b.length])[0];u.push({from:x,text:g}),h.from.line+=m,h.to.line+=m}}}i.transaction({changes:u,selection:h}),setTimeout((function(){return i.focus()}))}},t.prototype.close=function(){e.prototype.close.call(this),this.suggestManager.fileSuggestions=null,this.suggestManager.runnable&&(this.suggestManager.runnable.cancel(),this.suggestManager.runnable=null)},t}(uB);function MB(e,t){var n=ie(t),i=e(n);return i?(tL(i.matches,t.length-n.length),i):((i=e(t))&&(i.score-=1),i)}var TB="YYYY-MM-DD",DB="HH:mm";function AB(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=new RegExp("{{".concat(i,"}}"),"gi");e=e.replace(o,r)}var a=null;return e=e.replace(/{{(date|time)(?::(.*?))?}}/gi,(function(e,t,i){return a||(a=window.moment()),i?a.format(i):"date"===t.toLowerCase()?a.format(n&&n.dateFormat||TB):a.format(n&&n.timeFormat||DB)}))}var LB=function(e){function t(t,n){var i=e.call(this,t)||this;i.title=rf.dialogue.labelRenameFileGeneric(),i.modalEl.addClass("mod-file-rename");var r=i.inputEl=createEl("textarea",{cls:"rename-textarea"});return r.rows=1,r.innerText=n,i.app.nextFrame((function(){r.style.height="auto",r.style.height=r.scrollHeight+"px"})),r.addEventListener("keypress",(function(e){"Enter"!==e.key||e.isComposing||(e.preventDefault(),i.submit(r.value.trim()))})),r.addEventListener("input",(function(e){rS(),r.rows=1,r.style.height="auto",r.style.height=r.scrollHeight+"px",i.validate(r.value.trim())})),i.setContent(createFragment((function(e){e.appendChild(r)}))).addButton("mod-cta",rf.dialogue.buttonSave(),(function(){return i.submit(r.value.trim())})).addCancelButton(),i}return f(t,e),t.prototype.validate=function(e){},t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.setTitle(this.title),this.inputEl.select(),this.inputEl.focus()},t.prototype.displayError=function(e,t){iS(this.inputEl,e,{classes:["mod-wide","mod-error"]}),t&&setTimeout((function(){return rS()}),2e3)},t}(PI),PB=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.onSave=i,r}return f(t,e),t.prototype.validate=function(e){qy.test(e)?this.displayError(rf.plugins.fileExplorer.msgInvalidCharacters()+Vy,!1):e.startsWith(".")?this.displayError(rf.plugins.fileExplorer.msgBadDotfile(),!1):Uy.test(e)&&this.displayError(rf.plugins.fileExplorer.msgUnsafeCharacters()+zy,!1)},t.prototype.submit=function(e){this.close(),this.onSave(e)},t}(LB),IB=function(e){function t(t,n){var i=e.call(this,t,n.basename)||this;return i.file=n,"md"===n.extension&&(i.title=rf.dialogue.labelRenameFile()),i}return f(t,e),t.prototype.validate=function(t){e.prototype.validate.call(this,t);var n=this.app,i=this.file;n.vault.checkForDuplicate(i,t)&&this.displayError(rf.plugins.fileExplorer.msgFileAlreadyExists(),!1)},t.prototype.submit=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:if(this.close(),n=(t=this).app,i=t.file,""===e)return new CI(rf.plugins.fileExplorer.msgEmptyFileName()),[2];if(r=i.getNewPathAfterRename(e),i.path===r)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.fileManager.renameFile(i,r)];case 2:return s.sent(),new CI(rf.dialogue.msgRenameSuccess()),[3,4];case 3:return(o=s.sent())&&(a=o.message||o.code||o.toString(),new CI(a)),[3,4];case 4:return[2]}}))}))},t}(LB),OB=function(e){function t(t,n,i,r,o){var a=e.call(this,t,o)||this;return a.file=i,a.editor=n,a.cursor=r,a}return f(t,e),t.prototype.submit=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C;return y(this,(function(y){switch(y.label){case 0:return(t=this.getError(e))?(iS(this.inputEl,t,{placement:"right"}),[2,!0]):(i=(n=this).file,r=n.app,o=r.fileManager,a=r.vault,s=this.getChanges(e),0!==(l=s.count())?[3,1]:(this.replaceInEditor(e),[3,6]));case 1:return(c=s.get(i.path))&&c.length>0?(s.removeKey(i.path),u=this.replaceInFile(e),h={link:"",original:"",position:{start:{line:0,col:0,offset:u.start},end:{line:0,col:0,offset:u.end}}},[4,a.process(i,(function(e){var t=c;return t.push({sourcePath:i.path,change:u.text,reference:h}),UB(e,t)}))]):[3,3];case 2:return y.sent(),[3,4];case 3:this.replaceInEditor(e),y.label=4;case 4:return[4,o.updateInternalLinks(s)];case 5:y.sent(),p=rf.nouns.linkWithCount({count:l}),d=rf.nouns.fileWithCount({count:Object.keys(s.data).length}),f=rf.dialogue.msgUpdatedLinks({links:p,files:d}),new CI(f),y.label=6;case 6:for(g=o.linkUpdaters,m=0,v=Object.values(g);m<v.length;m++)b=v[m],w=this.getCustomReplacements(e),k=w.oldSubpath,C=w.newSubpath,b.renameSubpath(this.file,k,C);return this.close(),[2]}}))}))},t}(LB),FB=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n,i,r,o)||this;return a.title=rf.dialogue.labelRenameHeading(),a.oldHeading=o,a}return f(t,e),t.prototype.getError=function(e){return""===e?"Cannot be empty":null},t.prototype.getChanges=function(e){var t=this.file,n=this.app,i=n.metadataCache,r=new Xe,o=Ux(this.oldHeading).toLowerCase(),a=Wx(e);return n.fileManager.iterateAllRefs((function(e,n){var s=Bx(n.link),l=s.path,c=s.subpath;c&&(Ux(c.substring(1)).toLowerCase()===o&&i.getFirstLinkpathDest(l,e)===t&&r.add(e,{sourcePath:e,reference:n,change:WB(n,l+"#"+a)}))})),r},t.prototype.replaceInEditor=function(e){var t=this.cursor,n=this.editor,i=t.line,r=n.getLine(i),o=this.replaceHeadingText(r,e);n.setLine(i,o)},t.prototype.replaceInFile=function(e){var t=this.cursor,n=this.editor,i=t.line,r=n.posToOffset(wf(i)),o=n.getLine(i),a=this.replaceHeadingText(o,e);return{start:r,end:r+o.length,text:a}},t.prototype.replaceHeadingText=function(e,t){return e.replace(/^(#{1,6} ).*/m,(function(e,n){return n+t}))},t.prototype.getCustomReplacements=function(e){return{oldSubpath:Ux(this.oldHeading).toLowerCase(),newSubpath:Wx(e)}},t}(OB),BB=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n,i,r,o.text.substring(1))||this;return a.title=rf.dialogue.labelRenameBlockid(),a.token=o,a}return f(t,e),t.prototype.getError=function(e){return""===e?"Cannot be empty":/^[a-zA-Z0-9\-]+$/.test(e)?null:"Block ID can only contain alphanumeric characters or dash"},t.prototype.getChanges=function(e){var t=this,n=t.file,i=t.app,r=t.token,o=i.metadataCache,a=new Xe,s="#"+r.text.toLowerCase();return i.fileManager.iterateAllRefs((function(t,i){var r=Bx(i.link),l=r.path,c=r.subpath;c&&(c.toLowerCase()===s&&o.getFirstLinkpathDest(l,t)===n&&a.add(t,{sourcePath:t,reference:i,change:WB(i,l+"#^"+e)}))})),a},t.prototype.replaceInEditor=function(e){var t=this.editor,n=this.token;t.replaceRange("^"+e,n.start,n.end)},t.prototype.replaceInFile=function(e){var t=this.editor,n=this.token;return{start:t.posToOffset(n.start),end:t.posToOffset(n.end),text:"^"+e}},t.prototype.getCustomReplacements=function(e){return{oldSubpath:this.token.text.toLowerCase(),newSubpath:"^"+e}},t}(OB);var NB=/^(!?\[\[)(.*?)(\|(.*))?(]])$/,RB=/^(!?\[)(.*?)(]\(\s*)[^ ]+((?:\s+.*?)?\))$/,HB=function(){function e(e){this.app=null,this.vault=null,this.fileParentCreatorByType={},this.inProgressUpdates=null,this.updateQueue=new RD,this.linkUpdaters={},this.app=e,this.vault=e.vault,this.registerFileParentCreator("md",this.getMarkdownNewFileParent.bind(this))}return e.prototype.getMarkdownNewFileParent=function(e){var t=this.vault,n=t.getConfig("newFileLocation");if("folder"===n){var i=t.getConfig("newFileFolderPath");if((r=t.getAbstractFileByPath(i))instanceof $y)return r}else if("current"===n){var r;i=re(e);if((r=t.getAbstractFileByPath(i))instanceof $y)return r}return t.getRoot()},e.prototype.getNewFileParent=function(e,t){var n=t&&le(t)||"md",i=this.fileParentCreatorByType[n];return i||(console.error("No file creator assigned to create file with extension "+n+". Falling back to markdown file creator."),i=this.fileParentCreatorByType.md),i(e)},e.prototype.registerFileParentCreator=function(e,t){this.fileParentCreatorByType[e]=t},e.prototype.unregisterFileCreator=function(e){delete this.fileParentCreatorByType[e]},e.prototype.createNewMarkdownFileFromLinktext=function(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){if(!_y(e))throw new Error(rf.plugins.fileExplorer.msgInvalidCharacters()+Vy);return n=null,e.contains("/")||(n=this.getNewFileParent(t,e)),[2,this.createNewMarkdownFile(n,e)]}))}))},e.prototype.createNewMarkdownFile=function(e,t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){return[2,this.createNewFile(e,t,"md",n)]}))}))},e.prototype.createNewFile=function(e,t,n,i){return v(this,void 0,Promise,(function(){var r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return r=this.vault,e||(e=r.getRoot()),n||(n=t&&le(t)||"md"),this.fileParentCreatorByType.hasOwnProperty(n)||(n="md"),o=e.getParentPrefix(),t?(ue(t=t.trim(),n)&&(t=se(t)),t=he(t),a=r.getAvailablePath(o+t,n)):(s=rf.plugins.fileExplorer.labelUntitledFile(),a=r.getAvailablePath(o+s,n)),!(l=re(a))||"/"===l||r.getAbstractFileByPathInsensitive(l)?[3,2]:[4,r.createFolder(l)];case 1:c.sent(),c.label=2;case 2:return[2,r.create(a,i||"")]}}))}))},e.prototype.createNewFolder=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=!e||e.isRoot()?"":e.path+"/",n=rf.plugins.fileExplorer.labelUntitledFolder(),i=this.vault.getAvailablePath(t+n),[4,this.vault.createFolder(i)];case 1:return o.sent(),(r=this.vault.getAbstractFileByPath(i))&&r instanceof $y?[2,r]:[2,null]}}))}))},e.prototype.renameFile=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.runAsyncLinkUpdate((function(){return n.vault.rename(e,t)}))];case 1:return i.sent(),[2]}}))}))},e.prototype.iterateAllRefs=function(e){this.app.metadataCache.iterateReferences(e);for(var t=this.linkUpdaters,n=0,i=Object.values(t);n<i.length;n++){i[n].iterateReferences(e)}},e.prototype.runAsyncLinkUpdate=function(e){return v(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){return this.inProgressUpdates?(this.inProgressUpdates.push(e),[2]):[2,this.updateQueue.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(e){return a.app.metadataCache.onCleanCache(e)}))];case 1:s.sent(),t=[],n=this.app,i=n.metadataCache,r=n.vault,this.iterateAllRefs((function(e,o){var a=Fx(o.link);if(a){var s=r.getAbstractFileByPath(e);if(s instanceof Xy){var l=i.getLinkpathDest(a,e);l.length>0&&t.push(new VB(n,s,o,l))}}})),s.label=2;case 2:return s.trys.push([2,,7,8]),this.inProgressUpdates=[],[4,e(t)];case 3:s.sent(),s.label=4;case 4:return this.inProgressUpdates.length>0?(o=this.inProgressUpdates,this.inProgressUpdates=[],[4,Promise.all(o.map((function(e){return e(t)})))]):[3,6];case 5:return s.sent(),[3,4];case 6:return[3,8];case 7:return this.inProgressUpdates=null,[7];case 8:return[4,this.updateAllLinks(t)];case 9:return s.sent(),[2]}}))}))}))]}))}))},e.prototype.updateAllLinks=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(p){for(t=new Xe,n=this.app.metadataCache,i=0,r=e;i<r.length;i++)o=r[i],(a=o.check(n))&&t.add(a.sourcePath,a);return 0===(s=t.count())?[2]:(l=rf.nouns.linkWithCount({count:s}),c=rf.nouns.fileWithCount({count:Object.keys(t.data).length}),u=function(){return v(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.updateInternalLinks(t)];case 1:return e.sent(),new CI(rf.dialogue.msgUpdatedLinks({links:l,files:c})),[2]}}))}))},this.vault.getConfig("alwaysUpdateLinks")?[2,u()]:[2,new Promise((function(e,t){try{var n=rf.dialogue.labelLinkAffected({links:l,files:c}),i=new LI(h.app);i.titleEl.setText(rf.dialogue.labelUpdateLinks()),i.contentEl.createEl("p",{text:rf.dialogue.labelConfirmUpdateLinkToFile()}),i.contentEl.createEl("p",{text:n}),i.onClose=function(){return e()};var r=function(t){i.onClose=function(){return null},i.close(),t&&h.app.vault.setConfig("alwaysUpdateLinks",!0),e(u())},o=i.modalEl.createDiv("modal-button-container");o.createEl("button",{text:rf.dialogue.buttonAlwaysUpdate()}).addEventListener("click",(function(){return r(!0)})),o.createEl("button",{text:rf.dialogue.buttonJustOnce()}).addEventListener("click",(function(){return r()})),o.createEl("button",{text:rf.dialogue.buttonDoNotUpdate()}).addEventListener("click",(function(){return i.close()})),i.open()}catch(e){t(e)}}))])}))}))},e.prototype.getAllLinkResolutions=function(){return[]},e.prototype.updateInternalLinks=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:t=this.linkUpdaters,n=function(n){var r,o,a;return y(this,(function(s){switch(s.label){case 0:return(r=i.vault.getAbstractFileByPath(n))instanceof Xy?(o=r.extension,a=e.get(n),t.hasOwnProperty(o)?[4,t[o].applyUpdates(r,a)]:[3,2]):[2,"continue"];case 1:return s.sent(),[3,4];case 2:return[4,i.vault.process(r,(function(e){return UB(e,a)}))];case 3:s.sent(),s.label=4;case 4:return[2]}}))},i=this,r=0,o=e.keys(),s.label=1;case 1:return r<o.length?(a=o[r],[5,n(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.promptForDeletion=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return t=this.app,n=t.vault.getConfig("promptDelete"),i=t.vault.getConfig("trashOption"),n?((r=document.createDocumentFragment()).createEl("p",{text:rf.dialogue.labelConfirmDeletion({filename:e.name})}),"system"===i?r.createEl("p",{text:rf.dialogue.labelMoveToSystemTrash()}):"local"===i?r.createEl("p",{text:rf.dialogue.labelMoveToVaultTrash()}):"none"===i&&r.createEl("p",{cls:"mod-warning",text:rf.dialogue.labelPermanentDelete()}),e instanceof $y&&e.children.length>0&&(r.createEl("p",{cls:"mod-warning",text:rf.dialogue.labelNonEmptyFolder()}),r.createEl("p",{cls:"mod-warning",text:rf.dialogue.labelDeleteFolderWarning()})),e instanceof Xy&&(o=t.metadataCache.getBacklinksForFile(e),(a=o.count())>0&&(s=rf.nouns.linkWithCount({count:a}),l=rf.dialogue.labelExistingBacklink({links:s}),r.createEl("p",{cls:"mod-warning",text:l}))),[4,new Promise((function(n,i){var o=!1,a=new PI(t).setTitle(e instanceof $y?rf.dialogue.labelDeleteFolder():rf.dialogue.labelDeleteFile()).setContent(r);Lt.isMobile?a.addButton("mod-warning",rf.dialogue.buttonDeleteDoNotAskAgain(),(function(){return v(c,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t.vault.setConfig("promptDelete",!1),[4,this.trashFile(e)];case 1:return o.sent(),n(),[3,3];case 2:return r=o.sent(),i(r),[3,3];case 3:return[2]}}))}))})):a.addCheckbox(rf.dialogue.labelDoNotAskAgain(),(function(e){o=e.target.checked})),a.addButton("mod-warning",rf.dialogue.buttonDelete(),(function(){return v(c,void 0,void 0,(function(){var r;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),o&&t.vault.setConfig("promptDelete",!1),[4,this.trashFile(e)];case 1:return a.sent(),n(),[3,3];case 2:return r=a.sent(),i(r),[3,3];case 3:return[2]}}))}))})).addCancelButton((function(){n()})).open()}))]):[3,2];case 1:return u.sent(),[3,4];case 2:return[4,this.trashFile(e)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},e.prototype.promptForFolderDeletion=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.promptForDeletion(e)]}))}))},e.prototype.promptForFileDeletion=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return[2,this.promptForDeletion(e)]}))}))},e.prototype.promptForFileRename=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return new IB(this.app,e).open(),[2]}))}))},e.prototype.trashFile=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.app,"system"!==(n=t.vault.getConfig("trashOption"))?[3,2]:[4,t.vault.trash(e,!0)];case 1:return i.sent(),[3,6];case 2:return"local"!==n?[3,4]:[4,t.vault.trash(e,!1)];case 3:return i.sent(),[3,6];case 4:return"none"!==n?[3,6]:[4,t.vault.delete(e,!0)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},e.prototype.generateMarkdownLink=function(e,t,n,i){var r,o=this.app,a=o.vault.getConfig("useMarkdownLinks"),s=!a,l=o.metadataCache.fileToLinktext(e,t,s)+(n||"");if(e.path===t&&n&&(l=n),a){var c=jw(l);r="md"===e.extension?"[".concat(i||e.basename,"](").concat(c,")"):"![](".concat(c,")")}else i&&i.toLowerCase()===l.toLowerCase()&&(l=i,i=null),r=i?"[[".concat(l,"|").concat(i,"]]"):"[[".concat(l,"]]"),"md"!==e.extension&&(r="!"+r);return r},e.prototype.createAndOpenMarkdownFile=function(e,t){var n,i;return v(this,void 0,Promise,(function(){var r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return r=this.app.workspace,o=null!==(i=null===(n=r.getActiveFile())||void 0===n?void 0:n.path)&&void 0!==i?i:"",a=this.getNewFileParent(o,e),[4,this.createNewMarkdownFile(a,e)];case 1:return s=l.sent(),[4,r.getLeaf(t).openFile(s,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 2:return l.sent(),[2,s]}}))}))},e.prototype.insertTextIntoFile=function(e,t,n,i,r,o){return v(this,void 0,void 0,(function(){var a=this;return y(this,(function(s){switch(s.label){case 0:return[4,this.app.vault.process(e,(function(s){var l,c,u=a.getContentsAndFrontmatter(s),h=u.content;c=u.frontmatter;var p,d=""===(l=h)?"":"\n\n";if(r&&(t=AB(r,{fromTitle:i,newTitle:e.basename,content:t})),p=o?t+d+l:l+d+t,zB(c,n),Object.keys(c).length>0){var f=hF(c).trim();return"---\n".concat(f,"\n---\n")+p}return p}))];case 1:return s.sent(),[2]}}))}))},e.prototype.mergeFile=function(e,t,n,i){return v(this,void 0,void 0,(function(){var r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return r=this.app.workspace,[4,this.vault.read(t)];case 1:o=u.sent();try{l=this.getContentsAndFrontmatter(o),a=l.content,s=l.frontmatter}catch(e){return new CI(rf.dialogue.msgMergeFailed({message:rf.properties.msgInvalidProperties()})),[2]}return[4,this.runAsyncLinkUpdate((function(r){return v(c,void 0,void 0,(function(){var o,l,c;return y(this,(function(u){switch(u.label){case 0:return[4,this.insertTextIntoFile(e,a,s,t.basename,n,i)];case 1:return u.sent(),[4,this.trashFile(t)];case 2:if(u.sent(),r)for(o=0,l=r;o<l.length;o++)(c=l[o]).resolvedFile===t&&(c.resolvedFile=e,c.resolvedPaths=[]);return[2]}}))}))}))];case 2:return u.sent(),[4,r.getLeaf().openFile(e)];case 3:return u.sent(),[2]}}))}))},e.prototype.getContentsAndFrontmatter=function(e){var t={},n=0,i=sx(e),r="";i&&(n=i.blockTo,r=i.frontMatter);var o=e.slice(n);return r&&(t=uF(r)),{content:o,frontmatter:t}},e.prototype.processFrontMatter=function(e,t,n){return v(this,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:return"md"!==e.extension?[2]:[4,this.vault.process(e,(function(e){var n=sx(e),i=n?uF(n.frontMatter):{};if(i&&"object"==typeof i||(i={}),t(i),0===Object.keys(i).length)return n?e.slice(0,n.blockFrom)+e.slice(n.blockTo):e;var r=hF(i);return n?e.slice(0,n.from)+r+e.slice(n.to):"---\n"+r+"---\n"+e}),n)];case 1:return i.sent(),[2]}}))}))},e.prototype.storeTextFileBackup=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),(n=this.app.internalPlugins.getEnabledPluginById("file-recovery"))?[4,n.forceAdd(e,t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e}(),VB=function(){function e(e,t,n,i){this.app=e,this.sourceFile=t,this.reference=n,this.resolvedFile=i[0],this.resolvedPaths=i.map((function(e){return e.path}))}return e.prototype.check=function(e){var t=this,n=t.reference,i=t.sourceFile,r=t.resolvedPaths,o=i.path,a=Bx(n.link),s=a.path,l=a.subpath,c=e.getLinkpathDest(s,o).map((function(e){return e.path}));if(0===c.length||!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(r,c)){var u=NB.test(n.original),h=e.fileToLinktext(this.resolvedFile,o,u)+l;if(n.link!==h){var p=[],d=this.app.metadataCache.getFileCache(this.resolvedFile);return d&&(p=fx(d.frontmatter)),{sourcePath:o,reference:n,change:WB(n,h,p)}}}},e}();function zB(e,t){if(0===Object.keys(t).length)return e;for(var n in t)if(t.hasOwnProperty(n)){var i=e.hasOwnProperty(n)?e[n]:void 0,r=t[n];i?Array.isArray(i)&&Array.isArray(r)?e[n]=i.concat(r).unique():"object"==typeof i&&null!==r&&"object"==typeof r?zB(i,r):null!==r&&(e[n]=r):e[n]=r}}function qB(e,t,n){for(;e&&t.length;){var i=t.shift();if(Array.isArray(e)){var r=parseInt(i);if(isNaN(r)||r<0||r>=e.length)return;if(!(t.length>0))return void(e[r]=n);e=e[r]}else{if("object"!=typeof e)return;if(!(t.length>0))return void(e[i]=n);e=e[i]}}}function UB(e,t){for(var n=[],i=[],r=0,o=t;r<o.length;r++){var a=o[r];if(wx(a.reference)){var s=a.reference.position;n.push({start:s.start.offset,end:s.end.offset,text:a.change})}else kx(a.reference)&&i.push({key:a.reference.key,value:a.change})}if(e=function(e,t){t.sort((function(e,t){return t.start-e.start}));for(var n=0,i=t;n<i.length;n++){var r=i[n];e=e.substring(0,r.start)+r.text+e.substring(r.end)}return e}(e,n),0===i.length)return e;var l,c=sx(e);if(!c)return e;try{l=uF(c.frontMatter)}catch(t){return e}for(var u=0,h=i;u<h.length;u++){var p=h[u];qB(l,p.key.split("."),p.value)}var d=hF(l);return e.slice(0,c.from)+d+e.slice(c.to)}function WB(e,t,n){var i,r=e.original,o=e.link,a=r.match(NB);if(a){var s=a[1],l=a[2],c=a[4],u=void 0===c?"":c,h=a[5];if(u){var p=u.trim();de(l)!==p||(null==n?void 0:n.contains(p))||(u=de(Fx(t))),i=s+t+"|"+u+h}else i=s+t+h}else{var d=jw(t),f=r.match(RB);if(f){var g=f[2],m=_w(g).trim();m===de(l=Fx(o))?g=de(Fx(t)):m.contains("/")&&m===fe(l)&&(g=fe(Fx(t))),i=f[1]+g+f[3]+d+f[4]}else i="[](".concat(d,")"),r.startsWith("!")&&(i="!"+i)}return i}var _B=["YYYY-MM-DD"],jB=["YYYY-MM-DD[T]HH:mm:ss","YYYY-MM-DD[T]HH:mm","YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm"];function GB(e){if(null===e)return null;if(Array.isArray(e)){var t=e.filter((function(e){return null!=e})).map((function(e){return String(e)}));return t.length>0?t:null}return String.isString(e)?[e]:[String(e)]}var KB=function(e){function t(t,n){var i=e.call(this)||this;i.hoverPopover=null,i.properties=[],i.focusedLine=null,i.selectedLines=new Set,i.collapsed=!1,i.app=t,i.owner=n,i.rendered=[],i.containerEl=createDiv({cls:"metadata-container",attr:{tabIndex:-1}}),i.containerEl.setAttr("data-property-count",0),i.containerEl.addEventListener("keydown",(function(e){e.isComposing||e.target===i.containerEl&&i.handleKeypress(e)})),i.containerEl.addEventListener("focusin",(function(e){Lt.isMobileApp&&i.app.mobileNavbar.hide();for(var t=0,n=i.rendered;t<n.length;t++){if(n[t].containerEl===e.targetNode)return}i.clearSelection()})),i.headingEl=i.containerEl.createDiv({cls:"metadata-properties-heading",attr:{tabIndex:0}},(function(e){gb(i.foldEl=e.createDiv({cls:"collapse-indicator collapse-icon"}),"right-triangle"),e.createDiv({cls:"metadata-properties-title",text:rf.properties.labelHeading()}),e.addEventListener("click",i.toggleCollapse.bind(i)),e.addEventListener("contextmenu",i.showPropertiesMenu.bind(i)),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("keydown",(function(e){e.isComposing||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||("ArrowLeft"===e.key?(e.preventDefault(),i.setCollapse(!0)):"ArrowRight"===e.key?(e.preventDefault(),i.setCollapse(!1)):"ArrowUp"===e.key?(e.preventDefault(),i.owner.shiftFocusBefore(e)):"ArrowDown"!==e.key&&"j"!==e.key||(e.preventDefault(),i.collapsed?i.owner.shiftFocusAfter():i.focusPropertyAtIndex(0)))}))}));var r=i.contentEl=i.containerEl.createDiv("metadata-content");return i.propertyListEl=r.createDiv("metadata-properties"),i.addPropertyButtonEl=r.createDiv({cls:"metadata-add-button text-icon-button",attr:{tabIndex:0}},(function(e){e.createSpan("text-button-icon",(function(e){return gb(e,"lucide-plus")})),e.createSpan({cls:"text-button-label",text:rf.properties.labelAddPropertyButton()}),e.addEventListener("click",(function(){return i.addProperty()})),e.addEventListener("keydown",(function(e){e.isComposing||(" "===e.key||"Enter"===e.key?(e.preventDefault(),i.addProperty()):"ArrowUp"===e.key||"k"===e.key||e.shiftKey&&"Tab"===e.key?(e.preventDefault(),i.focusPropertyAtIndex(-1)):"ArrowDown"===e.key||"j"===e.key||"Tab"===e.key?(e.preventDefault(),i.owner.shiftFocusAfter(e)):i.handleKeypress(e))}))})),i}return f(t,e),t.prototype.handleKeypress=function(e){var t,n,i,r;if("o"===e.key)e.preventDefault(),this.addProperty();else if("Home"===e.key||"ArrowDown"===e.key&&e.altKey)e.preventDefault(),this.owner.shiftFocusAfter(e);else if("ArrowUp"!==e.key&&"ArrowDown"!==e.key||!e.shiftKey){if("ArrowUp"===e.key||"k"===e.key||"Tab"===e.key&&e.shiftKey){e.preventDefault(),this.clearSelection();l=this.focusedLine?this.rendered.indexOf(this.focusedLine):-1;var o=this.properties[l-1];o?this.focusProperty(o.key):this.headingEl.focus()}else if("ArrowDown"===e.key||"j"===e.key||"Tab"===e.key&&!e.shiftKey){e.preventDefault(),this.clearSelection();l=this.focusedLine?this.rendered.indexOf(this.focusedLine):-1;(c=this.properties[l+1])?this.focusProperty(c.key):this.addPropertyButtonEl.focus()}else if("a"===e.key&&hw.isModifier(e,"Mod"))e.preventDefault(),this.selectAll();else if("z"===e.key&&e.shiftKey&&hw.isModifier(e,"Mod"))e.preventDefault(),null===(n=(t=this.owner).redo)||void 0===n||n.call(t);else if("z"===e.key&&hw.isModifier(e,"Mod"))e.preventDefault(),null===(r=(i=this.owner).undo)||void 0===r||r.call(i);else if(Lt.isMacOS&&"Backspace"===e.key&&e.metaKey||"Delete"===e.key){e.preventDefault();var a=Array.from(this.selectedLines);0===a.length&&this.focusedLine&&a.push(this.focusedLine),this.removeProperties(a),this.clearSelection()}}else{e.preventDefault();var s="ArrowDown"===e.key?1:-1;if(this.focusedLine){var l=this.rendered.indexOf(this.focusedLine),c=this.rendered[l+s],u=this.selectedLines.has(this.focusedLine)&&this.selectedLines.has(c);c&&(u?this.selectProperty(this.focusedLine,!1):(this.selectProperty(this.focusedLine,!0),this.selectProperty(c,!0)),c.focusProperty())}}},t.prototype.onload=function(){this.registerEvent(this.app.metadataTypeManager.on("changed",this.onMetadataTypeChange,this))},t.prototype.hasFocus=function(){var e=this.containerEl.doc.activeElement;return this.containerEl.contains(e)},t.prototype.hasPropertyFocused=function(){for(var e=this.containerEl.doc.activeElement,t=0,n=this.rendered;t<n.length;t++){if(n[t].containerEl===e)return!0}return!1},t.prototype.showPropertiesMenu=function(e){var t=this;e.preventDefault(),(new fw).addItem((function(e){return e.setTitle(rf.commands.addProperty()).onClick((function(){return t.addProperty()})).setSection("action")})).addItem((function(e){return e.setTitle(rf.commands.clearProperties()).onClick((function(){return t.removeProperties(t.rendered)})).setSection("danger").setWarning(!0)})).showAtMouseEvent(e)},t.prototype.toggleCollapse=function(){this.setCollapse(!this.collapsed)},t.prototype.selectAll=function(){for(var e=0,t=this.rendered;e<t.length;e++){var n=t[e];this.selectProperty(n,!0)}},t.prototype.setCollapse=function(e,t){void 0===t&&(t=!0),this.collapsed!==e&&(this.collapsed=e,this.containerEl.toggleClass("is-collapsed",this.collapsed),this.headingEl.toggleClass("is-collapsed",this.collapsed),this.foldEl.toggleClass("is-collapsed",this.collapsed),Be(this.contentEl,this.collapsed,t))},t.prototype.focusPropertyAtIndex=function(e){-1===e&&(e=this.rendered.length-1);var t=this.rendered[e];t?t.focusProperty():this.addPropertyButtonEl.focus()},t.prototype._copyToClipboard=function(e,t){for(var n={},i=0,r=t;i<r.length;i++){var o=r[i];n[o.entry.key]=o.entry.value}e.clipboardData.setData("Text",hF(n)),e.clipboardData.setData("obsidian/properties",JSON.stringify(n))},t.prototype.handleCut=function(e){if(this.hasPropertyFocused()){var t=Array.from(this.selectedLines);0===t.length&&this.focusedLine&&t.push(this.focusedLine),0!==t.length&&(e.preventDefault(),this._copyToClipboard(e,t),this.removeProperties(t))}},t.prototype.handleCopy=function(e){if(this.hasPropertyFocused()){var t=Array.from(this.selectedLines);0===t.length&&this.focusedLine&&t.push(this.focusedLine),0!==t.length&&(e.preventDefault(),this._copyToClipboard(e,t))}},t.prototype.insertProperties=function(e){var t=this.serialize();zB(t,e),this.synchronize(t),this.save()},t.prototype.handlePaste=function(e){var t=e.clipboardData.getData("obsidian/properties");if(t){e.preventDefault();var n=null;try{n=JSON.parse(t)}catch(e){console.error(e)}n&&this.insertProperties(n)}},t.prototype.handleItemSelection=function(e,t){var n=this.selectedLines,i=this.focusedLine;if(t.focusProperty(),e.altKey&&!e.shiftKey)return this.selectProperty(t,!n.has(t)),!0;if(e.shiftKey){if(i)for(var r=[this.rendered.indexOf(i),this.rendered.indexOf(t)].sort(),o=r[0],a=r[1],s=n.has(i)&&n.has(t),l=o;l<=a;l++)this.selectProperty(this.rendered[l],!s);else this.selectProperty(t,!0);return!0}return this.clearSelection(),!1},t.prototype.selectProperty=function(e,t){e&&(t?(this.selectedLines.add(e),e.setSelected(!0)):(this.selectedLines.delete(e),e.setSelected(!1)))},t.prototype.clearSelection=function(){this.selectedLines.forEach((function(e){e.setSelected(!1)})),this.selectedLines.clear()},t.prototype.clear=function(){this.focusedLine=null,this.selectedLines=new Set,this.synchronize({})},t.prototype.focusProperty=function(e){var t=this.rendered.find((function(t){return t.entry.key===e}));null==t||t.focusProperty()},t.prototype.focusKey=function(e){var t=this.rendered.find((function(t){return t.entry.key===e}));null==t||t.focusKey()},t.prototype.focusValue=function(e,t){var n=this.rendered.find((function(t){return t.entry.key===e}));null==n||n.focusValue(t)},t.prototype.onMetadataTypeChange=function(e){var t=this.rendered.find((function(t){return t.entry.key.toLowerCase()===e}));t&&t.renderProperty(t.entry,!0)},t.prototype.synchronize=function(e){for(var t=function(e){var t=[];if(!e)return t;for(var n=dx(e,/^tag(s)?$/i,!0),i=fx(e),r=mx(e),o=0,a=Object.entries(e);o<a.length;o++){var s=a[o],l=s[0],c=s[1];e.hasOwnProperty(l)&&(l.match(/^alias(es)?$/i)?(l="aliases",c=i):l.match(/^cssclass(es)?$/i)?(l="cssclasses",c=r):l.match(/^tag(s)?$/i)&&(l="tags",c=n),t.push({key:l,type:ZB(c),value:c}))}return t}(e),n=[],i=function(e){var i=t[e],o=r.rendered.find((function(e){return e.entry.key===i.key}));o||(o=new YB(r.app,r,i),r.addChild(o)),o.renderProperty(i),n.push(o)},r=this,o=0;o<t.length;o++)i(o);var a=this.rendered.find((function(e){return""===e.entry.key}));if(a){var s=this.containerEl.doc.activeElement;a.containerEl.contains(s)&&(n.push(a),t.push(a.entry))}this.propertyListEl.setChildrenInPlace(n.map((function(e){return e.containerEl})));for(var l=0,c=this.rendered;l<c.length;l++){var u=c[l];n.contains(u)||this.removeChild(u)}this.properties=t,this.rendered=n,this.containerEl.setAttr("data-property-count",this.properties.length)},t.prototype.serialize=function(){for(var e={},t=0,n=this.properties;t<n.length;t++){var i=n[t];e[i.key]=i.value}return e},t.prototype.addProperty=function(){this.collapsed&&this.setCollapse(!1,!0);var e=this.serialize();e[""]=null,this.synchronize(e),this.focusKey("")},t.prototype.removeProperties=function(e,t){void 0===t&&(t=!0);for(var n=0,i=this.focusedLine?this.rendered.indexOf(this.focusedLine):-1,r=this.serialize(),o=0,a=e;o<a.length;o++){var s=a[o];this.rendered.indexOf(s)<=i&&n++,delete r[s.entry.key]}i-=n,this.synchronize(r),t&&(Object.keys(r).length>0?this.focusPropertyAtIndex(Math.clamp(0,i,this.rendered.length-1)):this.owner.shiftFocusAfter()),this.owner.saveFrontmatter(r)},t.prototype.save=function(){var e=this.serialize();this.owner.saveFrontmatter(e)},t.prototype.reorderKey=function(e,t){var n=this.serialize();delete n[e.key];for(var i={},r=Object.keys(n),o=0;o<r.length;o++){o===t&&(i[e.key]=e.value);var a=r[o];i[a]=n[a]}t>=r.length&&(i[e.key]=e.value),this.owner.saveFrontmatter(i)},t}(nb),YB=function(e){function t(t,n,i){var r=e.call(this)||this;r.app=t,r.metadataEditor=n,r.entry=i,r.typeInfo=r.app.metadataTypeManager.getTypeInfo(i),r.containerEl=createDiv({cls:"metadata-property",attr:{tabIndex:0}}),r.containerEl.setAttr("data-property-key",i.key),r.containerEl.setAttr("data-property-type",i.type),r.containerEl.addEventListener("focusin",(function(e){r.metadataEditor.focusedLine=r})),r.containerEl.addEventListener("keydown",(function(e){if(!e.isComposing&&!e.defaultPrevented&&e.target===r.containerEl)if(r.metadataEditor.selectedLines.size>1)r.metadataEditor.handleKeypress(e);else if("Enter"===e.key||" "===e.key||"A"===e.key||"i"===e.key){e.preventDefault();var t="both";"A"===e.key?t="end":"i"===e.key&&(t="start"),r.metadataEditor.focusValue(i.key,t)}else"ArrowLeft"===e.key||"h"===e.key?(e.preventDefault(),r.focusKey()):"ArrowRight"===e.key||"l"===e.key?(e.preventDefault(),r.focusValue()):r.metadataEditor.handleKeypress(e)})),r.keyEl=r.containerEl.createDiv({cls:"metadata-property-key"}),r.iconEl=r.keyEl.createSpan({cls:"metadata-property-icon",attr:{"aria-disabled":!r.entry.key}},(function(e){e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(t){t.preventDefault(),"true"!==e.getAttr("aria-disabled")&&(r.containerEl.hasClass("has-active-menu")||r.handleItemClick(t))})),Lt.isMobileApp||e.addEventListener("contextmenu",(function(e){e.preventDefault(),r.containerEl.hasClass("has-active-menu")||(r.focusProperty(),r.showPropertyMenu(e))}))})),r.keyInputEl=r.keyEl.createEl("input",{cls:"metadata-property-key-input",value:r.entry.key,type:"text"},(function(e){Lt.isMobile||aS(e,r.entry.key),e.addEventListener("blur",(function(t){if(e!==e.doc.activeElement){var n=e.value.trim();""!==n||""!==r.entry.key?r.handleUpdateKey(n)||(e.value=r.entry.key):r.metadataEditor.removeProperties([r],!1)}})),e.addEventListener("keydown",(function(n){if(!n.isComposing)if("Tab"===n.key||"Enter"===n.key){n.preventDefault();var o=e.value.trim();r.handleUpdateKey(o)&&t.nextFrame((function(){r.renderProperty(r.entry,!0),r.focusValue()}))}else"Escape"===n.key&&(n.preventDefault(),e.value=i.key,i.key?r.focusProperty():r.metadataEditor.removeProperties([r]))})),e.addEventListener("input",(function(){var t=i.key||e.value.trim();r.iconEl.setAttr("aria-disabled",!t)})),new hN(t,e,r.metadataEditor.properties).onSelect((function(n){var i=n.text.trim();e.value=i,r.handleUpdateKey(i)&&t.nextFrame((function(){r.renderProperty(r.entry,!0),r.focusValue()}))}))})),r.valueEl=r.containerEl.createDiv("metadata-property-value"),gt(r.valueEl);var o=r.warningEl=r.containerEl.createDiv({cls:"clickable-icon metadata-property-warning-icon"});return aS(o,rf.properties.labelTypeMismatchWarning({type:r.typeInfo.expected.name()})),gb(o,"lucide-alert-triangle"),o.toggle(r.typeInfo.expected!==r.typeInfo.inferred),o.addEventListener("click",(function(e){new gN(r.app,r).open()})),r}return f(t,e),t.prototype.onload=function(){var e=this;Et(this.iconEl,this.containerEl,this.metadataEditor.propertyListEl,10,(function(){}),(function(t){return e.metadataEditor.reorderKey(e.entry,t)}))},t.prototype.setSelected=function(e){this.containerEl.toggleClass("is-selected",e)},t.prototype.handleItemClick=function(e){this.metadataEditor.handleItemSelection(e,this)||this.showPropertyMenu(e)},t.prototype.focusKey=function(){this.keyInputEl.focus()},t.prototype.focusProperty=function(){this.containerEl.focus()},t.prototype.focusValue=function(e){if(void 0===e&&(e="both"),this.rendered)this.rendered.focus();else{var t=this.valueEl.find("input");if(t&&t.instanceOf(HTMLInputElement))if(t.focus(),"end"===e){var n=t.value.length;t.setSelectionRange(n,n)}else"start"===e?t.setSelectionRange(0,0):t.select()}},t.prototype.showPropertyMenu=function(e){var t,n=this;e.preventDefault();var i=new fw;i.addSections(["title","action","action.changeType","edit","","danger"]);var r=this.app.metadataTypeManager,o=!fB.hasOwnProperty(this.entry.key),a=r.registeredTypeWidgets;Lt.isPhone&&i.addItem((function(e){return e.setTitle(n.entry.key).setSection("title").removeIcon().setIsLabel(!0)})),Lt.isMobile&&i.addItem((function(e){return e.setTitle(rf.properties.optionPropertyType()).setSection("action.changeType").removeIcon().setIsLabel(!0).titleEl.addClass("u-small")})).onHide((function(){wb()})),i.setSectionSubmenu("action.changeType",{title:rf.properties.optionPropertyType(),icon:"lucide-menu"});for(var s=function(e){if(e.reservedKeys&&!(null===(t=e.reservedKeys)||void 0===t?void 0:t.contains(l.entry.key)))return"continue";i.addItem((function(t){var i;return t.setTitle(e.name()).setIcon(null!==(i=e.icon)&&void 0!==i?i:"lucide-pencil").setSection("action.changeType").setDisabled(!o).setChecked(e.type===n.typeInfo.expected.type).onClick((function(){r.setType(n.entry.key,e.type),n.renderProperty(n.entry,!0),n.focusValue()}))}))},l=this,c=0,u=Object.values(a);c<u.length;c++){s(u[c])}Lt.isDesktopApp&&(i.addItem((function(t){return t.setTitle(rf.interface.menu.cut()).setSection("edit").setIcon("lucide-scissors").onClick((function(){e.win.electron.remote.getCurrentWebContents().cut()}))})),i.addItem((function(t){return t.setTitle(rf.interface.menu.copy()).setSection("edit").setIcon("lucide-copy").onClick((function(){e.win.electron.remote.getCurrentWebContents().copy()}))})),i.addItem((function(t){return t.setTitle(rf.interface.menu.paste()).setSection("edit").setIcon("lucide-clipboard-check").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))}))),i.addItem((function(e){return e.setTitle(rf.interface.menu.remove()).setWarning(!0).setSection("danger").setIcon("lucide-trash-2").onClick((function(){n.metadataEditor.removeProperties([n])}))})),i.setParentElement(this.containerEl).showAtMouseEvent(e)},t.prototype.handleUpdateKey=function(e){if(""===e)return this.keyInputEl.isActiveElement()&&iS(this.keyInputEl,"Property key cannot be empty",{classes:["mod-error"]}),!1;if(this.entry.key!==e){var t=this.metadataEditor.rendered.find((function(t){return t.entry.key.toLowerCase()===e.toLowerCase()}));if(t&&t!==this.metadataEditor.focusedLine)return iS(this.keyInputEl,"Property already exists",{classes:["mod-error"]}),!1;this.entry.key=e,this.containerEl.setAttr("data-property-key",e),this.metadataEditor.save()}return rS(),this.iconEl.setAttr("aria-disabled",!1),!0},t.prototype.handleUpdateValue=function(e){this.entry.value!==e&&(this.entry.value=e,this.metadataEditor.save())},t.prototype.handlePropertyBlur=function(){Lt.isPhone?wb():this.focusProperty()},t.prototype.renderProperty=function(e,t,n){var i,r,o,a,s=this;void 0===t&&(t=!1),void 0===n&&(n=!1);var l=this.typeInfo.inferred.type,c=null===(i=this.entry)||void 0===i?void 0:i.value;this.entry=e;var u=this.typeInfo=this.app.metadataTypeManager.getTypeInfo(e),h=n?u.expected:u.inferred;!t&&(this.valueEl.contains(this.containerEl.doc.activeElement)||this.valueEl.hasChildNodes()&&c===this.entry.value&&l===u.inferred.type)||(gb(this.iconEl,null!==(r=u.expected.icon)&&void 0!==r?r:"lucide-file-question"),aS(this.warningEl,rf.properties.labelTypeMismatchWarning({type:this.typeInfo.expected.name()})),this.warningEl.toggle(!n&&u.expected!==u.inferred),this.rendered&&(this.removeChild(this.rendered),this.rendered=void 0),this.valueEl.empty(),this.rendered=h.render(this.valueEl,this.entry,{app:this.app,key:this.entry.key,onChange:this.handleUpdateValue.bind(this),rerender:function(){return s.renderProperty(s.entry,!0)},sourcePath:null!==(a=null===(o=this.metadataEditor.owner.getFile())||void 0===o?void 0:o.path)&&void 0!==a?a:"",blur:this.handlePropertyBlur.bind(this),metadataEditor:this.metadataEditor}),this.rendered&&this.addChild(this.rendered))},t}(nb),XB=/^\d{4}-[01]\d-[0-3]\d$/,$B=/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/;function ZB(e){var t=typeof e;return null==e?"text":"string"==typeof e?$B.test(e)?"datetime":XB.test(e)?"date":"text":"number"===t?"number":"boolean"===t?"checkbox":it(e,!0)?"multitext":"unknown"}var QB=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=t,n}return f(t,e),t.prototype.onFocus=function(){},t.prototype.focus=function(){this.onFocus()},t}(nb),JB={name:rf.properties.types.optionText,type:"text",icon:"lucide-text",default:function(){return""},validate:function(e){return"string"==typeof e},render:function(e,t,n){var i,r=String(null!==(i=t.value)&&void 0!==i?i:""),o=new eN(n,e);return o.setValue(r),new uN(n,o.inputEl,(function(e,t){t.preventDefault(),o.setValue(e),n.onChange(e),wb(),n.blur()})),o}},eN=function(e){function t(t,n){var i=e.call(this,n)||this;i.hoverPopover=null,i.ctx=t,i.containerEl=n;var r=i.inputEl=n.createDiv({cls:"metadata-input-longtext mod-truncate",attr:{placeholder:rf.properties.labelNoValue(),contentEditable:!0,tabIndex:0}}),o=function(e){i.setValue(e),i.ctx.onChange(e||null)};r.addEventListener("drop",(function(e){var n=t.app.dragManager.draggable;if(n){var i=kM(t.app,n,t.sourcePath);i.length>0&&(e.preventDefault(),o(i[0]))}})),r.addEventListener("keydown",(function(e){if(!e.isComposing)if("Enter"===e.key){if(e.shiftKey)return;if(e.defaultPrevented)return;e.preventDefault(),o(r.textContent),i.ctx.blur()}else"Escape"===e.key&&(e.preventDefault(),i.render(),i.ctx.blur())})),r.addEventListener("input",(function(e){e.isComposing||ew(r,!0)})),r.addEventListener("paste",(function(e){tw(r,e)})),r.addEventListener("blur",(function(e){e.defaultPrevented||o(r.textContent.trimEnd())}));var a=i.linkEl=n.createDiv("metadata-link"),s=i.linkTextEl=a.createDiv("metadata-link-inner");return a.createDiv("metadata-link-flair",(function(e){return gb(e,"lucide-pencil")})),s.onClickEvent((function(e){0!==e.button&&1!==e.button||(e.preventDefault(),i.isWikilink()?i.ctx.app.workspace.openLinkText(i.getLinkText(),i.ctx.sourcePath,hw.isModEvent(e),{active:!0}):St(i.value)?window.open(i.value,"_blank"):Dt(i.value)&&window.open("mailto:"+i.value,"_blank"))})),s.addEventListener("contextmenu",(function(e){e.preventDefault();var t=(new fw).addSections(["title","correction","spellcheck","open","edit","action","view","info","","danger"]);i.isWikilink()?(e.preventDefault(),i.ctx.app.workspace.handleLinkContextMenu(t,i.getLinkText(),i.ctx.sourcePath)):St(i.value)?(e.preventDefault(),i.ctx.app.workspace.handleExternalLinkContextMenu(t,i.value)):Dt(i.value)&&(e.preventDefault(),i.ctx.app.workspace.handleExternalLinkContextMenu(t,"mailto:"+i.value)),t.showAtMouseEvent(e)})),i.isWikilink()&&t.app.dragManager.handleDrag(s,(function(e){return t.app.dragManager.dragLink(e,i.getLinkText(),t.sourcePath)})),a.addEventListener("click",(function(e){e.defaultPrevented||i.focus()})),a.addEventListener("mouseover",(function(e){s.hasClass("internal-link")&&i.ctx.app.workspace.trigger("hover-link",{event:e,source:"properties",hoverParent:i,targetEl:a,linktext:i.getLinkText()})})),i}return f(t,e),t.prototype.isWikilink=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")},t.prototype.render=function(){var e=this.ctx.app,t=this.linkTextEl,n=this.getLinkText();t.setText(this.getDisplayText());var i=this.isWikilink(),r=!i&&St(this.value),o=Dt(this.value),a=i&&!e.metadataCache.getFirstLinkpathDest(Fx(n),this.ctx.sourcePath);t.toggleClass("internal-link",i),t.toggleClass("external-link",r||o),t.toggleClass("is-unresolved",a),i||r||o?(this.inputEl.hide(),this.linkEl.show()):(this.linkEl.hide(),this.inputEl.show())},t.prototype.isAlias=function(){var e=this.value;return!!(e&&e.startsWith("[[")&&e.endsWith("]]"))&&Yw(e.slice(2,-2)).isAlias},t.prototype.getDisplayText=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")?Yw(e.slice(2,-2)).title:e||""},t.prototype.getLinkText=function(){var e=this.value;return e&&e.startsWith("[[")&&e.endsWith("]]")?Yw(e.slice(2,-2)).href:e||""},t.prototype.setValue=function(e){this.value=e,this.inputEl.textContent=e,this.render()},t.prototype.onFocus=function(){this.inputEl.show(),this.linkEl.hide(),Lt.isMobile?this.inputEl.focus():bb(this.inputEl)},t}(QB),tN=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.hoverPopover=null,r.ctx=t,r.containerEl=n,null!=i||(i=[]),r.valueSet=new Set(i);var o=function(e,n){new uN(t,e,(function(e,t){return n(e,!0)}),(function(e){return"text"!==e.type||!r.valueSet.has(e.text)}))},a=function(e){return e&&e.startsWith("[[")&&e.endsWith("]]")},s=r.multiselect=new oB(n).setOptionRenderer((function(e,n){var i=n.el,o=n.pillEl;if(a(e)){var s=e.slice(2,-2),l=Yw(s),c=l.title,u=l.href;i.createSpan({text:c}),o.addClass("internal-link"),o.toggleClass("is-unresolved",!t.app.metadataCache.getFirstLinkpathDest(Fx(u),t.sourcePath)),i.onClickEvent((function(e){0!==e.button&&1!==e.button||t.app.workspace.openLinkText(u,t.sourcePath,hw.isModEvent(e))})),t.app.dragManager.handleDrag(o,(function(e){return t.app.dragManager.dragLink(e,s,t.sourcePath)})),i.addEventListener("mouseover",(function(e){t.app.workspace.trigger("hover-link",{event:e,source:"properties",hoverParent:r,targetEl:i,linktext:u})}))}else if(i.setText(e),St(e)||Dt(e)){var h=Dt(e)?"mailto:"+e:e;i.addClass("external-link"),i.onClickEvent((function(e){0!==e.button&&1!==e.button||window.open(h,"_blank")}))}})).setOptionContextmenuHandler((function(e,n){if(e.addSections(["title","correction","spellcheck","open","edit","action","view","info","","danger"]),a(n)){var i=Yw(n.slice(2,-2)).href;r.ctx.app.workspace.handleLinkContextMenu(e,i,t.sourcePath)}else St(n)&&r.ctx.app.workspace.handleExternalLinkContextMenu(e,n)})).setValues(i).allowCreatingOptions((function(e){return e})).preventDuplicates((function(e,t){return t.indexOf(e)})).setupInputEl(o).onChange((function(e){r.valueSet=new Set(e),t.onChange(e.slice())}));return t.app.dragManager.handleDrop(n,(function(e,i,r){if(i){if(!r){var o=kM(t.app,i,t.sourcePath);if(o.length>0){e.preventDefault();for(var a=0,l=o;a<l.length;a++){var c=l[a];s.addElement(c)}}}return{hoverClass:"is-being-dragged-over",hoverEl:n,dropEffect:"copy"}}})),s.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),t.blur())})),o(s.inputEl,(function(e){r.multiselect.addElement(e),r.multiselect.setInputText("")})),r}return f(t,e),t.prototype.onFocus=function(){Lt.isMobileApp?this.multiselect.inputEl.focus():bb(this.multiselect.inputEl)},t}(QB),nN=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.hoverPopover=null,null!=i||(i=[]),r.ctx=t,r.containerEl=n;var o=new Set(i),a=r.multiselect=new oB(n).setOptionRenderer((function(e,n){var i=n.el,r=n.pillEl;e.startsWith("#")&&(e=e.slice(1)),i.createEl("span",{text:e}),yF("#"+e)||r.addClass("is-invalid"),i.addEventListener("click",(function(){var n=t.app.internalPlugins.getEnabledPluginById("global-search");n&&n.openGlobalSearch("tag:"+e)}))})).preventDuplicates((function(e,t){var n=function(e){return e.startsWith("#")?e.slice(1):e};return t.map(n).indexOf(n(e))})).allowCreatingOptions((function(e){var t=e;if(t.trim())return t.startsWith("#")||(t="#"+t),yF(t)?(rS(),e):(iS(a.inputEl,rf.properties.msgInvalidTag(),{classes:["mod-error"]}),null)})).setValues(i).onChange((function(e){r.ctx.onChange(e.slice()),o=new Set(e)}));return new fN(t.app,a.inputEl,(function(e){return!o.has(e.tag)})).onSelect((function(e){a.addElement(e.tag),a.setInputText("")})),a.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),r.ctx.blur())})),r}return f(t,e),t.prototype.onFocus=function(){Lt.isMobile?this.multiselect.inputEl.focus():bb(this.multiselect.inputEl)},t}(QB),iN=function(e){function t(t,n,i){var r=e.call(this,n)||this;return r.hoverPopover=null,null!=i||(i=[]),r.ctx=t,r.containerEl=n,(r.multiselect=new oB(n).setOptionRenderer((function(e,t){return t.el.setText(e)})).preventDuplicates((function(e,t){return t.indexOf(e)})).allowCreatingOptions((function(e){return e.trim()})).setValues(i).onChange((function(e){return t.onChange(e.slice())}))).inputEl.addEventListener("keydown",(function(e){e.isComposing||"Escape"===e.key&&(e.preventDefault(),t.blur())})),r}return f(t,e),t.prototype.onFocus=function(){Lt.isMobile?this.multiselect.inputEl.focus():bb(this.multiselect.inputEl)},t}(QB),rN={name:rf.properties.types.optionAliases,type:"aliases",icon:"lucide-forward",default:function(){return[]},reservedKeys:["aliases"],validate:function(e){return it(e,!0)},render:function(e,t,n){return t.value=GB(t.value),new iN(n,e,t.value)}},oN={name:rf.properties.types.optionTags,type:"tags",icon:"lucide-tags",default:function(){return[]},reservedKeys:["tags"],validate:function(e){return it(e,!0)},render:function(e,t,n){return t.value=GB(t.value),new nN(n,e,t.value)}},aN={name:rf.properties.types.optionDate,type:"date",icon:"lucide-calendar",default:function(){return""},validate:function(e){return window.moment(e,_B).isValid()},render:function(e,t,n){var i,r=function(e){var t=window.moment(e,_B);return t.isValid()?t.format("YYYY-MM-DD"):""},o=r(t.value),a=e.createEl("input",{cls:"metadata-input metadata-input-text mod-date",type:"date",placeholder:rf.properties.labelNoValue(),value:o,attr:{max:"9999-12-31"}}),s=n.app.internalPlugins.getEnabledPluginById("daily-notes");return s&&(i=e.createDiv("clickable-icon",(function(e){gb(e,"lucide-link"),aS(e,"Open"),e.onClickEvent((function(e){return v(void 0,void 0,void 0,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=window.moment(t.value),[4,s.getDailyNote(i)];case 1:return r=o.sent(),n.app.workspace.getLeaf(hw.isModEvent(e)).openFile(r),[2]}}))}))})),e.toggle(!!o)}))),a.addEventListener("change",(function(e){var t=a.value;n.onChange(t),i&&i.toggle(!!r(t))})),a.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),null}},sN={name:rf.properties.types.optionDatetime,type:"datetime",icon:"lucide-clock",default:function(){return""},validate:function(e){return window.moment(e,jB).isValid()},render:function(e,t,n){var i=function(e){var t=window.moment(e,jB);return t.isValid()?t.format("YYYY-MM-DD[T]HH:mm:ss"):""},r=e.createEl("input",{cls:"metadata-input metadata-input-text",type:"datetime-local",placeholder:rf.properties.labelNoValue(),value:i(t.value),attr:{max:"9999-12-31T23:59"}});return r.addEventListener("change",(function(e){n.onChange(i(r.value))})),r.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),null}},lN={name:rf.properties.types.optionNumber,type:"number",icon:"lucide-binary",default:function(){return 0},validate:function(e){return Number.isNumber(e)},render:function(e,t,n){var i=e.createEl("input",{cls:"metadata-input metadata-input-number",type:"number",placeholder:rf.properties.labelNoValue(),value:Number.isNaN(t.value)?"":""+t.value});function r(e){var t=null;e&&(t=+i.value,Number.isNaN(t))?iS(i,rf.properties.msgInvalidNumber(),{classes:["mod-error"]}):n.onChange(t)}return i.addEventListener("keydown",(function(e){e.isComposing||("Enter"===e.key?(e.preventDefault(),r(i.value),n.blur()):"Escape"===e.key&&(e.preventDefault(),i.value=t.value?String(t.value):"",n.blur()))})),i.addEventListener("blur",(function(e){e.defaultPrevented||r(i.value)})),null}},cN={name:rf.properties.types.optionCheckbox,type:"checkbox",icon:"lucide-check-square",default:function(){return!1},validate:function(e){return"boolean"==typeof e},render:function(e,t,n){var i=e.createEl("input",{type:"checkbox",cls:"metadata-input-checkbox"});return i.checked=t.value,i.setAttr("data-indeterminate",null==t.value),i.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),n.blur())})),i.addEventListener("change",(function(e){n.onChange(i.checked),i.setAttr("data-indeterminate",!1)})),null}},uN=function(e){function t(t,n,i,r){var o=e.call(this,t.app,n)||this;return o.context=t,o.inputEl=n,o.onSelectLink=i,o.suggestionFilter=r,o.sourcePath=t.sourcePath,o.manager=new xB(t.app,(function(){return t.sourcePath})),o.linkSuggestionsEl=cB([{command:rf.editor.linkSuggestion.labelTypeHash(),purpose:rf.editor.linkSuggestion.labelLinkHeading()},{command:rf.editor.linkSuggestion.labelTypeBlock(),purpose:rf.editor.linkSuggestion.labelLinkBlock()},{command:rf.editor.linkSuggestion.labelTypePipe(),purpose:rf.editor.linkSuggestion.labelChangeDisplayText()}]),o.defaultSuggestionsEl=cB([{command:rf.properties.valueSuggestion.keyLinkNote(),purpose:rf.properties.valueSuggestion.instructionLinkNote()},{command:"esc",purpose:rf.properties.valueSuggestion.instructionDismiss()}]),o.scope.register(["Shift"],"Enter",(function(e){return o.suggestions.useSelectedItem(e),!1})),o.scope.register([],"Tab",(function(e){if(!e.isComposing&&o.suggestions.useSelectedItem(e))return!1})),o.scope.register(null,"#",(function(e){if(("file"===o.manager.mode||"heading"===o.manager.mode)&&o.suggestions.useSelectedItem(e))return!1})),o.scope.register(null,"^",(function(e){if("file"===o.manager.mode&&o.suggestions.useSelectedItem(e))return!1})),o}return f(t,e),t.prototype.showSuggestions=function(t){if(e.prototype.showSuggestions.call(this,t),this.context){var n=this.inputEl.getText();("[["===n||n.startsWith("[[^")||n.startsWith("#"))&&this.suggestions.forceSetSelectedItem(-1,null),n.startsWith("[[")?(this.defaultSuggestionsEl.detach(),this.suggestEl.appendChild(this.linkSuggestionsEl)):(this.linkSuggestionsEl.detach(),this.suggestEl.appendChild(this.defaultSuggestionsEl))}},t.prototype.selectSuggestion=function(e,t){var n,i=!0,r=null;if("text"===e.type)n=e.text;else{var o=t.instanceOf(KeyboardEvent)?aw(t):"";i=!o||"Enter"===o;var a=this.inputEl.getText(),s=this.inputEl.win.getSelection().getRangeAt(0),l=a.substring(2,s.startOffset),c=EB(this.app,e,l,a,0,s.startOffset,this.sourcePath,o,"frontmatter");if("block"===e.type&&c.blockId){var u=fF(e,c.blockId),h=u.blockEnd,p=u.addition,d=e.content,f=e.file;d=d.slice(0,h)+p+d.slice(h),this.app.vault.modify(f,d)}n=c.replacement,r={from:c.selectionStart,to:c.selectionEnd}}i?(this.close(),this.onSelectLink(n,t)):(this.inputEl.textContent=n,function(e,t){var n;e.focus();var i=e.win,r=Lb(e,t.from,null!==(n=t.to)&&void 0!==n?n:t.from),o=i.getSelection();o&&(o.removeAllRanges(),o.addRange(r))}(this.inputEl,r),this.inputEl.trigger("input"))},t.prototype.renderSuggestion=function(e,t){if("text"===e.type)if(e.text.startsWith("[[")&&e.text.endsWith("]]")){t.addClass("mod-complex");var n=t.createDiv("suggestion-content"),i=t.createDiv("suggestion-aux"),r=n.createDiv("suggestion-title"),o=n.createDiv("suggestion-note"),a=Yw(e.text.slice(2,-2)),s=a.title,l=a.href,c=a.isAlias;c&&o.setText(l),i.createSpan({cls:"suggestion-flair"},(function(e){c?(gb(e,"lucide-forward"),aS(e,rf.interface.tooltip.alias())):gb(e,"lucide-link")})),tL(e.matches,-2),rL(r,s,e)}else rL(t,e.text,e);else CB(e,t,this.manager.global)},t.prototype.getSuggestions=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.startsWith("[[")?((n=this.manager.runnable)&&n.cancel(),n=this.manager.runnable=new zD,i=void 0,(r=this.inputEl.win.getSelection())&&r.rangeCount>0&&(i=r.getRangeAt(0).startOffset),e=e.slice(2,i),[4,this.manager.getSuggestionsAsync(n,e)]):[3,2];case 1:return!(t=o.sent())||n.isCancelled()?[2,[]]:(0===t.length&&(t=[yB]),t.sort(vB),[3,3]);case 2:t=function(e,t,n){n=n.toLowerCase();for(var i=[],r=[n],o=e.metadataCache.getFrontmatterPropertyValuesForKey(t),a=0,s=Array.from(o);a<s.length;a++){var l=s[a];if(""===n)i.push({type:"text",text:l,score:0,matches:null});else{var c=nL(r,l.toLowerCase());c&&i.push({type:"text",text:l,score:ZA(c,n.length,l.length,0),matches:c})}}return i.sort((function(e,t){return t.score-e.score})),i}(this.app,this.context.key,e),o.label=3;case 3:return this.suggestionFilter?[2,t.filter(this.suggestionFilter)]:[2,t]}}))}))},t}(lB);var hN=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.app=t,r.inputEl=n,r.properties=i,r.scope.register(["Shift"],"Enter",(function(e){return r.selectSuggestion({type:"text",text:r.getValue(),propertyType:"text",score:0,matches:null},e),!1})),r}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createDiv("suggestion-icon");rL(t.createDiv("suggestion-content").createDiv("suggestion-title"),e.text,e);var i=e.propertyType,r=null,o=this.app.metadataTypeManager.registeredTypeWidgets;o.hasOwnProperty(i)&&(r=o[i]),n.createSpan({cls:"suggestion-flair"},(function(e){var t;gb(e,null!==(t=null==r?void 0:r.icon)&&void 0!==t?t:"lucide-file-question")}))},t.prototype.getSuggestions=function(e){var t=new Set(this.properties.map((function(e){return e.key.toLowerCase()}))),n=this.app.metadataTypeManager.getAllProperties();return function(e,t){t=t.toLowerCase();for(var n=[],i=[t],r=0,o=e;r<o.length;r++){var a=o[r],s=a[0],l=a[1];if(""===t)n.push({type:"text",text:s,propertyType:l,score:0,matches:null});else{var c=nL(i,s.toLowerCase());c&&n.push({type:"text",text:s,propertyType:l,score:ZA(c,t.length,s.length,0),matches:c})}}return n.sort((function(e,t){return t.score-e.score})),n}(Object.entries(n).filter((function(e){var n=e[0];e[1];return!t.has(n)})).map((function(e){e[0];var t,n=e[1];return[n.name,null!==(t=n.type)&&void 0!==t?t:"text"]})),e)},t}(lB);var pN={name:rf.properties.types.optionMultitext,type:"multitext",icon:"lucide-list",default:function(){return[]},validate:function(e){return"string"==typeof e||it(e,!0)},render:function(e,t,n){return t.value=GB(t.value),new tN(n,e,t.value)}},dN={name:rf.properties.types.optionUnknown,type:"unknown",icon:"lucide-file-question",default:function(){},validate:function(e){return!0},render:function(e,t,n){return e.createSpan({cls:"metadata-property-value-item mod-unknown",text:JSON.stringify(t.value)}),null}},fN=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.suggestionFilter=i,r}return f(t,e),t.prototype.getSuggestions=function(e){return dB(this.app.metadataCache,e,e.startsWith("#")).filter(this.suggestionFilter)},t.prototype.renderSuggestion=function(e,t){oL(t,e.tag,e.matches)},t}(lB),gN=function(e){function t(t,n){var i=e.call(this,t)||this;return i.line=n,i.setTitle("Change property type"),i.contentEl.createEl("p",{text:rf.properties.labelMigrationWarningDesc()}),i.addButton("mod-cta",rf.dialogue.buttonSave(),(function(e){i.onSubmit(e)})),i.addCancelButton(),i.scope.register([],"Enter",i.onSubmit.bind(i)),i}return f(t,e),t.prototype.onSubmit=function(e){e.preventDefault(),this.close(),this.shouldRestoreSelection=!1,this.line.renderProperty(this.line.entry,!0,!0),this.line.focusValue()},t}(PI);function mN(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function vN(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function yN(e,t){if(!t.anchorNode)return!1;try{return vN(e,t.anchorNode)}catch(e){return!1}}function bN(e){return 3==e.nodeType?PN(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function wN(e,t,n,i){return!!n&&(CN(e,t,n,i,-1)||CN(e,t,n,i,1))}function kN(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function CN(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:EN(e))){if("DIV"==e.nodeName)return!1;var o=e.parentNode;if(!o||1!=o.nodeType)return!1;t=kN(e)+(r<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?EN(e):0}}}function EN(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var xN={left:0,right:0,top:0,bottom:0};function SN(e,t){var n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function MN(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}var TN,DN=function(){function e(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return e.prototype.eq=function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset},e.prototype.setRange=function(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)},e.prototype.set=function(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i},e}(),AN=null;function LN(e){if(e.setActive)return e.setActive();if(AN)return e.focus(AN);for(var t=[],n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==AN?{get preventScroll(){return AN={preventScroll:!0},!0}}:void 0),!AN){AN=!1;for(var i=0;i<t.length;){var r=t[i++],o=t[i++],a=t[i++];r.scrollTop!=o&&(r.scrollTop=o),r.scrollLeft!=a&&(r.scrollLeft=a)}}}function PN(e,t,n){void 0===n&&(n=t);var i=TN||(TN=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function IN(e,t,n){var i={key:t,code:t,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,e.dispatchEvent(r);var o=new KeyboardEvent("keyup",i);return o.synthetic=!0,e.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function ON(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}var FN=function(){function e(e,t,n){void 0===n&&(n=!0),this.node=e,this.offset=t,this.precise=n}return e.before=function(t,n){return new e(t.parentNode,kN(t),n)},e.after=function(t,n){return new e(t.parentNode,kN(t)+1,n)},e}(),BN=[],NN=function(){function e(){this.parent=null,this.dom=null,this.dirty=2}return Object.defineProperty(e.prototype,"editorView",{get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtStart",{get:function(){return this.parent?this.parent.posBefore(this):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posAtEnd",{get:function(){return this.posAtStart+this.length},enumerable:!1,configurable:!0}),e.prototype.posBefore=function(e){for(var t=this.posAtStart,n=0,i=this.children;n<i.length;n++){var r=i[n];if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")},e.prototype.posAfter=function(e){return this.posBefore(e)+e.length},e.prototype.coordsAt=function(e,t){return null},e.prototype.sync=function(t){if(2&this.dirty){for(var n=this.dom,i=null,r=void 0,o=0,a=this.children;o<a.length;o++){if((u=a[o]).dirty){if(!u.dom&&(r=i?i.nextSibling:n.firstChild)){var s=e.get(r);(!s||!s.parent&&s.canReuseDOM(u))&&u.reuseDOM(r)}u.sync(t),u.dirty=0}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=u.dom&&(t.written=!0),u.dom.parentNode==n)for(;r&&r!=u.dom;)r=RN(r);else n.insertBefore(u.dom,r);i=u.dom}for((r=i?i.nextSibling:n.firstChild)&&t&&t.node==n&&(t.written=!0);r;)r=RN(r)}else if(1&this.dirty)for(var l=0,c=this.children;l<c.length;l++){var u;(u=c[l]).dirty&&(u.sync(t),u.dirty=0)}},e.prototype.reuseDOM=function(e){},e.prototype.localPosFromDOM=function(t,n){var i;if(t==this.dom)i=this.dom.childNodes[n];else{for(var r=0==EN(t)?0:0==n?-1:1;;){var o=t.parentNode;if(o==this.dom)break;0==r&&o.firstChild!=o.lastChild&&(r=t==o.firstChild?-1:1),t=o}i=r<0?t:t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!e.get(i);)i=i.nextSibling;if(!i)return this.length;for(var a=0,s=0;;a++){var l=this.children[a];if(l.dom==i)return s;s+=l.length+l.breakAfter}},e.prototype.domBoundsAround=function(e,t,n){void 0===n&&(n=0);for(var i=-1,r=-1,o=-1,a=-1,s=0,l=n,c=n;s<this.children.length;s++){var u=this.children[s],h=l+u.length;if(l<e&&h>t)return u.domBoundsAround(e,t,l);if(h>=e&&-1==i&&(i=s,r=l),l>t&&u.dom.parentNode==this.dom){o=s,a=c;break}c=h,l=h+u.breakAfter}return{from:r,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}},e.prototype.markDirty=function(e){void 0===e&&(e=!1),this.dirty|=2,this.markParentsDirty(e)},e.prototype.markParentsDirty=function(e){for(var t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}},e.prototype.setParent=function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))},e.prototype.setDOM=function(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this},Object.defineProperty(e.prototype,"rootView",{get:function(){for(var e=this;;){var t=e.parent;if(!t)return e;e=t}},enumerable:!1,configurable:!0}),e.prototype.replaceChildren=function(e,t,n){var i;void 0===n&&(n=BN),this.markDirty();for(var r=e;r<t;r++){var o=this.children[r];o.parent==this&&o.destroy()}(i=this.children).splice.apply(i,w([e,t-e],n,!1));for(r=0;r<n.length;r++)n[r].setParent(this)},e.prototype.ignoreMutation=function(e){return!1},e.prototype.ignoreEvent=function(e){return!1},e.prototype.childCursor=function(e){return void 0===e&&(e=this.length),new HN(this.children,e,this.children.length)},e.prototype.childPos=function(e,t){return void 0===t&&(t=1),this.childCursor().findPos(e,t)},e.prototype.toString=function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")},e.get=function(e){return e.cmView},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.merge=function(e,t,n,i,r,o){return!1},e.prototype.become=function(e){return!1},e.prototype.canReuseDOM=function(e){return e.constructor==this.constructor},e.prototype.getSide=function(){return 0},e.prototype.destroy=function(){this.parent=null},e}();function RN(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}NN.prototype.breakAfter=0;var HN=function(){function e(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}return e.prototype.findPos=function(e,t){for(void 0===t&&(t=1);;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}},e}();function VN(e,t,n,i,r,o,a,s,l){var c=e.children,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,p=h?h.breakAfter:a;if(!(t==i&&u&&!a&&!p&&o.length<2&&u.merge(n,r,o.length?h:null,0==n,s,l))){if(i<c.length){var d=c[i];d&&r<d.length?(t==i&&(d=d.split(r),r=0),!p&&h&&d.merge(0,r,h,!0,0,l)?o[o.length-1]=d:(r&&d.merge(0,r,null,!1,0,l),o.push(d))):(null==d?void 0:d.breakAfter)&&(h?h.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,n>0&&(!a&&o.length&&u.merge(n,u.length,o[0],!1,s,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,s,0),t++));t<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:s;else{if(!c[t].become(o[0]))break;t++,o.shift(),s=o.length?0:l}!o.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,s,l)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function zN(e,t,n,i,r,o){for(var a=e.childCursor(),s=a.findPos(n,1),l=s.i,c=s.off,u=a.findPos(t,-1),h=u.i,p=u.off,d=t-n,f=0,g=i;f<g.length;f++){d+=g[f].length}e.length+=d,VN(e,h,p,l,c,i,0,r,o)}var qN="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},UN="undefined"!=typeof document?document:{documentElement:{style:{}}},WN=/Edge\/(\d+)/.exec(qN.userAgent),_N=/MSIE \d/.test(qN.userAgent),jN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qN.userAgent),GN=!!(_N||jN||WN),KN=!GN&&/gecko\/(\d+)/i.test(qN.userAgent),YN=!GN&&/Chrome\/(\d+)/.exec(qN.userAgent),XN="webkitFontSmoothing"in UN.documentElement.style,$N=!GN&&/Apple Computer/.test(qN.vendor),ZN=$N&&(/Mobile\/\w+/.test(qN.userAgent)||qN.maxTouchPoints>2),QN={mac:ZN||/Mac/.test(qN.platform),windows:/Win/.test(qN.platform),linux:/Linux|X11/.test(qN.platform),ie:GN,ie_version:_N?UN.documentMode||6:jN?+jN[1]:WN?+WN[1]:0,gecko:KN,gecko_version:KN?+(/Firefox\/(\d+)/.exec(qN.userAgent)||[0,0])[1]:0,chrome:!!YN,chrome_version:YN?+YN[1]:0,ios:ZN,android:/Android\b/.test(qN.userAgent),webkit:XN,safari:$N,webkit_version:XN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=UN.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},JN=function(e){function t(t){var n=e.call(this)||this;return n.text=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),t.prototype.createDOM=function(e){this.setDOM(e||document.createTextNode(this.text))},t.prototype.sync=function(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)},t.prototype.reuseDOM=function(e){3==e.nodeType&&this.createDOM(e)},t.prototype.merge=function(e,n,i){return(!i||i instanceof t&&!(this.length-(n-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)},t.prototype.split=function(e){var n=new t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n},t.prototype.localPosFromDOM=function(e,t){return e==this.dom?t:t?this.text.length:0},t.prototype.domAtPos=function(e){return new FN(this.dom,e)},t.prototype.domBoundsAround=function(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}},t.prototype.coordsAt=function(e,t){return tR(this.dom,e,t)},t}(NN),eR=function(e){function t(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=0);var r=e.call(this)||this;r.mark=t,r.children=n,r.length=i;for(var o=0,a=n;o<a.length;o++){a[o].setParent(r)}return r}return f(t,e),t.prototype.setAttrs=function(e){if(ON(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(var t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e},t.prototype.reuseDOM=function(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)},t.prototype.sync=function(t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),e.prototype.sync.call(this,t)},t.prototype.merge=function(e,n,i,r,o,a){return(!i||!(!(i instanceof t&&i.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0))&&(zN(this,e,n,i?i.children:[],o-1,a-1),this.markDirty(),!0)},t.prototype.split=function(e){for(var n=[],i=0,r=-1,o=0,a=0,s=this.children;a<s.length;a++){var l=s[a],c=i+l.length;c>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=o),i=c,o++}var u=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new t(this.mark,n,u)},t.prototype.domAtPos=function(e){return sR(this,e)},t.prototype.coordsAt=function(e,t){return cR(this,e,t)},t}(NN);function tR(e,t,n){var i=e.nodeValue.length;t>i&&(t=i);var r=t,o=t,a=0;0==t&&n<0||t==i&&n>=0?QN.chrome||QN.gecko||(t?(r--,a=1):o<i&&(o++,a=-1)):n<0?r--:o<i&&o++;var s=PN(e,r,o).getClientRects();if(!s.length)return xN;var l=s[(a?a<0:n>=0)?0:s.length-1];return QN.safari&&!a&&0==l.width&&(l=Array.prototype.find.call(s,(function(e){return e.width}))||l),a?SN(l,a<0):l||null}var nR=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.side=i,r.prevWidget=null,r}return f(t,e),t.create=function(e,n,i){return new(e.customView||t)(e,n,i)},t.prototype.split=function(e){var n=t.create(this.widget,this.length-e,this.side);return this.length-=e,n},t.prototype.sync=function(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")},t.prototype.getSide=function(){return this.side},t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.become=function(e){return e.length==this.length&&e instanceof t&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){if(0==this.length)return ii.empty;for(var e=this;e.parent;)e=e.parent;var t=e.editorView,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):ii.empty},enumerable:!1,configurable:!0}),t.prototype.domAtPos=function(e){return 0==e?FN.before(this.dom):FN.after(this.dom,e==this.length)},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e,t){var n=this.dom.getClientRects(),i=null;if(!n.length)return xN;for(var r=e>0?n.length-1:0;i=n[r],!(e>0?0==r:r==n.length-1||i.top<i.bottom);r+=e>0?-1:1);return this.length?i:SN(i,this.side>0)},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t}(NN),iR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.domAtPos=function(e){var t=this.widget,n=t.topView,i=t.text;return n?rR(e,0,n,i,(function(e,t){return e.domAtPos(t)}),(function(e){return new FN(i,Math.min(e,i.nodeValue.length))})):new FN(i,Math.min(e,i.nodeValue.length))},t.prototype.sync=function(){this.setDOM(this.widget.toDOM())},t.prototype.localPosFromDOM=function(e,t){var n=this.widget,i=n.topView,r=n.text;return i?oR(e,t,i,r):Math.min(t,this.length)},t.prototype.ignoreMutation=function(){return!1},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.coordsAt=function(e,t){var n=this.widget,i=n.topView,r=n.text;return i?rR(e,t,i,r,(function(e,t,n){return e.coordsAt(t,n)}),(function(e,t){return tR(r,e,t)})):tR(r,e,t)},t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.widget.topView)||void 0===t||t.destroy()},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.canReuseDOM=function(){return!0},t}(nR);function rR(e,t,n,i,r,o){if(n instanceof eR){for(var a=n.dom.firstChild;a;a=a.nextSibling){var s=NN.get(a);if(!s)return o(e,t);var l=vN(a,i),c=s.length+(l?i.nodeValue.length:0);if(e<c||e==c&&s.getSide()<=0)return l?rR(e,t,s,i,r,o):r(s,e,t);e-=c}return r(n,n.length,-1)}return n.dom==i?o(e,t):r(n,e,t)}function oR(e,t,n,i){if(n instanceof eR)for(var r=0,o=n.children;r<o.length;r++){var a=o[r],s=0,l=vN(a.dom,i);if(vN(a.dom,e))return s+(l?oR(e,t,a,i):a.localPosFromDOM(e,t));s+=l?i.nodeValue.length:a.length}else if(n.dom==i)return Math.min(t,i.nodeValue.length);return n.localPosFromDOM(e,t)}var aR=function(e){function t(t){var n=e.call(this)||this;return n.side=t,n}return f(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.merge=function(){return!1},t.prototype.become=function(e){return e instanceof t&&e.side==this.side},t.prototype.split=function(){return new t(this.side)},t.prototype.sync=function(){if(!this.dom){var e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}},t.prototype.getSide=function(){return this.side},t.prototype.domAtPos=function(e){return FN.before(this.dom)},t.prototype.localPosFromDOM=function(){return 0},t.prototype.domBoundsAround=function(){return null},t.prototype.coordsAt=function(e){var t=this.dom.getBoundingClientRect(),n=function(e,t){var n=e.parent,i=n?n.children.indexOf(e):-1;for(;n&&i>=0;)if(t<0?i>0:i<n.children.length){var r=n.children[i+t];if(r instanceof JN){var o=r.coordsAt(t<0?r.length:0,t);if(o)return o}i+=t}else{if(!(n instanceof eR&&n.parent)){var a=n.dom.lastChild;if(a&&"BR"==a.nodeName)return a.getClientRects()[0];break}i=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return ii.empty},enumerable:!1,configurable:!0}),t}(NN);function sR(e,t){for(var n=e.dom,i=e.children,r=0,o=0;r<i.length;r++){var a=i[r],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(t>o&&t<s&&a.dom.parentNode==n)return a.domAtPos(t-o);if(t<=o)break;o=s}}for(var l=r;l>0;l--){var c=i[l-1];if(c.dom.parentNode==n)return c.domAtPos(c.length)}for(l=r;l<i.length;l++){var u=i[l];if(u.dom.parentNode==n)return u.domAtPos(0)}return new FN(n,0)}function lR(e,t,n){var i,r=e.children;n>0&&t instanceof eR&&r.length&&(i=r[r.length-1])instanceof eR&&i.mark.eq(t.mark)?lR(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function cR(e,t,n){var i=null,r=-1,o=null,a=-1;!function e(t,n){for(var s=0,l=0;s<t.children.length&&l<=n;s++){var c=t.children[s],u=l+c.length;u>=n&&(c.children.length?e(c,n-l):!o&&(u>n||l==u&&c.getSide()>0)?(o=c,a=n-l):(l<n||l==u&&c.getSide()<0)&&(i=c,r=n-l)),l=u}}(e,t);var s=(n<0?i:o)||i||o;return s?s.coordsAt(Math.max(0,s==i?r:a),n):function(e){var t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();var n=bN(t);return n[n.length-1]||null}(e)}function uR(e,t){for(var n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function hR(e,t){if(e==t)return!0;if(!e||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(var r=0,o=n;r<o.length;r++){var a=o[r];if(-1==i.indexOf(a)||e[a]!==t[a])return!1}return!0}function pR(e,t,n){var i=null;if(t)for(var r in t)n&&r in n||e.removeAttribute(i=r);if(n)for(var r in n)t&&t[r]==n[r]||e.setAttribute(i=r,n[r]);return!!i}JN.prototype.children=nR.prototype.children=aR.prototype.children=BN;var dR=function(){function e(){}return e.prototype.eq=function(e){return!1},e.prototype.updateDOM=function(e){return!1},e.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return-1},enumerable:!1,configurable:!0}),e.prototype.ignoreEvent=function(e){return!0},Object.defineProperty(e.prototype,"customView",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){},e}(),fR=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(fR||(fR={})),gR=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.startSide=t,o.endSide=n,o.widget=i,o.spec=r,o}return f(t,e),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return!1},enumerable:!1,configurable:!0}),t.mark=function(e){return new mR(e)},t.widget=function(e){var t=e.side||0,n=!!e.block;return new yR(e,t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,t,n,e.widget||null,!1)},t.replace=function(e){var t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{var r=bR(e,i);t=(r.start?i?-3e8:-1:5e8)-1,n=1+(r.end?i?2e8:1:-6e8)}return new yR(e,t,n,i,e.widget||null,!0)},t.line=function(e){return new vR(e)},t.set=function(e,t){return void 0===t&&(t=!1),Pr.of(e,t)},t.prototype.hasHeight=function(){return!!this.widget&&this.widget.estimatedHeight>-1},t}(Tr);gR.none=Pr.empty;var mR=function(e){function t(t){var n=this,i=bR(t),r=i.start,o=i.end;return(n=e.call(this,r?-1:5e8,o?1:-6e8,null,t)||this).tagName=t.tagName||"span",n.class=t.class||"",n.attrs=t.attributes||null,n}return f(t,e),t.prototype.eq=function(e){return this==e||e instanceof t&&this.tagName==e.tagName&&this.class==e.class&&hR(this.attrs,e.attrs)},t.prototype.range=function(t,n){if(void 0===n&&(n=t),t>=n)throw new RangeError("Mark decorations may not be empty");return e.prototype.range.call(this,t,n)},t}(gR);mR.prototype.point=!1;var vR=function(e){function t(t){return e.call(this,-2e8,-2e8,null,t)||this}return f(t,e),t.prototype.eq=function(e){return e instanceof t&&hR(this.spec.attributes,e.spec.attributes)},t.prototype.range=function(t,n){if(void 0===n&&(n=t),n!=t)throw new RangeError("Line decoration ranges must be zero-length");return e.prototype.range.call(this,t,n)},t}(gR);vR.prototype.mapMode=Si.TrackBefore,vR.prototype.point=!0;var yR=function(e){function t(t,n,i,r,o,a){var s=e.call(this,n,i,o,t)||this;return s.block=r,s.isReplace=a,s.mapMode=r?n<=0?Si.TrackBefore:Si.TrackAfter:Si.TrackDel,s}return f(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.startSide<this.endSide?fR.WidgetRange:this.startSide<=0?fR.WidgetBefore:fR.WidgetAfter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightRelevant",{get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5},enumerable:!1,configurable:!0}),t.prototype.eq=function(e){return e instanceof t&&(n=this.widget,i=e.widget,n==i||!!(n&&i&&n.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var n,i},t.prototype.range=function(t,n){if(void 0===n&&(n=t),this.isReplace&&(t>n||t==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return e.prototype.range.call(this,t,n)},t}(gR);function bR(e,t){void 0===t&&(t=!1);var n=e.inclusiveStart,i=e.inclusiveEnd;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!=n?n:t,end:null!=i?i:t}}function wR(e,t,n,i){void 0===i&&(i=0);var r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}yR.prototype.point=!0;var kR=function(e){function t(){var t=e.apply(this,arguments)||this;return t.children=[],t.length=0,t.prevAttrs=void 0,t.attrs=null,t.breakAfter=0,t}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){if(i){if(!(i instanceof t))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),zN(this,e,n,i?i.children:[],o,a),!0},t.prototype.split=function(e){var n=new t;if(n.breakAfter=this.breakAfter,0==this.length)return n;var i=this.childPos(e),r=i.i,o=i.off;o&&(n.append(this.children[r].split(o),0),this.children[r].merge(o,this.children[r].length,null,!1,0,0),r++);for(var a=r;a<this.children.length;a++)n.append(this.children[a],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n},t.prototype.transferDOM=function(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)},t.prototype.setDeco=function(e){hR(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)},t.prototype.append=function(e,t){lR(this,e,t)},t.prototype.addLineDeco=function(e){var t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=uR(t,this.attrs||{})),n&&(this.attrs=uR({class:n},this.attrs||{}))},t.prototype.domAtPos=function(e){return sR(this,e)},t.prototype.reuseDOM=function(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)},t.prototype.sync=function(t){var n;this.dom?4&this.dirty&&(ON(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(pR(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),e.prototype.sync.call(this,t);for(var i=this.dom.lastChild;i&&NN.get(i)instanceof eR;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=NN.get(i))||void 0===n?void 0:n.isEditable)||QN.ios&&this.children.some((function(e){return e instanceof JN}))))){var r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}},t.prototype.measureTextSize=function(){if(0==this.children.length||this.length>20)return null;for(var e=0,t=0,n=this.children;t<n.length;t++){var i=n[t];if(!(i instanceof JN)||/[^ -~]/.test(i.text))return null;var r=bN(i.dom);if(1!=r.length)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null},t.prototype.coordsAt=function(e,t){return cR(this,e,t)},t.prototype.become=function(e){return!1},Object.defineProperty(t.prototype,"type",{get:function(){return fR.Text},enumerable:!1,configurable:!0}),t.find=function(e,n){for(var i=0,r=0;i<e.children.length;i++){var o=e.children[i],a=r+o.length;if(a>=n){if(o instanceof t)return o;if(a>n)break}r=a+o.breakAfter}return null},t}(NN),CR=function(e){function t(t,n,i){var r=e.call(this)||this;return r.widget=t,r.length=n,r.type=i,r.breakAfter=0,r.prevWidget=null,r}return f(t,e),t.prototype.merge=function(e,n,i,r,o,a){return!(i&&(!(i instanceof t&&this.widget.compare(i.widget))||e>0&&o<=0||n<this.length&&a<=0))&&(this.length=e+(i?i.length:0)+(this.length-n),!0)},t.prototype.domAtPos=function(e){return 0==e?FN.before(this.dom):FN.after(this.dom,e==this.length)},t.prototype.split=function(e){var n=this.length-e;this.length=e;var i=new t(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i},Object.defineProperty(t.prototype,"children",{get:function(){return BN},enumerable:!1,configurable:!0}),t.prototype.sync=function(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")},Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ii.empty},enumerable:!1,configurable:!0}),t.prototype.domBoundsAround=function(){return null},t.prototype.become=function(e){return e instanceof t&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)},t.prototype.ignoreMutation=function(){return!0},t.prototype.ignoreEvent=function(e){return this.widget.ignoreEvent(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},t}(NN),ER=function(){function e(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}return e.prototype.posCovered=function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof CR&&e.type==fR.WidgetBefore)},e.prototype.getLine=function(){return this.curLine||(this.content.push(this.curLine=new kR),this.atCursorPos=!0),this.curLine},e.prototype.flushBuffer=function(e){void 0===e&&(e=this.bufferMarks),this.pendingBuffer&&(this.curLine.append(xR(new aR(-1),e),e.length),this.pendingBuffer=0)},e.prototype.addBlockWidget=function(e){this.flushBuffer(),this.curLine=null,this.content.push(e)},e.prototype.finish=function(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()},e.prototype.buildText=function(e,t,n){for(;e>0;){if(this.textOff==this.text.length){var i=this.cursor.next(this.skip),r=i.value,o=i.lineBreak,a=i.done;if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=r,this.textOff=0}var s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(xR(new JN(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}},e.prototype.span=function(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)},e.prototype.point=function(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof yR){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}var a=t-e;if(n instanceof yR)if(n.block){var s=n.type;s!=fR.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new CR(n.widget||new SR("div"),a,s))}else{var l=nR.create(n.widget||new SR("span"),a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&r<=i.length&&(e<t||n.startSide>0),u=!l.isEditable&&(e<t||r>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||c||(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(xR(new aR(1),i),r),r=i.length+Math.max(0,r-i.length)),h.append(xR(l,i),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)},e.build=function(t,n,i,r,o){var a=new e(t,n,i,o);return a.openEnd=Pr.spans(r,n,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a},e}();function xR(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];e=new eR(r,[e],e.length)}return e}var SR=function(e){function t(t){var n=e.call(this)||this;return n.tag=t,n}return f(t,e),t.prototype.eq=function(e){return e.tag==this.tag},t.prototype.toDOM=function(){return document.createElement(this.tag)},t.prototype.updateDOM=function(e){return e.nodeName.toLowerCase()==this.tag},t}(dR),MR=Hi.define(),TR=Hi.define(),DR=Hi.define(),AR=Hi.define(),LR=Hi.define(),PR=Hi.define(),IR=Hi.define({combine:function(e){return e.some((function(e){return e}))}}),OR=Hi.define({combine:function(e){return e.some((function(e){return e}))}}),FR=function(){function e(e,t,n,i,r){void 0===t&&(t="nearest"),void 0===n&&(n="nearest"),void 0===i&&(i=5),void 0===r&&(r=5),this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r}return e.prototype.map=function(t){return t.empty?this:new e(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)},e}(),BR=dr.define({map:function(e,t){return e.map(t)}});function NR(e,t,n){var i=e.facet(AR);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}var RR=Hi.define({combine:function(e){return!e.length||e[0]}}),HR=0,VR=Hi.define(),zR=function(){function e(e,t,n,i){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=i(this)}return e.define=function(t,n){var i=n||{},r=i.eventHandlers,o=i.provide,a=i.decorations;return new e(HR++,t,r,(function(e){var t=[VR.of(e)];return a&&t.push(_R.of((function(t){var n=t.plugin(e);return n?a(n):gR.none}))),o&&t.push(o(e)),t}))},e.fromClass=function(t,n){return e.define((function(e){return new t(e)}),n)},e}(),qR=function(){function e(e){this.spec=e,this.mustUpdate=null,this.value=null}return e.prototype.update=function(e){if(this.value){if(this.mustUpdate){var t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(NR(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){NR(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this},e.prototype.destroy=function(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){NR(e.state,t,"CodeMirror plugin crashed")}},e.prototype.deactivate=function(){this.spec=this.value=null},e}(),UR=Hi.define(),WR=Hi.define(),_R=Hi.define(),jR=Hi.define(),GR=Hi.define(),KR=Hi.define(),YR=function(){function e(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}return e.prototype.join=function(t){return new e(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))},e.prototype.addToSet=function(e){for(var t=e.length,n=this;t>0;t--){var i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e},e.extendWithRanges=function(t,n){if(0==n.length)return t;for(var i=[],r=0,o=0,a=0,s=0;;r++){for(var l=r==t.length?null:t[r],c=a-s,u=l?l.fromB:1e9;o<n.length&&n[o]<u;){var h=n[o],p=n[o+1],d=Math.max(s,h),f=Math.min(u,p);if(d<=f&&new e(d+c,f+c,d,f).addToSet(i),p>u)break;o+=2}if(!l)return i;new e(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),a=l.toA,s=l.toB}},e}(),XR=function(){function e(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Ti.empty(this.startState.doc.length);for(var i=0,r=n;i<r.length;i++){var o=r[i];this.changes=this.changes.compose(o.changes)}var a=[];this.changes.iterChangedRanges((function(e,t,n,i){return a.push(new YR(e,t,n,i))})),this.changedRanges=a;var s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}return e.create=function(t,n,i){return new e(t,n,i)},Object.defineProperty(e.prototype,"viewportChanged",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightChanged",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geometryChanged",{get:function(){return this.docChanged||(10&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focusChanged",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionSet",{get:function(){return this.transactions.some((function(e){return e.selection}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.flags&&0==this.transactions.length},enumerable:!1,configurable:!0}),e}(),$R=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}($R||($R={})),ZR=$R.LTR,QR=$R.RTL;function JR(e){for(var t=[],n=0;n<e.length;n++)t.push(1<<+e[n]);return t}for(var eH=JR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tH=JR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),nH=Object.create(null),iH=[],rH=0,oH=["()","[]","{}"];rH<oH.length;rH++){var aH=oH[rH],sH=aH.charCodeAt(0),lH=aH.charCodeAt(1);nH[sH]=lH,nH[lH]=-sH}function cH(e){return e<=247?eH[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?tH[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:8204==e?256:1}var uH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,hH=function(){function e(e,t,n){this.from=e,this.to=t,this.level=n}return Object.defineProperty(e.prototype,"dir",{get:function(){return this.level%2?QR:ZR},enumerable:!1,configurable:!0}),e.prototype.side=function(e,t){return this.dir==t==e?this.to:this.from},e.find=function(e,t,n,i){for(var r=-1,o=0;o<e.length;o++){var a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(r<0||(0!=i?i<0?a.from<t:a.to>t:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r},e}(),pH=[];function dH(e,t){var n=e.length,i=t==ZR?1:2,r=t==ZR?2:1;if(!e||1==i&&!uH.test(e))return fH(n);for(var o=0,a=i,s=i;o<n;o++){512==(g=cH(e.charCodeAt(o)))?g=a:8==g&&4==s&&(g=16),pH[o]=4==g?2:g,7&g&&(s=g),a=g}for(o=0,a=i,s=i;o<n;o++){if(128==(g=pH[o]))o<n-1&&a==pH[o+1]&&24&a?g=pH[o]=a:pH[o]=256;else if(64==g){for(var l=o+1;l<n&&64==pH[l];)l++;for(var c=o&&8==a||l<n&&8==pH[l]?1==s?1:8:256,u=o;u<l;u++)pH[u]=c;o=l-1}else 8==g&&1==s&&(pH[o]=1);a=g,7&g&&(s=g)}o=0;for(var h=0,p=0,d=void 0,f=void 0,g=void 0;o<n;o++)if(f=nH[d=e.charCodeAt(o)])if(f<0){for(var m=h-3;m>=0;m-=3)if(iH[m+1]==-f){var v=iH[m+2],y=2&v?i:4&v?1&v?r:i:0;y&&(pH[o]=pH[iH[m]]=y),h=m;break}}else{if(189==iH.length)break;iH[h++]=o,iH[h++]=d,iH[h++]=p}else if(2==(g=pH[o])||1==g){var b=g==i;p=b?0:1;for(m=h-3;m>=0;m-=3){var w=iH[m+2];if(2&w)break;if(b)iH[m+2]|=2;else{if(4&w)break;iH[m+2]|=4}}}for(o=0;o<n;o++)if(256==pH[o]){for(l=o+1;l<n&&256==pH[l];)l++;var k=1==(o?pH[o-1]:i);for(c=k==(1==(l<n?pH[l]:i))?k?1:2:i,u=o;u<l;u++)pH[u]=c;o=l-1}var C=[];if(1==i)for(o=0;o<n;){for(var E=o,x=1!=pH[o++];o<n&&x==(1!=pH[o]);)o++;if(x)for(u=o;u>E;){l=u;for(var S=2!=pH[--u];u>E&&S==(2!=pH[u-1]);)u--;C.push(new hH(u,l,S?2:1))}else C.push(new hH(E,o,0))}else for(o=0;o<n;){for(E=o,x=2==pH[o++];o<n&&x==(2==pH[o]);)o++;C.push(new hH(E,o,x?1:2))}return C}function fH(e){return[new hH(0,e,0)]}var gH="";function mH(e,t,n,i,r){var o,a=i.head-e.from,s=-1;if(0==a){if(!r||!e.length)return null;t[0].level!=n&&(a=t[0].side(!1,n),s=0)}else if(a==e.length){if(r)return null;var l=t[t.length-1];l.level!=n&&(a=l.side(!0,n),s=t.length-1)}s<0&&(s=hH.find(t,a,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));var c=t[s];a==c.side(r,n)&&(a=(c=t[s+=r?1:-1]).side(!r,n));var u=r==(c.dir==n),h=mi(e.text,a,u);if(gH=e.text.slice(Math.min(a,h),Math.max(a,h)),h!=c.side(r,n))return Bi.cursor(h+e.from,u?-1:1,c.level);var p=s==(r?t.length-1:0)?null:t[s+(r?1:-1)];return p||c.level==n?p&&p.level<c.level?Bi.cursor(p.side(!r,n)+e.from,r?1:-1,p.level):Bi.cursor(h+e.from,r?-1:1,c.level):Bi.cursor(r?e.to:e.from,r?-1:1,n)}var vH="￿",yH=function(){function e(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Sr.lineSeparator)}return e.prototype.append=function(e){this.text+=e},e.prototype.lineBreak=function(){this.text+=vH},e.prototype.readRange=function(e,t){if(!e)return this;for(var n=e.parentNode,i=e;;){this.findPointBefore(n,i),this.readNode(i);var r=i.nextSibling;if(r==t)break;var o=NN.get(i),a=NN.get(r);(o&&a?o.breakAfter:(o?o.breakAfter:bH(i))||bH(r)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=r}return this.findPointBefore(n,t),this},e.prototype.readTextNode=function(e){for(var t=e.nodeValue,n=0,i=this.points;n<i.length;n++){(h=i[n]).node==e&&(h.pos=this.text.length+Math.min(h.offset,t.length))}for(var r=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){var a=-1,s=1,l=void 0;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=o.exec(t))&&(a=l.index,s=l[0].length),this.append(t.slice(r,a<0?t.length:a)),a<0)break;if(this.lineBreak(),s>1)for(var c=0,u=this.points;c<u.length;c++){var h;(h=u[c]).node==e&&h.pos>this.text.length&&(h.pos-=s-1)}r=a+s}},e.prototype.readNode=function(e){if(!e.cmIgnore){var t=NN.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(var i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}},e.prototype.findPointBefore=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}},e.prototype.findPointInside=function(e,t){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}},e}();function bH(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}var wH=function(e,t){this.node=e,this.offset=t,this.pos=-1},kH=function(e){function t(t){var n=e.call(this)||this;return n.view=t,n.compositionDeco=gR.none,n.decorations=[],n.dynamicDecorationMap=[],n.minWidth=0,n.minWidthFrom=0,n.minWidthTo=0,n.impreciseAnchor=null,n.impreciseHead=null,n.forceSelection=!1,n.lastUpdate=Date.now(),n.setDOM(t.contentDOM),n.children=[new kR],n.children[0].setParent(n),n.updateDeco(),n.updateInner([new YR(0,0,0,t.state.doc.length)],0),n}return f(t,e),Object.defineProperty(t.prototype,"editorView",{get:function(){return this.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.view.state.doc.length},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t=this,n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((function(e){var n=e.fromA;return e.toA<t.minWidthFrom||n>t.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=gR.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){var n=EH(e);if(!n)return gR.none;var i=n.from,r=n.to,o=n.node,a=n.text,s=t.mapPos(i,1),l=Math.max(s,t.mapPos(r,-1)),c=e.state,u=3==o.nodeType?o.nodeValue:new yH([],c).readRange(o.firstChild,null).text;if(l-s<u.length)if(c.doc.sliceString(s,Math.min(c.doc.length,s+u.length),vH)==u)l=s+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,vH)!=u)return gR.none;s=l-u.length}else if(c.doc.sliceString(s,l,vH)!=u)return gR.none;var h=NN.get(o);h instanceof iR?h=h.widget.topView:h&&(h.parent=null);return gR.set(gR.replace({widget:new xH(o,a,h),inclusive:!0}).range(s,l))}(this.view,e.changes)),(QN.ie||QN.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);var i,r,o,a,s=this.decorations,l=this.updateDeco(),c=(i=s,r=l,o=e.changes,a=new MH,Pr.compare(i,r,o,a),a.changes);return n=YR.extendWithRanges(n,c),(0!=this.dirty||0!=n.length)&&(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)},t.prototype.updateInner=function(e,t){var n=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);var i=this.view.observer;i.ignore((function(){n.dom.style.height=n.view.viewState.contentHeight+"px",n.dom.style.flexBasis=n.minWidth?n.minWidth+"px":"";var e=QN.chrome||QN.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;n.sync(e),n.dirty=0,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(n.forceSelection=!0),n.dom.style.height=""}));var r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(var o=0,a=this.children;o<a.length;o++){var s=a[o];s instanceof CR&&s.widget instanceof CH&&r.push(s.dom)}i.updateGaps(r)},t.prototype.updateChildren=function(e,t){for(var n=this.childCursor(t),i=e.length-1;;i--){var r=i>=0?e[i]:null;if(!r)break;var o=r.fromA,a=r.toA,s=r.fromB,l=r.toB,c=ER.build(this.view.state.doc,s,l,this.decorations,this.dynamicDecorationMap),u=c.content,h=c.breakAtStart,p=c.openStart,d=c.openEnd,f=n.findPos(a,1),g=f.i,m=f.off,v=n.findPos(o,-1);VN(this,v.i,v.off,g,m,u,h,p,d)}},t.prototype.updateSelection=function(e,t){var n=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),t||this.mayControlSelection()){var i=this.forceSelection;this.forceSelection=!1;var r=this.view.state.selection.main,o=this.domAtPos(r.anchor),a=r.empty?o:this.domAtPos(r.head);if(QN.gecko&&r.empty&&function(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}(o)){var s=document.createTextNode("");this.view.observer.ignore((function(){return o.node.insertBefore(s,o.node.childNodes[o.offset]||null)})),o=a=new FN(s,0),i=!0}var l=this.view.observer.selectionRange;!i&&l.focusNode&&wN(o.node,o.offset,l.anchorNode,l.anchorOffset)&&wN(a.node,a.offset,l.focusNode,l.focusOffset)||(this.view.observer.ignore((function(){var e;QN.android&&QN.chrome&&n.dom.contains(l.focusNode)&&function(e,t){for(var n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(l.focusNode,n.dom)&&(n.dom.blur(),n.dom.focus({preventScroll:!0}));var t,i,s=mN(n.view.root);if(s)if(r.empty){if(QN.gecko){var c=(t=o.node,i=o.offset,1!=t.nodeType?0:(i&&"false"==t.childNodes[i-1].contentEditable?1:0)|(i<t.childNodes.length&&"false"==t.childNodes[i].contentEditable?2:0));if(c&&3!=c){var u=SH(o.node,o.offset,1==c?1:-1);u&&(o=new FN(u,1==c?0:u.nodeValue.length))}}s.collapse(o.node,o.offset),null!=r.bidiLevel&&null!=l.cursorBidiLevel&&(l.cursorBidiLevel=r.bidiLevel)}else if(s.extend){s.collapse(o.node,o.offset);try{s.extend(a.node,a.offset)}catch(e){}}else{var h=document.createRange();r.anchor>r.head&&(o=(e=[a,o])[0],a=e[1]),h.setEnd(a.node,a.offset),h.setStart(o.node,o.offset),s.removeAllRanges(),s.addRange(h)}else;})),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new FN(l.anchorNode,l.anchorOffset),this.impreciseHead=a.precise?null:new FN(l.focusNode,l.focusOffset)}},t.prototype.enforceCursorAssoc=function(){if(!this.compositionDeco.size){var e=this.view,t=e.state.selection.main,n=mN(e.root),i=e.observer.selectionRange,r=i.anchorNode,o=i.anchorOffset;if(n&&t.empty&&t.assoc&&n.modify){var a=kR.find(this,t.head);if(a){var s=a.posAtStart;if(t.head!=s&&t.head!=s+a.length){var l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(l&&c&&!(l.bottom>c.top)){var u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();var h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(r,o)}}}}}},t.prototype.mayControlSelection=function(){var e=this.view.root.activeElement;return e==this.dom||yN(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))},t.prototype.nearest=function(e){for(var t=e;t;){var n=NN.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null},t.prototype.posFromDOM=function(e,t){var n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart},t.prototype.domAtPos=function(e){for(var t=this.childCursor().findPos(e,-1),n=t.i,i=t.off;n<this.children.length-1;){var r=this.children[n];if(i<r.length||r instanceof kR)break;n++,i=0}return this.children[n].domAtPos(i)},t.prototype.coordsAt=function(e,t){for(var n=this.length,i=this.children.length-1;;i--){var r=this.children[i],o=n-r.breakAfter-r.length;if(e>o||e==o&&r.type!=fR.WidgetBefore&&r.type!=fR.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==fR.WidgetBefore&&t>-2))return r.coordsAt(e-o,t);n=o}},t.prototype.measureVisibleLineHeights=function(e){for(var t=[],n=e.from,i=e.to,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=this.view.textDirection==$R.LTR,l=0,c=0;c<this.children.length;c++){var u=this.children[c],h=l+u.length;if(h>i)break;if(l>=n){var p=u.dom.getBoundingClientRect();if(t.push(p.height),o){var d=u.dom.lastChild,f=d?bN(d):[];if(f.length){var g=f[f.length-1],m=s?g.right-p.left:p.right-g.left;m>a&&(a=m,this.minWidth=r,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+u.breakAfter}return t},t.prototype.textDirectionAt=function(e){var t=this.childPos(e,1).i;return"rtl"==getComputedStyle(this.children[t].dom).direction?$R.RTL:$R.LTR},t.prototype.measureTextSize=function(){for(var e=this,t=0,n=this.children;t<n.length;t++){var i=n[t];if(i instanceof kR){var r=i.measureTextSize();if(r)return r}}var o,a,s=document.createElement("div");return s.className="cm-line",s.style.width="99999px",s.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){e.dom.appendChild(s);var t=bN(s.firstChild)[0];o=s.getBoundingClientRect().height,a=t?t.width/27:7,s.remove()})),{lineHeight:o,charWidth:a}},t.prototype.childCursor=function(e){void 0===e&&(e=this.length);var t=this.children.length;return t&&(e-=this.children[--t].length),new HN(this.children,e,t)},t.prototype.computeBlockGapDeco=function(){for(var e=[],t=this.view.viewState,n=0,i=0;;i++){var r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){var a=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(gR.replace({widget:new CH(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return gR.set(e)},t.prototype.updateDeco=function(){for(var e=this,t=this.view.state.facet(_R).map((function(t,n){return(e.dynamicDecorationMap[n]="function"==typeof t)?t(e.view):t})),n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=w(w([],t,!0),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco],!1)},t.prototype.scrollIntoView=function(e){var t,n=this,i=e.range,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(r){!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});for(var o=0,a=0,s=0,l=0,c=0,u=this.view.state.facet(GR).map((function(e){return e(n.view)}));c<u.length;c++){var h=u[c];if(h){var p=h.left,d=h.right,f=h.top,g=h.bottom;null!=p&&(o=Math.max(o,p)),null!=d&&(a=Math.max(a,d)),null!=f&&(s=Math.max(s,f)),null!=g&&(l=Math.max(l,g))}}var m={left:r.left-o,top:r.top-s,right:r.right+a,bottom:r.bottom+l};!function(e,t,n,i,r,o,a,s){for(var l=e.ownerDocument,c=l.defaultView||window,u=e;u;)if(1==u.nodeType){var h=void 0,p=u==l.body;if(p)h=MN(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}var d=u.getBoundingClientRect();h={left:d.left,right:d.left+u.clientWidth,top:d.top,bottom:d.top+u.clientHeight}}var f=0,g=0;if("nearest"==r)t.top<h.top?(g=-(h.top-t.top+a),n>0&&t.bottom>h.bottom+g&&(g=t.bottom-h.bottom+g+a)):t.bottom>h.bottom&&(g=t.bottom-h.bottom+a,n<0&&t.top-g<h.top&&(g=-(h.top+g-t.top+a)));else{var m=t.bottom-t.top,v=h.bottom-h.top;g=("center"==r&&m<=v?t.top+m/2-v/2:"start"==r||"center"==r&&n<0?t.top-a:t.bottom-v+a)-h.top}if("nearest"==i?t.left<h.left?(f=-(h.left-t.left+o),n>0&&t.right>h.right+f&&(f=t.right-h.right+f+o)):t.right>h.right&&(f=t.right-h.right+o,n<0&&t.left<h.left+f&&(f=-(h.left+f-t.left+o))):f=("center"==i?t.left+(t.right-t.left)/2-(h.right-h.left)/2:"start"==i==s?t.left-o:t.right-(h.right-h.left)+o)-h.left,f||g)if(p)c.scrollBy(f,g);else{var y=0,b=0;if(g){var w=u.scrollTop;u.scrollTop+=g,b=u.scrollTop-w}f&&(w=u.scrollLeft,u.scrollLeft+=f,y=u.scrollLeft-w),t={left:t.left-y,top:t.top-b,right:t.right-y,bottom:t.bottom-b},y&&Math.abs(y-f)<1&&(i="nearest"),b&&Math.abs(b-g)<1&&(r="nearest")}if(p)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,m,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==$R.LTR)}},t}(NN);var CH=function(e){function t(t){var n=e.call(this)||this;return n.height=t,n}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("div");return this.updateDOM(e),e},t.prototype.eq=function(e){return e.height==this.height},t.prototype.updateDOM=function(e){return e.style.height=this.height+"px",!0},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),t}(dR);function EH(e){var t=e.observer.selectionRange,n=t.focusNode&&SH(t.focusNode,t.focusOffset,0);if(!n)return null;var i=e.docView.nearest(n);if(!i)return null;if(i instanceof kR){for(var r=n;r.parentNode!=i.dom;)r=r.parentNode;for(var o=r.previousSibling;o&&!NN.get(o);)o=o.previousSibling;var a=o?NN.get(o).posAtEnd:i.posAtStart;return{from:a,to:a,node:r,text:n}}for(;;){var s=i.parent;if(!s)return null;if(s instanceof kR)break;i=s}var l=i.posAtStart;return{from:l,to:l+i.length,node:i.dom,text:n}}var xH=function(e){function t(t,n,i){var r=e.call(this)||this;return r.top=t,r.text=n,r.topView=i,r}return f(t,e),t.prototype.eq=function(e){return this.top==e.top&&this.text==e.text},t.prototype.toDOM=function(){return this.top},t.prototype.ignoreEvent=function(){return!1},Object.defineProperty(t.prototype,"customView",{get:function(){return iR},enumerable:!1,configurable:!0}),t}(dR);function SH(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=EN(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}var MH=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(e,t){wR(e,t,this.changes)},e.prototype.comparePoint=function(e,t){wR(e,t,this.changes)},e}();function TH(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function DH(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function AH(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function LH(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function PH(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function IH(e,t,n){for(var i,r,o,a,s,l,c,u,h=!1,p=e.firstChild;p;p=p.nextSibling)for(var d=bN(p),f=0;f<d.length;f++){var g=d[f];r&&AH(r,g)&&(g=LH(PH(g,r.bottom),r.top));var m=TH(t,g),v=DH(n,g);if(0==m&&0==v)return 3==p.nodeType?OH(p,t,n):IH(p,t,n);(!i||a>v||a==v&&o>m)&&(i=p,r=g,o=m,a=v,h=!m||(m>0?f<d.length-1:f>0)),0==m?n>g.bottom&&(!c||c.bottom<g.bottom)?(s=p,c=g):n<g.top&&(!u||u.top>g.top)&&(l=p,u=g):c&&AH(c,g)?c=PH(c,g.bottom):u&&AH(u,g)&&(u=LH(u,g.top))}if(c&&c.bottom>=n?(i=s,r=c):u&&u.top<=n&&(i=l,r=u),!i)return{node:e,offset:0};var y=Math.max(r.left,Math.min(r.right,t));return 3==i.nodeType?OH(i,y,n):h&&"false"!=i.contentEditable?IH(i,y,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0)}}function OH(e,t,n){for(var i=e.nodeValue.length,r=-1,o=1e9,a=0,s=0;s<i;s++)for(var l=PN(e,s,s+1).getClientRects(),c=0;c<l.length;c++){var u=l[c];if(u.top!=u.bottom){a||(a=t-u.left);var h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=t&&u.right+1>=t&&h<o){var p=t>=(u.left+u.right)/2,d=p;if(QN.chrome||QN.gecko)PN(e,s).getBoundingClientRect().left==u.right&&(d=!p);if(h<=0)return{node:e,offset:s+(d?1:0)};r=s+(d?1:0),o=h}}}return{node:e,offset:r>-1?r:a>0?e.nodeValue.length:0}}function FH(e,t,n,i){var r,o,a=t.x,s=t.y;void 0===i&&(i=-1);var l,c=e.contentDOM.getBoundingClientRect(),u=c.top+e.viewState.paddingTop,h=e.viewState.docHeight,p=s-u;if(p<0)return 0;if(p>h)return e.state.doc.length;for(var d=e.defaultLineHeight/2,f=!1;(l=e.elementAtHeight(p)).type!=fR.Text;)for(;!((p=i>0?l.bottom+d:l.top-d)>=0&&p<=h);){if(f)return n?null:0;f=!0,i=-i}s=u+p;var g=l.from;if(g<e.viewport.from)return 0==e.viewport.from?0:n?null:BH(e,c,l,a,s);if(g>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:BH(e,c,l,a,s);var m=e.dom.ownerDocument,v=e.root.elementFromPoint?e.root:m,y=v.elementFromPoint(a,s);y&&!e.contentDOM.contains(y)&&(y=null),y||(a=Math.max(c.left+1,Math.min(c.right-1,a)),(y=v.elementFromPoint(a,s))&&!e.contentDOM.contains(y)&&(y=null));var b,w=-1;if(y&&0!=(null===(o=e.docView.nearest(y))||void 0===o?void 0:o.isEditable))if(m.caretPositionFromPoint){var k=m.caretPositionFromPoint(a,s);k&&(b=k.offsetNode,w=k.offset)}else if(m.caretRangeFromPoint){var C=m.caretRangeFromPoint(a,s);C&&(b=C.startContainer,w=C.startOffset,(!e.contentDOM.contains(b)||QN.safari&&function(e,t,n){var i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(var r=e.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return PN(e,i-1,i).getBoundingClientRect().left>n}(b,w,a)||QN.chrome&&function(e,t,n){if(0!=t)return!1;for(var i=e;;){var r=i.parentNode;if(!r||1!=r.nodeType||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}var o=1==e.nodeType?e.getBoundingClientRect():PN(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-o.left>5}(b,w,a))&&(b=void 0))}if(!b||!e.docView.dom.contains(b)){var E=kR.find(e.docView,g);if(!E)return p>l.top+l.height/2?l.to:l.from;b=(r=IH(E.dom,a,s)).node,w=r.offset}return e.docView.posFromDOM(b,w)}function BH(e,t,n,i,r){var o=Math.round((i-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>1.5*e.defaultLineHeight&&(o+=Math.floor((r-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);var a=e.state.sliceDoc(n.from,n.to);return n.from+_r(a,o,e.state.tabSize)}function NH(e,t,n,i){for(var r=e.state.doc.lineAt(t.head),o=e.bidiSpans(r),a=e.textDirectionAt(r.from),s=t,l=null;;){var c=mH(r,o,a,s,n),u=gH;if(!c){if(r.number==(n?e.state.doc.lines:1))return s;u="\n",r=e.state.doc.line(r.number+(n?1:-1)),o=e.bidiSpans(r),c=Bi.cursor(n?r.from:r.to)}if(l){if(!l(u))return s}else{if(!i)return c;l=i(u)}s=c}}function RH(e,t,n){for(var i=e.state.facet(jR).map((function(t){return t(e)})),r=function(){for(var e=!1,r=0,o=i;r<o.length;r++){o[r].between(n.from-1,n.from+1,(function(i,r,o){n.from>i&&n.from<r&&(n=t.head>n.from?Bi.cursor(i,1):Bi.cursor(r,-1),e=!0)}))}if(!e)return{value:n}};;){var o=r();if("object"==typeof o)return o.value}}var HH=function(){function e(e){var t=this;this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;var n=function(n){var r=_H[n];e.contentDOM.addEventListener(n,(function(i){WH(e,i)&&!t.ignoreDuringComposition(i)&&("keydown"==n&&t.keydown(e,i)||(t.mustFlushObserver(i)&&e.observer.forceFlush(),t.runCustomHandlers(n,e,i)?i.preventDefault():r(e,i)))}),jH[n]),i.registeredEvents.push(n)},i=this;for(var r in _H)n(r);QN.chrome&&102==QN.chrome_version&&e.scrollDOM.addEventListener("wheel",(function(){t.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(t.chromeScrollHack),t.chromeScrollHack=setTimeout((function(){t.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,QN.safari&&e.contentDOM.addEventListener("input",(function(){return null}))}return e.prototype.setSelectionOrigin=function(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()},e.prototype.ensureHandlers=function(e,t){var n,i,r=this;this.customHandlers=[];for(var o=0,a=t;o<a.length;o++){var s=a[o];if(i=null===(n=s.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});var l=function(t){c.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(c.registeredEvents.push(t),e.contentDOM.addEventListener(t,(function(n){WH(e,n)&&r.runCustomHandlers(t,e,n)&&n.preventDefault()})))},c=this;for(var u in i)l(u)}}},e.prototype.runCustomHandlers=function(e,t,n){for(var i=0,r=this.customHandlers;i<r.length;i++){var o=r[i],a=o.handlers[e];if(a)try{if(a.call(o.plugin,n,t)||n.defaultPrevented)return!0}catch(e){NR(t.state,e)}}return!1},e.prototype.runScrollHandlers=function(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(var n=0,i=this.customHandlers;n<i.length;n++){var r=i[n],o=r.handlers.scroll;if(o)try{o.call(r.plugin,t,e)}catch(t){NR(e.state,t)}}},e.prototype.keydown=function(e,t){var n,i=this;return this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3||(!QN.android||!QN.chrome||t.synthetic||13!=t.keyCode&&8!=t.keyCode?!(!QN.ios||t.synthetic||t.altKey||t.metaKey||!((n=VH.find((function(e){return e.keyCode==t.keyCode})))&&!t.ctrlKey||zH.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=n||t,setTimeout((function(){return i.flushIOSKey(e)}),250),!0):(e.observer.delayAndroidKey(t.key,t.keyCode),!0))},e.prototype.flushIOSKey=function(e){var t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,IN(e.contentDOM,t.key,t.keyCode))},e.prototype.ignoreDuringComposition=function(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(QN.safari&&!QN.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))},e.prototype.mustFlushObserver=function(e){return"keydown"==e.type&&229!=e.keyCode},e.prototype.startMouseSelection=function(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e},e.prototype.update=function(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)},e.prototype.destroy=function(){this.mouseSelection&&this.mouseSelection.destroy()},e}(),VH=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],zH="dthko",qH=[16,17,18,20,91,92,224,225],UH=function(){function e(e,t,n,i){this.view=e,this.style=n,this.mustSelect=i,this.lastEvent=t;var r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Sr.allowMultipleSelections)&&function(e,t){var n=e.state.facet(MR);return n.length?n[0](t):QN.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){var n=e.state.facet(TR);return n.length?n[0](t):QN.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){if(e.state.selection.main.empty)return!1;var n=mN(e.root);if(!n||0==n.rangeCount)return!0;for(var i=n.getRangeAt(0).getClientRects(),r=0;r<i.length;r++){var o=i[r];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}(e,t)||1!=iV(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}return e.prototype.move=function(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)},e.prototype.up=function(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()},e.prototype.destroy=function(){var e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null},e.prototype.select=function(e){var t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1},e.prototype.update=function(e){var t=this;e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((function(){return t.select(t.lastEvent)}),20)},e}();function WH(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target,i=void 0;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=NN.get(n))&&i.ignoreEvent(t))return!1;return!0}var _H=Object.create(null),jH=Object.create(null),GH=QN.ie&&QN.ie_version<15||QN.ios&&QN.webkit_version<604;function KH(e,t){var n,i=e.state,r=1,o=i.toText(t),a=o.lines==i.selection.ranges.length;if(null!=oV&&i.selection.ranges.every((function(e){return e.empty}))&&oV==o.toString()){var s=-1;n=i.changeByRange((function(e){var n=i.doc.lineAt(e.from);if(n.from==s)return{range:e};s=n.from;var l=i.toText((a?o.line(r++).text:t)+i.lineBreak);return{changes:{from:n.from,insert:l},range:Bi.cursor(e.from+l.length)}}))}else n=a?i.changeByRange((function(e){var t=o.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Bi.cursor(e.from+t.length)}})):i.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function YH(e,t,n,i){if(1==i)return Bi.cursor(t,n);if(2==i)return function(e,t,n){void 0===n&&(n=1);var i=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(0==r.length)return Bi.cursor(t);0==o?n=1:o==r.length&&(n=-1);var a=o,s=o;n<0?a=mi(r.text,o,!1):s=mi(r.text,o);for(var l=i(r.text.slice(a,s));a>0;){var c=mi(r.text,a,!1);if(i(r.text.slice(c,a))!=l)break;a=c}for(;s<r.length;){var u=mi(r.text,s);if(i(r.text.slice(s,u))!=l)break;s=u}return Bi.range(a+r.from,s+r.from)}(e.state,t,n);var r=kR.find(e.docView,t),o=e.state.doc.lineAt(r?r.posAtEnd:t),a=r?r.posAtStart:o.from,s=r?r.posAtEnd:o.to;return s<e.state.doc.length&&s==o.to&&s++,Bi.range(a,s)}_H.keydown=function(e,t){e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():qH.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},_H.touchstart=function(e,t){e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},_H.touchmove=function(e){e.inputState.setSelectionOrigin("select.pointer")},jH.touchstart=jH.touchmove={passive:!0},_H.mousedown=function(e,t){if(e.observer.flush(),!(e.inputState.lastTouchTime>Date.now()-2e3)){for(var n=null,i=0,r=e.state.facet(DR);i<r.length;i++){if(n=(0,r[i])(e,t))break}if(n||0!=t.button||(n=function(e,t){var n=QH(e,t),i=iV(t),r=e.state.selection,o=n,a=t;return{update:function(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes),a=null)},get:function(t,s,l){var c;a&&t.clientX==a.clientX&&t.clientY==a.clientY?c=o:(c=o=QH(e,t),a=t);var u=YH(e,c.pos,c.bias,i);if(n.pos!=c.pos&&!s){var h=YH(e,n.pos,n.bias,i),p=Math.min(h.from,u.from),d=Math.max(h.to,u.to);u=p<u.from?Bi.range(p,d):Bi.range(d,p)}return s?r.replaceRange(r.main.extend(u.from,u.to)):l&&r.ranges.length>1&&r.ranges.some((function(e){return e.eq(u)}))?function(e,t){for(var n=0;;n++)if(e.ranges[n].eq(t))return Bi.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}(r,u):l?r.addRange(u):Bi.create([u])}}}(e,t)),n){var o=e.root.activeElement!=e.contentDOM;o&&e.observer.ignore((function(){return LN(e.contentDOM)})),e.inputState.startMouseSelection(new UH(e,t,n,o))}}};var XH=function(e,t){return e>=t.top&&e<=t.bottom},$H=function(e,t,n){return XH(t,n)&&e>=n.left&&e<=n.right};function ZH(e,t,n,i){var r=kR.find(e.docView,t);if(!r)return 1;var o=t-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;var a=r.coordsAt(o,-1);if(a&&$H(n,i,a))return-1;var s=r.coordsAt(o,1);return s&&$H(n,i,s)?1:a&&XH(i,a)?-1:1}function QH(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:ZH(e,n,t.clientX,t.clientY)}}var JH=QN.ie&&QN.ie_version<=11,eV=null,tV=0,nV=0;function iV(e){if(!JH)return e.detail;var t=eV,n=nV;return eV=e,nV=Date.now(),tV=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(tV+1)%3:1}function rV(e,t,n,i){if(n){var r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();var o=e.inputState.mouseSelection,a=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,s={from:r,insert:n},l=e.state.changes(a?[a,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"})}}_H.dragstart=function(e,t){var n=e.state.selection.main,i=e.inputState.mouseSelection;i&&(i.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},_H.drop=function(e,t){if(t.dataTransfer){if(e.state.readOnly)return t.preventDefault();var n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();for(var i=Array(n.length),r=0,o=function(){++r==n.length&&rV(e,t,i.filter((function(e){return null!=e})).join(e.state.lineBreak),!1)},a=function(e){var t=new FileReader;t.onerror=o,t.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),o()},t.readAsText(n[e])},s=0;s<n.length;s++)a(s)}else rV(e,t,t.dataTransfer.getData("Text"),!0)}},_H.paste=function(e,t){if(e.state.readOnly)return t.preventDefault();e.observer.flush();var n=GH?null:t.clipboardData;n?(KH(e,n.getData("text/plain")),t.preventDefault()):function(e){var t=e.dom.parentNode;if(t){var n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.remove(),KH(e,n.value)}),50)}}(e)};var oV=null;function aV(e){setTimeout((function(){e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}_H.copy=_H.cut=function(e,t){var n=function(e){for(var t=[],n=[],i=!1,r=0,o=e.selection.ranges;r<o.length;r++){var a=o[r];a.empty||(t.push(e.sliceDoc(a.from,a.to)),n.push(a))}if(!t.length){for(var s=-1,l=0,c=e.selection.ranges;l<c.length;l++){var u=c[l].from,h=e.doc.lineAt(u);h.number>s&&(t.push(h.text),n.push({from:h.from,to:Math.min(e.doc.length,h.to+1)})),s=h.number}i=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:i}}(e.state),i=n.text,r=n.ranges,o=n.linewise;if(i||o){oV=o?i:null;var a=GH?null:t.clipboardData;a?(t.preventDefault(),a.clearData(),a.setData("text/plain",i)):function(e,t){var n=e.dom.parentNode;if(n){var i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((function(){i.remove(),e.focus()}),50)}}(e,i),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}},_H.focus=function(e){e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),aV(e)},_H.blur=function(e){e.observer.clearSelectionRange(),aV(e)},_H.compositionstart=_H.compositionupdate=function(e){null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},_H.compositionend=function(e){e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,QN.chrome&&QN.android&&e.observer.flushSoon(),setTimeout((function(){e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},_H.contextmenu=function(e){e.inputState.lastContextMenu=Date.now()},_H.beforeinput=function(e,t){var n,i;if(QN.chrome&&QN.android&&(i=VH.find((function(e){return e.inputType==t.inputType})))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){var r=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((function(){var t;((null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0)>r+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};var sV=["pre-wrap","normal","pre-line","break-spaces"],lV=function(){function e(e){this.lineWrapping=e,this.doc=ii.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}return e.prototype.heightForGap=function(e,t){var n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n},e.prototype.heightForLine=function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight},e.prototype.setDoc=function(e){return this.doc=e,this},e.prototype.mustRefreshForWrapping=function(e){return sV.indexOf(e)>-1!=this.lineWrapping},e.prototype.mustRefreshForHeights=function(e){for(var t=!1,n=0;n<e.length;n++){var i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t},e.prototype.refresh=function(e,t,n,i,r){var o=sV.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=i,a){this.heightSamples={};for(var s=0;s<r.length;s++){var l=r[s];l<0?s++:this.heightSamples[Math.floor(10*l)]=!0}}return a},e}(),cV=function(){function e(e,t){this.from=e,this.heights=t,this.index=0}return Object.defineProperty(e.prototype,"more",{get:function(){return this.index<this.heights.length},enumerable:!1,configurable:!0}),e}(),uV=function(){function e(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this.type=r}return Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!1,configurable:!0}),e.prototype.join=function(t){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new e(this.from,this.length+t.length,this.top,this.height+t.height,n)},e}(),hV=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(hV||(hV={})),pV=.001,dV=function(){function e(e,t,n){void 0===n&&(n=2),this.length=e,this.height=t,this.flags=n}return Object.defineProperty(e.prototype,"outdated",{get:function(){return(2&this.flags)>0},set:function(e){this.flags=(e?2:0)|-3&this.flags},enumerable:!1,configurable:!0}),e.prototype.setHeight=function(e,t){this.height!=t&&(Math.abs(this.height-t)>pV&&(e.heightChanged=!0),this.height=t)},e.prototype.replace=function(t,n,i){return e.of(i)},e.prototype.decomposeLeft=function(e,t){t.push(this)},e.prototype.decomposeRight=function(e,t){t.push(this)},e.prototype.applyChanges=function(e,t,n,i){for(var r=this,o=i.length-1;o>=0;o--){var a=i[o],s=a.fromA,l=a.toA,c=a.fromB,u=a.toB,h=r.lineAt(s,hV.ByPosNoHeight,t,0,0),p=h.to>=l?h:r.lineAt(l,hV.ByPosNoHeight,t,0,0);for(u+=p.to-l,l=p.to;o>0&&h.from<=i[o-1].toA;)s=i[o-1].fromA,c=i[o-1].fromB,o--,s<h.from&&(h=r.lineAt(s,hV.ByPosNoHeight,t,0,0));c+=h.from-s,s=h.from;var d=bV.build(n,e,c,u);r=r.replace(s,l,d)}return r.updateHeight(n,0)},e.empty=function(){return new gV(0,0)},e.of=function(t){if(1==t.length)return t[0];for(var n=0,i=t.length,r=0,o=0;;)if(n==i)if(r>2*o){(a=t[n-1]).break?t.splice(--n,1,a.left,null,a.right):t.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else{if(!(o>2*r))break;var a;(a=t[i]).break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else if(r<o){(s=t[n++])&&(r+=s.size)}else{var s;(s=t[--i])&&(o+=s.size)}var l=0;return null==t[n-1]?(l=1,n--):null==t[n]&&(l=1,i++),new vV(e.of(t.slice(0,n)),l,e.of(t.slice(i)))},e}();dV.prototype.size=1;var fV=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.type=i,r}return f(t,e),t.prototype.blockAt=function(e,t,n,i){return new uV(i,this.length,n,this.height,this.type)},t.prototype.lineAt=function(e,t,n,i,r){return this.blockAt(0,n,i,r)},t.prototype.forEachLine=function(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this},t.prototype.toString=function(){return"block(".concat(this.length,")")},t}(dV),gV=function(e){function t(t,n){var i=e.call(this,t,n,fR.Text)||this;return i.collapsed=0,i.widgetHeight=0,i}return f(t,e),t.prototype.replace=function(e,n,i){var r=i[0];return 1==i.length&&(r instanceof t||r instanceof mV&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof mV?r=new t(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):dV.of(i)},t.prototype.updateHeight=function(e,t,n,i){return void 0===t&&(t=0),void 0===n&&(n=!1),i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this},t.prototype.toString=function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")},t}(fV),mV=function(e){function t(t){return e.call(this,t,0)||this}return f(t,e),t.prototype.lines=function(e,t){var n=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:i,lineHeight:this.height/(i-n+1)}},t.prototype.blockAt=function(e,t,n,i){var r=this.lines(t,i),o=r.firstLine,a=r.lastLine,s=r.lineHeight,l=Math.max(0,Math.min(a-o,Math.floor((e-n)/s))),c=t.line(o+l),u=c.from,h=c.length;return new uV(u,h,n+s*l,s,fR.Text)},t.prototype.lineAt=function(e,t,n,i,r){if(t==hV.ByHeight)return this.blockAt(e,n,i,r);if(t==hV.ByPosNoHeight){var o=n.lineAt(e),a=o.from,s=o.to;return new uV(a,s-a,0,0,fR.Text)}var l=this.lines(n,r),c=l.firstLine,u=l.lineHeight,h=n.lineAt(e),p=h.from,d=h.length,f=h.number;return new uV(p,d,i+u*(f-c),u,fR.Text)},t.prototype.forEachLine=function(e,t,n,i,r,o){for(var a=this.lines(n,r),s=a.firstLine,l=a.lineHeight,c=Math.max(e,r),u=Math.min(r+this.length,t);c<=u;){var h=n.lineAt(c);c==e&&(i+=l*(h.number-s)),o(new uV(h.from,h.length,i,l,fR.Text)),i+=l,c=h.to+1}},t.prototype.replace=function(e,n,i){var r=this.length-n;if(r>0){var o=i[i.length-1];o instanceof t?i[i.length-1]=new t(o.length+r):i.push(null,new t(r-1))}if(e>0){var a=i[0];a instanceof t?i[0]=new t(e+a.length):i.unshift(new t(e-1),null)}return dV.of(i)},t.prototype.decomposeLeft=function(e,n){n.push(new t(e-1),null)},t.prototype.decomposeRight=function(e,n){n.push(null,new t(this.length-e-1))},t.prototype.updateHeight=function(e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=!1);var o=n+this.length;if(r&&r.from<=n+this.length&&r.more){var a=[],s=Math.max(n,r.from),l=-1,c=e.heightChanged;for(r.from>n&&a.push(new t(r.from-n-1).updateHeight(e,n));s<=o&&r.more;){var u=e.doc.lineAt(s).length;a.length&&a.push(null);var h=r.heights[r.index++];-1==l?l=h:Math.abs(h-l)>=pV&&(l=-2);var p=new gV(u,h);p.outdated=!1,a.push(p),s+=u+1}s<=o&&a.push(null,new t(o-s).updateHeight(e,s));var d=dV.of(a);return e.heightChanged=c||l<0||Math.abs(d.height-this.height)>=pV||Math.abs(l-this.lines(e.doc,n).lineHeight)>=pV,d}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1),this},t.prototype.toString=function(){return"gap(".concat(this.length,")")},t}(dV),vV=function(e){function t(t,n,i){var r=e.call(this,t.length+n+i.length,t.height+i.height,n|(t.outdated||i.outdated?2:0))||this;return r.left=t,r.right=i,r.size=t.size+i.size,r}return f(t,e),Object.defineProperty(t.prototype,"break",{get:function(){return 1&this.flags},enumerable:!1,configurable:!0}),t.prototype.blockAt=function(e,t,n,i){var r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)},t.prototype.lineAt=function(e,t,n,i,r){var o=i+this.left.height,a=r+this.left.length+this.break,s=t==hV.ByHeight?e<o:e<a,l=s?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,a);if(this.break||(s?l.to<a:l.from>a))return l;var c=t==hV.ByPosNoHeight?hV.ByPosNoHeight:hV.ByPos;return s?l.join(this.right.lineAt(a,c,n,o,a)):this.left.lineAt(a,c,n,i,r).join(l)},t.prototype.forEachLine=function(e,t,n,i,r,o){var a=i+this.left.height,s=r+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,i,r,o),t>=s&&this.right.forEachLine(e,t,n,a,s,o);else{var l=this.lineAt(s,hV.ByPos,n,i,r);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,r,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,a,s,o)}},t.prototype.replace=function(e,t,n){var i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));var r=[];e>0&&this.decomposeLeft(e,r);for(var o=r.length,a=0,s=n;a<s.length;a++){var l=s[a];r.push(l)}if(e>0&&yV(r,o-1),t<this.length){var c=r.length;this.decomposeRight(t,r),yV(r,c)}return dV.of(r)},t.prototype.decomposeLeft=function(e,t){var n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)},t.prototype.decomposeRight=function(e,t){var n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)},t.prototype.balanced=function(e,t){return e.size>2*t.size||t.size>2*e.size?dV.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)},t.prototype.updateHeight=function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=!1);var r=this.left,o=this.right,a=t+r.length+this.break,s=null;return i&&i.from<=t+r.length&&i.more?s=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=a+o.length&&i.more?s=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),s?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)},t.prototype.toString=function(){return this.left+(this.break?" ":"-")+this.right},t}(dV);function yV(e,t){var n,i;null==e[t]&&(n=e[t-1])instanceof mV&&(i=e[t+1])instanceof mV&&e.splice(t-1,3,new mV(n.length+1+i.length))}var bV=function(){function e(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}return Object.defineProperty(e.prototype,"isCovered",{get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering},enumerable:!1,configurable:!0}),e.prototype.span=function(e,t){if(this.lineStart>-1){var n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof gV?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new gV(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t},e.prototype.point=function(e,t,n){if(e<t||n.heightRelevant){var i=n.widget?n.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);var r=t-e;n.block?this.addBlock(new fV(r,i,n.type)):(r||i>=5)&&this.addLineDeco(i,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)},e.prototype.enterLine=function(){if(!(this.lineStart>-1)){var e=this.oracle.doc.lineAt(this.pos),t=e.from,n=e.to;this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new gV(this.pos-t,-1)),this.writtenTo=this.pos}},e.prototype.blankContent=function(e,t){var n=new mV(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n},e.prototype.ensureLine=function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gV)return e;var t=new gV(0,-1);return this.nodes.push(t),t},e.prototype.addBlock=function(e){this.enterLine(),e.type!=fR.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=fR.WidgetBefore&&(this.covering=e)},e.prototype.addLineDeco=function(e,t){var n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t},e.prototype.finish=function(e){var t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof gV||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new gV(0,-1));for(var n=e,i=0,r=this.nodes;i<r.length;i++){var o=r[i];o instanceof gV&&o.updateHeight(this.oracle,n),n+=o?o.length:1}return this.nodes},e.build=function(t,n,i,r){var o=new e(i,t);return Pr.spans(n,i,r,o,0),o.finish(i)},e}();var wV=function(){function e(){this.changes=[]}return e.prototype.compareRange=function(){},e.prototype.comparePoint=function(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&wR(e,t,this.changes,5)},e}();function kV(e,t){for(var n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom),c=e.parentNode;c&&c!=i.body;)if(1==c.nodeType){var u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&"visible"!=h.overflow){var p=u.getBoundingClientRect();o=Math.max(o,p.left),a=Math.min(a,p.right),s=Math.max(s,p.top),l=c==e.parentNode?p.bottom:Math.min(l,p.bottom)}c="absolute"==h.position||"fixed"==h.position?u.offsetParent:u.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+t),bottom:Math.max(s,l)-(n.top+t)}}function CV(e,t){var n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}var EV=function(){function e(e,t,n){this.from=e,this.to=t,this.size=n}return e.same=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0},e.prototype.draw=function(e){return gR.replace({widget:new xV(this.size,e)}).range(this.from,this.to)},e}(),xV=function(e){function t(t,n){var i=e.call(this)||this;return i.size=t,i.vertical=n,i}return f(t,e),t.prototype.eq=function(e){return e.size==this.size&&e.vertical==this.vertical},t.prototype.toDOM=function(){var e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return this.vertical?this.size:-1},enumerable:!1,configurable:!0}),t}(dR),SV=function(){function e(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=LV,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=$R.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;var t=e.facet(WR).some((function(e){return"function"!=typeof e&&"cm-lineWrapping"==e.class}));this.heightOracle=new lV(t),this.stateDeco=e.facet(_R).filter((function(e){return"function"!=typeof e})),this.heightMap=dV.empty().applyChanges(this.stateDeco,ii.empty,this.heightOracle.setDoc(e.doc),[new YR(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=gR.set(this.lineGaps.map((function(e){return e.draw(!1)}))),this.computeVisibleRanges()}return e.prototype.updateForViewport=function(){for(var e=[this.viewport],t=this.state.selection.main,n=function(n){var r=n?t.head:t.anchor;if(!e.some((function(e){var t=e.from,n=e.to;return r>=t&&r<=n}))){var o=i.lineBlockAt(r),a=o.from,s=o.to;e.push(new MV(a,s))}},i=this,r=0;r<=1;r++)n(r);this.viewports=e.sort((function(e,t){return e.from-t.from})),this.scaler=this.heightMap.height<=7e6?LV:new PV(this.heightOracle.doc,this.heightMap,this.viewports)},e.prototype.updateViewportLines=function(){var e=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(t){e.viewportLines.push(1==e.scaler.scale?t:IV(t,e.scaler))}))},e.prototype.update=function(e,t){void 0===t&&(t=null),this.state=e.state;var n=this.stateDeco;this.stateDeco=this.state.facet(_R).filter((function(e){return"function"!=typeof e}));var i,r,o,a,s=e.changedRanges,l=YR.extendWithRanges(s,(i=n,r=this.stateDeco,o=e?e.changes:Ti.empty(this.state.doc.length),a=new wV,Pr.compare(i,r,o,a,0),a.changes)),c=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=c&&(e.flags|=2);var u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));var h=!e.changes.empty||2&e.flags||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(OR)&&(this.mustEnforceCursorAssoc=!0)},e.prototype.measure=function(e){var t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?$R.RTL:$R.LTR;var o=this.heightOracle.mustRefreshForWrapping(r),a=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;var s=0,l=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,s|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,s|=8);var h=(this.printing?CV:kV)(t,this.paddingTop),p=h.top-this.pixelViewport.top,d=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;var f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;var g=t.clientWidth;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=g,this.editorHeight=e.scrollDOM.clientHeight,s|=8),a){var m=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(m)&&(o=!0),o||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){var v=e.docView.measureTextSize(),y=v.lineHeight,b=v.charWidth;(o=y>0&&i.refresh(r,y,b,g/b,m))&&(e.docView.minWidth=0,s|=8)}p>0&&d>0?l=Math.max(p,d):p<0&&d<0&&(l=Math.min(p,d)),i.heightChanged=!1;for(var w=0,k=this.viewports;w<k.length;w++){var C=k[w],E=C.from==this.viewport.from?m:e.docView.measureVisibleLineHeights(C);this.heightMap=(o?dV.empty().applyChanges(this.stateDeco,ii.empty,this.heightOracle,[new YR(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new cV(C.from,E))}i.heightChanged&&(s|=2)}var x=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&s||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),s|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),s},Object.defineProperty(e.prototype,"visibleTop",{get:function(){return this.scaler.fromDOM(this.pixelViewport.top)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleBottom",{get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)},enumerable:!1,configurable:!0}),e.prototype.getViewport=function(e,t){var n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.state.doc,o=this.visibleTop,a=this.visibleBottom,s=new MV(i.lineAt(o-1e3*n,hV.ByHeight,r,0,0).from,i.lineAt(a+1e3*(1-n),hV.ByHeight,r,0,0).to);if(t){var l=t.range.head;if(l<s.from||l>s.to){var c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=i.lineAt(l,hV.ByPos,r,0,0),h=void 0;h="center"==t.y?(u.top+u.bottom)/2-c/2:"start"==t.y||"nearest"==t.y&&l<s.from?u.top:u.bottom-c,s=new MV(i.lineAt(h-500,hV.ByHeight,r,0,0).from,i.lineAt(h+c+500,hV.ByHeight,r,0,0).to)}}return s},e.prototype.mapViewport=function(e,t){var n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new MV(this.heightMap.lineAt(n,hV.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,hV.ByPos,this.state.doc,0,0).to)},e.prototype.viewportIsAppropriate=function(e,t){var n=e.from,i=e.to;if(void 0===t&&(t=0),!this.inView)return!0;var r=this.heightMap.lineAt(n,hV.ByPos,this.state.doc,0,0).top,o=this.heightMap.lineAt(i,hV.ByPos,this.state.doc,0,0).bottom,a=this.visibleTop,s=this.visibleBottom;return(0==n||r<=a-Math.max(10,Math.min(-t,250)))&&(i==this.state.doc.length||o>=s+Math.max(10,Math.min(t,250)))&&r>a-2e3&&o<s+2e3},e.prototype.mapLineGaps=function(e,t){if(!e.length||t.empty)return e;for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];t.touchesRange(o.from,o.to)||n.push(new EV(t.mapPos(o.from),t.mapPos(o.to),o.size))}return n},e.prototype.ensureLineGaps=function(e,t){var n=this,i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,a=r<<1;if(this.defaultTextDirection!=$R.LTR&&!i)return[];for(var s=[],l=function(r,a,c,u){if(!(a-r<o)){var h=n.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(var d=0,f=p;d<f.length;d++){var g=f[d];if(g>r&&g<a)return l(r,g-10,c,u),void l(g+10,a,c,u)}var m=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(t(r))return r}return}(e,(function(e){return e.from>=c.from&&e.to<=c.to&&Math.abs(e.from-r)<o&&Math.abs(e.to-a)<o&&!p.some((function(t){return e.from<t&&e.to>t}))}));if(!m){if(a<c.to&&t&&i&&t.visibleRanges.some((function(e){return e.from<=a&&e.to>=a}))){var v=t.moveToLineBoundary(Bi.cursor(a),!1,!0).head;v>r&&(a=v)}m=new EV(r,a,n.gapSize(c,r,a,u))}s.push(m)}},c=0,u=this.viewportLines;c<u.length;c++){var h=u[c];if(!(h.length<a)){var p=TV(h.from,h.to,this.stateDeco);if(!(p.total<a)){var d=this.scrollTarget?this.scrollTarget.range.head:null,f=void 0,g=void 0;if(i){var m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v=void 0,y=void 0;if(null!=d)v=(b=AV(p,d))-(w=((this.visibleBottom-this.visibleTop)/2+m)/h.height),y=b+w;else v=(this.visibleTop-h.top-m)/h.height,y=(this.visibleBottom-h.top+m)/h.height;f=DV(p,v),g=DV(p,y)}else{var b,w,k=p.total*this.heightOracle.charWidth,C=r*this.heightOracle.charWidth,E=void 0,x=void 0;if(null!=d)E=(b=AV(p,d))-(w=((this.pixelViewport.right-this.pixelViewport.left)/2+C)/k),x=b+w;else E=(this.pixelViewport.left-C)/k,x=(this.pixelViewport.right+C)/k;f=DV(p,E),g=DV(p,x)}f>h.from&&l(h.from,f,h,p),g<h.to&&l(g,h.to,h,p)}}}return s},e.prototype.gapSize=function(e,t,n,i){var r=AV(i,n)-AV(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r},e.prototype.updateLineGaps=function(e){var t=this;EV.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=gR.set(e.map((function(e){return e.draw(t.heightOracle.lineWrapping)}))))},e.prototype.computeVisibleRanges=function(){var e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));var t=[];Pr.spans(e,this.viewport.from,this.viewport.to,{span:function(e,n){t.push({from:e,to:n})},point:function(){}},20);var n=t.length!=this.visibleRanges.length||this.visibleRanges.some((function(e,n){return e.from!=t[n].from||e.to!=t[n].to}));return this.visibleRanges=t,n?4:0},e.prototype.lineBlockAt=function(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((function(t){return t.from<=e&&t.to>=e}))||IV(this.heightMap.lineAt(e,hV.ByPos,this.state.doc,0,0),this.scaler)},e.prototype.lineBlockAtHeight=function(e){return IV(this.heightMap.lineAt(this.scaler.fromDOM(e),hV.ByHeight,this.state.doc,0,0),this.scaler)},e.prototype.elementAtHeight=function(e){return IV(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)},Object.defineProperty(e.prototype,"docHeight",{get:function(){return this.scaler.toDOM(this.heightMap.height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.docHeight+this.paddingTop+this.paddingBottom},enumerable:!1,configurable:!0}),e}(),MV=function(e,t){this.from=e,this.to=t};function TV(e,t,n){var i=[],r=e,o=0;return Pr.spans(n,e,t,{span:function(){},point:function(e,t){e>r&&(i.push({from:r,to:e}),o+=e-r),r=t}},20),r<t&&(i.push({from:r,to:t}),o+=t-r),{total:o,ranges:i}}function DV(e,t){var n=e.total,i=e.ranges;if(t<=0)return i[0].from;if(t>=1)return i[i.length-1].to;for(var r=Math.floor(n*t),o=0;;o++){var a=i[o],s=a.from,l=a.to-s;if(r<=l)return s+r;r-=l}}function AV(e,t){for(var n=0,i=0,r=e.ranges;i<r.length;i++){var o=r[i],a=o.from,s=o.to;if(t<=s){n+=t-a;break}n+=s-a}return n/e.total}var LV={toDOM:function(e){return e},fromDOM:function(e){return e},scale:1},PV=function(){function e(e,t,n){var i=0,r=0,o=0;this.viewports=n.map((function(n){var r=n.from,o=n.to,a=t.lineAt(r,hV.ByPos,e,0,0).top,s=t.lineAt(o,hV.ByPos,e,0,0).bottom;return i+=s-a,{from:r,to:o,top:a,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(var a=0,s=this.viewports;a<s.length;a++){var l=s[a];l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}}return e.prototype.toDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}},e.prototype.fromDOM=function(e){for(var t=0,n=0,i=0;;t++){var r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}},e}();function IV(e,t){if(1==t.scale)return e;var n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new uV(e.from,e.length,n,i-n,Array.isArray(e.type)?e.type.map((function(e){return IV(e,t)})):e.type)}var OV=Hi.define({combine:function(e){return e.join(" ")}}),FV=Hi.define({combine:function(e){return e.indexOf(!0)>-1}}),BV=Yr.newName(),NV=Yr.newName(),RV=Yr.newName(),HV={"&light":"."+NV,"&dark":"."+RV};function VV(e,t,n){return new Yr(t,{finish:function(t){return/&/.test(t)?t.replace(/&\w*/,(function(t){if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t}})}var zV=VV("."+BV,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},HV),qV=function(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="";var r=e.docView,o=r.impreciseHead,a=r.impreciseAnchor;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){var s=o||a?[]:function(e){var t=[];if(e.root.activeElement!=e.contentDOM)return t;var n=e.observer.selectionRange,i=n.anchorNode,r=n.anchorOffset,o=n.focusNode,a=n.focusOffset;return i&&(t.push(new wH(i,r)),o==i&&a==r||t.push(new wH(o,a))),t}(e),l=new yH(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=function(e,t){if(0==e.length)return null;var n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?Bi.single(n+t,i+t):null}(s,this.bounds.from)}else{var c=e.observer.selectionRange,u=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!vN(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!vN(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=Bi.single(h,u)}};function UV(e,t){var n,i=t.newSel,r=e.state.selection.main;if(t.bounds){var o=t.bounds,a=o.from,s=o.to,l=r.from,c=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||QN.android&&t.text.length<s-a)&&(l=r.to,c="end");var u=function(e,t,n,i){var r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;var a=e.length,s=t.length;for(;a>0&&s>0&&e.charCodeAt(a-1)==t.charCodeAt(s-1);)a--,s--;if("end"==i){n-=a+Math.max(0,o-Math.min(a,s))-o}if(a<o&&e.length<t.length){s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o}else if(s<o){a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o}return{from:o,toA:a,toB:s}}(e.state.doc.sliceString(a,s,vH),t.text,l-a,c);u&&(QN.chrome&&13==e.inputState.lastKeyCode&&u.toB==u.from+2&&"￿￿"==t.text.slice(u.from,u.toB)&&u.toB--,n={from:a+u.from,to:a+u.toA,insert:ii.of(t.text.slice(u.from,u.toB).split(vH))})}else!i||e.hasFocus&&e.state.facet(RR)&&!i.main.eq(r)||(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:(QN.mac||QN.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())?(i&&2==n.insert.length&&(i=Bi.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ii.of([" "])}):QN.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=Bi.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ii.of([" "])}),n){var h=e.state;if(QN.ios&&e.inputState.flushIOSKey(e))return!0;if(QN.android&&(n.from==r.from&&n.to==r.to&&1==n.insert.length&&2==n.insert.lines&&IN(e.contentDOM,"Enter",13)||n.from==r.from-1&&n.to==r.to&&0==n.insert.length&&IN(e.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&0==n.insert.length&&IN(e.contentDOM,"Delete",46)))return!0;var p=n.insert.toString();if(e.state.facet(PR).some((function(t){return t(e,n.from,n.to,p)})))return!0;e.inputState.composing>=0&&e.inputState.composing++;var d=void 0;if(n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&e.inputState.composing<0){var f=r.from<n.from?h.sliceDoc(r.from,n.from):"",g=r.to>n.to?h.sliceDoc(n.to,r.to):"";d=h.replaceSelection(e.state.toText(f+n.insert.sliceString(0,void 0,e.state.lineBreak)+g))}else{var m=h.changes(n),v=i&&!h.selection.main.eq(i.main)&&i.main.to<=m.newLength?i.main:void 0;if(h.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){var y=e.state.sliceDoc(n.from,n.to),b=EH(e)||e.state.doc.lineAt(r.head),w=r.to-n.to,k=r.to-r.from;d=h.changeByRange((function(t){if(t.from==r.from&&t.to==r.to)return{changes:m,range:v||t.map(m)};var i=t.to-w,o=i-y.length;if(t.to-t.from!=k||e.state.sliceDoc(o,i)!=y||b&&t.to>=b.from&&t.from<=b.to)return{range:t};var a=h.changes({from:o,to:i,insert:n.insert}),s=t.to-r.to;return{changes:a,range:v?Bi.range(Math.max(0,v.anchor+s),Math.max(0,v.head+s)):t.map(a)}}))}else d={changes:m,selection:v&&h.selection.replaceRange(v)}}var C="input.type";return e.composing&&(C+=".compose",e.inputState.compositionFirstChange&&(C+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(d,{scrollIntoView:!0,userEvent:C}),!0}if(i&&!i.main.eq(r)){var E=!1;C="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(E=!0),C=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:E,userEvent:C}),!0}return!1}var WV={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_V=QN.ie&&QN.ie_version<=11,jV=function(){function e(e){var t=this;this.view=e,this.active=!1,this.selectionRange=new DN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((function(n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t.queue.push(o)}(QN.ie&&QN.ie_version<=11||QN.ios&&e.composing)&&n.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?t.flushSoon():t.flush()})),_V&&(this.onCharData=function(e){t.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),t.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((function(){var e;(null===(e=t.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&t.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((function(){return t.view.requestMeasure()})),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(e){t.parentCheck<0&&(t.parentCheck=setTimeout(t.listenForScroll.bind(t),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=t.intersecting&&(t.intersecting=!t.intersecting,t.intersecting!=t.view.inView&&t.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(e){e.length>0&&e[e.length-1].intersectionRatio>0&&t.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}return e.prototype.onScrollChanged=function(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()},e.prototype.onScroll=function(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)},e.prototype.onResize=function(){var e=this;this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((function(){e.resizeTimeout=-1,e.view.requestMeasure()}),50))},e.prototype.onPrint=function(){var e=this;this.view.viewState.printing=!0,this.view.measure(),setTimeout((function(){e.view.viewState.printing=!1,e.view.requestMeasure()}),500)},e.prototype.updateGaps=function(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((function(t,n){return t!=e[n]})))){this.gapIntersection.disconnect();for(var t=0,n=e;t<n.length;t++){var i=n[t];this.gapIntersection.observe(i)}this.gaps=e}},e.prototype.onSelectionChange=function(e){var t=this.selectionChanged;if(this.readSelectionRange()&&!this.delayedAndroidKey){var n=this.view,i=this.selectionRange;if(n.state.facet(RR)?n.root.activeElement==this.dom:yN(n.dom,i)){var r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(QN.ie&&QN.ie_version<=11||QN.android&&QN.chrome)&&!n.state.selection.main.empty&&i.focusNode&&wN(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}}},e.prototype.readSelectionRange=function(){var e=this.view,t=QN.safari&&11==e.root.nodeType&&function(e){for(var t=e.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){var t,n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!n)return null;var r=n.startContainer,o=n.startOffset,a=n.endContainer,s=n.endOffset,l=e.docView.domAtPos(e.state.selection.main.anchor);wN(l.node,l.offset,a,s)&&(r=(t=[a,s,r,o])[0],o=t[1],a=t[2],s=t[3]);return{anchorNode:r,anchorOffset:o,focusNode:a,focusOffset:s}}(this.view)||mN(e.root);if(!t||this.selectionRange.eq(t))return!1;var n=yN(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){var n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(;;)if(i){if(1!=n.nodeType)return!1;var r=n.childNodes[i-1];"false"==r.contentEditable?i--:i=EN(n=r)}else{if(n==e)return!0;i=kN(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)},e.prototype.setSelectionRange=function(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1},e.prototype.clearSelectionRange=function(){this.selectionRange.set(null,0,null,0)},e.prototype.listenForScroll=function(){this.parentCheck=-1;for(var e=0,t=null,n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(var i=0,r=this.scrollTargets;i<r.length;i++){(n=r[i]).removeEventListener("scroll",this.onScroll)}for(var o=0,a=this.scrollTargets=t;o<a.length;o++){(n=a[o]).addEventListener("scroll",this.onScroll)}}},e.prototype.ignore=function(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}},e.prototype.start=function(){this.active||(this.observer.observe(this.dom,WV),_V&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)},e.prototype.stop=function(){this.active&&(this.active=!1,this.observer.disconnect(),_V&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))},e.prototype.clear=function(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1},e.prototype.delayAndroidKey=function(e,t){var n,i=this;if(!this.delayedAndroidKey){this.flushingAndroidKey=this.view.win.requestAnimationFrame((function(){var e=i.delayedAndroidKey;e&&(i.clearDelayedAndroidKey(),!i.flush()&&e.force&&IN(i.dom,e.key,e.keyCode))}))}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})},e.prototype.clearDelayedAndroidKey=function(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1},e.prototype.flushSoon=function(){var e=this;this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((function(){e.delayedFlush=-1,e.flush()})))},e.prototype.forceFlush=function(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()},e.prototype.processRecords=function(){for(var e=this.queue,t=0,n=this.observer.takeRecords();t<n.length;t++){var i=n[t];e.push(i)}e.length&&(this.queue=[]);for(var r=-1,o=-1,a=!1,s=0,l=e;s<l.length;s++){var c=l[s],u=this.readMutation(c);u&&(u.typeOver&&(a=!0),-1==r?(r=u.from,o=u.to):(r=Math.min(u.from,r),o=Math.max(u.to,o)))}return{from:r,to:o,typeOver:a}},e.prototype.readChange=function(){var e=this.processRecords(),t=e.from,n=e.to,i=e.typeOver,r=this.selectionChanged&&yN(this.dom,this.selectionRange);return t<0&&!r?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new qV(this.view,t,n,i))},e.prototype.flush=function(e){if(void 0===e&&(e=!0),this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();var t=this.readChange();if(!t)return!1;var n=this.view.state,i=UV(this.view,t);return this.view.state==n&&this.view.update([]),i},e.prototype.readMutation=function(e){var t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){var n=GV(t,e.previousSibling||e.target.previousSibling,-1),i=GV(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null},e.prototype.setWindow=function(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))},e.prototype.addWindowListeners=function(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)},e.prototype.removeWindowListeners=function(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)},e.prototype.destroy=function(){var e,t,n,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(var r=0,o=this.scrollTargets;r<o.length;r++){o[r].removeEventListener("scroll",this.onScroll)}this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)},e}();function GV(e,t,n){for(;t;){var i=NN.get(t);if(i&&i.parent==e)return i;var r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}var KV=function(){function e(e){void 0===e&&(e={});var t=this;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||function(e){return t.update([e])},this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new SV(e.state||Sr.create(e)),this.plugins=this.state.facet(VR).map((function(e){return new qR(e)}));for(var n=0,i=this.plugins;n<i.length;n++){i[n].update(this)}this.observer=new jV(this),this.inputState=new HH(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new kH(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.viewState.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this.viewState.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleRanges",{get:function(){return this.viewState.visibleRanges},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inView",{get:function(){return this.viewState.inView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composing",{get:function(){return this.inputState.composing>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositionStarted",{get:function(){return this.inputState.composing>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"win",{get:function(){return this.dom.ownerDocument.defaultView||window},enumerable:!1,configurable:!0}),e.prototype.dispatch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._dispatch(1==t.length&&t[0]instanceof fr?t[0]:(e=this.state).update.apply(e,t))},e.prototype.update=function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");for(var t,n=!1,i=!1,r=this.state,o=0,a=e;o<a.length;o++){if((p=a[o]).startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=p.state}if(this.destroyed)this.viewState.state=r;else{var s=this.observer.delayedAndroidKey,l=null;if(s?(this.observer.clearDelayedAndroidKey(),((l=this.observer.readChange())&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(l=null)):this.observer.clear(),r.facet(Sr.phrases)!=this.state.facet(Sr.phrases))return this.setState(r);t=XR.create(this,r,e);var c=this.viewState.scrollTarget;try{this.updateState=2;for(var u=0,h=e;u<h.length;u++){var p=h[u];if(c&&(c=c.map(p.changes)),p.scrollIntoView){var d=p.state.selection.main;c=new FR(d.empty?d:Bi.cursor(d.head,d.head>d.anchor?-1:1))}for(var f=0,g=p.effects;f<g.length;f++){var m=g[f];m.is(BR)&&(c=m.value)}}this.viewState.update(t,c),this.bidiCache=$V.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(KR)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((function(e){return e.isUserEvent("select.pointer")})))}finally{this.updateState=0}if(t.startState.facet(OV)!=t.state.facet(OV)&&(this.viewState.mustMeasureContent=!0),(n||i||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(var v=0,y=this.state.facet(LR);v<y.length;v++){(0,y[v])(t)}l&&!UV(this,l)&&s.force&&IN(this.contentDOM,s.key,s.keyCode)}},e.prototype.setState=function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=e;else{this.updateState=2;var t=this.hasFocus;try{for(var n=0,i=this.plugins;n<i.length;n++){i[n].destroy(this)}this.viewState=new SV(e),this.plugins=e.facet(VR).map((function(e){return new qR(e)})),this.pluginMap.clear();for(var r=0,o=this.plugins;r<o.length;r++){o[r].update(this)}this.docView=new kH(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}},e.prototype.updatePlugins=function(e){var t=e.startState.facet(VR),n=e.state.facet(VR);if(t!=n){for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=t.indexOf(a);if(s<0)i.push(new qR(a));else{var l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(var c=0,u=this.plugins;c<u.length;c++){var h=u[c];h.mustUpdate!=e&&h.destroy(this)}this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(var p=0,d=this.plugins;p<d.length;p++){d[p].mustUpdate=e}for(var f=0;f<this.plugins.length;f++)this.plugins[f].update(this)},e.prototype.measure=function(e){var t,n=this;if(void 0===e&&(e=!0),!this.destroyed){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();var i=null,r=this.scrollDOM,o=r.scrollHeight,a=r.scrollTop,s=a>o-r.clientHeight-4?o:a;try{for(var l=0;;l++){this.updateState=1;var c=this.viewport,u=this.viewState.lineBlockAtHeight(s),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var p=[];4&h||(t=[p,this.measureRequests],this.measureRequests=t[0],p=t[1]);var d=p.map((function(e){try{return e.read(n)}catch(e){return NR(n.state,e),XV}})),f=XR.create(this,this.state,[]),g=!1,m=!1;f.flags|=h,i?i.flags|=h:i=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),g=this.docView.update(f));for(var v=0;v<p.length;v++)if(d[v]!=XV)try{var y=p[v];y.write&&y.write(d[v],this)}catch(e){NR(this.state,e)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,m=!0;else{var b=this.viewState.lineBlockAt(u.from).top-u.top;(b>1||b<-1)&&(this.scrollDOM.scrollTop+=b,m=!0)}if(g&&this.docView.updateSelection(!0),this.viewport.from==c.from&&this.viewport.to==c.to&&!m&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(var w=0,k=this.state.facet(LR);w<k.length;w++){(0,k[w])(i)}}},Object.defineProperty(e.prototype,"themeClasses",{get:function(){return BV+" "+(this.state.facet(FV)?RV:NV)+" "+this.state.facet(OV)},enumerable:!1,configurable:!0}),e.prototype.updateAttrs=function(){var e=this,t=ZV(this,UR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(RR)?"true":"false",class:"cm-content",style:"".concat(QN.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ZV(this,WR,n);var i=this.observer.ignore((function(){var i=pR(e.contentDOM,e.contentAttrs,n),r=pR(e.dom,e.editorAttrs,t);return i||r}));return this.editorAttrs=t,this.contentAttrs=n,i},e.prototype.showAnnouncements=function(t){for(var n=!0,i=0,r=t;i<r.length;i++)for(var o=0,a=r[i].effects;o<a.length;o++){var s=a[o];if(s.is(e.announce))n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value}},e.prototype.mountStyles=function(){this.styleModules=this.state.facet(KR),Yr.mount(this.root,this.styleModules.concat(zV).reverse())},e.prototype.readMeasured=function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)},e.prototype.requestMeasure=function(e){var t=this;if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((function(){return t.measure()}))),e){if(null!=e.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key)return void(this.measureRequests[n]=e);this.measureRequests.push(e)}},e.prototype.plugin=function(e){var t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((function(t){return t.spec==e}))||null),t&&t.update(this).value},Object.defineProperty(e.prototype,"documentTop",{get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentPadding",{get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}},enumerable:!1,configurable:!0}),e.prototype.elementAtHeight=function(e){return this.readMeasured(),this.viewState.elementAtHeight(e)},e.prototype.lineBlockAtHeight=function(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)},Object.defineProperty(e.prototype,"viewportLineBlocks",{get:function(){return this.viewState.viewportLines},enumerable:!1,configurable:!0}),e.prototype.lineBlockAt=function(e){return this.viewState.lineBlockAt(e)},Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this.viewState.contentHeight},enumerable:!1,configurable:!0}),e.prototype.moveByChar=function(e,t,n){return RH(this,e,NH(this,e,t,n))},e.prototype.moveByGroup=function(e,t){var n=this;return RH(this,e,NH(this,e,t,(function(t){return function(e,t,n){var i=e.state.charCategorizer(t),r=i(n);return function(e){var t=i(e);return r==Cr.Space&&(r=t),r==t}}(n,e.head,t)})))},e.prototype.moveToLineBoundary=function(e,t,n){return void 0===n&&(n=!0),function(e,t,n,i){var r=e.state.doc.lineAt(t.head),o=i&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(o){var a=e.dom.getBoundingClientRect(),s=e.textDirectionAt(r.from),l=e.posAtCoords({x:n==(s==$R.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(null!=l)return Bi.cursor(l,n?-1:1)}var c=kR.find(e.docView,t.head),u=c?n?c.posAtEnd:c.posAtStart:n?r.to:r.from;return Bi.cursor(u,n?-1:1)}(this,e,t,n)},e.prototype.moveVertically=function(e,t,n){return RH(this,e,function(e,t,n,i){var r=t.head,o=n?1:-1;if(r==(n?e.state.doc.length:0))return Bi.cursor(r,t.assoc);var a,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r),u=e.documentTop;if(c)null==s&&(s=c.left-l.left),a=o<0?c.top:c.bottom;else{var h=e.viewState.lineBlockAt(r);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-h.from))),a=(o<0?h.top:h.bottom)+u}for(var p=l.left+s,d=null!=i?i:e.defaultLineHeight>>1,f=0;;f+=10){var g=a+(d+f)*o,m=FH(e,{x:p,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?m<r:m>r))return Bi.cursor(m,t.assoc,void 0,s)}}(this,e,t,n))},e.prototype.domAtPos=function(e){return this.docView.domAtPos(e)},e.prototype.posAtDOM=function(e,t){return void 0===t&&(t=0),this.docView.posFromDOM(e,t)},e.prototype.posAtCoords=function(e,t){return void 0===t&&(t=!0),this.readMeasured(),FH(this,e,t)},e.prototype.coordsAtPos=function(e,t){void 0===t&&(t=1),this.readMeasured();var n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;var i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return SN(n,r[hH.find(r,e-i.from,-1,t)].dir==$R.LTR==t>0)},Object.defineProperty(e.prototype,"defaultCharacterWidth",{get:function(){return this.viewState.heightOracle.charWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultLineHeight",{get:function(){return this.viewState.heightOracle.lineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textDirection",{get:function(){return this.viewState.defaultTextDirection},enumerable:!1,configurable:!0}),e.prototype.textDirectionAt=function(e){return!this.state.facet(IR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))},Object.defineProperty(e.prototype,"lineWrapping",{get:function(){return this.viewState.heightOracle.lineWrapping},enumerable:!1,configurable:!0}),e.prototype.bidiSpans=function(e){if(e.length>YV)return fH(e.length);for(var t=this.textDirectionAt(e.from),n=0,i=this.bidiCache;n<i.length;n++){var r=i[n];if(r.from==e.from&&r.dir==t)return r.order}var o=dH(e.text,t);return this.bidiCache.push(new $V(e.from,e.to,t,o)),o},Object.defineProperty(e.prototype,"hasFocus",{get:function(){var e;return(this.dom.ownerDocument.hasFocus()||QN.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM},enumerable:!1,configurable:!0}),e.prototype.focus=function(){var e=this;this.observer.ignore((function(){LN(e.contentDOM),e.docView.updateSelection()}))},e.prototype.setRoot=function(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())},e.prototype.destroy=function(){for(var e=0,t=this.plugins;e<t.length;e++){t[e].destroy(this)}this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0},e.scrollIntoView=function(e,t){return void 0===t&&(t={}),BR.of(new FR("number"==typeof e?Bi.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))},e.domEventHandlers=function(e){return zR.define((function(){return{}}),{eventHandlers:e})},e.theme=function(e,t){var n=Yr.newName(),i=[OV.of(n),KR.of(VV(".".concat(n),e))];return t&&t.dark&&i.push(FV.of(!0)),i},e.baseTheme=function(e){return $i.lowest(KR.of(VV("."+BV,e,HV)))},e.findFromDOM=function(e){var t,n=e.querySelector(".cm-content"),i=n&&NN.get(n)||NN.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null},e}();KV.styleModule=KR,KV.inputHandler=PR,KV.perLineTextDirection=IR,KV.exceptionSink=AR,KV.updateListener=LR,KV.editable=RR,KV.mouseSelectionStyle=DR,KV.dragMovesSelection=TR,KV.clickAddsSelectionRange=MR,KV.decorations=_R,KV.atomicRanges=jR,KV.scrollMargins=GR,KV.darkTheme=FV,KV.contentAttributes=WR,KV.editorAttributes=UR,KV.lineWrapping=KV.contentAttributes.of({class:"cm-lineWrapping"}),KV.announce=dr.define();var YV=4096,XV={},$V=function(){function e(e,t,n,i){this.from=e,this.to=t,this.dir=n,this.order=i}return e.update=function(t,n){if(n.empty)return t;for(var i=[],r=t.length?t[t.length-1].dir:$R.LTR,o=Math.max(0,t.length-10);o<t.length;o++){var a=t[o];a.dir!=r||n.touchesRange(a.from,a.to)||i.push(new e(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return i},e}();function ZV(e,t,n){for(var i=e.state.facet(t),r=i.length-1;r>=0;r--){var o=i[r],a="function"==typeof o?o(e):o;a&&uR(a,n)}return n}var QV=QN.mac?"mac":QN.windows?"win":QN.linux?"linux":"key";function JV(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var ez=$i.default(KV.domEventHandlers({keydown:function(e,t){return oz(iz(t.state),e,t,"editor")}})),tz=Hi.define({enables:ez}),nz=new WeakMap;function iz(e){var t=e.facet(tz),n=nz.get(t);return n||nz.set(t,n=function(e,t){void 0===t&&(t=QV);for(var n=Object.create(null),i=Object.create(null),r=function(e,t){var n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=function(e,i,o,a){for(var s,l,c=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map((function(e){return function(e,t){var n,i,r,o,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;++l){var c=a[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);"mac"==t?o=!0:i=!0}}return n&&(s="Alt-"+s),i&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}(e,t)})),h=function(t){var n=u.slice(0,t).join(" ");r(n,!0),c[n]||(c[n]={preventDefault:!0,run:[function(t){var i=rz={view:t,prefix:n,scope:e};return setTimeout((function(){rz==i&&(rz=null)}),4e3),!0}]})},p=1;p<u.length;p++)h(p);var d=u.join(" ");r(d,!1);var f=c[d]||(c[d]={preventDefault:!1,run:(null===(l=null===(s=c._any)||void 0===s?void 0:s.run)||void 0===l?void 0:l.slice())||[]});o&&f.run.push(o),a&&(f.preventDefault=!0)},a=0,s=e;a<s.length;a++){var l=s[a],c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(var u=0,h=c;u<h.length;u++){var p=h[u],d=n[p]||(n[p]=Object.create(null));for(var f in d._any||(d._any={preventDefault:!1,run:[]}),d)d[f].run.push(l.any)}var g=l[t]||l.key;if(g)for(var m=0,v=c;m<v.length;m++){o(p=v[m],g,l.run,l.preventDefault),l.shift&&o(p,"Shift-"+g,l.shift,l.preventDefault)}}return n}(t.reduce((function(e,t){return e.concat(t)}),[]))),n}var rz=null;function oz(e,t,n,i){var r=so(t),o=Ei(ki(r,0))==r.length&&" "!=r,a="",s=!1;rz&&rz.view==n&&rz.scope==i&&(a=rz.prefix+" ",(s=qH.indexOf(t.keyCode)<0)&&(rz=null));var l,c,u=new Set,h=function(e){if(e){for(var i=0,r=e.run;i<r.length;i++){var o=r[i];if(!u.has(o)&&(u.add(o),o(n,t)))return!0}e.preventDefault&&(s=!0)}return!1},p=e[i];if(p){if(h(p[a+JV(r,t,!o)]))return!0;if(o&&(t.altKey||t.metaKey||t.ctrlKey)&&(l=Zr[t.keyCode])&&l!=r){if(h(p[a+JV(l,t,!0)]))return!0;if(t.shiftKey&&(c=Qr[t.keyCode])!=r&&c!=l&&h(p[a+JV(c,t,!1)]))return!0}else if(o&&t.shiftKey&&h(p[a+JV(r,t,!0)]))return!0;if(h(p._any))return!0}return s}var az=function(){function e(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}return e.prototype.draw=function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e},e.prototype.update=function(e,t){return t.className==this.className&&(this.adjust(e),!0)},e.prototype.adjust=function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"},e.prototype.eq=function(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className},e.forRange=function(t,n,i){if(i.empty){var r=t.coordsAtPos(i.head,i.assoc||1);if(!r)return[];var o=sz(t);return[new e(n,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];var i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),o=e.textDirection==$R.LTR,a=e.contentDOM,s=a.getBoundingClientRect(),l=sz(e),c=window.getComputedStyle(a.firstChild),u=s.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),h=s.right-parseInt(c.paddingRight),p=cz(e,i),d=cz(e,r),f=p.type==fR.Text?p:null,g=d.type==fR.Text?d:null;e.lineWrapping&&(f&&(f=lz(e,i,f)),g&&(g=lz(e,r,g)));if(f&&g&&f.from==g.from)return w(k(n.from,n.to,f));var m=f?k(n.from,null,f):C(p,!1),v=g?k(null,n.to,g):C(d,!0),y=[];return(f||p).to<(g||d).from-1?y.push(b(u,m.bottom,h,v.top)):m.bottom<v.top&&e.elementAtHeight((m.bottom+v.top)/2).type==fR.Text&&(m.bottom=v.top=(m.bottom+v.top)/2),w(m).concat(y).concat(w(v));function b(e,n,i,r){return new az(t,e-l.left,n-l.top-.01,i-e,r-n+.01)}function w(e){for(var t=e.top,n=e.bottom,i=e.horizontal,r=[],o=0;o<i.length;o+=2)r.push(b(i[o],t,i[o+1],n));return r}function k(t,n,i){var r=1e9,a=-1e9,s=[];function l(t,n,l,c,p){var d=e.coordsAtPos(t,t==i.to?-2:2),f=e.coordsAtPos(l,l==i.from?2:-2);r=Math.min(d.top,f.top,r),a=Math.max(d.bottom,f.bottom,a),p==$R.LTR?s.push(o&&n?u:d.left,o&&c?h:f.right):s.push(!o&&c?u:f.left,!o&&n?h:d.right)}for(var c=null!=t?t:i.from,p=null!=n?n:i.to,d=0,f=e.visibleRanges;d<f.length;d++){var g=f[d];if(g.to>c&&g.from<p)for(var m=Math.max(g.from,c),v=Math.min(g.to,p);;){for(var y=e.state.doc.lineAt(m),b=0,w=e.bidiSpans(y);b<w.length;b++){var k=w[b],C=k.from+y.from,E=k.to+y.from;if(C>=v)break;E>m&&l(Math.max(C,m),null==t&&C<=c,Math.min(E,v),null==n&&E>=p,k.dir)}if((m=y.to+1)>=v)break}}return 0==s.length&&l(c,null==t,p,null==n,e.textDirection),{top:r,bottom:a,horizontal:s}}function C(e,t){var n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,n,i)},e}();function sz(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==$R.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function lz(e,t,n){var i=Bi.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(i,!0,!0).from),type:fR.Text}}function cz(e,t){var n=e.lineBlockAt(t);if(Array.isArray(n.type))for(var i=0,r=n.type;i<r.length;i++){var o=r[i];if(o.to>t||o.to==t&&(o.to==n.to||o.type==fR.Text))return o}return n}!function(){function e(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}e.prototype.update=function(e){e.startState.facet(uz)!=e.state.facet(uz)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)},e.prototype.setOrder=function(e){for(var t=0,n=e.facet(uz);t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)},e.prototype.measure=function(){return this.layer.markers(this.view)},e.prototype.draw=function(e){var t=this;if(e.length!=this.drawn.length||e.some((function(e,n){return i=e,r=t.drawn[n],!(i.constructor==r.constructor&&i.eq(r));var i,r}))){for(var n=this.dom.firstChild,i=0,r=0,o=e;r<o.length;r++){var a=o[r];a.update&&n&&a.constructor&&this.drawn[i].constructor&&a.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(a.draw(),n)}for(;n;){var s=n.nextSibling;n.remove(),n=s}this.drawn=e}},e.prototype.destroy=function(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}();var uz=Hi.define();var hz=!QN.ios;var pz={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};hz&&(pz[".cm-line"].caretColor="transparent !important");var dz=dr.define({map:function(e,t){return null==e?null:t.mapPos(e)}}),fz=_i.define({create:function(){return null},update:function(e,t){return null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((function(e,t){return t.is(dz)?t.value:e}),e)}});!function(){function e(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}e.prototype.update=function(e){var t,n=e.state.field(fz);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(fz)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))},e.prototype.readPos=function(){var e=this.view.state.field(fz),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;var n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}},e.prototype.drawCursor=function(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")},e.prototype.destroy=function(){this.cursor&&this.cursor.remove()},e.prototype.setDropPos=function(e){this.view.state.field(fz)!=e&&this.view.dispatch({effects:dz.of(e)})}}();function gz(e,t,n,i,r){t.lastIndex=0;for(var o=e.iterRange(n,i),a=n,s=void 0;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}!function(){function e(e){var t=e.regexp,n=e.decoration,i=e.decorate,r=e.boundary,o=e.maxLength,a=void 0===o?1e3:o;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=function(e,t,n,r){return i(r,n,n+e[0].length,e,t)};else if("function"==typeof n)this.addMatch=function(e,t,i,r){var o=n(e,t,i);o&&r(i,i+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=function(e,t,i,r){return r(i,i+e[0].length,n)}}this.boundary=r,this.maxLength=a}e.prototype.createDeco=function(e){for(var t=this,n=new Ir,i=n.add.bind(n),r=0,o=function(e,t){var n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;for(var i=[],r=0,o=n;r<o.length;r++){var a=o[r],s=a.from,l=a.to;s=Math.max(e.state.doc.lineAt(s).from,s-t),l=Math.min(e.state.doc.lineAt(l).to,l+t),i.length&&i[i.length-1].to>=s?i[i.length-1].to=l:i.push({from:s,to:l})}return i}(e,this.maxLength);r<o.length;r++){var a=o[r],s=a.from,l=a.to;gz(e.state.doc,this.regexp,s,l,(function(n,r){return t.addMatch(r,e,n,i)}))}return n.finish()},e.prototype.updateDeco=function(e,t){var n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((function(t,r,o,a){a>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(a,i))})),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t},e.prototype.updateRange=function(e,t,n,i){for(var r=this,o=function(o){var s=Math.max(o.from,n),l=Math.min(o.to,i);if(l>s){var c=e.state.doc.lineAt(s),u=c.to<l?e.state.doc.lineAt(l):c,h=Math.max(o.from,c.from),p=Math.min(o.to,u.to);if(a.boundary){for(;s>c.from;s--)if(a.boundary.test(c.text[s-1-c.from])){h=s;break}for(;l<u.to;l++)if(a.boundary.test(u.text[l-u.from])){p=l;break}}var d=[],f=void 0,g=function(e,t,n){return d.push(n.range(e,t))};if(c==u)for(a.regexp.lastIndex=h-c.from;(f=a.regexp.exec(c.text))&&f.index<p-c.from;)a.addMatch(f,e,f.index+c.from,g);else gz(e.state.doc,a.regexp,h,p,(function(t,n){return r.addMatch(n,e,t,g)}));t=t.update({filterFrom:h,filterTo:p,filter:function(e,t){return e<h||t>p},add:d})}},a=this,s=0,l=e.visibleRanges;s<l.length;s++){o(l[s])}return t}}();var mz={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};(function(e){function t(t,n){var i=e.call(this)||this;return i.options=t,i.code=n,i}f(t,e),t.prototype.eq=function(e){return e.code==this.code},t.prototype.toDOM=function(e){var t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(mz[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;var r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r},t.prototype.ignoreEvent=function(){return!1}})(dR),function(e){function t(t){var n=e.call(this)||this;return n.width=t,n}f(t,e),t.prototype.eq=function(e){return e.width==this.width},t.prototype.toDOM=function(){var e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e},t.prototype.ignoreEvent=function(){return!1}}(dR),function(){function e(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}e.prototype.update=function(e){var t=e.view,n=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;n!=this.height&&(this.height=n,this.attrs={style:"padding-bottom: ".concat(n,"px")})}}();var vz=gR.line({class:"cm-activeLine"});(function(){function e(e){this.decorations=this.getDeco(e)}e.prototype.update=function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))},e.prototype.getDeco=function(e){for(var t=-1,n=[],i=0,r=e.state.selection.ranges;i<r.length;i++){var o=r[i],a=e.lineBlockAt(o.head);a.from>t&&(n.push(vz.range(a.from)),t=a.from)}return gR.set(n)}})(),function(e){function t(t){var n=e.call(this)||this;return n.content=t,n}f(t,e),t.prototype.toDOM=function(){var e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e},t.prototype.ignoreEvent=function(){return!1}}(dR);var yz="-10000px",bz=function(){function e(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((function(e){return e})),this.tooltipViews=this.tooltips.map(n)}return e.prototype.update=function(e){var t,n=e.state.facet(this.facet),i=n.filter((function(e){return e}));if(n===this.input){for(var r=0,o=this.tooltipViews;r<o.length;r++){(g=o[r]).update&&g.update(e)}return!1}for(var a=[],s=0;s<i.length;s++){var l=i[s],c=-1;if(l){for(var u=0;u<this.tooltips.length;u++){var h=this.tooltips[u];h&&h.create==l.create&&(c=u)}if(c<0)a[s]=this.createTooltipView(l);else{var p=a[s]=this.tooltipViews[c];p.update&&p.update(e)}}}for(var d=0,f=this.tooltipViews;d<f.length;d++){var g=f[d];a.indexOf(g)<0&&(g.dom.remove(),null===(t=g.destroy)||void 0===t||t.call(g))}return this.input=n,this.tooltips=i,this.tooltipViews=a,!0},e}();function wz(e){var t=e.win;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}var kz=Hi.define({combine:function(e){var t,n,i;return{position:QN.ios?"absolute":(null===(t=e.find((function(e){return e.position})))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((function(e){return e.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((function(e){return e.tooltipSpace})))||void 0===i?void 0:i.tooltipSpace)||wz}}}),Cz=zR.fromClass(function(){function e(e){var t=this;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;var n=e.state.facet(kz);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new bz(e,Sz,(function(e){return t.createTooltip(e)})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>t.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&t.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}return e.prototype.createContainer=function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom},e.prototype.observeIntersection=function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){var n=t[e];this.intersectionObserver.observe(n.dom)}}},e.prototype.measureSoon=function(){var e=this;this.measureTimeout<0&&(this.measureTimeout=setTimeout((function(){e.measureTimeout=-1,e.maybeMeasure()}),50))},e.prototype.update=function(e){e.transactions.length&&(this.lastTransaction=Date.now());var t=this.manager.update(e);t&&this.observeIntersection();var n=t||e.geometryChanged,i=e.state.facet(kz);if(i.position!=this.position){this.position=i.position;for(var r=0,o=this.manager.tooltipViews;r<o.length;r++){(l=o[r]).dom.style.position=this.position}n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(var a=0,s=this.manager.tooltipViews;a<s.length;a++){var l=s[a];this.container.appendChild(l.dom)}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()},e.prototype.createTooltip=function(e){var t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){var n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=yz,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t},e.prototype.destroy=function(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(var n=0,i=this.manager.tooltipViews;n<i.length;n++){var r=i[n];r.dom.remove(),null===(e=r.destroy)||void 0===e||e.call(r)}null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)},e.prototype.readMeasure=function(){var e=this,t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((function(t,n){var i=e.manager.tooltipViews[n];return i.getCoords?i.getCoords(t.pos):e.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((function(e){return e.dom.getBoundingClientRect()})),space:this.view.state.facet(kz).tooltipSpace(this.view)}},e.prototype.writeMeasure=function(e){for(var t=e.editor,n=e.space,i=[],r=0;r<this.manager.tooltips.length;r++){var o=this.manager.tooltips[r],a=this.manager.tooltipViews[r],s=a.dom,l=e.pos[r],c=e.size[r];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1)s.style.top=yz;else{var u=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,p=c.right-c.left,d=c.bottom-c.top,f=a.offset||xz,g=this.view.textDirection==$R.LTR,m=c.width>n.right-n.left?g?n.left:n.right-c.width:g?Math.min(l.left-(u?14:0)+f.x,n.right-p):Math.max(n.left,l.left-p+(u?14:0)-f.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-f.y<n.top:l.bottom+(c.bottom-c.top)+f.y>n.bottom)&&v==n.bottom-l.bottom>l.top-n.top&&(v=!v);var y=(v?l.top-n.top:n.bottom-l.bottom)-h;if(y<d&&!1!==a.resize){if(y<this.view.defaultLineHeight){s.style.top=yz;continue}s.style.height=(d=y)+"px"}else s.style.height&&(s.style.height="");var b=v?l.top-d-h-f.y:l.bottom+h+f.y,w=m+p;if(!0!==a.overlap)for(var k=0,C=i;k<C.length;k++){var E=C[k];E.left<w&&E.right>m&&E.top<b+d&&E.bottom>b&&(b=v?E.top-d-2-h:E.bottom+h+2)}"absolute"==this.position?(s.style.top=b-e.parent.top+"px",s.style.left=m-e.parent.left+"px"):(s.style.top=b+"px",s.style.left=m+"px"),u&&(u.style.left="".concat(l.left+(g?f.x:-f.x)-(m+14-7),"px")),!0!==a.overlap&&i.push({left:m,top:b,right:w,bottom:b+d}),s.classList.toggle("cm-tooltip-above",v),s.classList.toggle("cm-tooltip-below",!v),a.positioned&&a.positioned(e.space)}}},e.prototype.maybeMeasure=function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(var e=0,t=this.manager.tooltipViews;e<t.length;e++){t[e].dom.style.top=yz}},e}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),Ez=KV.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xz={x:0,y:0},Sz=Hi.define({enables:[Cz,Ez]}),Mz=Hi.define();(function(){function e(e){var t=this;this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new bz(e,Mz,(function(e){return t.createHostedView(e)}))}e.create=function(t){return new e(t)},e.prototype.createHostedView=function(e){var t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t},e.prototype.mount=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.mount&&i.mount(e)}this.mounted=!0},e.prototype.positioned=function(e){for(var t=0,n=this.manager.tooltipViews;t<n.length;t++){var i=n[t];i.positioned&&i.positioned(e)}},e.prototype.update=function(e){this.manager.update(e)}})(),function(){function e(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}e.prototype.update=function(){var e=this;this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((function(){return e.startHover()}),20))},Object.defineProperty(e.prototype,"active",{get:function(){return this.view.state.field(this.field)},enumerable:!1,configurable:!0}),e.prototype.checkHover=function(){if(this.hoverTimeout=-1,!this.active){var e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}},e.prototype.startHover=function(){var e=this;clearTimeout(this.restartTimeout);var t=this.lastMove,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null!=n){var i=this.view.coordsAtPos(n);if(!(null==i||t.y<i.top||t.y>i.bottom||t.x<i.left-this.view.defaultCharacterWidth||t.x>i.right+this.view.defaultCharacterWidth)){var r=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((function(e){return e.from<=n&&e.to>=n})),o=r&&r.dir==$R.RTL?-1:1,a=this.source(this.view,n,t.x<i.left?-o:o);if(null==a?void 0:a.then){var s=this.pending={pos:n};a.then((function(t){e.pending==s&&(e.pending=null,t&&e.view.dispatch({effects:e.setHover.of(t)}))}),(function(t){return NR(e.view.state,t,"hover tooltip")}))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}}},e.prototype.mousemove=function(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var n=this.active;if(n&&!Tz(this.lastMove.target)||this.pending){var i=(n||this.pending).pos,r=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:i;(i==r?this.view.posAtCoords(this.lastMove)==i:function(e,t,n,i,r,o){var a=document.createRange(),s=e.domAtPos(t),l=e.domAtPos(n);a.setEnd(l.node,l.offset),a.setStart(s.node,s.offset);var c=a.getClientRects();a.detach();for(var u=0;u<c.length;u++){var h=c[u];if(Math.max(h.top-r,r-h.bottom,h.left-i,i-h.right)<=o)return!0}return!1}(this.view,i,r,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}},e.prototype.mouseleave=function(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Tz(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})},e.prototype.destroy=function(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}();function Tz(e){for(var t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function Dz(e,t){var n=e.plugin(Cz);if(!n)return null;var i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}var Az=Hi.define({combine:function(e){for(var t,n,i=0,r=e;i<r.length;i++){var o=r[i];t=t||o.topContainer,n=n||o.bottomContainer}return{topContainer:t,bottomContainer:n}}});var Lz=zR.fromClass(function(){function e(e){this.input=e.state.facet(Oz),this.specs=this.input.filter((function(e){return e})),this.panels=this.specs.map((function(t){return t(e)}));var t=e.state.facet(Az);this.top=new Pz(e,!0,t.topContainer),this.bottom=new Pz(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((function(e){return e.top}))),this.bottom.sync(this.panels.filter((function(e){return!e.top})));for(var n=0,i=this.panels;n<i.length;n++){var r=i[n];r.dom.classList.add("cm-panel"),r.mount&&r.mount()}}return e.prototype.update=function(e){var t=e.state.facet(Az);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Pz(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Pz(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=e.state.facet(Oz);if(n!=this.input){for(var i=n.filter((function(e){return e})),r=[],o=[],a=[],s=[],l=0,c=i;l<c.length;l++){var u=c[l],h=this.specs.indexOf(u),p=void 0;h<0?(p=u(e.view),s.push(p)):(p=this.panels[h]).update&&p.update(e),r.push(p),(p.top?o:a).push(p)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(a);for(var d=0,f=s;d<f.length;d++){(v=f[d]).dom.classList.add("cm-panel"),v.mount&&v.mount()}}else for(var g=0,m=this.panels;g<m.length;g++){var v;(v=m[g]).update&&v.update(e)}},e.prototype.destroy=function(){this.top.sync([]),this.bottom.sync([])},e}(),{provide:function(e){return KV.scrollMargins.of((function(t){var n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))}}),Pz=function(){function e(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return e.prototype.sync=function(e){for(var t=0,n=this.panels;t<n.length;t++){var i=n[t];i.destroy&&e.indexOf(i)<0&&i.destroy()}this.panels=e,this.syncDOM()},e.prototype.syncDOM=function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}for(var t=this.dom.firstChild,n=0,i=this.panels;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.dom){for(;t!=r.dom;)t=Iz(t);t=t.nextSibling}else this.dom.insertBefore(r.dom,t)}for(;t;)t=Iz(t)}else this.dom&&(this.dom.remove(),this.dom=void 0)},e.prototype.scrollMargin=function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)},e.prototype.syncClasses=function(){if(this.container&&this.classes!=this.view.themeClasses){for(var e=0,t=this.classes.split(" ");e<t.length;e++){(r=t[e])&&this.container.classList.remove(r)}for(var n=0,i=(this.classes=this.view.themeClasses).split(" ");n<i.length;n++){var r;(r=i[n])&&this.container.classList.add(r)}}},e}();function Iz(e){var t=e.nextSibling;return e.remove(),t}var Oz=Hi.define({enables:Lz}),Fz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.prototype.eq=function(e){return!1},t.prototype.destroy=function(e){},t}(Tr);Fz.prototype.elementClass="",Fz.prototype.toDOM=void 0,Fz.prototype.mapMode=Si.TrackBefore,Fz.prototype.startSide=Fz.prototype.endSide=-1,Fz.prototype.point=!0;var Bz=Hi.define(),Nz=Hi.define();var Rz=Hi.define({combine:function(e){return e.some((function(e){return e}))}});!function(){function e(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Nz).map((function(t){return new qz(e,t)}));for(var t=0,n=this.gutters;t<n.length;t++){var i=n[t];this.dom.appendChild(i.dom)}this.fixed=!e.state.facet(Rz),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}e.prototype.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Rz)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},e.prototype.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();for(var i=Pr.iter(this.view.state.facet(Bz),this.view.viewport.from),r=[],o=this.gutters.map((function(e){return new zz(e,t.view.viewport,-t.view.documentPadding.top)})),a=0,s=this.view.viewportLineBlocks;a<s.length;a++){var l=s[a],c=void 0;if(Array.isArray(l.type))for(var u=0,h=l.type;u<h.length;u++){var p=h[u];if(p.type==fR.Text){c=p;break}}else c=l.type==fR.Text?l:void 0;if(c){r.length&&(r=[]),Vz(i,r,l.from);for(var d=0,f=o;d<f.length;d++){f[d].line(this.view,c,r)}}}for(var g=0,m=o;g<m.length;g++){m[g].finish()}e&&this.view.scrollDOM.insertBefore(this.dom,n)},e.prototype.updateGutters=function(e){var t=e.startState.facet(Nz),n=e.state.facet(Nz),i=e.docChanged||e.heightChanged||e.viewportChanged||!Pr.eq(e.startState.facet(Bz),e.state.facet(Bz),e.view.viewport.from,e.view.viewport.to);if(t==n)for(var r=0,o=this.gutters;r<o.length;r++){o[r].update(e)&&(i=!0)}else{i=!0;for(var a=[],s=0,l=n;s<l.length;s++){var c=l[s],u=t.indexOf(c);u<0?a.push(new qz(this.view,c)):(this.gutters[u].update(e),a.push(this.gutters[u]))}for(var h=0,p=this.gutters;h<p.length;h++){(g=p[h]).dom.remove(),a.indexOf(g)<0&&g.destroy()}for(var d=0,f=a;d<f.length;d++){var g=f[d];this.dom.appendChild(g.dom)}this.gutters=a}return i},e.prototype.destroy=function(){for(var e=0,t=this.gutters;e<t.length;e++){t[e].destroy()}this.dom.remove()}}();function Hz(e){return Array.isArray(e)?e:[e]}function Vz(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var zz=function(){function e(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=Pr.iter(e.markers,t.from)}return e.prototype.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),Vz(this.cursor,this.localMarkers,t.from);var i=n.length?this.localMarkers.concat(n):this.localMarkers,r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);var o=this.gutter;if(0!=i.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var s=new Uz(e,t.height,a,i);o.elements.push(s),o.dom.appendChild(s.dom)}else o.elements[this.i].update(e,t.height,a,i);this.height=t.bottom,this.i++}},e.prototype.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),qz=function(){function e(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var n=function(n){i.dom.addEventListener(n,(function(i){var r=e.lineBlockAtHeight(i.clientY-e.documentTop);t.domEventHandlers[n](e,r,i)&&i.preventDefault()}))},i=this;for(var r in t.domEventHandlers)n(r);this.markers=Hz(t.markers(e)),t.initialSpacer&&(this.spacer=new Uz(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return e.prototype.update=function(e){var t=this.markers;if(this.markers=Hz(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var i=e.view.viewport;return!Pr.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},e.prototype.destroy=function(){for(var e=0,t=this.elements;e<t.length;e++){t[e].destroy()}},e}(),Uz=function(){function e(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}return e.prototype.update=function(e,t,n,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)},e.prototype.setMarkers=function(e,t){for(var n="cm-gutterElement",i=this.dom.firstChild,r=0,o=0;;){var a=o,s=r<t.length?t[r++]:null,l=!1;if(s){var c=s.elementClass;c&&(n+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(s)){a=u,l=!0;break}}else a=this.markers.length;for(;o<a;){var h=this.markers[o++];if(h.toDOM){h.destroy(i);var p=i.nextSibling;i.remove(),i=p}}if(!s)break;s.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(s.toDOM(e),i)),l&&o++}this.dom.className=n,this.markers=t},e.prototype.destroy=function(){this.setMarkers(null,[])},e}();!function(e){function t(t){var n=e.call(this)||this;return n.number=t,n}f(t,e),t.prototype.eq=function(e){return this.number==e.number},t.prototype.toDOM=function(){return document.createTextNode(this.number)}}(Fz);var Wz=function(){function e(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}return e.prototype.tokenBefore=function(e){for(var t=Hh(this.state).resolveInner(this.pos,-1);t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null},e.prototype.matchBefore=function(e){var t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search($z(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}},Object.defineProperty(e.prototype,"aborted",{get:function(){return null==this.abortListeners},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)},e}();function _z(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function jz(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?[/\w*$/,/\w+$/]:function(e){for(var t=Object.create(null),n=Object.create(null),i=0,r=e;i<r.length;i++){var o=r[i].label;t[o[0]]=!0;for(var a=1;a<o.length;a++)n[o[a]]=!0}var s=_z(t)+_z(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(t),i=n[0],r=n[1];return function(e){var n=e.matchBefore(r);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}function Gz(e,t){return function(n){for(var i=Hh(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(e.indexOf(i.name)>-1)return t(n);if(i.type.isTop)break}return null}}function Kz(e,t){return function(n){for(var i=Hh(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(e.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return t(n)}}var Yz=function(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i};function Xz(e){return e.selection.main.from}function $z(e,t){var n,i=e.source,r=t&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(o?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}var Zz=ur.define();function Qz(e,t,n,i){var r=e.selection.main,o=i-n;return Object.assign(Object.assign({},e.changeByRange((function(a){return a!=r&&o&&e.sliceDoc(a.from-o,a.from+i-r.from)!=e.sliceDoc(n,i)?{range:a}:{changes:{from:a.from-o,to:i==r.from?a.to:a.from+i-r.from,insert:t},range:Bi.cursor(a.from-o+t.length)}}))),{userEvent:"input.complete"})}function Jz(e,t){var n=t.completion.apply||t.completion.label,i=t.source;"string"==typeof n?e.dispatch(Object.assign(Object.assign({},Qz(e.state,n,i.from,i.to)),{annotations:Zz.of(t.completion)})):n(e,t.completion,i.from,i.to)}var eq=new WeakMap;function tq(e){if(!Array.isArray(e))return e;var t=eq.get(e);return t||eq.set(e,t=jz(e)),t}var nq=dr.define(),iq=dr.define(),rq=function(){function e(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(var t=0;t<e.length;){var n=ki(e,t),i=Ei(n);this.chars.push(n);var r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(ki(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}return e.prototype.match=function(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;var t=this,n=t.chars,i=t.folded,r=t.any,o=t.precise,a=t.byWord;if(1==n.length){var s=ki(e,0),l=Ei(s),c=l==e.length?0:-100;if(s==n[0]);else{if(s!=i[0])return null;c+=-200}return[c,0,l]}var u=e.indexOf(this.pattern);if(0==u)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];var h=n.length,p=0;if(u<0){for(var d=0,f=Math.min(e.length,200);d<f&&p<h;){(x=ki(e,d))!=n[p]&&x!=i[p]||(r[p++]=d),d+=Ei(x)}if(p<h)return null}for(var g=0,m=0,v=!1,y=0,b=-1,w=-1,k=/[a-z]/.test(e),C=!0,E=(d=0,f=Math.min(e.length,200),0);d<f&&m<h;){var x=ki(e,d);u<0&&(g<h&&x==n[g]&&(o[g++]=d),y<h&&(x==n[y]||x==i[y]?(0==y&&(b=d),w=d+1,y++):y=0));var S=void 0,M=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(S=Ci(x))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!d||1==M&&k||0==E&&0!=M)&&(n[m]==x||i[m]==x&&(v=!0)?a[m++]=d:a.length&&(C=!1)),E=M,d+=Ei(x)}return m==h&&0==a[0]&&C?this.result((v?-200:0)-100,a,e):y==h&&0==b?[-200-e.length+(w==e.length?0:-100),0,w]:u>-1?[-700-e.length,u,u+this.pattern.length]:y==h?[-900-e.length,b,w]:m==h?this.result((v?-200:0)-100-700+(C?0:-1100),a,e):2==n.length?null:this.result((r[0]?-700:0)-200-1100,r,e)},e.prototype.result=function(e,t,n){for(var i=[e-n.length],r=1,o=0,a=t;o<a.length;o++){var s=a[o],l=s+(this.astral?Ei(ki(n,s)):1);r>1&&i[r-1]==s?i[r-1]=l:(i[r++]=s,i[r++]=l)}return i},e}(),oq=Hi.define({combine:function(e){return Mr(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:function(){return""},optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:sq,compareCompletions:function(e,t){return e.label.localeCompare(t.label)},interactionDelay:75},{defaultKeymap:function(e,t){return e&&t},closeOnBlur:function(e,t){return e&&t},icons:function(e,t){return e&&t},tooltipClass:function(e,t){return function(n){return aq(e(n),t(n))}},optionClass:function(e,t){return function(n){return aq(e(n),t(n))}},addToOptions:function(e,t){return e.concat(t)}})}});function aq(e,t){return e?t?e+" "+t:e:t}function sq(e,t,n,i,r){var o,a,s=e.textDirection==$R.RTL,l=s,c=!1,u="top",h=t.left-r.left,p=r.right-t.right,d=i.right-i.left,f=i.bottom-i.top;if(l&&h<Math.min(d,p)?l=!1:!l&&p<Math.min(d,h)&&(l=!0),d<=(l?h:p))o=Math.max(r.top,Math.min(n.top,r.bottom-f))-t.top,a=Math.min(400,l?h:p);else{c=!0,a=Math.min(400,(s?t.right:r.right-t.left)-30);var g=r.bottom-t.bottom;g>=f||g>t.top?o=n.bottom-t.top:(u="bottom",o=t.bottom-n.top)}return{style:"".concat(u,": ").concat(o,"px; max-width: ").concat(a,"px"),class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":l?"left":"right")}}function lq(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){var i=Math.floor(t/n);return{from:i*n,to:(i+1)*n}}var r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}var cq=function(){function e(e,t){var n=this;this.view=e,this.stateField=t,this.info=null,this.placeInfoReq={read:function(){return n.measureInfo()},write:function(e){return n.placeInfo(e)},key:this},this.space=null,this.currentClass="";var i=e.state.field(t),r=i.open,o=r.options,a=r.selected,s=e.state.facet(oq);this.optionContent=function(e){var t=e.addToOptions.slice();return e.icons&&t.push({render:function(e){var t,n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&(t=n.classList).add.apply(t,e.type.split(/\s+/g).map((function(e){return"cm-completionIcon-"+e}))),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render:function(e,t,n){var i=document.createElement("span");i.className="cm-completionLabel";for(var r=e.label,o=0,a=1;a<n.length;){var s=n[a++],l=n[a++];s>o&&i.appendChild(document.createTextNode(r.slice(o,s)));var c=i.appendChild(document.createElement("span"));c.appendChild(document.createTextNode(r.slice(s,l))),c.className="cm-completionMatchedText",o=l}return o<r.length&&i.appendChild(document.createTextNode(r.slice(o))),i},position:50},{render:function(e){if(!e.detail)return null;var t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((function(e,t){return e.position-t.position})).map((function(e){return e.render}))}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=lq(o.length,a,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(function(t){for(var i=t.target,r=void 0;i&&i!=n.dom;i=i.parentNode)if("LI"==i.nodeName&&(r=/-(\d+)$/.exec(i.id))&&+r[1]<o.length)return Jz(e,o[+r[1]]),void t.preventDefault()})),this.dom.addEventListener("focusout",(function(t){var i=e.state.field(n.stateField,!1);i&&i.tooltip&&e.state.facet(oq).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:iq.of(null)})})),this.list=this.dom.appendChild(this.createListBox(o,i.id,this.range)),this.list.addEventListener("scroll",(function(){n.info&&n.view.requestMeasure(n.placeInfoReq)}))}return e.prototype.mount=function(){this.updateSel()},e.prototype.update=function(e){var t,n,i,r=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=o&&(this.updateSel(),(null===(t=r.open)||void 0===t?void 0:t.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(i=r.open)||void 0===i?void 0:i.disabled)))},e.prototype.updateTooltipClass=function(e){var t=this.tooltipClass(e);if(t!=this.currentClass){for(var n=0,i=this.currentClass.split(" ");n<i.length;n++){(a=i[n])&&this.dom.classList.remove(a)}for(var r=0,o=t.split(" ");r<o.length;r++){var a;(a=o[r])&&this.dom.classList.add(a)}this.currentClass=t}},e.prototype.positioned=function(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)},e.prototype.updateSel=function(){var e=this,t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=lq(n.options.length,n.selected,this.view.state.facet(oq).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",(function(){e.info&&e.view.requestMeasure(e.placeInfoReq)}))),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);var i=n.options[n.selected].completion,r=i.info;if(!r)return;var o="string"==typeof r?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then((function(n){n&&e.view.state.field(e.stateField,!1)==t&&e.addInfoPane(n)})).catch((function(t){return NR(e.view.state,t,"completion info")})):this.addInfoPane(o)}},e.prototype.addInfoPane=function(e){var t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)},e.prototype.updateSelectedOption=function(e){for(var t=null,n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<n.top?e.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(e.scrollTop+=i.bottom-n.bottom)}(this.list,t),t},e.prototype.measureInfo=function(){var e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){var o=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(oq).positionInfo(this.view,t,i,n,r)},e.prototype.placeInfo=function(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")},e.prototype.createListBox=function(e,t,n){var i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var r=null,o=n.from;o<n.to;o++){var a=e[o],s=a.completion,l=a.match,c=s.section;if(c){var u="string"==typeof c?c:c.name;if(u!=r&&(o>n.from||0==n.from))if(r=u,"string"!=typeof c&&c.header)i.appendChild(c.header(c));else i.appendChild(document.createElement("completion-section")).textContent=u}var h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");var p=this.optionClass(s);p&&(h.className=p);for(var d=0,f=this.optionContent;d<f.length;d++){var g=(0,f[d])(s,this.view.state,l);g&&h.appendChild(g)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i},e}();function uq(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}var hq=function(){function e(e,t,n,i,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}return e.prototype.setSelected=function(t,n){return t==this.selected||t>=this.options.length?this:new e(this.options,fq(n,t),this.tooltip,this.timestamp,t,this.disabled)},e.build=function(t,n,i,r,o){var a=function(e,t){for(var n=[],i=null,r=function(e){n.push(e);var t=e.completion.section;if(t){i||(i=[]);var r="string"==typeof t?t:t.name;i.some((function(e){return e.name==r}))||i.push("string"==typeof t?{name:r}:t)}},o=0,a=e;o<a.length;o++){var s=a[o];if(s.hasResult())if(!1===s.result.filter)for(var l=s.result.getMatch,c=0,u=s.result.options;c<u.length;c++){var h=u[c],p=[1e9-n.length];if(l)for(var d=0,f=l(h);d<f.length;d++){var g=f[d];p.push(g)}r(new Yz(h,s,p,p[0]))}else for(var m=new rq(t.sliceDoc(s.from,s.to)),v=(p=void 0,0),y=s.result.options;v<y.length;v++)h=y[v],(p=m.match(h.label))&&r(new Yz(h,s,p,p[0]+(h.boost||0)))}if(i){for(var b=Object.create(null),w=0,k=0,C=i.sort((function(e,t){var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)}));k<C.length;k++)w-=1e5,b[C[k].name]=w;for(var E=0,x=n;E<x.length;E++){var S=(h=x[E]).completion.section;S&&(h.score+=b["string"==typeof S?S:S.name])}}for(var M=[],T=null,D=t.facet(oq).compareCompletions,A=0,L=n.sort((function(e,t){return t.score-e.score||D(e.completion,t.completion)}));A<L.length;A++){var P=L[A];!T||T.label!=P.completion.label||T.detail!=P.completion.detail||null!=T.type&&null!=P.completion.type&&T.type!=P.completion.type||T.apply!=P.completion.apply?M.push(P):uq(P.completion)>uq(T)&&(M[M.length-1]=P),T=P.completion}return M}(t,n);if(!a.length)return r&&t.some((function(e){return 1==e.state}))?new e(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;var s,l=n.facet(oq).selectOnOpen?0:-1;if(r&&r.selected!=l&&-1!=r.selected)for(var c=r.options[r.selected].completion,u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}return new e(a,fq(i,l),{pos:t.reduce((function(e,t){return t.hasResult()?Math.min(e,t.from):e}),1e8),create:(s=kq,function(e){return new cq(e,s)}),above:o.aboveCursor},r?r.timestamp:Date.now(),l,!1)},e.prototype.map=function(t){return new e(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)},e}(),pq=function(){function e(e,t,n){this.active=e,this.id=t,this.open=n}return e.start=function(){return new e(gq,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)},e.prototype.update=function(t){var n=this,i=t.state,r=i.facet(oq),o=(r.override||i.languageDataAt("autocomplete",Xz(i)).map(tq)).map((function(e){return(n.active.find((function(t){return t.source==e}))||new vq(e,n.active.some((function(e){return 0!=e.state}))?1:0)).update(t,r)}));o.length==this.active.length&&o.every((function(e,t){return e==n.active[t]}))&&(o=this.active);var a=this.open;a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some((function(e){return e.hasResult()&&t.changes.touchesRange(e.from,e.to)}))||!function(e,t){if(e==t)return!0;for(var n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;var r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}}(o,this.active)?a=hq.build(o,i,this.id,a,r):a&&a.disabled&&!o.some((function(e){return 1==e.state}))&&(a=null),!a&&o.every((function(e){return 1!=e.state}))&&o.some((function(e){return e.hasResult()}))&&(o=o.map((function(e){return e.hasResult()?new vq(e.source,0):e})));for(var s=0,l=t.effects;s<l.length;s++){var c=l[s];c.is(wq)&&(a=a&&a.setSelected(c.value,this.id))}return o==this.active&&a==this.open?this:new e(o,this.id,a)},Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.open?this.open.tooltip:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){return this.open?this.open.attrs:dq},enumerable:!1,configurable:!0}),e}();var dq={"aria-autocomplete":"list"};function fq(e,t){var n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}var gq=[];function mq(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}var vq=function(){function e(e,t,n){void 0===n&&(n=-1),this.source=e,this.state=t,this.explicitPos=n}return e.prototype.hasResult=function(){return!1},e.prototype.update=function(t,n){var i=mq(t),r=this;i?r=r.handleUserEvent(t,i,n):t.docChanged?r=r.handleChange(t):t.selection&&0!=r.state&&(r=new e(r.source,0));for(var o=0,a=t.effects;o<a.length;o++){var s=a[o];if(s.is(nq))r=new e(r.source,1,s.value?Xz(t.state):-1);else if(s.is(iq))r=new e(r.source,0);else if(s.is(bq))for(var l=0,c=s.value;l<c.length;l++){var u=c[l];u.source==r.source&&(r=u)}}return r},e.prototype.handleUserEvent=function(t,n,i){return"delete"!=n&&i.activateOnTyping?new e(this.source,1):this.map(t.changes)},e.prototype.handleChange=function(t){return t.changes.touchesRange(Xz(t.startState))?new e(this.source,0):this.map(t.changes)},e.prototype.map=function(t){return t.empty||this.explicitPos<0?this:new e(this.source,this.state,t.mapPos(this.explicitPos))},e}(),yq=function(e){function t(t,n,i,r,o){var a=e.call(this,t,2,n)||this;return a.result=i,a.from=r,a.to=o,a}return f(t,e),t.prototype.hasResult=function(){return!0},t.prototype.handleUserEvent=function(e,n,i){var r,o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=Xz(e.state);if((this.explicitPos<0?s<=o:s<this.from)||s>a||"delete"==n&&Xz(e.startState)==this.from)return new vq(this.source,"input"==n&&i.activateOnTyping?1:0);var l,c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,i){if(!e)return!1;var r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):$z(e,!0).test(r)}(this.result.validFor,e.state,o,a)?new t(this.source,c,this.result,o,a):this.result.update&&(l=this.result.update(this.result,o,a,new Wz(e.state,s,c>=0)))?new t(this.source,c,l,l.from,null!==(r=l.to)&&void 0!==r?r:Xz(e.state)):new vq(this.source,1,c)},t.prototype.handleChange=function(e){return e.changes.touchesRange(this.from,this.to)?new vq(this.source,0):this.map(e.changes)},t.prototype.map=function(e){return e.empty?this:new t(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))},t}(vq);var bq=dr.define({map:function(e,t){return e.map((function(e){return e.map(t)}))}}),wq=dr.define(),kq=_i.define({create:function(){return pq.start()},update:function(e,t){return e.update(t)},provide:function(e){return[Sz.from(e,(function(e){return e.tooltip})),KV.contentAttributes.from(e,(function(e){return e.attrs}))]}});function Cq(e,t){return void 0===t&&(t="option"),function(n){var i=n.state.field(kq,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(oq).interactionDelay)return!1;var r,o=1;"page"==t&&(r=Dz(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));var a=i.open.options.length,s=i.open.selected>-1?i.open.selected+o*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:wq.of(s)}),!0}}var Eq=function(e){var t=e.state.field(kq,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(oq).interactionDelay)&&(t.open.disabled||Jz(e,t.open.options[t.open.selected]),!0)},xq=function(e){return!!e.state.field(kq,!1)&&(e.dispatch({effects:nq.of(!0)}),!0)},Sq=function(e){var t=e.state.field(kq,!1);return!(!t||!t.active.some((function(e){return 0!=e.state})))&&(e.dispatch({effects:iq.of(null)}),!0)},Mq=function(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0},Tq=zR.fromClass(function(){function e(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(var t=0,n=e.state.field(kq).active;t<n.length;t++){var i=n[t];1==i.state&&this.startQuery(i)}}return e.prototype.update=function(e){var t,n=this,i=e.state.field(kq);if(e.selectionSet||e.docChanged||e.startState.field(kq)!=i){for(var r=e.transactions.some((function(e){return(e.selection||e.docChanged)&&!mq(e)})),o=0;o<this.running.length;o++){var a=this.running[o];if(r||a.updates.length+e.transactions.length>50&&Date.now()-a.time>1e3){for(var s=0,l=a.context.abortListeners;s<l.length;s++){var c=l[s];try{c()}catch(e){NR(this.view.state,e)}}a.context.abortListeners=null,this.running.splice(o--,1)}else(t=a.updates).push.apply(t,e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=i.active.some((function(e){return 1==e.state&&!n.running.some((function(t){return t.active.source==e.source}))}))?setTimeout((function(){return n.startUpdate()}),50):-1,0!=this.composing)for(var u=0,h=e.transactions;u<h.length;u++){var p=h[u];"input"==mq(p)?this.composing=2:2==this.composing&&p.selection&&(this.composing=3)}}},e.prototype.startUpdate=function(){this.debounceUpdate=-1;for(var e=this.view.state.field(kq),t=function(e){1!=e.state||n.running.some((function(t){return t.active.source==e.source}))||n.startQuery(e)},n=this,i=0,r=e.active;i<r.length;i++){t(r[i])}},e.prototype.startQuery=function(e){var t=this,n=this.view.state,i=Xz(n),r=new Wz(n,i,e.explicitPos==i),o=new Mq(e,r);this.running.push(o),Promise.resolve(e.source(r)).then((function(e){o.context.aborted||(o.done=e||null,t.scheduleAccept())}),(function(e){t.view.dispatch({effects:iq.of(null)}),NR(t.view.state,e)}))},e.prototype.scheduleAccept=function(){var e=this;this.running.every((function(e){return void 0!==e.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return e.accept()}),50))},e.prototype.accept=function(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var t,n=[],i=this.view.state.facet(oq),r=function(r){var a=o.running[r];if(void 0===a.done)return t=r,"continue";if(o.running.splice(r--,1),a.done){for(var s=new yq(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:Xz(a.updates.length?a.updates[0].startState:o.view.state)),l=0,c=a.updates;l<c.length;l++){var u=c[l];s=s.update(u,i)}if(s.hasResult())return n.push(s),t=r,"continue"}var h=o.view.state.field(kq).active.find((function(e){return e.source==a.active.source}));if(h&&1==h.state)if(null==a.done){s=new vq(a.active.source,0);for(var p=0,d=a.updates;p<d.length;p++){u=d[p];s=s.update(u,i)}1!=s.state&&n.push(s)}else o.startQuery(h);t=r},o=this,a=0;a<this.running.length;a++)r(a),a=t;n.length&&this.view.dispatch({effects:bq.of(n)})},e}(),{eventHandlers:{blur:function(e){var t=this.view.state.field(kq,!1);if(t&&t.tooltip&&this.view.state.facet(oq).closeOnBlur){var n=t.open&&Dz(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||this.view.dispatch({effects:iq.of(null)})}},compositionstart:function(){this.composing=1},compositionend:function(){var e=this;3==this.composing&&setTimeout((function(){return e.view.dispatch({effects:nq.of(!1)})}),20),this.composing=0}}}),Dq=KV.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Aq=function(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i},Lq=function(){function e(e,t,n){this.field=e,this.from=t,this.to=n}return e.prototype.map=function(t){var n=t.mapPos(this.from,-1,Si.TrackDel),i=t.mapPos(this.to,1,Si.TrackDel);return null==n||null==i?null:new e(this.field,n,i)},e}(),Pq=function(){function e(e,t){this.lines=e,this.fieldPositions=t}return e.prototype.instantiate=function(e,t){for(var n=[],i=[t],r=e.doc.lineAt(t),o=/^\s*/.exec(r.text)[0],a=0,s=this.lines;a<s.length;a++){var l=s[a];if(n.length){for(var c=o,u=/^\t*/.exec(l)[0].length,h=0;h<u;h++)c+=e.facet(tp);i.push(t+c.length-u),l=c+l.slice(u)}n.push(l),t+=l.length+1}return{text:n,ranges:this.fieldPositions.map((function(e){return new Lq(e.field,i[e.line]+e.from,i[e.line]+e.to)}))}},e.parse=function(t){for(var n,i=[],r=[],o=[],a=0,s=t.split(/\r\n?|\n/);a<s.length;a++){for(var l=s[a];n=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(l);){for(var c=n[1]?+n[1]:null,u=n[2]||n[3]||"",h=-1,p=0;p<i.length;p++)(null!=c?i[p].seq==c:u&&i[p].name==u)&&(h=p);if(h<0){for(p=0;p<i.length&&(null==c||null!=i[p].seq&&i[p].seq<c);)p++;i.splice(p,0,{seq:c,name:u}),h=p;for(var d=0,f=o;d<f.length;d++){(y=f[d]).field>=h&&y.field++}}o.push(new Aq(h,r.length,n.index,n.index+u.length)),l=l.slice(0,n.index)+u+l.slice(n.index+n[0].length)}for(var g=void 0;g=/\\([{}])/.exec(l);){l=l.slice(0,g.index)+g[1]+l.slice(g.index+g[0].length);for(var m=0,v=o;m<v.length;m++){var y;(y=v[m]).line==r.length&&y.from>g.index&&(y.from--,y.to--)}}r.push(l)}return new e(r,o)},e}(),Iq=gR.widget({widget:new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.prototype.ignoreEvent=function(){return!1},t}(dR))}),Oq=gR.mark({class:"cm-snippetField"}),Fq=function(){function e(e,t){this.ranges=e,this.active=t,this.deco=gR.set(e.map((function(e){return(e.from==e.to?Iq:Oq).range(e.from,e.to)})))}return e.prototype.map=function(t){for(var n=[],i=0,r=this.ranges;i<r.length;i++){var o=r[i].map(t);if(!o)return null;n.push(o)}return new e(n,this.active)},e.prototype.selectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field==t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),Bq=dr.define({map:function(e,t){return e&&e.map(t)}}),Nq=dr.define(),Rq=_i.define({create:function(){return null},update:function(e,t){for(var n=0,i=t.effects;n<i.length;n++){var r=i[n];if(r.is(Bq))return r.value;if(r.is(Nq)&&e)return new Fq(e.ranges,r.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:function(e){return KV.decorations.from(e,(function(e){return e?e.deco:gR.none}))}});function Hq(e,t){return Bi.create(e.filter((function(e){return e.field==t})).map((function(e){return Bi.range(e.from,e.to)})))}function Vq(e){var t=Pq.parse(e);return function(e,n,i,r){var o=t.instantiate(e.state,i),a=o.text,s=o.ranges,l={changes:{from:i,to:r,insert:ii.of(a)},scrollIntoView:!0,annotations:Zz.of(n)};if(s.length&&(l.selection=Hq(s,0)),s.length>1){var c=new Fq(s,0),u=l.effects=[Bq.of(c)];void 0===e.state.field(Rq,!1)&&u.push(dr.appendConfig.of([Rq,Gq,Yq,Dq]))}e.dispatch(e.state.update(l))}}function zq(e){return function(t){var n=t.state,i=t.dispatch,r=n.field(Rq,!1);if(!r||e<0&&0==r.active)return!1;var o=r.active+e,a=e>0&&!r.ranges.some((function(t){return t.field==o+e}));return i(n.update({selection:Hq(r.ranges,o),effects:Bq.of(a?null:new Fq(r.ranges,o))})),!0}}var qq=function(e){var t=e.state,n=e.dispatch;return!!t.field(Rq,!1)&&(n(t.update({effects:Bq.of(null)})),!0)},Uq=zq(1),Wq=zq(-1),_q=[{key:"Tab",run:Uq,shift:Wq},{key:"Escape",run:qq}],jq=Hi.define({combine:function(e){return e.length?e[0]:_q}}),Gq=$i.highest(tz.compute([jq],(function(e){return e.facet(jq)})));function Kq(e,t){return Object.assign(Object.assign({},t),{apply:Vq(e)})}var Yq=KV.domEventHandlers({mousedown:function(e,t){var n,i=t.state.field(Rq,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var r=i.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!r||r.field==i.active)&&(t.dispatch({selection:Hq(i.ranges,r.field),effects:Bq.of(i.ranges.some((function(e){return e.field>r.field}))?new Fq(i.ranges,r.field):null)}),!0)}});function Xq(e,t){return new RegExp(t(e.source),e.unicode?"u":"")}var $q=Object.create(null);function Zq(e,t,n,i,r){for(var o=e.iterLines(),a=0;!o.next().done;){var s=o.value,l=void 0;for(t.lastIndex=0;l=t.exec(s);)if(!i[l[0]]&&a+l.index!=r&&(n.push({type:"text",label:l[0]}),i[l[0]]=!0,n.length>=2e3))return;a+=s.length+1}}function Qq(e,t,n,i,r){var o=e.length>=1e3,a=o&&t.get(e);if(a)return a;var s=[],l=Object.create(null);if(e.children)for(var c=0,u=0,h=e.children;u<h.length;u++){var p=h[u];if(p.length>=1e3)for(var d=0,f=Qq(p,t,n,i-c,r-c);d<f.length;d++){var g=f[d];l[g.label]||(l[g.label]=!0,s.push(g))}else Zq(p,n,s,l,r-c);c+=p.length+1}else Zq(e,n,s,l,r);return o&&s.length<2e3&&t.set(e,s),s}var Jq=function(e){var t=e.state.languageDataAt("wordChars",e.pos).join(""),n=function(e){var t=e.replace(/[\\[.+*?(){|^$]/g,"\\$&");try{return new RegExp("[\\p{Alphabetic}\\p{Number}_".concat(t,"]+"),"ug")}catch(e){return new RegExp("[w".concat(t,"]"),"g")}}(t),i=e.matchBefore(Xq(n,(function(e){return e+"$"})));if(!i&&!e.explicit)return null;var r=i?i.from:e.pos;return{from:r,options:Qq(e.state.doc,function(e){return $q[e]||($q[e]=new WeakMap)}(t),n,5e4,r),validFor:Xq(n,(function(e){return"^"+e}))}},eU={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},tU=dr.define({map:function(e,t){var n=t.mapPos(e,-1,Si.TrackAfter);return null==n?void 0:n}}),nU=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t}(Tr));nU.startSide=1,nU.endSide=-1;var iU=_i.define({create:function(){return Pr.empty},update:function(e,t){if(t.selection){var n=t.state.doc.lineAt(t.selection.main.head).from,i=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(i,-1)&&(e=Pr.empty)}e=e.map(t.changes);for(var r=0,o=t.effects;r<o.length;r++){var a=o[r];a.is(tU)&&(e=e.update({add:[nU.range(a.value,a.value+1)]}))}return e}});function rU(){return[cU,iU]}var oU="()[]{}<>";function aU(e){for(var t=0;t<oU.length;t+=2)if(oU.charCodeAt(t)==e)return oU.charAt(t+1);return Ci(e<128?e:e+1)}function sU(e,t){return e.languageDataAt("closeBrackets",t)[0]||eU}var lU="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),cU=KV.inputHandler.of((function(e,t,n,i){if((lU?e.composing:e.compositionStarted)||e.state.readOnly)return!1;var r=e.state.selection.main;if(i.length>2||2==i.length&&1==Ei(ki(i,0))||t!=r.from||n!=r.to)return!1;var o=pU(e.state,i);return!!o&&(e.dispatch(o),!0)})),uU=function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var i=sU(t,t.selection.main.head).brackets||eU.brackets,r=null,o=t.changeByRange((function(e){if(e.empty)for(var n=function(e,t){var n=e.sliceString(t-2,t);return Ei(ki(n,0))==n.length?n:n.slice(1)}(t.doc,e.head),o=0,a=i;o<a.length;o++){var s=a[o];if(s==n&&fU(t.doc,e.head)==aU(ki(s,0)))return{changes:{from:e.head-s.length,to:e.head+s.length},range:Bi.cursor(e.head-s.length)}}return{range:r=e}}));return r||n(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},hU=[{key:"Backspace",run:uU}];function pU(e,t){for(var n=sU(e,e.selection.main.head),i=n.brackets||eU.brackets,r=0,o=i;r<o.length;r++){var a=o[r],s=aU(ki(a,0));if(t==a)return s==a?vU(e,a,i.indexOf(a+a+a)>-1,n):gU(e,a,s,n.before||eU.before);if(t==s&&dU(e,e.selection.main.from))return mU(e,a,s)}return null}function dU(e,t){var n=!1;return e.field(iU).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n}function fU(e,t){var n=e.sliceString(t,t+2);return n.slice(0,Ei(ki(n,0)))}function gU(e,t,n,i){var r=null,o=e.changeByRange((function(o){if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:tU.of(o.to+t.length),range:Bi.range(o.anchor+t.length,o.head+t.length)};var a=fU(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:tU.of(o.head+t.length),range:Bi.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function mU(e,t,n){var i=null,r=e.changeByRange((function(t){return t.empty&&fU(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:Bi.cursor(t.head+n.length)}:i={range:t}}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function vU(e,t,n,i){var r=i.stringPrefixes||eU.stringPrefixes,o=null,a=e.changeByRange((function(i){if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:tU.of(i.to+t.length),range:Bi.range(i.anchor+t.length,i.head+t.length)};var a,s=i.head,l=fU(e.doc,s);if(l==t){if(yU(e,s))return{changes:{insert:t+t,from:s},effects:tU.of(s+t.length),range:Bi.cursor(s+t.length)};if(dU(e,s)){var c=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+c.length,insert:c},range:Bi.cursor(s+c.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(a=bU(e,s-2*t.length,r))>-1&&yU(e,a))return{changes:{insert:t+t+t+t,from:s},effects:tU.of(s+t.length),range:Bi.cursor(s+t.length)};if(e.charCategorizer(s)(l)!=Cr.Word&&bU(e,s,r)>-1&&!function(e,t,n,i){for(var r=Hh(e).resolveInner(t,-1),o=i.reduce((function(e,t){return Math.max(e,t.length)}),0),a=0;a<5;a++){var s=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+o)),l=s.indexOf(n);if(!l||l>-1&&i.indexOf(s.slice(0,l))>-1){for(var c=r.firstChild;c&&c.from==r.from&&c.to-c.from>n.length+l;){if(e.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}var u=r.to==t&&r.parent;if(!u)break;r=u}return!1}(e,s,t,r))return{changes:{insert:t+t,from:s},effects:tU.of(s+t.length),range:Bi.cursor(s+t.length)}}return{range:o=i}}));return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function yU(e,t){var n=Hh(e).resolveInner(t+1);return n.parent&&n.from==t}function bU(e,t,n){var i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=Cr.Word)return t;for(var r=0,o=n;r<o.length;r++){var a=o[r],s=t-a.length;if(e.sliceDoc(s,t)==a&&i(e.sliceDoc(s-1,s))!=Cr.Word)return s}return-1}function wU(e){return void 0===e&&(e={}),[kq,oq.of(e),Tq,CU,Dq]}var kU=[{key:"Ctrl-Space",run:xq},{key:"Escape",run:Sq},{key:"ArrowDown",run:Cq(!0)},{key:"ArrowUp",run:Cq(!1)},{key:"PageDown",run:Cq(!0,"page")},{key:"PageUp",run:Cq(!1,"page")},{key:"Enter",run:Eq}],CU=$i.highest(tz.computeN([oq],(function(e){return e.facet(oq).defaultKeymap?[kU]:[]})));function EU(e){var t=e.field(kq,!1);return t&&t.active.some((function(e){return 1==e.state}))?"pending":t&&t.active.some((function(e){return 0!=e.state}))?"active":null}var xU=new WeakMap;function SU(e){var t,n=null===(t=e.field(kq,!1))||void 0===t?void 0:t.open;if(!n||n.disabled)return[];var i=xU.get(n.options);return i||xU.set(n.options,i=n.options.map((function(e){return e.completion}))),i}function MU(e){var t,n=null===(t=e.field(kq,!1))||void 0===t?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.options[n.selected].completion:null}function TU(e){var t,n=null===(t=e.field(kq,!1))||void 0===t?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.selected:null}function DU(e){return wq.of(e)}var AU=function(e,t,n,i){this.origin=e,this.changes=t,this.effects=n,this.clientID=i},LU=function(e,t){this.version=e,this.unconfirmed=t},PU=Hi.define({combine:function(e){var t=Mr(e,{startVersion:0,clientID:null,sharedEffects:function(){return[]}});return null==t.clientID&&(t.clientID=e.length&&e[0].generatedID||""),t}}),IU=ur.define(),OU=_i.define({create:function(e){return new LU(e.facet(PU).startVersion,[])},update:function(e,t){var n=t.annotation(IU);if(n)return n;var i=t.startState.facet(PU),r=i.sharedEffects,o=i.clientID,a=r(t);return a.length||!t.changes.empty?new LU(e.version,e.unconfirmed.concat(new AU(t,t.changes,a,o))):e}});function FU(e){return void 0===e&&(e={}),[OU,PU.of(Object.assign({generatedID:Math.floor(1e9*Math.random()).toString(36)},e))]}function BU(e,t){var n=e.field(OU),i=n.version,r=n.unconfirmed,o=e.facet(PU).clientID;i+=t.length;for(var a=0;a<t.length&&t[a].clientID==o;)a++;if(a&&(r=r.slice(a),t=t.slice(a)),!t.length)return e.update({annotations:[IU.of(new LU(i,r))]});for(var s=t[0].changes,l=t[0].effects||[],c=1;c<t.length;c++){var u=t[c];l=dr.mapEffects(l,u.changes),u.effects&&(l=l.concat(u.effects)),s=s.compose(u.changes)}return r.length&&(r=r.map((function(e){var t=e.changes.map(s);return s=s.map(e.changes,!0),new AU(e.origin,t,dr.mapEffects(e.effects,s),o)})),l=dr.mapEffects(l,r.reduce((function(e,t){return e.compose(t.changes)}),Ti.empty(r[0].changes.length)))),e.update({changes:s,effects:l,annotations:[fr.addToHistory.of(!1),fr.remote.of(!0),IU.of(new LU(i,r))],filter:!1})}function NU(e){return e.field(OU).unconfirmed}function RU(e){return e.field(OU).version}function HU(e){return e.facet(PU).clientID}var VU=function(e,t,n){this.from=e,this.to=t,this.diagnostic=n},zU=function(){function e(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}return e.init=function(t,n,i){var r=t,o=i.facet(rW).markerFilter;o&&(r=o(r));var a=ca.set(r.map((function(e){return e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from?ca.widget({widget:new cW(e),diagnostic:e}).range(e.from):ca.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to)})),!0);return new e(a,n,qU(a))},e}();function qU(e,t,n){void 0===t&&(t=null),void 0===n&&(n=0);var i=null;return e.between(n,1e9,(function(e,n,r){var o=r.spec;if(!t||o.diagnostic==t)return i=new VU(e,n,o.diagnostic),!1})),i}function UU(e,t){return!(!e.effects.some((function(e){return e.is(jU)}))&&!e.changes.touchesRange(t.pos))}function WU(e,t){return e.field(YU,!1)?t:t.concat(dr.appendConfig.of(CW))}function _U(e,t){return{effects:WU(e,[jU.of(t)])}}var jU=dr.define(),GU=dr.define(),KU=dr.define(),YU=_i.define({create:function(){return new zU(ca.none,null,null)},update:function(e,t){if(t.docChanged){var n=e.diagnostics.map(t.changes),i=null;if(e.selected){var r=t.changes.mapPos(e.selected.from,1);i=qU(n,e.selected.diagnostic,r)||qU(n,null,r)}e=new zU(n,e.panel,i)}for(var o=0,a=t.effects;o<a.length;o++){var s=a[o];s.is(jU)?e=zU.init(s.value,e.panel,t.state):s.is(GU)?e=new zU(e.diagnostics,s.value?hW.open:null,e.selected):s.is(KU)&&(e=new zU(e.diagnostics,e.panel,s.value))}return e},provide:function(e){return[xu.from(e,(function(e){return e.panel})),jl.decorations.from(e,(function(e){return e.diagnostics}))]}});function XU(e){var t=e.field(YU,!1);return t?t.diagnostics.size:0}var $U=ca.mark({class:"cm-lintRange cm-lintRange-active"});function ZU(e,t,n){var i=e.state.field(YU).diagnostics,r=[],o=2e8,a=0;i.between(t-(n<0?1:0),t+(n>0?1:0),(function(e,i,s){var l=s.spec;t>=e&&t<=i&&(e==i||(t>e||n>0)&&(t<i||n<0))&&(r.push(l.diagnostic),o=Math.min(e,o),a=Math.max(i,a))}));var s=e.state.facet(rW).tooltipFilter;return s&&(r=s(r)),r.length?{pos:o,end:a,above:e.state.doc.lineAt(o).to<a,create:function(){return{dom:QU(e,r)}}}:null}function QU(e,t){return vv("ul",{class:"cm-tooltip-lint"},t.map((function(t){return lW(e,t,!1)})))}var JU=function(e){var t=e.state.field(YU,!1);t&&t.panel||e.dispatch({effects:WU(e.state,[GU.of(!0)])});var n=wu(e,hW.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},eW=function(e){var t=e.state.field(YU,!1);return!(!t||!t.panel)&&(e.dispatch({effects:GU.of(!1)}),!0)},tW=function(e){var t=e.state.field(YU,!1);if(!t)return!1;var n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return!(!i.value&&(!(i=t.diagnostics.iter(0)).value||i.from==n.from&&i.to==n.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},nW=[{key:"Mod-Shift-m",run:JU,preventDefault:!0},{key:"F8",run:tW}],iW=Ba.fromClass(function(){function e(e){this.view=e,this.timeout=-1,this.set=!0;var t=e.state.facet(rW).delay;this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}return e.prototype.run=function(){var e=this,t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;var n=this.view.state,i=n.facet(rW).sources;Promise.all(i.map((function(t){return Promise.resolve(t(e.view))}))).then((function(t){var i=t.reduce((function(e,t){return e.concat(t)}));e.view.state.doc==n.doc&&e.view.dispatch(_U(e.view.state,i))}),(function(t){Pa(e.view.state,t)}))}},e.prototype.update=function(e){var t=e.state.facet(rW);(e.docChanged||t!=e.startState.facet(rW)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))},e.prototype.force=function(){this.set&&(this.lintTime=Date.now(),this.run())},e.prototype.destroy=function(){clearTimeout(this.timeout)},e}()),rW=Hi.define({combine:function(e){return Object.assign({sources:e.map((function(e){return e.source}))},Mr(e.map((function(e){return e.config})),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:function(e,t){return e?t?function(n){return e(n)||t(n)}:e:t}}))}});function oW(e,t){return void 0===t&&(t={}),[rW.of({source:e,config:t}),iW,CW]}function aW(e){var t=e.plugin(iW);t&&t.force()}function sW(e){var t=[];if(e)e:for(var n=0,i=e;n<i.length;n++){for(var r=i[n].name,o=function(e){var n=r[e];if(/[a-zA-Z]/.test(n)&&!t.some((function(e){return e.toLowerCase()==n.toLowerCase()})))return t.push(n),"continue-actions"},a=0;a<r.length;a++){switch(o(a)){case"continue-actions":continue e}}t.push("")}return t}function lW(e,t,n){var i,r=n?sW(t.actions):[];return vv("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},vv("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(i=t.actions)||void 0===i?void 0:i.map((function(n,i){var o=!1,a=function(i){if(i.preventDefault(),!o){o=!0;var r=qU(e.state.field(YU).diagnostics,t);r&&n.apply(e,r.from,r.to)}},s=n.name,l=r[i]?s.indexOf(r[i]):-1,c=l<0?s:[s.slice(0,l),vv("u",s.slice(l,l+1)),s.slice(l+1)];return vv("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":" Action: ".concat(s).concat(l<0?"":' (access key "'.concat(r[i],')"'),".")},c)})),t.source&&vv("div",{class:"cm-diagnosticSource"},t.source))}var cW=function(e){function t(t){var n=e.call(this)||this;return n.diagnostic=t,n}return f(t,e),t.prototype.eq=function(e){return e.diagnostic==this.diagnostic},t.prototype.toDOM=function(){return vv("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})},t}(sa),uW=function(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=lW(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")},hW=function(){function e(e){var t=this;this.view=e,this.items=[];this.list=vv("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:function(n){if(27==n.keyCode)eW(t.view),t.view.focus();else if(38==n.keyCode||33==n.keyCode)t.moveSelection((t.selectedIndex-1+t.items.length)%t.items.length);else if(40==n.keyCode||34==n.keyCode)t.moveSelection((t.selectedIndex+1)%t.items.length);else if(36==n.keyCode)t.moveSelection(0);else if(35==n.keyCode)t.moveSelection(t.items.length-1);else if(13==n.keyCode)t.view.focus();else{if(!(n.keyCode>=65&&n.keyCode<=90&&t.selectedIndex>=0))return;for(var i=t.items[t.selectedIndex].diagnostic,r=sW(i.actions),o=0;o<r.length;o++)if(r[o].toUpperCase().charCodeAt(0)==n.keyCode){var a=qU(t.view.state.field(YU).diagnostics,i);a&&i.actions[o].apply(e,a.from,a.to)}}n.preventDefault()},onclick:function(e){for(var n=0;n<t.items.length;n++)t.items[n].dom.contains(e.target)&&t.moveSelection(n)}}),this.dom=vv("div",{class:"cm-panel-lint"},this.list,vv("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function(){return eW(t.view)}},"×")),this.update()}return Object.defineProperty(e.prototype,"selectedIndex",{get:function(){var e=this.view.state.field(YU).selected;if(!e)return-1;for(var t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1},enumerable:!1,configurable:!0}),e.prototype.update=function(){var e=this,t=this.view.state.field(YU),n=t.diagnostics,i=t.selected,r=0,o=!1,a=null;for(n.between(0,this.view.state.doc.length,(function(t,n,s){for(var l,c=s.spec,u=-1,h=r;h<e.items.length;h++)if(e.items[h].diagnostic==c.diagnostic){u=h;break}u<0?(l=new uW(e.view,c.diagnostic),e.items.splice(r,0,l),o=!0):(l=e.items[u],u>r&&(e.items.splice(r,u-r),o=!0)),i&&l.diagnostic==i.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),a=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),r++}));r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new uW(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:function(){return{sel:a.dom.getBoundingClientRect(),panel:e.list.getBoundingClientRect()}},write:function(t){var n=t.sel,i=t.panel;n.top<i.top?e.list.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(e.list.scrollTop+=n.bottom-i.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()},e.prototype.sync=function(){var e=this.list.firstChild;function t(){var t=e;e=t.nextSibling,t.remove()}for(var n=0,i=this.items;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e)}for(;e;)t()},e.prototype.moveSelection=function(e){if(!(this.selectedIndex<0)){var t=qU(this.view.state.field(YU).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:KU.of(t)})}},e.open=function(t){return new e(t)},e}();function pW(e,t){return void 0===t&&(t='viewBox="0 0 40 40"'),'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(t,">").concat(encodeURIComponent(e),"</svg>')")}function dW(e){return pW('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}var fW=jl.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:dW("#d11")},".cm-lintRange-warning":{backgroundImage:dW("orange")},".cm-lintRange-info":{backgroundImage:dW("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),gW=function(e){function t(t){var n=e.call(this)||this;return n.diagnostics=t,n.severity=t.reduce((function(e,t){var n=t.severity;return"error"==n||"warning"==n&&"info"==e?n:e}),"info"),n}return f(t,e),t.prototype.toDOM=function(e){var t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;var n=this.diagnostics,i=e.state.facet(EW).tooltipFilter;return i&&(n=i(n)),n.length&&(t.onmouseover=function(){return function(e,t,n){function i(){var i=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(i.from)&&e.dispatch({effects:bW.of({pos:i.from,above:!1,create:function(){return{dom:QU(e,n),getCoords:function(){return t.getBoundingClientRect()}}}})}),t.onmouseout=t.onmousemove=null,function(e,t){var n=function(i){var r=t.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(var o=i.target;o;o=o.parentNode)if(1==o.nodeType&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),e.state.field(wW)&&e.dispatch({effects:bW.of(null)})}};window.addEventListener("mousemove",n)}(e,t)}var r=e.state.facet(EW).hoverTime,o=setTimeout(i,r);t.onmouseout=function(){clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=function(){clearTimeout(o),o=setTimeout(i,r)}}(e,t,n)}),t},t}(Su);function mW(e,t){for(var n=Object.create(null),i=0,r=t;i<r.length;i++){var o=r[i];(n[(s=e.lineAt(o.from)).from]||(n[s.from]=[])).push(o)}var a=[];for(var s in n)a.push(new gW(n[s]).range(+s));return Pr.of(a,!0)}var vW=Au({class:"cm-gutter-lint",markers:function(e){return e.state.field(yW)}}),yW=_i.define({create:function(){return Pr.empty},update:function(e,t){e=e.map(t.changes);for(var n=t.state.facet(EW).markerFilter,i=0,r=t.effects;i<r.length;i++){var o=r[i];if(o.is(jU)){var a=o.value;n&&(a=n(a||[])),e=mW(t.state.doc,a.slice(0))}}return e}}),bW=dr.define(),wW=_i.define({create:function(){return null},update:function(e,t){return e&&t.docChanged&&(e=UU(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce((function(e,t){return t.is(bW)?t.value:e}),e)},provide:function(e){return au.from(e)}}),kW=jl.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:pW('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:pW('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:pW('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),CW=[YU,jl.decorations.compute([YU],(function(e){var t=e.field(YU),n=t.selected,i=t.panel;return n&&i&&n.from!=n.to?ca.set([$U.range(n.from,n.to)]):ca.none})),pu(ZU,{hideOn:UU}),fW],EW=Hi.define({combine:function(e){return Mr(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function xW(e){return void 0===e&&(e={}),[EW.of(e),yW,vW,kW,wW]}function SW(e,t){var n=e.field(YU,!1);if(n&&n.diagnostics.size)for(var i=Pr.iter([n.diagnostics]);i.value;i.next())t(i.value.spec.diagnostic,i.from,i.to)}var MW,TW=function(){function e(e,t,n,i,r,o,a,s,l,c,u){void 0===c&&(c=0),this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=o,this.buffer=a,this.bufferBase=s,this.curContext=l,this.lookAhead=c,this.parent=u}return e.prototype.toString=function(){return"[".concat(this.stack.filter((function(e,t){return t%3==0})).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")},e.start=function(t,n,i){void 0===i&&(i=0);var r=t.parser.context;return new e(t,[],n,i,i,0,[],0,r?new DW(r,r.start):null,0,null)},Object.defineProperty(e.prototype,"context",{get:function(){return this.curContext?this.curContext.context:null},enumerable:!1,configurable:!0}),e.prototype.pushState=function(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e},e.prototype.reduce=function(e){var t=e>>19,n=65535&e,i=this.p.parser,r=i.dynamicPrecedence(n);if(r&&(this.score+=r),0==t)return this.pushState(i.getGoto(this.state,n,!0),this.reducePos),n<i.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);var o=this.stack.length-3*(t-1)-(262144&e?6:0),a=this.stack[o-2],s=this.stack[o-1],l=this.bufferBase+this.buffer.length-s;if(n<i.minRepeatTerm||131072&e){var c=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,a,c,l+4,!0)}if(262144&e)this.state=this.stack[o];else{var u=this.stack[o-3];this.state=i.getGoto(u,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,a)},e.prototype.storeNode=function(e,t,n,i,r){if(void 0===i&&(i=4),void 0===r&&(r=!1),0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){var o=this,a=this.buffer.length;if(0==a&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&0==o.buffer[a-4]&&o.buffer[a-1]>-1){if(t==n)return;if(o.buffer[a-2]>=t)return void(o.buffer[a-2]=n)}}if(r&&this.pos!=n){var s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=i}else this.buffer.push(e,t,n,i)},e.prototype.shift=function(e,t,n){var i=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){var r=e,o=this.p.parser;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}else this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4)},e.prototype.apply=function(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)},e.prototype.useNode=function(e,t){var n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);var i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))},e.prototype.split=function(){for(var t=this,n=t.buffer.length;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;for(var i=t.buffer.slice(n),r=t.bufferBase+n;t&&r==t.bufferBase;)t=t.parent;return new e(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)},e.prototype.recoverByDelete=function(e,t){var n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190},e.prototype.canShift=function(e){for(var t=new AW(this);;){var n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}},e.prototype.recoverByInsert=function(e){if(this.stack.length>=300)return[];var t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){for(var n=[],i=0,r=void 0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120){var o=function(e){var i=t[e+1];n.some((function(e,t){return 1&t&&e==i}))||n.push(t[e],i)};for(i=0;n.length<8&&i<t.length;i+=2)o(i)}t=n}var a=[];for(i=0;i<t.length&&a.length<4;i+=2){if((r=t[i+1])!=this.state){var s=this.split();s.pushState(r,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.score-=200,a.push(s)}}return a},e.prototype.forceReduce=function(){var e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;var t=this.p.parser;if(!t.validAction(this.state,e)){var n=e>>19,i=65535&e,r=this.stack.length-3*n;if(r<0||t.getGoto(this.stack[r],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0},e.prototype.forceAll=function(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this},Object.defineProperty(e.prototype,"deadEnd",{get:function(){if(3!=this.stack.length)return!1;var e=this.p.parser;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)},enumerable:!1,configurable:!0}),e.prototype.restart=function(){this.state=this.stack[0],this.stack.length=0},e.prototype.sameState=function(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(var t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0},Object.defineProperty(e.prototype,"parser",{get:function(){return this.p.parser},enumerable:!1,configurable:!0}),e.prototype.dialectEnabled=function(e){return this.p.parser.dialect.flags[e]},e.prototype.shiftContext=function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))},e.prototype.reduceContext=function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))},e.prototype.emitContext=function(){var e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)},e.prototype.emitLookAhead=function(){var e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)},e.prototype.updateContext=function(e){if(e!=this.curContext.context){var t=new DW(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}},e.prototype.setLookAhead=function(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)},e.prototype.close=function(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()},e}(),DW=function(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0};!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(MW||(MW={}));var AW=function(){function e(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}return e.prototype.reduce=function(e){var t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);var i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i},e}(),LW=function(){function e(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}return e.create=function(t,n){return void 0===n&&(n=t.bufferBase+t.buffer.length),new e(t,n,n-t.bufferBase)},e.prototype.maybeNext=function(){var e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)},Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),e.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},e.prototype.fork=function(){return new e(this.stack,this.pos,this.index)},e}(),PW=function(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0},IW=new PW,OW=function(){function e(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=IW,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}return e.prototype.resolveOffset=function(e,t){for(var n=this.range,i=this.rangeIndex,r=this.pos+e;r<n.from;){if(!i)return null;var o=this.ranges[--i];r-=n.from-o.to,n=o}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;r+=(o=this.ranges[++i]).from-n.to,n=o}return r},e.prototype.peek=function(e){var t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{var r=this.resolveOffset(e,1);if(null==r)return-1;if((t=r)>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{for(var o=this.rangeIndex,a=this.range;a.to<=t;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n},e.prototype.acceptToken=function(e,t){void 0===t&&(t=0);var n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n},e.prototype.getChunk=function(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){var e=this.chunk,t=this.chunkPos;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;var n=this.input.chunk(this.pos),i=this.pos+n.length;this.chunk=i>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}},e.prototype.readNext=function(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)},e.prototype.advance=function(e){for(void 0===e&&(e=1),this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()},e.prototype.setDone=function(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1},e.prototype.reset=function(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=IW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this},e.prototype.read=function(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);for(var n="",i=0,r=this.ranges;i<r.length;i++){var o=r[i];if(o.from>=t)break;o.to>e&&(n+=this.input.read(Math.max(o.from,e),Math.min(o.to,t)))}return n},e}(),FW=function(){function e(e,t){this.data=e,this.id=t}return e.prototype.token=function(e,t){!function(e,t,n,i){var r=0,o=1<<i,a=n.p.parser,s=a.dialect;e:for(;0!=(o&e[r]);){for(var l=e[r+1],c=r+3;c<l;c+=2)if((e[c+1]&o)>0){var u=e[c];if(s.allows(u)&&(-1==t.token.value||t.token.value==u||a.overrides(u,t.token.value))){t.acceptToken(u);break}}var h=t.next,p=0,d=e[r+2];if(!(t.next<0&&d>p&&65535==e[l+3*d-3])){for(;p<d;){var f=p+d>>1,g=l+f+(f<<1),m=e[g],v=e[g+1];if(h<m)d=f;else{if(!(h>=v)){r=e[g+2],t.advance();continue e}p=f+1}}break}r=e[l+3*d-1]}}(this.data,e,t,this.id)},e}();FW.prototype.contextual=FW.prototype.fallback=FW.prototype.extend=!1;var BW=function(e,t){void 0===t&&(t={}),this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend};function NW(e,t){if(void 0===t&&(t=Uint16Array),"string"!=typeof e)return e;for(var n=null,i=0,r=0;i<e.length;){for(var o=0;;){var a=e.charCodeAt(i++),s=!1;if(126==a){o=65535;break}a>=92&&a--,a>=34&&a--;var l=a-32;if(l>=46&&(l-=46,s=!0),o+=l,s)break;o*=46}n?n[r++]=o:n=new t(o)}return n}var RW,HW="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG),VW=null;function zW(e,t,n){var i=e.cursor(wn.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(RW||(RW={}));var qW,UW=function(){function e(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}return e.prototype.nextFragment=function(){var e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?zW(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?zW(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9},e.prototype.nodeAt=function(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){var t=this.trees.length-1;if(t<0)return this.nextFragment(),null;var n=this.trees[t],i=this.index[t];if(i!=n.children.length){var r=n.children[i],o=this.start[t]+n.positions[i];if(o>e)return this.nextStart=o,null;if(r instanceof xn){if(o==e){if(o<this.safeFrom)return null;var a=o+r.length;if(a<=this.safeTo){var s=r.prop(mn.lookAhead);if(!s||a+s<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}else this.trees.pop(),this.start.pop(),this.index.pop()}},e}(),WW=function(){function e(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((function(e){return new PW}))}return e.prototype.getActions=function(e){for(var t=0,n=null,i=e.p.parser,r=i.tokenizers,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,s=0,l=0;l<r.length;l++)if(0!=(1<<l&o)){var c=r[l],u=this.tokens[l];if((!n||c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(s=Math.max(u.lookAhead,s)),0!=u.value)){var h=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(n=u,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),n||e.pos!=this.stream.end||((n=new PW).value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions},e.prototype.getMainToken=function(e){if(this.mainToken)return this.mainToken;var t=new PW,n=e.pos,i=e.p;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t},e.prototype.updateCachedToken=function(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){for(var i=n.p.parser,r=0;r<i.specialized.length;r++)if(i.specialized[r]==e.value){var o=i.specializers[r](this.stream.read(e.start,e.end),n);if(o>=0&&n.p.parser.dialect.allows(o>>1)){0==(1&o)?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)},e.prototype.putAction=function(e,t,n,i){for(var r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i},e.prototype.addActions=function(e,t,n,i){for(var r=e.state,o=e.p.parser,a=o.data,s=0;s<2;s++)for(var l=o.stateSlot(r,s?2:1);;l+=3){if(65535==a[l]){if(1!=a[l+1]){0==i&&2==a[l+1]&&(i=this.putAction($W(a,l+2),t,n,i));break}l=$W(a,l+2)}a[l]==t&&(i=this.putAction($W(a,l+1),t,n,i))}return i},e}();!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(qW||(qW={}));var _W=function(){function e(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new OW(t,i),this.tokens=new WW(e,this.stream),this.topTerm=e.top[1];var r=i[0].from;this.stacks=[TW.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new UW(n,e.nodeSet):null}return Object.defineProperty(e.prototype,"parsedPos",{get:function(){return this.minStackPos},enumerable:!1,configurable:!0}),e.prototype.advance=function(){for(var e,t,n=this.stacks,i=this.minStackPos,r=this.stacks=[],o=0;o<n.length;o++)for(var a=n[o];;){if(this.tokens.mainToken=null,a.pos>i)r.push(a);else{if(this.advanceStack(a,r,n))continue;e||(e=[],t=[]),e.push(a);var s=this.tokens.getMainToken(a);t.push(s.value,s.end)}break}if(!r.length){var l;if(l=e&&function(e){for(var t=null,n=0,i=e;n<i.length;n++){var r=i[n],o=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=o&&r.pos>o)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e))return this.stackToTree(l);if(this.parser.strict)throw HW&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e&&(l=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r)))return this.stackToTree(l.forceAll());if(this.recovering){var c=1==this.recovering?1:3*this.recovering;if(r.length>c)for(r.sort((function(e,t){return t.score-e.score}));r.length>c;)r.pop();r.some((function(e){return e.reducePos>i}))&&this.recovering--}else if(r.length>1)e:for(o=0;o<r.length-1;o++){a=r[o];for(var u=o+1;u<r.length;u++){var h=r[u];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500){if(!((a.score-h.score||a.buffer.length-h.buffer.length)>0)){r.splice(o--,1);continue e}r.splice(u--,1)}}}this.minStackPos=r[0].pos;for(o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null},e.prototype.stopAt=function(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e},e.prototype.advanceStack=function(e,t,n){var i=e.pos,r=this.parser,o=HW?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments)for(var a=e.curContext&&e.curContext.tracker.strict,s=a?e.curContext.hash:0,l=this.fragments.nodeAt(i);l;){var c=this.parser.nodeSet.types[l.type.id]==l.type?r.getGoto(e.state,l.type.id):-1;if(c>-1&&l.length&&(!a||(l.prop(mn.contextHash)||0)==s))return e.useNode(l,c),HW&&console.log(o+this.stackID(e)+" (via reuse of ".concat(r.getName(l.type.id),")")),!0;if(!(l instanceof xn)||0==l.children.length||l.positions[0]>0)break;var u=l.children[0];if(!(u instanceof xn&&0==l.positions[0]))break;l=u}var h=r.stateSlot(e.state,4);if(h>0)return e.reduce(h),HW&&console.log(o+this.stackID(e)+" (via always-reduce ".concat(r.getName(65535&h),")")),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););for(var p=this.tokens.getActions(e),d=0;d<p.length;){var f=p[d++],g=p[d++],m=p[d++],v=d==p.length||!n,y=v?e:e.split();if(y.apply(f,g,m),HW&&console.log(o+this.stackID(y)+" (via ".concat(0==(65536&f)?"shift":"reduce of ".concat(r.getName(65535&f))," for ").concat(r.getName(g)," @ ").concat(i).concat(y==e?"":", split",")")),v)return!0;y.pos>i?t.push(y):n.push(y)}return!1},e.prototype.advanceFully=function(e,t){for(var n=e.pos;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return jW(e,t),!0}},e.prototype.runRecovery=function(e,t,n){for(var i=null,r=!1,o=0;o<e.length;o++){var a=e[o],s=t[o<<1],l=t[1+(o<<1)],c=HW?this.stackID(a)+" -> ":"";if(a.deadEnd){if(r)continue;if(r=!0,a.restart(),HW&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))continue}for(var u=a.split(),h=c,p=0;u.forceReduce()&&p<10;p++){if(HW&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;HW&&(h=this.stackID(u)+" -> ")}for(var d=0,f=a.recoverByInsert(s);d<f.length;d++){var g=f[d];HW&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,n)}this.stream.end>a.pos?(l==a.pos&&(l++,s=0),a.recoverByDelete(s,l),HW&&console.log(c+this.stackID(a)+" (via recover-delete ".concat(this.parser.getName(s),")")),jW(a,n)):(!i||i.score<a.score)&&(i=a)}return i},e.prototype.stackToTree=function(e){return e.close(),xn.build({buffer:LW.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})},e.prototype.stackID=function(e){var t=(VW||(VW=new WeakMap)).get(e);return t||VW.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e},e}();function jW(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}var GW=function(){function e(e,t,n){this.source=e,this.flags=t,this.disabled=n}return e.prototype.allows=function(e){return!this.disabled||0==this.disabled[e]},e}(),KW=function(e){return e},YW=function(e){this.start=e.start,this.shift=e.shift||KW,this.reduce=e.reduce||KW,this.reuse=e.reuse||KW,this.hash=e.hash||function(){return 0},this.strict=!1!==e.strict},XW=function(e){function t(t){var n,i=e.call(this)||this;if(i.wrappers=[],14!=t.version)throw new RangeError("Parser version (".concat(t.version,") doesn't match runtime version (").concat(14,")"));var r=t.nodeNames.split(" ");i.minRepeatTerm=r.length;for(var o=0;o<t.repeatNodeCount;o++)r.push("");var a=Object.keys(t.topRules).map((function(e){return t.topRules[e][1]})),s=[];for(o=0;o<r.length;o++)s.push([]);function l(e,t,n){s[e].push([t,t.deserialize(String(n))])}if(t.nodeProps)for(var c=0,u=t.nodeProps;c<u.length;c++){var h=u[c],p=h[0];"string"==typeof p&&(p=mn[p]);for(o=1;o<h.length;){var d=h[o++];if(d>=0)l(d,p,h[o++]);else{for(var f=h[o+-d],g=-d;g>0;g--)l(h[o++],p,f);o++}}}i.nodeSet=new kn(r.map((function(e,n){return bn.define({name:n>=i.minRepeatTerm?void 0:e,id:n,props:s[n],top:a.indexOf(n)>-1,error:0==n,skipped:t.skippedNodes&&t.skippedNodes.indexOf(n)>-1})}))),t.propSources&&(i.nodeSet=(n=i.nodeSet).extend.apply(n,t.propSources)),i.strict=!1,i.bufferLength=dn;var m=NW(t.tokenData);if(i.context=t.context,i.specialized=new Uint16Array(t.specialized?t.specialized.length:0),i.specializers=[],t.specialized)for(o=0;o<t.specialized.length;o++)i.specialized[o]=t.specialized[o].term,i.specializers[o]=t.specialized[o].get;return i.states=NW(t.states,Uint32Array),i.data=NW(t.stateData),i.goto=NW(t.goto),i.maxTerm=t.maxTerm,i.tokenizers=t.tokenizers.map((function(e){return"number"==typeof e?new FW(m,e):e})),i.topRules=t.topRules,i.dialects=t.dialects||{},i.dynamicPrecedences=t.dynamicPrecedences||null,i.tokenPrecTable=t.tokenPrec,i.termNames=t.termNames||null,i.maxNode=i.nodeSet.types.length-1,i.dialect=i.parseDialect(),i.top=i.topRules[Object.keys(i.topRules)[0]],i}return f(t,e),t.prototype.createParse=function(e,t,n){for(var i=new _W(this,e,t,n),r=0,o=this.wrappers;r<o.length;r++){i=(0,o[r])(i,e,t,n)}return i},t.prototype.getGoto=function(e,t,n){void 0===n&&(n=!1);var i=this.goto;if(t>=i[0])return-1;for(var r=i[t+1];;){var o=i[r++],a=1&o,s=i[r++];if(a&&n)return s;for(var l=r+(o>>1);r<l;r++)if(i[r]==e)return s;if(a)return-1}},t.prototype.hasAction=function(e,t){for(var n=this.data,i=0;i<2;i++)for(var r=this.stateSlot(e,i?2:1),o=void 0;;r+=3){if(65535==(o=n[r])){if(1!=n[r+1]){if(2==n[r+1])return $W(n,r+2);break}o=n[r=$W(n,r+2)]}if(o==t||0==o)return $W(n,r+1)}return 0},t.prototype.stateSlot=function(e,t){return this.states[6*e+t]},t.prototype.stateFlag=function(e,t){return(this.stateSlot(e,0)&t)>0},t.prototype.validAction=function(e,t){if(t==this.stateSlot(e,4))return!0;for(var n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=$W(this.data,n+2)}if(t==$W(this.data,n+1))return!0}},t.prototype.nextStates=function(e){for(var t,n=[],i=function(e){if(65535==r.data[e]){if(1!=r.data[e+1])return t=e,"break";e=$W(r.data,e+2)}if(0==(1&r.data[e+2])){var i=r.data[e+1];n.some((function(e,t){return 1&t&&e==i}))||n.push(r.data[e],i)}t=e},r=this,o=this.stateSlot(e,1);;o+=3){var a=i(o);if(o=t,"break"===a)break}return n},t.prototype.overrides=function(e,t){var n=ZW(this.data,this.tokenPrecTable,t);return n<0||ZW(this.data,this.tokenPrecTable,e)<n},t.prototype.configure=function(e){var n,i=Object.assign(Object.create(t.prototype),this);if(e.props&&(i.nodeSet=(n=this.nodeSet).extend.apply(n,e.props)),e.top){var r=this.topRules[e.top];if(!r)throw new RangeError("Invalid top rule name ".concat(e.top));i.top=r}return e.tokenizers&&(i.tokenizers=this.tokenizers.map((function(t){var n=e.tokenizers.find((function(e){return e.from==t}));return n?n.to:t}))),e.specializers&&(i.specializers=this.specializers.map((function(t){var n=e.specializers.find((function(e){return e.from==t}));return n?n.to:t}))),e.contextTracker&&(i.context=e.contextTracker),e.dialect&&(i.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(i.strict=e.strict),e.wrap&&(i.wrappers=i.wrappers.concat(e.wrap)),null!=e.bufferLength&&(i.bufferLength=e.bufferLength),i},t.prototype.hasWrappers=function(){return this.wrappers.length>0},t.prototype.getName=function(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)},Object.defineProperty(t.prototype,"eofTerm",{get:function(){return this.maxNode+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topNode",{get:function(){return this.nodeSet.types[this.top[1]]},enumerable:!1,configurable:!0}),t.prototype.dynamicPrecedence=function(e){var t=this.dynamicPrecedences;return null==t?0:t[e]||0},t.prototype.parseDialect=function(e){var t=Object.keys(this.dialects),n=t.map((function(){return!1}));if(e)for(var i=0,r=e.split(" ");i<r.length;i++){var o=r[i],a=t.indexOf(o);a>=0&&(n[a]=!0)}for(var s=null,l=0;l<t.length;l++)if(!n[l])for(var c,u=this.dialects[t[l]];65535!=(c=this.data[u++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new GW(e,n,s)},t.deserialize=function(e){return new t(e)},t}(Wn);function $W(e,t){return e[t]|e[t+1]<<16}function ZW(e,t,n){for(var i=t,r=void 0;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}let QW,JW;const e_=new WeakMap,t_=new WeakMap,n_=new WeakMap,i_=new WeakMap,r_=new WeakMap;let o_={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return t_.get(e);if("objectStoreNames"===t)return e.objectStoreNames||n_.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return l_(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function a_(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(JW||(JW=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(c_(this),t),l_(e_.get(this))}:function(...t){return l_(e.apply(c_(this),t))}:function(t,...n){const i=e.call(c_(this),t,...n);return n_.set(i,t.sort?t.sort():[t]),l_(i)}}function s_(e){return"function"==typeof e?a_(e):(e instanceof IDBTransaction&&function(e){if(t_.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));t_.set(e,t)}(e),t=e,(QW||(QW=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,o_):e);var t}function l_(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(l_(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&e_.set(t,e)})).catch((()=>{})),r_.set(t,e),t}(e);if(i_.has(e))return i_.get(e);const t=s_(e);return t!==e&&(i_.set(e,t),r_.set(t,e)),t}const c_=e=>r_.get(e);function u_(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),s=l_(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(l_(a.result),e.oldVersion,e.newVersion,l_(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function h_(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),l_(n).then((()=>{}))}const p_=["get","getKey","getAll","getAllKeys","count"],d_=["put","add","delete","clear"],f_=new Map;function g_(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(f_.get(t))return f_.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=d_.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!p_.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return f_.set(t,o),o}function m_(e){return"md"===le(ie(e))&&(e=e.substring(0,e.length-3)),e}o_=(e=>({...e,get:(t,n,i)=>g_(t,n)||e.get(t,n,i),has:(t,n)=>!!g_(t,n)||e.has(t,n)}))(o_);var v_=function(e,t){for(var n in t)if(t.hasOwnProperty(n)&&ie(n).toLowerCase().contains(e))return!0;return!1};function y_(e){return 0!==e.trim().length&&(!e.contains("\n")&&!(e.length>100&&e.contains(" ")))}var b_=function(){function e(e){this.cache={},this.app=e}return e.prototype.clear=function(){this.cache={}},e.prototype.getForFile=function(e,t){var n,i;return v(this,void 0,Promise,(function(){var r,o,a,s,l,c,u,h,p,d,f,g;return y(this,(function(m){switch(m.label){case 0:return"md"!==t.extension?[2,null]:(r=t.stat.mtime,(o=this.cache).hasOwnProperty(t.path)&&(a=o[t.path]).file===t&&a.mtime===r?[2,a]:[4,this.app.vault.cachedRead(t)]);case 1:if(s=m.sent(),e.isCancelled())return[2,null];l=rx(s),c=[],m.label=2;case 2:m.trys.push([2,7,8,13]),u=E(WD(UD(l.children),{maxDelay:0})),m.label=3;case 3:return[4,u.next()];case 4:if((h=m.sent()).done)return[3,6];if(p=h.value,e.isCancelled())return[3,6];if("yaml"===p.type)return[3,5];if("list"===p.type)return Rw(p,"listItem",(function(e){var t=bx(e).trim();t&&c.push({display:t,node:e})})),[3,5];if(""===(d=bx(p).trim()))return[3,5];"heading"===p.type&&(d=Array(p.depth||1).fill("#").join("")+" "+d),c.push({display:d,node:p}),m.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return f=m.sent(),n={error:f},[3,13];case 8:return m.trys.push([8,,11,12]),h&&!h.done&&(i=u.return)?[4,i.call(u)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[3,12];case 11:if(n)throw n.error;return[7];case 12:return[7];case 13:return g={file:t,content:s,mtime:r,blocks:c},o[t.path]=g,[2,g]}}))}))},e.prototype.getAll=function(e){return C(this,arguments,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:t=this.app.vault,n=t.getMarkdownFiles(),i=0,r=n,a.label=1;case 1:return i<r.length?(o=r[i],[4,k(this.getForFile(e,o))]):[3,5];case 2:return[4,a.sent()];case 3:a.sent(),a.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))},e}(),w_=function(e){function t(t,n){var i=e.call(this)||this;return i.worker=null,i.inProgressTaskCount=0,i.db=null,i.fileCache={},i.metadataCache={},i.workQueue=new RD,i.uniqueFileLookup=new Xe,i.initialized=!1,i.resolvedLinks={},i.unresolvedLinks={},i.linkResolverQueue=null,i.onCleanCacheCallbacks=[],i.workerResolve=null,i.userIgnoreFilters=null,i.userIgnoreFiltersString="",i.userIgnoreFilterCache={},i.app=t,i.vault=n,i.worker=new Worker("worker.js",{name:"Metadata Cache Worker"}),i.worker.onmessage=i.onReceiveMessageFromWorker.bind(i),i.blockCache=new b_(t),i.linkResolver(),i.on("finished",i.checkCleanCache,i),i.on("resolved",i.checkCleanCache,i),i}return f(t,e),t.prototype.getLinkSuggestions=function(){for(var e=[],t={},n=this.unresolvedLinks,i=this.vault,r=i.getConfig("showUnsupportedFiles"),o=0,a=i.getFiles();o<a.length;o++){var s=a[o];if(r||wM(s.extension)){var l=s.path;"md"===s.extension&&(l=se(l)),t[l]=!0,e.push({file:s,path:l});var c=this.getFileCache(s);if(c){var u=fx(c.frontmatter);if(u)for(var h=0,p=u;h<p.length;h++){var d=p[h];e.push({file:s,path:l,alias:d})}}}}for(var f in n)if(n.hasOwnProperty(f)){var g=n[f];for(var m in g)g.hasOwnProperty(m)&&(m.length>500&&(m=m.substring(0,500)),t[m]||(t[m]=!0,e.push({file:null,path:m})))}return e},t.prototype.getTags=function(){var e=this.fileCache,t=this.metadataCache,n={},i=function(e){if(yF(e)){var t=e.split("/").last();n[e]=(n[e]||0)+1,t!==e&&i(e.substr(0,e.length-t.length-1))}};for(var r in e)if(e.hasOwnProperty(r)&&!this.isUserIgnored(r)){var o=t[e[r].hash];if(o){var a=Vx(o);if(a)for(var s=0,l=a;s<l.length;s++){var c=l[s];i(c)}}}var u={};for(var c in n)if(n.hasOwnProperty(c)){var h=c.toLowerCase(),p=n[c];if(u.hasOwnProperty(h)){var d=u[h];d.count+=p,p>d.max&&(d.max=p,d.tag=c)}else u[h]={tag:c,count:p,max:p}}for(var c in n={},u)if(u.hasOwnProperty(c)){var f=u[c];n[f.tag]=f.count}return n},t.prototype.getLinkpathDest=function(e,t){if(""===e&&t){var n=this.vault.getAbstractFileByPath(t);if(n instanceof Xy)return[n]}var i=this._getLinkpathDest(e,t);return 0===i.length&&(i=this._getLinkpathDest(e+".md",t)),i},t.prototype.getFirstLinkpathDest=function(e,t){var n=this.getLinkpathDest(e,t);return n.length>0?n[0]:null},t.prototype._getLinkpathDest=function(e,t){var n=e.toLowerCase(),i=ie(n),r=this.uniqueFileLookup.get(i);if(!r)return[];var o=re(t).toLowerCase();if(n.startsWith("./")||n.startsWith("../")){if(n.startsWith("./../")&&(n=n.substr(2)),n.startsWith("./"))""!==o&&(o+="/"),n=o+n.substring(2);else{for(;n.startsWith("../");)n=n.substr(3),o=re(o);""!==o&&(o+="/"),n=o+n}for(var a=0,s=r;a<s.length;a++){if((g=(f=s[a]).path.toLowerCase())===n)return[f]}}n.startsWith("/")&&(n=n.substr(1));for(var l=0,c=r;l<c.length;l++){if((g=(f=c[l]).path.toLowerCase())===n)return[f]}if(e.startsWith("/"))return[];for(var u=[],h=[],p=0,d=r;p<d.length;p++){var f,g;(g=(f=d[p]).path.toLowerCase()).endsWith(n)&&(g.startsWith(o)?u.push(f):h.push(f))}return u.sort((function(e,t){return e.path.length-t.path.length})),h.sort((function(e,t){return e.path.length-t.path.length})),u.concat(h)},t.prototype.getLinks=function(){var e={};for(var t in this.fileCache)if(this.fileCache.hasOwnProperty(t)){var n=[],i=this.fileCache[t].hash,r=this.metadataCache[i];r&&(r.links&&(n=n.concat(r.links)),r.embeds&&(n=n.concat(r.embeds))),e[t]=n}return e},t.prototype.getFileCache=function(e){return this.getCache(e.path)},t.prototype.getCache=function(e){if(!this.fileCache.hasOwnProperty(e))return null;if("md"!==le(ie(e)))return{};var t=this.fileCache[e].hash;return this.metadataCache[t]||null},t.prototype.getFileInfo=function(e){return this.fileCache[e]},t.prototype.getCachedFiles=function(){return Object.keys(this.fileCache)},t.prototype.iterateReferences=function(e){var t=function(t){if(!n.fileCache.hasOwnProperty(t))return"continue";var i=n.fileCache[t].hash;Rx(n.metadataCache[i],(function(n){return e(t,n)}))},n=this;for(var i in this.fileCache)t(i)},t.prototype.getBacklinksForFile=function(e){var t=this,n=new Xe;return this.iterateReferences((function(i,r){var o=Fx(r.link),a=t.getFirstLinkpathDest(o,i);a&&a===e&&n.add(i,r)})),n},t.prototype.fileToLinktext=function(e,t,n){void 0===n&&(n=!0);var i=this.vault.getConfig("newLinkFormat"),r="md"===e.extension&&n?se(e.path):e.path;if("absolute"===i)return r;if("relative"===i){for(var o="",a=re(t);""!==a&&"/"!==a&&0!==r.indexOf(a+"/");)o="../"+o,a=re(a);return 0===r.indexOf(a+"/")?o+r.substr(a.length+1):o+r}var s="md"===e.extension&&n?e.basename:e.name,l=Fx(s),c=this.getLinkpathDest(l,t);return c&&1===c.length&&c[0]===e?s:"md"===e.extension&&n?se(e.path):e.path},t.prototype.watchVaultChanges=function(){var e=this.vault;e.on("create",this.onCreate.bind(this)),e.on("modify",this.onCreateOrModify.bind(this)),e.on("delete",this.onDelete.bind(this)),e.on("rename",this.onRename.bind(this)),e.on("config-changed",this.updateUserIgnoreFilters.bind(this))},t.prototype.initialize=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:t=(e=this).fileCache,n=e.metadataCache,y.label=1;case 1:return y.trys.push([1,8,,9]),i=this,[4,u_(this.app.appId+"-cache",19,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("file")&&e.deleteObjectStore("file"),e.objectStoreNames.contains("metadata")&&e.deleteObjectStore("metadata"),e.createObjectStore("file"),e.createObjectStore("metadata")}})];case 2:return[4,(i.db=y.sent()).transaction(["file","metadata"])];case 3:return[4,(r=y.sent()).objectStore("file").getAllKeys()];case 4:return o=y.sent(),[4,r.objectStore("file").getAll()];case 5:for(a=y.sent(),c=0;c<o.length;c++)t[o[c]]=a[c];return[4,r.objectStore("metadata").getAllKeys()];case 6:return s=y.sent(),[4,r.objectStore("metadata").getAll()];case 7:for(l=y.sent(),c=0;c<s.length;c++)n[s[c]]=Ix(l[c]);return[3,9];case 8:return u=y.sent(),console.error("Failed to load cache",u),[3,9];case 9:for(setInterval(this.cleanupDeletedCache.bind(this),6e5),h={},p=this.vault.getAllLoadedFiles(),d=0,f=p;d<f.length;d++)(v=f[d])instanceof Xy&&(this.uniqueFileLookup.add(v.name.toLowerCase(),v),h[v.path]=v);for(m in t)t.hasOwnProperty(m)&&(v=h[m],g=t[m],v?n.hasOwnProperty(g.hash)?(Lt.isAndroidApp&&v.stat.mtime!==g.mtime&&g.mtime%1e3==0&&1e3*Math.floor(v.stat.mtime/1e3)===g.mtime&&(g.mtime=v.stat.mtime,this.saveFileCache(m,g)),v.stat.mtime!==g.mtime||v.stat.size!==g.size?this.onCreateOrModify(v):this.linkResolverQueue.add(v)):this.onCreateOrModify(v):this.deletePath(m));for(m in h)h.hasOwnProperty(m)&&(v=h[m],t[m]||this.onCreateOrModify(v));return this.initialized=!0,this.watchVaultChanges(),this.cleanupDeletedCache(),this.updateUserIgnoreFilters(),this.trigger("initialized"),this.trigger("finished"),[2]}}))}))},t.prototype.clear=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.db)?[4,e.clear("metadata")]:[3,3];case 1:return t.sent(),[4,e.clear("file")];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.showIndexingNotice=function(){var e,t,n=this,i=rf.interface.msgIndexing(),r=this.inProgressTaskCount,o=window.setTimeout((function(){n.inProgressTaskCount<=0||(e=new CI(i,0),t=window.setInterval((function(){if(e.noticeEl.offsetParent){var o=n.inProgressTaskCount,a=Math.max(0,r-o);e.noticeEl.setText(i+" (".concat(a,"/").concat(r,")"))}else clearInterval(t)}),300))}),1e3);this.onCleanCache((function(){clearTimeout(o),clearInterval(t),e&&(e.hide(),new CI(rf.interface.msgIndexingComplete()))}))},t.prototype.linkResolver=function(){var e=this,t=WD((this.linkResolverQueue=new qD({onStop:function(){return e.trigger("resolved")},onCancel:function(){e.linkResolverQueue=null}})).generator());v(e,void 0,void 0,(function(){var e,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),e=E(t),s.label=1;case 1:return[4,e.next()];case 2:if((n=s.sent()).done)return[3,4];if(!(i=n.value)||"md"!==i.extension)return[3,3];this.resolveLinks(i.path),this.trigger("resolve",i),s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return r=s.sent(),o={error:r},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(a=e.return)?[4,a.call(e)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return[2]}}))}))},t.prototype.resolveLinks=function(e){var t=this,n=this.getCache(e);if(n){var i={},r={};Rx(n,(function(n){var o=n.link,a=Fx(o),s=t.getFirstLinkpathDest(a,e);s?i[s.path]=(i[s.path]||0)+1:(o=m_(o),r[o]=(r[o]||0)+1)})),this.resolvedLinks[e]=i,this.unresolvedLinks[e]=r}},t.prototype.onCleanCache=function(e){this.isCacheClean()?e():this.onCleanCacheCallbacks.push(e)},t.prototype.checkCleanCache=function(){for(;this.onCleanCacheCallbacks.length>0&&this.isCacheClean();){var e=this.onCleanCacheCallbacks.shift();try{e()}catch(e){console.error(e)}}},t.prototype.isCacheClean=function(){return 0===this.inProgressTaskCount&&0===this.linkResolverQueue.items.length&&!this.linkResolverQueue.runnable.isRunning()},t.prototype.updateRelatedLinks=function(e){"md"===le(e)&&(e=ae(e)),e=e.toLowerCase();for(var t=this.resolvedLinks,n=this.unresolvedLinks,i=0,r=this.getCachedFiles();i<r.length;i++){var o=r[i];if(v_(e,t[o])||v_(e,n[o])){var a=this.vault.getAbstractFileByPath(o);a&&a instanceof Xy&&this.linkResolverQueue.add(a)}}},t.prototype.onCreate=function(e){this.onCreateOrModify(e),e&&e instanceof Xy&&this.updateRelatedLinks(e.name)},t.prototype.onCreateOrModify=function(e){var t=this;if(e&&e instanceof Xy){this.uniqueFileLookup.add(e.name.toLowerCase(),e);var n=e.stat,i=e.path,r=this.fileCache[i];if("md"!==e.extension)return r={mtime:n.mtime,size:n.size,hash:""},void this.saveFileCache(i,r);var o=!1;if(r){var a=r.mtime===n.mtime&&r.size===n.size,s=r.hash&&!!this.metadataCache[r.hash];o=a&&s}else r={mtime:0,size:0,hash:""},this.saveFileCache(i,r);if(o)this.linkResolverQueue.add(e);else{this.inProgressTaskCount++,this.workQueue.queue((function(){return v(t,void 0,void 0,(function(){var o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,v(t,void 0,void 0,(function(){var t,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,this.vault.readBinary(e)];case 1:return t=c.sent(),o=V(t),[4,W(t)];case 2:if(a=c.sent(),r.mtime=n.mtime,r.size=n.size,r.hash=a,this.saveFileCache(i,r),s=this.metadataCache[a])return this.linkResolverQueue.add(e),this.trigger("changed",e,o,s),[2];l=setTimeout((function(){new CI("Indexing taking a long time for "+e.path)}),1e4),c.label=3;case 3:return c.trys.push([3,,5,6]),[4,this.work(t)];case 4:return s=c.sent(),[3,6];case 5:return clearTimeout(l),[7];case 6:return s?(this.saveMetaCache(a,s),this.linkResolverQueue.add(e),this.trigger("changed",e,o,s),[2]):(console.log("Metadata failed to parse",e),[2])}}))}))];case 1:return a.sent(),[3,3];case 2:return o=a.sent(),console.error(o),[3,3];case 3:return this.inProgressTaskCount--,0===this.inProgressTaskCount&&this.trigger("finished"),[2]}}))}))}))}}},t.prototype.onDelete=function(e){e&&e instanceof Xy&&(this.uniqueFileLookup.remove(e.name.toLowerCase(),e),this.trigger("deleted",e,this.getFileCache(e)),this.deletePath(e.path))},t.prototype.deletePath=function(e){delete this.resolvedLinks[e],delete this.unresolvedLinks[e],this.saveFileCache(e,null),this.updateRelatedLinks(ie(e)),this.linkResolverQueue.add(null),0===this.inProgressTaskCount&&this.trigger("finished")},t.prototype.onRename=function(e,t){if(e&&e instanceof Xy){var n=e.path,i=this,r=i.uniqueFileLookup,o=i.resolvedLinks,a=i.unresolvedLinks,s=i.fileCache;r.remove(ie(t).toLowerCase(),e),r.add(e.name.toLowerCase(),e),o.hasOwnProperty(t)&&(o[n]=o[t],delete o[t]),a.hasOwnProperty(t)&&(a[n]=a[t],delete a[t]),s.hasOwnProperty(t)&&(this.saveFileCache(n,s[t]),this.saveFileCache(t,null));var l=ie(t),c=ie(n);this.updateRelatedLinks(l),c!==l&&this.updateRelatedLinks(c),this.linkResolverQueue.add(null)}},t.prototype.saveFileCache=function(e,t){t?(this.fileCache[e]=t,this.db&&this.db.transaction("file","readwrite").store.put(t,e)):(delete this.fileCache[e],this.db&&this.db.transaction("file","readwrite").store.delete(e))},t.prototype.saveMetaCache=function(e,t){if(t){this.metadataCache[e]=t;var n=JSON.parse(JSON.stringify(t));(i=n).frontmatterPosition&&(i.frontmatterPos=Dx(i.frontmatterPosition),delete i.frontmatterPosition),Tx(i,Ax),this.db&&this.db.transaction("metadata","readwrite").store.put(n,e)}else delete this.metadataCache[e],this.db&&this.db.transaction("metadata","readwrite").store.delete(e);var i},t.prototype.work=function(e){var t=this;if(this.workerResolve)throw new Error("Work queue must be sequential!");return new Promise((function(n){t.workerResolve=n,t.worker.postMessage({metadataCache:e},[e])}))},t.prototype.computeMetadataAsync=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.workQueue.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.work(e)];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))}))]}))}))},t.prototype.onReceiveMessageFromWorker=function(e){this.workerResolve&&(this.workerResolve(e.data),this.workerResolve=null)},t.prototype.cleanupDeletedCache=function(){var e=this.fileCache,t=this.metadataCache,n={};for(var i in e){if(e.hasOwnProperty(i))n[e[i].hash]=!0}for(var r in t)t.hasOwnProperty(r)&&(n[r]||this.saveMetaCache(r,null))},t.prototype.updateUserIgnoreFilters=function(){var e=this.app.vault.getConfig("userIgnoreFilters"),t=JSON.stringify(e);if(this.userIgnoreFiltersString!==t)if(this.userIgnoreFiltersString=t,this.userIgnoreFilterCache={},e){var n=[];this.userIgnoreFilters=n;for(var i=0,r=e;i<r.length;i++){var o=r[i];try{o.length>2&&o.startsWith("/")&&o.endsWith("/")?n.push(new RegExp(o.substring(1,o.length-1),"i")):n.push(new RegExp("^"+Ye(o),"i"))}catch(e){console.error("Bad regex for user ignore filter",e)}}}else this.userIgnoreFilters=null},t.prototype.isSupportedFile=function(e){var t=this.app;return!!t.vault.getConfig("showUnsupportedFiles")||t.viewRegistry.isExtensionRegistered(e.extension)},t.prototype.isUserIgnored=function(e){var t=this.userIgnoreFilters,n=this.userIgnoreFilterCache;if(!t)return!1;if(n.hasOwnProperty(e))return n[e];for(var i=!1,r=0,o=t;r<o.length;r++){if(o[r].test(e)){i=!0;break}}return n[e]=i,i},t.prototype.getAllPropertyInfos=function(){var e=this.fileCache,t=this.metadataCache,n={};for(var i in e)if(e.hasOwnProperty(i)&&!this.isUserIgnored(i)){var r=t[e[i].hash];if(r){var o=r.frontmatter;if(o)for(var a in o)if(o.hasOwnProperty(a)){var s=a.toLowerCase(),l=o[a];n.hasOwnProperty(s)?(n[s].count++,n[s].type||(n[s].type=ZB(l))):n[s]={name:a,count:1,type:null!==l?ZB(l):void 0}}}}for(var c=0,u=Object.keys(n);c<u.length;c++){a=u[c];if(n.hasOwnProperty(a)){var h=this.app.metadataTypeManager.getAssignedType(a);h&&(n[a].type=h)}}var p=this.app.metadataTypeManager.types;for(var a in p)if(p.hasOwnProperty(a)){s=a.toLowerCase();if(!n.hasOwnProperty(s)){var d=p[a],f=d.name,g=d.type;n[s]={name:f,type:g,count:0}}}return n},t.prototype.getFrontmatterPropertyValuesForKey=function(e){var t=this.fileCache,n=this.metadataCache,i=new Set;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r].hash;if(n[o]){var a=n[o].frontmatter;if(a&&a[e]){var s=a[e];if(it(s))for(var l=0,c=s;l<c.length;l++){var u=c[l];y_(u)&&i.add(u)}else"string"==typeof s&&y_(s)&&i.add(s)}}}return Array.from(i).sort(JL)},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny),k_="obsidian-search-match-highlight",C_=window.CodeMirror,E_="hmd-internal-link";try{delete C_.keyMap.emacsy["Alt-F"],delete C_.keyMap.emacsy["Alt-B"],delete C_.keyMap.emacsy["Alt-D"],delete C_.keyMap.pcDefault["Ctrl-Up"],delete C_.keyMap.pcDefault["Ctrl-Down"],delete C_.keyMap.pcDefault["Alt-Left"],delete C_.keyMap.pcDefault["Alt-Right"],C_.keyMap.macDefault.fallthrough="basic",C_.keyMap.macEmacsy={fallthrough:["macDefault","emacsy"]}}catch(e){console.error(e)}var x_,S_=function(e){function t(t,n){var i=e.call(this)||this;return i.view=t,i.cm=n,i.containerEl=n.getWrapperElement(),i}return f(t,e),t.prototype.getValue=function(){return this.cm.getValue()},t.prototype.setValue=function(e){this.cm.setValue(e)},t.prototype.getLine=function(e){return this.cm.getLine(e)},t.prototype.lineCount=function(){return this.cm.lineCount()},t.prototype.lastLine=function(){return this.cm.lastLine()},t.prototype.getSelection=function(){return this.cm.getSelection()},t.prototype.getRange=function(e,t){return this.cm.getRange(e,t)},t.prototype.replaceSelection=function(e,t){this.cm.replaceSelection(e,void 0,t)},t.prototype.replaceRange=function(e,t,n,i){this.cm.replaceRange(e,t,n,i)},t.prototype.getCursor=function(e){return kf(this.cm.getCursor(e),0)},t.prototype.listSelections=function(){return this.cm.listSelections()},t.prototype.setSelection=function(e,t){this.cm.setSelection(e,t)},t.prototype.setSelections=function(e,t){this.cm.setSelections(e,t)},t.prototype.exec=function(e){this.cm.execCommand(t.commands[e])},t.prototype.focus=function(){this.cm.focus()},t.prototype.blur=function(){this.cm.getInputField().blur()},t.prototype.hasFocus=function(){return this.cm.hasFocus()},t.prototype.getScrollInfo=function(){return this.cm.getScrollInfo()},t.prototype.scrollTo=function(e,t){this.cm.scrollTo(e,t)},t.prototype.scrollIntoView=function(e,t){this.cm.scrollIntoView(e,this.cm.getWrapperElement().clientHeight/2)},t.prototype.refresh=function(){this.cm.refresh()},t.prototype.transaction=function(e,t){var n=e.replaceSelection,i=e.changes,r=e.selection,o=e.selections,a=this.cm;a.operation((function(){if(String.isString(n)&&a.replaceSelection(n,void 0,t),i){i.sort(xf);for(var e=0,s=i;e<s.length;e++){var l=s[e];a.replaceRange(l.text,l.from,l.to,t)}}o?a.setSelections(o.map((function(e){return{head:e.from,anchor:e.to||e.from}}))):r&&a.setSelection(r.from,r.to)}))},t.prototype.wordAt=function(e){var t=this.cm.findWordAt(e);return t.empty()?null:{from:t.from(),to:t.to()}},t.prototype.posToOffset=function(e){return this.cm.indexFromPos(e)},t.prototype.offsetToPos=function(e){return this.cm.posFromIndex(e)},t.prototype.undo=function(){this.cm.undo()},t.prototype.redo=function(){this.cm.redo()},t.prototype.coordsAtPos=function(e,t){var n=this.cm.cursorCoords(e,t?"local":"page"),i=n.left;return{top:n.top,bottom:n.bottom,left:i,right:i}},t.prototype.posAtCoords=function(e,t){return this.cm.coordsChar({left:e,top:t},"window")},t.prototype.addHighlights=function(e,t,n,i){n&&this.removeHighlights(t);for(var r=this.cm,o=0,a=e;o<a.length;o++){var s=a[o];if(r.markText(s.from,s.to,{className:t}),i)for(var l=0,c=r.findMarksAt(s.from);l<c.length;l++){var u=c[l];u.__isFold&&u.clear()}}},t.prototype.removeHighlights=function(e){for(var t=0,n=this.cm.getAllMarks();t<n.length;t++){var i=n[t];i.className===e&&i.clear()}},t.prototype.foldLess=function(){throw"Not Implemented"},t.prototype.foldMore=function(){throw"Not Implemented"},t.prototype.insertBlock=function(e,t){throw"Not Implemented"},t.prototype.toggleMarkdownFormatting=function(e){var t=this,n=nD[e].surroundingChars,i=this.getSelection(),r=this.getCursor("from"),o=this.getCursor("to"),a=r.line===o.line&&r.ch===o.ch,s=function(e){var n=e.length,i=t.getRange(kf(r,-n),r),a=t.getRange(o,kf(o,n));return i===e&&a===e},l=function(e){return i.length>=2*e.length&&i.startsWith(e)&&i.endsWith(e)},c=function(e){var n=e.length;return t.getRange(o,kf(o,n))===e},u=function(e){t.transaction({selection:{from:kf(r,e)}})},h=function(e,n){return s(e)?(function(e,n){var a=n.length,s=n+i+n;t.transaction({changes:[{from:kf(r,-e),to:kf(o,e),text:s}],selection:{from:kf(r,a-e),to:kf(o,o.line===r.line?a-e:0)}})}(e.length,n),!0):!!l(e)&&(function(e,n){var a=n+i.substring(e,i.length-e)+n;t.transaction({changes:[{from:r,to:o,text:a}],selection:{from:r,to:wf(o.line,o.line===r.line?r.ch+a.length:o.ch)}})}(e.length,n),!0)};if("*"===n||"_"===n){if(h("***","**"))return;if(h("___","__"))return;if(!(s("**")||s("__")||l("**")||l("__"))){if(h("*",""))return;if(h("_",""))return}if(a&&(c("*")||c("_")))return void u(1)}else if("**"===n||"__"===n){if(h("**",""))return;if(h("__",""))return;if(a&&(c("**")||c("__")))return void u(2)}else if(2===n.length&&n.charAt(0)===n.charAt(1)){if(h(n,""))return;if(a&&c(n))return void u(2)}var p=i.match(/^(\s*)([\s\S]*?)(\s*)$/);if(p){i=p[2];for(var d=p[1],f=0;f<d.length;f++){"\n"===d.charAt(f)?(r.line++,r.ch=0):r.ch++}var g=p[3];for(f=g.length-1;f>=0;f--){"\n"===g.charAt(f)?(o.line--,o.ch=this.getLine(o.line).length):o.ch--}}var m=o;o.line===r.line&&(m=kf(o,n.length)),this.transaction({changes:[{from:r,to:o,text:"".concat(n).concat(i).concat(n)}],selection:{from:kf(r,n.length),to:m}})},t.prototype.searchCursor=function(e){var t=this.cm,n=this,i=function(n){return t.getSearchCursor(e,n,{caseFold:!0})},r=i(null);return{current:function(){var e=r.from(),t=r.to();return e&&t?{from:e,to:t}:null},findPrevious:function(){var e=r.findPrevious();return e||(e=(r=i(wf(t.lastLine()))).findPrevious()),e?this.current():null},findNext:function(){var e=r.findNext();return e||(e=(r=i(null)).findNext()),e?this.current():null},replace:function(e,t){var i=this.current();n.replaceRange(e,i.from,i.to,t)},findAll:function(){for(var e=[],t=(r=i(null)).findNext();t;)e.push(this.current()),t=r.findNext();return e},replaceAll:function(e,t){var i=this.findAll().map((function(t){return{from:t.from,to:t.to,text:e}})).reverse();n.transaction({changes:i},t)}}},t.prototype.getClickableTokenAt=function(e){var t=this.cm,n=t.getLineTokens(e.line),i=t.getTokenAt(e,!0),r=i.type;if(r){for(var o=r.split(" "),a=o.contains(E_),s=o.contains("formatting-link")&&["[[","]]"].contains(i.string),l=-1,c=0;c<n.length;c++){if((w=n[c]).start===i.start&&w.end===i.end){l=c;break}}if(a||s){if(-1!==l){for(var u=l-1;u>=0;){var h=(w=n[u]).type;if(!h||!h.contains(E_))break;u--}for(var p=l+1;p<n.length;){var d=(w=n[p]).type;if(!d||!d.contains(E_))break;p++}var f="",g=e.ch,m=e.ch;for(c=u+1;c<p;c++){(w=n[c]).type.contains(E_)&&(f+=w.string,w.start<g&&(g=w.start),w.end>m&&(m=w.end))}return{type:"internal-link",text:Vw(f),start:{line:e.line,ch:g},end:{line:e.line,ch:m}}}return null}if(o.contains("url")){var v=i.string;if("("===v?i=n[l+1]:")"===v&&(i=n[l-1]),!i)return null;v=i.string;try{v=decodeURI(v)}catch(e){return null}var y=!0;return o.contains("string")?y=!zw(v):/^([a-z0-9+.-]+):/.test(v)||(v="https://"+v),{type:y?"external-link":"internal-link",text:v,start:{line:e.line,ch:i.start},end:{line:e.line,ch:i.end}}}if(o.contains("hashtag")){var b="";for(g=e.ch,m=e.ch,c=0;c<n.length;c++){var w;if((w=n[c]).type&&w.type.split(" ").contains("hashtag"))b+=w.string,w.start<g&&(g=w.start),w.end>m&&(m=w.end);else{if(!(c<l))break;b="",g=e.ch,m=e.ch}}if(b)return{type:"tag",text:b,start:{line:e.line,ch:g},end:{line:e.line,ch:m}}}return o.contains("blockid")?{type:"tag",text:i.string,start:{line:e.line,ch:i.start},end:{line:e.line,ch:i.end}}:null}},t.commands={goUp:"goLineUp",goDown:"goLineDown",goLeft:"goCharLeft",goRight:"goCharRight",goStart:"goDocStart",goEnd:"goDocEnd",goWordLeft:"goWordLeft",goWordRight:"goWordRight",indentMore:"indentMore",indentLess:"indentLess",newlineAndIndent:"newlineAndIndent",swapLineUp:"swapLineUp",swapLineDown:"swapLineDown",deleteLine:"deleteLine",toggleFold:"toggleFold",foldAll:"foldAll",unfoldAll:"unfoldAll"},t}(Df),M_=function(){function e(e){this.type="source",this.hoverPopover=null,this.editorEl=null,this.search=null,this.lastCursor=null,this.scrolling=!1,this.view=e;var t=this.app=e.app,n=this.editorEl=e.contentEl.createDiv("markdown-source-view mod-cm5"),i=this.cmEditor=C_(this.editorEl,{mode:"hypermd",theme:"obsidian",lineWrapping:!0,styleActiveLine:!0,configureMouse:function(e,t,n){return{addNew:n.altKey&&!n.ctrlKey&&!n.metaKey}}}),r=this.editor=new S_(e,i);this.clipboardManager=new CM(e),this.updateOptions();var o=i.getWrapperElement(),a=o.find(".CodeMirror-vscrollbar");a.detach(),n.insertBefore(a,n.firstChild),a.style.width="100%";var s=i.getInputField();if(s.instanceOf(HTMLTextAreaElement)){s.style.top="0",s.style.bottom="";var l=s.parentElement.style;l.position="absolute",l.opacity="0"}s.tabIndex=-1,this.search=new tD(t,r,this.editorEl,(function(t){return e.scope=t})),this.editorSuggest=t.workspace.editorSuggest,this.attachCmEvents(),this.attachDomEvents(),t.workspace.trigger("codemirror",i),LA.registerDomEvents(o,new xP(this))}return e.prototype.show=function(){this.editorEl.show(),this.cmEditor.refresh()},e.prototype.hide=function(){this.editorEl.hide(),this.editorSuggest.close(),this.search.hide()},e.prototype.clear=function(){var e=this.cmEditor.getDoc();e.setValue(""),e.clearHistory()},e.prototype.get=function(){return this.cmEditor.getValue()},e.prototype.set=function(e,t){var n=this.cmEditor;if(t)n.setValue(e),n.clearHistory(),this.lastCursor=null;else{for(var i=n.getScrollInfo(),r=e.split(/\r?\n/g),o=n.lineCount(),a=0;a<r.length&&a<o&&r[a]===n.getLine(a);)a++;if(a===r.length&&a===o)return;for(var s=o-1,l=r.length-1;s>a&&l>a&&n.getLine(s)===r[l];)s--,l--;var c={line:a,ch:0},u={line:s,ch:n.getLine(s).length},h=r.slice(a,l+1).join("\n");a===Math.min(o,r.length)&&(c={line:a-1,ch:n.getLine(a-1).length},r.length>o&&(h="\n"+h)),n.replaceRange(h,c,u,"setValue"),this.scrolling=!0,n.scrollTo(i.left,i.top)}},e.prototype.beforeUnload=function(){},e.prototype.getEphemeralState=function(e){var t=this.editor;if(t.hasFocus()){var n=t.getCursor("anchor"),i=t.getCursor("head");e.cursor={from:{line:n.line,ch:n.ch},to:{line:i.line,ch:i.ch}}}},e.prototype.setEphemeralState=function(e){var t=this.cmEditor,n=e.cursor,i=t.getScrollInfo();if(n&&n.from&&n.to?(t.focus(),t.setSelection(n.from,n.to),t.scrollTo(i.left,i.top)):e.focus&&(this.lastCursor?t.setCursor(this.lastCursor):t.execCommand("goDocStart"),t.focus(),t.scrollTo(i.left,i.top)),e.hasOwnProperty("scroll")&&this.applyScroll(e.scroll),void 0!==e.startLoc&&void 0!==e.endLoc){var r=e.startLoc,o=e.endLoc,a={line:r.line,ch:r.col},s=o?{line:o.line,ch:o.col}:{line:t.lastLine(),ch:t.getLine(t.lastLine()).length};this.highlightSearchMatch(a,s),this.onScroll()}else if(void 0!==e.line&&e.line>=0){var l=e.line;a={line:l,ch:0},s={line:l,ch:t.getLine(l).length};this.highlightSearchMatch(a,s),t.setSelection(s,s),this.onScroll()}else if(void 0!==e.match){var c=e.match,u=Af(c.content,c.matches);this.highlightSearchMatches(u),this.onScroll()}},Object.defineProperty(e.prototype,"file",{get:function(){return this.view.file},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.path)||""},enumerable:!1,configurable:!0}),e.prototype.updateOptions=function(){var e,t=this,n=this.app.vault,i=this.cmEditor,r=n.getConfig("readableLineLength");this.editorEl.toggleClass("is-readable-line-width",r);var o="";n.getConfig("autoPairBrackets")&&(o+="()[]{}''\"\""),n.getConfig("autoPairMarkdown")&&(o+="**__``==~~$$%%"),o?i.setOption("autoCloseBrackets",{pairs:o,explode:"",surroundOnly:"=~$%",override:!0}):i.setOption("autoCloseBrackets",!1);var a=n.getConfig("foldHeading"),s=n.getConfig("foldIndent");if(a||s){i.setOption("foldGutter",!0),i.setOption("gutters",["CodeMirror-linenumbers","CodeMirror-foldgutter"]);var l=[C_.fold.frontmatter];a&&l.push(C_.fold.markdown),s&&l.push(C_.fold.indent);var c=1===l.length?l[0]:new((e=C_.fold.combine).bind.apply(e,w([void 0],l,!1)));i.setOption("foldOptions",{rangeFinder:c})}else i.setOption("foldGutter",!1),i.setOption("gutters",[]),i.setOption("foldOptions",{});var u=n.getConfig("showLineNumber");i.setOption("lineNumbers",u);var h=n.getConfig("useTab");i.setOption("indentWithTabs",!!h);var p=n.getConfig("tabSize");i.setOption("tabSize",p),i.setOption("indentUnit",Math.clamp(p,2,4)),i.setOption("scrollPastEnd",!0);var d=n.getConfig("rightToLeft");i.setOption("direction",d?"rtl":"ltr"),i.setOption("rtlMoveVisually",d);var f=n.getConfig("vimMode"),g=n.getConfig("emacsyKeys");f?i.setOption("keyMap","vim"):ye&&g?i.setOption("keyMap","macEmacsy"):i.setOption("keyMap","default"),f&&(s||a)&&(C_.Vim.defineAction("fold",(function(e){return e.execCommand("fold")})),C_.Vim.mapCommand("zc","action","fold"),C_.Vim.defineAction("unfold",(function(e){return e.execCommand("unfold")})),C_.Vim.mapCommand("zo","action","unfold"),C_.Vim.defineAction("toggleFold",(function(e){return e.execCommand("toggleFold")})),C_.Vim.mapCommand("za","action","toggleFold"));var m={Up:this.passIfNoSuggestion.bind(this),Down:this.passIfNoSuggestion.bind(this),Tab:this.passIfNoSuggestion.bind(this)},v=n.getConfig("smartIndentList");m.Enter=function(e){if(!t.editorSuggest.isShowingSuggestion()){if(!v)return C_.Pass;e.execCommand("newlineAndIndentContinueMarkdownList")}},v&&(f||(m[ye?"Cmd-[":"Ctrl-["]=function(e){e.execCommand("indentLess"),e.execCommand("indentUnindentContinueMarkdownList")},m[ye?"Cmd-]":"Ctrl-]"]=function(e){e.execCommand("indentMore"),e.execCommand("indentUnindentContinueMarkdownList")}),m.Tab=function(e){t.editorSuggest.isShowingSuggestion()||e.execCommand("autoIndentMarkdownList")},m["Shift-Tab"]="autoUnindentMarkdownList"),m.End=function(e){for(var t=!1,n=0,i=e.getLineTokens(e.getCursor("to").line);n<i.length;n++){var r=i[n];if(r.type&&r.type.split(" ").contains("line-HyperMD-table-row")){t=!0;break}}t?e.execCommand("goLineEnd"):e.execCommand("goLineRight")},m.Home="goLineLeftSmart",f||(m[ye?"Cmd-D":"Ctrl-D"]=!1),this.cmEditor.setOption("extraKeys",m),i.refresh()},e.prototype.showSearch=function(e){void 0===e&&(e=!1),this.search.show(e)},e.prototype.getSelection=function(){return this.editor.getSelection()},e.prototype.highlightSearchMatch=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.cmEditor;r.refresh(),i&&this.clearHighlights(),r.markText(e,t,{className:k_}),n&&r.scrollIntoView({from:e,to:t},r.getWrapperElement().offsetHeight/4)},e.prototype.highlightSearchMatches=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);var i=this.cmEditor;i.refresh(),n&&this.clearHighlights();for(var r=0,o=e;r<o.length;r++){var a=o[r];i.markText(a.from,a.to,{className:k_});for(var s=0,l=i.findMarksAt(a.from);s<l.length;s++){var c=l[s];c.__isFold&&c.clear()}}if(t&&e.length>0){a=e[0];i.scrollIntoView(a,i.getWrapperElement().offsetHeight/4)}},e.prototype.clearHighlights=function(){for(var e=0,t=this.cmEditor.getAllMarks();e<t.length;e++){var n=t[e];n.className===k_&&n.clear()}},e.prototype.onScroll=function(){this.editorSuggest.reposition(),this.scrolling?this.scrolling=!1:this.view.onMarkdownScroll()},e.prototype.getScroll=function(){var e=this.cmEditor,t=e.getScrollInfo(),n=e.lineAtHeight(t.top,"local"),i=e.charCoords({line:n,ch:0},"local"),r=e.charCoords({line:n+1,ch:0},"local"),o=i.top;0===n&&(o=0);var a=r.top;return n+Math.max(0,(t.top-o)/(a-o))},e.prototype.applyScroll=function(e){if(Number.isNumber(e)&&!isNaN(e)){var t=Math.floor(e),n=e-t;this.scrolling=!0;var i=this.cmEditor,r=i.charCoords({line:t,ch:0},"local"),o=i.charCoords({line:t+1,ch:0},"local"),a=r.top;0===t&&(a=0);var s=o.top;i.scrollTo(null,a+(s-a)*n)}},e.prototype.getFoldInfo=function(){for(var e=this.cmEditor,t=[],n=0,i=e.getAllMarks();n<i.length;n++){var r=i[n];if(r.__isFold){var o=r.find();o&&t.push({from:o.from.line,to:o.to.line})}}return t.length>0?{folds:t,lines:e.lineCount()}:null},e.prototype.applyFoldInfo=function(e){var t=this.cmEditor;if((!e||t.lineCount()===e.lines)&&(t.execCommand("unfoldAll"),e))for(var n=new Set,i=0,r=e.folds;i<r.length;i++){var o=r[i].from;n.has(o)||(n.add(o),t.foldCode({line:o,ch:0},null,"fold"))}},e.prototype.attachCmEvents=function(){var e=this,t=this.cmEditor,n=!1,i=rt((function(){e.editorSuggest.trigger(e.editor,e.view.file,n),n=!1}),50),r=rt((function(){return e.view.onMarkdownFold()}),500),o=rt(this.fixIME.bind(this),100,!0);t.on("changes",(function(t,o){for(var a=0,s=o;a<s.length;a++){if("+input"===(u=s[a]).origin||"*compose"===u.origin){e.editor.expandText();break}}for(var l=0,c=o;l<c.length;l++){var u;if("setValue"!==(u=c[l]).origin){e.view.requestSave(),r(),n=!0,i(),e.view.onInternalDataChange();break}}e.app.workspace.trigger("editor-change",e.editor,e.view)})),t.on("markerAdded",r),t.on("markerCleared",r),t.on("cursorActivity",(function(){e.saveCursor(),i(),o()})),t.on("focus",(function(){e.clearHighlights(),e.saveCursor(),Lt.isMobile&&e.app.mobileToolbar.show()})),t.on("blur",(function(){e.editorSuggest.close(),Lt.isMobile&&e.app.mobileToolbar.hide()})),t.on("paste",(function(t,n){e.clipboardManager.handlePaste(n)})),t.on("scroll",this.onScroll.bind(this)),t.on("refresh",(function(){var e=t.getWrapperElement().find(".CodeMirror-measure");if(!e.offsetParent)return;var n=e.createSpan();n.appendText("x");for(var i={},r=0,o=a;r<o.length;r++){i[u=o[r]]=n.createSpan({text:u})}n.appendText("x");for(var l=0,c=a;l<c.length;l++){var u;s[u=c[l]]=i[u].getBoundingClientRect().width}n.detach()}));for(var a=[" ","*","+","-","1","2","3","4","5","6","7","8","9","0",".",">"],s={},l=0,c=a;l<c.length;l++){s[c[l]]=0}t.on("renderLine",(function(e,t,n){var i=n.firstChild;i.style.paddingRight="";var r=(/^\s*([*+-]\s+|\d+\.\s+|>\s*|\[.]\s+)*/.exec(t.text)||[""])[0],o=0;if(r){for(var a=e.getOption("tabSize"),l=0;l<r.length;l++){o+="\t"===r.charAt(l)?a*s[" "]:s[r.charAt(l)]||s[" "]}n.style.textIndent="-"+o+"px",n.style.paddingLeft=4+o+"px"}for(var c=i.firstChild;c;){var u=c.nextSibling;if(!u)break;c.instanceOf(HTMLElement)&&u.instanceOf(HTMLElement)&&c.classList.contains("cm-hashtag-end")&&u.classList.contains("cm-hashtag-end")&&c.removeClass("cm-hashtag-end"),c=u}})),t.setOption("dragDrop",!1);var u=t.display.dragFunctions,h=rt(u.over,0);u.over=function(t){e.clipboardManager.handleDragOver(t),t.preventDefault(),h({target:t.target,clientX:t.clientX,clientY:t.clientY,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}})},t.setOption("dragDrop",!0),t.on("dragleave",(function(){h.cancel()})),t.on("drop",(function(t,n){h.cancel(),e.clipboardManager.handleDrop(n)})),t.refresh()},e.prototype.attachDomEvents=function(){var e=this,t=this.editorEl;t.addEventListener("mousedown",this.onCodeMirrorMousedown.bind(this)),t.addEventListener("contextmenu",(function(t){return e.clipboardManager.onContextMenu(t)}),{capture:!0}),t.on("mouseover",".cm-hmd-internal-link",this.onInternalLinkMouseover.bind(this))},e.prototype.onCodeMirrorMousedown=function(e){if((0===e.button||1===e.button)&&hw.isModEvent(e)){var t=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));t&&(this.view.triggerClickableToken(t,e.shiftKey||1===e.button),e.preventDefault())}},e.prototype.passIfNoSuggestion=function(){if(!this.editorSuggest.isShowingSuggestion())return C_.Pass},e.prototype.onInternalLinkMouseover=function(e,t){var n=this.editor.getClickableTokenAt(this.editor.posAtMouse(e));n&&"internal-link"===n.type&&this.app.workspace.trigger("hover-link",{event:e,source:"editor",hoverParent:this,targetEl:t,linktext:n.text,sourcePath:this.view.file.path})},e.prototype.fixIME=function(){if(!Lt.isMobile){var e=this.cmEditor,t="",n="",i="",r=e.getCursor("anchor");if(r){var o=e.getTokenTypeAt(r);o=(o||"").trim();var a=createSpan();a.className=o.split(" ").filter((function(e){return e})).map((function(e){return"cm-"+e})).join(" "),e.getWrapperElement().find(".CodeMirror-measure").appendChild(a);var s=getComputedStyle(a);n=s.fontSize,t=s.lineHeight,i=s.fontFamily,a.detach()}var l=e.getInputField();l.style.height=t,t||(l.style.height="1px");var c=l.parentElement.style;c.lineHeight=t,c.height=t,c.fontSize=n,c.fontFamily=i}},e.prototype.saveCursor=function(){var e=this.editor;e.hasFocus()&&(this.lastCursor=e.getCursor("anchor"))},e.prototype.onViewClick=function(e){this.editorSuggest.close(),this.clearHighlights()},e.prototype.onResize=function(){this.editor.refresh(),this.editorSuggest.reposition()},e.prototype.onCssChange=function(){this.onResize()},e}(),T_=function(e){function t(t){var n=e.call(this,t)||this;n.lastSavedData=null,n.saving=!1,n.saveAgain=!1,n.isPlaintext=!0,n.data=null,n.dirty=!1;var i=rt(n.save.bind(n),2e3);return n.requestSave=function(){n.dirty=!0,i()},n}return f(t,e),t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.app.vault;this.registerEvent(t.on("modify",this.onModify,this))},t.prototype.onUnloadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.save(!0)];case 1:return e.sent(),[2]}}))}))},t.prototype.onLoadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.loadFileInternal(e,!0)];case 1:return t.sent(),[2]}}))}))},t.prototype.saveImmediately=function(){this.dirty&&this.save(!1)},t.prototype.save=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(this.dirty=!1,n=(t=this).file,i=t.app,r=i.vault,!n||n.deleted)return[2];if(this.saving)return e||(this.saveAgain=!0),[2];if(this.saveAgain=!1,o=this.getViewData(),this.lastSavedData===o||null===this.lastSavedData)return[3,6];a=this.lastSavedData,e?(this.data=null,this.lastSavedData=null,this.clear()):(this.data=o,this.lastSavedData=o),this.saving=!0,l.label=1;case 1:return l.trys.push([1,4,5,6]),[4,jD(r.adapter.promise)];case 2:return l.sent(),[4,r.modify(n,o)];case 3:return l.sent(),[3,6];case 4:throw s=l.sent(),this.lastSavedData=a,console.error(s),new CI(rf.interface.msgFailToSaveFile({filepath:n.path,message:s.message}),0),this.app.fileManager.storeTextFileBackup(n.path,o),s;case 5:return this.saving=!1,this.saveAgain&&!e&&this.save(),[7];case 6:return[2]}}))}))},t.prototype.onModify=function(e){this.saving||e===this.file&&this.loadFileInternal(e,!1)},t.prototype.loadFileInternal=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.saving?[4,this.app.vault.cachedRead(e)]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,this.app.vault.read(e)];case 3:n=o.sent(),o.label=4;case 4:if(i=this.lastSavedData,this.lastSavedData=n,!t&&i){if(i===n)return[2];if(this.dirty){if((r=this.getViewData())===n)return[2];r!==i&&this.isPlaintext&&(n=XO(i,r,n),new CI(rf.interface.msgFileChanged({file:e.path})))}}return this.setData(n,t),[2]}}))}))},t.prototype.setData=function(e,t){(this.data!==e||t)&&(this.data=e,this.setViewData(e,t))},t}(SI);!function(e){e[e.Showing=0]="Showing",e[e.Shown=1]="Shown",e[e.Hiding=2]="Hiding",e[e.Hidden=3]="Hidden"}(x_||(x_={}));var D_=[],A_=[],L_=0,P_=null,I_=function(){for(var e=0,t=D_;e<t.length;e++){t[e].hide()}setTimeout((function(){for(var e=0,t=A_;e<t.length;e++){t[e].hide()}}),5)},O_=function(){for(var e=0,t=D_;e<t.length;e++){t[e].hide()}},F_=function(e){P_={x:e.clientX,y:e.clientY,doc:e.doc}},B_=function(){if(P_)if(0===A_.length)window.removeEventListener("click",I_),window.removeEventListener("contextmenu",O_),window.removeEventListener("mousemove",F_),clearInterval(L_),L_=0;else{for(var e=P_.doc.elementFromPoint(P_.x,P_.y),t=0,n=A_;t<n.length;t++){n[t].detect(e)}for(var i=0,r=A_;i<r.length;i++){r[i].transition()}}},N_=function(){L_||(window.addEventListener("click",I_),window.addEventListener("contextmenu",I_),window.addEventListener("mousemove",F_),L_=window.setInterval(B_,500))},R_=function(e){function t(t,n,i){void 0===i&&(i=300);var r=e.call(this)||this;r.onTarget=!0,r.onHover=!1,r.shownPos=null,r.parent=t,r.targetEl=n,r.waitTime=i,r.state=x_.Showing;var o=r.hoverEl=createDiv("popover hover-popover"),a=r.onMouseIn=r.onMouseIn.bind(r),s=r.onMouseOut=r.onMouseOut.bind(r);return n&&(n.addEventListener("mouseover",a),n.addEventListener("mouseout",s)),o.addEventListener("mouseover",(function(e){ft(e,o)&&(r.onHover=!0,r.transition())})),o.addEventListener("mouseout",(function(e){ft(e,o)&&(r.onHover=!1,r.transition())})),r.timer=window.setTimeout(r.show.bind(r),i),D_.push(r),N_(),r}return f(t,e),t.prototype.onMouseIn=function(e){this.targetEl&&!ft(e,this.targetEl)||(this.onTarget=!0,this.transition())},t.prototype.onMouseOut=function(e){this.targetEl&&!ft(e,this.targetEl)||(this.onTarget=!1,this.transition())},t.prototype.detect=function(e){var t=this.targetEl,n=this.hoverEl;t&&(this.onTarget=e===t||t.contains(e)),this.onHover=e===n||n.contains(e)},t.prototype.shouldShow=function(){return this.shouldShowSelf()||this.shouldShowChild()},t.prototype.shouldShowSelf=function(){return this.onTarget||this.onHover},t.prototype.shouldShowChild=function(){var e=this;return A_.some((function(t){return t!==e&&t.targetEl&&e.hoverEl.contains(t.targetEl)&&t.shouldShow()}))},t.prototype.transition=function(){var e=this,t=this.shouldShow(),n=this.state;t?n===x_.Hiding&&(this.state=x_.Shown,clearTimeout(this.timer)):n===x_.Showing?this.hide():n===x_.Shown&&(this.state=x_.Hiding,this.timer=window.setTimeout((function(){e.shouldShow()?e.transition():e.hide()}),this.waitTime))},t.prototype.show=function(){var e=this.targetEl;!e||e.doc.body.contains(e)?(this.state=x_.Shown,this.timer=0,this.shownPos=P_,this.position(P_),this.onShow(),D_.remove(this),A_.push(this),N_(),this.load()):this.hide()},t.prototype.hide=function(){var e=this,t=this,n=t.hoverEl,i=t.targetEl,r=t.timer;this.state=x_.Hidden,D_.remove(this),A_.remove(this),clearTimeout(r),n.detach(),i&&(i.removeEventListener("mouseover",this.onMouseIn),i.removeEventListener("mouseout",this.onMouseOut)),this.onTarget=!1,this.onHover=!1,A_.filter((function(t){return t.targetEl&&e.hoverEl.contains(t.targetEl)})).forEach((function(e){return e.hide()})),this.onHide(),this.unload()},t.prototype.onShow=function(){var e=this.parent;e.hoverPopover&&e.hoverPopover.hide(),e.hoverPopover=this},t.prototype.onHide=function(){var e=this.parent;e.hoverPopover===this&&(e.hoverPopover=null)},t.prototype.position=function(e){void 0===e&&(e=this.shownPos);var t,n=this.hoverEl,i=this.targetEl;if(e)t={top:e.y-10,bottom:e.y+10,left:e.x,right:e.x};else if(i){var r=Mb(i,i.doc.body);t={top:r.top,bottom:r.top+i.offsetHeight,left:r.left,right:r.left+i.offsetWidth}}else t={top:0,bottom:0,left:0,right:0};var o=activeDocument;if(i){o=i.doc;var a=Qb(i.win);if(a){var s=a.scale,l=a.x,c=a.y;o=a.win.document,t.left=t.left*s+l,t.right=t.right*s+l,t.top=t.top*s+c,t.bottom=t.bottom*s+c}}o.body.appendChild(n),Eb(t,n,{gap:10})},t}(nb),H_=function(){function e(){}return e.encodeUrlQuery=function(e){if(!e)return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&(!0===e[n]?t.push(encodeURIComponent(n)):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])));return t.join("&")},e.decodeUrlQuery=function(e){var t={};if(!e||""===e.trim())return t;for(var n=e.split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r.length>=1&&r[0]){var o=decodeURIComponent(r[0]);2===r.length?t[o]=decodeURIComponent(r[1]):t[o]=""}}return t},e.decodeUrl=function(t){t||(t="");var n=t.split("#"),i=n.length>1?n[1]:"",r=n[0].split("?"),o=r.length>1?r[1]:"";return{path:r[0],query:e.decodeUrlQuery(o),hash:e.decodeUrlQuery(i)}},e.addQuery=function(t,n){return t+(t.contains("?")?"&":"?")+e.encodeUrlQuery(n)},e}(),V_=function(e){function t(n,i,r){var o=e.call(this,n)||this;return o.status=i,o.headers=r,Object.setPrototypeOf(o,t.prototype),o}return f(t,e),t}(Error);function z_(e,t,n,i){var r;if((null===(r=e.throw)||void 0===r||r)&&t>=400)throw new V_("Request failed, status "+t,t,n);return{status:t,headers:n,arrayBuffer:i,get json(){return JSON.parse((new TextDecoder).decode(i))},get text(){return(new TextDecoder).decode(i)}}}function q_(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:return String.isString(e)&&(e={url:e}),SD?(n=!1,e.body instanceof ArrayBuffer?(t=q(e.body),n=!0):t=e.body,[4,DD.requestUrl({url:e.url,method:e.method,contentType:e.contentType,headers:e.headers,body:t,binary:n})]):[3,2];case 1:return i=d.sent(),[2,z_(e,i.status,i.headers,z(i.body))];case 2:return It("electron")?[4,Bt(e)]:[3,4];case 3:return r=d.sent(),[2,z_(e,r.status,r.headers,r.body)];case 4:return o=e.url,a=e.method,s=e.contentType,l=e.body,c=null,s&&(c={"Content-Type":s}),[4,fetch(o,{method:a,headers:c,body:l})];case 5:return[4,(u=d.sent()).arrayBuffer()];case 6:return h=d.sent(),p={},u.headers.forEach((function(e,t){return p[t]=e})),[2,z_(e,u.status,p,h)]}}))}))}function U_(e){var t=this,n=e;return Object.defineProperty(n,"arrayBuffer",{get:function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().arrayBuffer]}}))}))}}),Object.defineProperty(n,"json",{get:function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().json]}}))}))}}),Object.defineProperty(n,"text",{get:function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent().text]}}))}))}}),n}function W_(e){return U_(q_(e))}function __(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,q_(e)];case 1:return[2,t.sent().text]}}))}))}function j_(e){return U_(function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return String.isString(e)&&(e={url:e}),[4,q_(e)];case 1:return[2,t.sent()]}}))}))}(e))}function G_(){var e="https://obsidian.md/download";if(Lt.isDesktopApp){var t=window.process.platform,n="win32"===t?"win":"darwin"===t?"mac":"linux",i=window.process.arch;return H_.addQuery(e,{os:n,arch:i})}if(Lt.isMobileApp){n=TD?"android":"ios";return H_.addQuery(e,{os:n})}return e}window.request=__,window.requestUrl=W_;var K_="https://github.com/";function Y_(e,t,n){return"https://raw.githubusercontent.com/"+e+"/"+(n||"HEAD")+"/"+t}function X_(e){return K_+e}function $_(e,t,n){return K_+e+"/releases/download/"+t+"/"+n}function Z_(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:if(n=t.version||null,i=t.minAppVersion,!G0||!i||!Nd(G0,i))return[2,n];a.label=1;case 1:return a.trys.push([1,3,,4]),n=null,[4,j_(Y_(e,"versions.json")).json];case 2:if(r=a.sent()){for(o in r)r.hasOwnProperty(o)&&(Nd(G0,r[o])||n&&!Nd(n,o)||(n=o));return[2,n]}return[3,4];case 3:return a.sent(),[3,4];case 4:return[2,null]}}))}))}var Q_=/^https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([^\/]+)\/(.*)$/;function J_(e,t){e.on("click","a",(function(t,n){if(0===t.button&&n.instanceOf(HTMLAnchorElement)&&n.getAttr("href").startsWith("#"))for(var i=n.getAttr("href").substring(1).toLowerCase(),r=0,o=e.findAll("h1,h2,h3,h4,h5,h6");r<o.length;r++){var a=o[r],s=a.getAttr("data-heading");if(s)if(s.toLowerCase().replace(GA,"").replace(/ /g,"-")===i)return void a.scrollIntoView({behavior:"smooth",block:"start"})}}));for(var n=0,i=Array.from(e.findAll("div.internal-embed"));n<i.length;n++){if(c=(l=i[n]).getAttr("src")){var r=le(c),o=Y_(t,c);fM.contains(r)?pt(l,o):ct(l,o)}}for(var a=0,s=Array.from(e.findAll("img, video"));a<s.length;a++){var l;if((l=s[a]).instanceOf(HTMLImageElement)||l.instanceOf(HTMLMediaElement)){var c;if(!(c=l.getAttr("src")))continue;if(!c.contains(":")){l.src=Y_(t,c);continue}var u=c.match(Q_);if(u){var h=u[1],p=u[2],d=u[3],f=u[4];l.src=Y_(h+"/"+p,f,d);continue}}}}var ej="release-notes",tj="obsidianmd/obsidian-docs";const nj=function(e){function t(t){var n=e.call(this,t)||this;return n.canDropAnywhere=!0,n.navigation=!0,n.version="",n.contentEl.addClass("release-notes-view"),n}return f(t,e),t.prototype.getDisplayText=function(){return"Release Notes ".concat(this.version)},t.prototype.getViewType=function(){return ej},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.currentVersion=this.version,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=this.version,[4,e.prototype.setState.call(this,t,n)];case 1:return o.sent(),(r=t.currentVersion)&&/^(\d+)\.(\d+)(\.\d+)?$/.test(r)&&(this.version=r),this.version||(this.version=electron.ipcRenderer.sendSync("version")),i!==this.version&&this.render(),[2]}}))}))},t.prototype.fetchReleaseNotes=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=Y_(tj,"Release%20notes/v".concat(e,".md")),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j_({url:t,throw:!0}).text];case 2:return n=r.sent(),[3,4];case 3:return i=r.sent(),n=404===i.status?"No release notes available for ".concat(e,"."):"Could not load release notes for ".concat(e,"."),[3,4];case 4:return[2,n]}}))}))},t.prototype.showPatchNotes=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return e.hasChildNodes()?[3,2]:[4,Ib(e,(function(){return r.fetchReleaseNotes(t)}))];case 1:n=o.sent(),i=ux(lx(rx(n))),e.appendChild(hM(i)),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u=this;return y(this,(function(h){switch(h.label){case 0:return(e=this.contentEl).empty(),t=e.createDiv("cm-scroller"),n=this.app.vault.getConfig("readableLineLength"),t.toggleClass("is-readable-line-width",n),i=t.createDiv("markdown-preview-view markdown-rendered"),r=Bd(this.version),0!==(o=r).last()&&(o=w(w([],o.slice(0,-1),!0),[0],!1)),a=function(e,t){return createDiv("callout is-collapsed is-collapsible",(function(n){var i;n.setAttribute("data-callout",e.type),n.createDiv({cls:"callout-title"},(function(t){t.createDiv({cls:"callout-title-inner",text:e.title});var r=t.createDiv("callout-fold",(function(e){return gb(e,"lucide-chevron-down")}));t.addEventListener("click",(function(){var t,o=n.hasClass("is-collapsed");Be(i,!o,!0),n.toggleClass("is-collapsed",!o),r.toggleClass("is-collapsed",!o),null===(t=e.onClick)||void 0===t||t.call(e,i)}))})),i=n.createDiv("callout-content"),null==t||t(i),Be(i,!0,!1)}))},r.last()>0&&(i.appendChild(a({title:"What's new in v".concat(this.version),type:"attention",onClick:function(e){return u.showPatchNotes(e,u.version)}})),r.last()>1&&i.appendChild(a({title:"Other versions",type:""},(function(e){for(var t=function(t){var n=w(w([],o.slice(0,-1),!0),[t],!1).join(".");e.appendChild(a({title:"What's new in v".concat(n),type:"info",onClick:function(e){return u.showPatchNotes(e,n)}}))},n=r.last()-1;n>=0;n--)t(n)}))),i.createEl("hr")),s=r.slice(0,-1),[4,this.fetchReleaseNotes(s.join("."))];case 1:return l=h.sent(),c=ux(lx(rx(l))),i.createEl("h1",{text:"What's new in v".concat(s.join("."))}),i.appendChild(hM(c)),J_(i,tj),i.createEl("section",{cls:"footnotes"},(function(e){e.createEl("hr"),e.createEl("p",{cls:"footnote",text:"A complete list of previous changes can be found on "},(function(e){e.createEl("a",{href:"https://obsidian.md/changelog",text:"our changelog",cls:"external-link"}),e.appendText(".")}))})),[2]}}))}))},t}(bI);var ij=function(e){function t(){var t=e.call(this)||this;return t.viewByType={},t.typeByExtension={},t.registerViewWithExtensions(mM,iK.VIEW_TYPE,(function(e){return new iK(e)})),t.registerViewWithExtensions(pM,AI.VIEW_TYPE,(function(e){return new AI(e)})),t.registerViewWithExtensions(dM,TI.VIEW_TYPE,(function(e){return new TI(e)})),t.registerViewWithExtensions(fM,RO.VIEW_TYPE,(function(e){return new RO(e)})),t.registerViewWithExtensions(gM,FO.VIEW_TYPE,(function(e){return new FO(e)})),t.registerView(ej,(function(e){return new nj(e)})),t}return f(t,e),t.prototype.registerView=function(e,t){var n=this.viewByType;if(n.hasOwnProperty(e))throw new Error('Attempting to register an existing view type "'.concat(e,'"'));n[e]=t,this.trigger("view-registered",e)},t.prototype.unregisterView=function(e){var t=this.viewByType;t.hasOwnProperty(e)&&(delete t[e],this.trigger("view-unregistered",e))},t.prototype.registerExtensions=function(e,t){for(var n=this.typeByExtension,i=0,r=e;i<r.length;i++){var o=r[i];if(n.hasOwnProperty(o))throw new Error('Attempting to register an existing file extension "'.concat(o,'"'))}for(var a=0,s=e;a<s.length;a++){o=s[a];this.typeByExtension[o]=t}this.trigger("extensions-updated")},t.prototype.unregisterExtensions=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];delete this.typeByExtension[i]}this.trigger("extensions-updated")},t.prototype.registerViewWithExtensions=function(e,t,n){this.registerView(t,n),this.registerExtensions(e,t)},t.prototype.getViewCreatorByType=function(e){return this.viewByType[e]},t.prototype.getTypeByExtension=function(e){return this.typeByExtension[e]},t.prototype.isExtensionRegistered=function(e){return this.typeByExtension.hasOwnProperty(e)},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny);function rj(e){e.checkCallback?e.checkCallback(!1):e.callback?e.callback():console.error("Command ".concat(e," did not provide a callback"))}var oj,aj,sj=function(){function e(e){this.commands={},this.editorCommands={},this.app=e}return e.prototype.addCommand=function(e){var t=this;e.mobileOnly&&!Lt.isMobile||((e.editorCallback||e.editorCheckCallback)&&(e.checkCallback=function(n){var i=t.app.workspace.activeEditor;if(!i)return null;if("preview"!==i.getMode()||e.allowPreview){var r=i.editor,o=i;if(i instanceof iK){if(i.inlineTitleEl.isActiveElement())return;if(!e.allowProperties&&activeDocument.activeElement.closest(".metadata-container"))return}return e.editorCheckCallback?e.editorCheckCallback(n,r,o):e.editorCallback?(n||e.editorCallback(r,o),!0):void 0}},this.editorCommands[e.id]=e),e.showOnMobileToolbar&&(this.editorCommands[e.id]=e),this.commands[e.id]=e,e.hotkeys&&this.app.hotkeyManager.addDefaultHotkeys(e.id,e.hotkeys))},e.prototype.removeCommand=function(e){this.commands.hasOwnProperty(e)&&this.app.hotkeyManager.removeDefaultHotkeys(e),delete this.commands[e],delete this.editorCommands[e]},e.prototype.findCommand=function(e){return this.commands[e]},e.prototype.listCommands=function(){return Object.values(this.commands).filter((function(e){if(!e.checkCallback)return!0;try{return e.checkCallback(!0)}catch(t){return console.log("Command failed to execute: ",e.id),console.error(t),!1}}))},e.prototype.executeCommandById=function(e,t){var n=this.findCommand(e);return!!n&&this.executeCommand(n,t)},e.prototype.executeCommand=function(e,t){this.app.lastEvent=t||null;try{rj(e)}catch(t){return console.log("Command failed to execute: ",e.id),console.error(t),!1}return!0},e}();!function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(oj||(oj={})),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(aj||(aj={}));function lj(e){Object.keys(localStorage).filter(e).forEach((function(e){return localStorage.removeItem(e)}))}function cj(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return[2,i.sent()];case 2:throw t=i.sent(),(n=t.message)&&(n.contains("does not exist")||n.contains("there is no such file"))&&(t.code="ENOENT"),t;case 3:return[2]}}))}))}var uj=5242880;function hj(e){if("NSFileTypeRegular"===e.type?e.type="file":"NSFileTypeDirectory"===e.type&&(e.type="directory"),null===e.ctime&&(e.ctime=0),"children"in e&&e.children)for(var t=0,n=e.children;t<n.length;t++){hj(n[t])}}var pj=function(){function e(e){this.uri="",this.dir=e}return e.prototype.init=function(){return v(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,AD.getUri({directory:this.dir,path:""})];case 1:return e.uri=t.sent().uri,[2]}}))}))},e.prototype.watch=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,AD.startWatch({directory:this.dir,path:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.verifyIcloud=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,AD.verifyIcloud({path:e})];case 1:return t.sent(),[2]}}))}))},e.prototype.read=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.readFile({directory:this.dir,path:e,encoding:ED.UTF8}))];case 1:return[2,t.sent().data]}}))}))},e.prototype.readBinary=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(this.stat(e))];case 1:return t.sent().size<uj?[4,cj(AD.readFile({directory:this.dir,path:e}))]:[3,3];case 2:return[2,z(t.sent().data)];case 3:return[4,fetch(this.getUri(e))];case 4:return[2,t.sent().arrayBuffer()]}}))}))},e.prototype.write=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,cj(AD.writeFile({directory:this.dir,path:e,data:t,encoding:ED.UTF8}))];case 1:return n.sent(),[2]}}))}))},e.prototype.writeBinary=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,cj(this.writeBinaryInternal(e,t))];case 1:return n.sent(),[2]}}))}))},e.prototype.writeBinaryInternal=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t.byteLength<uj?[4,AD.writeFile({directory:this.dir,path:e,data:q(t)})]:[3,2];case 1:return a.sent(),[2];case 2:return[4,AD.writeFile({directory:this.dir,path:e,data:""})];case 3:a.sent(),n=0,a.label=4;case 4:return n<t.byteLength?(i=Math.min(1048576,t.byteLength-n),r=new Uint8Array(t,n,i),o=U(r),[4,AD.appendFile({directory:this.dir,path:e,data:o})]):[3,6];case 5:return a.sent(),n+=i,[3,4];case 6:return[2]}}))}))},e.prototype.append=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,cj(AD.appendFile({directory:this.dir,path:e,data:t,encoding:ED.UTF8}))];case 1:return n.sent(),[2]}}))}))},e.prototype.mkdir=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.mkdir({directory:this.dir,path:e,recursive:!0}))];case 1:return t.sent(),[2]}}))}))},e.prototype.readdir=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.readdir({directory:this.dir,path:e}))];case 1:return[2,t.sent().files]}}))}))},e.prototype.stat=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,cj(AD.stat({directory:this.dir,path:e}))];case 1:return hj(t=n.sent()),[2,t]}}))}))},e.prototype.statAll=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return[4,cj(AD.statAll({directory:this.dir,path:e}))];case 1:return t=i.sent(),hj(n=t.hasOwnProperty("result")?JSON.parse(t.result):t),[2,n]}}))}))},e.prototype.exists=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.stat(e)];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))},e.prototype.setTimes=function(e,t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,cj(AD.setTimes({directory:this.dir,path:e,ctime:t,mtime:n}))];case 1:return i.sent(),[2]}}))}))},e.prototype.rmdir=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.rmdir({directory:this.dir,path:e,recursive:!0}))];case 1:return t.sent(),[2]}}))}))},e.prototype.delete=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.deleteFile({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.rename=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,cj(AD.rename({directory:this.dir,from:e,to:t}))];case 1:return n.sent(),[2]}}))}))},e.prototype.copy=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,cj(AD.copy({directory:this.dir,from:e,to:t}))];case 1:return n.sent(),[2]}}))}))},e.prototype.open=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.open({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.trash=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cj(AD.trash({directory:this.dir,path:e}))];case 1:return t.sent(),[2]}}))}))},e.prototype.getNativeUri=function(e){e=pe(e);var t=this.uri;return"/"===e?t:(t.endsWith("/")||(t+="/"),t+e.split("/").map((function(e){return encodeURIComponent(e)})).join("/"))},e.prototype.getUri=function(e){var t=this.getNativeUri(e);return t.startsWith("file://")&&(t=A.convertFileSrc(t)),t},e}();function dj(e){return{ctime:Math.round(e.ctime),mtime:Math.round(e.mtime),size:e.size}}window.FS=pj;var fj=function(){function e(e,t){var n=this;this.fs=t,this.basePath=e,this.files={},this.promise=Promise.resolve(),this.handler=null,this.insensitive=!1,v(n,void 0,void 0,(function(){return y(this,(function(e){try{this.testInsensitive()}catch(e){console.error(e)}return[2]}))}))}return e.prototype.testInsensitive=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2]}))}))},e.prototype.getName=function(){return ie(this.basePath)},e.prototype.listAll=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:this.files["/"]={type:"folder",realpath:"/"},o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.fs.statAll(this.getFullRealPath(""))];case 2:if((e=o.sent()).children)for(t=0,n=e.children;t<n.length;t++)i=n[t],this.quickListRecursive("",i);return[3,5];case 3:return r=o.sent(),console.error("Failed to run quick list",r),[4,this.listRecursive("")];case 4:return o.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.quickListRecursive=function(e,t){var n=t.name,i=pe(""===e?n:e+"/"+n),r=he(i);if(this.trigger("raw",r),!oe(r))if("file"===t.type)this.reconcileFileChanged(i,r,t);else if("directory"===t.type&&(this.files.hasOwnProperty(r)?this.files[r].realpath=i:(this.files[r]={type:"folder",realpath:i},this.trigger("folder-created",r)),t.children))for(var o=0,a=t.children;o<a.length;o++){var s=a[o];this.quickListRecursive(i,s)}},e.prototype.listRecursive=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=this.getFullRealPath(e),[4,this.fs.readdir(t)];case 1:for(n=s.sent(),i=[],r=0,o=n;r<o.length;r++)a=o[r],i.push(this.listRecursiveChild(e,a));return[4,Promise.all(i)];case 2:return s.sent(),[2]}}))}))},e.prototype.listRecursiveChild=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=pe(""===e?t:e+"/"+t),i=he(n),this.trigger("raw",i),oe(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,o.sent()];case 2:return[4,this.fs.stat(this.getFullRealPath(n))];case 3:return"file"!==(r=o.sent()).type?[3,4]:(this.reconcileFileChanged(n,i,r),[3,6]);case 4:return"directory"!==r.type?[3,6]:[4,this.reconcileFolderCreation(n,i)];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))},e.prototype.mkdir=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=this.getFullPath(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fs.mkdir(t)];case 2:return i.sent(),[3,4];case 3:if("Directory exists"!==(n=i.sent()).message)throw n;return[3,4];case 4:return[4,this.reconcileInternalFile(e)];case 5:return i.sent(),[2]}}))}))}))},e.prototype.trashSystem=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:t=this.getFullPath(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fs.trash(t)];case 2:return n.sent(),[3,4];case 3:return n.sent(),[2,!1];case 4:return[4,this.reconcileInternalFile(e)];case 5:return n.sent(),[2,!0]}}))}))}))},e.prototype.trashLocal=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:t=this.getFullPath(e),n=this.getFullPath(".trash"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fs.mkdir(n)];case 2:return c.sent(),[3,4];case 3:if("Directory exists"!==(i=c.sent()).message)throw i;return[3,4];case 4:r=ie(t),o=se(r),a=le(r),s=n+"/"+o,a&&(s=s+"."+a),l=1,c.label=5;case 5:return[4,this._exists(s)];case 6:return c.sent()?(l++,s=n+"/"+o+" "+l,a&&(s=s+"."+a),[3,5]):[3,7];case 7:return[4,this.fs.rename(t,s)];case 8:return c.sent(),[4,this.reconcileInternalFile(e)];case 9:return c.sent(),[2]}}))}))}))},e.prototype.rmdir=function(e,t){var n=this;return this.queue((function(){return v(n,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fs.rmdir(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.read=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fs.read(t)]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.readBinary=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){t=this.getFullPath(e);try{return[2,this.fs.readBinary(t)]}catch(t){throw this.queue((function(){return n.reconcileInternalFile(e)})),t}return[2]}))}))}))},e.prototype.write=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.write(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.writeBinary=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.writeBinary(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.append=function(e,t,n){var i=this;return this.queue((function(){return v(i,void 0,void 0,(function(){var i;return y(this,(function(r){switch(r.label){case 0:i=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,,6,8]),[4,this.fs.append(i,t)];case 2:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,4]:[3,5];case 3:r.sent(),r.label=4;case 4:n.immediate&&n.immediate(),r.label=5;case 5:return[3,8];case 6:return[4,this.reconcileInternalFile(e)];case 7:return r.sent(),[7];case 8:return[2]}}))}))}))},e.prototype.process=function(e,t,n){return v(this,void 0,Promise,(function(){var i=this;return y(this,(function(r){return[2,this.queue((function(){return v(i,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=this.getFullPath(e),[4,this.fs.read(i)];case 1:if(r=a.sent(),(o=t(r))===r)return[2,r];a.label=2;case 2:return a.trys.push([2,,7,9]),[4,this.fs.write(i,o)];case 3:return a.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,5]:[3,6];case 4:a.sent(),a.label=5;case 5:n.immediate&&n.immediate(),a.label=6;case 6:return[3,9];case 7:return[4,this.reconcileInternalFile(e)];case 8:return a.sent(),[7];case 9:return[2,o]}}))}))}))]}))}))},e.prototype.getResourcePath=function(e){var t=this.getFullPath(e);return this.fs.getUri(t)},e.prototype.getNativePath=function(e){var t=this.getFullPath(e);return this.fs.getNativeUri(t)},e.prototype.open=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){return t=this.getFullPath(e),[2,this.fs.open(t)]}))}))},e.prototype.remove=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=this.getFullPath(e),[4,this.fs.delete(t)];case 1:return n.sent(),[4,this.reconcileInternalFile(e)];case 2:return n.sent(),[2]}}))}))}))},e.prototype.update=function(e){var t=this;return this.queue((function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.reconcileInternalFile(e)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.rename=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return e===t?[2]:[4,this.queue((function(){return v(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this._exists(i,!1)];case 1:if(p.sent()&&(!this.insensitive||e.toLowerCase()!==t.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[e],o=r?r.realpath:null,[4,this.fs.rename(n,i)];case 2:if(p.sent(),!r)return[2];if(delete this.files[e],a=this.getRealPath(t),r.realpath=a,this.files[t]=r,this.trigger("renamed",t,e),"folder"===r.type)for(s in this.files)this.files.hasOwnProperty(s)&&s.startsWith(e+"/")&&(l=s.slice(e.length),c=t+l,u=this.files[s],delete this.files[s],h=u.realpath.slice(o.length),u.realpath=a+h,this.files[c]=u,this.trigger("renamed",c,s));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.copy=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return v(n,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(e),i=this.getFullPath(t),[4,this.fs.copy(n,i)];case 1:return r.sent(),[4,this.reconcileInternalFile(t)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},e.prototype.exists=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(e);return n._exists(i,t)}))]}))}))},e.prototype._exists=function(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fs.stat(e)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return t&&this.insensitive?(n=re(e),i=ie(e),[4,this.fs.readdir(n)]):[3,5];case 4:if(-1===r.sent().indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},e.prototype.stat=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=this.getFullPath(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fs.stat(t)];case 2:return"file"===(n=r.sent()).type?[2,g({type:"file"},dj(n))]:"directory"===n.type?[2,g({type:"folder"},dj(n))]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},e.prototype.list=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=this.getFullPath(e),[4,this.fs.readdir(t)];case 1:n=u.sent(),i={folders:[],files:[]},r=0,o=n,u.label=2;case 2:return r<o.length?(a=o[r],s=pe(""===e?a:e+"/"+a),l=he(s),[4,this.fs.stat(this.getFullRealPath(s))]):[3,5];case 3:"file"===(c=u.sent()).type&&i.files.push(l),"directory"===c.type&&i.folders.push(l),u.label=4;case 4:return r++,[3,2];case 5:return[2,i]}}))}))}))]}))}))},e.prototype.watch=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return this.stopWatch(),this.handler=e,[4,AD.addListener("change",(function(e){var n=pe(e.path),i=pe(n.substr(t.basePath.length));t.onFileChange(i)}))];case 1:return n.sent(),[2,this.queue((function(){return t.listAll()}))]}}))}))},e.prototype.stopWatch=function(){try{AD.removeAllListeners()}catch(e){}this.handler=null},e.prototype.onFileChange=function(e){var t=this;e&&(e=pe(e),setTimeout((function(){var n=he(e);t.queue((function(){return t.reconcileFile(e,n,!1)}))}),0))},e.prototype.reconcileInternalFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.reconcileFile(this.getRealPath(e),e)]}))}))},e.prototype.reconcileFile=function(e,t,n){return void 0===n&&(n=!0),v(this,void 0,Promise,(function(){var i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return this.trigger("raw",t),oe(t)?[4,this.reconcileDeletion(e,t,n)]:[3,2];case 1:return[2,l.sent()];case 2:return l.trys.push([2,10,,14]),i=this.getFullRealPath(e),this.insensitive?(r=re(i),o=ie(t),[4,this.fs.readdir(r)]):[3,5];case 3:return-1!==l.sent().map((function(e){return Fd(e).normalize("NFC")})).indexOf(o)?[3,5]:[4,this.reconcileDeletion(e,t,n)];case 4:return[2,l.sent()];case 5:return[4,this.fs.stat(i)];case 6:return"file"!==(a=l.sent()).type?[3,7]:(this.reconcileFileChanged(e,t,a),[3,9]);case 7:return"directory"!==a.type?[3,9]:[4,this.reconcileFolderCreation(e,t)];case 8:l.sent(),l.label=9;case 9:return[3,14];case 10:return"ENOENT"!==(s=l.sent()).code?[3,12]:[4,this.reconcileDeletion(e,t,n)];case 11:return l.sent(),[3,13];case 12:console.error(s),l.label=13;case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.reconcileFileChanged=function(e,t,n){var i=this.files[t];if(i){if(i.realpath=e,"file"===i.type&&(i.mtime!==Math.round(n.mtime)||i.size!==n.size)){i.mtime=Math.round(n.mtime),i.size=n.size;var r=dj(n);this.trigger("modified",t,t,r)}}else this.reconcileFileCreation(e,t,n)},e.prototype.reconcileFileCreation=function(e,t,n){var i=dj(n);this.files[t]||(this.files[t]=function(e,t){return"file"===t.type?{type:"file",realpath:e,ctime:Math.round(t.ctime),mtime:Math.round(t.mtime),size:t.size}:"directory"===t.type?{type:"folder",realpath:e}:void 0}(e,n),this.trigger("file-created",t,t,i))},e.prototype.reconcileFolderCreation=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(t)?[3,2]:(this.files[t]={type:"folder",realpath:e},this.trigger("folder-created",t),[4,this.listRecursive(e)]);case 1:return n.sent(),[3,3];case 2:this.files[t].realpath=e,n.label=3;case 3:return[2]}}))}))},e.prototype.reconcileDeletion=function(e,t,n){return void 0===n&&(n=!0),v(this,void 0,Promise,(function(){var i,r,o=this;return y(this,(function(a){if("/"===t)return this.trigger("closed",t),[2];if(!(i=this.files[t]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(e,t)}))}),100),[2];if("folder"===i.type)for(r in this.files)this.files.hasOwnProperty(r)&&r.startsWith(t+"/")&&this.removeFile(r);return this.removeFile(t),[2]}))}))},e.prototype.trigger=function(e,t,n,i){this.handler&&this.handler(e,t,n,i)},e.prototype.getRealPath=function(e){for(var t=e;t;){if(this.files.hasOwnProperty(t)){var n=e.substr(t.length);return this.files[t].realpath+n}t=re(t)}return e},e.prototype.getFullPath=function(e){var t=this.getRealPath(e);return this.getFullRealPath(t)},e.prototype.getFullRealPath=function(e){return this.basePath+"/"+e},e.prototype.queue=function(e){var t=this.promise.then(e,e);return this.promise=t,t},e.prototype.removeFile=function(e){var t=this.files[e];delete this.files[e],t&&("file"===t.type?this.trigger("file-removed",e):"folder"===t.type&&this.trigger("folder-removed",e))},e}();function gj(e){for(var t=createDiv("loader-cube"),n=1;n<=9;n++)t.createDiv({cls:"sk-cube sk-cube".concat(n)});return e&&e.appendChild(t),t}function mj(e){var t=createDiv("loader-spinner");return gb(t,"loader-2"),e&&e.appendChild(t),t}function vj(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:e.addClass("is-loading"),n=mj(e),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,t()];case 2:return[2,i.sent()];case 3:return n.detach(),e.removeClass("is-loading"),[7];case 4:return[2]}}))}))}var yj,bj=[],wj=null,kj=null,Cj="Documents",Ej="Obsidian";function xj(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(p){switch(p.label){case 0:return e=[],t=function(t,n,i,r,o){return v(h,void 0,void 0,(function(){var a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,t.readdir(n)];case 1:return a=d.sent(),[3,3];case 2:return s=d.sent(),console.error(s),[2];case 3:l=0,c=a,d.label=4;case 4:if(!(l<c.length))return[3,9];if((u=c[l]).startsWith("."))return[3,8];if(o&&o.contains(u))return[3,8];d.label=5;case 5:return d.trys.push([5,7,,8]),h=n?n+"/"+u:u,[4,t.stat(h)];case 6:return"directory"===d.sent().type&&e.push({name:u,location:i+u,storageType:r?"iCloud":"local"}),[3,8];case 7:return p=d.sent(),console.error(p),[3,8];case 8:return l++,[3,4];case 9:return[2]}}))}))},MD?wj?[4,t(wj,Cj,"icloud/",!0)]:[3,2]:[3,4];case 1:p.sent(),p.label=2;case 2:return[4,t(yj,"","documents/")];case 3:return p.sent(),[3,12];case 4:if(!TD)return[3,12];n=yj.getUri("")+"/",i=[],r=0,o=bj,p.label=5;case 5:if(!(r<o.length))return[3,10];a=o[r],p.label=6;case 6:return p.trys.push([6,8,,9]),(s=kj.getUri(a)).startsWith(n)&&(l=s.substr(n.length)).toLowerCase().startsWith("obsidian/")&&((c=l.substr(9)).contains("/")||i.push(decodeURIComponent(c))),[4,kj.stat(a)];case 7:return"directory"===p.sent().type&&e.push({location:a,name:ie(a),storageType:"local"}),[3,9];case 8:return u=p.sent(),console.error(u),[3,9];case 9:return r++,[3,5];case 10:return[4,t(yj,Ej,"",!1,i)];case 11:p.sent(),p.label=12;case 12:return[2,e]}}))}))}!function(){function e(e){var t=this.el=e.createDiv("mobile-vault-chooser-action");this.iconEl=t.createDiv({cls:"mobile-vault-chooser-action-icon"}),this.titleEl=t.createDiv({cls:"mobile-vault-chooser-action-name"})}e.prototype.setIcon=function(e){return gb(this.iconEl,e),this},e.prototype.setTitle=function(e){return this.titleEl.setText(e),this},e.prototype.onClick=function(e){return this.el.addEventListener("click",(function(t){0!==t.button||t.defaultPrevented||e(t)})),this},e.prototype.addButton=function(e,t){var n=this.el.createDiv({cls:"mobile-vault-chooser-action-icon"});return gb(n,e),t&&n.onClickEvent((function(e){e.preventDefault(),t(e)})),this}}();var Sj=function(e){function t(t,n){var i=e.call(this,t)||this;i.canDropAnywhere=!0,i.viewType=n;var r=i.emptyTitleEl;r.setText(rf.interface.emptyState.unknownPaneTitle()),r.createSpan("empty-state-close-button",(function(e){gb(e,"lucide-x"),e.addEventListener("click",(function(){i.leaf.detach()}))}));var o=createDiv({text:rf.interface.emptyState.unknownPaneDesc({type:n})});return aS(o,"This pane doesn't look like anything to me."),i.clickableAreaEl.insertAfter(o,r),i}return f(t,e),t.prototype.getDisplayText=function(){return""},t.prototype.getViewType=function(){return this.viewType},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(t){return this.state=e,[2]}))}))},t}(wI),Mj=200,Tj={duration:275,fn:"var(--anim-motion-swing)"},Dj=function(e){function t(t,n){var i=e.call(this)||this;i.containerEl=null,i.dimension=null,i.component=new nb,i.app=t.app,i.workspace=t,i.id=n||$e(16);var r=i.containerEl=createDiv(),o=i.resizeHandleEl=r.createEl("hr","workspace-leaf-resize-handle");return i.component.load(),o.addEventListener("mousedown",i.onResizeStart.bind(i)),i}return f(t,e),Object.defineProperty(t.prototype,"parentSplit",{get:function(){return this.parent},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){var e={id:this.id,type:this.type};return this.dimension&&(e.dimension=this.dimension),e},t.prototype.onResizeStart=function(e){if(0===e.button){var t=this.parent;t instanceof Lj&&t.onChildResizeStart(this,e)}},t.prototype.setParent=function(e){this.parent=e},t.prototype.getRoot=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getContainer=function(){for(var e=this;e.parent;){if(e instanceof Ij)return e;e=e.parent}return e instanceof Ij?e:this.workspace.rootSplit},t.prototype.setDimension=function(e){null!==e&&(e<=0||e>=100)&&(e=null),this.dimension=e;var t=this.containerEl,n="";e&&(n=String(e)),t.style.flexGrow=n},t.prototype.detach=function(){this.parent&&this.parent.removeChild(this)},t.prototype.getIcon=function(){return"lucide-file"},t}(Ny),Aj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowSingleChild=!1,t.autoManageDOM=!0,t}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.children=this.children.map((function(e){return e.serialize()})),t},t.prototype.replaceChild=function(e,t){var n=this,i=n.workspace,r=n.autoManageDOM,o=n.containerEl,a=n.children;e<0&&(e=0),e>=a.length&&(e=a.length);var s=a[e],l=s.containerEl.nextSibling;if(r&&s.containerEl.detach(),s.setParent(null),a[e]=t,r){var c=t.containerEl;o.insertBefore(c,l)}t.setParent(this),i.onLayoutChange(this)},t.prototype.insertChild=function(e,t){var n=this,i=n.workspace,r=n.autoManageDOM,o=n.containerEl,a=n.children;(e<0||e>=a.length)&&(e=a.length);var s=a[e],l=s?s.containerEl:null;if(a.splice(e,0,t),r){var c=t.containerEl;o.insertBefore(c,l)}t.setParent(this),i.onLayoutChange(this)},t.prototype.removeChild=function(e){var t=this,n=t.workspace,i=t.autoManageDOM,r=t.parent,o=t.children;if(o.remove(e),e.setParent(null),i&&e.containerEl.detach(),r)if(1!==o.length||this.allowSingleChild){if(0===o.length)return void r.removeChild(this)}else{var a=o[0];o.remove(a),i&&a.containerEl.detach(),a.setParent(null);var s=r.children.indexOf(this);i&&r.replaceChild(s,a),a.setDimension(this.dimension)}n.onLayoutChange(this)},t.prototype.recomputeChildrenDimensions=function(){},t}(Dj),Lj=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.parent=null,r.children=[],r.type="split",r.direction=null,r.resizeStartPos=null,r.originalSizes=null,r.isResizing=!1,r.workspace=t,r.containerEl.addClass("workspace-split"),r.setDirection(n),r}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.direction=this.direction,t},t.prototype.setDirection=function(e){this.containerEl.removeClass("mod-"+this.direction),this.direction=e,this.containerEl.addClass("mod-"+e)},t.prototype.recomputeChildrenDimensions=function(){for(var e=this.children,t=0,n=0,i=e;n<i.length;n++){if(null==(a=i[n]).dimension){t=null;break}t+=a.dimension}for(var r=0,o=e;r<o.length;r++){var a=o[r];null==t||isNaN(t)?a.setDimension(null):a.setDimension(100*a.dimension/t)}this.workspace.requestResize()},t.prototype.onChildResizeStart=function(e,t){var n=this;if(0===t.button){var i=t.win;this.resizeStartPos={x:t.clientX,y:t.clientY};var r=function(t){if(0===t.button){var i=t.clientX,r=t.clientY,o=0;"vertical"===n.direction?o=i-n.resizeStartPos.x:"horizontal"===n.direction&&(o=r-n.resizeStartPos.y);var a=n.children.indexOf(e);if(n.isResizing||(n.originalSizes=n.children.map((function(e){return n.getElSize(e.containerEl)})),n.isResizing=!0),n.isResizing){var s=n.children.slice(0,a+1),l=n.children.slice(a+1);if(s.reverse(),o>0){var c=n.resizeItemsByDiff(l,o,1);Math.abs(o)>c&&(o=c),n.resizeItemsByDiff(s,o,-1)}else{c=n.resizeItemsByDiff(s,o,-1);Math.abs(o)>c&&(o=-c),n.resizeItemsByDiff(l,o,1)}t.preventDefault()}}},o=function(){i.removeEventListener("mousemove",r),i.removeEventListener("mouseup",o),document.body.removeClass("is-grabbing");try{n.finishResize()}catch(e){console.error(e)}};i.addEventListener("mousemove",r),i.addEventListener("mouseup",o),document.body.addClass("is-grabbing")}},t.prototype.resizeItemsByDiff=function(e,t,n){for(var i=0,r=0,o=e;r<o.length;r++){var a=o[r],s=this.children.indexOf(a),l=this.originalSizes[s],c=l-t*n,u=l-(c=Math.max(200,c));t-=u*n,i+=Math.abs(u),this.setElSize(this.children[s].containerEl,c)}return i},t.prototype.finishResize=function(){this.isResizing=!1,this.resizeStartPos=null;for(var e=this.children,t=[],n=0,i=0,r=e;i<r.length;i++){var o=r[i],a=this.getElSize(o.containerEl);t.push(a),n+=a}for(var s=0;s<e.length;s++){o=e[s],a=t[s];this.unsetElSize(o.containerEl);var l=a/n*100;o.setDimension(l)}this.workspace.requestSaveLayout(),this.workspace.requestResize()},t.prototype.getElSize=function(e){return"vertical"===this.direction?e.offsetWidth:"horizontal"===this.direction?e.offsetHeight:void 0},t.prototype.setElSize=function(e,t){return e.style.flex="0 0 auto","vertical"===this.direction?e.style.width="".concat(t,"px"):"horizontal"===this.direction?e.style.height="".concat(t,"px"):void 0},t.prototype.unsetElSize=function(e){e.style.flex="",e.style.width="",e.style.height=""},t}(Aj),Pj=function(e){function t(t,n,i,r){var o=e.call(this,t,n,r)||this;return o.size=300,o.collapsed=!1,o.emptyStateEl=null,o.side=i,o.containerEl.addClass("mod-".concat(i,"-split")),o.workspace.containerEl.addClass("is-".concat(i,"-sidedock-open")),o.resizeHandleEl.addEventListener("mousedown",o.onSidedockResizeStart.bind(o)),o.emptyStateEl=o.containerEl.createDiv("workspace-sidedock-empty-state",(function(e){e.createEl("p",{cls:"u-muted",text:rf.interface.emptySidebar()})})),o.setSize(o.size),o}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.width=this.size,this.collapsed&&(t.collapsed=!0),t},t.prototype.setSize=function(e){this.size=e,this.containerEl.style.width="".concat(e,"px")},t.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},t.prototype.collapse=function(){if(!this.collapsed){this.collapsed=!0;var e=this,t=e.workspace,n=e.side,i=e.containerEl,r=e.resizeHandleEl,o=e.children;if(t.containerEl.removeClass("is-".concat(n,"-sidedock-open")),i.addClass("is-sidedock-collapsed"),"left"===n?t.leftRibbon.setCollapsedState(!0):"right"===n&&t.rightRibbon.setCollapsedState(!0),this.workspace.layoutReady){for(var a="".concat(this.size,"px"),s=o.map((function(e){return e.containerEl})),l=0,c=s;l<c.length;l++){c[l].style.minWidth=a}Le(i,!0),Ie(i,new Te(Tj).addProp("width",a,"0"),(function(){i.hide();for(var e=0,n=s;e<n.length;e++){n[e].style.minWidth=""}t.requestResize()}))}else i.hide(),i.style.width="0";t.requestSaveLayout(),t.updateFrameless(),r.style.opacity="0"}},t.prototype.expand=function(){if(this.collapsed){this.collapsed=!1;var e=this,t=e.workspace,n=e.side,i=e.containerEl,r=e.resizeHandleEl,o=e.children;t.containerEl.addClass("is-".concat(n,"-sidedock-open")),i.removeClass("is-sidedock-collapsed"),"left"===n?t.leftRibbon.setCollapsedState(!1):"right"===n&&t.rightRibbon.setCollapsedState(!1);for(var a="".concat(this.size,"px"),s=o.map((function(e){return e.containerEl})),l=0,c=s;l<c.length;l++){c[l].style.minWidth=a}i.show(),Le(i,!0),Ie(i,new Te(Tj).addProp("width","0",a),(function(){for(var e=0,n=s;e<n.length;e++){n[e].style.minWidth=""}t.requestResize()})),t.requestSaveLayout(),t.updateFrameless(),r.style.opacity="1"}},t.prototype.onSidedockResizeStart=function(e){var t=this;if(0===e.button){var n=e.win;this.app.disableCssTransition();var i=function(e){var n=e.clientX,i=Mj,r=t.containerEl.getBoundingClientRect();if("left"===t.side?(i=n-r.x,i+=t.resizeHandleEl.offsetWidth/2):"right"===t.side&&(i=t.workspace.containerEl.clientWidth-n,i+=t.resizeHandleEl.offsetWidth/2),!t.collapsed&&i<50)t.collapse();else if(t.collapsed&&i>=Mj)t.expand();else if(!t.collapsed){var o=t.workspace.containerEl.clientWidth,a=Math.clamp(i,Mj,Math.max(Mj,.8*o));t.setSize(a)}e.preventDefault()},r=function(e){0===e.button&&(n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",r),document.body.removeClass("is-grabbing"),t.app.enableCssTransition(),t.workspace.requestSaveLayout(),t.workspace.requestResize())};n.addEventListener("mousemove",i),n.addEventListener("mouseup",r),document.body.addClass("is-grabbing")}},t.prototype.recomputeChildrenDimensions=function(){e.prototype.recomputeChildrenDimensions.call(this),0===this.children.length?(this.collapse(),this.emptyStateEl.show(),"right"===this.side&&this.workspace.rightRibbon.hide()):(this.emptyStateEl.hide(),"right"===this.side&&this.workspace.rightRibbon.show())},t}(Lj),Ij=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allowSingleChild=!0,t}return f(t,e),t.prototype.onFocus=function(){var e=this;setTimeout((function(){if(e.doc.hasFocus()){var t=!!e.doc.querySelector(".modal-container"),n=e.workspace,i=n.activeLeaf;if(!i||i.getContainer()!==e){var r=n.getMostRecentLeaf(e);r&&n.setActiveLeaf(r,{focus:!Lt.isMobile&&!t})}}}),100)},t.prototype.focus=function(){Lt.isDesktopApp&&!this.doc.hasFocus()&&this.win.electronWindow.focus()},t}(Lj);function Oj(e){if(e.deltaY){var t=e.currentTarget;Math.abs(e.deltaX)>Math.abs(e.deltaY)?t.scrollLeft+=e.deltaX:t.scrollLeft+=e.deltaY,e.preventDefault()}}var Fj=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.type="tabs",i.children=[],i.parent=null,i.allowSingleChild=!0,i.autoManageDOM=!1,i.tabHeaderEls=[],i.currentTab=0,i.hasLockedTabWidths=!1,i.isStacked=!1,i.containerEl.addClass("workspace-tabs");var r=i.tabHeaderContainerEl=i.containerEl.createDiv("workspace-tab-header-container"),o=i.tabsInnerEl=r.createDiv("workspace-tab-header-container-inner"),a=i.tabsContainerEl=i.containerEl.createDiv("workspace-tab-container");return i.containerEl.on("click",".workspace-tab-header",(function(e,t){var n=i.tabHeaderEls.indexOf(t);if(-1!==n){i.selectTabIndex(n);var r=i.children[n];r instanceof Nj&&i.workspace.setActiveLeaf(r,{focus:!0})}})),o.addEventListener("wheel",Oj,{passive:!1}),window.frameDom&&hI(r),r.addEventListener("mouseleave",(function(){i.unlockTabWidths()})),a.addEventListener("scroll",(function(){return i.onContainerScroll()}),Cb),r.createDiv("workspace-tab-header-new-tab",(function(e){e.createSpan("clickable-icon",(function(e){aS(e,rf.interface.labelNewTab()),gb(e,"lucide-plus"),e.addEventListener("click",(function(){var e=new Nj(i.app);i.insertChild(i.children.length,e),i.selectTabIndex(i.children.length),i.workspace.setActiveLeaf(e,{focus:!0})}))}))})),r.createDiv("workspace-tab-header-spacer"),r.createDiv("workspace-tab-header-tab-list",(function(e){e.createSpan("clickable-icon",(function(e){gb(e,"lucide-chevron-down");var t=function(t){if(!e.classList.contains("has-active-menu")){var n=(new fw).addSections(["action","close","","tablist"]);n.dom.addClass("mod-tab-list"),n.addItem((function(e){return e.setSection("action").setTitle(i.isStacked?rf.interface.menu.unstackTabs():rf.interface.menu.stackTabs()).setIcon("lucide-layers").onClick((function(){i.setStacked(!i.isStacked)}))})).addItem((function(e){return e.setSection("close").setTitle(rf.interface.menu.closeAll()).setIcon("lucide-x").onClick((function(){for(var e=0,t=i.children.slice();e<t.length;e++){var n=t[e];n&&n.canNavigate()&&n.detach()}}))})),i.workspace.trigger("tab-group-menu",n,i);for(var r=function(e){if(!(e instanceof Nj))return"continue";var t=e,r=e.view;if(!r)return"continue";n.addItem((function(e){return e.setSection("tablist").setTitle(r.getDisplayText()).setIcon(r.getIcon()).onClick((function(){i.selectTab(t)}))}))},o=0,a=i.children;o<a.length;o++){r(a[o])}var s=e.getBoundingClientRect();n.setParentElement(e).showAtPosition({x:s.x,y:s.bottom,width:s.width,overlap:!0,left:!0})}};e.addEventListener("click",t),e.addEventListener("contextmenu",t)}))})),i.app.dragManager.handleDrop(r,(function(e,t,n){if("file"===t.type||"files"===t.type||"link"===t.type||"bookmarks"===t.type){var r=i.getTabInsertLocation(e.clientX),o=r.rect,a=r.index,s=r.droppedIndex;if("link"===t.type){if(null!==s)if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),l.openLinkText(t.linktext,t.sourcePath,{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:rf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"};if(!n){var l=new Nj(i.app);i.insertChild(a,l),l.openLinkText(t.linktext,t.sourcePath,{active:!0})}}else if("bookmarks"===t.type){var c=i.app.internalPlugins.getEnabledPluginById("bookmarks"),u=t.items.map((function(e){return e.item})).filter((function(e){return"file"===e.type||"graph"===e.type}));if(c){if(null!==s){if(1!==u.length)return;if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),c.openBookmarkInLeaf(u[0],l,{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:rf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}}else if(0===u.length)return;if(!n){for(var h=[],p=0;p<u.length;p++){var d=new Nj(i.app);i.insertChild(a,d),a++,h.push(d)}v(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<u.length?(t=h[e],[4,c.openBookmarkInLeaf(u[e],t,{active:!0})]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return this.workspace.setActiveLeaf(h.last(),{focus:!0}),[2]}}))}))}}}else{var f=("files"===t.type?t.files:[t.file]).filter((function(e){return e instanceof Xy}));if(0===f.length)return;if(1===f.length&&null!==s)if((l=i.children[s]).canNavigate())return n||(i.workspace.setActiveLeaf(l),l.openFile(f[0],{active:!0})),{hoverEl:l.tabHeaderEl,hoverClass:"is-highlighted",action:rf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"};if(!n){var g=[];for(p=0;p<f.length;p++){d=new Nj(i.app);i.insertChild(a,d),a++,g.push(d)}v(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<f.length?[4,g[e].openFile(f[e],{active:!1})]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return this.workspace.setActiveLeaf(g.last(),{focus:!0}),[2]}}))}))}}return i.app.dragManager.showOverlay(e.doc,o),{action:rf.interface.dragAndDrop.openAsTab(),dropEffect:"copy"}}})),new ResizeObserver(i.updateSlidingTabs.bind(i)).observe(i.tabsContainerEl),i}return f(t,e),t.createFrom=function(e,n){var i=new t(e);return i.insertChild(0,n),i},t.prototype.setStacked=function(e){this.isStacked!==e&&(this.isStacked=e,this.containerEl.toggleClass("mod-stacked",e),this.children.length>0&&(this.updateTabDisplay(),this.scrollIntoView(this.currentTab),this.workspace.requestUpdateLayout()))},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.currentTab>0&&(t.currentTab=this.currentTab),this.isStacked&&(t.stacked=!0),t},t.prototype.selectTabIndex=function(e){var t;this.currentTab=e,this.updateTabDisplay(),this.isStacked&&(null===(t=this.children[this.currentTab])||void 0===t||t.containerEl.removeClass("is-hidden"),this.scrollIntoView(this.currentTab))},t.prototype.selectTab=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.updateTabDisplay=function(){var e=this,t=e.isStacked,n=e.currentTab,i=e.tabsInnerEl,r=e.tabsContainerEl,o=e.children;if(0!==o.length){n<0&&(n=0),n>=o.length&&(n=o.length-1),n!==this.currentTab&&(this.currentTab=n,this.workspace.requestSaveLayout(),this.workspace.requestResize());for(var a=[],s=[],l=0,c=o;l<c.length;l++){var u=(I=c[l]).tabHeaderEl;a.push(u),t&&s.push(u),s.push(I.containerEl)}this.tabHeaderEls=a;for(var h=new Set(s),p=0,d=Array.from(r.children);p<d.length;p++){var f=d[p];h.has(f)||Gb(f)}for(var g=0,m=o;g<m.length;g++){(f=(I=m[g]).containerEl).parentNode!==r&&Gb(f)}if(t)for(var v=r.firstChild,y=new Set,b=0;b<s.length;b++){if((f=s[b]).parentNode===r){for(;v&&(!h.has(v)||y.has(v));)v=v.nextSibling;v!==f?(Gb(f),y.add(f)):v=v.nextSibling}}var w=null;for(b=0;b<o.length;b++){var k=b===n;(u=(I=o[b]).tabHeaderEl).toggleClass("is-active",k),I.containerEl.toggle(t||k),b===n&&(w=I),t&&Le(u)}if(t)r.setChildrenInPlace(s);else{for(var C=0,E=Array.from(r.children);C<E.length;C++){f=E[C];h.has(f)||f.detach()}for(var x=0,S=o;x<S.length;x++){(f=(I=S[x]).containerEl).parentNode!==r&&r.appendChild(f)}}if(Yb(r),this.updateSlidingTabs(),!t){if(i.isShown()){for(var M=[],T=[],D=i.firstChild,A=new Set(a),L=0,P=a;L<P.length;L++){for(var I=P[L];D&&!A.has(D);){f=D;D=D.nextSibling,M.push(f)}I!==D?(I.parentNode!==i&&T.push(I),i.insertBefore(I,D)):D=D.nextSibling}for(;D;){f=D;D=D.nextSibling,M.push(f)}for(var O=0,F=T;O<F.length;O++){(V=F[O]).style.flex="",V.style.width=""}for(var B=[],N=[],R=0,H=T;R<H.length;R++){var V=H[R];B.push(V.clientWidth)}for(var z=0,q=M;z<q.length;z++){V=q[z];N.push(V.clientWidth)}var U=function(e){var t=T[e],n=B[e];Le(t,!0),t.style.flex="0 0 auto",Ie(t,new Te({duration:200}).addProp("width","0",n+"px","").addProp("opacity","0","1",""),(function(){t.style.flex=""}))};for(b=0;b<T.length;b++)U(b);var W=function(e){var t=M[e],n=N[e],i=t.cloneNode(!0);t.replaceWith(i),i.style.flex="0 0 auto",Ie(i,new Te({duration:200}).addProp("width",n+"px","0","").addProp("opacity","1","0",""),(function(){i.detach()}))};for(b=0;b<M.length;b++)W(b)}else i.setChildrenInPlace(a);w&&(i.style.setProperty("--animation-dur","0s"),this.getRoot()instanceof Pj&&(i.scrollLeft=w.tabHeaderEl.clientWidth*n),i.style.setProperty("--animation-dur","250ms"))}}else r.empty()},t.prototype.recomputeChildrenDimensions=function(){this.updateTabDisplay()},t.prototype.getTabInsertLocation=function(e){for(var t=this.tabHeaderEls,n=this.children,i=this.tabHeaderContainerEl.getBoundingClientRect(),r=t.length,o=null,a=0;a<n.length;a++){var s=n[a].tabHeaderEl.getBoundingClientRect(),l=s.x,c=s.right;if(a===n.length-1||e<=c){i={x:l,y:s.y,width:10,height:s.height},r=a;var u=(l+c)/2;Math.abs(e-u)/(c-l)<.25&&(o=a),e>u&&(r++,i.x=c);break}}return i.x-=5,{rect:i,index:r,droppedIndex:o}},t.prototype.insertChild=function(t,n){e.prototype.insertChild.call(this,t,n),n instanceof Nj&&(n.updateHeader(),Le(n.tabHeaderEl)),this.unlockTabWidths()},t.prototype.removeChild=function(t){var n=this.children.indexOf(t),i=this.currentTab,r=this.children[i];t.tabHeaderEl.removeClass("is-active"),1===this.children.length&&(this.workspace.lastTabGroupStacked=this.isStacked),e.prototype.removeChild.call(this,t),this.children.length>0&&n===i?(this.currentTab=Math.max(0,n-1),this.workspace.onLayoutChange(this)):this.currentTab=this.children.indexOf(r)},t.prototype.lockTabWidths=function(){if(this.tabHeaderContainerEl.isShown()&&!this.isStacked){this.hasLockedTabWidths=!0;for(var e=[],t=0,n=this.children;t<n.length;t++){var i=n[t];e.push(i.tabHeaderEl.clientWidth)}for(var r=0;r<this.children.length;r++)this.children[r].tabHeaderEl.style.width=e[r]+"px"}},t.prototype.unlockTabWidths=function(){if(this.hasLockedTabWidths)if(this.hasLockedTabWidths=!1,this.tabHeaderContainerEl.isShown()){for(var e=[],t=0,n=this.children;t<n.length;t++){var i=n[t];e.push(i.tabHeaderEl.clientWidth)}for(var r=0;r<this.children.length;r++){Ie(this.children[r].tabHeaderEl,new Te({duration:250}).addProp("width",e[r]+"px",""))}}else for(var o=0,a=this.children;o<a.length;o++){(i=a[o]).tabHeaderEl.style.width=""}},t.prototype.updateSlidingTabs=function(){var e=this,t=e.isStacked,n=e.children,i=e.tabsContainerEl;if(t){for(var r=0,o=[],a=0;a<n.length;a++){var s=(g=n[a]).tabHeaderEl.offsetWidth;o.push(s),r+=s}var l=i.clientWidth,c=Math.max(300,l-r),u=c/n.length,h=0,p=r;for(a=0;a<n.length;a++){(g=n[a]).tabHeaderEl.style.left=h+"px",h+=o[a],p-=o[a],g.tabHeaderEl.style.right=p+"px",g.containerEl.style.left=h+"px",g.containerEl.style.minWidth=u+"px",g.containerEl.style.maxWidth=c+"px"}this.onContainerScroll()}else for(var d=0,f=this.children;d<f.length;d++){var g;(g=f[d]).tabHeaderEl.style.left="",g.tabHeaderEl.style.right="",g.containerEl.style.left="",g.containerEl.style.minWidth="",g.containerEl.style.maxWidth=""}},t.prototype.onContainerScroll=function(){var e=this,t=e.isStacked,n=e.children,i=e.currentTab,r=e.tabsContainerEl;if(t){for(var o=[],a=[],s=0;s<n.length;s++){var l=n[s];o.push(l.tabHeaderEl.offsetWidth),a.push(l.containerEl.offsetWidth)}var c=r.scrollLeft,u=c+r.clientWidth,h=0;for(s=0;s<n.length;s++){var p=h+o[s],d=p+a[s];h=d;var f=s!==i&&(d<=c||p>=u);n[s].containerEl.toggleClass("is-hidden",f)}}},t.prototype.scrollIntoView=function(e){var t=this.children,n=this.tabsContainerEl,i=t[e];if(i){for(var r=0,o=0,a=0,s=0;s<t.length;s++){var l=t[s],c=l.tabHeaderEl.offsetWidth;s<=e?(r+=c,a+=c,s<e&&(a+=l.containerEl.offsetWidth)):o+=c}var u=a-r,h=a+i.containerEl.offsetWidth-n.clientWidth+o,p=n.scrollLeft;p<h?n.scrollTo({behavior:"smooth",left:h}):p>u&&n.scrollTo({behavior:"smooth",left:u})}},t}(Aj),Bj=function(){function e(e){this.owner=e,this.backHistory=[],this.forwardHistory=[]}return e.prototype.updateState=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e.state,n=e.eState,t.popstate=!0,t.active=Lt.isDesktop,[4,this.owner.setViewState(t,n)];case 1:return i.sent(),this.owner.trigger("history-change"),[2]}}))}))},e.prototype.forward=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return[2,this.go(1)]}))}))},e.prototype.back=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return[2,this.go(-1)]}))}))},e.prototype.pushState=function(e){var t=this.backHistory;t.push(e),t.length>20&&t.unshift(),this.forwardHistory=[],this.owner.trigger("history-change")},e.prototype.go=function(e){return v(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(this.owner.working)return new CI(rf.interface.msgTabBusy()),[2];for(t=this.owner.getHistoryState(),n=t;e>0&&(i=this.forwardHistory.pop());)this.backHistory.push(n),n=i,e--;for(;e<0&&(i=this.backHistory.pop());)this.forwardHistory.push(n),n=i,e++;return n===t?[3,2]:[4,this.updateState(n)];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.serialize=function(){return{backHistory:w([],this.backHistory,!0),forwardHistory:w([],this.forwardHistory,!0)}},e.prototype.deserialize=function(e){e&&(e.backHistory&&(this.backHistory=e.backHistory),e.forwardHistory&&(this.forwardHistory=e.forwardHistory),this.owner.trigger("history-change"))},e}(),Nj=function(e){function t(t,n){var i=e.call(this,t.workspace,n)||this;i.type="leaf",i.activeTime=0,i.history=new Bj(i),i.tabHeaderEl=null,i.tabHeaderInnerIconEl=null,i.tabHeaderInnerTitleEl=null,i.tabHeaderStatusContainerEl=null,i.tabHeaderStatusPinEl=null,i.tabHeaderStatusLinkEl=null,i.tabHeaderCloseEl=null,i.group=null,i.pinned=!1,i.width=0,i.height=0,i.resizeObserver=null,i.working=!1,i.app=t;var r=i.containerEl;r.addClass("workspace-leaf"),r.addEventListener("focusin",(function(){i.app.workspace.setActiveLeaf(i)})),r.addEventListener("mousedown",(function(){i.app.workspace.setActiveLeaf(i)}));var o=function(){if(i.parent instanceof Fj){var e=i.parent.children;i===e.last()?i.parent.unlockTabWidths():i.parent.lockTabWidths()}i.detach()},a=i.tabHeaderEl=createDiv("workspace-tab-header");a.draggable=!0,a.createDiv("workspace-tab-header-inner",(function(e){i.tabHeaderInnerIconEl=e.createDiv("workspace-tab-header-inner-icon"),i.tabHeaderInnerTitleEl=e.createDiv("workspace-tab-header-inner-title"),i.tabHeaderStatusContainerEl=e.createDiv("workspace-tab-header-status-container"),i.tabHeaderCloseEl=e.createDiv("workspace-tab-header-inner-close-button",(function(e){gb(e,"lucide-x"),aS(e,rf.interface.menu.close()),e.addEventListener("click",o)}))})),a.addEventListener("dragstart",(function(e){i.workspace.onDragLeaf(e,i)})),a.addEventListener("contextmenu",i.onOpenTabHeaderMenu.bind(i)),a.addEventListener("mousedown",(function(e){1===e.button&&e.preventDefault()})),a.addEventListener("auxclick",(function(e){1===e.button&&i.view instanceof bI&&o()}));var s=rt(i.onResize.bind(i),20,!0);return(i.resizeObserver=new ResizeObserver((function(e){for(var t=0,n=e;t<n.length;t++){if(n[t].target===r){var o=r.offsetWidth,a=r.offsetHeight;return void(o===i.width&&a===i.height||(i.width=o,i.height=a,s()))}}}))).observe(r),i.view=i._empty=new wI(i),i.view.open(i.containerEl),i}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.pinned&&(t.pinned=!0),t.state=this.getViewState(),this.group&&(t.group=this.group),t},t.prototype.canNavigate=function(){return this.view.navigation&&!this.pinned},t.prototype.openFile=function(e,t){var n;return v(this,void 0,Promise,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return e?(t=t||{},i=this.view,r=this.app.viewRegistry.getTypeByExtension(e.extension),i&&i instanceof EI&&i.canAcceptExtension(e.extension)&&(r=i.getViewType()),r?(o=t.state||{},a=null!==(n=t.active)&&void 0!==n?n:this.app.vault.getConfig("focusNewTab"),s=t.group,o.file=e.path,l={type:r,state:o,active:a,group:s},[4,this.setViewState(l,t.eState)]):(this.app.openWithDefaultApp(e.path),[2])):[2];case 1:return c.sent(),[2]}}))}))},t.prototype.openLinkText=function(e,t,n){return v(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:i=this.app,p.label=1;case 1:return p.trys.push([1,6,,7]),n=n||{},r=Bx(e),o=r.path,a=r.subpath,s=i.metadataCache.getFirstLinkpathDest(o,t),l=n.state||{},c=n.eState||{},s?(a&&(c.subpath=a),[3,4]):[3,2];case 2:return u=null,o.contains("/")||(u=i.fileManager.getNewFileParent(t,e)),[4,i.fileManager.createNewFile(u,o)];case 3:s=p.sent(),l.mode="source",p.label=4;case 4:return n.state=l,n.eState=c,[4,this.openFile(s,n)];case 5:return p.sent(),[3,7];case 6:return h=p.sent(),new CI(h.message),console.error(h),[2];case 7:return[2]}}))}))},t.prototype.open=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.view,e===t?[2,e]:t?[4,t.close()]:[3,2];case 1:i.sent(),i.label=2;case 2:this.containerEl.setChildrenInPlace([this.resizeHandleEl]),e||(e=this._empty),this.view=e,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,e.open(this.containerEl)];case 4:return i.sent(),[3,6];case 5:return n=i.sent(),console.error("Failed to open view",n),[3,6];case 6:return[2,e]}}))}))},t.prototype.highlight=function(){this.containerEl.addClass("is-highlighted")},t.prototype.unhighlight=function(){this.containerEl.removeClass("is-highlighted")},t.prototype.getViewState=function(){var e=this.view,t=this.pinned,n={type:e?e.getViewType():"empty",state:e?e.getState():{}};return t&&(n.pinned=!0),n},t.prototype.setViewState=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(this.working)return[2];this.working=!0,c.label=1;case 1:return c.trys.push([1,,12,13]),n=this.view,i=n?n.getViewType():"",r=void 0,!n||n instanceof wI||(r=this.getHistoryState()),o={history:!1,layout:!1,close:!1},e.type===i?[3,5]:n?[4,this.open(null)]:[3,3];case 2:c.sent(),c.label=3;case 3:return a=this.app.viewRegistry.getViewCreatorByType(e.type),n=a?a(this):"string"!=typeof e.type||"empty"===e.type?this._empty:new Sj(this,e.type),[4,this.open(n)];case 4:c.sent(),o.history=!0,o.layout=!0,c.label=5;case 5:s=e.state||{},c.label=6;case 6:return c.trys.push([6,8,,9]),[4,n.setState(s,o)];case 7:return c.sent(),[3,9];case 8:return l=c.sent(),console.error(l),[3,9];case 9:return o.close?[4,this.open(null)]:[3,11];case 10:c.sent(),c.label=11;case 11:return e.active&&this.workspace.setActiveLeaf(this,{focus:!0}),void 0!==e.group&&this.setGroupMember(e.group),t&&this.setEphemeralState(t),(e.popstate||s.sync)&&(o.history=!1),o.layout&&this.workspace.onLayoutChange(),this.updateHeader(),o.history&&r&&this.recordHistory(r),o.done&&o.done(),[3,13];case 12:return this.working=!1,[7];case 13:return[2]}}))}))},t.prototype.rebuildView=function(){return v(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.getViewState(),t=this.getEphemeralState(),[4,this.open(null)];case 1:return n.sent(),[4,this.setViewState(e,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.getEphemeralState=function(){return this.view.getEphemeralState()},t.prototype.setEphemeralState=function(e){if(e&&e.focus){var t=this.containerEl.doc.activeElement;t&&t.instanceOf(HTMLElement)&&t!==document.body&&this.containerEl!==t&&!this.containerEl.contains(t)&&(t.blur(),getSelection().removeAllRanges())}this.view.setEphemeralState(e)},t.prototype.togglePinned=function(){this.setPinned(!this.pinned)},t.prototype.setPinned=function(e){this.pinned=e,this.trigger("pinned-change",e),this.updateHeader(),this.workspace.requestSaveLayout();var t=this.group;if(t)for(var n=0,i=this.workspace.getGroupLeaves(t);n<i.length;n++){var r=i[n];r.pinned!==e&&r.setPinned(e)}},t.prototype.setGroupMember=function(e){if(e!==this){var t=null;e&&((t=e.group)||(t=$e(16),e.setGroup(t))),this.setGroup(t)}},t.prototype.setGroup=function(e){if(e!==this.group){var t=this.pinned;if(!t)for(var n=0,i=this.workspace.getGroupLeaves(e);n<i.length;n++){if(i[n].pinned){t=!0;break}}this.setPinned(t),this.group=e,this.trigger("group-change",e),this.updateHeader(),this.workspace.requestUpdateLayout()}},t.prototype.detach=function(){var t,n=null===(t=this.parent)||void 0===t?void 0:t.id,i=this.getRoot().id;e.prototype.detach.call(this);var r=this.view,o=this.resizeObserver;r&&(this.workspace.pushUndoHistory(this,n,i),r.close(),this.view=this._empty),o&&o.disconnect()},t.prototype.updateHeader=function(){var e,t,n=this;gb(this.tabHeaderInnerIconEl,this.getIcon()),this.tabHeaderInnerTitleEl.setText(this.getDisplayText()),this.group?this.tabHeaderStatusLinkEl||(this.tabHeaderStatusLinkEl=this.tabHeaderStatusContainerEl.createDiv({cls:"workspace-tab-header-status-icon mod-linked",prepend:!0},(function(e){gb(e,"lucide-link"),aS(e,rf.interface.menu.unlinkTab()),e.addEventListener("click",(function(){for(var e=0,t=n.workspace.getGroupLeaves(n.group);e<t.length;e++){t[e].unhighlight()}n.setGroup(null)})),e.addEventListener("mouseover",(function(){gb(e,"lucide-unlink");for(var t=0,i=n.workspace.getGroupLeaves(n.group);t<i.length;t++){i[t].highlight()}})),e.addEventListener("mouseout",(function(){gb(e,"lucide-link");for(var t=0,i=n.workspace.getGroupLeaves(n.group);t<i.length;t++){i[t].unhighlight()}}))}))):(null===(e=this.tabHeaderStatusLinkEl)||void 0===e||e.detach(),this.tabHeaderStatusLinkEl=null),this.pinned?(this.tabHeaderCloseEl.hide(),this.tabHeaderStatusPinEl||(this.tabHeaderStatusPinEl=this.tabHeaderStatusContainerEl.createDiv("workspace-tab-header-status-icon mod-pinned",(function(e){gb(e,"lucide-pin"),aS(e,rf.interface.menu.unpin()),e.addEventListener("click",(function(){return n.setPinned(!1)}))})))):(this.tabHeaderCloseEl.show(),null===(t=this.tabHeaderStatusPinEl)||void 0===t||t.detach(),this.tabHeaderStatusPinEl=null),aS(this.tabHeaderEl,this.getDisplayText(),{delay:300}),this.parent instanceof Rj&&this.parent.recomputeChildrenDimensions();var i=this.view?this.view.getViewType():"";this.tabHeaderEl.setAttr("data-type",i)},t.prototype.getIcon=function(){var t=this.view.getIcon();return t||e.prototype.getIcon.call(this)},t.prototype.getDisplayText=function(){var e=this.view.getDisplayText();return e||""},t.prototype.onOpenTabHeaderMenu=function(e){e.preventDefault();var t=this.view,n=(new fw).addSections(["close","pane","open","action","view","view.linked","info","","danger"]);n.setSectionSubmenu("view.linked",{title:rf.interface.menu.openLinkedView(),icon:"lucide-link"});var i=this.app.workspace,r=[i.leftSplit,i.rightSplit].contains(this.getRoot());t.onPaneMenu(n,r?"sidebar-context-menu":"tab-header"),t.onHeaderMenu(n),n.setParentElement(this.tabHeaderEl).showAtMouseEvent(e)},t.prototype.handleDrop=function(e,t,n){if("bookmarks"===t.type){var i=this.app.internalPlugins.getEnabledPluginById("bookmarks");if(i){var r=t.items.map((function(e){return e.item})).filter((function(e){return"file"===e.type||"graph"===e.type}));if(1!==r.length)return;n||i.openBookmarkInLeaf(r[0],this,{active:!0})}return{action:rf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}}if("file"===t.type||"link"===t.type)return n||(this.workspace.setActiveLeaf(this),"file"===t.type?this.openFile(t.file):this.openLinkText(t.linktext,t.sourcePath)),{action:rf.interface.dragAndDrop.openInThisTab(),dropEffect:"move"}},t.prototype.getHistoryState=function(){return{title:this.getDisplayText(),icon:this.getIcon(),state:this.getViewState(),eState:this.getEphemeralState()}},t.prototype.recordHistory=function(e){var t=this.view,n=this.history;if(t&&t.navigation&&!(t instanceof wI)){var i=n.backHistory.last();if(i)if(!(JSON.stringify(i.state)!==JSON.stringify(e.state)))return;n.pushState(e)}},t.prototype.onResize=function(){this.view&&this.view.onResize()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Dj),Rj=function(e){function t(n,i,r){var o=e.call(this,n,r)||this;o.type="mobile-drawer",o.children=[],o.allowSingleChild=!0,o.autoManageDOM=!1,o.currentTab=0,o.collapsed=!1,o.isFullscreen=!1,o.isPinned=!1,o.containerEl=null,o.backdropEl=null,o.innerEl=null,o.headerEl=null,o.tabContainerEl=null,o.tabOptionsEl=null,o.activeTabEl=null,o.activeTabHeaderEl=null,o.activeTabIconEl=null,o.activeTabTitleEl=null,o.activeTabFullscreenEl=null,o.activeTabContentEl=null,o.pinIconEl=null,o.side=i,o.collapsed=!0;var a=o.containerEl=n.containerEl.createDiv("workspace-drawer");a.hide();var s=o.innerEl=a.createDiv("workspace-drawer-inner");o.backdropEl=createDiv("workspace-drawer-backdrop",(function(e){e.addEventListener("click",o.collapse.bind(o)),e.style.opacity="0"})),o.headerEl=s.createDiv("workspace-drawer-header");var l=o.tabContainerEl=s.createDiv("workspace-drawer-tab-container");o.tabOptionsEl=l.createDiv("workspace-drawer-tab-options");var c=o.activeTabEl=createDiv("workspace-drawer-active-tab-container"),u=o.activeTabHeaderEl=c.createDiv("workspace-drawer-active-tab-header");u.draggable=!0,u.addEventListener("click",(function(e){e.defaultPrevented||(o.isFullscreen?o.toggleTabFullscreen():o.selectTabIndex(-1))})),u.addEventListener("contextmenu",(function(e){o.children[o.currentTab].onOpenTabHeaderMenu(e)})),u.addEventListener("dragstart",(function(e){var t=o.children[o.currentTab];n.onDragLeaf(e,t)})),u.createDiv("workspace-drawer-active-tab-back-icon",(function(e){gb(e,"lucide-arrow-left-right")})),o.activeTabIconEl=u.createDiv("workspace-drawer-active-tab-icon"),o.activeTabTitleEl=u.createDiv("workspace-drawer-active-tab-title"),o.activeTabFullscreenEl=u.createDiv("workspace-drawer-active-tab-icon",(function(e){gb(e,"lucide-maximize"),e.addEventListener("click",(function(e){o.toggleTabFullscreen(),e.preventDefault()}))})),o.activeTabContentEl=c.createDiv("workspace-drawer-active-tab-content"),o.component.registerEvent(n.on("file-open",o.onFileOpen,o));var h="left"===i?1:-1;return o.component.registerEvent(n.on("swipe",(function(e){if(!o.isPinned&&!(e.points>1||"x"!==e.direction)){var n=o,r=n.containerEl,a=n.backdropEl;Le(r),Le(a);var s=o.workspace.leftSplit,l=o.workspace.rightSplit,c=s.collapsed||s instanceof t&&s.isPinned,u=l.collapsed||l instanceof t&&l.isPinned,p=c&&u&&("left"===i&&e.x>e.startX||"right"===i&&e.x<e.startX);if(o.collapsed){if(p){o.collapsed=!1,wb(),r.show(),o.workspace.containerEl.appendChild(a);var d=r.offsetWidth;e.registerCallback({move:function(t){var n=Math.clamp((t-e.startX)*h/d,0,1);n=Math.clamp(n,0,1),r.style.transform="translateX(".concat(-(1-n)*d*h,"px)"),a.style.opacity=String(n)},cancel:function(){r.style.transform="",r.hide(),a.detach(),o.collapsed=!0},finish:function(t,n,i){var s,l=Math.clamp((t-e.startX)*h/d,0,1);i*h>d/2?(Ie(r,new Te({duration:225*(s=1-l),fn:"ease-out"}).addProp("transform",null,"translateX(0)","")),Ie(a,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"1","")),o.onExpand()):(o.collapsed=!0,o.onCollapse(),Ie(r,new Te({duration:200*(s=l)}).addProp("transform",null,"translateX(".concat(-d*h,"px)"),""),(function(){r.hide()})),Ie(a,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"0"),(function(){a.detach()})))}})}}else{var f=r.offsetWidth;e.registerCallback({move:function(t){var n=Math.clamp(-(t-e.startX)*h/f,0,1);r.style.transform="translateX(".concat(-n*f*h,"px)"),a.style.opacity=String(1-n)},cancel:function(){r.style.transform="",a.style.opacity=""},finish:function(t,n,i){var s,l=Math.clamp(-(t-e.startX)*h/f,0,1);-i*h<f/2?(Ie(r,new Te({duration:200*(s=l)}).addProp("transform",null,"translateX(0)","")),Ie(a,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"1",""))):(o.collapsed=!0,o.onCollapse(),Ie(r,new Te({duration:200*(s=1-l),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(-f*h,"px)"),""),(function(){r.hide()})),Ie(a,new Te({duration:150*s,fn:"linear"}).addProp("opacity",null,"0"),(function(){a.detach()})))}})}}}))),n.on("resize",(function(){Lt.isPhone&&o.isPinned&&o.setPinned(!1)})),o}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return-1!==this.currentTab&&(t.currentTab=this.currentTab),this.isPinned&&(t.pinned=!0),t},t.prototype.onFileOpen=function(e){this.isFullscreen&&this.toggleTabFullscreen(),this.collapsed||this.collapse()},t.prototype.expand=function(){if(this.collapsed){this.collapsed=!1,this.onExpand();var e=this.containerEl,t=this.backdropEl;e.show(),this.workspace.containerEl.appendChild(t),wb();var n=e.offsetWidth*("left"===this.side?-1:1);Ie(t,new Te({duration:150,fn:"linear"}).addProp("opacity","0","1")),Ie(e,new Te({duration:200}).addProp("transform","translateX(".concat(n,"px)"),"translateX(0)","")),this.workspace.requestSaveLayout()}},t.prototype.onExpand=function(){},t.prototype.collapse=function(){if(!this.isPinned&&!this.collapsed){this.collapsed=!0,this.onCollapse();var e=this.containerEl,t=this.backdropEl,n=e.offsetWidth*("left"===this.side?-1:1);Ie(t,new Te({duration:150,fn:"linear"}).addProp("opacity","1","0"),(function(){t.detach()})),Ie(e,new Te({duration:200}).addProp("transform","translateX(0)","translateX(".concat(n,"px)"),""),(function(){return e.hide()})),this.workspace.requestSaveLayout()}},t.prototype.onCollapse=function(){},t.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},t.prototype.selectTabIndex=function(e){this.currentTab=e,this.recomputeChildrenDimensions(),this.workspace.requestSaveLayout(),this.workspace.requestResize()},t.prototype.selectTab=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.recomputeChildrenDimensions=function(){var e=this,t=this,n=t.innerEl,i=t.children,r=t.headerEl,o=t.currentTab,a=t.tabContainerEl,s=t.tabOptionsEl,l=t.activeTabEl,c=t.activeTabIconEl,u=t.activeTabTitleEl,h=t.activeTabContentEl;if(-1!==o){var p=i[o];p?(c.empty(),p instanceof Nj?(gb(c,p.getIcon()),u.setText(p.getDisplayText())):u.empty(),h.setChildrenInPlace([p.containerEl])):o=-1}if(-1===o){s.empty();for(var d=function(t){s.createDiv({cls:"workspace-drawer-tab-option-item"},(function(n){if(n.draggable=!0,t instanceof Nj){var r=t;n.createDiv("workspace-drawer-tab-option-item-icon",(function(e){gb(e,r.getIcon())})),n.createDiv({cls:"workspace-drawer-tab-option-item-title",text:r.getDisplayText()})}else n.createDiv("workspace-drawer-tab-option-item-icon",(function(e){gb(e,"lucide-file")})),n.createDiv({cls:"workspace-drawer-tab-option-item-title",text:""});n.addEventListener("click",(function(){e.selectTabIndex(i.indexOf(t))})),n.addEventListener("contextmenu",(function(e){t.onOpenTabHeaderMenu(e)})),n.addEventListener("dragstart",(function(n){e.app.workspace.onDragLeaf(n,t)}))}))},f=0,g=i;f<g.length;f++){d(g[f])}}if("left"===this.side){var m=this.workspace.leftRibbon.containerEl;m.removeClass("workspace-ribbon"),m.addClass("workspace-drawer-ribbon"),n.setChildrenInPlace([m,r,a])}else"right"===this.side&&n.setChildrenInPlace([r,a]);-1===o?(Gb(l),Ve(a,s,"left")):(Ve(a,l,"right"),Yb(l))},t.prototype.openLeaf=function(e){var t=this.children.indexOf(e);-1!==t&&this.selectTabIndex(t)},t.prototype.addHeaderButton=function(e,t){var n=this.headerEl.createDiv("workspace-drawer-header-icon",(function(n){gb(n,e),n.addEventListener("click",t)}));return Zb(n),n},t.prototype.toggleTabFullscreen=function(){this.isFullscreen=!this.isFullscreen,gb(this.activeTabFullscreenEl,this.isFullscreen?"lucide-minimize":"lucide-maximize"),this.activeTabEl.style.transition="unset",this.activeTabEl.toggleClass("is-fullscreen",this.isFullscreen)},t.prototype.setPinned=function(e){Lt.isPhone&&(e=!1),this.isPinned!==e&&(this.isPinned=e,this.containerEl.toggleClass("is-pinned",e),this.backdropEl.toggle(!e),e?this.expand():this.collapse(),this.workspace.requestSaveLayout())},t.prototype.togglePinned=function(){this.setPinned(!this.isPinned)},t.collapseFor=function(e){var n=e.getRoot();n instanceof t&&n.collapse()},t}(Aj),Hj=function(e){function t(t,n){var i=e.call(this,t,"left",n)||this;i.fileCountEl=null;var r=i.app.vault;return i.headerEl.createDiv("workspace-drawer-header-left",(function(e){e.createDiv({cls:"workspace-drawer-header-name"},(function(e){e.createEl("label","workspace-drawer-header-switcher",(function(e){e.createSpan({cls:"workspace-drawer-header-name-text",text:r.getName()}),e.createSpan("workspace-drawer-header-name-chevron",(function(e){return gb(e,"lucide-chevron-down")}));var t=e.createEl("select","",(function(e){return v(i,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=e.createEl("option",{text:"Manage vaults...",value:"manage-vaults"}),n=localStorage.getItem("mobile-selected-vault"),i=0,[4,xj()];case 1:r=l.sent(),l.label=2;case 2:if(!(i<r.length))return[3,4];o=r[i],a=o.name,"iCloud"===o.storageType&&(a+=" (iCloud)"),s=e.createEl("option",{text:a,value:o.location}),n===o.location&&(s.selected=!0),l.label=3;case 3:return i++,[3,2];case 4:return e.appendChild(t),[2]}}))}))}));t.addEventListener("change",(function(e){var n=t.value;"manage-vaults"===n?i.app.openVaultChooser():(window.localStorage.setItem("mobile-selected-vault",n),location.reload())}))}))})),e.createDiv("workspace-drawer-header-info",(function(e){i.fileCountEl=e.createDiv(),i.updateInfo()}))})),i.addHeaderButton("lucide-settings",(function(e){i.app.setting.open()})).addClass("mod-settings"),i.pinIconEl=i.addHeaderButton("pin",(function(e){i.togglePinned()})),i.pinIconEl.addClass("mod-pin"),i.containerEl.addClass("mod-left"),i.component.registerEvent(r.on("create",i.updateInfo.bind(i))),i.component.registerEvent(r.on("delete",i.updateInfo.bind(i))),i}return f(t,e),t.prototype.updateInfo=function(){var e=this.app.vault,t=rf.nouns.fileWithCount({count:e.getRoot().getFileCount()}),n=rf.nouns.folderWithCount({count:e.getRoot().getFolderCount()}),i=rf.plugins.fileExplorer.tooltipFoldersFilesCount({fileCount:t,folderCount:n});this.fileCountEl.setText(i)},t}(Rj),Vj=function(e){function t(t,n){var i=e.call(this,t,"right",n)||this;i.fileNameEl=null,i.fileInfoElToRenderer=[];var r=i.headerEl,o=t.mobileFileInfos;return r.createDiv("workspace-drawer-header-left",(function(e){e.createDiv({cls:"workspace-drawer-header-name"},(function(e){i.fileNameEl=e.createDiv({cls:"workspace-drawer-header-name-text"})})),e.createDiv("workspace-drawer-header-info",(function(e){for(var t=0,n=o;t<n.length;t++){var r=n[t],a=e.createDiv("workspace-drawer-header-info-item");i.fileInfoElToRenderer.push({el:a,renderer:r.renderCallback})}}))})),i.containerEl.addClass("mod-right"),i.component.registerEvent(i.app.vault.on("rename",i.updateName.bind(i))),i.component.registerEvent(t.on("file-open",i.onFileOpen,i)),i.component.registerEvent(t.on("quick-preview",i.onQuickPreview,i)),i.pinIconEl=i.addHeaderButton("pin",(function(e){i.togglePinned()})),i.pinIconEl.addClass("mod-pin"),i}return f(t,e),t.prototype.onFileOpen=function(t){e.prototype.onFileOpen.call(this,t),this.updateName(t),this.updateInfo()},t.prototype.onQuickPreview=function(e){this.app.workspace.getActiveFile()===e&&this.updateInfo()},t.prototype.updateName=function(e){e instanceof Xy&&this.fileNameEl.setText(de(e.name))},t.prototype.updateInfo=function(){for(var e=0,t=this.fileInfoElToRenderer;e<t.length;e++){var n=t[e];n.renderer(n.el)}},t}(Rj),zj=function(){function e(e){this.suggests=[],this.currentSuggest=null,this.addSuggest(new SB(e)),this.addSuggest(new pB(e))}return e.prototype.addSuggest=function(e){this.suggests.push(e)},e.prototype.removeSuggest=function(e){this.currentSuggest===e&&this.close(),this.suggests.remove(e)},e.prototype.trigger=function(e,t,n){if(e.hasFocus()){for(var i=0,r=this.suggests;i<r.length;i++){var o=r[i];if(o.trigger(e,t,n))return void(n&&this.setCurrentSuggest(o))}this.close()}},e.prototype.setCurrentSuggest=function(e){var t=this.currentSuggest;t!==e&&(t&&t.close(),this.currentSuggest=e)},e.prototype.isShowingSuggestion=function(){var e=this.currentSuggest;return e&&e.isOpen},e.prototype.reposition=function(){var e=this.currentSuggest;e&&e.isOpen&&e.updatePosition()},e.prototype.close=function(){this.setCurrentSuggest(null)},e}();function qj(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t="SYSTEM INFO:\n",Lt.isDesktopApp&&(Ot((function(e){var n=e.ipcRenderer.sendSync("version"),i=e.remote.app.getVersion();t+="\tObsidian version: v".concat(n,"\n"),t+="\tInstaller version: v".concat(i,"\n")})),(n=It("os"))&&(t+="\tOperating system: ".concat(n.version()," ").concat(n.release,"\n"))),Lt.isMobileApp?[4,PD.getInfo()]:[3,3];case 1:return i=c.sent(),[4,DD.getInfo()];case 2:r=c.sent(),t+="\tOperating system: ".concat(i.platform," ").concat(i.osVersion," (").concat(i.manufacturer," ").concat(i.model,")\n"),t+="\tObsidian version: ".concat(r.version," (").concat(r.build,")\n"),t+="\tAPI version: v".concat(G0,"\n"),c.label=3;case 3:return o=e.account,a=o.token?"logged in":"not logged in",t+="\tLogin status: ".concat(a,"\n"),o.token&&(s=o.license||"none",t+="\tCatalyst license: ".concat(s,"\n")),Lt.isDesktopApp&&(l="",Ot((function(e){l=e.ipcRenderer.sendSync("insider-build",null)?"on":"off",t+="\tInsider build toggle: ".concat(l,"\n")}))),[2,t]}}))}))}var Uj=function(e){function t(t){var n=e.call(this,t)||this;n.titleEl.setText(rf.interface.labelDebugInfo());var i=n.contentEl,r=n.infoTextEl=i.createEl("textarea",{cls:"debug-textarea"});return r.spellcheck=!1,r.value="Loading...",n.setInfoText.bind(n)(),i.createDiv("modal-button-container",(function(e){Lt.isDesktopApp&&e.createEl("button",{text:rf.interface.helpScreen.labelSandboxVault()},(function(e){e.addEventListener("click",(function(){Ot((function(e){e.ipcRenderer.sendSync("sandbox")}))}))})),e.createEl("button",{text:rf.interface.labelCopy()},(function(e){e.addEventListener("click",(function(){at(r.value),new CI(rf.interface.copied({item:rf.interface.labelDebugInfo()}))}))}))})),n}return f(t,e),t.prototype.setInfoText=function(){var e;return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w;return y(this,(function(y){switch(y.label){case 0:return n=(t=this).app,i=t.infoTextEl,[4,qj(n)];case 1:if(r=y.sent(),o=n.vault.getConfig("legacyEditor"),a=n.vault.getConfig("livePreview"),s=o&&!Lt.isMobile,r+="\tLive preview: ".concat(!s&&a?"on":"off","\n"),r+="\tLegacy editor: ".concat(s?"on":"off","\n"),l=n.getTheme(),r+="\tBase theme: ".concat("system"===l?"adapt to system":"obsidian"===l?"dark":"light","\n"),c=n.customCss.theme||"none",r+="\tCommunity theme: ".concat(c),(u=null===(e=n.customCss.themes[c])||void 0===e?void 0:e.version)&&(r+=" v"+u),r+="\n",h=n.customCss.enabledSnippets.size,r+="\tSnippets enabled: ".concat(h,"\n"),p=n.plugins.isEnabled()?"off":"on",r+="\tRestricted mode: ".concat(p,"\n"),d=0,n.plugins.isEnabled())for(b in f=n.plugins.manifests,g=Object.keys(f),m=n.plugins.plugins,r+="\tPlugins installed: ".concat(g.length,"\n"),d=Object.keys(m).length,r+="\tPlugins enabled: ".concat(d,"\n"),v=1,m)m.hasOwnProperty(b)&&(r+="\t\t".concat(v,": ").concat(m[b].manifest.name," v").concat(m[b].manifest.version,"\n"),v++);return r+="\nRECOMMENDATIONS:\n",w="",Lt.isDesktopApp&&Nd(zt,K0)&&(w+="\tUpdate installer: installer version too low, please download from ".concat(G_()," and reinstall.\n")),("none"!==c||h>0)&&(w+="\tCustom theme and snippets: for cosmetic issues, please first try updating your theme and disabling your snippets. If still not fixed, please try to make the issue happen in the Sandbox Vault or disable community theme and snippets.\n"),"off"===p&&d>0&&(w+="\tCommunity plugins: for bugs, please first try updating all your plugins to latest. If still not fixed, please try to make the issue happen in the Sandbox Vault or disable community plugins.\n"),""===w&&(w="\tnone\n"),r+=w,i.value=r,[2]}}))}))},t}(LI),Wj=function(e){function t(t,n){var i=e.call(this,t)||this;i.sortOrder="download",i.items={},i.itemsVisible=[],i.selectedItemId=null,i.dimBackground=!1,i.onCloseCallback=n,i.returnToGridView=i.returnToGridView.bind(i);var r=i,o=r.contentEl;r.modalEl.addClass("mod-community-modal","mod-sidebar-layout");var a=i.sidebarEl=o.createDiv("modal-sidebar");i.detailsEl=createDiv("community-modal-details"),a.createDiv("community-modal-controls",(function(e){new YI(e).addSearch((function(e){return i.search=e.onChange(rt(i.update.bind(i),300)).then((function(){e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||Lt.isMobile&&wb()}))}))})).addButton((function(e){return e.onClick((function(e){return i.showSortMenu(e)})).then((function(e){if(Lt.isMobile)e.setButtonText(rf.plugins.fileExplorer.actionChangeSort());else{var t=e.buttonEl;gb(t,"lucide-sort-asc"),aS(t,rf.plugins.fileExplorer.actionChangeSort()),t.addClass("clickable-icon")}}))})),i.installedOnlyToggleSetting=new YI(e).setName(rf.setting.thirdPartyPlugin.showInstalledOnly()).addToggle((function(e){return i.installedOnlyToggle=e.setSmall().setValue(!1).onChange((function(){return i.update()}))})),i.addCustomControls(e),i.searchSummaryEl=e.createDiv("community-modal-search-summary u-muted")})),i.listEl=a.createDiv("community-modal-search-results-wrapper").createDiv("community-modal-search-results");var s=i.renderQueue=new qD;return v(i,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),e=E(WD(s.generator(),{batchSize:10})),o.label=1;case 1:return[4,e.next()];case 2:if((t=o.sent()).done)return[3,4];(0,t.value)(),o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return n=o.sent(),i={error:n},[3,11];case 6:return o.trys.push([6,,9,10]),t&&!t.done&&(r=e.return)?[4,r.call(e)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return[2]}}))})),Lt.isMobile&&Qy(i.contentEl,(function(e){if(1===e.points&&"x"===e.direction&&!(null===i.selectedItemId||e.touch.clientX>40)){var t=i,n=t.detailsEl,r=t.sidebarEl;i.contentEl.prepend(r),Yb(r),e.registerCallback({move:function(t,i){var r=n.offsetWidth,o=Math.clamp((t-e.startX)/r,0,1);n.style.transform="translateX(".concat(o*r,"px)")},cancel:function(){n.style.transform="",r.detach()},finish:function(t,o,a){var s=n.offsetWidth,l=Math.clamp((t-e.startX)/s,0,1);.5*a<s/2?Ie(n,new Te({duration:200*l}).addProp("transform",null,"translateX(0)",""),(function(){r.detach()})):Ie(n,new Te({duration:100*(1-l),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(s,"px)"),""),(function(){n.detach(),i.returnToGridView()}))}})}})),i}return f(t,e),t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){switch(t.label){case 0:return[4,Ib(this.listEl,(function(){return v(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this,[4,this.loadItems()];case 1:return e.items=t.sent(),[2]}}))}))}))];case 1:return t.sent(),[4,this.update()];case 2:return t.sent(),this.selectedItemId&&this.selectItem(this.selectedItemId),[2]}}))}))},t.prototype.onClose=function(){this.onCloseCallback&&this.onCloseCallback()},t.prototype.onEscapeKey=function(){this.selectedItemId?this.returnToGridView():this.close()},t.prototype.update=function(){var e=this.itemsVisible=this.updateItems(),t=this.listEl;t.empty(),0===e.length?t.createDiv({cls:"community-item",text:rf.setting.thirdPartyPlugin.labelNoResultsFound()}):t.setChildrenInPlace(e.map((function(e){return e.el})))},t.prototype.returnToGridView=function(){var e=this,t=function(){e.selectItem(null)};Lt.isPhone&&this.detailsEl.isShown()?(Ve(this.contentEl,this.sidebarEl,"left",t),Yb(this.sidebarEl)):t()},t.prototype.selectItem=function(e){var t,n=this,i=this.detailsEl;if(!i.hasClass("is-loading")){var r=this.items,o=this.selectedItemId;if(r.hasOwnProperty(o)&&r[o].el.removeClass("is-selected"),i.empty(),null===e||i.parentElement||this.contentEl.append(i),null===e||!r.hasOwnProperty(e))return this.selectedItemId="",null===(t=this.backButtonEl)||void 0===t||t.detach(),this.backButtonEl=null,void i.detach();this.selectedItemId=e;var a=r[e];return a.el.addClass("is-selected"),Ib(i,(function(){return v(n,void 0,void 0,(function(){var e=this;return y(this,(function(t){switch(t.label){case 0:return Lt.isPhone?(this.backButtonEl=this.titleEl.createDiv("modal-setting-back-button",(function(t){t.addEventListener("click",e.returnToGridView),t.createSpan("modal-setting-back-button-icon",(function(e){gb(e,"lucide-arrow-left")}))})),Gb(this.sidebarEl),Ve(this.contentEl,i,"right")):i.createDiv("modal-setting-nav-bar",(function(t){t.createDiv("clickable-icon",(function(t){aS(t,rf.interface.startScreen.buttonBack()),gb(t,"lucide-chevron-left"),t.addEventListener("click",e.returnToGridView)}))})),[4,this.showItem(a)];case 1:return t.sent(),[2]}}))}))}))}},t.prototype.showSortMenu=function(e){var t=this;e.preventDefault();var n=e.currentTarget;if(!n.hasClass("has-active-menu")){for(var i=new fw,r=this.sortOrder,o=function(e){var n=WG[e]();i.addItem((function(i){return i.setTitle(n).setChecked(e===r).onClick((function(){t.sortOrder=e,t.update()}))}))},a=0,s=this.sortOrderOptions;a<s.length;a++){o(s[a])}i.setParentElement(n).showAtMouseEvent(e)}},t.prototype.sortItems=function(e){var t=this.sortOrder;if("release"!==t){var n=null;n="update"===t?function(e,t){return new Date(t.updated).getTime()-new Date(e.updated).getTime()}:"alphabetical"===t?function(e,t){return JL(e.name,t.name)}:function(e,t){return t.downloads-e.downloads},e.sort(n)}else e.reverse()},t.prototype.scrollIntoView=function(e){var t=this.items[e];t&&!Lt.isPhone&&t.el.scrollIntoView({behavior:"smooth",block:"nearest"})},t.prototype.addCustomControls=function(e){},t}(LI),_j=function(){function e(e,t){this.app=null,this.setting=null,this.containerEl=null,this.navEl=null,this.app=e,this.setting=t,this.containerEl=createDiv("vertical-tab-content")}return e.prototype.hide=function(){},e}(),jj=rf.setting.hotkeys,Gj=function(){function e(e){var t=this;this.value=null,this.el=createDiv({cls:"hotkey-filter"},(function(e){t.innerEl=e.createDiv({cls:"hotkey-filter-inner",text:jj.labelShowAll()}),t.removeEl=e.createDiv("hotkey-filter-remove-button",(function(e){gb(e,"lucide-x"),aS(e,rf.interface.menu.close())}))})),e&&e.appendChild(this.el)}return e.prototype.setValue=function(e){return this.value=e,this},e.prototype.setTitle=function(e){return this.innerEl.setText(e),this},e.prototype.onRemove=function(e){return this.handleRemove=e,this.removeEl.addEventListener("click",this.remove.bind(this)),this},e.prototype.remove=function(){var e;this.value=null,this.el.isShown()&&(this.el.detach(),null===(e=this.handleRemove)||void 0===e||e.call(this))},e}(),Kj={"show-all":jj.labelShowAll,"show-assigned":jj.labelShowAssigned,"show-user-assigned":jj.labelShowUserAssigned,"show-unassigned":jj.labelShowUnassigned};function Yj(e){var t=hw.decompileModifiers(e.modifiers),n=e.vkey;return t.length>=2||1===t.length&&(!t.contains("Shift")||!/^[a-zA-Z]$/i.test(n))||/^F[0-9]+$/i.test(n)?KT(t,n):null}var Xj=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.name=jj.name(),i.id="hotkeys",i.setHotkeyScope=null,i.commandBeingCustomized=null,i.filterHotkeyScope=null,i.filterHotkeyEl=null,i.filterHotkeyActiveEl=null,i.hotkeyListContainerEl=null,i.hotkeyFilter=null,i.setHotkeyScope=new cw,i.setHotkeyScope.register(null,null,(function(e,n){var r=i.commandBeingCustomized,o=t.hotkeyManager;if(r){var a=Yj(n);if(a){var s=o.getHotkeys(r.id)||o.getDefaultHotkeys(r.id)||[];(s=s.slice()).filter((function(e){return XT(e)===XT(a)})).length>0||(s.push(a),o.setHotkeys(r.id,s),v(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,o.save()];case 1:return e.sent(),[2]}}))}))),i.finishCustomizingHotkey()}e.preventDefault(),e.stopPropagation()}})),i.setHotkeyScope.register([],"Escape",(function(){if(i.commandBeingCustomized)return i.finishCustomizingHotkey(),!1})),i.filterHotkeyScope=new cw,i.filterHotkeyScope.register([],"Escape",(function(e,t){var n;return null===(n=i.hotkeyFilter)||void 0===n||n.remove(),i.finishFilteringByHotkey(),i.updateHotkeyVisibility(),!1})),i.filterHotkeyScope.register(null,null,(function(e,t){var n=Yj(t);n&&i.setHotkeyFilter(n),e.preventDefault(),e.stopPropagation()})),i.filterHotkeyScope.register([],"Escape",(function(){i.finishFilteringByHotkey(),i.updateHotkeyVisibility()})),i}return f(t,e),t.prototype.display=function(){var e,t=this,n=this.containerEl;n.empty(),null===(e=this.hotkeyFilter)||void 0===e||e.remove(),this.headerComponent=new YI(n).setName(jj.optionSearch()).addButton((function(e){gb(e.buttonEl,"lucide-filter"),e.buttonEl.addClass("clickable-icon"),e.onClick(t.showFilterMenu.bind(t))})).addSearch((function(e){t.searchComponent=e,e.setPlaceholder(jj.promptFilter()).onChange(t.updateHotkeyVisibility.bind(t));var n=e.containerEl;n.addClass("mod-hotkey");var i=t.filterHotkeyEl=n.createDiv("input-right-decorator clickable-icon");gb(i,"lucide-keyboard"),t.filterHotkeyActiveEl=createSpan({cls:"setting-hotkey mod-active input-right-decorator",text:jj.labelWaitingForHotkeyPress()}),i.addEventListener("click",(function(){if(t.filterHotkeyActiveEl.isShown())return t.filterHotkeyActiveEl.detach(),void t.finishFilteringByHotkey();n.appendChild(t.filterHotkeyActiveEl),t.app.keymap.pushScope(t.filterHotkeyScope)}))})),this.filterContainerEl=n.createDiv("setting-filter-container"),this.statusFilter=(new Gj).onRemove((function(){return t.setStatusFilter("show-all")})).setTitle(jj.labelShowAll()),this.hotkeyListContainerEl=n.createDiv("hotkey-list-container"),this.updateHotkeyVisibility(),Lt.isMobile||this.searchComponent.inputEl.focus()},t.prototype.setHotkeyFilter=function(e){var t,n=this;this.statusFilter.remove(),null===(t=this.hotkeyFilter)||void 0===t||t.remove(),this.hotkeyFilter=new Gj(this.filterContainerEl).setValue(e).setTitle(XT(e)).onRemove((function(){return n.updateHotkeyVisibility()})),this.finishFilteringByHotkey(),this.updateHotkeyVisibility()},t.prototype.setStatusFilter=function(e){var t;null===(t=this.hotkeyFilter)||void 0===t||t.remove(),this.statusFilter.setValue(e),"show-all"===e?this.statusFilter.remove():(this.statusFilter.el.isShown()||this.filterContainerEl.appendChild(this.statusFilter.el),this.statusFilter.setTitle(Kj[e]())),this.updateHotkeyVisibility()},t.prototype.setDescription=function(e,t){this.headerComponent.setDesc(createFragment((function(n){n.createSpan({text:jj.optionSearchDesc({count:e})}),t&&n.createSpan({cls:"mod-warning",text:jj.optionSearchConflict({count:t})})})))},t.prototype.showFilterMenu=function(e){var t,n,i=this;e.preventDefault();var r=e.currentTarget;if(!r.hasClass("has-active-menu")){for(var o=new fw,a=null!==(n=null===(t=this.statusFilter)||void 0===t?void 0:t.value)&&void 0!==n?n:"show-all",s=function(e){var t=Kj[e];o.addItem((function(n){return n.setTitle(t()).setChecked(a===e).onClick((function(){return i.setStatusFilter(e)}))}))},l=0,c=Object.keys(Kj);l<c.length;l++){s(c[l])}o.setParentElement(r).showAtMouseEvent(e)}},t.prototype.hide=function(){this.finishCustomizingHotkey()},t.prototype.setQuery=function(e){var t=this.searchComponent.inputEl;t.value=e,t.focus(),this.updateHotkeyVisibility()},t.prototype.updateHotkeyVisibility=function(){var e,t,n,i=this,r=this.app.commands,o=this.app.hotkeyManager;this.hotkeyListContainerEl.empty();var a=new Xe;for(var s in r.commands)if(r.commands.hasOwnProperty(s)){var l=r.commands[s],c=o.getHotkeys(s),u=o.getDefaultHotkeys(s),h=void 0!==c,p=void 0!==u&&u.length>0;if(h)for(var d=0,f=c;d<f.length;d++){var g=f[d];a.add(XT(g),l.name)}else if(p)for(var m=0,b=u;m<b.length;m++){var w=b[m];a.add(XT(w),l.name)}}var k=Object.values(r.commands);k.sort((function(e,t){return JL(e.name,t.name)}));for(var C=0,E=new Set,x=null!==(t=null===(e=this.statusFilter)||void 0===e?void 0:e.value)&&void 0!==t?t:"show-all",S=null===(n=this.hotkeyFilter)||void 0===n?void 0:n.value,M=this.searchComponent.inputEl.value.toLowerCase(),T=function(e){var t=e.id,n=e.name;if(""!==M&&!n.toLowerCase().contains(M)&&!t.startsWith(M))return"continue";var r=o.getHotkeys(t),s=o.getDefaultHotkeys(t),l=r||s,c=void 0!==r,u=void 0!==s;if(c)for(var h=0,p=r;h<p.length;h++)for(var d=XT(p[h]),f=0,g=a.get(d).filter((function(e){return e!==n}));f<g.length;f++){var m=g[f];E.add(m)}if(S&&!(null==l?void 0:l.find((function(e){return XT(e)===XT(S)}))))return"continue";if("show-assigned"===x&&!u&&!c)return"continue";if("show-user-assigned"===x&&!c)return"continue";if("show-unassigned"===x&&(c||u))return"continue";C++;var b=new YI(D.hotkeyListContainerEl).setName(n).controlEl,w=b.createDiv("setting-command-hotkeys"),k=function(e,t,r){var o=XT(t);if(a.get(o)){var s=a.get(o).filter((function(e){return e!==n}));if(s.length>0)if(e.addClass("has-conflict"),e.addEventListener("click",(function(e){e.defaultPrevented||(i.setQuery(""),i.setHotkeyFilter(t))})),1===s.length){var l=s[0];aS(e,jj.tooltipHotkeySingleConflict({command:l}))}else{var c=s.length;aS(e,jj.tooltipHotkeyMultipleConflicts({count:c}))}}e.appendText(" "+o+" "),e.createSpan("setting-hotkey-icon setting-delete-hotkey",(function(e){gb(e,"lucide-x"),aS(e,jj.tooltipDeleteHotkey()),e.addEventListener("click",(function(e){e.preventDefault(),r()}))}))};if(c)for(var T=function(e){w.createSpan("setting-hotkey",(function(n){k(n,e,(function(){return v(i,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return 0!==(n=r.filter((function(t){return XT(t)!==XT(e)}))).length||u?o.setHotkeys(t,n):o.removeHotkeys(t),[4,o.save()];case 1:return i.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},A=0,L=r;A<L.length;A++){T(L[A])}else if(u)for(var P=function(e){w.createSpan("setting-hotkey",(function(n){k(n,e,(function(){return v(i,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=s.filter((function(t){return XT(t)!==XT(e)})),o.setHotkeys(t,n),[4,o.save()];case 1:return i.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},I=0,O=s;I<O.length;I++){P(O[I])}D.commandBeingCustomized&&t===D.commandBeingCustomized.id?w.createSpan({cls:"setting-hotkey mod-active",text:jj.labelWaitingForHotkeyPress()}):(c&&0===r.length||!c&&!u)&&w.createSpan({cls:"setting-hotkey mod-empty",text:jj.labelBlankHotkey()}),c&&b.createSpan("clickable-icon setting-restore-hotkey-button",(function(e){gb(e,"lucide-rotate-ccw"),aS(e,jj.tooltipRestoreDefault()),e.addEventListener("click",(function(){return v(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return o.removeHotkeys(t),[4,o.save()];case 1:return e.sent(),this.finishCustomizingHotkey(),[2]}}))}))}))})),b.createSpan("clickable-icon setting-add-hotkey-button",(function(t){gb(t,"lucide-plus-circle"),aS(t,jj.tooltipCustomizeCommand()),t.addEventListener("click",(function(){i.commandBeingCustomized=e,i.app.keymap.pushScope(i.setHotkeyScope),i.updateHotkeyVisibility()})),t.toggleClass("mod-active",e===i.commandBeingCustomized)}))},D=this,A=0,L=k;A<L.length;A++){T(l=L[A])}this.setDescription(C,E.size)},t.prototype.finishFilteringByHotkey=function(){this.filterHotkeyActiveEl.detach(),this.app.keymap.popScope(this.filterHotkeyScope)},t.prototype.finishCustomizingHotkey=function(){this.app.keymap.popScope(this.setHotkeyScope),this.commandBeingCustomized=null,this.updateHotkeyVisibility()},t}(_j),$j=rf.setting.thirdPartyPlugin,Zj=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.sortOrderOptions=["download","update","release","alphabetical"],i.setTitle($j.name()),i.modalEl.addClass("mod-community-plugin"),i.search.setPlaceholder($j.placeholderCommunityPlugins()),i.sortOrder=localStorage.getItem("communityPluginSortOrder")||"download",i}return f(t,e),t.prototype.onClose=function(){e.prototype.onClose.call(this),localStorage.setItem("communityPluginSortOrder",this.sortOrder)},t.prototype.setAutoOpen=function(e){return this.selectedItemId=e,this},t.prototype.loadItems=function(){var e,t;return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,HG()];case 1:return n=p.sent(),[3,3];case 2:return i=p.sent(),console.error(i),[3,3];case 3:if(!n)return new CI($j.msgFailedLoadPlugins()),[2,{}];r={},p.label=4;case 4:return p.trys.push([4,6,,7]),[4,zG()];case 5:return r=p.sent(),[3,7];case 6:return p.sent(),[3,7];case 7:for(o={},a=function(n){var i=n.id,a=0,s=0;r.hasOwnProperty(i)&&(a=null!==(e=r[i].downloads)&&void 0!==e?e:0,s=null!==(t=r[i].updated)&&void 0!==t?t:0);var l=createDiv("community-item");l.addEventListener("click",(function(){return h.selectItem(i)}));var c=l.createDiv("community-item-name"),u=l.createDiv("community-item-author");if(a){var p=l.createDiv("community-item-downloads");p.createSpan({},(function(e){gb(e,"lucide-download-cloud")})),p.createSpan({cls:"community-item-downloads-text",text:a.toLocaleString()})}0!==s&&l.createDiv({cls:"community-item-updated",text:$j.labelLastUpdated({time:window.moment(s).fromNow()})});var d=l.createDiv({cls:"community-item-desc"});o[i]=g(g({},n),{downloads:a,updated:s,el:l,nameEl:c,authorEl:u,descEl:d})},s=0,l=n;s<l.length;s++)c=l[s],a(c);return(u=this.selectedItemId)&&!o.hasOwnProperty(u)&&this.search.setValue(u.split("-").join(" ")),[2,o]}}))}))},t.prototype.updateItems=function(){var e=this.items,t=this.search.getValue().trim().toLowerCase(),n=this.installedOnlyToggle.getValue(),i=this.app.plugins.manifests,r=t.split(" "),o=[];for(var a in e){if(e.hasOwnProperty(a))if((m=e[a]).id&&m.name&&m.repo&&(m.matches=null,m.score=0,!n||i.hasOwnProperty(m.id)))if(""===t)o.push(m);else{var s=m.name,l=m.author,c=m.description;if(!s)continue;l=l||"",c=c||"";var u=s.toLowerCase()+l.toLowerCase()+c.toLowerCase();m.matches=nL(r,u),m.matches&&(o.push(m),m.score=ZA(m.matches,u.length,t.length,0))}}this.sortItems(o);for(var h=0,p=function(e){var t=e.el,n=e.nameEl,r=e.authorEl,o=e.descEl,a=e.id,s=e.name,l=e.author,c=e.description,u=e.matches;t.hide();var p=function(){l=l||"",c=c||"",n.empty(),r.empty(),o.empty(),oL(n,s,u),i.hasOwnProperty(a)&&n.createSpan({cls:"flair mod-pop",text:$j.labelInstalled()}),l&&(r.setText($j.labelByAuthor()),oL(r,l,u,-s.length)),c&&oL(o,Id(c,200),u,-(s.length+l.length)),t.show()};h<20?p():d.renderQueue.add(p),h++},d=this,f=0,g=o;f<g.length;f++){var m;p(m=g[f])}var v=rf.nouns.pluginWithCount({count:o.length});return this.searchSummaryEl.setText($j.labelSearchSummary({pluginCount:v})),o},t.prototype.showItem=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M,T,D,A,L,P=this;return y(this,(function(I){switch(I.label){case 0:n=(t=this).app,i=t.detailsEl,r=e.id,o=e.name,a=e.description,s=e.repo,l=Y_(s,kG),c=Y_(s,"README.md"),u=null,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,j_(l).json];case 2:return(u=I.sent()).id&&u.id===r?[3,4]:(new CI("Plugin ID mismatch."),[2]);case 3:return h=I.sent(),console.error(h),new CI($j.msgFailedToLoadManifest()),[2];case 4:return[4,Z_(s,u)];case 5:p=I.sent()||u.version,d=i.createDiv("community-modal-info"),f=d.createDiv({cls:"community-modal-info-name",text:o}),(g=n.plugins.manifests[r])&&f.createSpan({cls:"flair mod-pop",text:$j.labelInstalled()}),e.downloads&&d.createDiv("community-modal-info-downloads",(function(t){t.createSpan({},(function(e){gb(e,"lucide-download-cloud")})),t.createSpan({cls:"community-modal-info-downloads-text",text:e.downloads.toLocaleString()})})),p&&(m=d.createDiv({cls:"community-modal-info-version",text:$j.labelVersion({version:p})}),g&&g.version&&m.appendText($j.labelCurrentlyInstalledVersion({version:g.version}))),(b=e.author||u.author)&&(w=d.createDiv({cls:"community-modal-info-author",text:$j.labelByAuthor()}),u.authorUrl?w.createEl("a",{href:u.authorUrl,text:b,attr:{target:"_blank",rel:"noopener"}}):w.appendText(b)),k=d.createDiv({cls:"community-modal-info-repo",text:$j.labelRepository()}),C=X_(s),k.createEl("a",{href:C,text:C,attr:{target:"_blank",rel:"noopener"}}),0!==e.updated&&d.createDiv({cls:"community-modal-info-repo",text:$j.labelLastUpdate()},(function(t){t.createEl("a",{href:C+"/releases/latest",text:window.moment(e.updated).fromNow(),attr:{target:"_blank",rel:"noopener"}},(function(e){return aS(e,$j.tooltipViewLastUpdate())}))})),a&&d.createDiv({cls:"community-modal-info-desc",text:a}),(E=!Lt.isDesktopApp&&u.isDesktopOnly)&&d.createDiv({cls:"mod-warning",text:$j.labelUnsupported()}),x=d.createDiv("community-modal-button-container"),(S=x.createEl("button",{cls:"mod-cta",text:$j.buttonInstall()})).addEventListener("click",(function(){return v(P,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return E?(new CI($j.labelUnsupported()),[2]):[4,Z_(s,u)];case 1:return(t=n.sent())?[4,this.app.plugins.installPlugin(s,t,u)]:(new CI("No appropriate version found."),[2]);case 2:return n.sent(),this.update(),[4,this.selectItem(e.id)];case 3:return n.sent(),[2]}}))}))})),g&&(Nd(g.version,p)?S.setText($j.buttonUpdate()):S.detach(),(M=n.plugins.getPlugin(r))&&(T=this.app.setting,n.setting.pluginTabs.some((function(e){return e.id===r}))&&x.createEl("button",{text:rf.setting.options()}).addEventListener("click",(function(){P.close(),T.open(),T.openTabById(u.id)})),Object.keys(n.commands.commands).some((function(e){return e.startsWith(r+":")}))&&x.createEl("button",{text:rf.setting.hotkeys.name()}).addEventListener("click",(function(){P.close(),T.open();var e=T.openTabById("hotkeys");e instanceof Xj&&e.setQuery(u.id)}))),x.createEl("button",{text:$j(M?"button-disable":"button-enable")}).addEventListener("click",(function(){return v(P,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return M?[4,n.plugins.disablePluginAndSave(r)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.plugins.enablePluginAndSave(r)];case 3:t.sent(),t.label=4;case 4:return[4,this.selectItem(e.id)];case 5:return t.sent(),[2]}}))}))})),x.createEl("button",{text:$j.labelUninstall()}).addEventListener("click",(function(){return v(P,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n.plugins.uninstallPlugin(r)];case 1:return t.sent(),this.update(),[4,this.selectItem(e.id)];case 2:return t.sent(),[2]}}))}))}))),x.createEl("button",{text:$j.buttonCopyShareLink()}).addEventListener("click",(function(){return v(P,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText("obsidian://show-plugin?id="+encodeURIComponent(r))];case 1:return e.sent(),new CI(rf.interface.copied()),[2]}}))}))})),u.fundingUrl&&x.createEl("button",{text:$j.buttonDonate()}).addEventListener("click",(function(){new Qj(n,e.name,u.fundingUrl).open()})),I.label=6;case 6:return I.trys.push([6,8,,9]),[4,j_(c).text];case 7:return D=I.sent(),[3,9];case 8:return I.sent(),D=$j.labelNoReadme(),[3,9];case 9:return d.createEl("hr"),A=d.createDiv("community-modal-readme markdown-rendered"),L=ux(rx(D)),A.appendChild(hM(L)),J_(A,s),this.scrollIntoView(r),[2]}}))}))},t}(Wj),Qj=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.setTitle($j.labelDonateModalTitle({name:n}));var o=document.createDocumentFragment();if(o.createEl("p",{text:$j.labelDonateModalText1()}),o.createEl("p",{text:$j.labelDonateModalText2()}),o.createEl("p",{text:$j.labelDonateModalText3()}),o.createEl("hr"),"string"==typeof i)o.createEl("p",{text:$j.labelSupportThisPlugin()+" "},(function(e){e.createEl("a",{text:i,href:i,cls:"external-link",attr:{target:"_blank"}})}));else if("object"==typeof i){var a=function(e){if(!i.hasOwnProperty(e))return"continue";var t=i[e];o.createEl("p",{text:e+": "},(function(e){e.createEl("a",{text:t,href:t,cls:"external-link",attr:{target:"_blank"}})}))};for(var s in i)a(s)}return r.setContent(o),r.addButton("mod-cta",rf.dialogue.buttonDone(),(function(){return r.close()})),r}return f(t,e),t}(PI),Jj=function(e){function t(t){var n=e.call(this,t)||this;n.limit=100,n.emptyStateText=rf.setting.thirdPartyPlugin.labelNoResultsFound(),n.isOpen=!1,n.inputEl=null,n.ctaEl=null,n.resultContainerEl=null;var i=n.modalEl;return i.removeClass("modal"),i.addClass("prompt"),i.empty(),i.createDiv("prompt-input-container",(function(e){n.inputEl=e.createEl("input",{cls:"prompt-input",type:"text",attr:{enterkeyhint:Lt.isAndroidApp?"enter":"done"}}),n.ctaEl=e.createDiv("prompt-input-cta")})),n.resultContainerEl=i.createDiv("prompt-results"),n.resultContainerEl.on("mousedown",".suggestion-item",(function(e){return e.preventDefault()})),n.chooser=new aB(n,n.resultContainerEl,n.scope),n.inputEl.addEventListener("input",n.onInput.bind(n)),n}return f(t,e),t.prototype.setPlaceholder=function(e){this.inputEl.placeholder=e},t.prototype.setInstructions=function(e){this.modalEl.appendChild(cB(e))},t.prototype.onOpen=function(){var e=this.inputEl;this.isOpen=!0,e.value="",e.focus(),this.updateSuggestions()},t.prototype.onInput=function(){this.updateSuggestions()},t.prototype.updateSuggestions=function(){var e=this,t=this.inputEl.value,n=this.getSuggestions(t),i=function(t){if(t&&0!==t.length){var n=e.limit;n&&n>0&&(t=t.slice(0,n)),e.chooser.setSuggestions(t)}else e.onNoSuggestion()};Array.isArray(n)?i(n):v(e,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=i,[4,n];case 1:return e.apply(void 0,[t.sent()]),[2]}}))}))},t.prototype.onNoSuggestion=function(){this.chooser.setSuggestions(null),this.chooser.addMessage(this.emptyStateText)},t.prototype.selectSuggestion=function(e,t){this.app.keymap.updateModifiers(t),this.close(),this.isOpen=!1,this.onChooseSuggestion(e,t)},t}(LI),eG=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.getSuggestions=function(e){e=e.trim();for(var t=this.getItems(),n=XA(e),i=[],r=0,o=t;r<o.length;r++){var a=o[r],s=JA(n,this.getItemText(a));s&&i.push({match:s,item:a})}return eL(i),i},t.prototype.renderSuggestion=function(e,t){rL(t,this.getItemText(e.item),e.match)},t.prototype.onChooseSuggestion=function(e,t){this.onChooseItem(e.item,t)},t}(Jj),tG="theme.css",nG="manifest.json",iG=rf.plugins.customCss;var rG=Y_("obsidianmd/obsidian-releases","community-css-themes.json"),oG=VD((function(){return v(void 0,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,j_(rG).json];case 1:if(e=t.sent(),!Array.isArray(e))throw new Error("Failed to parse community themes.");return[2,e]}}))}))}),3e5,6e4),aG=VD((function(){return j_("https://releases.obsidian.md/stats/theme").json}),3e5,6e4),sG=function(e){function t(t){var n=e.call(this)||this;return n.app=null,n.styleEl=null,n.extraStyleEls=[],n.boundRaw=n.onRaw.bind(n),n.oldThemes=[],n.themes={},n.updates={},n.snippets=[],n.enabledSnippets=new Set,n.csscache=new Map,n.theme="",n.requestLoadTheme=rt(n.loadTheme.bind(n),100),n.requestLoadSnippets=rt(n.loadSnippets.bind(n),100),n.requestReadThemes=rt(n.readThemes.bind(n),2e3),n.queue=new RD,n.app=t,n}return f(t,e),t.prototype.onload=function(){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e.prototype.onload.call(this),t=this.app,this.loadData(),[4,this.readThemes()];case 1:return n.sent(),[4,this.readSnippets()];case 2:return n.sent(),this.styleEl=document.head.createEl("style",{type:"text/css"}),this.registerEvent(t.vault.on("raw",this.boundRaw)),[4,this.loadTheme()];case 3:return n.sent(),[4,this.loadSnippets()];case 4:return n.sent(),[2]}}))}))},t.prototype.loadData=function(){var e=this.app.vault,t=e.getConfig("enabledCssSnippets");t&&(this.enabledSnippets=new Set(t));var n=e.getConfig("cssTheme");n&&(this.theme=n),e.getConfig("translucency")&&this.enableTranslucency()},t.prototype.readThemes=function(e){var t=this;return this.queue.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w;return y(this,(function(y){switch(y.label){case 0:return t=this.app,n=this.app.vault.adapter,i=[],r={},o=this.getThemeFolder(),[4,t.vault.exists(o)];case 1:return y.sent()?[4,n.list(o)]:[3,10];case 2:a=y.sent(),s=0,l=a.folders,y.label=3;case 3:if(!(s<l.length))return[3,9];c=l[s],u=ie(c),h=he(c+"/"+nG),p=he(c+"/"+tG),y.label=4;case 4:return y.trys.push([4,7,,8]),[4,n.exists(p)];case 5:return y.sent()?[4,n.read(h)]:[3,8];case 6:return d=y.sent(),(f=JSON.parse(d)).name&&f.name===u?(f.dir=c,r[u]=f,[3,8]):[3,8];case 7:return g=y.sent(),console.error(g),[3,8];case 8:return s++,[3,3];case 9:for(m=0,v=a.files;m<v.length;m++)b=v[m],(w=ie(b)).startsWith(".")||"css"!==le(w)||i.push(ae(w));y.label=10;case 10:return this.oldThemes=i,this.themes=r,e&&this.requestLoadTheme(),[2]}}))}))}))},t.prototype.readSnippets=function(e){var t=this;return this.queue.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return t=this.app.vault,n=t.adapter,i=[],r=this.getSnippetsFolder(),[4,n.exists(r)];case 1:return u.sent()?[4,n.list(r)]:[3,3];case 2:for(o=u.sent(),a=0,s=o.files;a<s.length;a++)l=s[a],(c=ie(l)).startsWith(".")||"css"!==le(c)||i.push(ae(c));u.label=3;case 3:return i.sort(JL),this.snippets=i,e&&this.requestLoadSnippets(),[2]}}))}))}))},t.prototype.onRaw=function(e){this.csscache.has(e)&&this.csscache.delete(e);var t=ie(e),n=le(t);e===this.getThemePath(this.theme)&&this.requestLoadTheme(),!e.startsWith(this.getThemeFolder())||t!==nG&&t!==tG&&"css"!==n||this.requestReadThemes(),e.startsWith(this.getSnippetsFolder())&&"css"===n&&this.readSnippets(!0)},t.prototype.loadTheme=function(e){var t=this;return this.queue.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return n=(t=this).styleEl,i=t.theme,r="",e?(r=e,[3,3]):[3,1];case 1:return i?[4,this.loadCss(this.getThemePath(i))]:[3,3];case 2:r=o.sent(),o.label=3;case 3:return n.textContent!==r&&(n.textContent=r,this.app.workspace.trigger("css-change"),this.app.workspace.trigger("resize")),[2]}}))}))}))},t.prototype.loadSnippets=function(){var e=this;return this.queue.queue((function(){return v(e,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m;return y(this,(function(v){switch(v.label){case 0:t=(e=this).styleEl,n=e.extraStyleEls,i=e.enabledSnippets,r=e.snippets,o=[],a=0,s=r,v.label=1;case 1:return a<s.length?(l=s[a],i.has(l)?(u=(c=o).push,[4,this.loadCss(this.getSnippetPath(l))]):[3,3]):[3,4];case 2:u.apply(c,[v.sent()]),v.label=3;case 3:return a++,[3,1];case 4:for(h=!1,p=0,d=t;p<o.length;p++)(f=n[p])||(f=createEl("style",{type:"text/css"}),n.push(f),d.parentNode.insertAfter(f,d),h=!0),f.textContent!==o[p]&&(f.textContent=o[p],h=!0),d=f;for(g=n.length-o.length,m=0;m<g;m++)n.pop().detach(),h=!0;return h&&(this.app.workspace.trigger("css-change"),this.app.workspace.trigger("resize")),[2]}}))}))}))},t.prototype.loadCss=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return(t=this.csscache).has(e)?[2,t.get(e)]:[4,(n=this.app.vault.adapter).exists(e)];case 1:return r.sent()?[4,n.read(e)]:[3,3];case 2:return i=r.sent(),t.set(e,i),[2,i];case 3:return[2,null]}}))}))},t.prototype.setCssEnabledStatus=function(e,t){var n=this.enabledSnippets;t?n.add(e):n.delete(e),this.app.vault.setConfig("enabledCssSnippets",Array.from(n)),this.requestLoadSnippets()},t.prototype.setTheme=function(e){this.theme=e,this.app.vault.setConfig("cssTheme",e),this.requestLoadTheme()},t.prototype.setTranslucency=function(e){this.app.vault.setConfig("translucency",e),e?this.enableTranslucency():this.disableTranslucency()},t.prototype.enableTranslucency=function(){if(Lt.isDesktopApp&&Ut())try{Wt(electronWindow,!0),document.body.addClass("is-translucent")}catch(e){new CI(rf.interface.msgUpgradeInstaller())}},t.prototype.disableTranslucency=function(){if(Lt.isDesktopApp&&Ut()){document.body.removeClass("is-translucent");try{Wt(electronWindow,!1)}catch(e){}}},t.prototype.getThemeFolder=function(){return"".concat(this.app.vault.configDir,"/themes")},t.prototype.getSnippetsFolder=function(){return"".concat(this.app.vault.configDir,"/snippets")},t.prototype.getThemePath=function(e){return!this.themes.hasOwnProperty(e)&&this.oldThemes.contains(e)?"".concat(this.getThemeFolder(),"/").concat(e,".css"):"".concat(this.getThemeFolder(),"/").concat(e,"/").concat(tG)},t.prototype.getSnippetPath=function(e){return"".concat(this.getSnippetsFolder(),"/").concat(e,".css")},t.prototype.removeTheme=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=this.app.vault.adapter,n=this.getThemeFolder(),i="".concat(n,"/").concat(e),[4,t.exists(i)];case 1:return a.sent()?[4,t.rmdir(i,!0)]:[3,3];case 2:a.sent(),a.label=3;case 3:return r="".concat(n,"/").concat(e,".css"),(o=this.oldThemes.contains(e))?[4,t.exists(r)]:[3,5];case 4:o=a.sent(),a.label=5;case 5:return o?[4,t.remove(r)]:[3,7];case 6:a.sent(),a.label=7;case 7:return[4,this.readThemes()];case 8:return a.sent(),[2]}}))}))},t.prototype.downloadLegacyTheme=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,j_(Y_(e.repo,"obsidian.css")).text];case 1:return[2,t.sent()]}}))}))},t.prototype.isThemeInstalled=function(e){return this.themes.hasOwnProperty(e)||this.oldThemes.contains(e)},t.prototype.hasUpdates=function(){return this.updates&&Object.keys(this.updates).length>0},t.prototype.checkForUpdate=function(e){var t,n;return v(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u,h,p,d,f;return y(this,(function(g){switch(g.label){case 0:if(i=this.getThemeFolder(),r=this.updates||{},o=e.name,a=e.repo,!this.isThemeInstalled(o))return[2];s=null===(t=this.themes[o])||void 0===t?void 0:t.version,l=Y_(a,nG),c=null,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,j_(l).json];case 2:return(c=g.sent())&&c.name&&c.name===o?[3,4]:[2];case 3:return g.sent(),[3,4];case 4:return c?[3,10]:[4,this.downloadLegacyTheme(e)];case 5:u=g.sent(),h=!!(null===(n=this.themes[e.name])||void 0===n?void 0:n.dir),p=h?"".concat(i,"/").concat(o,"/").concat(tG):"".concat(i,"/").concat(o,".css"),d="",g.label=6;case 6:return g.trys.push([6,8,,9]),[4,this.app.vault.adapter.read(p)];case 7:return d=g.sent(),[3,9];case 8:return g.sent(),[2,!1];case 9:return u!==d?(r[o]={themeInfo:e},[2,!0]):[2,!1];case 10:return[4,Z_(a,c)];case 11:return f=g.sent(),!s||f&&Nd(s,f)?(r[o]={themeInfo:e,version:f},[2,!0]):[2,!1]}}))}))},t.prototype.checkForUpdates=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:this.updates={},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,oG()];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),console.error(t),new CI(iG.msgFailedToInstallTheme()),[2];case 4:n=0,i=e,a.label=5;case 5:return n<i.length?(r=i[n],[4,this.checkForUpdate(r)]):[3,8];case 6:a.sent(),a.label=7;case 7:return n++,[3,5];case 8:return o=Object.keys(this.updates).length,new CI(0===o?iG.msgNoUpdatesFound():iG.msgUpdatesFound({count:o})),[2]}}))}))},t.prototype.installLegacyTheme=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=this.app.vault,n=e.name,[4,this.downloadLegacyTheme(e)];case 1:return i=l.sent(),r=this.getThemeFolder(),[4,t.exists(r)];case 2:return l.sent()?[3,4]:[4,t.createFolder(r)];case 3:l.sent(),l.label=4;case 4:return o="".concat(r,"/").concat(n),[4,t.exists(o)];case 5:return l.sent()?[3,7]:[4,t.createFolder(o)];case 6:l.sent(),l.label=7;case 7:return a={name:(c=e).name,version:"0.0.0",minAppVersion:"0.16.0",author:c.author},[4,t.adapter.write(o+"/"+tG,i)];case 8:return l.sent(),[4,t.adapter.write(o+"/"+nG,JSON.stringify(a,null,4))];case 9:return l.sent(),s="".concat(r,"/").concat(n,".css"),[4,t.adapter.exists(s)];case 10:return l.sent()?[4,t.adapter.remove(s)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[4,this.readThemes()];case 13:return l.sent(),[2]}var c}))}))},t.prototype.installTheme=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,p,d;return y(this,(function(f){switch(f.label){case 0:n=e.name,i=e.repo,new CI(iG.msgInstallingTheme({name:n}));try{r=[],(o=localStorage.getItem("local-themes"))&&(r=JSON.parse(o),Array.isArray(r)||(r=[])),r.contains(n)||(r.push(n),localStorage.setItem("local-themes",JSON.stringify(r)),ajax({method:"POST",url:"https://releases.obsidian.md/stats/theme/".concat(encodeURIComponent(n),"/download")}))}catch(e){console.error(e)}return t?[3,2]:[4,this.installLegacyTheme(e)];case 1:return f.sent(),delete this.updates[n],[2];case 2:return f.trys.push([2,5,,13]),[4,j_($_(i,t,nG)).text];case 3:return a=f.sent(),[4,j_($_(i,t,tG)).text];case 4:return s=f.sent(),[3,13];case 5:if(l=f.sent(),a||!(l instanceof V_)||404!==l.status)return[3,11];f.label=6;case 6:return f.trys.push([6,9,,10]),[4,j_(Y_(i,nG)).text];case 7:return a=f.sent(),[4,j_(Y_(i,tG)).text];case 8:return s=f.sent(),[3,10];case 9:return c=f.sent(),console.error(c),new CI(iG.msgFailedToInstallTheme({name:n})),[2];case 10:return[3,12];case 11:return console.error(l),new CI(iG.msgFailedToInstallTheme({name:n})),[2];case 12:return[3,13];case 13:return JSON.parse(a).name!==n?(new CI(iG.msgFailedToInstallTheme({name:n})+" Theme name mismatch."),[2]):(u=this.app.vault.adapter,h=this.getThemeFolder(),[4,u.exists(h)]);case 14:return f.sent()?[3,16]:[4,u.mkdir(h)];case 15:f.sent(),f.label=16;case 16:return p=h+"/"+n,[4,u.exists(p)];case 17:return f.sent()?[3,19]:[4,u.mkdir(p)];case 18:f.sent(),f.label=19;case 19:return[4,u.write(p+"/"+nG,a)];case 20:return f.sent(),[4,u.write(p+"/"+tG,s)];case 21:return f.sent(),d="".concat(h,"/").concat(n,".css"),[4,u.exists(d)];case 22:return f.sent()?[4,u.remove(d)]:[3,24];case 23:f.sent(),f.label=24;case 24:return new CI(iG.msgSuccessfullyInstalledTheme({name:n})),delete this.updates[n],[4,this.readThemes()];case 25:return f.sent(),[2]}}))}))},t.prototype.getManifest=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=Y_(e,nG),n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,j_(t).json];case 2:return n=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return[2,n]}}))}))},t}(nb),lG=function(e){function t(t){var n=e.call(this,t)||this;return n.requestThemePreview=rt(n.previewTheme,100,!0),n.initialTheme=t.customCss.theme,n.setInstructions([{command:"↑↓",purpose:rf.plugins.commandPalette.instructionNavigate()},{command:"↵",purpose:rf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:rf.plugins.commandPalette.instructionDismiss()}]),n.scope.register(null,"Tab",(function(){return!1})),n.scope.register(null,"Enter",(function(e){if(!e.isComposing)return n.chooser.useSelectedItem(e),!1})),n}return f(t,e),t.prototype.getItems=function(){var e=this.app.customCss,t=[];for(var n in t.push({name:"",display:rf.setting.appearance.labelDefaultTheme()}),e.themes)t.push({name:n,display:n});for(var i=0,r=e.oldThemes;i<r.length;i++){n=r[i];e.themes.hasOwnProperty(n)||t.push({name:n,display:n+" (Legacy)"})}return t},t.prototype.renderSuggestion=function(t,n){e.prototype.renderSuggestion.call(this,t,n),t.item.name===this.initialTheme&&n.createSpan({cls:"flair mod-pop",text:rf.setting.appearance.labelCurrentlySelected()})},t.prototype.getItemText=function(e){return e.display},t.prototype.onChooseItem=function(e,t){this.app.customCss.setTheme(e.name)},t.prototype.onSelectedChange=function(e,t){t&&t.instanceOf(KeyboardEvent)&&this.requestThemePreview(e.item.name)},t.prototype.previewTheme=function(e){this.isOpen&&this.app.customCss.setTheme(e)},t.prototype.onEscapeKey=function(){e.prototype.onEscapeKey.call(this),this.app.customCss.setTheme(this.initialTheme)},t}(eG),cG=rf.plugins.customCss,uG=rf.setting.thirdPartyPlugin;const hG=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.sortOrderOptions=["download","release","alphabetical"],r.setTitle(cG.settingCommunityThemes()),r.modalEl.addClass("mod-community-theme"),r.search.setPlaceholder(cG.promptFilter()),r.sortOrder=localStorage.getItem("communityThemeSortOrder")||"download",r.onlyShowUpdates=n,r}return f(t,e),t.prototype.onClose=function(){e.prototype.onClose.call(this),localStorage.setItem("communityThemeSortOrder",this.sortOrder)},t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){return y(this,(function(t){return this.onlyShowUpdates&&(this.currentModeToggleSetting.settingEl.detach(),this.installedOnlyToggleSetting.settingEl.detach()),e.prototype.onOpen.call(this),[2]}))}))},t.prototype.addCustomControls=function(e){var t=this;this.currentModeToggleSetting=new YI(e).setName("obsidian"===this.app.getTheme()?cG.labelDarkThemeOnly():cG.labelLightThemeOnly()).addToggle((function(e){return t.currentModeToggle=e.setSmall().setValue(!0).onChange((function(){return t.update()}))}))},t.prototype.setAutoOpen=function(e){return this.selectedItemId=e,this},t.prototype.loadItems=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,m,v,b,w,k,C,E,x,S;return y(this,(function(y){switch(y.label){case 0:e=this.app.customCss,t={},n={},i=oG(),r=aG(),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,i];case 2:for(o=y.sent(),a=0,s=o;a<s.length;a++)l=s[a],t[l.name]=l;return[3,4];case 3:return c=y.sent(),console.error(c),new CI(cG.msgLoadError()),[3,4];case 4:return y.trys.push([4,6,,7]),[4,r];case 5:return n=y.sent(),[3,7];case 6:return u=y.sent(),console.error(u),[3,7];case 7:for(b in h=function(e){return n[e]?n[e].download:0},(p={})[""]=this.addThemeCard({name:"",author:"Obsidian",modes:["dark","light"],screenshot:"obsidian"===this.app.getTheme()?"dark.png":"light.png",repo:"obsidianmd/obsidian-releases",downloads:0}),e.themes)d=e.themes[b],v=t[b]||{},p[b]=this.addThemeCard(g(g(g({name:b,author:"",modes:["dark","light"],screenshot:"",repo:""},v),d),{downloads:h(b)}));for(f=0,m=e.oldThemes;f<m.length;f++)b=m[f],e.themes.hasOwnProperty(b)||(v=t[b]||{},p[b]=this.addThemeCard(g(g({name:b,author:"",modes:["dark","light"],screenshot:"",repo:""},v),{downloads:h(b)})));for(b in t)p.hasOwnProperty(b)||(w=t[b],k=w.name,C=w.author,E=w.repo,x=w.modes,S=w.screenshot,w.legacy||(p[b]=this.addThemeCard({name:k,author:C,repo:E,modes:x,screenshot:S,downloads:h(b)})));return[2,p]}}))}))},t.prototype.addThemeCard=function(e){var t=this,n=e.name,i=e.author,r=e.repo,o=e.modes,a=e.screenshot,s=e.downloads,l=""===n,c=createDiv("community-item");c.addEventListener("click",(function(){return t.selectItem(n)}));var u=c.createDiv("community-item-name"),h=c.createDiv("community-item-author"),p=c.createDiv("community-item-badge mod-update");if(!l&&s){var d=c.createDiv("community-item-downloads");d.createSpan({},(function(e){gb(e,"lucide-download-cloud")})),d.createSpan({cls:"community-item-downloads-text",text:s.toLocaleString()})}if(r&&a){var f=Y_(r,a),g=c.createEl("img",{cls:"community-item-screenshot",attr:{alt:n,src:f,loading:"lazy"}});g.style.opacity="0",g.addEventListener("load",(function(){g.style.opacity=""}))}else c.createDiv("community-item-screenshot mod-unavailable",(function(e){gb(e.createDiv("placeholder-icon"),"lucide-camera-off")}));return{name:n,author:i,repo:r,modes:o,screenshot:a,downloads:s,el:c,nameEl:u,authorEl:h,updateIconEl:p,updated:0}},t.prototype.updateItems=function(){var e=this.items,t=this.app.customCss,n=this.search.getValue().trim().toLowerCase(),i=this.installedOnlyToggle.getValue(),r=!this.onlyShowUpdates&&this.currentModeToggle.getValue(),o=new Set(t.oldThemes.concat(Object.keys(t.themes)).concat("")),a="obsidian"===this.app.getTheme()?"dark":"light",s=n.split(" "),l=[],c=null;for(var u in e){if(e.hasOwnProperty(u))if(""===(m=e[u]).name&&(c=m),(!i||o.has(m.name))&&(!r||m.modes.contains(a))){if(t.updates.hasOwnProperty(m.name))m.updateIconEl.firstChild||(gb(m.updateIconEl,"lucide-alert-triangle"),aS(m.updateIconEl,cG.labelUpdateAvailable())),m.updateIconEl.show();else if(m.updateIconEl.hide(),this.onlyShowUpdates)continue;if(m.matches=null,m.score=0,""===n)l.push(m);else{var h=m.name,p=m.author;if(!h)continue;p=p||"";var d=h.toLowerCase()+p.toLowerCase();m.matches=nL(s,d),m.matches&&(l.push(m),m.score=ZA(m.matches,d.length,n.length,0))}}}this.sortItems(l),c&&l.contains(c)&&(l.remove(c),l.unshift(c));for(var f=0,g=l;f<g.length;f++){var m,v=(m=g[f]).el,y=m.nameEl,b=m.authorEl,w=(h=m.name,p=m.author,m.matches),k=""===h,C=o.has(h),E=t.theme===h&&(C||k);k&&(h=rf.setting.appearance.labelDefaultTheme()),y.empty(),b.empty(),v.toggleClass("mod-active",E),oL(y,h,w),E?y.createSpan({cls:"flair mod-pop",text:rf.setting.appearance.labelCurrentlySelected()}):t.oldThemes.contains(h)&&!t.themes.hasOwnProperty(h)?y.createSpan({cls:"flair",text:cG.labelLegacy()}):(C||k)&&y.createSpan({cls:"flair",text:cG.labelInstalled()}),p&&(b.setText(uG.labelByAuthor()),oL(b,p,w,-h.length))}var x=rf.nouns.themeWithCount({count:l.length});return this.searchSummaryEl.setText(cG.labelSearchSummary({themeCount:x})),l},t.prototype.showItem=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M,T,D,A,L=this;return y(this,(function(P){switch(P.label){case 0:return n=(t=this).app,i=t.detailsEl,r=n.customCss,o=e.name,a=e.repo,s=""===o,l=r.isThemeInstalled(o),c=r.theme===o&&(s||l),u=r.oldThemes.contains(o)&&!r.themes.hasOwnProperty(o),s&&(o=rf.setting.appearance.labelDefaultTheme()),h="",r.themes.hasOwnProperty(e.name)&&(h=r.themes[e.name].version||""),[4,r.getManifest(e.repo)];case 1:return p=P.sent(),d="",p?[4,Z_(a,p)]:[3,3];case 2:d=P.sent()||p.version,P.label=3;case 3:return f=i.createDiv("community-modal-info"),g=f.createDiv({cls:"community-modal-info-name",text:o}),l&&g.createSpan({cls:"flair mod-pop",text:u?cG.labelLegacy():uG.labelInstalled()}),e.downloads&&f.createDiv("community-modal-info-downloads",(function(t){t.createSpan({},(function(e){gb(e,"lucide-download-cloud")})),t.createSpan({cls:"community-modal-info-downloads-text",text:e.downloads.toLocaleString()})})),d&&(m=f.createDiv({cls:"community-modal-info-version",text:uG.labelVersion({version:d})}),l&&h&&m.appendText(uG.labelCurrentlyInstalledVersion({version:h}))),(b=e.author||p&&p.author)&&(w=f.createDiv({cls:"community-modal-info-author",text:uG.labelByAuthor()}),p&&p.authorUrl?w.createEl("a",{href:p.authorUrl,text:b,attr:{target:"_blank",rel:"noopener"}}):w.appendText(b)),a&&!s&&(k=f.createDiv({cls:"community-modal-info-repo",text:uG.labelRepository()}),C=X_(a),k.createEl("a",{href:C,text:C,attr:{target:"_blank",rel:"noopener"}})),E=function(t){return v(L,void 0,void 0,(function(){var n,i=this;return y(this,(function(s){switch(s.label){case 0:return n=null,p?[4,Z_(a,p)]:[3,2];case 1:if(!(n=s.sent()))return new CI("No appropriate version found."),[2];s.label=2;case 2:return[4,Ib(t,(function(){return v(i,void 0,void 0,(function(){return y(this,(function(t){return[2,r.installTheme(e,n)]}))}))}))];case 3:return s.sent(),this.update(),[4,this.selectItem(o)];case 4:return s.sent(),[2]}}))}))},x=f.createDiv("community-modal-button-container"),c?s?x.createEl("button",{text:rf.setting.appearance.labelCurrentlySelected(),attr:{disabled:!0}}):x.createEl("button",{text:cG.labelStopUse()}).addEventListener("click",(function(){return v(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return r.setTheme(""),this.update(),[4,this.selectItem(o)];case 1:return e.sent(),[2]}}))}))})):(S=x.createEl("button",{cls:"mod-cta",text:s||l?cG.labelUse():cG.labelInstallAndUse()})).addEventListener("click",(function(){return v(L,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return s||l?[3,2]:[4,E(S)];case 1:t.sent(),t.label=2;case 2:return r.setTheme(e.name),this.update(),[4,this.selectItem(o)];case 3:return t.sent(),[2]}}))}))})),!s&&l&&(r.updates.hasOwnProperty(e.name)||Nd(h,d)?(M=x.createEl("button",{cls:"mod-cta",text:cG.labelUpdate()})).addEventListener("click",(function(){return v(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,E(M)];case 1:return e.sent(),this.update(),[4,this.selectItem(o)];case 2:return e.sent(),[2]}}))}))})):p||x.createEl("button",{text:rf.setting.appearance.buttonCheckForUpdates()}).addEventListener("click",(function(){return v(L,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.checkForUpdate(e)];case 1:return t.sent()?[3,2]:(new CI(cG.msgNoUpdatesFound()),[3,4]);case 2:return[4,this.selectItem(o)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}))),r.isThemeInstalled(o)&&x.createEl("button",{text:uG.labelUninstall()}).addEventListener("click",(function(){return v(L,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,r.removeTheme(o)];case 1:return e.sent(),r.setTheme(""),this.update(),[4,this.selectItem(o)];case 2:return e.sent(),new CI(cG.msgDeletedTheme({title:o})),[2]}}))}))})),s?(T="\nA minimalistic theme handcrafted by Stephan Ango. The theme is designed to feel native across all platforms, while prioritizing **accessibility** and a _clear_ visual language.\n\nThe theme is highly customizable and provides a new level of cohesiveness to the app.\n",[3,7]):[3,4];case 4:return P.trys.push([4,6,,7]),[4,j_(Y_(a,"README.md")).text];case 5:return T=P.sent(),[3,7];case 6:return P.sent(),T=cG.labelNoReadme(),[3,7];case 7:return f.createEl("hr"),D=f.createDiv("community-modal-readme markdown-rendered"),A=ux(rx(T)),D.appendChild(hM(A)),J_(D,a),e.el&&!Lt.isPhone&&e.el.scrollIntoView({behavior:"smooth",block:"nearest"}),[2]}}))}))},t}(Wj);var pG="obsidian://";var dG=function(){function e(e,t){this.items=[],this.workspace=null,this.containerEl=null,this.ribbonItemsEl=null,this.ribbonSettingEl=null,this.workspace=e;var n=this.containerEl=createDiv("workspace-ribbon side-dock-ribbon");n.addClass("mod-".concat(t)),"left"===t&&(this.ribbonItemsEl=n.createDiv("side-dock-actions"),this.ribbonSettingEl=n.createDiv("side-dock-settings"),Lt.isMobile||Ob(n));var i=e.app;if("left"===t){var r=this.makeRibbonItemButton("vault",rf.interface.switchVault(),(function(e){e.stopPropagation(),i.openVaultChooser()}));r.addEventListener("mouseover",(function(){gb(r,"open-vault")})),r.addEventListener("mouseout",(function(){gb(r,"vault")})),this.ribbonSettingEl.appendChild(r);var o=this.makeRibbonItemButton("help",rf.interface.help(),(function(e){e.stopPropagation(),i.openHelp()}));this.ribbonSettingEl.appendChild(o);var a=this.makeRibbonItemButton("lucide-settings",rf.interface.settings(),(function(e){e.stopPropagation(),i.setting.open()}));this.ribbonSettingEl.appendChild(a)}n.addEventListener("contextmenu",this.onContextMenu.bind(this))}return e.prototype.load=function(e){var t;if(e.hasOwnProperty("hiddenItems")){for(var n=e.hiddenItems,i=0,r=this.items;i<r.length;i++){var o=r[i];o.hidden=null!==(t=n[o.id])&&void 0!==t&&t}var a=Object.keys(n);this.items.sort((function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}))}this.onChange(!1)},e.prototype.serialize=function(){for(var e={},t=0,n=this.items;t<n.length;t++){var i=n[t];e[i.id]=i.hidden}return{hiddenItems:e}},e.prototype.addRibbonItemButton=function(e,t,n,i){var r=this,o=this.makeRibbonItemButton(t,n,i);this.ribbonItemsEl.insertBefore(o,null);var a={id:e,icon:t,title:n,buttonEl:o,callback:i,hidden:!1},s=this.items.findIndex((function(t){return t.id===e}));return-1===s?this.items.push(a):this.items[s]=a,Et(o,o,this.ribbonItemsEl,5,(function(){return null}),(function(e){r.items.remove(a),r.items.splice(e,0,a),r.onChange(!0)})),o},e.prototype.removeRibbonAction=function(e){var t=this.items.findIndex((function(t){return t.title===e}));-1!==t&&this.items.splice(t,1)},e.prototype.setCollapsedState=function(e){this.containerEl.toggleClass("is-collapsed",e)},e.prototype.hide=function(){this.containerEl.addClass("is-hidden")},e.prototype.show=function(){this.containerEl.removeClass("is-hidden")},e.prototype.onChange=function(e){var t=this.items.filter((function(e){return!!e.buttonEl&&!e.hidden})).map((function(e){return e.buttonEl}));this.ribbonItemsEl.setChildrenInPlace(t),e&&this.workspace.requestSaveLayout()},e.prototype.makeRibbonItemButton=function(e,t,n){var i=createDiv("clickable-icon side-dock-ribbon-action");return i.onClickEvent(n),aS(i,t,{delay:300,placement:"right"}),gb(i,e),i},e.prototype.onContextMenu=function(e){var t=this;if(e.target===this.containerEl){for(var n=new fw,i=function(e){n.addItem((function(n){return n.setTitle(e.title).setIcon(e.icon).setChecked(!e.hidden).onClick((function(){e.hidden=!e.hidden,t.onChange(!0)}))}))},r=0,o=this.items;r<o.length;r++){i(o[r])}n.showAtMouseEvent(e)}},e}(),fG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.win=window,t.doc=document,t}return f(t,e),t}(Ij),gG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.children=[],t.type="floating",t.allowSingleChild=!0,t.autoManageDOM=!1,t}return f(t,e),t}(Aj),mG=function(e){function t(t,n,i){var r=e.call(this,t,"vertical",n)||this;r.parent=null,r.children=[],r.type="window",r.size={},r.workspace=t,r.containerEl.addClass("mod-root","workspace-window"),r.component.load();var o="popup";if(i){var a=["popup"];i.size&&(i.width=Math.max(i.size.width,600),i.height=Math.max(i.size.height,600));for(var s=0,l=["x","y","width","height"];s<l.length;s++){var c=l[s];i.hasOwnProperty(c)&&(a.push("".concat(c,"=").concat(i[c])),r.size[c]=i[c])}o=a.join(",")}var u=r.win=window.open("about:blank","_blank",o);r.doc=u.document;var h=createEl("base",{href:location.href});if(u.document.head.appendChild(h),cI(u),pI(u),u.app=r.workspace.app,Yx(u.document),$0(u),lI(u),(r.rootEl=u.document.body.createDiv("app-container")).createDiv("horizontal-main-container").createDiv("workspace").appendChild(r.containerEl),u.document.title="Obsidian",u.addEventListener("focus",(function(){activeWindow=u,activeDocument=u.document,r.onFocus()})),u.addEventListener("beforeunload",(function(){r.close()})),u.addEventListener("mousedown",(function(e){var t,n;switch(e.button){case 3:null===(t=r.workspace.activeLeaf)||void 0===t||t.history.back();break;case 4:null===(n=r.workspace.activeLeaf)||void 0===n||n.history.forward()}}),{capture:!0}),u.addEventListener("resize",rt((function(){r.workspace.iterateLeaves(r,(function(e){return e.onResize()})),r.workspace.requestSaveLayout(),r.updateSize()}),50)),aI(u),r.cleanup=sI(u,[h]),r.component.registerEvent(r.workspace.on("quit",(function(){u.close()}))),r.component.registerEvent(r.workspace.on("layout-change",(function(){r.updateTitle()}))),i){i.maximize&&u.electronWindow.maximize();var p=i.zoom;p&&"number"==typeof p&&u.electron.webFrame.setZoomLevel(p)}else u.electron.webFrame.setZoomLevel(window.electron.webFrame.getZoomLevel());return t.trigger("window-open",r,u),r.updateSize(),r}return f(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this),n=this.win;if(n&&!n.closed){t.x=n.screenX,t.y=n.screenY,t.width=n.outerWidth,t.height=n.outerHeight,this.updateSize();var i=this.size;i&&Object.assign(t,i);try{var r=this.win.electronWindow;t.maximize=r.isMaximized(),t.zoom=r.webContents.zoomLevel}catch(e){}}return t},t.prototype.updateSize=function(){if(this.win){var e=this.win.electronWindow;if(e&&!e.isMaximized()&&!e.isMinimized()&&!e.isFullScreen()){var t=e.getBounds();this.size={x:t.x,y:t.y,width:t.width,height:t.height}}}},t.prototype.updateTitle=function(){if(this.win){var e=this.workspace.getMostRecentLeaf(this);this.win.document.title=this.app.getAppTitle(e?e.getDisplayText().trim():"")}},t.prototype.detach=function(){this.close()},t.prototype.close=function(){e.prototype.detach.call(this),this.workspace.iterateLeaves(this,(function(e){e.detach()}));var t=this,n=t.workspace,i=t.win,r=t.component,o=t.cleanup;activeWindow===i&&(activeWindow=window,activeDocument=document),o&&(o(),this.cleanup=null),r.unload(),i&&(i.close(),n.trigger("window-close",this,i),this.win=null)},t.prototype.removeChild=function(t){e.prototype.removeChild.call(this,t),0===this.children.length&&this.close()},t}(Ij),vG="workspace.json",yG="workspace-mobile.json",bG=function(){function e(e,t){this.workspace=e,this.vault=t,this.lastOpenFiles=[],t.on("create",this.onFileCreated,this),t.on("rename",this.onRename,this)}return e.prototype.load=function(e){this.lastOpenFiles=e},e.prototype.serialize=function(){return this.lastOpenFiles},e.prototype.collect=function(e){if(this.lastOpenFiles[0]!==e.path){for(var t={md:25,canvas:10,image:10,other:10},n=[e.path],i=0,r=this.lastOpenFiles;i<r.length;i++){var o=r[i];if(o!==e.path){var a=le(o),s="other";mM.contains(a)&&(s="md"),vM.contains(a)&&(s="canvas"),pM.contains(a)&&(s="image");var l=t[s];l<=0||(n.push(o),t[s]=l-1)}}this.lastOpenFiles=n}},e.prototype.onFileOpen=function(e,t){this.workspace.layoutReady&&t&&(this.collect(t),this.workspace.requestSaveLayout())},e.prototype.onFileCreated=function(e){this.workspace.layoutReady&&(this.collect(e),this.workspace.requestSaveLayout())},e.prototype.onRename=function(e,t){if(this.workspace.layoutReady){var n=e.path;this.lastOpenFiles=this.lastOpenFiles.map((function(e){return e===t?n:e})),this.workspace.requestSaveLayout()}},e.prototype.getLastOpenFiles=function(){return this.getRecentFiles({showMarkdown:!0,showCanvas:!0,showNonImageAttachments:!0,showImages:!0})},e.prototype.getRecentFiles=function(e){for(var t=Object.assign({showMarkdown:!0,showCanvas:!0,showNonImageAttachments:!1,showImages:!1,maxCount:10},e),n=[],i=0,r=this.lastOpenFiles;i<r.length;i++){var o=r[i],a=le(o);if("md"===a?t.showMarkdown&&n.push(o):"canvas"===a?t.showCanvas&&n.push(o):pM.contains(a)?t.showImages&&n.push(o):t.showNonImageAttachments&&n.push(o),n.length>=t.maxCount)break}return n},e}(),wG=function(e){function t(t,n){var i=e.call(this)||this;if(i.leftSplit=null,i.rightSplit=null,i.leftRibbon=null,i.rightRibbon=null,i.rootSplit=null,i.floatingSplit=null,i.activeLeaf=null,i.activeTabGroup=null,i.containerEl=null,i.layoutReady=!1,i.requestSaveLayout=rt(i.saveLayout.bind(i),1e3),i.requestResize=rt(i.onResize.bind(i),0),i.requestActiveLeafEvents=rt(i.activeLeafEvents.bind(i),0),i.requestUpdateLayout=function(e){var t=null,n=null,i=!1,r=function(){i=!1;var r=t,o=n;t=null,n=null,e.apply(r,o)};return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t=this,n=e,i||(i=!0,ot(r))}}(i.updateLayout),i.activeEditor=null,i.mobileFileInfos=[],i.backlinkInDocument=!1,i.lastTabGroupStacked=!1,i.protocolHandlers=new Map,i.onLayoutReadyCallbacks=[],i.undoHistory=[],i.lastActiveFile=null,i.layoutItemQueue=[],i.hoverLinkSources={},i.editorExtensions=[],i.app=t,i.containerEl=n,i.scope=new uw(t.scope,(function(){var e=i.activeLeaf;return e&&e.view&&e.view.scope?e.view.scope:null})),i.recentFileTracker=new bG(i,t.vault),i.app.scope.register([],"Escape",(function(){var e,t=null,n=activeDocument.activeElement;!(i.activeLeaf&&i.activeLeaf.view instanceof iK&&"source"===i.activeLeaf.view.currentMode.type&&i.activeLeaf.view.titleEl!==n&&i.activeLeaf.view.inlineTitleEl!==n)||("INPUT"===(e=n).nodeName||e.instanceOf(HTMLElement)&&"true"===e.contentEditable)||i.activeLeaf.view.editor.hasFocus()||i.activeLeaf.view.editor.focus(),i.activeLeaf&&i.activeLeaf.view.navigation||(i.activeLeaf&&i.iterateLeaves(i.activeLeaf.getContainer(),(function(e){e.view.navigation&&(!t||t.activeTime<e.activeTime)&&(t=e)})),t||i.iterateAllLeaves((function(e){e.view.navigation&&(!t||t.activeTime<e.activeTime)&&(t=e)})),i.setActiveLeaf(t,{focus:!0}))})),t.keymap.pushScope(i.scope),i.leftRibbon=new dG(i,"left"),i.rightRibbon=new dG(i,"right"),i.leftSidebarToggleButtonEl=createDiv("sidebar-toggle-button mod-left",(function(e){sS(e,(function(){return i.leftSplit.collapsed?rf.interface.sidebarExpand():rf.interface.sidebarCollapse()}),{placement:"right"}),e.createDiv("clickable-icon",(function(e){return gb(e,"sidebar-left")})),e.addEventListener("click",(function(){return i.leftSplit.toggle()}))})),i.rightSidebarToggleButtonEl=createDiv("sidebar-toggle-button mod-right",(function(e){sS(e,(function(){return i.rightSplit.collapsed?rf.interface.sidebarExpand():rf.interface.sidebarCollapse()}),{placement:"left"}),e.createDiv("clickable-icon",(function(e){return gb(e,"sidebar-right")})),e.addEventListener("click",(function(){return i.rightSplit.toggle()}))})),i.editorSuggest=new zj(t),window.addEventListener("resize",i.requestResize.bind(i)),window.addEventListener("popstate",(function(e){e.preventDefault()})),window.history.forward=function(){var e;return null===(e=i.activeLeaf)||void 0===e?void 0:e.history.forward()},window.history.back=function(){var e;return null===(e=i.activeLeaf)||void 0===e?void 0:e.history.back()},window.history.go=function(e){var t;return null===(t=i.activeLeaf)||void 0===t?void 0:t.history.go(e)},Lt.isDesktopApp&&(window.addEventListener("focus",(function(){activeWindow=window,activeDocument=document,i.rootSplit&&i.rootSplit.onFocus()})),window.addEventListener("fullscreenchange",(function(){return i.updateFrameless()}))),window.addEventListener("copy",(function(e){!e.defaultPrevented&&i.activeLeaf&&i.activeLeaf.view.handleCopy(e)})),window.addEventListener("paste",(function(e){!e.defaultPrevented&&i.activeLeaf&&i.activeLeaf.view.handlePaste(e)})),window.addEventListener("cut",(function(e){!e.defaultPrevented&&i.activeLeaf&&i.activeLeaf.view.handleCut(e)})),Lt.isIosApp){var r=function(e){if(0!==e.scrollTop)return e.scroll({top:0,left:0,behavior:"smooth"}),!0};window.addEventListener("statusTap",(function(){var e=document.querySelectorAll(".modal-container");e.length?_b(e[e.length-1],r):i.activeLeaf&&_b(i.activeLeaf.containerEl,r)}))}i.app.vault.on("rename",(function(e,t){var n;if(e instanceof Xy){var r=function(n){var i;(null===(i=n.state.state)||void 0===i?void 0:i.file)===t&&(n.title=e.basename,n.state.state.file=e.path)},o=function(e){for(var t=0,n=e.backHistory;t<n.length;t++){var i=n[t];r(i)}for(var o=0,a=e.forwardHistory;o<a.length;o++){i=a[o];r(i)}};i.iterateAllLeaves((function(e){o(e.history)}));for(var a=0,s=i.undoHistory;a<s.length;a++){var l=s[a];(null===(n=l.state.state)||void 0===n?void 0:n.file)===t&&(l.state.state.file=e.path),o(l.leafHistory)}}})),i.app.vault.on("config-changed",(function(){i.updateOptions()}));var o=function(e){for(var t=function(e){if(e.view){var t=e.getViewState();v(i,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.open(new wI(e))];case 1:return n.sent(),[4,e.setViewState(t)];case 2:return n.sent(),[2]}}))}))}},n=0,r=i.getLeavesOfType(e);n<r.length;n++){t(r[n])}};i.app.viewRegistry.on("view-registered",o),i.app.viewRegistry.on("view-unregistered",o),i.on("file-menu",(function(e,t,n,r){t instanceof Xy&&(e.addItem((function(e){return e.setSection("info").setTitle(rf.commands.copyUrl()).setIcon("lucide-link").onClick((function(){return i.app.copyObsidianUrl(t)}))})),e.addItem((function(e){return e.setSection("view").setTitle(Lt.isMobileApp?rf.plugins.openWithDefaultApp.actionOpenFileMobile():rf.plugins.openWithDefaultApp.actionOpenFile()).setIcon("lucide-arrow-up-right").onClick((function(){return i.app.openWithDefaultApp(t.path)}))}))),Lt.isDesktopApp&&(e.addItem((function(e){return e.setSection("view").setTitle(Lt.isMacOS?rf.plugins.openWithDefaultApp.actionShowInFolderMac():rf.plugins.openWithDefaultApp.actionShowInFolder()).setIcon("lucide-arrow-up-right").onClick((function(){return i.app.showInFolder(t.path)}))})),t instanceof Xy&&(r&&r.view instanceof EI&&r.view.file===t?e.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.moveToNewWindow()).setIcon("lucide-maximize").onClick((function(){return v(i,void 0,void 0,(function(){return y(this,(function(e){return this.moveLeafToPopout(r),[2]}))}))}))})):e.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewWindow()).setIcon("lucide-maximize").onClick((function(){return v(i,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,(r=this.app.workspace.openPopoutLeaf()).openFile(t)];case 1:return e.sent(),[2]}}))}))}))}))))})),i.on("quit",(function(e){i.iterateAllLeaves((function(t){var n=t.view;n&&n instanceof T_&&n.data!==n.lastSavedData&&e.addPromise(n.save())}))})),i.on("editor-menu",(function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=Gw(t.getLine(o.line));null!==a&&e.addItem((function(e){return e.setTitle(rf.interface.menu.renameHeading()).setIcon("lucide-edit-3").onClick((function(){var e=n.file;r===e&&Cf(o,t.getCursor())&&new FB(i.app,t,r,o,a).open()}))}))}})),i.on("editor-menu",(function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=t.getClickableTokenAt(o);a&&"blockid"===a.type&&e.addItem((function(e){return e.setTitle(rf.interface.menu.renameBlockid()).setIcon("lucide-edit-3").onClick((function(){r===n.file&&Cf(o,t.getCursor())&&new BB(i.app,t,r,o,a).open()}))}))}})),i.app.commands.addCommand({id:"editor:save-file",name:rf.commands.saveFile(),callback:function(){var e=i.app.workspace.getActiveViewOfType(T_);e&&e.save()},hotkeys:[KT(["Mod"],"S")]}),i.app.commands.addCommand({id:"editor:follow-link",name:rf.commands.followCursorLink(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,!1),!0)},hotkeys:[KT(["Alt"],"Enter")]}),i.app.commands.addCommand({id:"editor:open-link-in-new-leaf",name:rf.commands.openCursorLinkInNewTab(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"tab"),!0)},hotkeys:[KT(["Mod"],"Enter")]}),i.app.commands.addCommand({id:"editor:open-link-in-new-split",name:rf.commands.openCursorLinkToTheRight(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"split"),!0)},hotkeys:[KT(["Mod","Alt"],"Enter")]}),i.app.commands.addCommand({id:"editor:open-link-in-new-window",name:rf.commands.openCursorLinkInNewWindow(),icon:"lucide-link",editorCheckCallback:function(e,t,n){var i=t.getClickableTokenAt(t.getCursor());return!!i&&(e||n.editMode.triggerClickableToken(i,"window"),!0)},hotkeys:[KT(["Mod","Alt","Shift"],"Enter")]});var a=function(e,t){i.app.commands.addCommand({id:"editor:focus-"+e,name:t,checkCallback:function(t){var n=i.getAdjacentLeafInDirection(i.activeLeaf,e);return!!n&&(t||(wb(),i.setActiveLeaf(n,{focus:!0})),!0)}})};a("top",rf.commands.navigateTabAbove()),a("bottom",rf.commands.navigateTabBelow()),a("left",rf.commands.navigateTabLeft()),a("right",rf.commands.navigateTabRight()),i.app.commands.addCommand({id:"workspace:toggle-pin",name:rf.commands.togglePin(),icon:"lucide-pin",checkCallback:function(e){var t=i.activeLeaf;return!(!t||t.view instanceof wI)&&(e||t.togglePinned(),!0)}}),i.app.commands.addCommand({id:"workspace:split-vertical",name:rf.commands.splitRight(),icon:"lucide-separator-vertical",checkCallback:function(e){var t;return(null===(t=i.activeLeaf)||void 0===t?void 0:t.view)instanceof bI&&(e||i.duplicateLeaf(i.activeLeaf,"vertical"),!0)}}),i.app.commands.addCommand({id:"workspace:split-horizontal",name:rf.commands.splitDown(),icon:"lucide-separator-horizontal",checkCallback:function(e){var t;return(null===(t=i.activeLeaf)||void 0===t?void 0:t.view)instanceof bI&&(e||i.duplicateLeaf(i.activeLeaf,"horizontal"),!0)}}),i.app.commands.addCommand({id:"workspace:toggle-stacked-tabs",name:rf.commands.toggleStackedTabs(),icon:"lucide-layers",checkCallback:function(e){var t=i.activeLeaf.parent;if(t instanceof Fj){var n=t.getRoot();if(n!==i.leftSplit&&n!==i.rightSplit)return e||t.setStacked(!t.isStacked),!0}}}),i.app.commands.addCommand({id:"workspace:edit-file-title",name:rf.commands.editFileTitle(),icon:"lucide-edit-3",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.view instanceof SI)return e||t.setEphemeralState({rename:"all"}),!0},hotkeys:[KT([],"F2")]}),i.app.commands.addCommand({id:"workspace:copy-path",name:rf.commands.copyPath(),icon:"lucide-copy",checkCallback:function(e){var t=i.getActiveFile();if(t)return e||(at(t.path),new CI(rf.interface.copied({context:"generic"}))),!0}}),i.app.commands.addCommand({id:"workspace:copy-url",name:rf.commands.copyUrl(),icon:"lucide-copy",checkCallback:function(e){var t=i.getActiveFile();if(t)return e||i.app.copyObsidianUrl(t),!0}}),i.app.commands.addCommand({id:"workspace:undo-close-pane",name:rf.commands.undoCloseTab(),icon:"lucide-undo-2",checkCallback:function(e){var t=i.undoHistory;if(t.length>0){if(!e){var n=t.shift(),r=i.activeLeaf,o=i.rootSplit;if(n.rootId&&(o=[i.rootSplit,i.floatingSplit,i.leftSplit,i.rightSplit].find((function(e){return e.id===n.rootId}))),n.parentId){var a=null;i.iterateTabs([o],(function(e){e.id===n.parentId&&(a=e)})),a&&(r=i.createLeafInTabGroup(a))}r&&"empty"===r.view.getViewType()||(r=o===i.floatingSplit?i.openPopoutLeaf():i.splitActiveLeaf(),n.parentId&&(r.parent.id=n.parentId)),n.state.active=!0,n.leafHistory&&r.history.deserialize(n.leafHistory),r.setViewState(n.state,n.eState)}return!0}},hotkeys:[KT(["Mod","Shift"],"T")]}),Lt.isDesktopApp&&i.app.commands.addCommand({id:"workspace:export-pdf",name:rf.commands.exportPdf(),checkCallback:function(e){if(!Lt.isDesktopApp)return!1;var t=i.getActiveViewOfType(iK);return t?(e||t.printToPdf(),!0):void 0}}),i.app.commands.addCommand({id:"editor:rename-heading",name:rf.interface.menu.renameHeading(),icon:"lucide-edit-3",editorCheckCallback:function(e,t,n){var r=n.file;if(r){var o=t.getCursor(),a=Gw(t.getLine(o.line));return a?(e||new FB(i.app,t,r,o,a).open(),!0):void 0}}}),Lt.isDesktopApp&&(i.app.commands.addCommand({id:"workspace:open-in-new-window",name:rf.commands.openInNewWindow(),icon:"lucide-maximize",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.view instanceof bI)return e||i.app.workspace.openPopoutLeaf().setViewState(t.getViewState(),{focus:!0}),!0}}),i.app.commands.addCommand({id:"workspace:move-to-new-window",name:rf.commands.moveToNewWindow(),icon:"lucide-maximize",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.view instanceof bI)return e||i.app.workspace.moveLeafToPopout(t),!0}})),i.app.commands.addCommand({id:"workspace:next-tab",name:rf.commands.goToNextTab(),icon:"lucide-arrow-right",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof Fj){if(!e){var n=t.parent,r=n.currentTab+1;r>=n.children.length&&(r=0),n.selectTabIndex(r);var o=n.children[r];o instanceof Nj&&i.setActiveLeaf(o,{focus:!0})}return!0}},hotkeys:[KT(["Ctrl"],"Tab"),Lt.isMacOS?KT(["Meta","Shift"],"]"):KT(["Ctrl"],"PageDown")]});for(var s=function(e){l.app.commands.addCommand({id:"workspace:goto-tab-".concat(e),name:rf.commands.goToNthTab({n:e}),checkCallback:function(t){var n=i.activeLeaf;if(n&&n.parent instanceof Fj){var r=n.parent.children[e-1];if(r)return t||i.setActiveLeaf(r,{focus:!0}),!0}return!1},hotkeys:[KT(["Mod"],String(e))]})},l=this,c=0,u=[1,2,3,4,5,6,7,8];c<u.length;c++){s(u[c])}i.app.commands.addCommand({id:"workspace:goto-last-tab",name:rf.commands.goToLastTab(),checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof Fj){var n=t.parent,r=n.children.length-1,o=n.children[r];if(o)return e||i.setActiveLeaf(o,{focus:!0}),!0}return!1},hotkeys:[KT(["Mod"],"9")]}),i.app.commands.addCommand({id:"workspace:previous-tab",name:rf.commands.goToPrevTab(),icon:"lucide-arrow-left",checkCallback:function(e){var t=i.activeLeaf;if(t&&t.parent instanceof Fj){if(!e){var n=t.parent,r=n.currentTab-1;r<0&&(r=n.children.length-1),n.selectTabIndex(r);var o=n.children[r];o instanceof Nj&&i.setActiveLeaf(o,{focus:!0})}return!0}},hotkeys:[KT(["Ctrl","Shift"],"Tab"),Lt.isMacOS?KT(["Meta","Shift"],"["):KT(["Ctrl"],"PageUp")]}),i.app.commands.addCommand({id:"workspace:new-tab",name:rf.commands.newTab(),checkCallback:function(e){var t=i.getMostRecentLeaf();if(t&&t.parent instanceof Fj){if(!e){var n=t.parent,r=new Nj(i.app),o=n.children.length;n.insertChild(o,r),n.selectTabIndex(o),i.setActiveLeaf(r,{focus:!0})}return!0}},hotkeys:[KT(["Mod"],"T")]});var h=function(e,t){if(e.hasOwnProperty("x-success")){var n=e["x-success"],r={name:t.basename,url:i.app.getObsidianUrl(t)};Lt.isDesktopApp&&i.app.vault.adapter instanceof Wd&&(r.file=i.app.vault.adapter.getFilePath(t.path));try{if(n=H_.addQuery(n,r),"file"===new URL(n).protocol.toLowerCase())return!0;window.open(n)}catch(e){console.error(e)}return!0}return!1};if(i.registerObsidianProtocolHandler("open",(function(e){if(e.file){var t=Bx(e.file),n=t.path,r=t.subpath;n=he(n);var o=i.app.metadataCache.getFirstLinkpathDest(n,"");if(o){var a=i.getLeaf(),s={};r&&(s.subpath=r),a.openFile(o,{eState:s}),new CI(rf.interface.msgOpenFileThroughUri({path:o.path}))}else new CI(rf.interface.msgFileNotFoundThroughUri({name:e.file}))}})),i.registerObsidianProtocolHandler("search",(function(e){var t=i.app.internalPlugins.getPluginById("global-search");t&&t.instance.openGlobalSearch(e.query)})),i.registerObsidianProtocolHandler("new",(function(e){return v(i,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,p,d,f;return y(this,(function(g){switch(g.label){case 0:return t=null,n=this.app.fileManager,i=this.app.vault,r=e.append,o=e.overwrite,e.file?(a=e.file,/\.\.[\/\\]/.test(a)?[2]:((r||o)&&(t=this.app.metadataCache.getFirstLinkpathDest(a,"")),t?[3,7]:(s=re(a),d=void 0,""!==s?[3,1]:(d=i.getRoot(),[3,3])))):[3,8];case 1:return(d=i.getAbstractFileByPathInsensitive(s))?[3,3]:[4,i.createFolder(s)];case 2:g.sent(),d=i.getAbstractFileByPathInsensitive(s),g.label=3;case 3:if(!(d instanceof $y))return[2];g.label=4;case 4:return g.trys.push([4,6,,7]),[4,n.createNewFile(d,ie(a))];case 5:return t=g.sent(),[3,7];case 6:return l=g.sent(),new CI(l.toString()),[2];case 7:return[3,12];case 8:if(c=(c=e.name||"").replace(/[\/\\]/,""),(r||o)&&(t=this.app.metadataCache.getFirstLinkpathDest(c,"")),t)return[3,12];u="",(p=this.getActiveFile())&&(u=p.path),d=n.getNewFileParent(u,c),g.label=9;case 9:return g.trys.push([9,11,,12]),[4,n.createNewFile(d,c)];case 10:return t=g.sent(),[3,12];case 11:return f=g.sent(),new CI(f.toString()),[2];case 12:return t?e.content?r?[4,i.append(t,e.content)]:[3,14]:[3,16]:[3,19];case 13:return g.sent(),[3,16];case 14:return[4,i.modify(t,e.content)];case 15:g.sent(),g.label=16;case 16:return e.silent?[3,18]:[4,this.getLeaf().openFile(t,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 17:g.sent(),g.label=18;case 18:h(e,t),g.label=19;case 19:return[2]}}))}))})),i.registerObsidianProtocolHandler("show-plugin",(function(e){var t=i.app;if(!t.plugins.isEnabled()){var n=t.setting;return n.open(),void n.openTabById("community-plugins")}e.id&&new Zj(t).setAutoOpen(e.id).setDimBackground(!0).open()})),i.registerObsidianProtocolHandler("show-theme",(function(e){e.name&&new hG(i.app,!1).setAutoOpen(e.name).setDimBackground(!0).open()})),i.registerObsidianProtocolHandler("show-release-notes",(function(e){e.version&&i.app.showReleaseNotes(e.version)})),i.registerObsidianProtocolHandler("debug-info",(function(e){new Uj(t).open()})),i.registerObsidianProtocolHandler("publish-sites",(function(){return v(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=this.app.internalPlugins.getPluginById("publish")).enabled||e.enable(!1),[4,e.instance.viewSites()];case 1:return t.sent(),[2]}}))}))})),i.registerObsidianProtocolHandler("sync-setup",(function(e){i.onLayoutReady((function(){var t=i.app.internalPlugins.getPluginById("sync");t.enabled||t.enable(!1),i.app.setting.open(),i.app.setting.openTabById("sync");var n=t.instance;e.vault?n.openChooseRemoteVaultModal(JSON.parse(e.vault)):n.openChooseRemoteVaultModal()}))})),i.registerObsidianProtocolHandler("hook-get-address",(function(e){var t=i.getActiveFile();if(t){if(!h(e,t)){var n=i.app.getObsidianUrl(t);at("[".concat(t.basename,"](").concat(n,")"))}}else e.hasOwnProperty("x-error")&&window.open(H_.addQuery(e["x-error"],{errorCode:"NotFound",errorMessage:"No file is open at the moment"}))})),SD){var p=0;DD.addListener("backButton",(function(){var e;if(Jy.length>0)Jy.last().close();else{var t=i.leftSplit;if(t instanceof Rj&&t.isFullscreen)t.toggleTabFullscreen();else{var n=i.rightSplit;if(n instanceof Rj&&n.isFullscreen)n.toggleTabFullscreen();else if(t.collapsed||t instanceof Rj&&t.isPinned)if(n.collapsed||n instanceof Rj&&n.isPinned){var r=null===(e=i.activeLeaf)||void 0===e?void 0:e.history;if(r&&r.backHistory.length>0)r.back();else{var o=Date.now();o-p<5e3?DD.exitApp():(p=o,new CI(rf.interface.mobile.msgBackAgainToExit(),5e3))}}else n.collapse();else t.collapse()}}}))}Qy(i.containerEl,(function(e){i.trigger("swipe",e)})),i.on("swipe",(function(e){if(!(e.points>1||"y"!==e.direction||e.y<e.startY)&&i.rootSplit.containerEl.contains(e.targetEl)){var t=i.app.vault.getConfig("mobilePullAction"),n=i.app.commands.findCommand(t),r=n?n.name:"Configure pull action",o=document.body.createDiv({cls:"pull-action pull-down-action",text:r});o.onClickEvent((function(){o.detach()}));var a=o.offsetHeight,s=!1;e.registerCallback({move:function(t,n){var i=(n-e.startY)/a;i=Math.clamp(i,0,1),o.toggleClass("mod-activated",1===i),o.style.transform="translateY(".concat((i-1)*a,"px)"),1!==i||s||navigator.vibrate(100),s=1===i},cancel:function(){o.detach()},finish:function(t,i,r){var s=(i-e.startY)/a;s=Math.clamp(s,0,1),Ie(o,new Te({duration:200*s}).addProp("transform",null,"translateY(".concat(-a,"px)"),""),(function(){o.detach()})),r>Math.min(100,a)&&(n?rj(n):new CI("Action not configured"))}})}})),i.on("swipe",(function(e){if(!(e.points<2||"x"!==e.direction)&&i.rootSplit.containerEl.contains(e.targetEl)){var t,n=e.x>e.startX;if(t=n?i.app.commands.findCommand("app:go-back"):i.app.commands.findCommand("app:go-forward")){var r=document.body.createDiv({cls:"pull-action pull-out-action",text:t.name});r.onClickEvent((function(){r.detach()})),n?r.style.left="0":r.style.right="0";var o=n?1:-1,a=r.offsetWidth,s=!1;e.registerCallback({move:function(t){var n=Math.clamp((t-e.startX)*o/a,0,1);r.toggleClass("mod-activated",1===n),r.style.transform="translateX(".concat(-(1-n)*a*o,"px)"),1!==n||s||navigator.vibrate(100),s=1===n},cancel:function(){r.detach()},finish:function(t,s,l){var c=Math.clamp((t-e.startX)*o/a,0,1);Ie(r,new Te({duration:200*c}).addProp("transform",null,"translateX(".concat(-a*o,"px)"),""),(function(){r.detach()})),l*o/a>.5&&(n?i.app.commands.executeCommandById("app:go-back"):i.app.commands.executeCommandById("app:go-forward"))}})}}})),Lt.isIosApp&&i.on("css-change",(function(){return v(i,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return(e=jI("--background-primary"))&&0!==e.a||(e=RI(getComputedStyle(document.body).backgroundColor)),e?[4,DD.setBackgroundColor({r:e.r/255,g:e.g/255,b:e.b/255})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})),i.registerHoverLinkSource("search",{display:rf.plugins.pagePreview.labelSourceSearch(),defaultMod:!0}),i.registerHoverLinkSource("preview",{display:rf.plugins.pagePreview.labelSourcePreview(),defaultMod:!1}),i.registerHoverLinkSource("editor",{display:rf.plugins.pagePreview.labelSourceEditor(),defaultMod:!0});var d=CodeMirror.getMode;return CodeMirror.getMode=function(e,t){var n=d.call(CodeMirror,e,t);return!t||n&&"null"!==n.name||(CodeMirror.getMode=d,$D.then((function(){for(var e=0,t=i.getLeavesOfType(iK.VIEW_TYPE);e<t.length;e++){var n=t[e];if(n.view instanceof iK)if(n.view.editMode){var r=n.view.editMode.editor;r.replaceRange(" ",{line:0,ch:0}),r.replaceRange("",{line:0,ch:0},{line:0,ch:1})}else{var o=n.view.sourceMode.cmEditor;o.setOption("mode",o.getOption("mode"))}}}))),n},i}return f(t,e),t.prototype.loadLayout=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:e=this.app.vault,t={},y.label=1;case 1:return y.trys.push([1,3,,8]),n=Lt.isMobile?yG:vG,r=(i=JSON).parse,[4,e.adapter.read(e.configDir+"/"+n)];case 2:return t=r.apply(i,[y.sent()]),[3,8];case 3:y.sent(),y.label=4;case 4:return y.trys.push([4,6,,7]),a=(o=JSON).parse,[4,e.adapter.read(e.configDir+"/workspace")];case 5:return t=a.apply(o,[y.sent()]),[3,7];case 6:return y.sent(),[3,7];case 7:return[3,8];case 8:return t.hasOwnProperty("lastOpenFiles")&&this.recentFileTracker.load(t.lastOpenFiles),[4,this.setLayout(t)];case 9:for(y.sent(),this.trigger("layout-ready"),s=this.onLayoutReadyCallbacks,this.onLayoutReadyCallbacks=null,l=0,c=s;l<c.length;l++){u=c[l],h=u.pluginId,p=u.callback;try{p()}catch(e){console.error(e),h&&new CI("Failed to load plugin ".concat(h))}}if(!Lt.isDesktopApp||"Obsidian Sandbox"!==this.app.vault.getName())return[3,11];if(!((d=this.app.vault.adapter)instanceof Wd)||electron.ipcRenderer.sendSync("get-sandbox-vault-path")!==d.getBasePath())return[2];if(new CI(rf.interface.msgSandboxVault(),0),!(f=this.app.metadataCache.getFirstLinkpathDest("Start Here",""))||"md"!==f.extension)return[2];for(g=[],this.iterateLeaves([this.rootSplit,this.floatingSplit],(function(e){g.push(e)})),m=0,v=g;m<v.length;m++)v[m].detach();return this.updateLayout(),[4,this.getUnpinnedLeaf().openFile(f,{active:!0,state:{mode:"source",source:!1}})];case 10:y.sent(),y.label=11;case 11:return[2]}}))}))},t.prototype.clearLayout=function(){return v(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:return this.layoutReady=!1,e=[],this.iterateAllLeaves((function(t){e.push(t.open(null))})),[4,Promise.all(e)];case 1:for(r.sent(),this.leftSplit.containerEl.detach(),this.rootSplit.containerEl.detach(),this.rightSplit.containerEl.detach(),this.floatingSplit.containerEl.detach(),this.rootSplit.component.unload(),this.leftSplit.component.unload(),this.rightSplit.component.unload(),this.floatingSplit.component.unload(),t=0,n=this.floatingSplit.children.slice();t<n.length;t++)(i=n[t])instanceof mG&&i.close();return this.rootSplit=null,this.leftSplit=null,this.rightSplit=null,this.floatingSplit=null,this.activeLeaf=null,this.layoutItemQueue=[],[2]}}))}))},t.prototype.setLayout=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x;return y(this,(function(y){switch(y.label){case 0:return this.layoutReady=!1,t=this.app.vault,n=Lt.isMobile,(s=e.main)?(l=this,[4,this.deserializeLayout(s,"root")]):[3,2];case 1:(i=l.rootSplit=y.sent())&&"vertical"!==i.direction&&(i.setDirection("vertical"),i.recomputeChildrenDimensions()),y.label=2;case 2:return(c=e.left)?(u=this,[4,this.deserializeLayout(c,"left")]):[3,4];case 3:(r=u.leftSplit=y.sent())&&r instanceof Pj&&"horizontal"!==r.direction&&(r.setDirection("horizontal"),r.recomputeChildrenDimensions()),y.label=4;case 4:return(h=e.right)?(p=this,[4,this.deserializeLayout(h,"right")]):[3,6];case 5:(o=p.rightSplit=y.sent())&&o instanceof Pj&&"horizontal"!==o.direction&&(o.setDirection("horizontal"),o.recomputeChildrenDimensions()),y.label=6;case 6:return(d=e.floating)?(f=this,[4,this.deserializeLayout(d,null)]):[3,8];case 7:a=f.floatingSplit=y.sent(),y.label=8;case 8:return(g=e["left-ribbon"])&&this.leftRibbon.load(g),i?[3,11]:(i=this.rootSplit=new fG(this,"vertical"),m=new Fj(this),v=new Nj(this.app),m.insertChild(0,v),i.insertChild(0,m),(b=this.getLastOpenFiles()).length>0?(w=b[0],(k=t.getAbstractFileByPath(w))&&k instanceof Xy?[4,v.openFile(k)]:[3,10]):[3,10]);case 9:y.sent(),y.label=10;case 10:this.setActiveLeaf(v),y.label=11;case 11:return i.containerEl.addClass("mod-root"),r||(n?(r=this.leftSplit=new Hj(this)).collapse():r=this.leftSplit=new Pj(this,"horizontal","left")),o||(o=this.rightSplit=n?new Vj(this):new Pj(this,"horizontal","right")).collapse(),a||(a=this.floatingSplit=new gG(this)),C=this.containerEl,Lt.isMobile?C.setChildrenInPlace([r.containerEl,i.containerEl,o.containerEl]):C.setChildrenInPlace([this.leftRibbon.containerEl,r.containerEl,i.containerEl,o.containerEl,this.rightRibbon.containerEl]),E=e.active,(x=this.getLeafById(E))&&this.setActiveLeaf(x,{focus:!0}),this.layoutReady=!0,this.onLayoutChange(),this.requestActiveLeafEvents(),[2]}}))}))},t.prototype.onLayoutReady=function(e){null===this.onLayoutReadyCallbacks?e():this.onLayoutReadyCallbacks.push({pluginId:this.app.plugins.loadingPluginId,callback:e})},t.prototype.changeLayout=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.layoutReady?[4,this.clearLayout()]:[2];case 1:return t.sent(),[4,this.setLayout(e)];case 2:return t.sent(),[2]}}))}))},t.prototype.deserializeLayout=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o,a,s,l,c,u,h,p,d=this;return y(this,(function(f){switch(f.label){case 0:if(n=function(t){return v(d,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<e.children.length?[4,this.deserializeLayout(e.children[n],null)]:[3,4];case 2:(i=o.sent())?("leaf"!==i.type||"tabs"===t.type||t instanceof Rj||((r=new Fj(this)).insertChild(0,i),i=r),t.insertChild(n,i)):(e.children.splice(n,1),n--),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},"split"!==e.type)return[3,2];if(i=void 0,"root"===t)i=new fG(this,e.direction,e.id);else if(t){if(Lt.isMobile)return[2,null];r=i=new Pj(this,e.direction,t,e.id),e.width&&r.setSize(e.width),e.collapsed&&r.collapse()}else i=new Lj(this,e.direction,e.id);return[4,n(i)];case 1:if(f.sent(),0===i.children.length&&!(i instanceof Pj))return[2,null];for(s=0;s<e.children.length;s++)l=e.children[s].dimension,i.children[s].setDimension(l);return i.recomputeChildrenDimensions(),[2,i];case 2:if("floating"!==e.type)return[3,4];for(o=new gG(this,e.id),s=0;s<e.children.length;s++)"window"!==e.children[s].type&&(e.children.splice(s,1),s--);return[4,n(o)];case 3:return f.sent(),[2,o];case 4:return"window"===e.type&&Lt.isDesktopApp&&qt>=13?(a=new mG(this,e.id,e),[4,n(a)]):[3,6];case 5:if(f.sent(),0===a.children.length)return[2,null];for(s=0;s<e.children.length;s++)l=e.children[s].dimension,a.children[s].setDimension(l);return a.recomputeChildrenDimensions(),[2,a];case 6:return"tabs"!==e.type?[3,8]:(c=new Fj(this,e.id),e.stacked&&c.setStacked(!0),[4,n(c)]);case 7:return f.sent(),0===c.children.length?[2,null]:(e.currentTab&&c.selectTabIndex(e.currentTab),c.recomputeChildrenDimensions(),[2,c]);case 8:return"leaf"!==e.type?[3,10]:(u=new Nj(this.app,e.id),h=e.state||{},[4,u.setViewState(h)]);case 9:return f.sent(),u.view?(e.group&&u.setGroup(e.group),e.pinned&&u.togglePinned(),[2,u]):(u.detach(),[2,null]);case 10:return"mobile-drawer"!==e.type?[3,12]:Lt.isMobile?(p=void 0,"left"===t?p=new Hj(this,e.id):"right"===t&&(p=new Vj(this,e.id)),[4,n(p)]):[2,null];case 11:return f.sent(),p.currentTab=e.currentTab,p.recomputeChildrenDimensions(),e.pinned&&p.setPinned(!0),[2,p];case 12:return[2,null]}}))}))},t.prototype.getLayout=function(){var e={};e.main=this.rootSplit.serialize(),e.left=this.leftSplit.serialize(),e.right=this.rightSplit.serialize(),e["left-ribbon"]=this.leftRibbon.serialize(),this.floatingSplit.children.length&&(e.floating=this.floatingSplit.serialize());var t=this.activeLeaf;return t&&(e.active=t.id),e},t.prototype.saveLayout=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:if(!this.layoutReady)return[2];e=this.app.vault,(t=this.getLayout()).lastOpenFiles=this.recentFileTracker.serialize(),i.label=1;case 1:return i.trys.push([1,3,,4]),n=Lt.isMobile?yG:vG,[4,e.adapter.write(e.configDir+"/"+n,JSON.stringify(t,null,2))];case 2:return i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.onDragLeaf=function(e,t){var n=this;if(Lt.isPhone)e.preventDefault();else{var i=function(e){0===e.touches.length&&v()};Lt.isMobile&&window.addEventListener("touchend",i),Lt.isIosApp&&(vt(),navigator.vibrate(200)),e.dataTransfer.setData("text/plain","");var r=createDiv("drag-ghost mod-leaf",(function(e){e.createDiv("drag-ghost-icon",(function(e){gb(e,t.getIcon())})),e.createSpan({text:Id(t.getDisplayText(),60)})}));Lt.isMobile?hS(e):(e.doc.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0),setTimeout((function(){return r.detach()})));var o=this.app.dragManager,a=null,s=createDiv("workspace-fake-target-overlay"),l=e.clientX,c=e.clientY,u=!1,h=null,p=function(e,t){return e instanceof Pj?["left","right","top","bottom"]:t?["left","right"]:null},d=function(){h&&(h.style.opacity=null),o.hideOverlay(),s.hide()},f=function(e){e.preventDefault(),e.dataTransfer.dropEffect="none";var i=e.clientX,f=e.clientY;if(!u){var g=i-l,m=f-c;if(g*g+m*m<25)return;u=!0,document.body.addClass("is-grabbing")}var v=e.doc,y=n.getDropLocation(e);if(y&&y!==t){if(Lt.isMobile){r.style.left=i-r.offsetWidth/2+"px",r.style.top=f-r.offsetHeight-20+"px";var b=e.doc;r.parentNode!==b.body&&b.body.appendChild(r),r.show()}var w=y.getRoot(),k=w===n.leftSplit||w===n.rightSplit;if(t.view instanceof bI||w===n.leftSplit||w===n.rightSplit){var C=y.containerEl.getBoundingClientRect(),E=C.width,x=C.height,S=C.x,M=C.y,T=n.getDropDirection(e,C,p(y,k),y);if(y instanceof Fj||y!==t.parent||"center"!==T&&1!==t.parent.children.length)if(e.dataTransfer.dropEffect="move",y===n.leftSplit&&n.leftSplit.collapsed?C=n.leftSidebarToggleButtonEl.getBoundingClientRect():y===n.rightSplit&&n.rightSplit.collapsed?C=n.rightSidebarToggleButtonEl.getBoundingClientRect():y instanceof Fj&&"center"===T&&(C=y.getTabInsertLocation(i).rect),y instanceof Aj&&1===y.children.length&&y.children[0]===t)d();else{if(o.showOverlay(v,C),"center"===T)return h&&(h.style.opacity=null),void s.hide();var D,A,L,P;if("top"===T?(D=C.x,A=M+C.height,P=E,L=x-C.height):"left"===T?(D=S+C.width,A=C.y,P=E-C.width,L=x):"right"===T?(D=S,A=M,P=E-C.width,L=x):"bottom"===T&&(D=S,A=M,P=E,L=x-C.height),!a||!h||y.containerEl!==h){h&&(h.style.opacity=null),s.empty(),s.appendChild(y.containerEl.cloneNode(!0)),y.containerEl.style.opacity="0",h=y.containerEl;for(var I=s,O=y.containerEl.parentElement,F=O.doc.body;O&&O!==F;){var B=createDiv(O.className);B.appendChild(I),I=B,O=O.parentElement}a&&a.detach(),a=I}y.containerEl.style.opacity="center"===T?null:"0",a.parentNode!==v.body&&(a.addClass("workspace-fake-target-container"),v.body.appendChild(a)),s.toggle("center"!==T),s.toggleClass("is-in-sidebar",w!==n.rootSplit),s.style.transform="translate(".concat(D,"px, ").concat(A,"px)"),s.style.width="".concat(P,"px"),s.style.height="".concat(L,"px")}else d()}else d()}else d()},g=!1,m=function(e){if(g=!1,v(),u){var i=n.getDropLocation(e);if(i&&i!==t){var r=i.getRoot(),o=r===n.leftSplit||r===n.rightSplit,a=t.parent;if(i instanceof Aj&&(i===n.leftSplit||i===n.rightSplit)){if(a.removeChild(t),t.setDimension(null),Lt.isMobile)i.insertChild(-1,t);else{var s=i.children.first(),l=void 0;s instanceof Fj?l=s:(l=new Fj(n),i.insertChild(-1,l)),l.insertChild(-1,t)}n.requestResize()}else if(t.view instanceof bI||r===n.leftSplit||r===n.rightSplit){var c=i.containerEl.getBoundingClientRect(),h=n.getDropDirection(e,c,p(i,o),i);if(i instanceof Fj||i!==t.parent||"center"!==h&&1!==t.parent.children.length){if(o&&t.setGroupMember(null),i instanceof Fj&&"center"===h){var d=i.getTabInsertLocation(e.clientX).index;if(a===i){var f=i.children.indexOf(t);if(d>f&&d--,f===d)return}return a.removeChild(t),t.setDimension(null),i.insertChild(d,t),i.selectTabIndex(i.children.indexOf(t)),void n.requestResize()}if(!(i instanceof Aj&&1===i.children.length&&i.children[0]===t)){var m=i.parent;if(m&&m instanceof Lj){var y="top"===h||"bottom"===h?"horizontal":"vertical";if(o){l=new Fj(n);n.splitLeaf(i,l,y,"left"===h||"top"===h),a.removeChild(t),t.setDimension(null),l.insertChild(0,t)}else if("center"===h){var b=a.children.indexOf(t),w=m.children.indexOf(i),k=t.dimension,C=i.dimension,E=new Nj(n.app);m.replaceChild(w,E),a.replaceChild(b,i),m.replaceChild(w,t),t.setDimension(C),i.setDimension(k),i instanceof Nj&&i.view instanceof wI&&i.detach()}else a.removeChild(t),t.setDimension(null),n.splitLeaf(i,t,y,"left"===h||"top"===h);n.requestResize()}else;}}}}}},v=function(){if(window.removeEventListener("touchend",i),window.removeEventListener("dragover",f),window.removeEventListener("dragenter",y),window.removeEventListener("dragleave",b),window.removeEventListener("dragend",v,{capture:!0}),window.removeEventListener("drop",m),h&&(h.style.opacity=null),o.removeOverlay(),r.detach(),null==a||a.detach(),s.detach(),document.body.removeClass("is-grabbing"),Lt.isMobile&&(u||e.target.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,screenX:e.screenX,screenY:e.screenY,bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}))),Lt.isDesktopApp&&e&&g&&t.view instanceof bI){var l=t.containerEl.getBoundingClientRect(),c=t.containerEl.win.electron.webFrame.getZoomLevel();g=!1,t.parent&&t.parent.removeChild(t),t.setDimension(null),n.openPopout({x:e.screenX,y:e.screenY,size:l,zoom:c}).insertChild(0,Fj.createFrom(n,t)),n.setActiveLeaf(t,{focus:!0})}},y=function(e){e.target&&(g=!1),f(e)},b=function(e){e.relatedTarget||0===e.buttons||(d(),e.win.setTimeout((function(){g=!0}),10))};window.addEventListener("dragover",f),window.addEventListener("dragenter",y),window.addEventListener("dragleave",b),window.addEventListener("dragend",v,{capture:!0}),window.addEventListener("drop",m)}},t.prototype.onStartLink=function(e){var t=this,n=this.app.dragManager,i=function(i){i.preventDefault();var r=t.getDropLocation(i);if(r&&r!==e)if(r instanceof Fj&&(r=r.children[r.currentTab]),r instanceof Nj)if(r.view instanceof bI){var o=r.containerEl.getBoundingClientRect();n.showOverlay(i.doc,o)}else n.hideOverlay();else n.hideOverlay();else n.hideOverlay()},r=function(o){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r),n.removeOverlay();var a=t.getDropLocation(o);a&&a!==e&&(a instanceof Fj&&(a=a.children[a.currentTab]),a instanceof Nj&&a.view instanceof bI&&e.setGroupMember(a))};window.addEventListener("mousemove",i),window.addEventListener("mouseup",r)},t.prototype.getDropLocation=function(e){var t=e.win;if(t!==window)for(var n=0,i=this.floatingSplit.children;n<i.length;n++){var r=i[n];if(r instanceof mG&&r.win===t)return this.recursiveGetTarget(e,r)}var o=this,a=o.leftRibbon,s=o.rightRibbon,l=o.leftSidebarToggleButtonEl,c=o.rightSidebarToggleButtonEl,u=o.leftSplit,h=o.rightSplit,p=o.rootSplit;return Sb(e,a.containerEl)||Sb(e,l)?u:Sb(e,s.containerEl)||Sb(e,c)?h:Sb(e,u.containerEl)?0===u.children.length?u:this.recursiveGetTarget(e,u):Sb(e,h.containerEl)?0===h.children.length?h:this.recursiveGetTarget(e,h):Sb(e,p.containerEl)?this.recursiveGetTarget(e,p):null},t.prototype.recursiveGetTarget=function(e,t){for(var n=0,i=t.children;n<i.length;n++){var r=i[n];if(Sb(e,r.containerEl))return r instanceof Fj?r:r instanceof Aj?this.recursiveGetTarget(e,r):r}return null},t.prototype.getDropDirection=function(e,t,n,i){var r=e.clientX,o=e.clientY,a=Math.abs(r-t.x)/t.width,s=Math.abs(o-t.y)/t.height,l=Math.abs(r-(t.x+t.width))/t.width,c=Math.abs(o-(t.y+t.height))/t.height;n=n||[],i instanceof Fj&&i.isStacked&&!Sb(e,i.tabHeaderContainerEl)&&n.push("left","right");var u="center",h=1;if(s<.33&&s<h&&!n.contains("top"))if(h=s,i instanceof Fj){!i.isStacked&&Sb(e,i.tabHeaderContainerEl)&&(h=0);var p=i.tabHeaderContainerEl.getBoundingClientRect();o-t.y<=p.height/3?u="top":(u="center",i.isStacked&&(h=1))}else u="top";a<.33&&a<h&&!n.contains("left")&&(h=a,u="left"),l<.33&&l<h&&!n.contains("right")&&(h=l,u="right"),c<.33&&c<h&&!n.contains("bottom")&&(h=c,u="bottom");var d=["left","right"].contains(u)?t.width:t.height;switch(d=Math.max(d/3,40),u){case"center":break;case"left":t.width=d;break;case"top":t.height=d;break;case"right":t.x+=t.width-d,t.width=d;break;case"bottom":t.y+=t.height-d,t.height=d}return u},t.prototype.createLeafInParent=function(e,t){var n=new Nj(this.app);return e.children.length>0&&n.setDimension(100/e.children.length),e.insertChild(t,n),n},t.prototype.splitLeaf=function(e,t,n,i){var r,o;void 0===n&&(n="vertical");for(var a=e;a;){if(a instanceof Lj){o=(r=a).children.indexOf(e);break}e=a,a=a.parent}t instanceof Fj||(t=Fj.createFrom(this,t));var s=e.dimension;if(n!==r.direction){e.setDimension(null);var l=new Lj(this,n);r.replaceChild(o,l),l.setDimension(s),i?(l.insertChild(0,t),l.insertChild(1,e)):(l.insertChild(0,e),l.insertChild(1,t))}else null!==s&&(e.setDimension(s/2),t.setDimension(s/2)),i?r.insertChild(o,t):r.insertChild(o+1,t)},t.prototype.createLeafBySplit=function(e,t,n){var i=new Nj(this.app);return this.splitLeaf(e,i,t,n),i},t.prototype.splitActiveLeaf=function(e){var t=this.getMostRecentLeaf();return t?this.createLeafBySplit(t,e):this.createLeafInParent(this.rootSplit,0)},t.prototype.splitLeafOrActive=function(e,t){return e?this.createLeafBySplit(e,t):this.splitActiveLeaf(t)},t.prototype.duplicateLeaf=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return e?("horizontal"!==t&&"vertical"!==t||(n=t,t="split"),i=e.getViewState(),r=e.getEphemeralState(),o=e.history.serialize(),[4,(a="split"===t?this.createLeafBySplit(e,n):this.getLeaf(t)).setViewState(i,g(g({},r),{focus:!0}))]):[2];case 1:return s.sent(),a.history.deserialize(o),[2,a]}}))}))},t.prototype.getUnpinnedLeaf=function(){var e,t,n=this.activeLeaf;if(n&&n.canNavigate())return n;var i=null!==(e=null==n?void 0:n.getContainer())&&void 0!==e?e:this.rootSplit,r=null;if(this.iterateLeaves(i,(function(e){if(e.canNavigate()){var t=e.parent;t&&(t.children[t.currentTab]===e||t instanceof Fj&&t.isStacked)&&(!r||r.activeTime<e.activeTime)&&(r=e)}})),!r){var o=this.getMostRecentLeaf(i),a=null!==(t=null==o?void 0:o.parent)&&void 0!==t?t:i;r=new Nj(this.app),a.insertChild(-1,r)}return r},t.prototype.getLeaf=function(e,t){return"split"===e?this.splitActiveLeaf(t):"tab"===e||!0===e?this.createLeafInTabGroup():"window"===e?this.openPopoutLeaf():this.getUnpinnedLeaf()},t.prototype.createLeafInTabGroup=function(e){e||(e=this.getMostRecentLeaf().parent);for(var t=e.children.length-1,n=e.children[t],i=0;i<e.children.length;i++){var r=e.children[i];r.activeTime>n.activeTime&&(n=r,t=i)}var o=new Nj(this.app);return e.insertChild(t+1,o),o},t.prototype.moveLeafToPopout=function(e,t){var n;if(e.view instanceof bI){null!=t||(t={}),t.size||(t.size=e.containerEl.getBoundingClientRect()),t.zoom||(t.zoom=e.containerEl.win.electron.webFrame.getZoomLevel());var i=this.app.workspace.openPopout(t);return null===(n=e.parent)||void 0===n||n.removeChild(e),e.setDimension(null),i.insertChild(0,Fj.createFrom(this,e)),i}},t.prototype.openPopout=function(e){var t;if(!Lt.isDesktopApp)throw new CI(t="This feature only works in Obsidian's desktop app."),new Error(t);if(qt<13)throw new CI(t="You must update Obsidian's installer to use this feature."),new Error(t);var n=new mG(this,null,e);return this.floatingSplit.insertChild(-1,n),n},t.prototype.openPopoutLeaf=function(e){var t=this.openPopout(e),n=new Nj(this.app);return t.insertChild(0,Fj.createFrom(this,n)),n},t.prototype.openLinkText=function(e,t,n,i){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return[4,this.getLeaf(n).openLinkText(e,t,i)];case 1:return r.sent(),[2]}}))}))},t.prototype.setActiveLeaf=function(e,t,n){var i;t&&"boolean"!=typeof t&&(n=t.focus);var r=this.activeLeaf;if(this.isAttached(e))if(this.activeEditor=(null==e?void 0:e.view)instanceof iK?e.view:null,r!==e){if(r&&(r.containerEl.removeClass("mod-active"),r.tabHeaderEl.removeClass("mod-active")),this.activeTabGroup&&this.activeTabGroup.containerEl.removeClass("mod-active"),this.activeLeaf=e,this.activeTabGroup=null==e?void 0:e.parent,e){e.activeTime=Date.now(),e.containerEl.addClass("mod-active"),e.tabHeaderEl.addClass("mod-active"),null===(i=this.activeTabGroup)||void 0===i||i.containerEl.addClass("mod-active");var o=e.parent;if(o instanceof Fj){var a=o.children.indexOf(e);o.currentTab!==a&&(o.selectTabIndex(a),o.updateTabDisplay())}var s=e.getContainer();s instanceof mG?s.updateTitle():this.updateTitle(),n&&(Lt.isDesktopApp&&s.focus(),e.setEphemeralState({focus:!0})),this.updateMobileVisibleTabGroup(),this.requestActiveLeafEvents()}}else n&&e&&e.setEphemeralState({focus:!0})},t.prototype.activeLeafEvents=function(){if(this.layoutReady){var e=this.activeLeaf;this.trigger("active-leaf-change",e);var t=this.lastActiveFile,n=this.getActiveFile();t!==n&&(this.recentFileTracker.onFileOpen(n,t),this.lastActiveFile=n,this.trigger("file-open",n))}},t.prototype.getLeafById=function(e){var t=null;return this.iterateAllLeaves((function(n){if(n.id===e)return t=n,!0})),t},t.prototype.getGroupLeaves=function(e){var t=[];return e?(this.iterateAllLeaves((function(n){n.group===e&&t.push(n)})),t):t},t.prototype.getFocusedContainer=function(){if(activeWindow===window)return this.rootSplit;for(var e=0,t=this.floatingSplit.children;e<t.length;e++){var n=t[e];if(n instanceof mG&&n.win===activeWindow)return n}return this.rootSplit},t.prototype.isAttached=function(e){if(!e)return!1;var t=e.getRoot();return[this.leftSplit,this.rootSplit,this.floatingSplit,this.rightSplit].includes(t)},t.prototype.getMostRecentLeaf=function(e){var t=null;return this.iterateLeaves(null!=e?e:[this.rootSplit,this.floatingSplit],(function(e){(!t||t.activeTime<e.activeTime)&&(t=e)})),t},t.prototype.getLeftLeaf=function(e){return this.getSideLeaf(this.leftSplit,e)},t.prototype.getRightLeaf=function(e){return this.getSideLeaf(this.rightSplit,e)},t.prototype.ensureSideLeaf=function(e,t,n){var i,r=n.active,o=n.split,a=n.reveal,s=void 0===a||a,l=n.state,c=this.getLeavesOfType(e);0===c.length?(i="left"===t?this.getLeftLeaf(o):this.getRightLeaf(o),s&&this.revealLeaf(i),i.setViewState({type:e,state:l})):(i=c[0],s&&this.revealLeaf(i),l&&i.setViewState({type:e,state:l})),r&&this.setActiveLeaf(i,{focus:!0})},t.prototype.getActiveLeafOfViewType=function(e){return this.getActiveViewOfType(e)},t.prototype.getActiveViewOfType=function(e){var t=this.activeLeaf;if(!t)return null;var n=t.view;return n instanceof e?n:null},t.prototype.getActiveFileView=function(){var e=this.activeLeaf;if(e&&e.view.navigation)return e.view instanceof EI?e.view:null;e=null;var t=null;return this.iterateAllLeaves((function(n){n.view.navigation&&(!e||e.activeTime<n.activeTime)&&(e=n,t=n.view instanceof EI?n.view:null)})),t},t.prototype.getActiveFile=function(){var e;return(null===(e=this.getActiveFileView())||void 0===e?void 0:e.file)||null},t.prototype.getSideLeaf=function(e,t){if(e instanceof Rj){var n=new Nj(this.app);return e.insertChild(-1,n),n}if(t){var i=new Fj(this);e.insertChild(-1,i);n=new Nj(this.app);return i.insertChild(-1,n),n}0===e.children.length&&e.insertChild(0,new Fj(this));var r=e.children[0];if(r instanceof Aj){n=new Nj(this.app);return r.insertChild(-1,n),n}return null},t.prototype.iterateTabs=function(e,t){Array.isArray(e)||(e=[e]);for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r instanceof Fj&&t(r))return!0;if(r instanceof Aj&&this.iterateTabs(r.children,t))return!0}return!1},t.prototype.iterateLeaves=function(e,t){if("function"==typeof e&&t instanceof Dj){var n=t;t=e,e=n}if(Array.isArray(e))for(var i=0,r=e;i<r.length;i++){var o=r[i];if(this.iterateLeaves(o,t))return!0}else if(e instanceof Nj){if(t(e))return!0}else if(e instanceof Aj)for(var a=0,s=e.children;a<s.length;a++){var l=s[a];if(this.iterateLeaves(l,t))return!0}return!1},t.prototype.iterateRootLeaves=function(e){this.iterateLeaves(this.rootSplit,e)},t.prototype.iterateAllLeaves=function(e){this.iterateLeaves(this.rootSplit,e),this.iterateLeaves(this.leftSplit,e),this.iterateLeaves(this.rightSplit,e),this.iterateLeaves(this.floatingSplit,e)},t.prototype.getLeavesOfType=function(e){var t=[];return this.iterateAllLeaves((function(n){n.view&&n.view.getViewType()===e&&t.push(n)})),t},t.prototype.detachLeavesOfType=function(e){for(var t=0,n=this.getLeavesOfType(e);t<n.length;t++){n[t].detach()}},t.prototype.getAdjacentLeafInDirection=function(e,t){if(!e)return null;e instanceof Nj&&e.parent instanceof Fj&&(e=e.parent);var n=e.containerEl.getBoundingClientRect(),i=null;switch(t){case"top":i={x:n.left+n.width/2,y:n.top-5};break;case"bottom":i={x:n.left+n.width/2,y:n.top+n.height+5};break;case"left":i={x:n.left-5,y:n.top+n.height/2};break;case"right":i={x:n.left+n.width+5,y:n.top+n.height/2}}if(i){var r=activeDocument.elementFromPoint(i.x,i.y),o=null,a=e.getContainer();if(this.iterateLeaves(a,(function(e){if(e.containerEl.contains(r))return o=e,!0})),o||this.iterateTabs(a,(function(e){if(e.containerEl.contains(r))return o=e.children[e.currentTab],!0})),o)return o}for(var s=null,l="left"===t||"right"===t?"vertical":"horizontal";e;){var c=e.parent;if(c instanceof Fj&&("left"===t||"right"==t)||c instanceof Lj&&c.direction===l){var u=c.children,h=u.indexOf(e);if("left"===t||"top"===t){if(h>0){s=u[h-1];break}}else if(h<u.length-1){s=u[h+1];break}}e=c}if(!s)return null;for(;s instanceof Aj;){var p=s instanceof Fj?s.currentTab:0;s=s.children[p]}return s instanceof Nj?s:null},t.prototype.revealLeaf=function(e){var t=e.getRoot();t instanceof Pj&&t.collapsed&&t.toggle(),t instanceof Rj&&(t.openLeaf(e),t.expand(),t===this.leftSplit?this.rightSplit.collapse():t===this.rightSplit&&this.leftSplit.collapse());var n=e.parent;n instanceof Fj&&n.selectTab(e);var i=t.getContainer();i&&i.focus()},t.prototype.getLastOpenFiles=function(){return this.recentFileTracker.getLastOpenFiles()},t.prototype.getRecentFiles=function(e){return this.recentFileTracker.getRecentFiles(e)},t.prototype.updateOptions=function(){this.iterateAllLeaves((function(e){e&&e.view instanceof iK&&e.view.updateOptions()})),Lt.isDesktopApp&&!ye&&Gt(this.app.getSpellcheckLanguages())},t.prototype.onLayoutChange=function(e){if(this.requestUpdateLayout(),e){var t=this.layoutItemQueue;t.contains(e)||t.push(e)}},t.prototype.updateLayout=function(){var e,t;if(this.layoutReady){for(var n=this.layoutItemQueue;n.length>0;)n.pop().recomputeChildrenDimensions();if(0===this.rootSplit.children.length){var i=new Nj(this.app),r=new Fj(this);this.lastTabGroupStacked&&r.setStacked(!0),r.insertChild(0,i),this.rootSplit.insertChild(0,r)}if(!this.activeLeaf||!this.isAttached(this.activeLeaf)){var o=this.activeTabGroup,a=null;o&&o instanceof Fj&&this.isAttached(o)&&(a=o.children[o.currentTab]),a||(a=this.getMostRecentLeaf(this.getFocusedContainer())),a||this.iterateAllLeaves((function(e){(!a||a.activeTime<e.activeTime)&&(a=e)})),a||(a=this.createLeafInParent(this.rootSplit,0)),this.setActiveLeaf(a,{focus:!0})}var s=null===(e=this.activeLeaf)||void 0===e?void 0:e.parent;s!==this.activeTabGroup&&(null===(t=this.activeTabGroup)||void 0===t||t.containerEl.removeClass("mod-active"),this.activeTabGroup=s,null==s||s.containerEl.addClass("mod-active")),this.updateMobileVisibleTabGroup();var l={};for(var c in this.iterateAllLeaves((function(e){var t=e.group;t&&(l[t]=(l[t]||0)+1)})),l)if(l.hasOwnProperty(c)&&1===l[c])for(var u=0,h=this.getGroupLeaves(c);u<h.length;u++){(i=h[u]).setGroup(null)}this.updateFrameless(),this.updateTitle(),this.requestSaveLayout(),this.requestResize(),this.trigger("layout-change")}},t.prototype.updateMobileVisibleTabGroup=function(){if(Lt.isMobile){var e=this.activeLeaf;this.activeTabGroup instanceof Rj&&(e=this.getMostRecentLeaf());for(var t=new Set,n=e.parent;n;)t.add(n),n.containerEl.addClass("mod-visible"),n=n.parent;var i=function(e){t.has(e)||e.containerEl.removeClass("mod-visible");for(var n=0,r=e.children;n<r.length;n++){var o=r[n];o instanceof Aj&&i(o)}};i(this.rootSplit)}},t.prototype.updateFrameless=function(){var e=this;if(this.layoutReady){var t=this,n=t.rootSplit,i=t.leftSplit,r=t.rightSplit,o=t.floatingSplit,a=[],s=function(e){if(e instanceof Fj)a.push(e);else if(e instanceof Aj)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];s(i)}};s(n),s(i),s(r),s(o);for(var l=0,c=a;l<c.length;l++){c[l].containerEl.removeClass("mod-top","mod-top-left-space","mod-top-right-space")}var u=function(t){var o=[],a=function(e){if(e instanceof Fj)o.push(e);else if(e instanceof Lj)if("vertical"===e.direction)for(var t=0,n=e.children;t<n.length;t++){var i=n[t];a(i)}else{var r=e.children[0];r&&a(r)}};a(t);for(var s=0,l=o;s<l.length;s++){l[s].containerEl.addClass("mod-top")}var c=null,u=null,h=null,p=null;if(o.length>0&&(h=c=o.first(),p=u=o.last()),t===n){var d=i.children[0],f=r.children[0];d instanceof Fj&&(d.containerEl.addClass("mod-top","mod-top-left-space"),i.collapsed||(c=d)),f instanceof Fj&&(f.containerEl.addClass("mod-top","mod-top-right-space"),r.collapsed||(u=f));var g=e,m=g.leftSidebarToggleButtonEl,v=g.rightSidebarToggleButtonEl,y=function(e,t,n){var i=e.parentElement;if(t!==i){var r=n.prepend,o=n.oldStyle,a=n.newStyle,s=parseFloat(getComputedStyle(e).marginLeft),l=e.offsetWidth;if(i&&""!==o){var c=e.cloneNode(!0);e.replaceWith(c);var u=new Te(Tj);"margin"===o?u.addProp("marginLeft","",s-l+"px"):"none"!==o&&u.addProp("overflow","hidden","hidden","").addProp("width",l+"px","0"),Ie(c,u,(function(){return c.detach()}))}if(r?t.prepend(e):t.appendChild(e),i&&""!==a){u=new Te(Tj);"margin"===a?u.addProp("marginLeft",s-l+"px",""):"none"!==a&&u.addProp("overflow","hidden","hidden","").addProp("width","0",l+"px",""),Ie(e,u)}}};Lt.isDesktopApp&&Lt.isMacOS&&"hidden"===window.titlebarStyle&&!electronWindow.isFullScreen()||Lt.isTablet?!i.collapsed&&d instanceof Fj?y(m,d.tabHeaderContainerEl,{oldStyle:"margin",newStyle:""}):i.collapsed&&h&&y(m,h.tabHeaderContainerEl,{prepend:!0,oldStyle:"none",newStyle:"margin"}):e.leftRibbon.containerEl.prepend(m),Lt.isDesktopApp&&!r.collapsed&&(Lt.isMacOS||"hidden"!==window.titlebarStyle||electronWindow.isFullScreen())?f instanceof Fj&&y(v,f.tabHeaderContainerEl,{newStyle:""}):p&&y(v,p.tabHeaderContainerEl,{oldStyle:"none",newStyle:""})}Lt.isDesktopApp&&(c&&c.containerEl.addClass("mod-top-left-space"),u&&u.containerEl.addClass("mod-top-right-space"))};u(n);for(var h=0,p=o.children;h<p.length;h++){var d=p[h];d instanceof mG&&u(d)}}},t.prototype.onQuickPreview=function(e,t){this.trigger("quick-preview",e,t)},t.prototype.onResize=function(){this.trigger("resize")},t.prototype.onLinkContextMenu=function(e,t,n,i){var r=new fw;this.handleLinkContextMenu(r,t,n,i)&&(e.preventDefault(),r.showAtMouseEvent(e))},t.prototype.handleLinkContextMenu=function(e,t,n,i){var r=this;if(!t)return!1;var o=Bx(t).path,a=this.app.metadataCache.getFirstLinkpathDest(o,n);return Lt.isPhone&&e.addItem((function(e){return e.setSection("title").setTitle(a?a.basename:o).setIsLabel(!0)})),a?(e.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openLink()).setIcon("lucide-file").onClick((function(e){return r.openLinkText(t,n,hw.isModEvent(e))}))})),e.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){r.app.workspace.openLinkText(t,n,"tab")}))})),Lt.isPhone||e.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(){r.app.workspace.openLinkText(t,n,"split")}))})),e.addItem((function(e){return e.setSection("action").setTitle(rf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return r.app.fileManager.promptForFileRename(a)}))})),this.trigger("file-menu",e,a,"link-context-menu",i),!0):(e.addItem((function(e){return e.setSection("action").setTitle(rf.interface.menu.createFile()).setIcon("lucide-file").onClick((function(e){return r.openLinkText(t,n,hw.isModEvent(e))}))})),!0)},t.prototype.handleExternalLinkContextMenu=function(e,t){return!!t&&(e.addItem((function(e){return e.setTitle(rf.interface.menu.copyUrl()).setIcon("lucide-link").onClick((function(){at(t),new CI(rf.interface.copied({item:rf.interface.url()}))}))})),this.trigger("url-menu",e,t,null),!0)},t.prototype.iterateCodeMirrors=function(e){this.iterateAllLeaves((function(t){t.view instanceof iK&&!t.view.editMode&&e(t.view.sourceMode.cmEditor)}))},t.prototype.addMobileFileInfo=function(e){this.mobileFileInfos.push(e)},t.prototype.registerUriHook=function(){var e=this,t=function(t){if(t){console.log("Received URL action",t);var n=e.protocolHandlers;if(n.has(t.action))n.get(t.action)(t)}},n=window.OBS_ACT;if(window.OBS_ACT=t,n&&t(n),SD){var i=function(n){return v(e,void 0,void 0,(function(){var e;return y(this,(function(i){return n&&(e=function(e){if(!e.startsWith(pG))return null;console.log("Received callback URL",e);var t={};if((e=e.substr(pG.length)).startsWith("vault/")){var n=(e=e.substr("vault/".length)).split("/").map((function(e){return decodeURIComponent(e)}));t.action="open",t.vault=n[0],t.file=n.slice(1).join("/")}else{var i="",r="",o=e.indexOf("?"),a=e.indexOf("#",Math.max(0,o));a>=0&&(r=e.substr(a+1),e=e.substr(0,a),t.hash=r),o>=0&&(i=e.substr(o+1),e=e.substr(0,o));for(var s=0,l=i.split("&");s<l.length;s++){var c="true";(n=l[s].split("=")).length>1&&(c=decodeURIComponent(n[1])),t[decodeURIComponent(n[0])]=c}t.action=e.replace(/\/+$/g,"")}return t}(n))?e.vault&&e.vault.toLowerCase()!==this.app.vault.getName().toLowerCase()?(sessionStorage.setItem("obsidian-uri",n),window.location.reload(),[2]):(t(e),[2]):[2]}))}))};DD.addListener("appUrlOpen",(function(e){i(e.url)}))}},t.prototype.registerObsidianProtocolHandler=function(e,t){if(this.protocolHandlers.has(e))throw new Error('Action "'.concat(e,'" is already registered as a handler.'));this.protocolHandlers.set(e,t)},t.prototype.unregisterObsidianProtocolHandler=function(e,t){t&&this.protocolHandlers.get(e)!==t||this.protocolHandlers.delete(e)},t.prototype.registerHoverLinkSource=function(e,t){this.hoverLinkSources[e]=t},t.prototype.unregisterHoverLinkSource=function(e){delete this.hoverLinkSources[e]},t.prototype.pushUndoHistory=function(e,t,n){if(e){var i=e.getViewState();if("empty"!==i.type){var r=e.getEphemeralState(),o=this.undoHistory;o.unshift({state:i,eState:r,parentId:t,rootId:n,leafHistory:e.history.serialize()}),o.length>10&&o.pop()}}},t.prototype.updateTitle=function(){var e=this.getMostRecentLeaf(this.activeLeaf.getContainer());document.title=this.app.getAppTitle(e?e.getDisplayText().trim():"")},t.prototype.registerEditorExtension=function(e){this.editorExtensions.push(e),this.updateOptions()},t.prototype.unregisterEditorExtension=function(e){this.editorExtensions.remove(e),this.updateOptions()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny);var kG="manifest.json",CG="main.js",EG="styles.css";$i.override=$i.highest,$i.extend=$i.high,$i.fallback=$i.lowest;var xG="See the stack trace to find the faulty plugin and file an issue with the plugin author. \nDetails: https://discuss.codemirror.net/t/release-0-20-0/4302",SG=xn.prototype.iterate,MG=function(e){return function(t){console.error(new Error("[CM6] tree.iterate has changed syntax.\n".concat(xG))),e.call(this,t.type,t.from,t.to)}};xn.prototype.iterate=function(e){e.enter&&e.enter.length>1&&(e.enter=MG(e.enter)),e.leave&&e.leave.length>1&&(e.leave=MG(e.leave)),SG.call(this,e)};var TG={from:function(){}};i.PluginField={define:TG,decorations:TG,atomicRanges:TG,scrollMargins:TG};var DG={obsidian:p,"@codemirror/autocomplete":l,"@codemirror/collab":c,"@codemirror/commands":a,"@codemirror/language":o,"@codemirror/lint":u,"@codemirror/search":s,"@codemirror/state":t,"@codemirror/text":t,"@codemirror/view":i,"@lezer/common":e,"@lezer/lr":h,"@lezer/highlight":r},AG={"@codemirror/closebrackets":l,"@codemirror/comment":a,"@codemirror/fold":o,"@codemirror/gutter":i,"@codemirror/highlight":o,"@codemirror/history":a,"@codemirror/matchbrackets":o,"@codemirror/panel":i,"@codemirror/rangeset":t,"@codemirror/rectangular-selection":i,"@codemirror/stream-parser":o,"@codemirror/tooltip":i},LG=function(e){function t(t,n){var i=e.call(this)||this;return i._lastDataModifiedTime=0,i.onConfigFileChange=rt(i.handleConfigFileChange,50),i.app=t,i.manifest=n,i}return f(t,e),t.prototype.addRibbonIcon=function(e,t,n){var i=this.app,r=this.manifest.id+":"+t,o=i.workspace.leftRibbon.addRibbonItemButton(r,e,t,n);return this.register((function(){i.workspace.leftRibbon.removeRibbonAction(t),o.detach()})),o},t.prototype.addStatusBarItem=function(){var e=this.app.statusBar.registerStatusBarItem();return e.addClass("plugin-"+this.manifest.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-")),this.register((function(){return e.detach()})),e},t.prototype.addCommand=function(e){var t=this;return e.id=this.manifest.id+":"+e.id,e.name=this.manifest.name+": "+e.name,this.app.commands.addCommand(e),this.register((function(){return t.app.commands.removeCommand(e.id)})),e},t.prototype.addSettingTab=function(e){var t=this;this.app.setting.addSettingTab(e),this.register((function(){return t.app.setting.removeSettingTab(e)}))},t.prototype.registerView=function(e,t){var n=this;this.app.viewRegistry.registerView(e,t),this.register((function(){return n.app.viewRegistry.unregisterView(e)}))},t.prototype.registerHoverLinkSource=function(e,t){var n=this;this.app.workspace.registerHoverLinkSource(e,t),this.register((function(){return n.app.workspace.unregisterHoverLinkSource(e)}))},t.prototype.registerExtensions=function(e,t){var n=this;this.app.viewRegistry.registerExtensions(e,t),this.register((function(){return n.app.viewRegistry.unregisterExtensions(e)}))},t.prototype.registerMarkdownPostProcessor=function(e,t){return LA.registerPostProcessor(e,t),this.register((function(){return LA.unregisterPostProcessor(e)})),e},t.prototype.registerMarkdownCodeBlockProcessor=function(e,t,n){var i=LA.createCodeBlockPostProcessor(e,t);return LA.registerPostProcessor(i,n),LA.registerCodeBlockPostProcessor(e,t),this.register((function(){LA.unregisterCodeBlockPostProcessor(e),LA.unregisterPostProcessor(i)})),i},t.prototype.registerCodeMirror=function(e){this.app.workspace.iterateCodeMirrors(e),this.registerEvent(this.app.workspace.on("codemirror",e))},t.prototype.registerEditorExtension=function(e){var t=this;this.app.workspace.registerEditorExtension(e),this.register((function(){return t.app.workspace.unregisterEditorExtension(e)}))},t.prototype.registerObsidianProtocolHandler=function(e,t){var n=this;this.app.workspace.registerObsidianProtocolHandler(e,t),this.register((function(){return n.app.workspace.unregisterObsidianProtocolHandler(e,t)}))},t.prototype.registerEditorSuggest=function(e){var t=this;this.app.workspace.editorSuggest.addSuggest(e),this.register((function(){return t.app.workspace.editorSuggest.removeSuggest(e)}))},t.prototype.loadData=function(){return v(this,void 0,Promise,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.app.vault.readPluginData(this.manifest.dir)];case 1:return(e=n.sent())&&this.onExternalSettingsChange?(t=this,[4,this.getModifiedTime()]):[3,3];case 2:t._lastDataModifiedTime=n.sent(),n.label=3;case 3:return[2,e]}}))}))},t.prototype.saveData=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.app.vault.writePluginData(this.manifest.dir,e)];case 1:return n.sent(),this.onExternalSettingsChange?(t=this,[4,this.getModifiedTime()]):[3,3];case 2:t._lastDataModifiedTime=n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.loadCSS=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t=(e=this).app,n=e.manifest,i=n.dir+"/"+EG,[4,t.vault.exists(i)];case 1:return s.sent()?[4,t.vault.readRaw(i)]:[3,3];case 2:r=s.sent(),(o=createEl("style",{type:"text/css"})).textContent=r,a=this.app.customCss.styleEl,document.head.insertBefore(o,a),this.register((function(){return o.detach()})),s.label=3;case 3:return[2]}}))}))},t.prototype.getModifiedTime=function(){return v(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=this.app.vault,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.adapter.stat(this.manifest.dir)];case 2:return[2,t.sent().mtime];case 3:return t.sent(),[2,0];case 4:return[2]}}))}))},t.prototype.handleConfigFileChange=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.onExternalSettingsChange?[4,this.getModifiedTime()]:[2];case 1:return e=t.sent(),this._lastDataModifiedTime!==e&&(this.onExternalSettingsChange(),this._lastDataModifiedTime=e),[2]}}))}))},t}(nb),PG=function(e){function t(t,n){var i=e.call(this,t,t.setting)||this;return i.plugin=n,i.name=n.manifest.name,i.id=n.manifest.id,i}return f(t,e),t}(_j),IG=function(e){function t(t,n){var i=e.call(this,t,t.setting)||this;return i.plugin=null,i.plugin=n,i.name=n.instance.name,i.id=n.instance.id,i}return f(t,e),t}(_j),OG=/^\/\/[@#] sourceMappingURL=data:application\/json(?:;charset[:=][^;]+)?;base64,.*$/gm,FG=function(){function e(e){this.manifests={},this.plugins={},this.enabledPlugins=new Set,this.updates={},this.requestSaveConfig=rt(this.saveConfig,1e3),this.app=e,this.app.vault.on("raw",this.onRaw.bind(this))}return e.prototype.onRaw=function(e){if(e.startsWith(this.app.vault.configDir)){var t=ie(re(e));if(this.enabledPlugins.has(t)&&e==="".concat(this.getPluginFolder(),"/").concat(t,"/data.json")){var n=this.plugins[t];n&&n.onConfigFileChange()}}},e.prototype.loadManifests=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return e=this.app.vault.adapter,t=this.manifests={},n=this.getPluginFolder(),[4,e.exists(n)];case 1:return p.sent()?[4,e.list(n)]:[3,10];case 2:i=p.sent(),r=0,o=i.folders,p.label=3;case 3:if(!(r<o.length))return[3,10];a=o[r],p.label=4;case 4:return p.trys.push([4,8,,9]),s=a+"/"+kG,[4,e.exists(s)];case 5:return p.sent()?(u=(c=JSON).parse,[4,e.read(s)]):[3,7];case 6:if(!(l=u.apply(c,[p.sent()])).id)return[3,9];l.dir=a,l.author&&"obsidian"!==l.author.toLowerCase()||(l.author=""),t[l.id]=l,p.label=7;case 7:return[3,9];case 8:return h=p.sent(),console.error(h),[3,9];case 9:return r++,[3,3];case 10:return[2]}}))}))},e.prototype.loadManifest=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:t=this.app.vault.adapter,n=this.manifests,l.label=1;case 1:return l.trys.push([1,5,,6]),i=e+"/"+kG,[4,t.exists(i)];case 2:return l.sent()?(a=(o=JSON).parse,[4,t.read(i)]):[3,4];case 3:if(!(r=a.apply(o,[l.sent()])).id)return[2];r.dir=e,r.author&&"obsidian"!==r.author.toLowerCase()||(r.author=""),n[r.id]=r,l.label=4;case 4:return[3,6];case 5:return s=l.sent(),console.error(s),[3,6];case 6:return[2]}}))}))},e.prototype.loadPlugin=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return this.isEnabled()?(t=this.plugins[e])?[2,t]:(n=this.manifests[e])?[4,this.app.vault.adapter.read(n.dir+"/"+CG)]:[2,null]:[2];case 1:if(i=c.sent(),localStorage.getItem("debug-plugin")||(i=i.replace(OG,"")),r=e,o=function(e){return AG.hasOwnProperty(e)&&console.error(new Error("[CM6][".concat(r,'] Using a deprecated package: "').concat(e,'".\n').concat(xG))),AG[e]||DG[e]||It(e)},s={exports:a={}},function(e,t){return window.eval("(function anonymous(require,module,exports){".concat(e,"\n})\n//# sourceURL=").concat(t,"\n"))}(i,"plugin:"+encodeURIComponent(e))(o,s,a),!(l=(a=s.exports||a).default||s.exports))throw new Error("Failed to load plugin "+e+". No exports detected.");if(!((t=new l(this.app,n))instanceof LG))throw new Error("Failed to load plugin "+e);return this.plugins[e]=t,[4,t.load()];case 2:return c.sent(),[4,t.loadCSS()];case 3:return c.sent(),[2,t]}}))}))},e.prototype.unloadPlugin=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){return(t=this.plugins[e])?(t.unload(),delete this.plugins[e],[2]):[2]}))}))},e.prototype.initialize=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g=this;return y(this,(function(m){switch(m.label){case 0:return[4,(e=this.app).vault.readConfigJson("community-plugins")];case 1:return(t=m.sent())&&Array.isArray(t)||(t=[]),this.enabledPlugins=new Set(t),[4,this.loadManifests()];case 2:if(m.sent(),n=this.manifests,0===Object.keys(n).length)return[2];if(!this.isEnabled())return null===localStorage.getItem("enable-plugin-"+this.app.appId)&&new BG(e).open(),[2];i=[],r=performance.now(),o=0,a=t,m.label=3;case 3:return o<a.length?(d=a[o],n.hasOwnProperty(d)?(s=performance.now(),[4,this.enablePlugin(d)]):[3,5]):[3,6];case 4:m.sent(),i.push({id:d,time:Math.round(performance.now()-s)}),m.label=5;case 5:return o++,[3,3];case 6:if(l=performance.now()-r,"1"===localStorage.getItem("debug-plugin")){for(c=["Total plugin setup: ".concat(Math.round(l).toLocaleString(),"ms")],i.sort((function(e,t){return t.time-e.time})),u=0,h=i;u<h.length;u++)p=h[u],d=p.id,f=p.time,c.push("".concat(d,": ").concat(f.toLocaleString(),"ms"));console.log(c.join("\n")),c.length>11&&(c=c.slice(0,11)).push("More in developer console"),new CI(c.join("\n"),0)}return this.requestSaveConfig(),this.checkForDeprecations(),setInterval((function(){return g.checkForDeprecations()}),432e5),[2]}}))}))},e.prototype.getPluginFolder=function(){return"".concat(this.app.vault.configDir,"/plugins")},e.prototype.enablePlugin=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!(t=this.manifests[e]))return[2,!1];if(this.isDeprecated(t))return new CI("Unable to load plugin ".concat(t.name," v").concat(t.version,". This version has been reported to cause issues. Please check for a newer version of the plugin.")),[2,!1];if("sliding-panes-obsidian"===t.id)return new CI(createFragment((function(e){e.createEl("p",{text:"As of Obsidian v1.0, Sliding Panes is a built-in feature called Stacked Tabs. We recommend uninstalling the Sliding Panes plugin."}),e.createEl("p").createEl("a",{cls:"mod-cta",text:"Learn more",href:"https://help.obsidian.md/User+interface/Stacked+tabs",attr:{target:"_blank"}})})),6e3),[2,!1];if("better-pdf-plugin"===t.id&&"1.4.0"===t.version)return new CI("Better PDF Plugin is no longer functional. We recommend uninstalling it.",6e3),[2,!1];if(!Lt.isDesktopApp&&t.isDesktopOnly)return[2,!1];i.label=1;case 1:return i.trys.push([1,3,,4]),this.loadingPluginId=e,[4,this.loadPlugin(e)];case 2:return i.sent(),this.loadingPluginId=null,[3,4];case 3:return n=i.sent(),this.loadingPluginId=null,new CI("Failed to load plugin ".concat(e)),console.error("Plugin failure: "+e,n),[2,!1];case 4:return[2,!0]}}))}))},e.prototype.disablePlugin=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.unloadPlugin(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),new CI("Failed to unload plugin ".concat(e)),console.error("Plugin failure: "+e,t),[3,3];case 3:return[2]}}))}))},e.prototype.enablePluginAndSave=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.enablePlugin(e)];case 1:return t.sent()?(this.enabledPlugins.add(e),this.requestSaveConfig(),[2,!0]):[2,!1]}}))}))},e.prototype.disablePluginAndSave=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return this.enabledPlugins.delete(e),this.requestSaveConfig(),[4,this.disablePlugin(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.uninstallPlugin=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return[4,this.disablePluginAndSave(e)];case 1:return i.sent(),(t=this.manifests[e])?(n=t.dir)?[4,this.app.vault.exists(n)]:[2]:[2];case 2:return i.sent()?[4,this.app.vault.adapter.rmdir(n,!0)]:[2];case 3:return i.sent(),delete this.manifests[e],delete this.updates[e],[2]}}))}))},e.prototype.getPlugin=function(e){return this.plugins.hasOwnProperty(e)?this.plugins[e]:null},e.prototype.saveConfig=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.writeConfigJson("community-plugins",Array.from(this.enabledPlugins))];case 1:return e.sent(),[2]}}))}))},e.prototype.isEnabled=function(){return"true"===localStorage.getItem("enable-plugin-"+this.app.appId)},e.prototype.setEnable=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:if(localStorage.setItem("enable-plugin-"+this.app.appId,e?"true":"false"),e)return[3,5];t=Object.keys(this.plugins),n=0,i=t,s.label=1;case 1:return n<i.length?(a=i[n],[4,this.disablePlugin(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[3,9];case 5:r=0,o=Array.from(this.enabledPlugins),s.label=6;case 6:return r<o.length?(a=o[r],[4,this.enablePlugin(a)]):[3,9];case 7:s.sent(),s.label=8;case 8:return r++,[3,6];case 9:return[2]}}))}))},e.prototype.checkForDeprecations=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:if(0===Object.keys(this.plugins).length)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,j_(qG).json];case 2:return UG=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:for(t in e=[],this.plugins)e.push(t);n=0,o.label=5;case 5:return n<e.length?(i=e[n],this.plugins.hasOwnProperty(i)?(r=this.manifests[i]||this.plugins[i].manifest,this.isDeprecated(r)?[4,this.disablePluginAndSave(i)]:[3,7]):[3,7]):[3,8];case 6:o.sent(),new CI("The plugin ".concat(r.name," v").concat(r.version," has been disabled. This version has been reported to cause issues. Please check for a newer version of the plugin."),0),o.label=7;case 7:return n++,[3,5];case 8:return[2]}}))}))},e.prototype.isDeprecated=function(e){if(!e)return!1;if(!UG.hasOwnProperty(e.id))return!1;var t=e.id,n=e.version;return UG[t].contains(n)},e.prototype.installPlugin=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u,h,p,d;return y(this,(function(f){switch(f.label){case 0:i=n.id,r=n.name,new CI(NG.msgInstallingPlugin({name:r})),o=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,j_($_(e,t,kG)).text];case 2:return o=f.sent(),(a=JSON.parse(o)).id&&a.id===i?[3,4]:(new CI("Plugin ID mismatch."),[2]);case 3:return s=f.sent(),console.error(s),new CI(NG.msgFailedToInstallPlugin({name:r})),[2];case 4:return l=this.app.vault,c=this.getPluginFolder(),[4,l.exists(c)];case 5:return f.sent()?[3,7]:[4,l.createFolder(c)];case 6:f.sent(),f.label=7;case 7:return u=c+"/"+i,[4,l.exists(u)];case 8:return f.sent()?[3,10]:[4,l.createFolder(u)];case 9:f.sent(),f.label=10;case 10:return[4,(h=l.adapter).write(u+"/"+kG,o)];case 11:f.sent(),f.label=12;case 12:return f.trys.push([12,15,,16]),[4,j_($_(e,t,CG)).text];case 13:return p=f.sent(),[4,h.write(u+"/"+CG,p)];case 14:return f.sent(),[3,16];case 15:return f.sent(),console.log("".concat(r,": ").concat(CG," not found")),[3,16];case 16:return f.trys.push([16,19,,20]),[4,j_($_(e,t,EG)).text];case 17:return d=f.sent(),[4,h.write(u+"/"+EG,d)];case 18:return f.sent(),[3,20];case 19:return f.sent(),console.log("".concat(r,": ").concat(EG," not found")),[3,20];case 20:return delete this.updates[i],new CI(NG.msgSuccessfullyInstalledPlugin({name:r})),[4,this.loadManifest(u)];case 21:return f.sent(),this.plugins.hasOwnProperty(i)?[4,this.disablePlugin(i)]:[3,24];case 22:return f.sent(),[4,this.enablePlugin(i)];case 23:f.sent(),f.label=24;case 24:return[2]}}))}))},e.prototype.checkForUpdates=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d;return y(this,(function(f){switch(f.label){case 0:this.updates={},e=this.updates,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,HG()];case 2:return t=f.sent(),[3,4];case 3:return n=f.sent(),console.error(n),new CI(NG.msgFailedLoadPlugins()),[2];case 4:i=0,r=t,f.label=5;case 5:if(!(i<r.length))return[3,12];if(o=r[i],a=o.id,!this.manifests.hasOwnProperty(a))return[3,11];if(s=this.manifests[a],!(l=s.version))return[3,11];c=o.repo,u=Y_(c,kG),h=null,f.label=6;case 6:return f.trys.push([6,8,,9]),[4,j_(u).json];case 7:return(h=f.sent())&&h.id&&h.id===a?[3,9]:[3,11];case 8:return f.sent(),[3,11];case 9:return[4,Z_(c,h)];case 10:(p=f.sent())&&Nd(l,p)&&(e[a]={repo:c,version:p,manifest:h}),f.label=11;case 11:return i++,[3,5];case 12:return d=Object.keys(e).length,new CI(0===d?NG.msgNoUpdatesFound():NG.msgUpdatesFound({count:d})),[2]}}))}))},e}(),BG=function(e){function t(t){var n=e.call(this,t)||this;n.modalEl.addClass("mod-trust-folder"),n.titleEl.setText(NG.labelTrustAuthor()),n.contentEl.createEl("p",{text:NG.labelTrustAuthorDescription_1()}),n.contentEl.createEl("p",{text:NG.labelTrustAuthorDescription_2()}),n.contentEl.createEl("p",{text:NG.labelTrustAuthorDescription_3()});var i=n.modalEl.createDiv("modal-button-container");return i.createEl("button",{text:NG.buttonEnablePlugins(),onclick:function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!0)];case 1:return e.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))}}),i.createEl("button",{text:NG.buttonDontTrustAuthor(),onclick:function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!1)];case 1:return e.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))}}),n}return f(t,e),t}(LI),NG=rf.setting.thirdPartyPlugin,RG=Y_("obsidianmd/obsidian-releases","community-plugins.json"),HG=VD((function(){return v(void 0,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,j_(RG).json];case 1:if(e=t.sent(),!Array.isArray(e))throw new Error("Failed to parse community plugins.");return[2,e]}}))}))}),3e5,6e4),VG=Y_("obsidianmd/obsidian-releases","community-plugin-stats.json"),zG=VD((function(){return j_(VG).json}),3e5,6e4),qG=Y_("obsidianmd/obsidian-releases","community-plugin-deprecation.json"),UG={},WG={download:rf.setting.thirdPartyPlugin.labelByPopularity,release:rf.setting.thirdPartyPlugin.labelByReleased,alphabetical:rf.setting.thirdPartyPlugin.labelAlphabetical,update:rf.setting.thirdPartyPlugin.labelByUpdated},_G=function(e){function t(t,n,i){var r=e.call(this)||this;return r.lastSave=0,r.manager=null,r.instance=null,r.enabled=!1,r.commands=[],r.ribbonItems=[],r.mobileFileInfo=[],r.hasStatusBarItem=!1,r.statusBarEl=null,r.addedButtonEls=[],r.views={},r.onConfigFileChange=rt(r.handleConfigFileChange,50),r.app=t,r.instance=n,r.manager=i,r}return f(t,e),t.prototype.init=function(){var e=this.instance;e.init&&e.init(this.app,this)},t.prototype.enable=function(e){if(!this.enabled){this.enabled=!0;for(var t=this,n=t.instance,i=t.views,r=t.app,o=0,a=this.commands;o<a.length;o++){var s=a[o];r.commands.addCommand(s)}for(var l=0,c=this.ribbonItems;l<c.length;l++){var u=c[l],h=r.workspace.leftRibbon.addRibbonItemButton(u.id,u.icon,u.title,u.callback);this.addedButtonEls.push(h)}if(Lt.isMobile)for(var p=0,d=this.mobileFileInfo;p<d.length;p++){var f=d[p];r.workspace.addMobileFileInfo(f)}for(var g in this.hasStatusBarItem&&(this.statusBarEl=r.statusBar.registerStatusBarItem(),this.statusBarEl.addClass("plugin-"+this.instance.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-"))),i)i.hasOwnProperty(g)&&this.app.viewRegistry.registerView(g,i[g]);n.onEnable&&n.onEnable(r,this),e&&n.onUserEnable&&n.onUserEnable(r),this.load(),this.manager.requestSaveConfig(),this.manager.trigger("change",this)}},t.prototype.disable=function(e){if(this.enabled){this.enabled=!1;var t=this,n=t.instance,i=t.views,r=t.app;n.onDisable&&n.onDisable(r,this),e&&n.onUserDisable&&n.onUserDisable(r);for(var o=0,a=this.commands;o<a.length;o++){var s=a[o];r.commands.removeCommand(s.id)}for(var l=0,c=this.addedButtonEls;l<c.length;l++){c[l].detach()}for(var u=0,h=this.ribbonItems;u<h.length;u++){var p=h[u];r.workspace.leftRibbon.removeRibbonAction(p.title)}for(var d in this.statusBarEl&&this.statusBarEl.detach(),i)i.hasOwnProperty(d)&&(this.app.viewRegistry.unregisterView(d),e&&r.workspace.detachLeavesOfType(d));this.unload(),this.manager.requestSaveConfig(),this.manager.trigger("change",this)}},t.prototype.getModifiedTime=function(){return v(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=this.instance.id,t=this.manager.app,n=t.vault.getConfigFile(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.vault.adapter.stat(n)];case 2:return[2,i.sent().mtime];case 3:return i.sent(),[2,0];case 4:return[2]}}))}))},t.prototype.handleConfigFileChange=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.instance.onExternalSettingsChange?[4,this.getModifiedTime()]:[2];case 1:return e=t.sent(),this.lastSave!==e&&this.instance.onExternalSettingsChange(),[2]}}))}))},t.prototype.loadData=function(){return v(this,void 0,Promise,(function(){var e;return y(this,(function(t){return e=this.instance.id,[2,this.manager.app.vault.readConfigJson(e)]}))}))},t.prototype.saveData=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.instance.id,[4,this.manager.app.vault.writeConfigJson(t,e)];case 1:return i.sent(),n=this,[4,this.getModifiedTime()];case 2:return n.lastSave=i.sent(),[2]}}))}))},t.prototype.deleteData=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.manager.app.vault.deleteConfigJson(this.instance.id)];case 1:return e.sent(),[2]}}))}))},t.prototype.registerViewType=function(e,t){this.views[e]=t},t.prototype.registerGlobalCommand=function(e){e.name=this.instance.name+": "+e.name,this.commands.push(e)},t.prototype.registerRibbonItem=function(e,t,n){var i=this.instance.id+":"+e;this.ribbonItems.push({id:i,title:e,icon:t,callback:n,hidden:!1})},t.prototype.registerStatusBarItem=function(){this.hasStatusBarItem=!0},t.prototype.registerMobileFileInfo=function(e){this.mobileFileInfo.push({renderCallback:e})},t.prototype.addSettingTab=function(e){var t=this;this.app.setting.addSettingTab(e),this.register((function(){return t.app.setting.removeSettingTab(e)}))},t}(nb),jG=["file-explorer","global-search","switcher","graph","backlink","outgoing-link","tag-pane","page-preview","daily-notes","templates","note-composer","command-palette","slash-command","editor-status","starred","markdown-importer","zk-prefixer","random-note","outline","word-count","slides","audio-recorder","workspaces","file-recovery","publish","sync"],GG=function(e){function t(t){var n=e.call(this)||this;return n.plugins={},n.config={},n.migration=!1,n.requestSaveConfig=rt(n.saveConfig.bind(n),500),n.app=t,n.app.vault.on("raw",n.onRaw.bind(n)),n}return f(t,e),t.prototype.onRaw=function(e){if(re(e)===this.app.vault.configDir&&"json"===le(e)){var t=ae(e),n=this.plugins[t];n&&n.enabled&&n.onConfigFileChange()}},t.prototype.getPluginById=function(e){var t=this.plugins;return t.hasOwnProperty(e)?t[e]:null},t.prototype.getEnabledPluginById=function(e){var t=this.plugins;if(t.hasOwnProperty(e)){var n=t[e];if(n.enabled)return n.instance}return null},t.prototype.loadPlugin=function(e){var t=this.app,n=this.plugins;if(n.hasOwnProperty(e.id))throw new Error("Plugin ".concat(e.name," has already been loaded"));var i=new _G(t,e,this);return i.init(),n[e.id]=i,e},t.prototype.getEnabledPlugins=function(){var e=this.plugins,t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i.enabled&&t.push(i)}return t},t.prototype.enable=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return t=(e=this).app,n=e.plugins,i={},[4,t.vault.readConfigJson("core-plugins")];case 1:return!(r=h.sent())||"object"!=typeof r||Array.isArray(r)?[3,2]:(this.migration=!1,i=r,[3,4]);case 2:return this.migration=!0,[4,t.vault.readConfigJson("core-plugins-migration")];case 3:if((o=h.sent())&&"object"==typeof o&&(i=o),Array.isArray(r))for(a=new Set(r),s=0,l=jG;s<l.length;s++)c=l[s],n.hasOwnProperty(c)&&(i[c]=a.has(c));h.label=4;case 4:for(c in n)n.hasOwnProperty(c)&&(u=n[c],i.hasOwnProperty(c)?i[c]&&u.enable(!1):(u.instance.defaultOn&&u.enable(!1),this.requestSaveConfig()));return this.config=i,[2]}}))}))},t.prototype.saveConfig=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:for(a in t=(e=this).app,n=e.plugins,i=e.config,r=e.migration,o=[],n)n.hasOwnProperty(a)&&(i[a]=n[a].enabled,n[a].enabled&&o.push(a));return r?[4,t.vault.writeConfigJson("core-plugins",o)]:[3,3];case 1:return s.sent(),[4,t.vault.writeConfigJson("core-plugins-migration",i)];case 2:return s.sent(),[3,5];case 3:return[4,t.vault.writeConfigJson("core-plugins",i)];case 4:s.sent(),s.label=5;case 5:return[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny),KG=function(e){function t(t){var n=e.call(this,t)||this;return n.navigation=!1,n.allowNoFile=!0,n.requestUpdate=rt(n.update,10),n}return f(t,e),t.prototype.load=function(){e.prototype.load.call(this);var t=this.app;this.registerEvent(t.workspace.on("file-open",this.onFileOpen,this))},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:return t.hasOwnProperty("file")||t.hasOwnProperty("group")||(i=this.leaf.workspace.getActiveFile())&&(t.file=null==i?void 0:i.path),[4,e.prototype.setState.call(this,t,n)];case 1:return r.sent(),[2]}}))}))},t.prototype.onLoadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(e){return this.requestUpdate(),[2]}))}))},t.prototype.onUnloadFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(e){return this.requestUpdate(),[2]}))}))},t.prototype.onFileOpen=function(e){this.leaf.group||this.leaf.pinned||(e instanceof Xy?this.loadFile(e):this.loadFile(null),this.requestUpdate())},t.prototype.onGroupChange=function(){if(e.prototype.onGroupChange.call(this),this.leaf.group)for(var t=0,n=this.leaf.workspace.getGroupLeaves(this.leaf.group);t<n.length;t++){var i=n[t];if(i!==this.leaf&&i.view instanceof EI){var r=i.view.getSyncViewState();this.leaf.openFile(i.view.file,r)}}else{var o=this.leaf.workspace.getActiveFile();this.loadFile(o)}},t}(EI),YG=function(){function e(e,t){this.navHeaderEl=null,this.navButtonsEl=null,this.app=e;var n=this.navHeaderEl=t.createDiv({cls:"nav-header",prepend:!0});this.navButtonsEl=n.createDiv("nav-buttons-container")}return e.prototype.addNavButton=function(e,t,n,i){var r=this.navButtonsEl.createDiv("clickable-icon nav-action-button");return i&&r.addClass(i),r.addEventListener("click",n),gb(r,e),aS(r,t),r},e.prototype.addSortButton=function(e,t){return this.addNavButton("lucide-sort-asc",rf.plugins.fileExplorer.actionChangeSort(),(function(n){n.preventDefault();var i=n.currentTarget;if(!i.classList.contains("has-active-menu")){for(var r=(new fw).setNoIcon(),o=t(),a=0,s=eP;a<s.length;a++){for(var l=function(t){var n=tP[t]();r.addItem((function(i){return i.setTitle(n).setChecked(t===o).onClick((function(){e(t)}))}))},c=0,u=s[a];c<u.length;c++){l(u[c])}r.addSeparator()}r.setParentElement(i).showAtMouseEvent(n)}}))},e}(),XG="backlink",$G=function(){function e(){this.id="backlink",this.name=rf.plugins.backlinks.name(),this.description=rf.plugins.backlinks.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerViewType(XG,(function(e){return new ZG(e)})),t.registerGlobalCommand({id:"backlink:open",name:rf.plugins.backlinks.actionShow(),icon:"lucide-link",callback:function(){n.app.workspace.ensureSideLeaf(XG,"right",{active:!0})}}),t.registerGlobalCommand({id:"backlink:open-backlinks",name:rf.plugins.backlinks.actionOpenForCurrent(),icon:"lucide-link",checkCallback:this.openBacklinksForActiveFile.bind(this)}),t.registerGlobalCommand({id:"backlink:toggle-backlinks-in-document",name:rf.plugins.backlinks.actionToggleBacklinksInDocument(),icon:"lucide-link",checkCallback:this.toggleBacklinksInDocument.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.metadataCache.on("resolved",this.updateBacklinks,this)),(n=this.plugin.statusBarEl)&&(n.addClass("mod-clickable"),n.addEventListener("click",(function(){var t=e.workspace,n=t.getLeavesOfType(XG);n.length>0&&t.revealLeaf(n[0])}))),i=this,o=(r=Object).assign,a=[{}],[4,t.loadData()];case 1:return i.options=o.apply(r,a.concat([s.sent()])),this.app.workspace.backlinkInDocument=this.options.backlinkInDocument,t.addSettingTab(new JG(e,t,this)),[2]}}))}))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onUserDisable=function(e){for(var t=0,n=e.workspace.getLeavesOfType(XG);t<n.length;t++){n[t].detach()}e.workspace.iterateAllLeaves((function(e){var t=e.view;t instanceof iK&&t.showBacklinks&&t.toggleBacklinks()}))},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(XG,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Lt.isMobile&&t instanceof Xy&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(rf.plugins.backlinks.actionOpen()).setIcon("links-coming-in").onClick((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:XG,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))})),t instanceof Xy&&i&&i.view instanceof iK&&i.view.canToggleBacklinks()&&e.addItem((function(e){return e.setSection("pane").setTitle(rf.plugins.backlinks.menuOptBacklinksInDocument()).setChecked(!!(null==i?void 0:i.view.getState().backlinks)).setIcon("links-coming-in").onClick((function(){var e=i.view;e instanceof iK&&e.toggleBacklinks()}))}))},e.prototype.onFileOpen=function(e){this.file=e instanceof Xy?e:null,this.updateBacklinks()},e.prototype.updateBacklinks=function(){var e=this.file,t=this.plugin.statusBarEl;if(t){if(!e)return t.setText(""),void t.hide();var n=0,i=e.path,r=this.app.metadataCache.resolvedLinks;for(var o in r)o!==i&&r.hasOwnProperty(o)&&r[o].hasOwnProperty(i)&&(n+=r[o][i]);var a=rf.nouns.backlinkWithCount({count:n});t.setText(a),t.show()}},e.prototype.openBacklinksForActiveFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:XG,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e.prototype.toggleBacklinksInDocument=function(e){var t=this.app.workspace.getActiveViewOfType(iK);if(t&&t.canToggleBacklinks())return e||t.toggleBacklinks(),!0},e}(),ZG=function(e){function t(t){var n=e.call(this,t)||this;n.icon="links-coming-in";var i=n.contentEl;return n.backlink=n.addChild(new QG(n.app,i)),n.requestUpdate(),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Lt.isMobile?rf.plugins.backlinks.name():rf.plugins.backlinks.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return XG},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.collapseAll=this.backlink.collapseAll,t.extraContext=this.backlink.extraContext,t.sortOrder=this.backlink.sortOrder,t.showSearch=this.backlink.showSearch,t.searchQuery=this.backlink.searchComponent.getValue(),t.backlinkCollapsed=this.backlink.backlinkCollapsed,t.unlinkedCollapsed=this.backlink.unlinkedCollapsed,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return u.sent(),i=t.collapseAll,r=t.extraContext,o=t.sortOrder,a=t.showSearch,s=t.searchQuery,l=t.backlinkCollapsed,c=t.unlinkedCollapsed,isBoolean(i)&&this.backlink.setCollapseAll(i),isBoolean(r)&&this.backlink.setExtraContext(r),isBoolean(a)&&this.backlink.setShowSearch(a),String.isString(o)&&nP.hasOwnProperty(o)&&this.backlink.setSortOrder(o),isBoolean(l)?[4,this.backlink.setBacklinkCollapsed(l,!1)]:[3,3];case 2:u.sent(),u.label=3;case 3:return isBoolean(c)?[4,this.backlink.setUnlinkedCollapsed(c,!1)]:[3,5];case 4:u.sent(),u.label=5;case 5:return String.isString(s)&&(this.backlink.searchComponent.setValue(s),this.backlink.updateSearch()),[2]}}))}))},t.prototype.onResize=function(){this.backlink.onResize()},t.prototype.update=function(){this.leaf.updateHeader();var e=this.backlink;e.file=this.file,e.tooltipPlacement=this.getSideTooltipPlacement(),e.update()},t}(KG),QG=function(e){function t(t,n,i){var r=e.call(this)||this;r.collapseAll=!1,r.extraContext=!1,r.sortOrder="alphabetical",r.showSearch=!1,r.searchQuery=null,r.backlinkFile=null,r.backlinkCollapsed=!1,r.backlinkHeaderEl=null,r.backlinkCountEl=null,r.backlinkQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinkedAliases="",r.unlinkedQueue=null,r.app=t;var o=r.headerDom=new YG(r.app,n);r.collapseAllButtonEl=o.addNavButton("lucide-list",rf.plugins.search.labelCollapseResults(),r.onToggleCollapseClick.bind(r)),r.extraContextButtonEl=o.addNavButton("lucide-move-vertical",rf.plugins.search.labelMoreContext(),r.onToggleMoreContextClick.bind(r)),o.addSortButton((function(e){return r.setSortOrder(e)}),(function(){return r.sortOrder})),r.showSearchButtonEl=o.addNavButton("lucide-search",rf.plugins.backlinks.labelShowSearch(),r.onToggleShowSearchClick.bind(r)),r.searchComponent=new nO(n).setPlaceholder(rf.plugins.search.promptStartSearch()).onChange(rt(r.updateSearch.bind(r),400,!0)).then((function(e){aS(e.clearButtonEl,rf.plugins.search.tooltipClearSearch()),e.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Lt.isMobile&&wb(),r.updateSearch())})),e.containerEl.hide()}));var a=n.createDiv("backlink-pane");i=i||a;var s=r.backlinkHeaderEl=a.createDiv("tree-item-self is-clickable");s.createSpan("tree-item-icon collapse-icon",(function(e){gb(e,"right-triangle")})),s.createDiv({cls:"tree-item-inner",text:rf.plugins.backlinks.labelLinkedMentions()}),s.addEventListener("click",r.toggleBacklinkCollapsed.bind(r)),r.backlinkCountEl=s.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.backlinkDom=new wP(r.app,a.createDiv("search-result-container"),rf.plugins.backlinks.labelNoBacklinks(),i);var l=r.unlinkedHeaderEl=a.createDiv("tree-item-self is-clickable");return l.createSpan("tree-item-icon collapse-icon",(function(e){gb(e,"right-triangle")})),l.createDiv({cls:"tree-item-inner",text:rf.plugins.backlinks.labelUnlinkedMentions()}),l.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new wP(r.app,a.createDiv("search-result-container"),rf.plugins.backlinks.labelNoUnlinkedMentions(),i),r.setUnlinkedCollapsed(!0,!1),r}return f(t,e),t.prototype.onload=function(){var e=this.app,t=e.vault;this.registerEvent(e.metadataCache.on("resolve",this.onMetadataChanged,this)),this.registerEvent(t.on("create",this.onFileChanged,this)),this.registerEvent(t.on("modify",this.onFileChanged,this)),this.registerEvent(t.on("rename",this.onFileRename,this)),this.registerEvent(t.on("delete",this.onFileDeleted,this))},t.prototype.onToggleCollapseClick=function(){this.setCollapseAll(!this.collapseAll)},t.prototype.setCollapseAll=function(e){e!==this.collapseAll&&(this.collapseAll=e,this.backlinkDom.setCollapseAll(e),this.unlinkedDom.setCollapseAll(e),this.collapseAllButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout())},t.prototype.onToggleMoreContextClick=function(){this.setExtraContext(!this.extraContext)},t.prototype.setExtraContext=function(e){e!==this.extraContext&&(this.extraContext=e,this.backlinkDom.setExtraContext(e),this.unlinkedDom.setExtraContext(e),this.extraContextButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout())},t.prototype.onToggleShowSearchClick=function(){this.setShowSearch(!this.showSearch),this.showSearch&&this.searchComponent.inputEl.focus()},t.prototype.setShowSearch=function(e){e!==this.showSearch&&(this.showSearch=e,this.searchComponent.containerEl.toggle(e),this.showSearchButtonEl.toggleClass("is-active",e),e||(this.searchComponent.setValue(""),this.updateSearch()),this.app.workspace.requestSaveLayout())},t.prototype.setSortOrder=function(e){e!==this.sortOrder&&(this.sortOrder=e,this.backlinkDom.sortOrder=e,this.backlinkDom.changed(),this.unlinkedDom.sortOrder=e,this.unlinkedDom.changed(),this.app.workspace.requestSaveLayout())},t.prototype.onResize=function(){this.backlinkDom.onResize(),this.unlinkedDom.onResize()},t.prototype.updateSearch=function(){var e=this.searchComponent.getValue(),t=this.searchQuery;if(!(!t&&!e||t&&t.query===e))try{if(e){var n=new ZL(this.app,e,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.backlinkFile=null,this.unlinkedFile=null,this.update()}catch(e){new CI(e.message),console.log(e)}},t.prototype.toggleBacklinkCollapsed=function(){this.setBacklinkCollapsed(!this.backlinkCollapsed,!0)},t.prototype.setBacklinkCollapsed=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.backlinkCollapsed?[2]:(this.backlinkCollapsed=e,[4,this.setSectionCollapsed(this.backlinkHeaderEl,this.backlinkDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},t.prototype.setUnlinkedCollapsed=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=e,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.updateHeaderTooltip=function(e,t){XM(e,t),aS(e,t?rf.interface.tooltip.clickToExpand():rf.interface.tooltip.clickToCollapse(),{placement:this.tooltipPlacement})},t.prototype.setSectionCollapsed=function(e,t,n,i){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(e,n),[4,t.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},t.prototype.onMetadataChanged=function(e){var t=this.backlinkQueue;if(t&&t.add(e),this.onFileChanged(e),e===this.unlinkedFile){var n="",i=this.app.metadataCache.getFileCache(e);if(i){var r=fx(i.frontmatter);r&&(n=JSON.stringify(r))}this.unlinkedAliases!==n&&this.recomputeUnlinked(e)}},t.prototype.onFileChanged=function(e){var t=this.unlinkedQueue;t&&t.add(e)},t.prototype.onFileRename=function(e){if(e===this.unlinkedFile)this.recomputeBacklink(e),this.recomputeUnlinked(e);else{this.onFileChanged(e);var t=this.backlinkQueue;t&&t.add(e)}},t.prototype.onFileDeleted=function(e){var t=this.unlinkedQueue;t&&t.remove(e);var n=this.backlinkQueue;n&&n.remove(e),this.backlinkDom.removeResult(e),this.unlinkedDom.removeResult(e)},t.prototype.update=function(){var e=this.file;this.backlinkFile!==e&&this.recomputeBacklink(e),this.unlinkedFile!==e&&this.recomputeUnlinked(e),this.updateHeaderTooltip(this.backlinkHeaderEl,this.backlinkCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},t.prototype.passSearchFilter=function(e,t,n){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){return(n=this.searchQuery)&&!n.match(e,t)?[2,!1]:[2,!0]}))}))},t.prototype.recomputeBacklink=function(e){var t=this;this.stopBacklinkSearch();var n=this.backlinkCollapsed,i=this.backlinkCountEl;if(n)i.hide();else{this.backlinkFile=e;var r=this.app,o=this.backlinkDom;if(i.show(),i.setText("0"),o.emptyResults(),e){var a=this.app.metadataCache,s=this.backlinkQueue=new qD({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader()},onCancel:function(){t.backlinkQueue=null}});o.emptyResults();var l=r.vault.getMarkdownFiles();l.sort(iP(o.sortOrder)),s.addList(l);var c=function(t){var n=t.path,i=a.resolvedLinks;return i.hasOwnProperty(n)&&i[n].hasOwnProperty(e.path)},u=function(){i.setText(String(o.getMatchCount()))},h=function(){return C(this,arguments,(function(){var e,t,n,i,r,a;return y(this,(function(l){switch(l.label){case 0:l.trys.push([0,8,9,14]),e=E(s.generator()),l.label=1;case 1:return[4,k(e.next())];case 2:return(t=l.sent()).done?[3,7]:(n=t.value,c(n)?[4,k(n)]:[3,5]);case 3:return[4,l.sent()];case 4:return l.sent(),[3,6];case 5:o.removeResult(n),u(),l.label=6;case 6:return[3,1];case 7:return[3,14];case 8:return i=l.sent(),r={error:i},[3,14];case 9:return l.trys.push([9,,12,13]),t&&!t.done&&(a=e.return)?[4,k(a.call(e))]:[3,11];case 10:l.sent(),l.label=11;case 11:return[3,13];case 12:if(r)throw r.error;return[7];case 13:return[7];case 14:return[2]}}))}))}(),p=WD(r.vault.generateFiles(h,!0),{batchSize:2});v(t,void 0,void 0,(function(){var t,n,i,r,l,c,h;return y(this,(function(d){switch(d.label){case 0:d.trys.push([0,6,7,12]),t=function(){var t,i,l,c,h,p,d,f,g,m,v,b,w,k,C,E,x,S;return y(this,(function(y){switch(y.label){case 0:return t=r.value,i=t.file,l=t.content,e===i?[2,"continue"]:(c=!1,h={},(p=a.getFileCache(i))?[4,n.passSearchFilter(i,l,s.runnable)]:(o.removeResult(i),u(),[2,"continue"]));case 1:if(!y.sent())return[2,"continue"];for(d=[],Rx(p,(function(t){(function(t,n){var i=Fx(n.link),r=a.getFirstLinkpathDest(i,t);return r&&r===e})(i.path,t)&&d.push(t)})),h.content=[],h.properties=[],f=0,g=d;f<g.length;f++){if(wx(m=g[f]))h.content.push([m.position.start.offset,m.position.end.offset]);else if(kx(m)){if(v=m.key.split("."),b=v[0],w=v.slice(1),k=void 0,w)for(k=[],C=0,E=w;C<E.length;C++)x=E[C],S=Number(x),k.push(Number.isNaN(S)?x:S);h.properties.push({key:b,subkey:k,pos:[0,m.original.length]})}c=!0}return c?o.addResult(i,h,l).renderContentMatches():o.removeResult(i),u(),[2]}}))},n=this,i=E(p),d.label=1;case 1:return[4,i.next()];case 2:return(r=d.sent()).done?[3,5]:[5,t()];case 3:d.sent(),d.label=4;case 4:return[3,1];case 5:return[3,12];case 6:return l=d.sent(),c={error:l},[3,12];case 7:return d.trys.push([7,,10,11]),r&&!r.done&&(h=i.return)?[4,h.call(i)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(c)throw c.error;return[7];case 11:return[7];case 12:return[2]}}))}))}}},t.prototype.stopBacklinkSearch=function(){var e=this.backlinkQueue;e&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.backlinkFile=null),this.backlinkQueue=null},t.prototype.recomputeUnlinked=function(e){var t=this;this.stopUnlinkedSearch();var n=this.unlinkedCollapsed,i=this.unlinkedCountEl;if(n)i.hide();else{this.unlinkedFile=e,this.unlinkedAliases="";var r=this.app,o=this.unlinkedDom;if(i.show(),i.setText("0"),o.emptyResults(),e){var a=[new RegExp(cL(e.basename),"gi")],s=this.app.metadataCache.getFileCache(e);if(s){var l=fx(s.frontmatter);if(l){for(var c=0,u=l;c<u.length;c++){var h=u[c];h&&a.push(new RegExp(cL(h),"gi"))}this.unlinkedAliases=JSON.stringify(l)}}var p=this.unlinkedQueue=new qD({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader()},onCancel:function(){t.unlinkedQueue=null}});o.emptyResults();var d=r.vault.getMarkdownFiles();d.sort(nP[o.sortOrder]),p.addList(d);var f=p.generator(),g=WD(r.vault.generateFiles(f,!0));v(t,void 0,void 0,(function(){var t,n,s,l,c,u,h,d,f,m,v,b,w,k,C,x,S,M,T,D,A,L,P;return y(this,(function(y){switch(y.label){case 0:y.trys.push([0,6,7,12]),t=E(g),y.label=1;case 1:return[4,t.next()];case 2:return(n=y.sent()).done?[3,5]:(s=n.value,l=s.file,c=s.content,e===l||r.metadataCache.isUserIgnored(l.path)?[3,4]:(u=r.metadataCache.getFileCache(l),[4,this.passSearchFilter(l,c,p.runnable)]));case 3:if(!y.sent())return[3,4];for(h=!1,d=[],f=0,m=a;f<m.length;f++)for((v=m[f]).lastIndex=0,b=v.exec(c);b;)w=v.lastIndex,k=w-b[1].length,d.push([k,w]),b=v.exec(c);for((C={}).content=[],x=function(e){var t=Nx(u,(function(t){return t.position.start.offset<=e[0]&&t.position.end.offset>=e[1]}));if(u&&u.frontmatterPosition){var n=u.frontmatterPosition;n&&n.start.offset<=e[0]&&n.end.offset>=e[1]&&(t=!0)}t||(h=!0,C.content.push(e))},S=0,M=d;S<M.length;S++)T=M[S],x(T);h?(D=o.addResult(l,C,c),this.addLinkFunction(D,e,l),D.separateMatches=!0,D.renderContentMatches()):o.removeResult(l),i.setText(String(o.getMatchCount())),y.label=4;case 4:return[3,1];case 5:return[3,12];case 6:return A=y.sent(),L={error:A},[3,12];case 7:return y.trys.push([7,,10,11]),n&&!n.done&&(P=t.return)?[4,P.call(t)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(L)throw L.error;return[7];case 11:return[7];case 12:return[2]}}))}))}}},t.prototype.stopUnlinkedSearch=function(){var e=this.unlinkedQueue;e&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.unlinkedFile=null),this.unlinkedQueue=null},t.prototype.addLinkFunction=function(e,t,n){var i=this;e.onMatchRender=function(r,o){o.createEl("button",{cls:"search-result-file-match-replace-button",text:rf.plugins.backlinks.labelLinkButtonText()}).addEventListener("click",(function(a){return v(i,void 0,void 0,(function(){var i,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return a.preventDefault(),o.detach(),e.invalidate(),i=this.app.vault,s=r[0],l=r[1],[4,i.read(n)];case 1:return c=p.sent(),u=c.slice(s,l),h=this.app.fileManager.generateMarkdownLink(t,n.path,"",u),c=c.slice(0,s)+h+c.slice(l),[4,i.modify(n,c)];case 2:return p.sent(),[2]}}))}))}))}},t}(nb),JG=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(rf.plugins.backlinks.optionBacklinkInDocument()).setDesc(rf.plugins.backlinks.optionBacklinkInDocumentDesc()).addToggle((function(t){return t.setValue(n.backlinkInDocument).onChange((function(t){n.backlinkInDocument=t,e.app.workspace.backlinkInDocument=t,e.plugin.saveData(n)}))}))},t}(IG),eK=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.onAccept=i,r.key=n.key,r.type=n.type,r.setTitle("Edit property");var o=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),r.onSubmit())};return new YI(r.contentEl).setName("Property").addText((function(e){e.setDisabled(!0),e.setValue(r.key),e.onChange((function(e){r.key=e})),e.inputEl.addEventListener("keydown",o)})),new YI(r.contentEl).setName("Type").addDropdown((function(e){for(var t,n=r.app.metadataTypeManager.registeredTypeWidgets,i=0,a=Object.values(n);i<a.length;i++){var s=a[i];s.reservedKeys&&!(null===(t=s.reservedKeys)||void 0===t?void 0:t.contains(r.type))||e.addOption(s.type,s.name())}e.setValue(r.type),e.onChange((function(e){r.type=e})),e.selectEl.addEventListener("keydown",o)})),r.addCancelButton(),r.addButton("mod-cta","Save",r.onSubmit.bind(r)),r}return f(t,e),t.prototype.onSubmit=function(){var e;this.shouldRestoreSelection=!1,this.app.metadataTypeManager.setType(this.key,this.type),null===(e=this.onAccept)||void 0===e||e.call(this),this.close()},t}(PI),tK=function(e){function t(t){var n=e.call(this,t.app,t.contentEl,t)||this;return n.type="source",n.requestOnInternalDataChange=rt((function(){return n.view.onInternalDataChange()}),10),n.requestSaveFolds=rt((function(){return n.view.onMarkdownFold()}),500),n.view=t,n.app=t.app,n.search.applyScope=function(e){n.view.scope=e},t.addChild(n),n}return f(t,e),Object.defineProperty(t.prototype,"file",{get:function(){return this.owner.file},enumerable:!1,configurable:!0}),t.prototype.show=function(){e.prototype.show.call(this),this.sizerEl.prepend(this.view.metadataEditor.containerEl),this.sizerEl.prepend(this.view.inlineTitleEl),this.sizerEl.appendChild(this.view.backlinksEl)},t.prototype.set=function(t,n){e.prototype.set.call(this,t,n)},t.prototype.beforeUnload=function(){this.requestOnInternalDataChange.cancel(),this.requestSaveFolds.run(),this.saveHistory()},t.prototype.getEphemeralState=function(e){e.cursor=this.getEditorRange()},t.prototype.setEphemeralState=function(e){this.setState(e),this.setHighlight(e)},t.prototype.getFoldInfo=function(){var t,n=e.prototype.getFoldInfo.call(this),i=null!==(t=null==n?void 0:n.folds)&&void 0!==t?t:[],r=null==n?void 0:n.lines;return this.view.metadataEditor.collapsed&&i.push({from:0,to:0}),i.length>0?{folds:i,lines:null!=r?r:this.editor.lineCount()}:null},t.prototype.getDynamicExtensions=function(){var t=this,n=e.prototype.getDynamicExtensions.call(this);return n.push(_P.init((function(){return t.view}))),n},t.prototype.handleScroll=function(){this.view.onMarkdownScroll()},t.prototype.onUpdate=function(e,t){var n=e.transactions;t&&(this.view.requestSave(),this.requestSaveFolds(),this.requestOnInternalDataChange()),e.docChanged&&this.app.workspace.trigger("editor-change",this.editor,this.view),(bf(n,Ep)||bf(n,xp))&&this.requestSaveFolds()},t.prototype.updateBottomPadding=function(e){var t=this.view.backlinksEl,n=Math.round(e/2),i=n+"px";t.isShown()&&(i="100px",t.style.minHeight=Math.max(0,n-100)+"px"),this.cm.contentDOM.style.paddingBottom=i},t.prototype.updateOptions=function(){var t=this.app.vault.getConfig("readableLineLength");this.editorEl.toggleClass("is-readable-line-width",t),e.prototype.updateOptions.call(this)},t}(tI),nK="markdown",iK=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-file",n.modeButtonEl=null,n.supportsProperties=!0,n.modes={},n.currentMode=null,n.scroll=null,n.showBacklinks=!1,n.rawFrontmatter="",rB.enable||Lt.isMobile?(n.editMode=n.registerMode(new tK(n)),n.editor=n.editMode.editor,n.sourceMode={cmEditor:n.editor}):(n.sourceMode=n.registerMode(new M_(n)),n.editor=n.sourceMode.editor),n.previewMode=n.registerMode(new DP(n));var i=n.inlineTitleEl=createDiv("inline-title");i.contentEditable="true",i.spellcheck=n.app.vault.getConfig("spellcheck"),i.autocapitalize="on",i.tabIndex=-1,i.enterKeyHint=Lt.isAndroidApp?"enter":"done",i.addEventListener("focus",(function(){n.fileBeingRenamed=n.file})),i.addEventListener("blur",(function(){return n.onInlineTitleBlur()})),i.addEventListener("input",(function(){return n.onTitleChange(i)})),i.addEventListener("paste",(function(e){return n.onTitlePaste(i,e)})),i.addEventListener("keydown",n.onTitleKeydown.bind(n)),n.metadataEditor=new KB(n.app,n),n.addChild(n.metadataEditor),n.backlinksEl=createDiv("embedded-backlinks"),n.backlinksEl.hide(),n.modeButtonEl=n.addAction("lucide-book-open","",n.onSwitchView.bind(n));var r=n.modes;for(var o in r)r.hasOwnProperty(o)&&r[o].hide();var a=n.app.vault.getConfig("defaultViewMode");a&&r.hasOwnProperty(a)||(a="source"),n.currentMode=r[a],n.containerEl.setAttribute("data-mode",n.getMode()),n.currentMode.show(),n.updateButtons(),n.showBacklinks=n.app.workspace.backlinkInDocument,n.updateShowBacklinks(),n.addChild(n.previewMode);var s=0;return n.containerEl.addEventListener("wheel",(function(e){if(n.app.vault.getConfig("baseFontSizeAction")){var t=e.ctrlKey,i=Date.now();if(t&&!(s>i-500)){if(t&&0!==e.deltaY){if(ye&&Number.isInteger(e.deltaY))return;var r=n.app.vault.getConfig("baseFontSize");e.deltaY<0?r++:r--,r=Math.clamp(r,10,30),n.app.vault.setConfig("baseFontSize",r),n.app.updateFontSize()}}else s=i}}),{passive:!0}),n}return f(t,e),t.prototype.saveFrontmatter=function(e){var t=this.getViewData(),n="",i="";Object.keys(e).length>0&&(i=hF(e).trim(),n="---\n".concat(i,"\n---\n"));var r=0,o=0,a=sx(t);a&&(r=a.blockFrom,o=a.blockTo),t=t.slice(0,r)+n+t.slice(o),this.app.workspace.onQuickPreview(this.file,t),this.save()},t.prototype.getFile=function(){return this.file},t.prototype.shiftFocusAfter=function(){this.setEphemeralState({focus:!0,cursor:{from:{line:0,ch:0}}})},t.prototype.shiftFocusBefore=function(e){"k"!==(null==e?void 0:e.key)&&bb(this.inlineTitleEl)},t.prototype.onInlineTitleBlur=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return e=this.inlineTitleEl,[4,this.saveTitle(e)];case 1:return t.sent()||e.setText(this.file.basename),rS(),[2]}}))}))},t.prototype.onload=function(){e.prototype.onload.call(this);var t=this.leaf;this.registerEvent(t.workspace.on("quick-preview",this.onExternalDataChange,this)),this.containerEl.addEventListener("click",this.onViewClick.bind(this)),this.registerEvent(t.workspace.on("resize",this.onResize,this)),this.registerEvent(t.workspace.on("css-change",this.onCssChange,this)),this.onResize()},t.prototype.onClose=function(){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.onClose.call(this)];case 1:return n.sent(),(t=this.editMode)&&t.destroy(),[2]}}))}))},t.prototype.getViewType=function(){return nK},t.prototype.canAcceptExtension=function(e){return mM.contains(e)},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.mode=this.getMode(),t.backlinks=this.showBacklinks,this.editMode&&(t.source=this.editMode&&this.editMode.sourceMode),t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return i=!1,r=t.mode,o=t.backlinks,a=t.source,r?(s=this.modes).hasOwnProperty(r)?[4,this.setMode(s[r])]:[3,2]:[3,2];case 1:i=c.sent(),c.label=2;case 2:return(l=this.editMode)&&"boolean"==typeof a&&l.sourceMode!==a&&(l.toggleSource(),i=!0),"boolean"==typeof o&&(this.showBacklinks=o,this.updateShowBacklinks()),i&&(n.layout=!0),[4,e.prototype.setState.call(this,t,n)];case 3:return c.sent(),[2]}}))}))},t.prototype.getEphemeralState=function(){var t=e.prototype.getEphemeralState.call(this);return this.currentMode.getEphemeralState(t),null!==this.scroll&&(t.scroll=this.scroll),t},t.prototype.setEphemeralState=function(t){var n=t.rename;if(n){var i=void 0;if("start"===n?i=!0:"end"===n&&(i=!1),this.inlineTitleEl.isShown())(this.currentMode===this.editMode?this.editMode.cm.scrollDOM.scrollTop:this.previewMode.getScroll())<.5&&(bb(this.inlineTitleEl,i),delete t.rename)}e.prototype.setEphemeralState.call(this,t);var r=t.subpath;if(r){var o=_x(this.app.metadataCache.getFileCache(this.file),r);o&&(t.line=o.start.line,t.startLoc=o.start,t.endLoc=o.end||null)}this.currentMode.setEphemeralState(t),t.hasOwnProperty("scroll")&&(this.scroll=t.scroll)},t.prototype.onUnloadFile=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return this.onMarkdownFold(),this.currentMode.beforeUnload(),[2,e.prototype.onUnloadFile.call(this,t)]}))}))},t.prototype.registerMode=function(e){return this.modes[e.type]=e,e},t.prototype.getMode=function(){return this.currentMode.type},t.prototype.toggleMode=function(){var e=this.leaf,t=e.getViewState();t.state.mode="preview"===t.state.mode?"source":"preview",e.setViewState(t,{focus:!0})},t.prototype.updateButtons=function(){var e=this.currentMode,t=this.modeButtonEl,n=rf.interface.menu.modClickOpenNewTab({key:sw.Mod});"source"===e.type?(gb(t,"lucide-book-open"),aS(t,rf("interface.menu.edit-view")+"\n"+rf("interface.menu.switch-to-read-view")+"\n"+n)):(gb(t,"lucide-edit-3"),aS(t,rf("interface.menu.read-view")+"\n"+rf("interface.menu.switch-to-edit-view")+"\n"+n))},t.prototype.getSyncViewState=function(){var t=e.prototype.getSyncViewState.call(this);return delete t.state.mode,delete t.state.source,delete t.eState.cursor,t},t.prototype.setMode=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e&&this.currentMode!==e?(n=(t=this).currentMode,i=t.scroll,"source"!==n.type?[3,2]:[4,this.save()]):[2,!1];case 1:o.sent(),o.label=2;case 2:return r=n.getFoldInfo(),this.app.foldManager.save(this.file,r),n.hide(),this.currentMode=e,e.show(),null!==this.data&&e.set(this.data,!1),e.onResize(),null!==i&&e.setEphemeralState({scroll:i}),e.applyFoldInfo(r),this.metadataEditor.setCollapse(!!r&&r.folds.some((function(e){return 0===e.from})),!1),this.updateButtons(),this.containerEl.setAttribute("data-mode",this.getMode()),[2,!0]}}))}))},t.prototype.getViewData=function(){return this.currentMode.get()},t.prototype.clear=function(){var e=this,t=e.currentMode,n=e.sourceMode,i=e.editMode,r=e.modes;for(var o in t!==n&&t!==i||this.onMarkdownFold(),this.scroll=null,r)r.hasOwnProperty(o)&&r[o].clear()},Object.defineProperty(t.prototype,"path",{get:function(){return this.file.path},enumerable:!1,configurable:!0}),t.prototype.onSwitchView=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e.preventDefault(),t=this.leaf,(n=this.getState()).mode="preview"===this.getMode()?"source":"preview",i={type:nK,state:n},hw.isModEvent(e)&&(r=this.app.workspace,t=r.createLeafBySplit(this.leaf),i.active=!0,i.group=this.leaf),[4,t.setViewState(i)];case 1:return o.sent(),[2]}}))}))},t.prototype.canToggleBacklinks=function(){return"preview"===this.getMode()||this.editMode instanceof tK},t.prototype.toggleBacklinks=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return e=this.leaf,(t=this.getState()).backlinks=!t.backlinks,n={type:nK,state:t},[4,e.setViewState(n)];case 1:return i.sent(),this.app.workspace.requestSaveLayout(),[2]}}))}))},t.prototype.updateShowBacklinks=function(){var e=this.showBacklinks,t=this.app,n=this.backlinks;e&&!n?(this.backlinksEl.show(),this.backlinks=this.addChild(new QG(t,this.backlinksEl)),this.updateBacklinks()):!e&&n&&(this.removeChild(n),this.backlinksEl.empty(),this.backlinksEl.hide(),this.backlinks=null),this.currentMode===this.editMode&&this.editMode.onResize()},t.prototype.updateBacklinks=function(){var e=this.backlinks;e&&(e.file=this.file,e.update())},t.prototype.onLoadFile=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.inlineTitleEl.setText(this.getDisplayText()),[4,e.prototype.onLoadFile.call(this,t)];case 1:return n.sent(),this.updateBacklinks(),[2]}}))}))},t.prototype.onRename=function(t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return t===this.file&&this.inlineTitleEl.setText(t.basename),[4,e.prototype.onRename.call(this,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onMarkdownScroll=function(){var e=this.currentMode.getScroll();return null!==e&&(this.scroll=e),this.syncState(!1)},t.prototype.onMarkdownFold=function(){this.app.foldManager.save(this.file,this.currentMode.getFoldInfo())},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n);var r=this.getMode();t.addItem((function(e){return e.setSection("pane").setTitle(rf.interface.menu.toggleReadingView()).setChecked("preview"===r).setIcon("lucide-book-open").onClick(i.onSwitchView.bind(i))})),t.addItem((function(e){return e.setSection("action").setTitle(rf.interface.menu.addProperty()).setDisabled("source"===r&&!!i.getState().source).setIcon("lucide-plus-circle").onClick((function(){i.metadataEditor.addProperty()}))})),"source"===r&&t.addItem((function(e){return e.setSection("pane").setTitle(rf.interface.menu.toggleSourceMode()).setIcon("lucide-code-2").setChecked(!!i.getState().source).onClick((function(){var e=i.getState();e.source=!e.source,i.leaf.setViewState({type:nK,state:e})}))})),t.addItem((function(e){return e.setSection("action").setTitle(rf.interface.menu.find()).setIcon("lucide-file-search").onClick((function(){return i.showSearch()}))})),"source"===r&&t.addItem((function(e){return e.setSection("action").setTitle(rf.interface.menu.replace()).setIcon("lucide-file-search").onClick((function(){return i.showSearch(!0)}))})),Lt.isDesktopApp&&t.addItem((function(e){return e.setSection("action").setTitle(rf.commands.exportPdf()).setIcon("lucide-file-down").onClick((function(e){return i.printToPdf()}))}))},t.prototype.onResize=function(){this.currentMode.onResize()},t.prototype.onCssChange=function(){this.editMode&&this.editMode.onCssChange(),this.sourceMode&&this.sourceMode instanceof M_&&this.sourceMode.onCssChange()},t.prototype.loadFrontmatter=function(e){var t,n=sx(e),i=(null==n?void 0:n.frontMatter)||"";if(this.rawFrontmatter!==i){this.rawFrontmatter=i;var r={};try{if("object"!=typeof(r=null!==(t=uF(i))&&void 0!==t?t:{})||Array.isArray(r))throw new Error("Frontmatter must be a valid object!")}catch(e){r={}}this.editMode.setCssClass(mx(r)),this.metadataEditor.synchronize(r)}},t.prototype.onInternalDataChange=function(){var e=this.currentMode.get();this.data!==e&&(this.data=e,this.leaf.workspace.onQuickPreview(this.file,this.data),this.loadFrontmatter(e))},t.prototype.onExternalDataChange=function(e,t){e===this.file&&this.setData(t,!1)},t.prototype.setViewData=function(e,t){var n=this.currentMode,i=this.modes;if(t){for(var r in this.scroll=null,i)i.hasOwnProperty(r)&&i[r].set(e,!0);var o=this.app.foldManager.load(this.file);o&&n.applyFoldInfo(o),this.metadataEditor.setCollapse(!!o&&o.folds.some((function(e){return 0===e.from})),!1)}else n.set(e,!1);this.loadFrontmatter(e)},t.prototype.onViewClick=function(e){var t=this,n=t.currentMode,i=t.sourceMode,r=t.editMode;e.defaultPrevented||(n===i&&i.onViewClick(e),n===r&&r.onViewClick(e))},t.prototype.updateOptions=function(){var e=this.modes;for(var t in e)e.hasOwnProperty(t)&&e[t].updateOptions();this.inlineTitleEl.spellcheck=this.app.vault.getConfig("spellcheck")},t.prototype.showSearch=function(e){void 0===e&&(e=!1),this.currentMode.showSearch(e)},t.prototype.canShowProperties=function(){var e;return("source"!==this.getMode()||!(null===(e=this.editMode)||void 0===e?void 0:e.sourceMode))&&"visible"===this.app.vault.getConfig("propertiesInDocument")},t.prototype.focusMetadata=function(e){return void 0===e&&(e={focusHeading:!0}),!(!this.canShowProperties()||0===this.metadataEditor.properties.length)&&(!this.metadataEditor.collapsed&&e.focusAddButton?this.metadataEditor.addPropertyButtonEl.focus():void 0!==e.propertyIdx?this.metadataEditor.focusPropertyAtIndex(e.propertyIdx):void 0!==e.propertyKey?this.metadataEditor.focusProperty(e.propertyKey):this.metadataEditor.headingEl.focus(),!0)},t.prototype.undo=function(){this.editMode.editor.undo()},t.prototype.redo=function(){this.editMode.editor.redo()},t.prototype.addProperty=function(e){this.metadataEditor.addProperty()},t.prototype.editProperty=function(e){var t=this.metadataEditor.focusedLine;new eK(this.app,t.entry,(function(){t.focusProperty()})).open()},t.prototype.collapseProperties=function(e){this.metadataEditor.setCollapse(e,!1)},t.prototype.toggleCollapseProperties=function(){var e;"hidden"!==this.app.vault.getConfig("propertiesInDocument")&&this.metadataEditor.containerEl.isShown()?this.metadataEditor.toggleCollapse():null===(e=this.editMode)||void 0===e||e.toggleFoldFrontmatter()},t.prototype.metadataHasFocus=function(){return this.metadataEditor.hasFocus()},t.prototype.getSelection=function(){return this.currentMode.getSelection()},t.prototype.printToPdf=function(){new oK(this.app,this.file).open()},t.prototype.triggerClickableToken=function(e,t){var n=this;if("internal-link"===e.type)setTimeout((function(){n.app.workspace.openLinkText(e.text,n.file.path,t)}),100);else if("external-link"===e.type)window.open(e.text);else if("tag"===e.type){var i=e.text;i.startsWith("#")||(i="#"+i);var r=this.app.internalPlugins.getPluginById("global-search");r&&r.instance.openGlobalSearch("tag:"+i)}},t.prototype.handleCut=function(e){this.metadataEditor.hasFocus()&&this.metadataEditor.handleCut(e)},t.prototype.handleCopy=function(e){this.metadataEditor.hasFocus()&&this.metadataEditor.handleCopy(e)},t.prototype.handlePaste=function(e){e.clipboardData.getData("obsidian/properties")&&this.metadataEditor.handlePaste(e)},t.VIEW_TYPE=nK,t}(T_),rK=rf.editor.printModal,oK=function(e){function t(t,n){var i=e.call(this,t)||this;i.file=n,i.modalEl.addClass("mod-narrow"),i.titleEl.setText(rK.title());var r=i.contentEl;r.createEl("p",{cls:"u-muted",text:rK.caption({filename:n.basename})});var o=t.vault.getConfig("pdfExportSettings");return new YI(r).setName(rK.settingIncludeFileName()).addToggle((function(e){return e.setValue(o.includeName).then((function(e){return i.includeName=e}))})),new YI(r).setName(rK.settingPageSize()).addDropdown((function(e){return e.addOption("A3",rK.settingPageSizeA3()).addOption("A4",rK.settingPageSizeA4()).addOption("A5",rK.settingPageSizeA5()).addOption("Legal",rK.settingPageSizeLegal()).addOption("Letter",rK.settingPageSizeLetter()).addOption("Tabloid",rK.settingPageSizeTabloid()).setValue(o.pageSize).then((function(e){return i.pageSize=e}))})),new YI(r).setName(rK.settingLandscape()).addToggle((function(e){return e.setValue(o.landscape).then((function(e){return i.landscape=e}))})),new YI(r).setName(rK.settingMargin()).addDropdown((function(e){return e.addOption("0",rK.settingMarginDefault()).addOption("2",rK.settingMarginMinimal()).addOption("1",rK.settingMarginNone()).setValue(o.margin).then((function(e){return i.marginsType=e}))})),new YI(r).setName(rK.settingDownscalePercent()).addSlider((function(e){return e.setLimits(10,100,1).setDynamicTooltip().setValue(o.downscalePercent).then((function(e){return i.scaleFactor=e}))})),r.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:rK.buttonExportToPdf()},(function(e){e.addEventListener("click",(function(){return v(i,void 0,void 0,(function(){var e,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e={includeName:this.includeName.getValue(),pageSize:this.pageSize.getValue(),landscape:this.landscape.getValue(),margin:this.marginsType.getValue(),downscalePercent:this.scaleFactor.getValue()},t.vault.setConfig("pdfExportSettings",e),(n={}).includeName=e.includeName,n.pageSize=e.pageSize,n.landscape=e.landscape,n.marginsType=parseInt(e.margin),1!==n.marginsType&&2!==n.marginsType||(n.margins={top:0,left:0,bottom:0,right:0}),n.scaleFactor=e.downscalePercent,n.scale=Math.clamp(n.scaleFactor/100,.1,2),n.open=!0,i=this.file,[4,It("electron").remote.dialog.showSaveDialog({defaultPath:i.basename+".pdf",filters:[{name:"PDF Files",extensions:["pdf"]},{name:"All Files",extensions:["*"]}],properties:["showOverwriteConfirmation"]})];case 1:return(r=o.sent()).canceled||!r.filePath?[2]:(n.filepath=r.filePath,this.close(),[4,this.printToPdf(n)]);case 2:return o.sent(),[2]}}))}))}))}))})),i}return f(t,e),t.prototype.printToPdf=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:(t=this.app.loadProgress).setMessage(rf.dialogue.preparingPdf()),t.show(),(n="obsidian"===this.app.vault.getConfig("theme"))&&(document.body.addClass("theme-light"),document.body.removeClass("theme-dark")),document.body.removeClass("theme-dark"),i=document.body.createDiv("print"),(r=new nb).load(),o=function(){i.detach(),r.unload(),n&&(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),t.hide()},i.addEventListener("click",o),s.label=1;case 1:return s.trys.push([1,5,6,7]),[4,this.print(i,r,e.includeName)];case 2:return s.sent(),[4,sleep(200)];case 3:return s.sent(),[4,(l=e,new Promise((function(e){var t=It("electron").ipcRenderer;t.once("print-to-pdf",e),t.send("print-to-pdf",l)})))];case 4:return s.sent(),new CI("PDF Saved to ".concat(e.filepath)),[3,7];case 5:return a=s.sent(),console.error(a),new CI("Failed to save PDF."),[3,7];case 6:return o(),[7];case 7:return[2]}var l}))}))},t.prototype.testPrint=function(){return v(this,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return(e=document.body.createDiv("print")).addEventListener("click",(function(){e.detach(),t.unload()})),(t=new nb).load(),[4,this.print(e,t,!0)];case 1:return n.sent(),[2]}}))}))},t.prototype.print=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r,o,a,s,l,c,u,h,p,d,f,g;return y(this,(function(m){switch(m.label){case 0:return i=e.createDiv("markdown-preview-view markdown-rendered"),o=(r=this).app,a=r.file,i.toggleClass("rtl",o.vault.getConfig("rightToLeft")),i.toggleClass("show-properties","hidden"!==o.vault.getConfig("propertiesInDocument")),n&&i.createEl("h1",{text:a.basename}),[4,this.app.vault.cachedRead(a)];case 1:return s=m.sent(),l=rx(s),c=cx(l),u=ux(l),h=hM(u),i.appendChild(h),i.addClasses(mx(c)),p=[],DP.postProcess(o,{docId:$e(16),sourcePath:a.path,frontmatter:c,promises:p,addChild:function(e){return t.addChild(e)},getSectionInfo:function(){return null},containerEl:i,el:i,displayMode:!0}),p.length>0?[4,Promise.all(p)]:[3,3];case 2:m.sent(),m.label=3;case 3:for(d=i.findAll("a.internal-link"),f=0,g=d;f<g.length;f++)g[f].removeAttribute("href");return[2,i]}}))}))},t}(LI),aK={Mod:"CommandOrControl",Ctrl:"Ctrl",Meta:"Command",Alt:"Alt",Shift:"Shift"},sK=function(){function e(e){this.app=e,this.requestRender=rt(this.render.bind(this),200),this.requestUpdateViewState=rt(this.updateViewState.bind(this),200),this.app.workspace.registerEditorExtension(cK()),this.app.workspace.on("active-leaf-change",this.requestUpdateViewState),this.render(),Lt.isMacOS&&this.app.workspace.on("file-open",this.updateShareMenuItem,this)}return e.prototype.updateViewState=function(){var t=this.app.workspace.getActiveViewOfType(iK);t&&e.updateMenuItems([{itemId:"markdown:toggle-preview",eState:{checked:"preview"===t.getMode()}},{itemId:"editor:toggle-source",eState:{checked:!!t.getState().source,enabled:"preview"!==t.getMode()}}])},e.prototype.updateShareMenuItem=function(t){var n=this.app.vault.adapter;n instanceof Wd&&e.updateMenuItems([{itemId:"share-menu",eState:{sharingItem:{filePaths:t?[n.getFullPath(t.path)]:[]}}}],!0)},e.prototype.buildMenu=function(){var e=rf.menuItems,t=w(w([],Lt.isMacOS?[{label:"Obsidian",submenu:[{before:["preferences-section"],appCommand:"app:open-settings",label:"Preferences..."},{type:"separator"}]}]:[],!0),[{label:"&File",submenu:w(w([{before:["open-section"],appCommand:"file-explorer:new-file",label:e.newFile()},{before:["open-section"],appCommand:"file-explorer:new-file-in-new-pane",label:e.newFileToTheRight()},{before:["open-section"],type:"separator"},{before:["open-section"],appCommand:"switcher:open",label:e.openSwitcher()},{before:["quit"],type:"separator"},{before:["quit"],appCommand:"workspace:close",label:e.closeTab()},{before:["quit"],appCommand:"workspace:close-window",label:e.closeWindow()}],Lt.isMacOS?[{before:["quit"],type:"separator"},{id:"share-menu",before:["quit"],enabled:!1,role:"shareMenu"}]:[],!0),[{before:["quit"],appCommand:"workspace:export-pdf",label:e.exportPdf()}],!1)},{label:"&Edit",submenu:[{id:"find-section",before:["speech-section"],type:"separator"},{before:["speech-section"],appCommand:"editor:open-search",label:e.find()},{before:["speech-section"],appCommand:"editor:open-search-replace",label:e.replace()},{type:"separator"}]},{label:"&Insert",submenu:[{appCommand:"editor:insert-wikilink",label:e.insertWikilink()},{appCommand:"editor:insert-link",label:e.insertMarkdownLink()},{appCommand:"editor:insert-callout",label:e.insertCallout()},{appCommand:"editor:insert-blockquote",label:e.insertQuote()},{type:"separator"},{appCommand:"editor:insert-codeblock",label:e.insertCodeblock()},{appCommand:"editor:insert-math-block",label:e.insertMathBlock()},{type:"separator"},{type:"separator"},{appCommand:"editor:toggle-bullet-list",label:e.toggleBulletList()},{appCommand:"editor:toggle-numbered-list",label:e.toggleNumberedList()},{appCommand:"editor:toggle-checklist-status",label:e.toggleChecklist()},{type:"separator"},{appCommand:"editor:attach-file",label:e.insertAttachment()},{type:"separator"},{label:e.foldingMenu(),submenu:[{appCommand:"editor:fold-all",label:e.foldAll()},{appCommand:"editor:unfold-all",label:e.unfoldAll()},{type:"separator"},{appCommand:"editor:fold-more",label:e("fold-more")},{appCommand:"editor:fold-less",label:e("fold-less")}]}]},{label:"&Format",submenu:[{id:"heading-indeterminate",label:"Indeterminate heading level",type:"radio",visible:!1},{appCommand:"editor:set-heading-1",label:e.setHeading({level:1}),type:"radio"},{appCommand:"editor:set-heading-2",label:e.setHeading({level:2}),type:"radio"},{appCommand:"editor:set-heading-3",label:e.setHeading({level:3}),type:"radio"},{appCommand:"editor:set-heading-4",label:e.setHeading({level:4}),type:"radio"},{appCommand:"editor:set-heading-5",label:e.setHeading({level:5}),type:"radio"},{appCommand:"editor:set-heading-6",label:e.setHeading({level:6}),type:"radio"},{appCommand:"editor:set-heading-0",label:e.noHeading(),type:"radio"},{type:"separator"},{appCommand:"editor:toggle-bold",label:e.toggleBold(),type:"checkbox"},{appCommand:"editor:toggle-italics",label:e.toggleItalics(),type:"checkbox"},{appCommand:"editor:toggle-code",label:e.toggleCode(),type:"checkbox"},{appCommand:"editor:toggle-highlight",label:e.toggleHighlight(),type:"checkbox"},{appCommand:"editor:toggle-strikethrough",label:e.toggleStrikethrough(),type:"checkbox"},{appCommand:"editor:toggle-comments",label:e.toggleComment(),type:"checkbox"},{appCommand:"editor:toggle-inline-math",label:e.toggleInlineMath(),type:"checkbox"},{type:"separator"}]},{label:"&View",submenu:[{type:"checkbox",appCommand:"markdown:toggle-preview",label:e.readingView(),visible:!this.app.vault.getConfig("legacyEditor")},{type:"checkbox",appCommand:"editor:toggle-source",label:e.sourceMode(),visible:!this.app.vault.getConfig("legacyEditor")},{type:"separator"},{appCommand:"app:toggle-left-sidebar",label:e.toggleLeftSidebar()},{appCommand:"app:toggle-right-sidebar",label:e.toggleRightSidebar()},{type:"separator"},{appCommand:"workspace:split-vertical",label:e.splitRight()},{appCommand:"workspace:split-horizontal",label:e.splitDown()},{type:"separator"},{before:["developer-section"],label:e.navigateBack(),appCommand:"app:go-back"},{before:["developer-section"],label:e.navigateForward(),appCommand:"app:go-forward"},{before:["developer-section"],type:"separator"}]},{label:"&Help",role:"help",submenu:[{label:e.releaseNotes(),appCommand:"app:show-release-notes",before:["help-links"]},{appCommand:"app:show-debug-info",label:e.showDebugInfo()},{appCommand:"app:open-sandbox-vault",label:e.openSandbox()}]}],!1);return this.applyHotkeys(t),this.hideUnregisteredCommands(t),t},e.prototype.render=function(){var e=this.buildMenu();Ot((function(t){t.ipcRenderer.send("set-menu",{template:e})}))},e.prototype.getAcceleratorFromHotkey=function(e){if(!e)return"";var t=[];return lw.forEach((function(n){var i;(null===(i=e.modifiers)||void 0===i?void 0:i.contains(n))&&t.push(aK[n])})),e.key&&t.push(e.key.replace("Arrow","")),t.join("+")},e.prototype.applyHotkeys=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if("appCommand"in i){var r=this.app.hotkeyManager.getHotkeys(i.appCommand),o=this.app.hotkeyManager.getDefaultHotkeys(i.appCommand),a=(null==r?void 0:r[0])||(null==o?void 0:o[0])||null;i.accelerator=this.getAcceleratorFromHotkey(a),i.registerAccelerator=!1}"submenu"in i&&this.applyHotkeys(i.submenu)}},e.prototype.hideUnregisteredCommands=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];"appCommand"in i&&(this.app.commands.findCommand(i.appCommand)||(i.visible=!1)),"submenu"in i&&this.hideUnregisteredCommands(i.submenu)}},e.updateMenuItems=function(e,t){void 0===t&&(t=!1),Ot((function(n){n.ipcRenderer.send("update-menu-items",e,t)}))},e}();const lK=sK;function cK(){return[Ba.fromClass(function(){function e(e){this.view=e,this.update=rt(this.rawUpdate,500,!0)}return e.prototype.destroy=function(){this.update.cancel()},e.prototype.rawUpdate=function(e){var t=Hh(this.view.state),n=e.view.state.selection.ranges[0],i=t.cursor();i.moveTo(n.from,-1),i.node.parent||i.moveTo(n.from,1);var r=i.type.prop(Dd)||i.type.prop(Td)||"",o=!0,a=0,s=/\bheader-(\d)\b/.exec(r);s&&(a=Number(s[1]));var l=function(e,t){for(var n in e)e.hasOwnProperty(n)&&!c(t,e[n].node)&&delete e[n]},c=function(e,t){return e.split(" ").contains(t)},u={italics:{node:"em"},code:{node:"inline-code"},comment:{node:"comment"},bold:{node:"strong"},highlight:{node:"highlight"},strikethrough:{node:"strikethrough"}};for(l(u,r);i.to<n.to&&i.next();){if(r=i.type.prop(Dd)||i.type.prop(Td)||"",o)a!==((s=/\bheader-(\d)\b/.exec(r))?Number(s[1]):0)&&(o=!1);l(u,r)}sK.updateMenuItems([o?{itemId:"editor:set-heading-".concat(a),eState:{checked:!0}}:{itemId:"heading-indeterminate",eState:{checked:!0}},{itemId:"editor:toggle-italics",eState:{checked:!!u.italics}},{itemId:"editor:toggle-bold",eState:{checked:!!u.bold}},{itemId:"editor:toggle-code",eState:{checked:!!u.code}},{itemId:"editor:toggle-highlight",eState:{checked:!!u.highlight}},{itemId:"editor:toggle-comments",eState:{checked:!!u.comment}},{itemId:"editor:toggle-strikethrough",eState:{checked:!!u.strikethrough}}])},e}())]}var uK=function(){function e(e){this.app=e}return e.prototype.cleanup=function(){var e=this.app,t=this.app.appId+"-note-fold-";for(var n in localStorage)if(n.startsWith(t)){var i=n.substr(t.length);e.vault.getAbstractFileByPath(i)||localStorage.removeItem(n)}},e.prototype.loadPath=function(e){return this.app.loadLocalStorage("note-fold-"+e)},e.prototype.load=function(e){return e?this.loadPath(e.path):null},e.prototype.savePath=function(e,t){return this.app.saveLocalStorage("note-fold-"+e,t)},e.prototype.save=function(e,t){e&&this.savePath(e.path,t)},e}(),hK=function(){function e(e){var t=this;this.isVisible=!1,this.app=e,this.showRibbonMenu=this.showRibbonMenu.bind(this),this.onRibbonMenuClick=this.showRibbonMenu,this.containerEl=createDiv("mobile-navbar",(function(n){n.createDiv("mobile-navbar-actions",(function(n){var i;n.createDiv("mobile-navbar-action",(function(n){t.backButtonEl=vI(e,(function(){return e.workspace.activeLeaf}),"backward"),Zb(t.backButtonEl),gb(t.backButtonEl,"lucide-chevron-left"),n.appendChild(t.backButtonEl)})),n.createDiv("mobile-navbar-action",(function(n){t.forwardButtonEl=vI(e,(function(){return e.workspace.activeLeaf}),"forward"),Zb(t.forwardButtonEl),gb(t.forwardButtonEl,"lucide-chevron-right"),n.appendChild(t.forwardButtonEl)}));var r=null===(i=e.internalPlugins.getPluginById("switcher"))||void 0===i?void 0:i.instance;r&&n.createDiv("mobile-navbar-action",(function(e){Zb(e),e.createSpan("clickable-icon",(function(e){gb(e,"lucide-plus-circle")})),e.addEventListener("click",(function(){r.onOpen()}))})),n.createDiv("mobile-navbar-action",(function(n){Zb(n),n.createDiv("clickable-icon",(function(e){t.tabButtonEl=e.createDiv("mobile-navbar-tabs-action")}));n.addEventListener("click",(function(){var i=new fw;i.dom.addClass("mod-tab-list"),i.addItem((function(e){return e.setTitle(rf.commands.newTab()).setIcon("lucide-plus-circle").onClick((function(){t.app.commands.executeCommandById("workspace:new-tab")}))})).addSeparator();var r=null;e.workspace.iterateRootLeaves((function(t){r&&t.parent!==r&&i.addSeparator(),r=t.parent,i.addItem((function(n){return n.setTitle(t.view.getDisplayText()).setIcon(t.view.getIcon()).setChecked(t===e.workspace.activeLeaf).onClick((function(){e.workspace.setActiveLeaf(t)}))}))}));var o=n.getBoundingClientRect();i.setParentElement(n).showAtPosition({x:o.x,y:o.bottom,width:o.width,overlap:!0,left:!0})})),n.addEventListener("contextmenu",(function(){var e=new fw;e.addItem((function(e){return e.setTitle(rf.commands.newTab()).setIcon("lucide-plus-circle").onClick((function(){t.app.commands.executeCommandById("workspace:new-tab")}))})).addSeparator().addItem((function(e){return e.setTitle(rf.commands.closeActiveTab()).setIcon("lucide-x").onClick((function(){t.app.workspace.activeLeaf.detach()}))})).addItem((function(e){return e.setTitle(rf.commands.closeAllTabs()).setIcon("lucide-x").onClick((function(){t.app.workspace.iterateRootLeaves((function(e){return e.detach()}))}))}));var i=n.getBoundingClientRect();e.setParentElement(n).showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0,left:!0})}))})),n.createDiv("mobile-navbar-action has-longpress-menu",(function(e){Zb(e),t.ribbonMenuItemEl=e.createSpan("clickable-icon",(function(e){e.addEventListener("click",(function(e){return t.onRibbonMenuClick(e)})),e.addEventListener("contextmenu",t.showRibbonMenu)})),t.ribbonMenuFlairEl=e.createDiv("navbar-action-flair",(function(e){return gb(e,"chevrons-up-down")}))}))}))}));var n=function(){var n=0;e.workspace.iterateRootLeaves((function(){n++})),t.tabButtonEl.setText(String(n))};e.workspace.onLayoutReady((function(){n(),t.updateRibbonMenuItem()})),e.workspace.on("active-leaf-change",this.updateNavButtons,this),e.workspace.on("layout-change",n),Lt.isMobileApp&&OD.addListener("keyboardWillHide",(function(){t.show()})),this.show()}return e.prototype.updateRibbonMenuItem=function(){var e,t=this.app.workspace.leftRibbon.items,n=this.app.vault.getConfig("mobileQuickRibbonItem");n&&(e=t.find((function(e){return e.id===n}))),this.ribbonMenuFlairEl.toggle(!!e),e?(this.onRibbonMenuClick=e.callback,gb(this.ribbonMenuItemEl,e.icon)):(this.onRibbonMenuClick=this.showRibbonMenu,gb(this.ribbonMenuItemEl,"lucide-menu"))},e.prototype.showRibbonMenu=function(){for(var e=this.app.workspace.leftRibbon.items,t=this.app.vault.getConfig("mobileQuickRibbonItem"),n=new fw,i=function(e){if(e.hidden)return"continue";n.addItem((function(n){return n.setTitle(e.title).setIcon(e.icon).setChecked(t&&e.id===t).onClick((function(t){e.callback(t)}))}))},r=0,o=e;r<o.length;r++){i(o[r])}var a=this.ribbonMenuItemEl.getBoundingClientRect();n.setParentElement(this.ribbonMenuItemEl).showAtPosition({x:a.x,y:a.bottom,width:a.width,overlap:!0,left:!0})},e.prototype.updateNavButtons=function(){var e=this.app.workspace.activeLeaf;if(e){var t=e.history,n=t.backHistory,i=t.forwardHistory;this.backButtonEl.ariaDisabled=String(0===n.length),this.forwardButtonEl.ariaDisabled=String(0===i.length)}},e.prototype.show=function(){if(!this.isVisible){this.isVisible=!0;var e=this.containerEl;this.app.dom.appContainerEl.appendChild(e);var t=e.offsetHeight-1;Ie(e,new Te({duration:250}).addProp("transform","translateY(".concat(t,"px)"),""))}},e.prototype.hide=function(){this.isVisible=!1;var e=this.containerEl;Le(e),e.detach()},e}(),pK=function(){function e(e){var t=this;this.isVisible=!1,this.lastCommandIds="",this.app=e;var n=this.wrapperEl=createDiv("mobile-toolbar"),i=this.containerEl=n.createDiv("mobile-toolbar-options-container");this.optionsListEl=i.createDiv("mobile-toolbar-options-list"),Lt.isIosApp&&Lt.isPhone&&(xb(i,this.optionsListEl),i.createDiv("mobile-toolbar-floating-options",(function(e){e.createDiv("mobile-toolbar-option",(function(e){gb(e,"keyboard-toggle"),e.addEventListener("mousedown",(function(e){return e.preventDefault()})),e.addEventListener("click",(function(e){t.app.commands.executeCommandById("editor:toggle-keyboard",e),e.preventDefault()}))}))})))}return e.prototype.compileToolbar=function(){var e=this.app,t=this.optionsListEl,n=e.vault.getConfig("mobileToolbarCommands"),i=JSON.stringify(n);if(i!==this.lastCommandIds){t.empty();for(var r=e.commands,o=function(e){var n=r.findCommand(e);if(!n)return"continue";t.createDiv("mobile-toolbar-option",(function(t){var i=n.icon;i||(i="question-mark-glyph"),gb(t,i),t.addEventListener("click",(function(t){r.executeCommandById(e,t),t.preventDefault()})),t.addEventListener("mousedown",(function(e){e.preventDefault()}))}))},a=0,s=n;a<s.length;a++){o(s[a])}this.lastCommandIds=i}},e.prototype.show=function(){var e=this;if(0!==this.app.vault.getConfig("mobileToolbarCommands").length){if(this.app.mobileNavbar.hide(),!this.isVisible){this.isVisible=!0,this.compileToolbar();var t=this,n=t.app,i=t.wrapperEl,r=t.containerEl;n.dom.appContainerEl.appendChild(i),document.body.addClass("mod-toolbar-open");var o=r.offsetHeight-1;r.style.opacity="0",r.style.transform="translateY(".concat(o,"px)"),ze((function(){e.isVisible&&(Ie(r,new Te({duration:200}).addProp("transform",null,"")),Ie(r,new Te({duration:200}).addProp("opacity",null,"")))}))}}else this.hide()},e.prototype.hide=function(){this.isVisible=!1,this.wrapperEl.detach(),document.body.removeClass("mod-toolbar-open")},e}();function dK(e,t,n){return v(this,void 0,void 0,(function(){var i=this;return y(this,(function(r){switch(r.label){case 0:return[4,e.fileManager.runAsyncLinkUpdate((function(){return v(i,void 0,void 0,(function(){var i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:i=e.vault,r=0,o=t,u.label=1;case 1:return r<o.length?(a=o[r],s=a.name,"/"!==n.path&&(s=n.path+"/"+s),i.getAbstractFileByPath(s)&&(a instanceof Xy?(l=se(s),c=le(ie(s)),s=i.getAvailablePath(l,c)):a instanceof $y&&(s=i.getAvailablePath(s))),[4,i.rename(a,s)]):[3,4];case 2:u.sent(),u.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))}function fK(e,t){if(e===t)return!1;if(e instanceof $y&&e.isRoot())return!1;if(e instanceof $y&&t.path.startsWith(e.path+"/"))return!1;var n=e.name;return"/"!==t.path&&(n=t.path+"/"+n),e.path!==n}function gK(e){for(var t=[],n=0,i=e;n<i.length;n++){for(var r=i[n],o=!0,a=0,s=e;a<s.length;a++){var l=s[a];if(l!==r&&l instanceof $y&&r.path.startsWith(l.path)){o=!1;break}}o&&t.push(r)}return t}function mK(e,t){for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];fK(o,t)&&n.push(o)}return gK(n)}var vK=rf.plugins.search,yK=[{type:"operator",name:"path:",token:"path:",infoTextI18n:rf.plugins.search.labelPathOptionDescription},{type:"operator",name:"file:",token:"file:",infoTextI18n:rf.plugins.search.labelFileNameOptionDescription},{type:"operator",name:"tag:",token:"tag:",infoTextI18n:rf.plugins.search.labelTagOptionDescription},{type:"operator",name:"line:",token:"line:()",infoTextI18n:rf.plugins.search.labelLineOptionDescription},{type:"operator",name:"section:",token:"section:()",infoTextI18n:rf.plugins.search.labelSectionOptionDescription},{type:"operator",name:"[property]",token:"[]",infoTextI18n:rf.plugins.search.labelPropertyOptionDescription}],bK=function(e){function t(t,n,i,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.inputEl=null,o.showHistory=!0,o.tokens=[],o.inputEl=n,o.showHistory=i,r||(n.addEventListener("input",o.onInputChange.bind(o)),n.addEventListener("focus",o.onInputChange.bind(o))),n.addEventListener("blur",o.close.bind(o)),o.suggestEl.on("mousedown",".suggestion-item",(function(e){e.preventDefault()})),o.suggestEl.addClass("mod-search-suggestion"),o.scope.register(["Shift"],"Enter",(function(e){return o.suggestions.useSelectedItem(e),!1})),o}return f(t,e),t.prototype.renderSuggestion=function(e,t){var n=this;t.addClass("mod-complex","search-suggest-item");var i=t.createDiv("suggestion-content"),r=t.createDiv("suggestion-aux"),o=i.createDiv("suggestion-title");o.createSpan({text:e.name}),"operator"===e.type?o.createSpan({cls:"search-suggest-info-text",text:e.infoTextI18n()}):"group"===e.type&&(t.addClass("mod-group"),o.addClass("list-item-part","mod-extended"),r.createDiv("list-item-part search-suggest-icon clickable-icon",(function(t){gb(t,e.icon),aS(t,e.iconTooltip),t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.callback(),n.onInputChange()}))})))},t.prototype.getSuggestions=function(e){var t=this,n=this.inputEl;if(n.selectionStart!==n.selectionEnd)return[];var i,r=n.selectionStart,o=this.tokens=RL(e.slice(0,r));try{i=PL(o,$L)}catch(e){return[]}var a=null==i?void 0:i.getContext(r),s="";if(a){var l=a.token;["quote","text","regex"].contains(l.type)&&(s=l.content);var c=a.matcherStack[0];if((c instanceof xL||c instanceof SL)&&(a.matcherStack.shift(),c=a.matcherStack[0]),c instanceof EL){if(c.value||"colon"===l.type||"]"===l.content)return[];for(var u=[],h=$A(s),p=0,d=Object.keys(this.app.metadataTypeManager.getAllProperties());p<d.length;p++){var f=d[p];(E=h(f))&&u.push({type:"property-key",name:f,score:E.score})}return u.length>0?(u.sort((function(e,t){return t.score-e.score})),w([{type:"group",name:vK.labelPropertiesGroup(),icon:"lucide-info",iconTooltip:vK.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}],u,!0)):[]}if(c instanceof XL){h=$A(s);for(var g=[],m=0,v=Object.keys(this.app.metadataCache.getTags());m<v.length;m++){var y=v[m];(E=h(y.slice(1)))&&g.push({type:"string",name:y,score:E.score})}return g.length>0?(g.sort((function(e,t){return t.score-e.score})),w([{type:"group",name:vK.labelTagsGroup(),icon:"lucide-info",iconTooltip:vK.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}],g,!0)):[]}if(c instanceof zL){h=$A(s);for(var b=[],k=0,C=this.app.vault.getAllLoadedFiles();k<C.length;k++){var E,x=C[k];if(x instanceof $y)if(!x.isRoot())(E=h(x.path))&&b.push({type:"string",name:x.path,score:E.score})}return b.sort((function(e,t){return t.score-e.score})),b}if(a.matcherStack.length>0)return[]}var S=[],M=yK.filter((function(e){return e.name.startsWith(s)}));if(M.length>0&&(S.push({type:"group",name:vK.labelSearchOptions(),icon:"lucide-info",iconTooltip:vK.tooltipReadMore(),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}}),S.push.apply(S,M)),this.showHistory&&!e){var T=this.app.loadLocalStorage("recent-searches");if(T&&Array.isArray(T)&&T.length>0){S.push({type:"group",name:vK.labelHistory(),icon:"lucide-x",iconTooltip:vK.tooltipClearHistory(),callback:function(){t.app.saveLocalStorage("recent-searches",null)}});for(var D=0,A=T;D<A.length;D++){var L=A[D];S.push({type:"history",name:L})}}}return S},t.prototype.selectSuggestion=function(e,t){if("group"!==e.type){for(var n=this.inputEl,i=n.selectionStart,r=n.value,o=this.tokens.findLastIndex((function(e){return e.pos<=i})),a=this.tokens[o];a&&!["text","regex","quote"].contains(a.type);)o++,a=this.tokens[o];a&&i>BL(a)&&(a=null);var s=i,l=r.length;a&&(s=a.pos,l=BL(a));var c=e.name;"string"===e.type&&/[\[\]\(\)\s:]/.test(c)&&(c='"'.concat(c,'"')),"property-key"===e.type&&(c=hw.isModifier(t,"Shift")?'"'.concat(c,'"] '):'"'.concat(c,'":')),"string"===e.type?c+=" ":"operator"===e.type&&(c=e.token);var u=r.slice(0,s)+c+r.slice(l).trimStart();"string"===e.type&&(u+=" "),n.value=u,n.trigger("input");var h=s+c.length;"operator"===e.type&&e.token.match(/[\)\]]$/)&&(h-=1),n.setSelectionRange(h,h),n.trigger("input"),Lt.isMobile&&this.close()}else t.preventDefault()},t.prototype.onInputChange=function(){var e=this.inputEl,t=e.value,n=this.getSuggestions(t);n&&n.length>0?(this.suggestions.setSuggestions(n),"group"===this.suggestions.values[0].type&&this.suggestions.forceSetSelectedItem(1),this.open(),this.suggestEl.style.width=Math.max(this.inputEl.offsetWidth,300)+"px",this.setAutoDestroy(e),this.reposition(Tb(e))):this.close()},t.attach=function(e,n,i){void 0===i&&(i=!0),new t(e,n,i)},t.showOnce=function(e,n,i){void 0===i&&(i=!0),new t(e,n,i,!0).onInputChange(),n.focus()},t}(sB),wK=rf.plugins.search,kK=function(){function e(){this.id="global-search",this.name=wK.name(),this.description=wK.desc(),this.defaultOn=!0,this.app=null,this.options={}}return e.prototype.init=function(e,t){var n=this;this.app=e,t.registerGlobalCommand({id:"global-search:open",name:wK.actionOpenSearch(),icon:"lucide-search",callback:function(){var t=window.getSelection().toString(),i=e.workspace.getActiveViewOfType(iK);if(i){var r=i.getSelection();r&&(t=r)}t?t.contains(" ")&&(t='"'.concat(t.replace(/\\/,"\\\\").replace(/"/,'\\"'),'"')):t=null,n.openGlobalSearch(t)},hotkeys:[KT(["Mod","Shift"],"F")]}),t.registerViewType(CK,(function(e){return new EK(e)}))},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},[2]}}))}))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(CK,"left",{reveal:!1})},e.prototype.onEditorMenu=function(e,t){var n=this,i=t.getSelection();i&&e.addItem((function(e){return e.setTitle(wK.menuOptSearchFor({keyword:Id(i,40)})).setIcon("lucide-search").setSection("view").onClick((function(){i.contains(" ")&&(i='"'.concat(i.replace(/\\/,"\\\\").replace(/"/,'\\"'),'"')),n.openGlobalSearch(i)}))}))},e.prototype.openGlobalSearch=function(e){this.app.workspace.ensureSideLeaf(CK,"left",{reveal:!0,state:{query:e}})},e.prototype.getGlobalSearchQuery=function(){var e,t=this.app.workspace.getLeavesOfType(CK);if(0===t.length)return"";var n=t[0].getViewState();return(null===(e=null==n?void 0:n.state)||void 0===e?void 0:e.query)?n.state.query:""},e}(),CK="search",EK=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-search",n.searchContainerEl=null,n.searchInfoEl=null,n.infoEl=null,n.resultCountEl=null,n.matchingCase=!1,n.explainSearch=!1,n.showParams=!1,n.searchQuery=null,n.requestSaveSearch=rt(n.saveSearch.bind(n),5e3,!0);var i=n.containerEl,r=createDiv("search-result-container mod-global-search");n.dom=new wP(n.app,r,wK.labelNoMatches());var o=rt(n.startSearch.bind(n),0),a=i.createDiv("search-row");return new nO(a).setPlaceholder(wK.promptStartSearch()).setClass("global-search-input-container").addRightDecorator((function(e){n.matchingCaseButtonEl=e,aS(e,wK.labelMatchCase()),gb(e,"uppercase-lowercase-a"),e.addClass("clickable-icon"),e.addEventListener("click",(function(){return n.setMatchingCase(!n.matchingCase)}))})).onChange((function(e){n.dom.setFocusedItem(null),n.stopSearch(),e?o():(n.startSearch(),n.infoEl.hide())})).then((function(e){aS(e.clearButtonEl,wK.tooltipClearSearch()),n.searchComponent=e,n.searchComponent.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(Lt.isMobile&&wb(),n.startSearch())})),Lt.isMobile&&e.containerEl.createDiv("search-input-suggest-button",(function(t){gb(t,"right-triangle"),t.addEventListener("click",(function(){bK.showOnce(n.app,e.inputEl,!0)}))}))})),n.searchInfoEl=i.createDiv({cls:"search-info-container"}),n.searchInfoEl.hide(),n.filterSectionToggleEl=a.createDiv("clickable-icon",(function(e){aS(e,wK.labelToggleSearchSettings()),gb(e,"lucide-sliders-horizontal"),e.addEventListener("click",(function(e){n.toggleFilterSection()}))})),n.searchParamsContainerEl=i.createDiv("search-params",(function(e){new YI(e).setName(wK.labelCollapseResults()).setClass("mod-toggle").addToggle((function(e){n.collapseResultsToggle=e,e.setSmall().onChange((function(e){return n.setCollapseAll(e)}))})),new YI(e).setName(wK.labelMoreContext()).setClass("mod-toggle").addToggle((function(e){n.extraContextToggle=e,e.setSmall().onChange((function(e){return n.setExtraContext(e)}))})),new YI(e).setName(wK.labelExplainSearchTerm()).setClass("mod-toggle").addToggle((function(e){n.explainSearchToggle=e,e.setSmall().onChange((function(e){return n.setExplainSearch(e)}))}))})),n.searchParamsContainerEl.hide(),n.infoEl=i.createDiv("search-results-info",(function(e){e.createDiv("clickable-icon search-results-result-count",(function(e){n.resultCountEl=e.createSpan(),e.createDiv("more-options-icon",(function(e){gb(e,"lucide-more-horizontal")})),e.addEventListener("click",(function(t){if(!e.classList.contains("has-active-menu")){var i=(new fw).addSections(["action"]).addItem((function(e){return e.setSection("action").setIcon("lucide-copy").setTitle(wK.labelCopySearchResults()).onClick(n.onCopyResultsClick.bind(n))}));n.app.workspace.trigger("search:results-menu",i,n),i.setParentElement(e).showAtMouseEvent(t)}}))}));for(var t=n.sortOrderDropdown=new oO(e).onChange((function(e){n.setSortOrder(e)})),i=0,r=eP;i<r.length;i++)for(var o=0,a=r[i];o<a.length;o++){var s=a[o],l=tP[s]();t.addOption(s,l)}t.setValue("alphabetical")})),n.infoEl.hide(),n.containerEl.appendChild(r),n.scope=new cw(n.app.scope),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register([],"ArrowDown",n.onKeyArrowDownInFocus.bind(n)),n.scope.register([],"ArrowUp",n.onKeyArrowUpInFocus.bind(n)),n.scope.register([],"ArrowLeft",n.onKeyArrowLeftInFocus.bind(n)),n.scope.register([],"ArrowRight",n.onKeyArrowRightInFocus.bind(n)),n.scope.register(["Shift"],"ArrowUp",n.onKeyShowMoreBefore.bind(n)),n.scope.register(["Shift"],"ArrowDown",n.onKeyShowMoreAfter.bind(n)),n.queue=new kP(n.app,n.dom),n.addChild(n.queue),Lt.isMobile||bK.attach(n.app,n.searchComponent.inputEl,!0),n}return f(t,e),t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){return y(this,(function(t){return this.registerDomEvent(this.leaf.tabHeaderEl,"click",this.onTabHeaderClick.bind(this)),[2,e.prototype.onOpen.call(this)]}))}))},t.prototype.toggleFilterSection=function(){this.showParams=!this.showParams,this.filterSectionToggleEl.toggleClass("is-active",this.showParams),this.searchParamsContainerEl.toggle(this.showParams)},t.prototype.saveSearch=function(){var e=this.searchComponent.getValue();if(e){var t=this.app.loadLocalStorage("recent-searches");t&&Array.isArray(t)||(t=[]),t.remove(e),t.unshift(e),t.length>20&&(t=t.slice(0,20)),this.app.saveLocalStorage("recent-searches",t)}},t.prototype.getDisplayText=function(){return wK.name()},t.prototype.getViewType=function(){return CK},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.query=this.getQuery(),t.matchingCase=this.matchingCase,t.explainSearch=this.explainSearch,t.collapseAll=this.dom.collapseAll,t.extraContext=this.dom.extraContext,t.sortOrder=this.dom.sortOrder,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return c.sent(),i=t.query,r=t.matchingCase,o=t.explainSearch,a=t.collapseAll,s=t.extraContext,l=t.sortOrder,(String.isString(i)||null===i)&&(this.setQuery(i),this.searchComponent.inputEl.select()),isBoolean(r)&&this.setMatchingCase(r),isBoolean(o)&&this.explainSearchToggle.setValue(o),isBoolean(a)&&this.collapseResultsToggle.setValue(a),isBoolean(s)&&this.extraContextToggle.setValue(s),String.isString(l)&&nP.hasOwnProperty(l)&&(this.sortOrderDropdown.setValue(l),this.setSortOrder(l)),[2]}}))}))},t.prototype.setMatchingCase=function(e){e!==this.matchingCase&&(this.matchingCase=e,this.matchingCaseButtonEl.toggleClass("is-active",e),this.app.workspace.requestSaveLayout(),""!==this.searchComponent.getValue()&&this.startSearch())},t.prototype.setExplainSearch=function(e){e!==this.explainSearch&&(this.explainSearch=e,this.searchInfoEl.toggle(e),this.app.workspace.requestSaveLayout())},t.prototype.setCollapseAll=function(e){e!==this.dom.collapseAll&&(this.dom.setCollapseAll(e),this.app.workspace.requestSaveLayout())},t.prototype.setExtraContext=function(e){e!==this.dom.extraContext&&(this.dom.setExtraContext(e),this.app.workspace.requestSaveLayout())},t.prototype.onCopyResultsClick=function(e){e.preventDefault(),new xK(this.app,this.dom).open()},t.prototype.onKeyEnterInFocus=function(e){var t=this.dom.focusedItem;t&&(t instanceof bP||t instanceof vP)&&t.onResultClick(e)},t.prototype.onKeyArrowUpInFocus=function(e){e.preventDefault(),this.dom.changeFocusedItem("backwards")},t.prototype.onKeyArrowDownInFocus=function(e){e.preventDefault(),this.dom.changeFocusedItem("forwards")},t.prototype.onKeyArrowLeftInFocus=function(e){var t;if(!this.searchComponent.inputEl.isActiveElement()){e.preventDefault();var n=this.dom.focusedItem;if(n instanceof vP)n.setCollapse(!0,!0);else if(n.parent instanceof vP){n.parent.setCollapse(!0,!0);for(var i=n;null===(t=i.parent)||void 0===t?void 0:t.collapsed;)i=i.parent;this.dom.setFocusedItem(i)}else n===this.dom.infinityScroll.rootEl&&this.dom.setCollapseAll(!0)}},t.prototype.onKeyArrowRightInFocus=function(e){this.searchComponent.inputEl.isActiveElement()||(e.preventDefault(),this.dom.focusedItem===this.dom.infinityScroll.rootEl?this.dom.setCollapseAll(!1):this.dom.focusedItem instanceof vP&&this.dom.focusedItem.setCollapse(!1,!0))},t.prototype.onKeyShowMoreBefore=function(e){this.dom.focusedItem instanceof bP&&this.dom.focusedItem.showMoreBefore()},t.prototype.onKeyShowMoreAfter=function(e){this.dom.focusedItem instanceof bP&&this.dom.focusedItem.showMoreAfter()},t.prototype.setSortOrder=function(e){var t=this.dom;t.sortOrder=e,t.changed()},t.prototype.onResize=function(){this.dom.onResize()},t.prototype.startSearch=function(){var e=this;this.stopSearch();var t=this,n=t.app,i=t.dom,r=t.searchInfoEl;i.emptyResults(),this.dom.setFocusedItem(null);try{var o=this.searchComponent.getValue(),a=new ZL(n,o,this.matchingCase);if(!a.matcher)return;this.searchQuery=a,this.renderSearchInfo(a.matcher,r);var s=this.queue.start();QL(n,a.requiredInputs,s,(function(t,n){return v(e,void 0,void 0,(function(){var e;return y(this,(function(r){switch(r.label){case 0:return(e=a.match(t,n))?i.addResult(t,e,n).renderContentMatches():i.removeResult(t),i.el.offsetParent?[3,2]:[4,new Promise((function(e){return i.el.onNodeInserted(e,!0)}))];case 1:r.sent(),r.label=2;case 2:return this.infoEl.show(),this.resultCountEl.setText(wK.labelResultCount({count:i.getMatchCount()})),[2]}}))}))}))}catch(e){r.createDiv({cls:"search-info",text:e.message}),console.log(e)}this.app.workspace.requestSaveLayout(),this.requestSaveSearch()},t.prototype.stopSearch=function(){this.queue.stop(),this.searchInfoEl.empty()},t.prototype.renderSearchInfo=function(e,t){var n=this;if(t.createDiv({text:e.getInfo()}),e instanceof ML)for(var i=t.createDiv("search-info-children"),r=0,o=e.matchers;r<o.length;r++){var a=o[r];this.renderSearchInfo(a,i)}else if(e instanceof AL){i=t.createDiv("search-info-children");this.renderSearchInfo(e.matcher,i)}else e instanceof EL&&t.createDiv("search-info-children",(function(t){t.createSpan({text:"Key:"}),t.createDiv("search-info-children",(function(t){n.renderSearchInfo(e.key,t)})),e.value&&(t.createSpan({text:"Value:"}),t.createDiv("search-info-children",(function(t){n.renderSearchInfo(e.value,t)})))}))},t.prototype.setQuery=function(e){var t=this.searchComponent,n=t.inputEl;String.isString(e)?(n.value=e,t.setValue(e),n.focus(),this.startSearch()):(n.setSelectionRange(0,n.value.length),n.focus())},t.prototype.getQuery=function(){return this.searchComponent.getValue()},t.prototype.onTabHeaderClick=function(){var e=this;setTimeout((function(){e.searchComponent.inputEl.select()}),0)},t}(yI),xK=function(e){function t(t,n){var i=e.call(this,t)||this;return i.dom=n,i.titleEl.setText(wK.labelCopySearchResults()),i}return f(t,e),t.prototype.onOpen=function(){var e=this,t=this.contentEl,n=this.dom,i={},r=this.app.internalPlugins.getPluginById("global-search");r&&(i=r.instance.options),t.empty();var o,a,s,l=t.createDiv("copy-search-result-container"),c=l.createEl("textarea","copy-search-result-textarea"),u=function(){var e=n.getFiles();c.value=e.map((function(e,t){var n=o.getValue()?e.path:e.basename,l=a.getValue();"wikilink"===l?n="[[".concat(n,"]]"):"markdown"===l&&(n="[".concat(e.basename,"](").concat(n,")"));var c=s.getValue();return"-"===c?n="- ".concat(n):"*"===c?n="* ".concat(n):"num"===c&&(n="".concat(t+1,". ").concat(n)),i.showFullPath=o.getValue(),i.linkStyle=a.getValue(),i.listStyle=s.getValue(),r.saveData(i),n})).join("\n"),c.select()};new YI(l).setName(wK.optionShowPath()).setDesc(wK.optionShowPathDescription()).addToggle((function(e){e.setValue(!!i.showFullPath).onChange(u),o=e})),new YI(l).setName(wK.optionLinkStyle()).setDesc(wK.optionLinkStyleDescription()).addDropdown((function(e){e.addOption("none",wK.optionChoiceLinkStyleNone()).addOption("wikilink",wK.optionChoiceLinkStyleWikilink()).addOption("markdown",wK.optionChoiceLinkStyleMarkdownLink()).setValue(i.linkStyle||"none").onChange(u),a=e})),new YI(l).setName(wK.optionListPrefix()).setDesc(wK.optionListPrefixDescription()).addDropdown((function(e){e.addOption("none",wK.optionChoiceListStyleNone()).addOption("-",wK.optionChoiceListStyleDash()).addOption("*",wK.optionChoiceListStyleAsterisk()).addOption("num",wK.optionChoiceListStyleNumbered()).setValue(i.listStyle||"none").onChange(u),s=e})),t.createDiv("modal-button-container",(function(t){t.createEl("button",{text:wK.buttonCopyResults(),cls:"mod-cta"}).addEventListener("click",(function(){at(c.value),new CI(wK.msgSuccessfullyCopied())})),t.createEl("button",{text:rf.dialogue.buttonDone()}).addEventListener("click",(function(){return e.close()}))})),u()},t.prototype.onClose=function(){this.contentEl.empty()},t}(LI),SK=.2,MK=function(e,t,n){return void 0===n&&(n=.9),e*n+t*(1-n)},TK=function(e,t){return(MK(e>>16&255,t>>16&255)<<16)+(MK(e>>8&255,t>>8&255)<<8)+(0|MK(255&e,255&t))},DK=function(e,t){return t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom},AK=function(e,t,n){return{left:e-n,right:e+n,top:t-n,bottom:t+n}},LK=function(e){e.style.margin="0",e.style.padding="0",e.style.border="0",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden"},PK={showAttachments:!1,hideUnresolved:!1,showOrphans:!0,showTags:!1,localFile:null,localJumps:1,localInterlinks:!1,localForelinks:!0,localBacklinks:!0};function IK(e){return void 0===e&&(e=""),{type:e,links:{}}}function OK(e){if(!e)return IK();var t=IK(e.type);return e.color&&(t.color=e.color),t}var FK={tag:!0},BK={fill:"color-fill",fillFocused:"color-fill-focused",fillTag:"color-fill-tag",fillUnresolved:"color-fill-unresolved",fillAttachment:"color-fill-attachment",arrow:"color-arrow",circle:"color-circle",line:"color-line",text:"color-text",fillHighlight:"color-fill-highlight",lineHighlight:"color-line-highlight"},NK=100,RK=function(){function e(e,t,n){var i=this;this.x=null,this.y=null,this.fx=null,this.fy=null,this.forward={},this.reverse={},this.weight=0,this.color=null,this.rendered=!1,this.fadeAlpha=0,this.moveText=0,this.fontDirty=!1,this.onClick=function(e){var t=e.nativeEvent;if(2===e.button||t.instanceOf(MouseEvent)&&xe(t)){var n=i.renderer;n.onNodeRightClick&&n.onNodeRightClick(e.nativeEvent,i.id,i.type)}},this.renderer=e,this.id=t,this.type=n}return e.prototype.initGraphics=function(){var e=this;if(this.rendered)return!1;this.rendered=!0;var t,n=this.renderer;(t=this.circle=new PIXI.Graphics).eventMode="static",t.beginFill(16777215),t.drawCircle(NK,NK,NK),t.endFill(),Lt.isMobile&&(t.beginFill(16777215,1e-4),t.drawCircle(NK,NK,500),t.endFill()),t.pivot.x=NK,t.pivot.y=NK,t.cursor="pointer",t.zIndex=1,t.on("pointerdown",(function(t){return n.onPointerDown(e,t)})).on("pointerover",(function(t){return n.onPointerOver(e,t)})).on("pointerout",(function(){return n.onPointerOut()})).on("click",this.onClick).on("rightclick",this.onClick);var i=this.getFillColor();t.alpha=i.a,t.tint=i.rgb,n.hanger.addChild(t);var r=new PIXI.TextStyle(this.getTextStyle()),o=this.text=new PIXI.Text(this.getDisplayText(),r);return o.eventMode="none",o.resolution=2,o.anchor.set(.5,0),o.zIndex=2,n.hanger.addChild(o),this.fadeAlpha=0,!0},e.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var e=this,t=e.circle,n=e.highlight,i=e.text;t&&(this.circle=null,t.parent&&t.parent.removeChild(t),t.destroy()),n&&(this.highlight=null,n.parent&&n.parent.removeChild(n),n.destroy()),i&&(this.text=null,i.parent&&i.parent.removeChild(i),i.destroy())}},e.prototype.getTextStyle=function(){var e=this.renderer,t=this.getSize();return new PIXI.TextStyle({fontSize:14+t/4,fill:e.colors.text.rgb,fontFamily:'ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Microsoft YaHei Light", sans-serif',wordWrap:!0,wordWrapWidth:300,align:"center"})},e.prototype.render=function(){if(this.rendered){var e=this,t=e.renderer,n=e.x,i=e.y,r=e.circle,o=e.highlight,a=e.text,s=e.fadeAlpha,l=e.moveText,c=this.getSize(),u=this.getFillColor(),h=t.colors.text,p=t.getHighlightNode(),d=p===this,f=t.nodeScale,g=a.visible,m=SK;(!p||d||this.forward.hasOwnProperty(p.id)||this.reverse.hasOwnProperty(p.id))&&(m=1);var v=(s=this.fadeAlpha=MK(s,m))*u.a,y=t.textAlpha;y*=s,d&&(y=1),y*=h.a;var b=d?15:0;l=this.moveText=g?MK(l,b):b;var w=y>.001,k=t.viewport,C=d||!DK(k,AK(n,i,c*f+1));if(w&&(w=d||!DK(k,{left:n-300,right:n+300,top:i,bottom:i+200})),r.tint=TK(r.tint,u.rgb),r.visible=C,C&&(r.x=n,r.y=i,r.scale.x=r.scale.y=c/100*f,r.alpha=v),a.visible=w,w&&(a.x=n,a.y=i+(c+5)*f+l/t.scale,a.scale.x=a.scale.y=f,d&&t.scale<1&&(a.scale.x=a.scale.y=1/t.scale),a.alpha=y),d){o||((o=this.highlight=new PIXI.Graphics).eventMode="none",o.zIndex=1,t.hanger.addChild(o)),o.x=n,o.y=i,o.scale.x=o.scale.y=f,o.clear();var E=Math.max(1,1/t.scale/f),x=t.colors.circle;o.alpha=x.a,o.lineStyle(E,x.rgb,1),o.drawCircle(0,0,c+E/2)}else o&&(o.parent.removeChild(o),o.destroy(),this.highlight=null);this.fontDirty&&(this.fontDirty=!1,a.style=this.getTextStyle())}},e.prototype.getFillColor=function(){var e=this,t=e.renderer,n=e.type,i=e.color;if(t.getHighlightNode()===this)return t.colors.fillHighlight;if("focused"===n){var r=t.colors.fillFocused;if(r.a>0)return r}else{if(i)return i;if("tag"===n)return t.colors.fillTag;if("unresolved"===n)return t.colors.fillUnresolved;if("attachment"===n)return t.colors.fillAttachment}return t.colors.fill},e.prototype.getSize=function(){return this.renderer.fNodeSizeMult*Math.max(8,Math.min(3*Math.sqrt(this.weight+1),30))},e.prototype.getDisplayText=function(){var e=this.id;return ue(e,"md")&&(e=ae(e)),e},e.prototype.getRelated=function(){return Object.keys(this.forward).concat(Object.keys(this.reverse))},e}(),HK=function(){function e(e,t,n){this.rendered=!1,this.renderer=e,this.source=t,this.target=n}return e.prototype.initGraphics=function(){if(!this.rendered&&this.source.rendered&&this.target.rendered){this.rendered=!0;var e=this.renderer,t=this.px=new PIXI.Container;e.hanger.addChild(t);var n=this.line=new PIXI.Sprite(PIXI.Texture.WHITE);n.eventMode="none";var i=e.colors.line;n.alpha=SK*i.a,n.tint=i.rgb,t.addChild(n);var r=this.arrow=new PIXI.Graphics;r.eventMode="none";var o=e.colors.text;r.alpha=SK*o.a,r.tint=o.rgb,r.beginFill(16777215),r.moveTo(0,0),r.lineTo(-4,-2),r.lineTo(-3,0),r.lineTo(-4,2),r.lineTo(0,0),r.endFill(),r.zIndex=1,e.hanger.addChild(r)}},e.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var e=this,t=e.px,n=e.line,i=e.arrow;t&&(this.px=null,t.parent&&t.parent.removeChild(t),t.destroy(),t.visible=!1),n&&(this.line=null,n.destroy(),n.visible=!1),i&&(this.arrow=null,i.parent&&i.parent.removeChild(i),i.destroy(),i.visible=!1)}},e.prototype.render=function(){if(this.rendered){var e=this,t=e.px,n=e.line,i=e.arrow,r=e.renderer,o=e.source,a=e.target,s=r.getHighlightNode(),l=o===s||a===s,c=SK;s&&!l||(c=1);var u=c*Math.clamp(2*(r.scale-.3),0,1),h=r.colors.line;l&&(h=r.colors.lineHighlight);var p,d,f=r.colors.arrow,g=!(o.reverse.hasOwnProperty(a.id)&&o.id.localeCompare(a.id)<0),m=r.fShowArrow,v=r.fLineSizeMult/r.scale,y=r.viewport,b=AK(o.x,o.y,v),w=AK(a.x,a.y,v),k=!DK(y,(p=b,d=w,{left:Math.min(p.left,d.left),right:Math.max(p.right,d.right),top:Math.min(p.top,d.top),bottom:Math.max(p.bottom,d.bottom)}));if(c*=h.a,u*=f.a,n.alpha=MK(n.alpha,c),i.alpha=MK(i.alpha,u),g=g&&k,m=m&&k&&i.alpha>.001,n.visible=g,i.visible=m,g||m){var C=a.x-o.x,E=a.y-o.y,x=Math.sqrt(C*C+E*E),S=o.getSize()*r.nodeScale,M=a.getSize()*r.nodeScale;i.visible=m=m&&x>v,g&&(t.x=o.x+C*S/x,t.y=o.y+E*S/x,t.pivot.set(0,0),t.rotation=Math.atan2(E,C),n.x=0,n.y=-v/2,n.width=Math.max(0,x-S-M),n.height=v,n.tint=TK(n.tint,h.rgb)),i.visible=m,m&&(M+=1,i.x=a.x-C*M/x,i.y=a.y-E*M/x,i.pivot.set(0,0),i.rotation=Math.atan2(E,C),i.scale.x=i.scale.y=2*Math.sqrt(r.fLineSizeMult)/r.scale,i.tint=f.rgb)}}},e}(),VK=function(){function e(e){this.rendered=!1,this.renderer=e}return e.prototype.initGraphics=function(){var e=this.renderer;if(!this.text){var t=this.text=new PIXI.Text("Powered by Obsidian",this.getTextStyle());t.eventMode="none",t.anchor.set(1,1),t.zIndex=3,t.alpha=.5,e.px.stage.addChild(t)}},e.prototype.clearGraphics=function(){var e=this.text;e&&e.parent&&(this.text=null,e.parent.removeChild(e),e.destroy()),this.rendered=!1},e.prototype.render=function(){var e=this.renderer,t=this.text;if(t){t.visible=!e.hidePowerTag,t.alpha=e.colors.text.a;var n=e.px.renderer;t.x=n.width/n.resolution,t.y=n.height/n.resolution,this.rendered||(this.rendered=!0,this.text.style=this.getTextStyle())}},e.prototype.getTextStyle=function(){return new PIXI.TextStyle({fontSize:12,fill:this.renderer.colors.text.rgb,fontFamily:'ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Microsoft YaHei Light", sans-serif',wordWrap:!1,align:"right"})},e}(),zK=function(){function e(e,t,n,i){var r=this;this.interactiveEl=null,this.onNodeClick=null,this.onNodeRightClick=null,this.onNodeHover=null,this.onNodeUnhover=null,this.workerResults=null,this.nodeLookup={},this.nodes=[],this.links=[],this.dragNode=null,this.highlightNode=null,this.px=null,this.hanger=null,this.powerTag=null,this.scale=1,this.nodeScale=1,this.textAlpha=1,this.targetScale=1,this.panX=0,this.panY=0,this.panvX=0,this.panvY=0,this.keyboardActions={},this.panning=!1,this.width=0,this.height=0,this.viewport=null,this.zoomCenterX=0,this.zoomCenterY=0,this.hidePowerTag=!1,this.fNodeSizeMult=1,this.fLineSizeMult=1,this.fTextShowMult=1,this.fShowArrow=!1,this.mouseX=null,this.mouseY=null,this.colors={},this.renderTimer=null,this.hidePowerTag=n,this.containerEl=e,this.testCSS();var o=this.interactiveEl=e.createEl("canvas");if(e.style.padding="0",e.style.overflow="hidden",e.style.position="relative",o.style.position="absolute",o.style.left="0",o.style.top="0",LK(o),o.addEventListener("mousedown",(function(e){return e.preventDefault()})),o.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),o.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),o.addEventListener("mouseout",this.onMouseMove.bind(this)),i||(i=new Worker("/sim.js",{name:"Graph Worker"})),this.worker=i,i.onmessage=function(e){e.data.ignore||(r.workerResults=e.data,r.changed())},t){var a=this.iframeEl=e.createEl("iframe");LK(a),a.onload=this.onIframeLoad.bind(this),a.contentDocument&&this.onIframeLoad()}else{var s=e.createEl("canvas");LK(s),setTimeout((function(){try{r.initGraphics(s)}catch(e){setTimeout((function(){r.initGraphics(s)}),300)}}),50)}}return e.prototype.destroy=function(){this.worker.terminate(),this.workerResults=null,this.destroyGraphics()},e.prototype.onIframeLoad=function(){var e=this.iframeEl;e.contentWindow.onbeforeunload=this.onIframeUnload.bind(this);var t=e.contentDocument.body;LK(t),t.innerHTML="<canvas>";var n=t.firstChild;LK(n),this.destroyGraphics(),this.initGraphics(n)},e.prototype.onIframeUnload=function(){this.destroyGraphics()},e.prototype.onWheel=function(e){if(e.preventDefault(),this.px){var t=e.deltaY;1===e.deltaMode?t*=40:2===e.deltaMode&&(t*=800);var n=this.targetScale;if(n*=Math.pow(1.5,-t/120),this.targetScale=n,n<this.scale)this.zoomCenterX=0,this.zoomCenterY=0;else{var i=window.devicePixelRatio;this.zoomCenterX=e.offsetX*i,this.zoomCenterY=e.offsetY*i}this.changed()}},e.prototype.onMouseMove=function(e){"mouseout"===e.type?this.mouseX=this.mouseY=null:(this.mouseX=e.offsetX,this.mouseY=e.offsetY)},e.prototype.initGraphics=function(e){var t,n=this,i=this,r=i.iframeEl,o=i.interactiveEl,a=i.worker;PIXI.settings.RENDER_OPTIONS.hello=!1;var s=window.WebGL2RenderingContext;try{r&&r.contentWindow.WebGL2RenderingContext&&(window.WebGL2RenderingContext=r.contentWindow.WebGL2RenderingContext),t=this.px=new PIXI.Application({view:e,antialias:!0,backgroundAlpha:0,autoStart:!1})}finally{window.WebGL2RenderingContext=s}t.renderer.events.setTargetElement(o);var l=null;this.onPointerDown=function(e,i){i.nativeEvent.target===o&&(v||(n.dragNode=e,l=i.getLocalPosition(t.stage)))};var c=function(e){e.nativeEvent.instanceOf(TouchEvent)&&k(e.nativeEvent);var t=n.dragNode;if(t){var i=e.nativeEvent;l&&n.onNodeClick&&(i.instanceOf(MouseEvent)&&(0===i.button||1===i.button)&&!xe(i)||i.instanceOf(TouchEvent))&&n.onNodeClick(i,t.id,t.type),t.fx=null,t.fy=null,a.postMessage({alphaTarget:0,forceNode:{id:t.id,x:null,y:null}}),l=null,n.dragNode=null,n.changed()}};t.stage.on("pointermove",(function(e){var i=n.dragNode;if(i){if(y)return l=null,void(n.dragNode=null);if(l){var r=e.getLocalPosition(t.stage),o=r.x-l.x,s=r.y-l.y;o*o+s*s>25&&(l=null)}var c=e.getLocalPosition(n.hanger);i.fx=c.x,i.fy=c.y,a.postMessage({alpha:.3,alphaTarget:.3,run:!0,forceNode:{id:i.id,x:c.x,y:c.y}}),n.changed()}})).on("pointerup",c).on("pointerupoutside",c).eventMode="static",this.onPointerOver=function(e,t){if("touch"!==t.pointerType){n.highlightNode=e,n.changed();var i=t.nativeEvent;i.instanceOf(MouseEvent)&&(n.mouseX=i.offsetX,n.mouseY=i.offsetY),n.onNodeHover&&n.onNodeHover(i,e.id,e.type)}},this.onPointerOut=function(){n.highlightNode=null,n.changed(),n.onNodeUnhover&&n.onNodeUnhover()};var u=this.hanger=new PIXI.Container;u.eventMode="static";var h=this.powerTag=new VK(this);this.onResize(),this.resetPan();var p=new PIXI.Graphics;p.eventMode="static",p.beginFill(0),p.drawRect(0,0,1e4,1e4),p.endFill(),p.alpha=0;var d=null,f=null,g=performance.now(),m=0,v=null,y=null,b=0,w=0,k=function(e){for(var t=performance.now(),i=t-g,r=Array.prototype.slice.call(e.touches),o=null,a=null,s=0,c=r;s<c.length;s++){var u=c[s];v&&u.identifier===v.identifier&&(o=u),y&&u.identifier===y.identifier&&(a=u)}if(a&&!o&&(v=y,o=a,y=null,a=null),o?r.remove(o):r.length>0&&(o=r.first(),r.splice(0,1)),a?r.remove(a):r.length>0&&(a=r.first(),r.splice(0,1)),!l&&!n.dragNode&&v&&o&&v.identifier===o.identifier){var h=window.devicePixelRatio;if(y&&a&&y.identifier===a.identifier){var p=n.interactiveEl.getBoundingClientRect(),d=((v.clientX+y.clientX)/2-p.x)*h,f=((v.clientY+y.clientY)/2-p.y)*h,k=((o.clientX+a.clientX)/2-p.x)*h,C=((o.clientY+a.clientY)/2-p.y)*h,E=v.clientX-y.clientX,x=v.clientY-y.clientY,S=o.clientX-a.clientX,M=o.clientY-a.clientY,T=E*E+x*x,D=S*S+M*M;if(0!==T&&0!==D){var A=Math.sqrt(D/T),L=n.targetScale*A,P=n.panX+(k-d),I=n.panY+(C-f);n.zoomCenterX=k,n.zoomCenterY=C,n.setPan(P,I),n.targetScale=L,n.changed()}b=0,w=0}else{var O=(o.clientX-v.clientX)*h,F=(o.clientY-v.clientY)*h;m=MK(m,i,.8),g=t,b=MK(b,O,.8),w=MK(w,F,.8),n.setPan(n.panX+O,n.panY+F),n.changed()}}else m=MK(m,i,.8),i<100&&(n.panvX=b/m,n.panvY=w/m),b=b=0;v=o,y=a},C=function(e){if(e.nativeEvent.instanceOf(TouchEvent))k(e.nativeEvent);else{d=null,document.body.removeClass("is-grabbing"),n.panning=!1;var t=performance.now()-g;m=MK(m,t,.8),t>100?n.panvX=n.panvY=0:(n.panvX/=m,n.panvY/=m)}};p.on("pointerdown",(function(e){e.nativeEvent.instanceOf(TouchEvent)?k(e.nativeEvent):(d=e.getLocalPosition(t.stage),f={x:u.x,y:u.y},document.body.addClass("is-grabbing"),n.panning=!0)})),t.stage.on("pointermove",(function(e){if(e.nativeEvent.instanceOf(TouchEvent))k(e.nativeEvent);else if(d){var i=e.getLocalPosition(t.stage),r=f.x+i.x-d.x,o=f.y+i.y-d.y,a=performance.now();m=MK(m,a-g,.8),g=a,n.panvX=MK(n.panvX,r-n.panX,.8),n.panvY=MK(n.panvY,o-n.panY,.8),n.setPan(r,o),n.changed()}})).on("pointerup",C).on("pointerupoutside",C).eventMode="static",t.stage.addChild(p),t.stage.addChild(u),h.initGraphics(),this.updateZoom(),this.renderCallback=function(){if(n.renderTimer=null,n.px&&!(n.idleFrames>60)){var e=n,i=e.nodes,r=e.links,o=n.workerResults;if(o){var a=o.id,s=o.buffer,l=!0;if(s instanceof ArrayBuffer)n.workerResults=null;else{var c=new Uint32Array(s,s.byteLength-4,1);c[0]===o.v?l=!1:o.v=c[0]}if(l)for(var p=new Float32Array(s),d=0;d<a.length;d++){(_=n.nodeLookup[a[d]])&&(_.x=p[2*d],_.y=p[2*d+1],_.fx&&(_.x=_.fx),_.fy&&(_.y=_.fy))}}var f=n,g=f.panning,m=f.panvX,v=f.panvY,y=f.keyboardActions,b=y.shift;if(!g){n.panX+=1e3*m/60,n.panY+=1e3*v/60;var w=0,k=0;y.up&&(k+=1),y.down&&(k-=1),y.left&&(w+=1),y.right&&(w-=1),0===w&&0===k||(n.idleFrames=0);var C=b?3:1;n.panvX=MK(m,w*C,.9),n.panvY=MK(v,k*C,.9)}var E=1+(b?.1:.03),x=!1;if(y.zoomin&&(n.targetScale*=E,x=!0),y.zoomout&&(n.targetScale/=E,x=!0),x){n.idleFrames=0;var S=window.devicePixelRatio;n.zoomCenterX=n.width/2*S,n.zoomCenterY=n.height/2*S}n.updateZoom();var M=n.scale,T=-n.panX/M,D=-n.panY/M,A=T+n.width/M*window.devicePixelRatio,L=D+n.height/M*window.devicePixelRatio;n.viewport={left:T,right:A,top:D,bottom:L};for(var P=(T+A)/2,I=(D+L)/2,O=[],F=function(e,t){return e.dist-t.dist},B=0,N=i;B<N.length;B++){if(!(_=N[B]).rendered){var R=(J=_.x-P)*J+(ee=_.y-I)*ee;(O.length<50||R<O.last().dist)&&(O.push({node:_,dist:J*J+ee*ee}),O.sort(F),O.length>50&&O.pop())}}if(O.length>0){for(var H=0,V=O;H<V.length;H++){V[H].node.initGraphics()}n.idleFrames=0}for(var z=0,q=r;z<q.length;z++){q[z].initGraphics()}for(var U=0,W=i;U<W.length;U++){var _;(_=W[U]).render()}for(var j=0,G=r;j<G.length;j++){G[j].render()}h.render(),u.sortChildren(),t.render(),n.idleFrames++,n.queueRender();var K=n,Y=K.mouseX,X=K.mouseY,$=K.highlightNode;if(null!==Y&&null!==X&&$){var Z=(Y*window.devicePixelRatio-n.panX)/M,Q=(X*window.devicePixelRatio-n.panY)/M,J=$.x-Z,ee=$.y-Q,te=$.getSize()*n.nodeScale+2;J*J+ee*ee>te*te&&(n.highlightNode=null,n.idleFrames=0,n.onNodeUnhover&&n.onNodeUnhover())}}},this.queueRender()},e.prototype.destroyGraphics=function(){var e=this,t=e.iframeEl,n=e.px,i=e.links,r=e.nodes,o=e.powerTag;this.hanger=null;for(var a=0,s=i;a<s.length;a++){s[a].clearGraphics()}for(var l=0,c=r;l<c.length;l++){c[l].clearGraphics()}o&&(this.powerTag=null,o.clearGraphics()),n&&(n.renderer.events.setTargetElement(null),t&&document.body.contains(t)&&t.contentDocument&&n.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.px=null),this.containerEl.win.cancelAnimationFrame(this.renderTimer),this.renderTimer=null,this.renderCallback=null,document.body.removeClass("is-grabbing")},e.prototype.zoomTo=function(e,t){this.targetScale=e,t?(this.zoomCenterX=t.x,this.zoomCenterY=t.y):this.zoomCenterX=this.zoomCenterY=0},e.prototype.onResize=function(){var e=this,t=e.px,n=e.hanger,i=e.containerEl,r=e.interactiveEl,o=window.devicePixelRatio,a=i.clientWidth,s=i.clientHeight;if(this.width=a,this.height=s,t){var l=Math.round(a*o),c=Math.round(s*o),u=t.renderer,h=u.width,p=u.height;u.view.style.width=a+"px",u.view.style.height=s+"px",u.resize(l,c),r.width=a,r.height=s,t.renderer.events.resolutionChange(1/o),n&&this.setPan(this.panX+(l-h)/2,this.panY+(c-p)/2)}this.changed()},e.prototype.resetPan=function(){var e=window.devicePixelRatio;this.setPan(this.width/2*e,this.height/2*e)},e.prototype.setData=function(e){for(var t=this,n=t.nodes,i=t.nodeLookup,r=t.links,o=e.nodes,a={},s=[],l=[],c=!1,u=!1,h=0,p=0,d=n;p<d.length;p++){var f=d[p];o.hasOwnProperty(f.id)?(h=Math.max(h,f.x*f.x+f.y*f.y),a[f.id]=!1):(s.push(f),c=!0)}var g=Math.sqrt(h),m=[];for(var v in o)if(o.hasOwnProperty(v)){var y=o[v];if(i.hasOwnProperty(v)){var b=y.color||null;(f=i[v]).color!==b&&(f.color=b,u=!0),f.type!==y.type&&(f.type=y.type,u=!0)}else{(f=new RK(this,v,y.type)).color=y.color||null,n.push(f),i[v]=f,c=!0,m.push(f)}}for(var v in o)if(o.hasOwnProperty(v)&&i.hasOwnProperty(v)){f=i[v];var w=o[v].links;for(var k in f.forward)f.forward.hasOwnProperty(k)&&(w.hasOwnProperty(k)||(l.push(f.forward[k]),c=!0));for(var k in w)if(w.hasOwnProperty(k)&&!f.forward.hasOwnProperty(k)&&i.hasOwnProperty(k)){var C=i[k],E=new HK(this,f,C);r.push(E),f.forward[C.id]=E,C.reverse[f.id]=E,c=!0}}for(var x=function(e){e.clearGraphics(),r.remove(e),delete e.source.forward[e.target.id],delete e.target.reverse[e.source.id]},S=0,M=l;S<M.length;S++){x(E=M[S])}for(var T=0,D=s;T<D.length;T++){(f=D[T]).clearGraphics(),n.remove(f),delete i[f.id];var A=f.forward,L=f.reverse;for(var k in A)A.hasOwnProperty(k)&&x(A[k]);for(var k in L)L.hasOwnProperty(k)&&x(L[k])}var P=m.length;if(P>0)for(var I=60*P*60,O=Math.sqrt(I/Math.PI+g*g)-g,F=Math.sqrt(I),B=0,N=m;B<N.length;B++){for(var R=0,H=0,V=0,z=0,q=(f=N[B]).getRelated();z<q.length;z++){var U=q[z];if(i.hasOwnProperty(U)){var W=i[U];null!==W.x&&null!==W.y&&(R+=W.x,H+=W.y,V++)}}if(V>0)f.x=R/V+(Math.random()-.5)*F,f.y=H/V+(Math.random()-.5)*F;else{var _=2*Math.random()*Math.PI,j=g+Math.sqrt(Math.random())*O;f.x=j*Math.cos(_),f.y=j*Math.sin(_)}a[f.id]=[f.x,f.y]}var G=e.weights;for(var v in i)if(i.hasOwnProperty(v)){var K=(f=i[v]).weight;K=G?G.hasOwnProperty(v)?G[v]:0:f.getRelated().length,f.weight!==K&&(f.weight=K,c=!0)}if(c){for(var Y=[],X=0,$=r;X<$.length;X++){E=$[X];Y.push([E.source.id,E.target.id])}this.worker.postMessage({nodes:a,links:Y,alpha:.3,run:!0}),this.changed()}else u&&this.changed()},e.prototype.setRenderOptions=function(e){var t=e.nodeSizeMultiplier,n=e.lineSizeMultiplier,i=e.showArrow,r=e.textFadeMultiplier;Number.isNumber(t)&&(this.fNodeSizeMult=t),Number.isNumber(n)&&(this.fLineSizeMult=n),Number.isNumber(r)&&(this.fTextShowMult=r),isBoolean(i)&&(this.fShowArrow=i),this.changed()},e.prototype.setForces=function(e){this.worker.postMessage({forces:e,alpha:.3,run:!0})},e.prototype.getHighlightNode=function(){return this.dragNode||this.highlightNode},e.prototype.updateZoom=function(){var e=this,t=e.scale,n=e.targetScale,i=e.panX,r=e.panY;if((t>(n=this.targetScale=Math.min(8,Math.max(1/128,n)))?t/n:n/t)-1>=.01){var o=this.zoomCenterX,a=this.zoomCenterY;if(0===o&&0===a){var s=window.devicePixelRatio;o=this.width/2*s,a=this.height/2*s}var l={x:(o-i)/t,y:(a-r)/t};t=MK(t,n,.85),i-=l.x*t+i-o,r-=l.y*t+r-a,this.changed()}this.setPan(i,r),this.setScale(t)},e.prototype.setPan=function(e,t){var n=this.hanger;this.panX=e,this.panY=t,n&&(n.x=e,n.y=t)},e.prototype.setScale=function(e){var t=this.hanger;this.scale=e,this.nodeScale=Math.sqrt(1/e);var n=Math.log(e)/Math.log(2);this.textAlpha=Math.clamp(n+1-this.fTextShowMult,0,1),t&&(t.scale.x=t.scale.y=e)},e.prototype.changed=function(){this.idleFrames=0,this.queueRender()},e.prototype.queueRender=function(){!this.renderTimer&&this.renderCallback&&(this.renderTimer=this.containerEl.win.requestAnimationFrame(this.renderCallback))},e.prototype.testCSS=function(){var e=function(e){var t=document.body.createDiv({cls:"graph-view "+e}),n=getComputedStyle(t),i=n.color,r=n.opacity;t.detach();var o=RI(i),a=parseFloat(r);return isNaN(a)&&(a=1),o?{a:a*o.a,rgb:o.r<<16|o.g<<8|o.b}:{a,rgb:8947848}};for(var t in BK)BK.hasOwnProperty(t)&&(this.colors[t]=e(BK[t]));for(var n=0,i=this.nodes;n<i.length;n++){i[n].fontDirty=!0}var r=this.powerTag;r&&(r.rendered=!1),this.changed()},e.prototype.getTransparentScreenshot=function(){var e=this.px;return e.render(),e.view},e.prototype.getBackgroundScreenshot=function(){var e=this.getTransparentScreenshot(),t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.fillStyle="#FFFFFF",n.fillRect(0,0,e.width,e.height),n.drawImage(e,0,0),t},e.copyToClipboard=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,At(e,t)];case 1:return[4,st(n.sent())];case 2:return n.sent(),[2]}}))}))},e}();var qK=rf.plugins.graphView,UK=function(){function e(){this.id="graph",this.name=qK.name(),this.description=qK.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(qK.actionOpen(),"lucide-git-fork",(function(e){n.openGraphView(hw.isModEvent(e))})),t.registerGlobalCommand({id:"graph:open",name:qK.actionOpen(),icon:"lucide-git-fork",callback:this.openGraphView.bind(this),hotkeys:[KT(["Mod"],"G")]}),t.registerGlobalCommand({id:"graph:open-local",name:qK.actionOpenLocal(),icon:"lucide-git-fork",checkCallback:this.openLocalGraph.bind(this)}),t.registerGlobalCommand({id:"graph:animate",name:qK.actionTimelapse(),icon:"lucide-wand",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(_K);if(t)return e||t.dataEngine.renderProgression(),!0}}),t.registerViewType(WK,(function(e){return new _K(e)})),t.registerViewType(jK,(function(e){return new GK(e)}))},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},e.workspace.registerHoverLinkSource("graph",{display:this.name,defaultMod:!0}),[2]}}))}))},e.prototype.onDisable=function(e){e.workspace.unregisterHoverLinkSource("graph")},e.prototype.onFileMenu=function(e,t,n,i){var r=this;t instanceof Xy&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(qK.actionOpenLocal()).setIcon("lucide-git-fork").onClick((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:jK,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openGraphView=function(e){this.app.workspace.getLeaf(e).setViewState({type:WK,active:!0,state:{}})},e.prototype.openLocalGraph=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:jK,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e.prototype.saveOptions=function(){this.plugin.saveData(this.options)},e}(),WK="graph",_K=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-git-fork",n.navigation=!0;var i=n.renderer=new zK(n.contentEl,!Lt.isIosApp,!0);return n.dataEngine=new XK(t.app,n,i),n}return f(t,e),t.prototype.getDisplayText=function(){return qK.name()},t.prototype.onload=function(){this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.dataEngine.load(),this.update();var e=this.app.internalPlugins.getPluginById("graph").instance;this.dataEngine.setOptions(e.options)},t.prototype.getViewType=function(){return WK},t.prototype.onClose=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return this.renderer.destroy(),[2]}))}))},t.prototype.onResize=function(){this.renderer.onResize()},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setSection("action").setTitle(qK.actionCopyScreenshot()).setIcon("lucide-image").onClick((function(){return v(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.renderer.getTransparentScreenshot(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,zK.copyToClipboard(e,"image/png")];case 2:return n.sent(),new CI(qK.msgScreenshotCopied()),[3,4];case 3:return t=n.sent(),new CI(t.toString()),[3,4];case 4:return[2]}}))}))}))})),this.app.workspace.trigger("leaf-menu",t,this.leaf)},t.prototype.update=function(){this.dataEngine.render()},t.prototype.onOptionsChange=function(){var e=this.app.internalPlugins.getPluginById("graph").instance;e.options=this.dataEngine.getOptions(),e.saveOptions()},t}(bI),jK="localgraph",GK=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-git-fork",n.renderedFile=null;var i=n.renderer=new zK(n.contentEl,!Lt.isIosApp,!0);return n.engine=new XK(t.app,n,i),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Lt.isMobile?qK.name():qK.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return jK},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.options=this.engine.getOptions(),t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return t.options&&this.engine.setOptions(t.options),[4,e.prototype.setState.call(this,t,n)];case 1:return i.sent(),[2]}}))}))},t.prototype.load=function(){e.prototype.load.call(this),this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.engine.load()},t.prototype.onClose=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return this.renderer.destroy(),[2]}))}))},t.prototype.onFileChanged=function(e){e===this.file&&this.requestUpdate()},t.prototype.onResize=function(){this.renderer.onResize()},t.prototype.update=function(){var e=this,t=e.file,n=e.renderer,i=e.engine;e.renderedFile!==t&&(n.resetPan(),this.renderedFile=t);var r=i.options;n.highlightNode=null,r.localFile=t?t.path:null,i.render()},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),t.addItem((function(e){return e.setSection("action").setTitle(qK.actionCopyScreenshot()).setIcon("lucide-image").onClick((function(){return v(i,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:e=this.renderer.getTransparentScreenshot(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,zK.copyToClipboard(e,"image/png")];case 2:return n.sent(),new CI(qK.msgScreenshotCopied()),[3,4];case 3:return t=n.sent(),new CI(t.toString()),[3,4];case 4:return[2]}}))}))}))}))},t.prototype.onOptionsChange=function(){this.app.workspace.requestSaveLayout()},t}(KG);function KK(e,t){return(Math.pow(t,1-e)-t)/(1-t)}function YK(e,t){return 1-Math.log(e*(1-t)+t)/Math.log(t)}var XK=function(){function e(e,t,n){var i=this;this.options=Object.assign({},PK),this.searchQueries=null,this.fileFilter={},this.hasFilter=!1,this.queue=null,this.lastHoverLink=null,this.hoverPopover=null,this.requestUpdateSearch=rt(this.updateSearch.bind(this),250,!0),this.progression=0,this.progressionSpeed=20,this.currentFocusFile="",this.app=e,this.view=t,this.renderer=n,n.onNodeClick=this.onNodeClick.bind(this),n.onNodeRightClick=this.onNodeRightClick.bind(this),n.onNodeHover=this.onNodeHover.bind(this),n.onNodeUnhover=this.onNodeUnhover.bind(this),this.onOptionsChange=rt((function(){return t.onOptionsChange()}),100,!0);var r=this.controlsEl=n.containerEl.createDiv("graph-controls");r.createDiv("clickable-icon graph-controls-button mod-close",(function(e){gb(e,"lucide-x"),aS(e,rf.interface.menu.close()),e.addEventListener("click",(function(){r.addClass("is-close"),i.onOptionsChange()}))})),r.createDiv("clickable-icon graph-controls-button mod-open",(function(e){gb(e,"lucide-settings"),aS(e,qK.tooltipOpenGraphSettings()),e.addEventListener("click",(function(){r.removeClass("is-close"),i.onOptionsChange()}))})),t instanceof GK||r.createDiv("clickable-icon graph-controls-button mod-animate",(function(e){gb(e,"lucide-wand-2"),aS(e,qK.tooltipStartTimelapseAnimation()),e.addEventListener("click",(function(){i.renderProgression()}))})),r.createDiv({cls:"clickable-icon graph-controls-button mod-reset"},(function(e){gb(e,"lucide-rotate-ccw"),aS(e,rf.interface.tooltipRestoreDefaultSettings()),e.addEventListener("click",(function(){i.filterOptions.setDefaultOptions(),i.colorGroupOptions.setColorQueries([]),i.displayOptions.setDefaultOptions(),i.forceOptions.setDefaultOptions()}))})),this.filterOptions=new ZK(this,t instanceof GK),this.colorGroupOptions=new QK(this),this.displayOptions=new eY(this),this.forceOptions=new nY(this),this.filterOptions.setDefaultOptions(),this.colorGroupOptions.setColorQueries([]),this.displayOptions.setDefaultOptions(),this.forceOptions.setDefaultOptions()}return e.prototype.load=function(){var e=this,t=this.app,n=this.view,i=t.vault,r=t.workspace,o=t.metadataCache;n.registerEvent(i.on("create",this.onFileChanged,this)),n.registerEvent(i.on("modify",this.onFileChanged,this)),n.registerEvent(i.on("rename",this.recomputeFile,this)),n.registerEvent(o.on("resolve",this.recomputeFile,this)),n.registerEvent(r.on("css-change",this.onCssChange,this)),n.registerEvent(r.on("file-open",this.onFileOpen,this));var a=0;n.registerInterval(window.setInterval((function(){e.renderer.targetScale!==a&&(a=e.renderer.targetScale,e.onOptionsChange())}),2e3));var s={38:"up",40:"down",37:"left",39:"right",187:"zoomin",189:"zoomout"},l=function(t){var i=e.renderer;i.keyboardActions.shift=hw.isModifier(t,"Shift");var o="keydown"===t.type;if(o){var a=e.view.containerEl.doc;if(t.repeat||t.defaultPrevented||r.activeLeaf!==n.leaf||a.activeElement!==a.body)return}if(s.hasOwnProperty(t.which)){var l=s[t.which];i.keyboardActions[l]=o,i.changed()}};n.registerDomEvent(window,"keydown",l),n.registerDomEvent(window,"keyup",l)},e.prototype.onCssChange=function(){this.renderer.testCSS()},e.prototype.updateSearch=function(){var e=[],t=this.filterOptions.search.getValue();t&&e.push({query:t,color:null}),e=e.concat(this.colorGroupOptions.getColoredQueries()),this.setQuery(e),this.onOptionsChange()},e.prototype.setQuery=function(e){var t=this;this.queue&&(this.queue.cancel(),this.queue=null),this.hasFilter=!1;for(var n=[],i={},r=0,o=e;r<o.length;r++){var a=o[r],s=new ZL(this.app,a.query,!1);s.matcher||(s=null),s&&(n.push({query:s,color:a.color}),s.requiredInputs&&Object.assign(i,s.requiredInputs),a.color||(this.hasFilter=!0))}if(0===n.length&&(n=null),this.searchQueries=n,!n)return this.fileFilter={},void this.render();var l=this.fileFilter={},c=this.queue=new qD({onStart:function(){t.filterOptions.startSearch()},onStop:function(){t.render(),t.filterOptions.stopSearch()},onCancel:function(){t.queue=null,t.filterOptions.stopSearch()}}),u=this.app;c.addList(u.vault.getFiles());var h=performance.now(),p=!0;QL(u,i,c,(function(e,t){for(var i=!0,r=null,o=0,a=n;o<a.length;o++){var s=a[o],c=s.query.match(e,t);if(!c&&!s.color){i=!1;break}if(c&&s.color){r=s.color;break}}l[e.path]=!!i&&(r||!0),p=p||i}),{beforePause:function(e){e<h+333||(h=e,p&&t.render(),p=!1)}})},e.prototype.render=function(){var e=this,t=this,n=t.app,i=t.view,r=t.renderer,o=t.searchQueries,a=t.fileFilter,s=t.options,l=i instanceof GK;if(!l||s.localFile){l&&(this.progression=0);var c=function(e,t,n,i){var r=e.resolvedLinks,o=e.unresolvedLinks,a=e.vault,s=t.showAttachments,l=t.hideUnresolved,c=t.showTags,u={};if(t.showTags){var h=e.getTags();for(var p in h)h.hasOwnProperty(p)&&(u[p.toLowerCase()]=p)}var d={},f=0,g=e.getCachedFiles();if(i){for(var m={},v=0,y=g;v<y.length;v++){var b=y[v],w=a.getAbstractFileByPath(b);m[b]=w instanceof Xy?Math.min(w.stat.ctime,w.stat.mtime):1/0}g.sort((function(e,t){return m[e]-m[t]}))}for(var k="",C=0,E=g;C<E.length;C++){var x=E[C],S="md"!==le(x);if(s||!S){var M=S?"attachment":"",T=n(x,M);if(T&&!e.isUserIgnored(x)){var D=d[x]=IK(M),A=D.links;if(t.showOrphans&&(f===i&&(k=x),f++),isBoolean(T)||(D.color=T),r.hasOwnProperty(x)){var L=r[x];for(var P in L)if(L.hasOwnProperty(P)){var I="md"!==le(P);if(s||!I)n(P,I?"attachment":"")&&(!i||f<i?A[P]=!0:f===i&&(k=x),f++)}}if(!l&&o.hasOwnProperty(x)){L=o[x];for(var P in L)L.hasOwnProperty(P)&&n(P,"unresolved")&&(!i||f<i?(A[P]=!0,d.hasOwnProperty(P)||(d[P]=IK("unresolved"))):f===i&&(k=x),f++)}if(c)if((h=Vx(e.getCache(x)))&&h.length>0)for(var O=0,F=h;O<F.length;O++){if(n(p=F[O],"tag")){var B=u[p.toLowerCase()]||p;!i||f<i?A[B]=!0:f===i&&(k=x),f++,d.hasOwnProperty(B)||(d[B]=IK("tag"))}}}}}if(i&&k){var N=g.indexOf(k);if(-1!==N)for(var R=N+1;R<g.length;R++)delete d[g[R]]}return{nodes:d,numLinks:f}}(n.metadataCache,s,(function(t,n){return!o||(""===n?t===s.localFile||(a.hasOwnProperty(t)?a[t]:!e.hasFilter):"tag"===n?o.every((function(e){return!!e.color||!!e.query.matchTag(t)})):"attachment"!==n||o.every((function(e){return!!e.color||!!e.query.matchFilepath(t)})))}),this.progression),u=c.numLinks;if(s.localFile&&(c=function(e,t){var n=e.nodes,i={},r={},o=t.localFile,a=t.localJumps,s=t.localInterlinks,l=t.localForelinks,c=t.localBacklinks;if(r[o]=30,!n.hasOwnProperty(o))return i[o]=IK(),{nodes:i,weights:r};i[o]=IK(n[o].type);for(var u=function(e){var t={};for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];if("tag"!==a.type){var s=a.links;for(var u in s)if(s.hasOwnProperty(u)){var h=i[o];l&&i.hasOwnProperty(o)&&!i.hasOwnProperty(u)&&!FK.hasOwnProperty(h.type)?(t[u]=t[u]||OK(n[u]),h.links[u]=!0):c&&i.hasOwnProperty(u)&&!i.hasOwnProperty(o)&&!FK.hasOwnProperty(i[u].type)&&(t[o]=t[o]||OK(n[o]),t[o].links[u]=!0)}}}for(var p in t)t.hasOwnProperty(p)&&(i[p]=t[p],r[p]=e)},h=30/a,p=0;p<a;p++)u(30-h*(p+1));if(s)for(var d in i)i.hasOwnProperty(d)&&n.hasOwnProperty(d)&&(i[d]=n[d]);return{nodes:i,weights:r}}(c,s)),s.showOrphans||function(e){var t=e.nodes,n={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i].links;for(var o in r)r.hasOwnProperty(o)&&i!==o&&(n[o]=!0)}for(var i in t)if(t.hasOwnProperty(i)){r=t[i].links;var a=!1;for(var o in r)if(r.hasOwnProperty(o)&&t.hasOwnProperty(o)&&i!==o){a=!0;break}a||n[i]||delete t[i]}}(c),this.currentFocusFile){var h=c.nodes[this.currentFocusFile];h&&(h.type="focused")}return r.setData(c),u}r.setData({nodes:{}})},e.prototype.renderProgression=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:this.progression=1,e=this.render(),this.progressionSpeed=Math.clamp(.5*Math.sqrt(e),5,100),t=Date.now(),i.label=1;case 1:return this.progression>0?(n=this.progression,[4,new Promise((function(e){return dt(e,0)}))]):[3,3];case 2:return i.sent(),n!==this.progression?[3,3]:(n=1+Math.floor(this.progressionSpeed*(Date.now()-t)/1e3))===this.progression||(this.progression=n,this.render())?[3,1]:[3,3];case 3:return[2]}}))}))},e.prototype.onFileChanged=function(e){"md"!==e.extension&&this.recomputeFile(e)},e.prototype.recomputeFile=function(e){var t=this.queue;t&&t.add(e)},e.prototype.onFileOpen=function(e){var t=e?e.path:"";t!==this.currentFocusFile&&(this.currentFocusFile=t,this.render())},e.prototype.onNodeClick=function(e,t,n){var i=this.app;if("tag"!==n)i.workspace.openLinkText(t,"",hw.isModEvent(e));else{var r=i.internalPlugins.getPluginById("global-search");r&&r.instance.openGlobalSearch("tag:"+t)}},e.prototype.onNodeRightClick=function(e,t,n){var i=this,r=this.app;if("tag"!==n){var o=r.metadataCache.getFirstLinkpathDest(t,"");if(o&&e.instanceOf(MouseEvent)){var a=(new fw).addSections(["title","open","action","view","info","","danger"]);a.addItem((function(e){return e.setSection("title").setTitle(de(o.path)).setIsLabel(!0)})),a.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return v(i,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,this.app.workspace.getLeaf(hw.isModEvent(e)||!0).openLinkText(t,"")];case 1:return n.sent(),[2]}}))}))}))})),this.app.workspace.trigger("file-menu",a,o,"graph-context-menu",this.view.leaf),a.showAtMouseEvent(e)}}else{var s=r.internalPlugins.getPluginById("global-search");s&&s.instance.openGlobalSearch("tag:"+t)}},e.prototype.onNodeHover=function(e,t,n){if(this.onNodeUnhover(),e.instanceOf(MouseEvent)){var i=this,r=i.app,o=i.hoverPopover,a=i.lastHoverLink;if(""===n||"focused"===n||"attachment"===n){if(o&&o.state!==x_.Hidden&&a===t)return o.onTarget=!0,void o.transition();this.lastHoverLink=t,r.workspace.trigger("hover-link",{event:e,source:"graph",hoverParent:this,targetEl:null,linktext:t})}}},e.prototype.onNodeUnhover=function(){var e=this.hoverPopover;e&&(e.onTarget=!1,e.transition())},e.prototype.getOptions=function(){var e={};return this.filterOptions.getOptions(e),this.colorGroupOptions.getOptions(e),this.displayOptions.getOptions(e),this.forceOptions.getOptions(e),e.scale=this.renderer.targetScale,e.close=this.controlsEl.hasClass("is-close"),e},e.prototype.setOptions=function(e){e&&(this.filterOptions.setOptions(e),this.colorGroupOptions.setOptions(e),this.displayOptions.setOptions(e),this.forceOptions.setOptions(e),e.scale&&this.renderer.zoomTo(e.scale),e.close&&this.controlsEl.toggleClass("is-close",e.close),this.render())},e}(),$K=function(e){function t(t,n,i){var r=e.call(this)||this;return r.engine=null,r.optionListeners={},r.engine=t,r.el.addClass("graph-control-section","mod-".concat(n)),r.setCollapsible(!0),r.setCollapsed(!0,!1),r.innerEl.createEl("header",{cls:"graph-control-section-header",text:i}),r.optionListeners["collapse-"+n]=function(e){return void 0!==e&&isBoolean(e)&&r.setCollapsed(e,!1),r.collapsed},r}return f(t,e),t.prototype.onSelfClick=function(e){return this.toggleCollapsed(!0)},t.prototype.updateCollapsed=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.engine.onOptionsChange(),[2]}}))}))},t.prototype.setOptions=function(e){var t=this.optionListeners;for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&t[n](e[n])},t.prototype.getOptions=function(e){var t=this.optionListeners;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n]();void 0!==i&&(e[n]=i)}},t}(mO),ZK=function(e){function t(t,n){var i=e.call(this,t,"filter",qK.labelFilters())||this;i.searchSetting=null,t.controlsEl.appendChild(i.el);var r=i.childrenEl;return(i.searchSetting=new YI(r).addSearch((function(e){return e.setPlaceholder(qK.promptFilterNodes()).setValue("").onChange((function(){i.engine.requestUpdateSearch()})).then((function(e){i.search=e,aS(e.clearButtonEl,rf.plugins.search.tooltipClearSearch()),i.optionListeners.search=function(t){return void 0!==t&&(e.setValue(t),i.engine.requestUpdateSearch()),e.getValue()},e.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||i.engine.updateSearch()})),bK.attach(t.app,e.inputEl,!1)}))}))).settingEl.addClass("mod-search-setting"),n&&(new YI(r).setName(qK.optionDepth()).setTooltip(qK.optionDepthDescription()).setClass("mod-local-jumps").setClass("mod-slider").addSlider((function(e){return e.setLimits(1,5,1).setValue(t.options.localJumps).setDynamicTooltip().registerOptionListener(i.optionListeners,"localJumps").onChange((function(e){t.options.localJumps=e,t.render(),t.onOptionsChange()}))})),new YI(r).setName(qK.optionBacklinks()).setTooltip(qK.optionBacklinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localBacklinks).registerOptionListener(i.optionListeners,"localBacklinks").onChange((function(e){t.options.localBacklinks=e,t.render(),t.onOptionsChange()}))})),new YI(r).setName(qK.optionForelinks()).setTooltip(qK.optionForelinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localForelinks).registerOptionListener(i.optionListeners,"localForelinks").onChange((function(e){t.options.localForelinks=e,t.render(),t.onOptionsChange()}))})),new YI(r).setName(qK.optionNeighborLinks()).setTooltip(qK.optionNeighborLinksDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.localInterlinks).registerOptionListener(i.optionListeners,"localInterlinks").onChange((function(e){t.options.localInterlinks=e,t.render(),t.onOptionsChange()}))}))),new YI(r).setName(qK.optionShowTags()).setTooltip(qK.optionShowTagsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showTags).registerOptionListener(i.optionListeners,"showTags").onChange((function(e){t.options.showTags=e,t.render(),t.onOptionsChange()}))})),new YI(r).setName(qK.optionShowAttachments()).setTooltip(qK.optionShowAttachmentsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showAttachments).registerOptionListener(i.optionListeners,"showAttachments").onChange((function(e){t.options.showAttachments=e,t.render(),t.onOptionsChange()}))})),new YI(r).setName(qK.optionShowExistingFilesOnly()).setTooltip(qK.optionShowExistingFilesOnlyDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.hideUnresolved).registerOptionListener(i.optionListeners,"hideUnresolved").onChange((function(e){t.options.hideUnresolved=e,t.render(),t.onOptionsChange()}))})),n||new YI(r).setName(qK.optionShowOrphans()).setTooltip(qK.optionShowOrphansDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().setValue(t.options.showOrphans).registerOptionListener(i.optionListeners,"showOrphans").onChange((function(e){t.options.showOrphans=e,t.render(),t.onOptionsChange()}))})),i}return f(t,e),t.prototype.startSearch=function(){this.searchSetting.settingEl.addClass("is-loading")},t.prototype.stopSearch=function(){this.searchSetting.settingEl.removeClass("is-loading")},t.prototype.setDefaultOptions=function(){this.setOptions(PK)},t}($K),QK=function(e){function t(t){var n=e.call(this,t,"color-groups",qK.labelGroups())||this;return t.controlsEl.appendChild(n.el),n.optionListeners.colorGroups=function(e){return Array.isArray(e)&&(n.setColorQueries(e),n.engine.requestUpdateSearch()),n.getColoredQueries()},n.setColorQueries([]),n}return f(t,e),t.prototype.getColoredQueries=function(){for(var e=[],t=0,n=this.groups;t<n.length;t++){var i=n[t];e.push({query:i.query.getValue(),color:{a:1,rgb:i.color.getValueInt()}})}return e},t.prototype.setColorQueries=function(e){var t=this,n=this.childrenEl;n.empty();for(var i=[],r=n.createDiv({cls:"graph-color-groups-container"}),o=function(e){var n=r.createDiv("graph-color-group"),o=new tO(n).setPlaceholder(qK.placeholderEnterQuery()).setValue(e.query).onChange((function(){return t.engine.requestUpdateSearch()})).then((function(e){return bK.attach(t.engine.app,e.inputEl,!1)})),a=new lO(n).setValueInt(e.color?e.color.rgb:0).onChange((function(){return t.engine.updateSearch()})),s=a.colorPickerEl;aS(s,qK.tooltipClickToChangeDragToReorder());var l={el:n,query:o,color:a};s.addEventListener("mousedown",(function(e){t.onDragOption(e,l)})),n.createDiv("clickable-icon",(function(e){gb(e,"lucide-x"),aS(e,qK.tooltipDeleteGraph()),e.addEventListener("click",(function(){i.remove(l),n.detach(),t.engine.updateSearch()}))})),i.push(l)},a=0,s=e;a<s.length;a++){var l=s[a];o(l)}this.groups=i,n.createDiv("graph-color-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:qK.buttonNewGroup()},(function(e){e.addEventListener("click",(function(){var e="obsidian"===t.engine.app.getTheme(),n=VI({h:40*t.groups.length,s:e?70:60,l:60});o({query:"",color:{a:1,rgb:_I(n)}}),t.engine.updateSearch()}))}))}))},t.prototype.onDragOption=function(e,t){var n=this;if(0===e.button){var i=e.clientX,r=e.clientY,o=t.el,a=o.getBoundingClientRect(),s=e.clientX-a.x,l=e.clientY-a.y,c=null,u=function(e){e.preventDefault();var a=e.clientX,u=e.clientY,h=n.el.doc;if(null===c){var p=a-i,d=u-r;if(p*p+d*d<25)return;var f=o.offsetWidth;n.groups.remove(t),(c=o.cloneNode(!0)).addClass("drag-ghost"),c.style.width=f+"px",h.body.appendChild(c),document.body.addClass("is-grabbing"),n.childrenEl.addClass("is-grabbing")}var g=n.getDropIndex(e);o.detach(),rS(),c&&(c.style.left=a-s+"px",c.style.top=u-l+"px");for(var m=0;m<n.groups.length;m++){var v=n.groups[m];v.el.style.top=m<g?"0":"".concat(v.el.offsetHeight,"px")}},h=function(e){if(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",h),c){c.detach(),document.body.removeClass("is-grabbing"),n.childrenEl.removeClass("is-grabbing");var i=n.getDropIndex(e);n.groups.splice(i,0,t),n.setColorQueries(n.getColoredQueries()),n.engine.updateSearch()}};window.addEventListener("mousemove",u),window.addEventListener("mouseup",h)}},t.prototype.getDropIndex=function(e){var t,n=e.clientY;for(t=0;t<this.groups.length;t++){var i=this.groups[t].el.getBoundingClientRect();if(n<i.top+i.height/2)return t}return t},t}($K),JK={showArrow:!1,textFadeMultiplier:0,nodeSizeMultiplier:1,lineSizeMultiplier:1},eY=function(e){function t(t){var n=e.call(this,t,"display",qK.labelDisplay())||this;t.controlsEl.appendChild(n.el);var i=n.childrenEl;return new YI(i).setName(qK.optionShowArrows()).setTooltip(qK.optionShowArrowsDescription()).setClass("mod-toggle").addToggle((function(e){return e.setSmall().registerOptionListener(n.optionListeners,"showArrow").onChange((function(e){t.renderer.setRenderOptions({showArrow:e}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionTextFade()).setClass("mod-slider").addSlider((function(e){return e.setLimits(-3,3,.1).setDynamicTooltip().registerOptionListener(n.optionListeners,"textFadeMultiplier").onChange((function(e){t.renderer.setRenderOptions({textFadeMultiplier:e}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionNodeSize()).setClass("mod-slider").addSlider((function(e){return e.setLimits(.1,5,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"nodeSizeMultiplier").onChange((function(e){t.renderer.setRenderOptions({nodeSizeMultiplier:e}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionLinkThickness()).setClass("mod-slider").addSlider((function(e){return e.setLimits(.1,5,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"lineSizeMultiplier").onChange((function(e){t.renderer.setRenderOptions({lineSizeMultiplier:e}),t.onOptionsChange()}))})),t.view instanceof GK||new YI(i).addButton((function(e){return e.setButtonText(qK.buttonAnimateTimelapse()).setCta().onClick((function(){t.renderProgression()}))})),n}return f(t,e),t.prototype.setDefaultOptions=function(){this.setOptions(JK)},t}($K),tY={centerStrength:YK(.1,.01),repelStrength:10,linkStrength:YK(1,.01),linkDistance:250},nY=function(e){function t(t){var n=e.call(this,t,"forces",qK.labelForces())||this;t.controlsEl.appendChild(n.el);var i=n.childrenEl;return new YI(i).setName(qK.optionCenterForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,1,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"centerStrength").onChange((function(e){t.renderer.setForces({centerStrength:KK(e,.01)}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionRepelForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,20,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"repelStrength").onChange((function(e){t.renderer.setForces({repelStrength:e*e*e}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionLinkForce()).setClass("mod-slider").addSlider((function(e){return e.setLimits(0,1,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"linkStrength").onChange((function(e){t.renderer.setForces({linkStrength:KK(e,.01)}),t.onOptionsChange()}))})),new YI(i).setName(qK.optionLinkDistance()).setClass("mod-slider").addSlider((function(e){return e.setLimits(30,500,1).setDynamicTooltip().registerOptionListener(n.optionListeners,"linkDistance").onChange((function(e){t.renderer.setForces({linkDistance:e}),t.onOptionsChange()}))})),n}return f(t,e),t.prototype.setDefaultOptions=function(){this.setOptions(tY)},t}($K);var iY=rf.plugins.bookmarks;function rY(e,t){return t||(t=void 0),{type:"file",ctime:Date.now(),path:e.path,subpath:t}}function oY(e){return{type:"folder",ctime:Date.now(),path:e.path}}function aY(e){return{type:"group",ctime:Date.now(),items:[],title:e||iY.labelUntitledGroup()}}function sY(e,t){return{type:"graph",ctime:Date.now(),title:t||iY.labelUntitledGraph(),options:e}}function lY(e){return{type:"search",ctime:Date.now(),query:e}}function cY(e,t){var n=null;return hY(e,(function(e){if("group"===e.type)for(var i=0,r=e.items;i<r.length;i++){if(r[i]===t)return n=e,!0}})),n}function uY(e){return e.view instanceof _K?sY(e.view.dataEngine.getOptions()):e.view instanceof EK?lY(e.view.getQuery()):e.view instanceof EI?rY(e.view.file):null}function hY(e,t){var n=function(e,i){for(var r=0,o=e;r<o.length;r++){var a=o[r];if(t(a,i))return;"group"===a.type&&n(a.items,i+a.title+"/")}};n(e,"")}function pY(e){for(var t=[],n=0,i=gK(e);n<i.length;n++){var r=i[n];r instanceof Xy?t.push(rY(r)):r instanceof $y&&t.push(oY(r))}return t}function dY(e){return"md"===e.extension?se(e.path):e.path}var fY=function(e){function t(t){var n=e.call(this,t)||this;return n.shouldShowUnresolved=!1,n.shouldShowMarkdown=!0,n.shouldShowCanvas=!0,n.shouldShowAlias=!0,n.shouldShowNonImageAttachments=!0,n.shouldShowImages=!0,n.shouldShowAllTypes=!1,n.shouldShowNonFileBookmarks=!1,n.createButtonEl=null,n.allowCreateNewFile=!1,n.context="view",n.limit=20,n.scope.register(null,"Tab",(function(){return!1})),n.createButtonEl=createEl("button","clickable-icon",(function(e){gb(e,"lucide-file-plus"),e.addEventListener("click",(function(e){n.onChooseSuggestion(null,e),n.close()}))})),n}return f(t,e),t.prototype.onInput=function(){var t,n;if(e.prototype.onInput.call(this),Lt.isMobile&&this.allowCreateNewFile){var i=this,r=i.createButtonEl,o=i.chooser,a=i.ctaEl,s=i.inputEl.value.trim();if(""===s)return void r.detach();r.parentElement||(a.appendChild(r),Ie(r,new Te({duration:150,fn:"cubic-bezier(0, 0.55, 0.45, 1)"}).addProp("transform","scale(0.10)","")));var l=null!==(n=null===(t=o.suggestions[0])||void 0===t?void 0:t.getText())&&void 0!==n?n:"";r.ariaDisabled=String(s.toLowerCase()===l.toLowerCase())}},Object.defineProperty(t.prototype,"supportsCreate",{get:function(){return this.allowCreateNewFile&&this.shouldShowMarkdown},enumerable:!1,configurable:!0}),t.prototype.onNoSuggestion=function(){var e=this.inputEl.value.trim(),t=e&&this.supportsCreate?[null]:[];this.chooser.setSuggestions(t);var n=e?this.emptyStateText:rf.setting.thirdPartyPlugin.labelNoRecentFilesFound();this.chooser.addMessage(n)},t.prototype.getSuggestions=function(e){var t=this;e=e.trim();var n=this.app,i=n.embedRegistry,r=n.workspace,o=n.vault,a=n.metadataCache,s=n.viewRegistry,l=[],c=this.context,u=this.shouldShowAllTypes,h=function(e){return"md"===e.extension?t.shouldShowMarkdown:"canvas"===e.extension?t.shouldShowCanvas:pM.contains(e.extension)?t.shouldShowImages:!!u||!!t.shouldShowNonImageAttachments&&("view"===c?s:i).isExtensionRegistered(e.extension)};if(!e){for(var p=0,d=r.getRecentFiles({showNonImageAttachments:this.shouldShowNonImageAttachments,showImages:this.shouldShowImages,showCanvas:this.shouldShowCanvas,showMarkdown:this.shouldShowMarkdown});p<d.length;p++){var f=d[p];(b=o.getAbstractFileByPath(f))instanceof Xy&&(a.isUserIgnored(b.path)||h(b)&&l.push({type:"file",file:b,match:null}))}return l}var g,m=o.getFiles().filter((function(e){return h(e)}));g=m.length<1e4?$A(e):iL(e);for(var v=0,y=m;v<y.length;v++){var b=y[v],w=a.isUserIgnored(b.path);if((F=MB(g,dY(b)))&&(w&&(F.score-=10),l.push({type:"file",file:b,match:F,downranked:w})),this.shouldShowAlias){var k=a.getFileCache(b);if(k){var C=fx(k.frontmatter);if(C)for(var E=0,x=C;E<x.length;E++){var S=x[E],M=g(S);M&&(w&&(M.score-=10),l.push({type:"alias",alias:S,file:b,match:M,downranked:w}))}}}}if(this.shouldShowUnresolved){var T=a.unresolvedLinks,D=[];for(var A in T)if(T.hasOwnProperty(A)){var L=T[A];for(var P in L)L.hasOwnProperty(P)&&D.push(P)}for(var I=0,O=D=Array.from(new Set(D));I<O.length;I++){var F,B=O[I];(F=g(B))&&l.push({type:"unresolved",linktext:B,match:F})}}var N=this.app.internalPlugins.getEnabledPluginById("bookmarks");if(N){var R=function(e,t){var n=t+N.getItemTitle(e),i=g(n);i&&l.push({type:"bookmark",match:i,item:e,bookmarkPath:n})};hY(N.items,(function(e,n){if("file"!==e.type||e.subpath)t.shouldShowNonFileBookmarks&&"group"!==e.type&&R(e,n);else{var i=t.app.vault.getAbstractFileByPath(e.path);i instanceof Xy&&h(i)&&R(e,n)}}))}return eL(l),l},t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createDiv("suggestion-content"),i=t.createDiv("suggestion-aux");if(!e){var r=this.inputEl.value;return n.createDiv({cls:"suggestion-title",text:r}),void i.createSpan({cls:"suggestion-hotkey",text:rf.interface.labelEnterToCreate()})}if(e.downranked&&t.addClass("mod-downranked"),"file"===e.type)rL(n.createDiv("suggestion-title"),dY(e.file),e.match),i.createSpan({cls:"suggestion-flair"});else if("alias"===e.type){rL(n.createDiv("suggestion-title"),e.alias,e.match),n.createDiv({cls:"suggestion-note",text:dY(e.file)}),i.createSpan({cls:"suggestion-flair"},(function(e){gb(e,"lucide-forward"),aS(e,rf.interface.tooltip.alias())}))}else if("unresolved"===e.type){rL(o=n.createDiv("suggestion-title"),e.linktext,e.match),i.createSpan({cls:"suggestion-flair",text:"+"},(function(e){gb(e,"lucide-file-plus"),aS(e,rf.interface.tooltip.notCreatedYet())}))}else if("bookmark"===e.type){var o=n.createDiv("suggestion-title"),a=n.createDiv({cls:"suggestion-note"});rL(o,e.bookmarkPath,e.match),i.createSpan({cls:"suggestion-flair"},(function(t){var n;if("file"===e.item.type){gb(t,"lucide-bookmark");var i=fe(e.item.path)+(null!==(n=e.item.subpath)&&void 0!==n?n:"");a.setText(i)}else"search"===e.item.type?(gb(t,"lucide-search"),a.setText(e.item.query)):"graph"===e.item.type&&(gb(t,"lucide-git-fork"),a.detach())}))}},t}(Jj),gY=function(){function e(e){this.app=e}return e.prototype.setupNative=function(){var e=this;SD&&DD.addListener("appShareIntent",(function(t){return v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return wb(),"text"!==t.type?[3,2]:[4,this.handleShareText(t.text)];case 1:e.sent(),e.label=2;case 2:return"files"!==t.type?[3,4]:[4,this.handleShareFiles(t.files)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))},e.prototype.setupWorkspace=function(){var e=this.app,t=e.workspace;t.on("receive-text-menu",(function(n,i){var r=t.getActiveViewOfType(iK);r&&n.addItem((function(t){return t.setSection("options").setTitle(rf.interface.mobile.actionInsertTextIntoFile({filename:r.file.basename})).setIcon("lucide-file").onClick((function(){var t="\n"+i+"\n";"preview"===r.getMode()?e.fileManager.insertTextIntoFile(r.file,t,{},"","",!1):r.editor.insertText(t)}))})),n.addItem((function(t){return t.setSection("options").setTitle(rf.interface.mobile.actionChooseFileToInsert()).setIcon("lucide-navigation").onClick((function(){new mY(e,i).open()}))}))})),t.on("receive-files-menu",(function(n,i){var r=t.getActiveViewOfType(iK);r&&n.addItem((function(t){return t.setTitle(rf.interface.mobile.actionInsertLinkIntoFile({filename:r.file.basename})).setIcon("lucide-file").onClick((function(){var t=i.map((function(t){return e.fileManager.generateMarkdownLink(t,r.file.path)}));r.editor.insertText("\n"+t.join("\n")+"\n")}))}))}))},e.prototype.handleShareText=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){return t=(new fw).addSections(["title","options","danger"]).addItem((function(t){return t.setSection("title").setTitle(Id(e,300)).setIcon("lucide-list-end").setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addItem((function(e){return e.setSection("options").setTitle(rf.interface.mobile.actionInsertTextDesc()).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})),this.app.workspace.trigger("receive-text-menu",t,e),t.addItem((function(e){return e.setSection("danger").setTitle(rf.dialogue.buttonCancel()).setIcon("lucide-x").onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},e.prototype.handleShareFiles=function(e){return v(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){return(new fw).addItem((function(t){return t.setTitle(createFragment((function(t){for(var n=0,i=e;n<i.length;n++){var r=i[n];t.createDiv({text:r.name})}}))).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addSeparator().addItem((function(n){return n.setTitle(rf.interface.mobile.actionImport()).setIcon("lucide-files").onClick((function(){return t.importFiles(e)}))})).addItem((function(e){return e.setTitle(rf.dialogue.buttonCancel()).setIcon("lucide-x").onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},e.prototype.importFiles=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g;return y(this,(function(m){switch(m.label){case 0:t=[],n=new CI(rf.interface.mobile.msgImporting(),0),i=0,r=this.app.vault,o=0,a=e,m.label=1;case 1:if(!(o<a.length))return[3,12];s=a[o],m.label=2;case 2:return m.trys.push([2,10,,11]),e.length>1&&n.setMessage(rf.interface.mobile.msgImporting()+" (".concat(i,"/").concat(e.length,")")),[4,fetch(A.convertFileSrc(s.uri))];case 3:return[4,m.sent().arrayBuffer()];case 4:return l=m.sent(),c=s.name||ie(s.uri),u=ae(c),h=le(c),p=void 0,"md"===h?[3,6]:[4,r.getAvailablePathForAttachments(u,h,this.app.workspace.getActiveFile())];case 5:return p=m.sent(),[3,8];case 6:return[4,r.getAvailablePath(u,h)];case 7:p=m.sent(),m.label=8;case 8:return[4,r.createBinary(p,l)];case 9:return d=m.sent(),t.push(d),i++,[3,11];case 10:return f=m.sent(),n.hide(),new CI(rf.interface.mobile.msgFailedToImportFile({filename:s.name})),new CI(f.toString()),[2];case 11:return o++,[3,1];case 12:return n.hide(),(g=(new fw).addItem((function(e){return e.setTitle(rf.interface.mobile.msgImportSuccess()).removeIcon().setIsLabel(!0)})).addSeparator()).addItem((function(e){return e.setTitle(rf.dialogue.buttonDone()).setIcon("lucide-check").onClick((function(){return null}))})),this.app.workspace.trigger("receive-files-menu",g,t),g.showAtPosition({x:0,y:0}),[2]}}))}))},e}(),mY=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=rf.plugins.quickSwitcher.labelNoNoteCreateNew(),i.allowCreateNewFile=!0,i.text=n,i.shouldShowUnresolved=!0,i.shouldShowNonImageAttachments=!1,i.shouldShowImages=!1,i.shouldShowCanvas=!1,i.shouldShowAllTypes=!1,i.setPlaceholder("Choose file to insert"),i.setInstructions([{command:"↑↓",purpose:"to navigate"},{command:"↵",purpose:"to select"},{command:"esc",purpose:"to dismiss"}]),i}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:t=null,n=this.app,r.label=1;case 1:return r.trys.push([1,7,,8]),e?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,"")];case 2:return t=r.sent(),[3,6];case 3:return"unresolved"!==e.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(e.linktext,"")];case 4:return t=r.sent(),[3,6];case 5:"file"!==e.type&&"alias"!==e.type||(t=e.file),r.label=6;case 6:return[3,8];case 7:return i=r.sent(),new CI(i.toString()),[2];case 8:return t?[4,this.app.fileManager.insertTextIntoFile(t,this.text,{},"","",!1)]:[3,11];case 9:return r.sent(),[4,this.app.workspace.getLeaf().openFile(t)];case 10:r.sent(),r.label=11;case 11:return[2]}}))}))},t}(fY),vY=n(8246),yY=n.n(vY),bY="audio/mp4",wY=function(){function e(){this.id="audio-recorder",this.name=rf.plugins.audioRecorder.name(),this.description=rf.plugins.audioRecorder.desc(),this.app=null,this.plugin=null,this.recording=!1,this.recorder=null,this.extension=""}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(rf.plugins.audioRecorder.actionToggle(),"lucide-mic",this.onRecordAudio.bind(this)),t.registerGlobalCommand({id:"audio-recorder:start",name:rf.plugins.audioRecorder.actionStart(),icon:"lucide-play-circle",checkCallback:function(e){return!n.recording&&(e||n.onStartRecording(),!0)}}),t.registerGlobalCommand({id:"audio-recorder:stop",name:rf.plugins.audioRecorder.actionStop(),icon:"lucide-stop-circle",checkCallback:function(e){return!!n.recording&&(e||n.onStopRecording(),!0)}})},e.prototype.checkPermission=function(){return v(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return Lt.isDesktopApp&&"MacOS"===me?(e=It("electron"))?(t=e.remote.systemPreferences,n=t.getMediaAccessStatus("microphone"),["denied","restricted","unknown"].contains(n)?(this.showRecordingMessage(rf.plugins.audioRecorder.msgAccessDenied(),!0),[2,!1]):[3,1]):(this.showRecordingMessage(rf.plugins.audioRecorder.msgAccessDenied(),!0),[2,!1]):[3,5];case 1:return"not-determined"!==n?[3,3]:(this.showRecordingMessage(rf.plugins.audioRecorder.msgPendingGrant(),!1),[4,t.askForMediaAccess("microphone")]);case 2:return[2,i.sent()];case 3:if("granted"===n)return[2,!0];i.label=4;case 4:return[2,!1];case 5:return[2,!0]}}))}))},e.prototype.onRecordAudio=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.checkPermission()];case 1:return e.sent()?this.recording?[3,3]:[4,this.onStartRecording()]:[2];case 2:return e.sent(),[3,4];case 3:this.onStopRecording(),e.label=4;case 4:return[2]}}))}))},e.prototype.onStartRecording=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:if(MD&&!navigator.mediaDevices)return new CI("This functionality requires iOS 14.5."),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return e=i.sent(),[4,this.startRecording(e)];case 3:return i.sent(),[3,5];case 4:return(t=i.sent()).message.contains("Requested device not found")&&this.plugin.addedButtonEls.length>0?(n=rf.plugins.audioRecorder.msgNoMicrophone(),this.showRecordingMessage(n,!0)):(t.message.contains("denied")&&new CI(t.message),console.error(t)),[2];case 5:return this.recording=!0,this.plugin.addedButtonEls.forEach((function(e){gb(e,"lucide-mic"),e.addClass("is-active")})),[2]}}))}))},e.prototype.onStopRecording=function(){this.recording=!1,this.recorder.stop(),this.plugin.addedButtonEls.forEach((function(e){e.removeClass("is-active")}))},e.prototype.startRecording=function(e){var t=this,n=[],i='audio/webm;codecs="opus"';this.extension="webm",MediaRecorder.isTypeSupported(bY)&&(i=bY,this.extension="m4a"),this.recorder=new MediaRecorder(e,{mimeType:i}),this.recorder.addEventListener("dataavailable",(function(e){e.data.size>0&&n.push(e.data)})),this.recorder.addEventListener("stop",(function(){return v(t,void 0,void 0,(function(){var t,o,a;return y(this,(function(s){switch(s.label){case 0:if(this.recorder=null,e.getTracks().forEach((function(e){e.stop()})),t=new Blob(n,{type:i}),"webm"!==this.extension)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,yY()(t)];case 2:return t=s.sent(),[3,4];case 3:return o=s.sent(),console.error(o),[3,4];case 4:return a=this.saveRecording,[4,t.arrayBuffer()];case 5:return[4,a.apply(this,[s.sent()])];case 6:return s.sent(),r&&r.release(),[2]}}))}))})),this.recorder.start();var r=null;SD&&(r=BD())},e.prototype.saveRecording=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t=this.app,n=t.workspace,i="Recording "+window.moment().format("YYYYMMDDHHmmss"),r=n.getActiveFile(),o=n.getActiveViewOfType(iK),[4,t.vault.getAvailablePathForAttachments(i,this.extension,r)];case 1:return a=c.sent(),[4,t.vault.createBinary(a,e)];case 2:return s=c.sent(),o?(l=this.app.fileManager.generateMarkdownLink(s,o.file.path),o.editor.replaceSelection("\n".concat(l,"\n")),[2]):[4,n.getUnpinnedLeaf().openFile(s,{active:!0})];case 3:return c.sent(),[2]}}))}))},e.prototype.showRecordingMessage=function(e,t){this.plugin.addedButtonEls.length>0&&iS(this.plugin.addedButtonEls[0],e,{placement:"right",classes:t?["mod-error"]:[]})},e}(),kY=rf.plugins.bookmarks,CY=function(e){function t(t,n,i,r){var o=e.call(this,t.app)||this;o.plugin=t,o.item=n,o.isExistingItem=i,o.initialBookmarkGroup=null,o.bookmarkGroup=null,o.bookmarkGroupOptions=new Map,o.reverseBookmarkGroupOptions=new Map,o.modalEl.addClass("mod-bookmark");var a=i?rf.plugins.bookmarks.actionEditBookmark():rf.plugins.bookmarks.actionAddBookmark();o.setTitle(a);var s=t.getItemTitle(n),l=n.title,c=function(){n.title=l,i?(t.editItem(n),o.initialBookmarkGroup!==o.bookmarkGroup&&t.moveItem(n,o.bookmarkGroup,o.bookmarkGroup.items.length-1)):t.addItem(n,o.bookmarkGroup),null==r||r(),o.close()},u=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),c())};if("file"===n.type||"folder"===n.type){var h=fe(n.path);"file"===n.type&&n.subpath&&(h+=n.subpath),new YI(o.contentEl).setName(kY.optionPath()).addText((function(e){e.setDisabled(!0).setValue(h)}))}else"search"===n.type&&new YI(o.contentEl).setName(kY.optionQuery()).addText((function(e){e.setDisabled(!0).setValue(n.query)}));new YI(o.contentEl).setName(kY.optionTitle()).addText((function(e){o.titleInputEl=e.inputEl,o.titleInputEl.enterKeyHint=Lt.isAndroidApp?"enter":"done",e.setPlaceholder(s).setValue(l).onChange((function(e){l=e})),e.inputEl.addEventListener("keydown",u)})),new YI(o.contentEl).setName(kY.optionGroup()).addDropdown((function(e){o.bookmarkGroupComponent=e;var n=function(t,i){for(var r=0,a=t;r<a.length;r++){var s=a[r];if("group"===s.type){var l=$e(16);e.addOption(l,i+s.title),o.bookmarkGroupOptions.set(l,s),o.reverseBookmarkGroupOptions.set(s,l),n(s.items,i+" ".repeat(4))}}};n(t.items,""),e.onChange((function(e){o.bookmarkGroup=o.bookmarkGroupOptions.get(e)}))}));var p=function(){t.removeItem(n),o.close()};return Lt.isPhone?(o.modalEl.createEl("button",{cls:"modal-nav-action mod-secondary",text:rf.dialogue.buttonCancel()},(function(e){e.addEventListener("click",(function(){return o.close()}))})),o.modalEl.createEl("button",{cls:"modal-nav-action mod-cta",text:rf.dialogue.buttonSave()},(function(e){e.addEventListener("click",c)})),i?(o.contentEl.appendChild(o.buttonContainerEl),o.buttonContainerEl.createEl("button",{cls:"mod-warning",text:kY.menuOptRemove()},(function(e){e.addEventListener("click",p)}))):o.buttonContainerEl.detach()):(i&&o.addButton(["mod-secondary","mod-destructive"],kY.menuOptRemove(),p),o.addCancelButton(),o.addButton("mod-cta",rf.dialogue.buttonSave(),c)),o}return f(t,e),t.prototype.setBookmarkGroup=function(e){this.bookmarkGroup=e;var t=this.reverseBookmarkGroupOptions.get(e);return this.bookmarkGroupComponent.setValue(t),this},t.prototype.onOpen=function(){this.bookmarkGroup||(this.bookmarkGroup=this.isExistingItem?cY(this.plugin.items,this.item):null),this.initialBookmarkGroup=this.bookmarkGroup;var e=this.reverseBookmarkGroupOptions.get(this.initialBookmarkGroup);this.bookmarkGroupComponent.setValue(e),this.titleInputEl.select()},t}(PI),EY=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.modalEl.addClass("mod-bookmark"),r.setTitle("Add ".concat(i.length," bookmarks"));var o=window.moment().format("LLL"),a="",s=null,l=function(){var e=aY(a||o);n.addItem(e,s);for(var t=0,l=i;t<l.length;t++){var c=l[t];n.addItem(c,e)}r.close()},c=function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),l())};new YI(r.contentEl).setName(kY.optionTitle()).addText((function(e){e.setPlaceholder(o).setValue(a).onChange((function(e){a=e})),e.inputEl.addEventListener("keydown",c)}));var u=new Map;return new YI(r.contentEl).setName(kY.optionGroup()).addDropdown((function(e){var t=function(n,i){for(var r=0,o=n;r<o.length;r++){var a=o[r];if("group"===a.type){var s=$e(16);e.addOption(s,i+a.title),u.set(s,a),t(a.items,i+" ".repeat(4))}}};t(n.items,""),e.onChange((function(e){s=u.get(e)}))})),r.addCancelButton(),r.addButton("mod-cta",rf.dialogue.buttonSave(),l),r}return f(t,e),t}(PI),xY=function(e){this.vChildren=new rP(this),this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=pP(),this.el=e,this.childrenEl=e.createDiv()},SY=function(){function e(e,t){var n=this;this.view=e,this.activeDom=null,this.focusedItem=null,this.selectedDoms=new Set,this.isAllCollapsed=!0,this.requestSaveFolds=rt(this.saveFolds.bind(this),200),this.id=t.id,this.app=t.app,this.scope=t.scope,this.handleDeleteSelectedItems=t.handleDeleteSelectedItems,this.containerEl=t.containerEl,this.getNodeId=t.getNodeId,this.infinityScroll=new fP(t.containerEl),this.infinityScroll.rootEl=new xY(t.containerEl),this.initializeKeyboardNav(),this.containerEl.addEventListener("click",(function(e){e.target===n.containerEl&&(n.clearSelectedDoms(),n.setFocusedItem(null,!1))}))}return e.prototype.isItem=function(e){return!(e instanceof xY)&&!!e},Object.defineProperty(e.prototype,"root",{get:function(){return this.infinityScroll.rootEl},enumerable:!1,configurable:!0}),e.prototype.initializeKeyboardNav=function(){this.scope.register([],"ArrowDown",this.onKeyArrowDownInFocus.bind(this)),this.scope.register(["Shift"],"ArrowDown",this.onKeyArrowDownInFocus.bind(this)),this.scope.register([],"ArrowUp",this.onKeyArrowUpInFocus.bind(this)),this.scope.register(["Shift"],"ArrowUp",this.onKeyArrowUpInFocus.bind(this)),this.scope.register([],"ArrowLeft",this.onKeyArrowLeftInFocus.bind(this)),this.scope.register([],"ArrowRight",this.onKeyArrowRightInFocus.bind(this)),this.scope.register([],"Enter",this.onKeyEnterInFocus.bind(this)),this.scope.register(["Mod"],"Enter",this.onKeyEnterInFocus.bind(this)),this.handleDeleteSelectedItems&&(Lt.isMacOS?this.scope.register(["Mod"],"Backspace",this.handleDeleteSelectedItems.bind(this)):this.scope.register([],"Delete",this.handleDeleteSelectedItems.bind(this)))},e.prototype.toggleCollapseAll=function(){this.setCollapseAll(!this.isAllCollapsed)},e.prototype.setIsAllCollapsed=function(e){this.isAllCollapsed=e},e.prototype.setCollapseAll=function(e){sP(this.root,(function(t){oP(t)&&t.setCollapsed(e,!0)})),this.setIsAllCollapsed(e),this.infinityScroll.invalidateAll(),this.requestSaveFolds()},e.prototype.onResize=function(){this.infinityScroll.onResize()},e.prototype.handleItemSelection=function(e,t){var n=this,i=n.selectedDoms,r=n.activeDom,o=n.view;if(!hw.isModEvent(e)){if(e.altKey&&!e.shiftKey)return this.app.workspace.setActiveLeaf(o.leaf,{focus:!0}),i.has(t)?this.deselectItem(t):(this.selectItem(t),this.setFocusedItem(t,!1),this.activeDom=t),!0;if(e.shiftKey){this.app.workspace.setActiveLeaf(o.leaf,{focus:!0});for(var a=0,s=r?lP(r,t):[t];a<s.length;a++){var l=s[a];this.selectItem(l)}return!0}if(t.selfEl.hasClass("is-active"))return this.app.workspace.setActiveLeaf(o.leaf,{focus:!0}),this.setFocusedItem(t,!1),!0}return this.clearSelectedDoms(),this.activeDom=t,!1},e.prototype.clearSelectedDoms=function(){this.selectedDoms.forEach((function(e){e.selfEl.removeClass("is-selected")})),this.selectedDoms.clear()},e.prototype.deselectItem=function(e){this.isItem(e)&&this.selectedDoms.has(e)&&(this.selectedDoms.delete(e),e.selfEl.removeClass("is-selected"))},e.prototype.selectItem=function(e){this.isItem(e)&&!this.selectedDoms.has(e)&&(this.selectedDoms.add(e),e.selfEl.addClass("is-selected"))},e.prototype.onKeyEnterInFocus=function(e){e.defaultPrevented||(e.preventDefault(),this.isItem(this.focusedItem)&&this.focusedItem.onSelfClick(e))},e.prototype.onKeyArrowUpInFocus=function(e){e.preventDefault();var t=this.focusedItem;this.changeFocusedItem("backwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},e.prototype.onKeyArrowDownInFocus=function(e){e.preventDefault();var t=this.focusedItem;this.changeFocusedItem("forwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},e.prototype.onKeyArrowLeftInFocus=function(e){var t;if(e.preventDefault(),this.focusedItem)if(this.focusedItem!==this.root){if(oP(this.focusedItem)&&this.focusedItem.collapsible)this.focusedItem.collapsed?oP(this.focusedItem.parent)&&this.setFocusedItem(this.focusedItem.parent):this.focusedItem.setCollapsed(!0,!0);else{if(this.focusedItem.parent===this.root)return void this.setCollapseAll(!0);this.focusedItem.parent.setCollapsed(!0,!0)}for(var n=this.focusedItem;null===(t=n.parent)||void 0===t?void 0:t.collapsed;)n=n.parent;this.setFocusedItem(n)}else this.setCollapseAll(!0)},e.prototype.onKeyArrowRightInFocus=function(e){e.preventDefault();var t=this.focusedItem;t&&oP(t)&&(t.collapsed?t.setCollapsed(!1,!0):t.vChildren.hasChildren()&&this.changeFocusedItem("forwards"))},e.prototype.setFocusedItem=function(e,t){void 0===t&&(t=!0),e!==this.root&&(this.isItem(this.focusedItem)&&this.focusedItem.selfEl.removeClass("has-focus"),this.focusedItem=e,e&&this.isItem(e)&&(e.selfEl.addClass("has-focus"),t&&this.infinityScroll.scrollIntoView(e)))},e.prototype.changeFocusedItem=function(e){if(this.focusedItem||(this.focusedItem=Array.from(this.selectedDoms).last()),this.focusedItem){var t="forwards"===e?cP(this.focusedItem,!0):uP(this.focusedItem,!0);t&&this.setFocusedItem(t)}else{var n=this.root;if("backwards"===e){for(var i=n;oP(i)&&i.vChildren.hasChildren();)i=i.vChildren.last();this.setFocusedItem(i)}else this.setFocusedItem(n.vChildren.children[0])}},e.prototype.getFoldKey=function(){return this.id+"-folds"},e.prototype.loadFolds=function(){var e=this;if(this.getNodeId){var t=new Set(this.app.loadLocalStorage(this.getFoldKey()));sP(this.root,(function(n){oP(n)&&t.has(e.getNodeId(n))&&n.setCollapsed(!0,!1)}))}},e.prototype.saveFolds=function(){var e=this;if(this.getNodeId&&this.app.workspace.layoutReady){var t=[];sP(this.root,(function(n){oP(n)&&n.collapsed&&t.push(e.getNodeId(n))})),this.app.saveLocalStorage(this.getFoldKey(),t)}},e}();function MY(e,t){var n=null,i=function(e){if(!e)return null;for(var t=cP(e,!0);t.info.hidden;)t=cP(e,!0);return t}(t.root),r=(null==i?void 0:i.info.height)||0;if(sP(t.root,(function(i){if(!i.info.hidden){if(t.selectedDoms.has(i))return!0;var o=i.selfEl,a=o.getBoundingClientRect(),s=e.clientY-(a.y-a.height/2);if(s>0&&s<=r){r=s;var l=a.top+a.height/2,c=null,u=!1,h=0,p=o.offsetLeft,d=o.offsetTop;return oP(i)&&Math.abs(l-e.clientY)<a.height/2?(u=!0,c=i,h=0):i.parent&&oP(i.parent)?h=(c=i.parent).vChildren.children.indexOf(i):(c=null,h=t.root.vChildren.children.indexOf(i)),n={node:i,parentNode:c,overlapsNode:u,idx:h,position:"before",x:p,y:d},!0}}}),!0),!n)if(t.root.vChildren.hasChildren()){var o=hP(t.root,!0),a=o.selfEl.getBoundingClientRect();e.clientY>a.bottom?n={node:o,idx:t.root.vChildren.children.length,position:"end",x:0,y:o.selfEl.offsetTop+o.selfEl.offsetHeight}:e.clientY<i.selfEl.getBoundingClientRect().top&&(n={node:null,idx:0,position:"start",x:i.selfEl.offsetLeft,y:i.selfEl.offsetTop})}else n={node:null,idx:0,position:"start",x:t.root.childrenEl.offsetLeft,y:t.root.childrenEl.offsetTop};return n}var TY=createDiv("drop-indicator is-active"),DY=rt((function(e,t){TY.style.left=e+"px",TY.style.top=t+"px"}),0),AY=null,LY=null;function PY(e,t,n,i){if(null==LY||LY.removeClass("is-being-dragged-over"),!i)return TY.detach(),void(LY=null);if(t&&t.overlapsNode&&oP(t.node)&&!n.contains(t.node)){var r=t.node;r.selfEl!==LY&&(window.clearTimeout(AY),AY=null),null==(LY=r.selfEl)||LY.addClass("is-being-dragged-over"),r.collapsed&&!AY&&(AY=window.setTimeout((function(){LY===r.selfEl&&r.setCollapsed(!1,!0)}),750))}else LY=null;return t&&(TY.parentNode!==e.containerEl&&e.containerEl.prepend(TY),DY(t.x,Math.max(0,t.y-2))),TY.toggle(!LY),TY}var IY=rf.plugins.bookmarks,OY=rf.plugins.fileExplorer,FY="bookmarks",BY=function(e){function t(t,n){var i=e.call(this)||this;i.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},i.renameScope=null,i.tree=n,i.view=t,i.selfEl.addClass("bookmark"),i.selfEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i.titleEl=i.innerEl.createSpan({cls:"tree-item-inner-text"});var r=i.renameScope=new cw(t.app.scope);return r.register([],"Enter",(function(){i.stopRename(!0)})),r.register([],"Escape",(function(){i.stopRename(!1)})),i}return f(t,e),Object.defineProperty(t.prototype,"path",{get:function(){for(var e=this.view.plugin,t=[],n=this;n;)t.push(e.getItemTitle(n.item)),n=n.parent instanceof NY?n.parent:null;return t.reverse().join("/")},enumerable:!1,configurable:!0}),t.prototype.startRename=function(){var e=this,t=e.selfEl,n=e.titleEl,i=e.tree,r=e.view;t.addClass("is-being-renamed"),i.setFocusedItem(this,!0),n.setAttribute("contenteditable","true"),bb(n),r.app.keymap.pushScope(this.renameScope)},t.prototype.update=function(){var e=this.item,t=this.view,n=t.plugin.getItemTitle(e);this.titleEl.setText(n),this.el.setAttr("data-path",this.path),"file"===e.type&&this.el.toggle(!!t.app.vault.getAbstractFileByPath(e.path))},t.prototype.setActive=function(e){this.selfEl.toggleClass("is-active",e)},t.prototype.stopRename=function(e){var t=this,n=t.item,i=t.selfEl,r=t.view;if(e){var o=this.titleEl.textContent.trim();o?(n.title=o,r.plugin.onItemsChanged(!0)):this.update()}else this.update();this.titleEl.removeAttribute("contenteditable"),i.removeClass("is-being-renamed"),r.app.keymap.popScope(this.renameScope)},t.prototype.onTitleBlur=function(e){this.stopRename(!0)},t.prototype.onContextMenu=function(e){var t=this;e.preventDefault();var n=this.view,i=n.app,r=n.tree,o=n.plugin,a=(new fw).addSections(["title","open","action","view","info","","danger"]);if(r.selectedDoms.size>1&&r.selectedDoms.has(this)){var s=Array.from(r.selectedDoms).map((function(e){return e.item}));a.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(s,"tab")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openToTheRight()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(s,"split")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewWindow()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(s,"window")}))})).addItem((function(e){return e.setSection("danger").setTitle(IY.menuOptRemove()).setIcon("lucide-trash-2").onClick((function(){r.selectedDoms.forEach((function(e){o.removeItem(e.item)}))}))}))}else if(a.addItem((function(e){return e.setSection("action").setTitle(IY.menuOptRename()).setIcon("lucide-pencil").onClick((function(e){return t.startRename()}))})).addItem((function(e){return e.setSection("danger").setTitle(IY.menuOptRemove()).setIcon("lucide-trash-2").onClick((function(){t.view.plugin.removeItem(t.item)}))})),"group"===this.item.type){var l=this.item,c=this.item.items;a.addItem((function(e){return e.setSection("action").setTitle(IY.actionNewBookmark()).setIcon("lucide-bookmark-plus").onClick((function(t){var n=uY(i.workspace.getMostRecentLeaf());e&&new CY(o,n,!1).setBookmarkGroup(l).open()}))})).addItem((function(e){return e.setSection("action").setIcon("lucide-folder-plus").setTitle(IY.actionNewGroup()).onClick((function(){return t.view.createNewGroup(l)}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmarks(c,"tab")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(e){return o.openBookmarks(c,"split")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewWindow()).setIcon("lucide-maximize").onClick((function(e){return o.openBookmarks(c,"window")}))}))}else"file"!==this.item.type&&"graph"!==this.item.type||a.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(e){return o.openBookmark(t.item,"tab")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(e){return o.openBookmark(t.item,"split")}))})).addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewWindow()).setIcon("lucide-maximize").onClick((function(e){return o.openBookmark(t.item,"window")}))})),a.addItem((function(e){return e.setSection("action").setTitle(IY.menuOptEdit()).setIcon("lucide-pencil").onClick((function(e){new CY(t.view.plugin,t.item,!0).open()}))}));if("file"===this.item.type||"folder"===this.item.type){var u=i.vault.getAbstractFileByPath(this.item.path);u&&a.addItem((function(e){return e.setSection("view").setTitle(rf.plugins.fileExplorer.actionRevealFile()).setIcon("lucide-folder-open").onClick((function(e){i.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(u)}))}))}a.setParentElement(this.selfEl).showAtMouseEvent(e)},t}(mO),NY=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.vChildren=new rP(r),r.pusherEl=pP(),r.view=t,r.item=i,r.setCollapsible(!0),r.setClickable(!0),r.titleEl.addEventListener("blur",r.onTitleBlur.bind(r)),r}return f(t,e),t.prototype.onSelfClick=function(e){this.tree.handleItemSelection(e,this)||this.onCollapseClick(e)},t.prototype.refreshChildren=function(){var e=this.view,n=this.item;this.vChildren.clear();for(var i=0,r=n.items;i<r.length;i++){var o=r[i],a=e.getItemDom(o);this.vChildren.addChild(a),a.update(),a instanceof t&&a.refreshChildren()}},t.prototype.updateCollapsed=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.collapsed||this.view.setIsAllCollapsed(!1),this.view.tree.infinityScroll.invalidate(this),this.view.tree.requestSaveFolds(),[2]}}))}))},t}(BY),RY=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;if(r.item=i,r.iconEl=r.selfEl.createDiv({cls:"tree-item-icon",prepend:!0}),r.setClickable(!0),r.setCollapsible(!1),r.constructDom(),"file"===i.type&&!i.subpath){var o=t.app.workspace.getActiveFile();r.setActive(i.path===(null==o?void 0:o.path))}return r}return f(t,e),t.prototype.onFileMouseover=function(e){var t;if(!wt(e)&&"file"===this.item.type){var n=this.view.app,i=n.vault.getAbstractFileByPath(this.item.path);i instanceof Xy&&n.workspace.trigger("hover-link",{event:e,source:FY,hoverParent:this,targetEl:this.selfEl,linktext:i.path+(null!==(t=this.item.subpath)&&void 0!==t?t:"")})}},t.prototype.onSelfClick=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return this.tree.handleItemSelection(e,this)||this.view.plugin.openBookmark(this.item,hw.isModEvent(e),{eState:{focus:!0}}),[2]}))}))},t.prototype.constructDom=function(){var e,t,n=this.item;"file"===n.type?(n.path.endsWith(".canvas")?gb(this.iconEl,"lucide-layout-dashboard"):(null===(e=n.subpath)||void 0===e?void 0:e.startsWith("#^"))?gb(this.iconEl,"lucide-toy-brick"):(null===(t=n.subpath)||void 0===t?void 0:t.startsWith("#"))?gb(this.iconEl,"lucide-heading"):gb(this.iconEl,"lucide-file"),this.selfEl.addEventListener("mouseover",this.onFileMouseover.bind(this))):"folder"===n.type?gb(this.iconEl,"lucide-folder"):"search"===n.type?gb(this.iconEl,"lucide-search"):"graph"===n.type&&gb(this.iconEl,"lucide-git-fork"),this.titleEl.addEventListener("blur",this.onTitleBlur.bind(this))},t.prototype.updateCollapsed=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.view.tree.infinityScroll.invalidate(this),[2]}}))}))},t}(BY),HY=function(e){this.vChildren=new rP(this),this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=pP(),this.el=e,this.childrenEl=e.createDiv()},VY=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=n,i.icon="lucide-bookmark",i.itemDoms=new WeakMap,i.collapseOrExpandAllEl=null,i.activeDom=null,i.requestUpdate=rt(i.update.bind(i),50),i.emptyEl=createDiv({cls:"pane-empty bookmarks-pane-empty",text:IY.labelNoBookmarks()}),i.invalidStateEl=createDiv({cls:"pane-empty mod-error"},(function(e){e.createDiv({text:IY.labelInvalidData()}),e.createDiv({text:IY.labelInvalidDataDesc()})})),i.scope=new cw(i.app.scope);var r=new YG(i.app,i.containerEl);return i.tree=new SY(i,{app:i.app,containerEl:i.contentEl,id:FY,scope:i.scope,getNodeId:i.getNodeId.bind(i),handleDeleteSelectedItems:i.onDeleteSelectedItems.bind(i)}),r.addNavButton("lucide-bookmark-plus",IY.actionNewBookmark(),(function(){var e=uY(i.app.workspace.getMostRecentLeaf());e&&new CY(i.plugin,e,!1).open()})),r.addNavButton("lucide-folder-plus",IY.actionNewGroup(),(function(){return i.createNewGroup()})),i.collapseOrExpandAllEl=r.addNavButton("lucide-chevrons-down-up",IY.actionCollapseAll(),(function(){return i.tree.toggleCollapseAll()})),i.containerEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i.attachDropHandler(),i}return f(t,e),t.prototype.load=function(){var t=this;e.prototype.load.call(this);var n=this.app;this.registerEvent(n.vault.on("create",this.onFileCreate.bind(this),this)),this.registerEvent(n.vault.on("delete",this.onFileDelete.bind(this),this)),this.registerEvent(this.plugin.on("changed",this.requestUpdate,this)),this.registerEvent(n.metadataCache.on("finished",this.requestUpdate,this)),this.registerEvent(n.workspace.on("file-open",this.onFileOpen,this)),this.app.workspace.onLayoutReady((function(){t.update(),t.tree.loadFolds()}))},t.prototype.onFileCreate=function(e){sP(this.tree.root,(function(t){"file"!==t.item.type&&"folder"!==t.item.type||t.item.path!==e.path||t.update()}))},t.prototype.onFileDelete=function(e){sP(this.tree.root,(function(t){"file"!==t.item.type&&"folder"!==t.item.type||t.item.path!==e.path||t.update()}))},t.prototype.setIsAllCollapsed=function(e){this.tree.isAllCollapsed!==e&&(this.tree.setIsAllCollapsed(e),e?(gb(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),aS(this.collapseOrExpandAllEl,OY.actionExpandAll())):(gb(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),aS(this.collapseOrExpandAllEl,OY.actionCollapseAll())))},t.prototype.getDisplayText=function(){return IY.name()},t.prototype.getViewType=function(){return FY},t.prototype.isItem=function(e){return e instanceof BY},Object.defineProperty(t.prototype,"root",{get:function(){return this.tree.infinityScroll.rootEl},enumerable:!1,configurable:!0}),t.prototype.attachDropHandler=function(){var e=this,t="move";this.app.dragManager.handleDrop(this.containerEl,(function(n,i,r){var o=MY(n,e.tree),a=[];"bookmarks"===i.source&&"bookmarks"===i.type&&(a=i.items);var s=PY(e.tree,o,a,r);if(!o)return null;if(!r){var l=function(t){var n=o.parentNode instanceof NY?o.parentNode.item:null;e.plugin.moveItem(t,n,o.idx)};if("bookmarks"===i.type)for(var c=0,u=i.items;c<u.length;c++){var h=u[c];o.parentNode!==h&&l(h.item)}else if("file"===i.type)t="copy",l(rY(i.file));else if("heading"===i.type){t="copy";var p="#"+Wx(i.heading.heading);l(rY(i.file,p))}else if("link"===i.type){if(i.file){t="copy";p=Bx(i.linktext).subpath;l(rY(i.file,p))}}else if("folder"===i.type){t="copy",pY([i.file]).forEach(l)}else if("files"===i.type){t="copy",pY(i.files).forEach(l)}}return{dropEffect:t,hoverEl:s,hoverClass:"is-active"}}))},t.prototype.onDeleteSelectedItems=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){return e.preventDefault(),t=this.tree,n=t.focusedItem,(i=t.selectedDoms).size>0?i.forEach((function(e){r.plugin.removeItem(e.item)})):n instanceof RY&&this.plugin.removeItem(n.item),[2]}))}))},t.prototype.getNodeId=function(e){return e instanceof HY?"root":"item-".concat(e.item.ctime)},t.prototype.createNewGroup=function(e){var t=aY();(e?e.items:this.plugin.items).push(t),this.plugin.saveData(),this.update(),this.getItemDom(t).startRename()},t.prototype.onContextMenu=function(e){var t=this;e.defaultPrevented||(new fw).addItem((function(e){return e.setIcon("lucide-folder-plus").setTitle(IY.actionNewGroup()).onClick((function(){return t.createNewGroup()}))})).showAtMouseEvent(e)},t.prototype.onFileOpen=function(e){var t=this;sP(this.root,(function(n){if("file"===n.item.type){var i=e&&n.item.path===e.path&&!n.item.subpath;n.setActive(i),t.activeDom||(t.activeDom=n)}}))},t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.dragSelectedBookmarks=function(e,t){var n=this.tree.selectedDoms;if(0===n.size||1===n.size&&n.has(t))return null;if(!n.has(t))return null;var i=[],r=[];n.forEach((function(e){r.push(e.item),i.push(e.selfEl)}));var o=Array.from(n);return o.sort((function(e,t){return e.selfEl.offsetTop-t.selfEl.offsetTop})),this.app.dragManager.updateSource(i,"is-being-dragged"),{source:"bookmarks",type:"bookmarks",icon:"lucide-bookmark",items:o,title:IY.labelBookmarkWithCount({count:n.size})}},t.prototype.getItemDom=function(e){var t=this.itemDoms.get(e);return t||(t="group"===e.type?new NY(this,this.tree,e):new RY(this,this.tree,e),this.itemDoms.set(e,t),this.attachDragHandler(t)),t},t.prototype.attachDragHandler=function(e){var t=this,n=this.plugin,i=this.app.dragManager;i.handleDrag(e.selfEl,(function(r){var o=t.dragSelectedBookmarks(r,e);return o||(t.tree.selectedDoms.has(e)||(t.tree.clearSelectedDoms(),t.tree.selectItem(e)),i.updateSource([e.selfEl],"is-being-dragged"),Cw(r.dataTransfer,n.getItemTitle(e.item)),{source:"bookmarks",type:"bookmarks",icon:"lucide-bookmark",items:[e],title:n.getItemTitle(e.item)})}))},t.prototype.update=function(){var e=this.root.vChildren;if(e.clear(),this.invalidStateEl.detach(),this.emptyEl.detach(),this.plugin.hasValidData){for(var t=!1,n=0,i=this.plugin.items;n<i.length;n++){var r=i[n],o=this.getItemDom(r);e.addChild(o),o.update(),o instanceof NY&&o.refreshChildren(),"none"!==o.el.style.display&&(t=!0)}t?this.emptyEl.detach():this.contentEl.appendChild(this.emptyEl)}else this.contentEl.appendChild(this.invalidStateEl);this.tree.infinityScroll.queueCompute()},t}(bI),zY=rf.plugins.bookmarks,qY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="bookmarks",t.name=zY.name(),t.description=zY.desc(),t.defaultOn=!0,t.hasValidData=!1,t.items=[],t.bookmarkLookup={},t.bookmarkedViews=new WeakMap,t.onItemsChanged=rt(t._onItemsChanged.bind(t),50),t}return f(t,e),t.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"bookmarks:open",name:zY.actionShow(),icon:"lucide-bookmark",callback:function(){n.app.workspace.ensureSideLeaf(FY,"left",{active:!0})}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-view",name:rf.plugins.bookmarks.actionBookmark(),icon:"lucide-bookmark-plus",checkCallback:function(t){var i=e.workspace.getMostRecentLeaf();if(i){var r=n.findBookmarkByView(i.view),o=!!r;if(r||(r=uY(i)),r)return t||new CY(n,r,o).open(),!0}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-search",name:rf.plugins.bookmarks.actionBookmarkSearch(),icon:"lucide-search",checkCallback:function(e){var t=n.app.internalPlugins.getEnabledPluginById("global-search");if(t){if(!e){var i=t.getGlobalSearchQuery();if(!i)return new CI(zY.msgNoSearchQuery()),!0;var r=lY(i);new CY(n,r,!1).open()}return!0}}}),t.registerGlobalCommand({id:"bookmarks:unbookmark-current-view",name:rf.plugins.bookmarks.actionRemoveBookmark(),icon:"lucide-bookmark-plus",checkCallback:function(e){var t=n.app.workspace.getMostRecentLeaf(),i=n.findBookmarkByView(t.view);if(i)return e||n.removeItem(i),!0}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-section",name:rf.plugins.bookmarks.actionBookmarkBlock(),icon:"lucide-bookmark-plus",editorCallback:function(e,t){var i,r=gF(t.editMode,e.getCursor("to")),o=void 0;if(r){if(Cx(r))i=rY(t.file,"#"+Wx(r.heading));else{var a=r.id;a||(a=$e(6),o=function(){dF(new zD,t.editMode,e.getCursor("to"),a)}),i=rY(t.file,"#^"+a)}e.somethingSelected()&&(i.title=e.getSelection().trim()),new CY(n,i,!1,o).open()}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-current-heading",name:rf.plugins.bookmarks.actionBookmarkHeading(),icon:"lucide-bookmark-plus",editorCallback:function(e,t){var i=function(e){var t=e.app,n=e.file,i=t.metadataCache.getFileCache(n);if(!i||!i.headings)return null;for(var r=e.editor.getCursor("to"),o=null,a=0,s=i.headings;a<s.length;a++){var l=s[a];if(l.position.start.line>r.line)break;o=l}return o}(t.editMode);if(i){var r=rY(t.file,"#"+Wx(i.heading));new CY(n,r,!1).open()}}}),t.registerGlobalCommand({id:"bookmarks:bookmark-all-tabs",name:rf.plugins.bookmarks.actionBookmarkAllTabs(),icon:"lucide-bookmark-plus",callback:function(){var e=n.app.workspace,t=e.rootSplit,i=e.floatingSplit,r=[];n.app.workspace.iterateLeaves([t,i],(function(e){var t=uY(e);t&&r.push(t)})),r.length>0&&new EY(n.app,n,r).open()}}),t.registerViewType(FY,(function(e){return new VY(e,n)})),t.registerEvent(e.vault.on("rename",this.onFileRename.bind(this),this)),t.registerEvent(e.workspace.on("layout-change",this.updateTabHeaders,this))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(FY,"left",{reveal:!1})},t.prototype.findBookmarkByView=function(e){return e instanceof EI&&e.file?this.bookmarkLookup[e.file.path]:null},t.prototype.onFileRename=function(e,t){var n=!1;hY(this.items,(function(i){"file"!==i.type&&"folder"!==i.type||i.path!==t||(i.path=e.path,n=!0)})),n&&this.onItemsChanged(!0)},t.prototype.updateTabHeaders=function(){var e=this;this.app.workspace.iterateAllLeaves((function(t){var n=e.findBookmarkByView(t.view),i=t.view;if(n){var r=e.bookmarkedViews.get(i);r||(r=i.addAction("lucide-bookmark","Bookmarked",(function(){var t=e.findBookmarkByView(i);t&&new CY(e,t,!0).open()}))).addClass("mod-bookmark","mod-filled"),e.bookmarkedViews.set(i,r)}else{var o=e.bookmarkedViews.get(i);o&&(e.bookmarkedViews.delete(i),o.detach())}}))},t.prototype.getBookmarks=function(){var e=[];return hY(this.items,(function(t){e.push(t)})),e},t.prototype.getItemTitle=function(e){if(!e.title){if("file"===e.type&&e.subpath)return de(e.path)+e.subpath;if("file"===e.type||"folder"===e.type){var t=this.app.vault.getAbstractFileByPath(e.path);return t instanceof Xy?t.getShortName():t instanceof $y?t.name:de(e.path)}if("search"===e.type)return e.query}return e.title},t.prototype.addItem=function(e,t){(t?t.items:this.items).push(e),this._onItemsChanged(!0)},t.prototype.editItem=function(e){this._onItemsChanged(!0)},t.prototype.removeItem=function(e){if(e){var t=cY(this.items,e);t?t.items.remove(e):this.items.remove(e),this._onItemsChanged(!0)}},t.prototype.moveItem=function(e,t,n){var i=cY(this.items,e),r=i?i.items:this.items,o=r.indexOf(e);r.remove(e);var a=t?t.items:this.items;-1!==o&&o<n&&r===a&&n--,a.splice(n,0,e),this._onItemsChanged(!0)},t.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.workspace.on("files-menu",this.onFilesMenu,this)),t.registerEvent(e.workspace.on("leaf-menu",this.onLeafMenu,this)),t.registerEvent(e.workspace.on("search:results-menu",this.onSearchResultsMenu,this)),t.registerEvent(e.workspace.on("tab-group-menu",this.onTabGroupMenu,this)),e.workspace.registerHoverLinkSource(FY,{display:this.name,defaultMod:!0}),[4,this.loadData()];case 1:return i.sent()||e.workspace.onLayoutReady((function(){return v(n,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.app.vault.readConfigJson("starred")];case 1:if((e=a.sent())&&e.hasOwnProperty("items")&&Array.isArray(e.items)){for(t=[],n=Date.now(),i=0,r=e.items;i<r.length;i++)("file"!==(o=r[i]).type&&"folder"!==o.type||this.app.vault.getAbstractFileByPath(o.path))&&("file"===o.type&&delete o.title,o.ctime||(o.ctime=n),t.push(o));this.items=t,this._onItemsChanged(!0)}return[2]}}))}))})),[2]}}))}))},t.prototype.loadData=function(){return v(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.plugin.loadData()];case 1:return e=t.sent(),this.hasValidData=void 0!==e,e&&e.hasOwnProperty("items")&&Array.isArray(e.items)&&(this.items=e.items),this.rebuildBookmarkCache(),[2,!!this.items]}}))}))},t.prototype.onExternalSettingsChange=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.loadData()];case 1:return e.sent(),this.onItemsChanged(!1),[2]}}))}))},t.prototype.onEditorMenu=function(e,t,n){var i=this,r=n.file;if(r){var o=t.getCursor(),a=Gw(t.getLine(o.line));if(a){var s="#"+Wx(a);e.addItem((function(e){return e.setTitle(zY.menuOptBookmarkHeading()).setIcon("lucide-bookmark").setSection("action").onClick((function(){var e=rY(r,s);new CY(i,e,!1).open()}))}))}else e.addItem((function(e){return e.setTitle(zY.menuOptBookmarkBlock()).setIcon("lucide-bookmark").setSection("action").onClick((function(){var e,r=gF(n.editMode,t.getCursor("to")),o=void 0;if(r){if(Cx(r))e=rY(n.file,"#"+Wx(r.heading));else{var a=r.id;a||(a=$e(6),o=function(){dF(new zD,n.editMode,t.getCursor("to"),a)}),e=rY(n.file,"#^"+a)}new CY(i,e,!1,o).open()}}))}))}},t.prototype.onFilesMenu=function(e,t,n,i){var r=this;e.addItem((function(e){return e.setSection("action").setTitle(zY.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=pY(t);new EY(r.app,r,e).open()}))}))},t.prototype.onFileMenu=function(e,t,n,i){var r=this,o=this.bookmarkLookup.hasOwnProperty(t.path);e.addItem((function(e){return e.setSection("action").setTitle(o?zY.actionEditBookmark():zY.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=r.bookmarkLookup[t.path];e||(t instanceof Xy?e=rY(t):t instanceof $y&&(e=oY(t))),e&&new CY(r,e,o).open()}))}))},t.prototype.onTabGroupMenu=function(e,t){var n=this,i=t.children.map(uY).filter(Boolean),r=i.length;r>0&&e.addItem((function(e){return e.setSection("action").setTitle(zY.actionBookmarkTabGroup({count:r})).setIcon("lucide-bookmark").onClick((function(){new EY(n.app,n,i).open()}))}))},t.prototype.onSearchResultsMenu=function(e,t){var n=this,i=t.getQuery();e.addItem((function(e){return e.setSection("action").setTitle(zY.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=lY(i);new CY(n,e,!1).open()}))}))},t.prototype.onLeafMenu=function(e,t){var n=this;if(t.view instanceof _K){var i=t.view.dataEngine.getOptions();e.addItem((function(e){return e.setSection("action").setTitle(zY.actionBookmark()).setIcon("lucide-bookmark").onClick((function(){var e=sY(i);new CY(n,e,!1).open()}))}))}},t.prototype._onItemsChanged=function(e){this.trigger("changed"),this.rebuildBookmarkCache(),this.updateTabHeaders(),e&&this.saveData()},t.prototype.saveData=function(){this.plugin.saveData({items:this.items})},t.prototype.rebuildBookmarkCache=function(){var e=this;this.bookmarkLookup={},hY(this.items,(function(t){("folder"===t.type||"file"===t.type&&!t.subpath)&&(e.bookmarkLookup[t.path]=t)}))},t.prototype.openBookmarkInLeaf=function(e,t,n){var i;return v(this,void 0,void 0,(function(){var r,o;return y(this,(function(a){switch(a.label){case 0:return"file"!==e.type?[3,1]:(r=e.path+(null!==(i=e.subpath)&&void 0!==i?i:""),t.openLinkText(r,"",n),[3,3]);case 1:return"graph"!==e.type?[3,3]:(o=this.app.internalPlugins.getEnabledPluginById("graph"))?[4,t.setViewState({type:"graph"})]:[3,3];case 2:a.sent(),t.view instanceof _K&&t.view.dataEngine.setOptions(e.options),o.options.options=e.options,a.label=3;case 3:return[2]}}))}))},t.prototype.openBookmark=function(e,t,n){return v(this,void 0,void 0,(function(){var i,r,o,a,s,l;return y(this,(function(c){if("file"===e.type||"graph"===e.type)return i=this.app.workspace.getLeaf(t),[2,this.openBookmarkInLeaf(e,i,n)];if("folder"===e.type)(r=this.app.vault.getAbstractFileByPath(e.path))&&(o=this.app.internalPlugins.getEnabledPluginById("file-explorer"))&&o.revealInFolder(r);else if("search"===e.type&&(a=e.query,s=this.app.internalPlugins.getEnabledPluginById("global-search"))){if(l=s.getGlobalSearchQuery(),!t||""===l)return s.openGlobalSearch(a),[2];l.contains(a)?s.openGlobalSearch(l.replace(a,"").trim()):s.openGlobalSearch("".concat(l.trim()," ").concat(a))}return[2]}))}))},t.prototype.openBookmarks=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:if(0===(n=e.filter((function(e){return"file"===e.type||"graph"===e.type}))).length)return[2];for(i=this.app.workspace.getLeaf(t),r=i.parent.children.length,o=[i],s=1;s<n.length;s++)a=new Nj(this.app),i.parent.insertChild(r,a),o.push(a),r++;s=0,l.label=1;case 1:return s<o.length?[4,this.openBookmarkInLeaf(n[s],o[s],{active:!1})]:[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return this.app.vault.getConfig("focusNewTab")&&this.app.workspace.setActiveLeaf(i,{focus:!0}),[2]}}))}))},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny),UY=rf.plugins.canvas;function WY(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];sw.hasOwnProperty(r)?t.push(sw[r]):t.push(r)}return t.join(Lt.isMacOS?" ":" + ")}var _Y=function(e){function t(t){var n,i=e.call(this,t.app)||this;i.modalEl.addClass("mod-canvas-help"),i.setTitle(UY.labelCanvasHelp());var r=i.contentEl.createDiv("canvas-help"),o=function(e,t){r.createDiv({cls:"canvas-instruction"},(function(n){n.createDiv({cls:"canvas-instruction-label",text:e}),n.createDiv({cls:"canvas-instruction-desc"},(function(e){for(var n=0,i=t;n<i.length;n++){var r=i[n];e.createSpan({cls:"setting-hotkey",text:WY(r)})}}))}))},a=[["Scroll"]],s=[["Shift","Scroll"]],l=[["Mod","Scroll"],["Space","Scroll"]];return"zoom"===t.view.plugin.options.defaultWheelBehavior&&(a=(n=[l,a])[0],l=n[1],s=[["Mod","Shift","Scroll"],["Shift","Space","Scroll"]]),o(UY.labelPan(),w([["Space","Drag"]],a,!0)),o(UY.labelPanHorizontal(),s),o(UY.labelZoom(),l),o(UY.actionZoomToFit(),[["Shift","1"]]),o(UY.actionZoomToSelection(),[["Shift","2"]]),o(UY.labelSelectAll(),[["Mod","A"]]),o(UY.labelAddRemoveSelection(),[["Shift","Click"],["Shift","Drag to select"]]),o(UY.actionCreateWithSize(),[["Mod","Drag to select"]]),o(UY.labelCloneCard(),[[Lt.isMacOS?"Alt":"Ctrl","Drag"]]),o(UY.labelConstrainMovementAxis(),[["Shift","Drag"]]),o(UY.labelDisableDragSnapping(),[[Lt.isMacOS?"Ctrl":"Alt"]]),o(UY.labelRemoveCard(),[["Backspace"],["Delete"]]),o(rf.setting.mobileToolbar.optionUndo(),[["Mod","Z"]]),o(rf.setting.mobileToolbar.optionRedo(),[["Mod","Y"],["Mod","Shift","Z"]]),i}return f(t,e),t}(LI);function jY(e){var t=e.getBoundingClientRect(),n=t.left+e.clientLeft,i=t.top+e.clientTop,r=e.clientWidth,o=e.clientHeight;return{left:n,top:i,width:r,height:o,cx:n+r/2,cy:i+o/2,minX:-r/2,minY:-o/2,maxX:r/2,maxY:o/2}}function GY(e,t,n,i){return{minX:e,minY:t,maxX:n,maxY:i}}function KY(e,t){return GY(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.x,t.x),Math.max(e.y,t.y))}function YY(e){var t=e.x,n=e.y;return GY(t,n,t+e.width,n+e.height)}function XY(e){var t=e.minX,n=e.minY;return vw(t,n,e.maxX-t,e.maxY-n)}function $Y(e){for(var t=GY(1/0,1/0,-1/0,-1/0),n=0,i=e;n<i.length;n++){var r=i[n];t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY)}return t}function ZY(e,t){return GY(e.minX-t,e.minY-t,e.maxX+t,e.maxY+t)}function QY(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&e.maxX>=t.maxX&&e.maxY>=t.maxY}function JY(e){var t=e.minX,n=e.minY;return gw((t+e.maxX)/2,(n+e.maxY)/2)}function eX(e,t){return gw(e.x-t.width/2,e.y-t.height/2)}function tX(e,t,n){return n&&(e="center"===n?eX(e,t):function(e,t){var n=e.x,i=e.y,r=e.width,o=e.height;switch(t){case"left":return gw(n,i-o/2);case"top":return gw(n-r/2,i);case"right":return gw(n-r,i-o/2);case"bottom":return gw(n-r/2,i-o)}}(yw(e,t),n)),yw(e,t)}function nX(e,t,n){var i,r,o,a=n.x,s=n.y,l=n.width,c=n.height;switch(e){case"top":case"bottom":i=vw(a,t.y,l,0),r=!1,o=!0;break;case"left":case"right":i=vw(t.x,s,0,c),r=!0,o=!1;break;case"topleft":case"topright":case"bottomleft":case"bottomright":i=vw(t.x,t.y,0,0),r=!0,o=!0}return{source:i,resizeX:r,resizeY:o}}var iX=rf.plugins.quickSwitcher,rX=rf.plugins.canvas,oX=function(e){function t(t,n,i){var r=e.call(this,t.app)||this;return r.emptyStateText=iX.labelNoNoteCreateNew(),r.allowCreateNewFile=!0,r.context="embed",r.canvas=t,r.handleClose=i,r.handleChoose=n,r.shouldShowUnresolved=!1,r.shouldShowMarkdown=!0,r.shouldShowImages=!0,r.shouldShowNonImageAttachments=!0,r.shouldShowAllTypes=t.app.vault.getConfig("showUnsupportedFiles"),r.setPlaceholder(rX.promptStartSearch()),r.setInstructions([{command:"↑↓",purpose:iX.instructionNavigate()},{command:"↵",purpose:iX.instructionOpen()},{command:"shift ↵",purpose:iX.instructionCreate()},{command:"esc",purpose:iX.instructionDismiss()}]),r.scope.register(["Shift"],"Enter",(function(e){return r.selectSuggestion(null,e),!1})),r}return f(t,e),t.prototype.showMarkdownAndCanvas=function(e){return this.shouldShowMarkdown=e,this.shouldShowCanvas=e,this},t.prototype.showAttachments=function(e){return this.shouldShowNonImageAttachments=e,this.shouldShowImages=e,this},t.prototype.onChooseSuggestion=function(e,t){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return e?[3,2]:(t=this.canvas.view.file.path,[4,this.app.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,t)]);case 1:return n=i.sent(),this.handleChoose(n),[2];case 2:return"file"!==e.type&&"alias"!==e.type||this.handleChoose(e.file),[2]}}))}))},t.prototype.onClose=function(){this.handleClose&&this.handleClose()},t}(fY),aX=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.emptyStateText=rX.labelNoImages(),r.context="embed",r.handleClose=i,r.handleChoose=n,r.shouldShowUnresolved=!1,r.shouldShowMarkdown=!1,r.shouldShowCanvas=!1,r.shouldShowAllTypes=!1,r.shouldShowImages=!0,r.shouldShowNonImageAttachments=!1,r.setPlaceholder(rX.promptStartSearch()),r.setInstructions([{command:"↑↓",purpose:iX.instructionNavigate()},{command:"↵",purpose:iX.instructionSelect()},{command:"esc",purpose:iX.instructionDismiss()}]),r}return f(t,e),t.prototype.onChooseSuggestion=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return e?("file"===e.type&&this.handleChoose(e.file),[2]):[2]}))}))},t.prototype.onClose=function(){this.handleClose&&this.handleClose()},t}(fY);function sX(e,t,n){for(var i=[1/0,null],r=0,o=t;r<o.length;r++)for(var a=o[r],s=a.getBBox(),l=0,c=[["top",g$(s,"top")],["right",g$(s,"right")],["bottom",g$(s,"bottom")],["left",g$(s,"left")]];l<c.length;l++){var u=c[l],h=u[0],p=bw(e,u[1]);if(p<=n)return{side:h,node:a};p<i[0]&&(i=[p,{side:h,node:a}])}return i[1]}function lX(e){var t=e.minX,n=e.minY,i=e.maxX,r=e.maxY;return[gw(t,n),gw(t,r),gw(i,n),gw(i,r),gw((t+i)/2,(n+r)/2)]}function cX(e){var t=Array.combine(e.map(lX));t.sort((function(e,t){return e.x!==t.x?e.x-t.x:e.y-t.y}));for(var n=[],i=null,r=0,o=t;r<o.length;r++){var a=o[r];i&&i.x===a.x&&i.y===a.y||(i=a,n.push(a))}return n}function uX(e,t){e.sort((function(e,n){return t(e)-t(n)}))}function hX(e,t,n,i){if(0===e.length||0===t.length)return null;var r="x"===i?pX:dX;uX(e,r),uX(t,r);for(var o=n,a=[],s=[],l=[],c=1/0,u=0,h=e;u<h.length;u++){var p=h[u],d=r(p);if(d!==c){c=d,(s.length>0||l.length>0)&&(a.push({src:s,dest:l}),s=[],l=[]);for(var f=0,g=t.length-1;f<=g;){var m=f+g>>1,v=d-r(t[m]);if(v>0)f=m+1;else{if(!(v<0)){f=g=m;break}g=m-1}}if(f!==g)if(g<0)g=0;else if(f>=t.length-1)f=t.length-1;else{var y=r(t[f])-d,b=d-r(t[g]);y===b?y===o?g=f:f=g:f=g=y<b?f:g}var w=r(t[f]),k=w-d;if(k===o||Math.abs(k)<Math.abs(o)){for(k!==o&&(a=[],s=[],l=[],o=k);f>0&&r(t[f-1])===w;)f--;for(;g<t.length-1&&r(t[g+1])===w;)g++;s.push(p);for(var C=f;C<=g;C++)l.push(t[C])}}else s.length>0&&r(s.last())===d&&s.push(p)}return(s.length>0||l.length>0)&&a.push({src:s,dest:l}),0===a.length?null:{matches:a,delta:o}}function pX(e){return e.x}function dX(e){return e.y}var fX=/^(\d+)$/;function gX(e,t){t=(t||"").trim();for(var n=0,i=Array.from(e.classList);n<i.length;n++){var r=i[n];r.startsWith("mod-canvas-color")&&e.removeClass(r)}if(e.style.removeProperty("--canvas-color"),e.toggleClass("is-themed",!!t),t)if(fX.test(t))e.addClass("mod-canvas-color-"+t);else{var o=GI(t);o&&(e.addClass("mod-canvas-color-custom"),e.style.setProperty("--canvas-color","".concat(o.r,",").concat(o.g,",").concat(o.b)))}}var mX=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/i;function vX(e){var t=e.match(mX);return t?UI({r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])}):e}var yX=function(){function e(e,t){var n=this;this.bbox=GY(0,0,0,0),this.resizerEls=[],this.canvas=e,this.selectionEl=createDiv("canvas-selection"+(t?" ".concat(t):""));for(var i=function(e){var t=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});t.addEventListener("pointerdown",(function(i){i.targetNode===t&&"mouse"===i.pointerType&&n.onResizePointerdown(i,e)})),"bottom"!==e&&"right"!==e||t.addEventListener("dblclick",(function(t){Array.from(n.canvas.selection).forEach((function(n){return n instanceof i$&&n.onResizeDblclick(t,e)}))})),r.resizerEls.push(t)},r=this,o=0,a=["top","right","bottom","left"];o<a.length;o++){i(a[o])}for(var s=function(e){var t=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});t.addEventListener("pointerdown",(function(t){n.onResizePointerdown(t,e)})),l.resizerEls.push(t)},l=this,c=0,u=["topright","bottomright","bottomleft","topleft"];c<u.length;c++){s(u[c])}}return e.prototype.update=function(e){this.bbox=e;var t=this.selectionEl,n=this.resizerEls;t.parentNode||this.canvas.canvasEl.appendChild(t);for(var i=0,r=n;i<r.length;i++){var o=r[i];t.appendChild(o)}var a=ZY(e,10);t.setCssStyles({transform:"translate(".concat(a.minX,"px, ").concat(a.minY,"px)"),width:"".concat(a.maxX-a.minX,"px"),height:"".concat(a.maxY-a.minY,"px")})},e.prototype.onResizePointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&"mouse"===e.pointerType&&(e.preventDefault(),ww(e,(function(){for(var i=n,r=i.bbox,o=i.canvas,a=XY(r),s=a.x,l=a.y,c=a.width,u=a.height,h=o.options,p=h.snapToGrid,d=h.snapToObjects,f=Array.from(o.selection),g=[],m=[],v=[],y=0,b=f;y<b.length;y++){var w=b[y];w.nodeEl.addClass("is-dragging"),m.push(w.rect);var k=w.getBBox();v.push({width:(k.maxX-k.minX)/c,height:(k.maxY-k.minY)/u}),g.push({minX:(k.minX-r.minX)/c,minY:(k.minY-r.minY)/u,maxX:(k.maxX-r.maxX)/c,maxY:(k.maxY-r.maxY)/u})}return n.canvas.handleDragWithPan(e,{move:function(e){var i,o,a=n.canvas,h=a.config.minContainerDimension,m=h/Math.min.apply(Math,v.map((function(e){return e.width}))),y=h/Math.min.apply(Math,v.map((function(e){return e.height}))),b=a.posFromEvt(e);a.clearSnapPoints();var w=0,k=0,C=nX(t,b,{x:s,y:l,width:c,height:u}),E=C.source,x=C.resizeX,S=C.resizeY;if(a.canSnap(e)){if(d){var M=cX([YY(E)]),T=cX(a.getViewportNodes(!0).map(YY)),D=a.snapDistance;x&&(i=hX(M,T,D,"x"))&&(w=i.delta),S&&(o=hX(M,T,D,"y"))&&(k=o.delta)}if(p){var A=a.gridSpacing;x&&!i&&(w=Math.round(b.x/A)*A-b.x),S&&!o&&(k=Math.round(b.y/A)*A-b.y)}}var L=b.x+w,P=b.y+k;t.contains("top")&&(r.minY=Math.min(r.maxY-y,P),r.minY!==P&&(o=null,k=r.minY-b.y)),t.contains("left")&&(r.minX=Math.min(r.maxX-m,L),r.minX!==L&&(i=null,w=r.minX-b.x)),t.contains("bottom")&&(r.maxY=Math.max(r.minY+y,P),r.maxY!==P&&(o=null,k=r.maxY-b.y)),t.contains("right")&&(r.maxX=Math.max(r.minX+m,L),r.maxX!==L&&(i=null,w=r.maxX-b.x));var I={x:r.minX,y:r.minY,width:r.maxX-r.minX,height:r.maxY-r.minY},O=f.some((function(e){return e.aspectRatio}));e.shiftKey&&(O=!O);var F=0;if(O&&0!==u&&(F=c/u),0!==F){var B=I.width,N=I.height;if(x&&S){var R=Math.max(B,N*F);N=Math.max(N,B/F),(B=R)!==I.width?i=null:N!==I.height&&(o=null)}else x?N=B/F:S&&(B=N*F);if(t.includes("left")){var H=s+c-B;w+=H-I.x,I.x=H}if(t.includes("top")){var V=l+u-N;k+=V-I.y,I.y=V}t.includes("right")&&(w+=B-I.width),t.includes("bottom")&&(k+=N-I.height),I.width=B,I.height=N}(i||o)&&a.renderSnapPoints(i,o,w,k);for(var z=YY(I),q=0;q<f.length;q++){var U=f[q],W=g[q],_={minX:z.minX+W.minX*I.width,minY:z.minY+W.minY*I.height,maxX:z.maxX+W.maxX*I.width,maxY:z.maxY+W.maxY*I.height};U.moveAndResize(XY(_))}},end:function(){o.requestSave()},cancel:function(){for(var e=0;e<f.length;e++){f[e].moveAndResize(m[e])}o.requestSave()},cleanup:function(){for(var e=0,t=f;e<t.length;e++){t[e].nodeEl.removeClass("is-dragging")}}})})))},e.prototype.hide=function(){this.selectionEl.remove()},e}(),bX=rf.interface,wX=rf.plugins.canvas,kX=function(){function e(e){var t=this;this.canvas=e;var n=this.containerEl=createDiv("canvas-menu-container");this.menuEl=n.createDiv("canvas-menu"),this.selection=new yX(e,"mod-group-selection");var i=this.selection.selectionEl;i.addEventListener("contextmenu",(function(e){t.canvas.onSelectionContextMenu(e),e.preventDefault()})),i.addEventListener("pointerdown",(function(e){e.isPrimary&&0===e.button&&!e.defaultPrevented&&ww(e,(function(){return t.canvas.handleSelectionDrag(e,i)}))}))}return e.prototype.render=function(e){var t,n=this,i=this,r=i.canvas,o=i.selection,a=i.containerEl,s=i.menuEl,l=r.app,c=Array.from(r.selection);if(0===c.length)return a.detach(),s.empty(),void o.hide();c.sort(ZX);var u=1===c.length,h=c.last(),p=$Y(c.map((function(e){return e.getBBox()}))),d=p.minX,f=p.maxX,g=p.minY;if(u?o.hide():o.update(p),r.isDragging)return a.detach(),void s.empty();if(r.wrapperEl.append(a),e){var m,v,y;s.empty();var b=function(e,t,n,i,o){if(!r.readonly||o){var a=e.createEl("button","clickable-icon");aS(a,t,{placement:"top"}),gb(a,n),a.addEventListener("click",i)}};b(s,wX.actionRemove(),"lucide-trash-2",(function(){r.deleteSelection()}));var w=h.color;b(s,wX.actionSetColor(),"lucide-palette",(function(e){var t=e.currentTarget;if(!v||(m.removeClass("is-active"),v.remove(),v=null,"color"!==y)){m=t,t.addClass("is-active"),v=s.createDiv("canvas-submenu"),y="color";var n=function(e,t){void 0===t&&(t=!0);for(var n=0,i=c;n<i.length;n++){i[n].setColor(e,!t)}w=e,t&&(v.remove(),v=null,r.requestSave())},i=!1,o=function(e){var t=v.createDiv("canvas-color-picker-item");w===e&&(t.addClass("is-active"),i=!0),e&&t.addClass("mod-canvas-color-"+e),t.addEventListener("click",(function(){return n(e)}))};o("");for(var a=1;a<=6;a++)o(String(a));var l=v.createDiv("canvas-color-picker-item canvas-color-picker-custom"),u=l.createEl("input",{type:"color"});if(l.style.setProperty("--canvas-color","0,0,0"),!i){var h=GI(w);h&&(u.value=UI(h),l.style.setProperty("--canvas-color","".concat(h.r,",").concat(h.g,",").concat(h.b)),l.addClass("is-active"))}u.addEventListener("change",(function(){return n(u.value)})),u.addEventListener("input",(function(){return n(u.value,!1)}))}}));var k=XT(KT(["Shift"],"2"));if(b(s,wX.actionZoomToSelection()+"\n(".concat(k,")"),"zoom-to-selection",(function(){r.zoomToSelection()}),!0),!u&&h instanceof i$&&b(s,wX.actionCreateGroup(),"create-group",(function(){var e=XY(ZY($Y(Array.from(r.selection.values()).map((function(e){return e.getBBox()}))),20));r.createGroupNode({pos:e,size:e})})),!u&&h instanceof i$||u&&h instanceof d$){var C=function(){if(u&&h instanceof d$){var e=h.getBBox();return[n.canvas.getContainingNodes(e).filter((function(e){return e!==h})),ZY(e,-20)]}var t=c.filter((function(e){return e instanceof i$}));return[t,$Y(t.map((function(e){return e.getBBox()})))]};b(s,wX.actionAlign(),"lucide-align-start-vertical",(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var n=function(e){for(var t=C(),n=t[0],i=t[1],o=0,a=n;o<a.length;o++){var s=a[o];"left"===e?s.moveTo(gw(i.minX,s.y)):"right"===e?s.moveTo(gw(i.maxX-s.width,s.y)):"top"===e?s.moveTo(gw(s.x,i.minY)):"bottom"===e?s.moveTo(gw(s.x,i.maxY-s.height)):"center"===e?s.moveTo(gw((i.minX+i.maxX-s.width)/2,s.y)):"middle"===e&&s.moveTo(gw(s.x,(i.minY+i.maxY-s.height)/2))}r.requestSave()},i=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){if("horizontal"===e){for(var o=0,a=0,s=n;a<s.length;a++){o+=s[a].width}n.sort((function(e,t){return e.x!==t.x?e.x-t.x:e.y-t.y}));for(var l=(i.maxX-i.minX-o)/(n.length-1),c=1;c<n.length-1;c++){var u=n[c-1];(f=n[c]).moveTo(gw(u.x+u.width+l,f.y))}}else if("vertical"===e){for(var h=0,p=0,d=n;p<d.length;p++){h+=d[p].height}n.sort((function(e,t){return e.y!==t.y?e.y-t.y:e.x-t.x}));for(l=(i.maxY-i.minY-h)/(n.length-1),c=1;c<n.length-1;c++){var f;u=n[c-1];(f=n[c]).moveTo(gw(f.x,u.y+u.height+l))}}r.requestSave()}},o=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){if("horizontal"===e)for(var o=0,a=n;o<a.length;o++){(c=a[o]).moveAndResize(vw(i.minX,c.y,i.maxX-i.minX,c.height))}else if("vertical"===e)for(var s=0,l=n;s<l.length;s++){var c;(c=l[s]).moveAndResize(vw(c.x,i.minY,c.width,i.maxY-i.minY))}r.requestSave()}},a=function(e){var t=C(),n=t[0],i=t[1];if(!(n.length<=1)){n.sort((function(e,t){return e.y-t.y}));for(var o=[],a=-1/0,s=0,l=n;s<l.length;s++){if((m=l[s]).y<a){o.last().push(m);var c=m.y+m.height;c<a&&(a=c)}else o.push([m]),a=m.y+m.height}for(var u=0,h=o;u<h.length;u++){(w=h[u]).sort((function(e,t){return e.x-t.x}))}var p=[].concat.apply([],o),d=p[0],f=r.gridSpacing;if("horizontal"===e)for(var g=1;g<p.length;g++){(m=p[g]).moveTo(gw(d.x+d.width+f,d.y)),d=m}else if("vertical"===e)for(g=1;g<p.length;g++){var m;(m=p[g]).moveTo(gw(d.x,d.y+d.height+f)),d=m}else if("grid"===e)for(var v=i.minY,y=0,b=o;y<b.length;y++){var w;(w=b[y])[0].moveTo(gw(i.minX,v));var k=w[0].height;for(g=1;g<w.length;g++){var E=w[g-1],x=w[g];x.moveTo(gw(E.x+E.width+f,v)),k=Math.max(k,x.height)}v+=k+f}r.requestSave()}},s=t.getBoundingClientRect();(new fw).setUseNativeMenu(!1).addItem((function(e){return e.setSection("align-h").setTitle(wX.actionAlignLeft()).setIcon("lucide-align-start-vertical").onClick((function(){return n("left")}))})).addItem((function(e){return e.setSection("align-h").setTitle(wX.actionAlignCenter()).setIcon("lucide-align-center-vertical").onClick((function(){return n("center")}))})).addItem((function(e){return e.setSection("align-h").setTitle(wX.actionAlignRight()).setIcon("lucide-align-end-vertical").onClick((function(){return n("right")}))})).addItem((function(e){return e.setSection("align-v").setTitle(wX.actionAlignTop()).setIcon("lucide-align-start-horizontal").onClick((function(){return n("top")}))})).addItem((function(e){return e.setSection("align-v").setTitle(wX.actionAlignMiddle()).setIcon("lucide-align-center-horizontal").onClick((function(){return n("middle")}))})).addItem((function(e){return e.setSection("align-v").setTitle(wX.actionAlignBottom()).setIcon("lucide-align-end-horizontal").onClick((function(){return n("bottom")}))})).addItem((function(e){return e.setSection("arrange").setTitle(wX.actionArrangeHorizontally()).setIcon("stack-horizontal").onClick((function(){return a("horizontal")}))})).addItem((function(e){return e.setSection("arrange").setTitle(wX.actionArrangeVertically()).setIcon("stack-vertical").onClick((function(){return a("vertical")}))})).addItem((function(e){return e.setSection("arrange").setTitle(wX.actionArrangeGrid()).setIcon("lucide-layout-grid").onClick((function(){return a("grid")}))})).addItem((function(e){return e.setSection("distribute").setTitle(wX.actionDistributeHorizontalSpacing()).setIcon("distribute-space-horizontal").onClick((function(){return i("horizontal")}))})).addItem((function(e){return e.setSection("distribute").setTitle(wX.actionDistributeVerticalSpacing()).setIcon("distribute-space-vertical").onClick((function(){return i("vertical")}))})).addItem((function(e){return e.setSection("justify").setTitle(wX.actionJustifyHorizontally()).setIcon("stretch-horizontal").onClick((function(){return o("horizontal")}))})).addItem((function(e){return e.setSection("justify").setTitle(wX.actionJustifyVertically()).setIcon("stretch-vertical").onClick((function(){return o("vertical")}))})).setParentElement(t).showAtPosition({x:s.x,y:s.bottom,width:s.width,overlap:!0})}}))}if(h instanceof C$&&c.every((function(e){return e instanceof C$}))){var E=c,x="lucide-arrow-right";"arrow"===h.from.end?x="lucide-move-horizontal":"none"===h.to.end&&(x="line-horizontal"),b(s,wX.labelLineDirection(),x,(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var n=function(e,t){for(var n=0,i=E;n<i.length;n++){var o=i[n];o.from.end=e,o.to.end=t,r.markDirty(o)}r.requestSave()},i=t.getBoundingClientRect();(new fw).setUseNativeMenu(!1).addItem((function(e){return e.setTitle(wX.labelNondirectional()).setIcon("line-horizontal").setChecked("line-horizontal"===x).onClick((function(){return n("none","none")}))})).addItem((function(e){return e.setTitle(wX.labelUnidirectional()).setIcon("lucide-arrow-right").setChecked("lucide-arrow-right"===x).onClick((function(){return n("none","arrow")}))})).addItem((function(e){return e.setTitle(wX.labelBidirectional()).setIcon("lucide-move-horizontal").setChecked("lucide-move-horizontal"===x).onClick((function(){return n("arrow","arrow")}))})).setParentElement(t).showAtPosition({x:i.x,y:i.bottom,width:i.width,overlap:!0})}}))}if(u&&h instanceof C$&&h.labelElement){var S=h;b(s,wX.actionRemoveLabel(),"lucide-x-square",(function(){S.setLabel(""),S.labelElement.destroy(),r.requestSave(),n.render(!0)}))}if(u)if(h instanceof C$){var M=h;b(s,wX.actionEditLabel(),"lucide-edit",(function(){M.editLabel()}))}else if(h instanceof i$&&h.isEditable()){var T=h,D=T instanceof d$,A=D?wX.actionEditLabel():bX.menu.edit();if(b(s,A,"lucide-edit",(function(){T.startEditing()})),D){var L=T,P=L.bgFile?wX.actionEditBackground():wX.actionSetBackground();b(s,P,"lucide-image",(function(e){var t=e.currentTarget;if(!t.hasClass("has-active-menu")){var i=function(){new aX(l,(function(e){L.setBackgroundFile(e),r.requestSave(),n.render(!0)})).open()};if(L.bgPath){var o=function(e){L.setBackgroundStyle(e),r.requestSave()},a=t.getBoundingClientRect();(new fw).setUseNativeMenu(!1).addItem((function(e){return e.setSection("image").setTitle(wX.actionReplaceBackground()).setIcon("lucide-repeat").onClick(i)})).addItem((function(e){return e.setSection("image").setTitle(wX.actionRemoveBackground()).setIcon("lucide-image-off").onClick((function(){L.setBackgroundFile(null),r.requestSave(),n.render(!0)}))})).addItem((function(e){return e.setSection("style").setTitle(wX.optionBackgroundCover()).setIcon("lucide-scaling").setChecked(!L.bgStyle||"cover"===L.bgStyle).onClick((function(){return o("cover")}))})).addItem((function(e){return e.setSection("style").setTitle(wX.optionBackgroundRatio()).setIcon("aspect-ratio").setChecked("ratio"===L.bgStyle).onClick((function(){return o("ratio")}))})).addItem((function(e){return e.setSection("style").setTitle(wX.optionBackgroundRepeat()).setIcon("lucide-layout-grid").setChecked("repeat"===L.bgStyle).onClick((function(){return o("repeat")}))})).setParentElement(t).showAtPosition({x:a.x,y:a.bottom,width:a.width,overlap:!0})}else i()}}))}}}var I=r.scale,O=r.canvasRect,F=(d+f)/2,B=g-10/I;if(c.some((function(e){return e instanceof d$}))?B=g-35/Math.sqrt(I):h instanceof l$&&(B=g-30/Math.sqrt(I)),h instanceof C$&&u){var N=h.getCenter(),R=(null===(t=h.labelElement)||void 0===t?void 0:t.wrapperEl.clientHeight)||20;B=Math.min(B,N.y-20/I-R/2)}var H=s.getBoundingClientRect(),V=H.width,z=H.height;F=(F-r.x)*I-V/2+O.width/2,B=(B-r.y)*I-z+O.height/2,F=Math.clamp(F,10,O.width-V-10),B=Math.clamp(B,10,O.height-z-10),a.setCssStyles({left:"".concat(F,"px"),top:"".concat(B,"px")})},e.prototype.updateZIndex=function(e){this.containerEl.style.zIndex=String(e)},e}();function CX(e,t,n,i,r){EX(e,t,n||0,i||e.length-1,r||SX)}function EX(e,t,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);EX(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),r)}var u=e[t],h=n,p=i;for(xX(e,n,t),r(e[i],u)>0&&xX(e,n,i);h<p;){for(xX(e,h,p),h++,p--;r(e[h],u)<0;)h++;for(;r(e[p],u)>0;)p--}0===r(e[n],u)?xX(e,n,p):xX(e,++p,i),p<=t&&(n=p+1),t<=p&&(i=p-1)}}function xX(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function SX(e,t){return e<t?-1:e>t?1:0}const MX=function(){function e(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(e){var t=this.data,n=[];if(!NX(e,t))return n;for(var i=this.toBBox,r=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?i(a):a;NX(e,s)&&(t.leaf?n.push(a):BX(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n},e.prototype.collides=function(e){var t=this.data;if(!NX(e,t))return!1;for(var n=[];t;){for(var i=0;i<t.children.length;i++){var r=t.children[i],o=t.leaf?this.toBBox(r):r;if(NX(e,o)){if(t.leaf||BX(e,o))return!0;n.push(r)}}t=n.pop()}return!1},e.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data=RX([]),this},e.prototype.remove=function(e,t){if(!e)return this;for(var n,i,r,o=this.data,a=this.toBBox(e),s=[],l=[];o||s.length;){if(o||(o=s.pop(),i=s[s.length-1],n=l.pop(),r=!0),o.leaf){var c=TX(e,o.children,t);if(-1!==c)return o.children.splice(c,1),s.push(o),this._condense(s),this}r||o.leaf||!BX(o,a)?i?(n++,o=i.children[n],r=!1):o=null:(s.push(o),l.push(n),n=0,i=o,o=o.children[0])}return this},e.prototype.toBBox=function(e){return e},e.prototype.compareMinX=function(e,t){return e.minX-t.minX},e.prototype.compareMinY=function(e,t){return e.minY-t.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return this.data=e,this},e.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},e.prototype._build=function(e,t,n,i){var r,o=n-t+1,a=this._maxEntries;if(o<=a)return DX(r=RX(e.slice(t,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=RX([])).leaf=!1,r.height=i;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));HX(e,t,n,l,this.compareMinX);for(var c=t;c<=n;c+=l){var u=Math.min(c+l-1,n);HX(e,c,u,s,this.compareMinY);for(var h=c;h<=u;h+=s){var p=Math.min(h+s-1,u);r.children.push(this._build(e,h,p,i-1))}}return DX(r,this.toBBox),r},e.prototype._chooseSubtree=function(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=OX(l),u=(h=e,p=l,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-c);u<o?(o=u,r=c<r?c:r,a=l):u===o&&c<r&&(r=c,a=l)}t=a||t.children[0]}var h,p;return t},e.prototype._insert=function(e,t,n){var i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),LX(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)},e.prototype._split=function(e,t){var n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=RX(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,DX(n,this.toBBox),DX(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)},e.prototype._splitRoot=function(e,t){this.data=RX([e,t]),this.data.height=e.height+1,this.data.leaf=!1,DX(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(e,t,n){for(var i,r,o,a,s,l,c,u=1/0,h=1/0,p=t;p<=n-t;p++){var d=AX(e,0,p,this.toBBox),f=AX(e,p,n,this.toBBox),g=(r=d,o=f,a=void 0,s=void 0,l=void 0,c=void 0,a=Math.max(r.minX,o.minX),s=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),c=Math.min(r.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,c-s)),m=OX(d)+OX(f);g<u?(u=g,i=p,h=m<h?m:h):g===u&&m<h&&(h=m,i=p)}return i||n-t},e.prototype._chooseSplitAxis=function(e,t,n){var i=e.leaf?this.compareMinX:PX,r=e.leaf?this.compareMinY:IX;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)},e.prototype._allDistMargin=function(e,t,n,i){e.children.sort(i);for(var r=this.toBBox,o=AX(e,0,t,r),a=AX(e,n-t,n,r),s=FX(o)+FX(a),l=t;l<n-t;l++){var c=e.children[l];LX(o,e.leaf?r(c):c),s+=FX(o)}for(l=n-t-1;l>=t;l--){c=e.children[l];LX(a,e.leaf?r(c):c),s+=FX(a)}return s},e.prototype._adjustParentBBoxes=function(e,t,n){for(var i=n;i>=0;i--)LX(t[i],e)},e.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():DX(e[t],this.toBBox)},e}();function TX(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function DX(e,t){AX(e,0,e.children.length,t,e)}function AX(e,t,n,i,r){r||(r=RX(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];LX(r,e.leaf?i(a):a)}return r}function LX(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function PX(e,t){return e.minX-t.minX}function IX(e,t){return e.minY-t.minY}function OX(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function FX(e){return e.maxX-e.minX+(e.maxY-e.minY)}function BX(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function NX(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function RX(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function HX(e,t,n,i,r){for(var o=[t,n];o.length;)if(!((n=o.pop())-(t=o.pop())<=i)){var a=t+Math.ceil((n-t)/i/2)*i;CX(e,a,t,n,r),o.push(t,a,a,n)}}var VX=function(){function e(e){void 0===e&&(e=activeDocument);var t=this;this.showTimeout=0,this.doc=e;var n=this.el=createDiv({cls:"progress-bar"});this.messageEl=n.createDiv({cls:"progress-bar-message u-center-text",text:""}),n.createDiv("progress-bar-indicator",(function(e){e.createDiv("progress-bar-line"),t.lineEl=e.createDiv("progress-bar-subline"),t.line1El=e.createDiv("progress-bar-subline mod-increase"),t.line2El=e.createDiv("progress-bar-subline mod-decrease")})),n.addEventListener("click",(function(e){e.preventDefault()})),this.setUnknownProgress()}return e.prototype.delayedShow=function(){var e=this;return this.doc.body.appendChild(this.el),this.el.style.opacity="0",this.showTimeout=window.setTimeout((function(){return e.show()}),300),this},e.prototype.show=function(){return window.clearTimeout(this.showTimeout),this.showTimeout=0,this.doc.body.appendChild(this.el),this.el.style.opacity="",this},e.prototype.hide=function(){return window.clearTimeout(this.showTimeout),this.showTimeout=0,this.el.remove(),this},e.prototype.setMessage=function(e){return this.messageEl.setText(e),this},e.prototype.setUnknownProgress=function(){return this.lineEl.hide(),this.line1El.show(),this.line2El.show(),this},e.prototype.setProgress=function(e,t){this.lineEl.show(),this.line1El.hide(),this.line2El.hide();var n=(e/t*100).toFixed(4);return this.lineEl.style.width="".concat(n,"%"),this},e}(),zX=function(){function e(e){this.data=[],this.current=0,this.max=e}return e.prototype.canUndo=function(){return this.current>0},e.prototype.undo=function(){return this.canUndo()?(this.current--,this.data[this.current]):null},e.prototype.canRedo=function(){return this.current<this.data.length-1},e.prototype.redo=function(){return this.canRedo()?(this.current++,this.data[this.current]):null},e.prototype.push=function(e){var t=this.data;t.length-1>this.current&&(t.length=this.current+1),t.push(e),t.length>=this.max&&t.shift(),this.current=t.length-1},e.prototype.replace=function(e){var t=this.data;0===t.length?(t.push(e),this.current=0):t[this.current]=e},e.prototype.clear=function(){this.data.length=0,this.current=0},e}(),qX=rf.plugins.canvas,UX=rf.interface,WX="0.7",_X=.01,jX=.93,GX=-1.7,KX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.insert=function(t){return t.bbox=t.getBBox(),e.prototype.insert.call(this,t),this},t.prototype.remove=function(t){return t.bbox?(e.prototype.remove.call(this,t),t.bbox=null,this):this},t.prototype.toBBox=function(e){return e.bbox},t}(MX),YX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compareMinX=function(e,t){return e.x-t.x},t.prototype.compareMinY=function(e,t){return e.y-t.y},t}(KX),XX=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.compareMinX=function(e,t){var n=e.getBBox(),i=t.getBBox();return n.minX-i.minX},t.prototype.compareMinY=function(e,t){var n=e.getBBox(),i=t.getBBox();return n.minY-i.minY},t}(KX),$X=function(){function e(e){var t=this;this.config={zoomMultiplier:.5,objectSnapDistance:15,minContainerDimension:50,defaultTextNodeDimensions:{width:250,height:60},defaultFileNodeDimensions:{width:400,height:400}},this.requestUpdateFileOpen=rt(this.updateFileOpen.bind(this),200),this.zIndexCounter=1,this.isHoldingSpace=!1,this.readonly=!1,this.history=new zX(100),this.data={},this.requestPushHistory=rt(this.pushHistory.bind(this),250,!0),this.x=0,this.y=0,this.zoom=0,this.scale=1,this.tx=0,this.ty=0,this.tZoom=0,this.finishViewportAnimation=!1,this.zoomToFitQueued=!1,this.screenshotting=!1,this.nodes=new Map,this.nodeIndex=new YX,this.edges=new Map,this.edgeIndex=new XX,this.edgeFrom=new Qe,this.edgeTo=new Qe,this.staleSelection=null,this.selection=new Set,this.selectionChanged=!1,this.keys={},this.isDragging=!1,this.viewportChanged=!0,this.moved=new Set,this.dirty=new Set,this.frame=0,this.wasAnimating=!1,this.pauseAnimation=0,this.lastNodesInViewport=new Set,this.lastEdgesInViewport=new Set,this.onGlobalKeydown=function(e){if(" "===e.key&&!t.isHoldingSpace){if(1===t.selection.size){var n=Array.from(t.selection)[0];if(n instanceof i$&&n.isEditing)return}t.wrapperEl.appendChild(t.moverEl),t.moverEl.style.zIndex=String(t.zIndexCounter+4),t.isHoldingSpace=!0}},this.onGlobalKeyup=function(e){" "===e.key&&(t.moverEl.detach(),t.isHoldingSpace=!1)},this.pointer={x:0,y:0},this.pointerFrame=0,this.app=e.app,this.view=e,this.menu=new kX(this);var n=this.wrapperEl=e.contentEl.createDiv({cls:"canvas-wrapper",attr:{tabIndex:-1}});n.onNodeInserted((function(){return t.onResize()})),n.addEventListener("keydown",this.onKeydown.bind(this)),n.addEventListener("pointerdown",this.onPriorityPointerdown.bind(this),{capture:!0}),n.addEventListener("pointerdown",this.onPointerdown.bind(this)),n.addEventListener("dblclick",this.onDoubleClick.bind(this)),n.addEventListener("contextmenu",this.onContextMenu.bind(this)),n.addEventListener("wheel",this.onWheel.bind(this)),Lt.isMobile||n.addEventListener("pointermove",this.onPointermove.bind(this)),n.addEventListener("touchstart",(function(n){n.stopPropagation(),t.app.workspace.setActiveLeaf(e.leaf)}));var i=n.createSvg("svg","canvas-background"),r=$e(16);this.backgroundPatternEl=i.createSvg("pattern",{attr:{id:r,patternUnits:"userSpaceOnUse"}},(function(e){e.createSvg("circle",{attr:{cx:WX,cy:WX,r:WX}})})),i.createSvg("rect",{attr:{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(r,")")}}),(this.moverEl=createDiv("canvas-mover")).addEventListener("pointerdown",this.handleMoverPointerdown.bind(this)),this.cardMenuEl=n.createDiv("canvas-card-menu",(function(e){e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){aS(e,qX.actionDragToAddCard(),{placement:"top"}),gb(e,"lucide-sticky-note"),e.addEventListener("click",(function(){t.createTextNode({pos:t.posCenter(),position:"center"})})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultTextNodeDimensions;t.dragTempNode(e,n,(function(e){t.deselectAll(),t.createTextNode({pos:e,size:n})}))}))})),e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){aS(e,qX.actionDragToAddNote(),{placement:"top"}),gb(e,"lucide-file-text"),e.addEventListener("click",(function(){new oX(t,(function(e){t.createFileNode({pos:t.posCenter(),file:e})})).showAttachments(!1).open()})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultFileNodeDimensions;t.dragTempNode(e,n,(function(e){new oX(t,(function(i){t.createFileNode({pos:e,size:n,file:i})})).showAttachments(!1).open()}))}))})),e.createDiv({cls:"canvas-card-menu-button mod-draggable"},(function(e){aS(e,qX.actionDragToAddMedia(),{placement:"top"}),gb(e,"lucide-file-image"),e.addEventListener("click",(function(){new oX(t,(function(e){t.createFileNode({pos:t.posCenter(),position:"center",file:e})})).showMarkdownAndCanvas(!1).open()})),e.addEventListener("pointerdown",(function(e){var n=t.config.defaultFileNodeDimensions;t.dragTempNode(e,n,(function(e){new oX(t,(function(i){t.createFileNode({pos:e,size:n,file:i})})).showMarkdownAndCanvas(!1).open()}))}))}))})),this.canvasControlsEl=n.createDiv("canvas-controls",(function(e){e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){t.quickSettingsButton=e,t.setReadonly(t.readonly),e.addEventListener("click",(function(n){if(t.readonly)t.setReadonly(!t.readonly),t.view.saveLocalData();else{if(e.hasClass("has-active-menu"))return;var i=new fw;t.showQuickSettingsMenu(i),i.setParentElement(e).showAtMouseEvent(n)}}))}))})),e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){gb(e,"lucide-plus"),aS(e,rf.commands.zoomIn(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(t.config.zoomMultiplier)}))})),e.createDiv("canvas-control-item",(function(e){gb(e,"lucide-rotate-cw"),aS(e,rf.commands.resetZoom(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(-t.zoom)}))})),e.createDiv("canvas-control-item",(function(e){gb(e,"lucide-maximize");var n=XT(KT(["Shift"],"1"));aS(e,qX.actionZoomToFit()+"\n(".concat(n,")"),{placement:"left"}),e.addEventListener("click",(function(){t.zoomToFit()}))})),e.createDiv("canvas-control-item",(function(e){gb(e,"lucide-minus"),aS(e,rf.commands.zoomOut(),{placement:"left"}),e.addEventListener("click",(function(){t.zoomBy(-t.config.zoomMultiplier)}))}))})),e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){t.undoBtnEl=e,gb(e,"lucide-undo-2"),aS(e,rf.setting.mobileToolbar.optionUndo(),{placement:"left"}),e.addEventListener("click",(function(){t.undo()}))})),e.createDiv("canvas-control-item",(function(e){t.redoBtnEl=e,gb(e,"lucide-redo-2"),aS(e,rf.setting.mobileToolbar.optionRedo(),{placement:"left"}),e.addEventListener("click",(function(){t.redo()}))}))})),Lt.isDesktop&&e.createDiv("canvas-control-group",(function(e){e.createDiv("canvas-control-item",(function(e){gb(e,"lucide-help-circle"),aS(e,qX.labelCanvasHelp(),{placement:"left"}),e.addEventListener("click",(function(){new _Y(t).open()}))}))}))}));var o=this.canvasEl=n.createDiv("canvas");this.edgeContainerEl=o.createSvg("svg","canvas-edges"),this.edgeEndContainerEl=o.createSvg("svg","canvas-edges"),this.app.dragManager.handleDrop(n,(function(e,n,i){if(n){if(!i)switch(n.type){case"file":case"link":(u=n.file)instanceof Xy&&t.createFileNode({pos:t.posFromEvt(e),file:u}),t.wrapperEl.focus();break;case"files":var r=n.files;if(r.length){for(var o=new Set,a=0,s=r;a<s.length;a++){(u=s[a])instanceof $y?Zy.recurseChildren(u,(function(e){e instanceof Xy&&o.add(e)})):u instanceof Xy&&o.add(u)}var l=Array.from(o);l.sort((function(e,t){return e.basename.localeCompare(t.basename)}));var c=t.createFileNodes(l,t.posFromEvt(e));t.deselectAll(),c.forEach((function(e){return t.select(e)})),t.requestSave()}t.wrapperEl.focus();break;case"folder":var u;if((u=n.file)instanceof $y){var h=[];Zy.recurseChildren(u,(function(e){e instanceof Xy&&h.push(e)})),h.sort((function(e,t){return e.basename.localeCompare(t.basename)})),t.createFileNodes(h,t.posFromEvt(e)),t.requestSave(),t.wrapperEl.focus();break}}return{dropEffect:"copy"}}e.preventDefault();var p=e.dataTransfer;if(xw(e.dataTransfer))return i||t.app.importAttachments(Sw(p,"drop",!0),null).then((function(n){t.createFileNodes(n,t.posFromEvt(e)),t.requestSave()})),{dropEffect:"copy"};var d=e.dataTransfer.getData("text/plain");if(Mt(d))return i||t.createLinkNode({pos:t.posFromEvt(e),position:"center",url:d}),{dropEffect:"link"};if(d){if(!i){var f=t.posFromEvt(e);t.createTextNode({pos:f,position:"center",text:d})}return{dropEffect:"copy"}}}),!0),this.canvasRect=jY(this.wrapperEl),this.nodeInteractionLayer=new n$(this)}return Object.defineProperty(e.prototype,"options",{get:function(){return this.view.plugin.options},enumerable:!1,configurable:!0}),e.prototype.createPlaceholder=function(){var e;this.canvasPlaceholderEl||(e=Lt.isMobile?createFragment((function(e){e.appendText(qX.labelDragPan()),e.createEl("br"),e.appendText(qX.labelPinchZoom()),e.createEl("br"),e.appendText(qX.labelLongpress())})):createFragment((function(e){e.appendText(qX.labelDragFromBelow()),e.createEl("br"),e.appendText(qX.labelSpaceDragPan()),e.createEl("br"),e.appendText("".concat(sw.Mod," + ").concat(qX.labelScrollToZoom()))})),this.canvasPlaceholderEl=this.canvasEl.createDiv({cls:"canvas-placeholder-message",text:e}))},e.prototype.getData=function(){var e=[],t=[],n=Array.from(this.nodes.values());n.sort(ZX);for(var i=0,r=n;i<r.length;i++){var o=r[i];e.push(o.getData())}for(var a=0,s=Array.from(this.edges.values());a<s.length;a++){var l=s[a];t.push(l.getData())}return g(g({},this.data),{nodes:e,edges:t})},e.prototype.getSelectionData=function(e){void 0===e&&(e=this.selection);var t=[],n=[],i=Array.from(e);i.sort(ZX);for(var r=new Set,o=0,a=i;o<a.length;o++){var s=a[o];if(s instanceof i$){t.push(s.getData());for(var l=0,c=this.getEdgesForNode(s);l<c.length;l++){var u=c[l];r.add(u)}}}for(var h=0,p=Array.from(r);h<p.length;h++){u=p[h];e.has(u.from.node)&&e.has(u.to.node)&&n.push(u.getData())}return{nodes:t,edges:n,center:JY($Y(i.map((function(e){return e.getBBox()}))))}},e.prototype.updateFileOpen=function(e){var t=this.app,n=this.view,i=n.leaf;i===t.workspace.activeLeaf&&i.view===n&&(null===e&&(e=this.view.file),this.app.workspace.trigger("file-open",e))},e.prototype.setData=function(e){e&&(0!==Object.keys(e).length?(this.importData(e,!0),this.data=e,this.pushHistory(e)):this.createPlaceholder())},e.prototype.importData=function(e,t){var n=this,i=e.nodes,r=e.edges;if(i&&Array.isArray(i)){for(var o=this.nodes,a=new Set,s=0,l=0,c=i;l<c.length;l++){var u=c[l],h=u.id,p=void 0;if(o.has(h))p=o.get(h);else{if("file"===u.type)p=new l$(this,h);else if("text"===u.type)p=new c$(this,h);else if("link"===u.type)p=new h$(this,h);else{if("group"!==u.type)continue;p=new d$(this,h)}this.addNode(p),this.markMoved(p)}p.setData(u),a.add(p),p.zIndex<s&&p.updateZIndex(),s=p.zIndex}if(t&&o.forEach((function(e){a.has(e)||n.removeNode(e)})),r&&Array.isArray(r)){for(var d=this.edges,f=new Set,g=0,m=r;g<m.length;g++){var v=m[g],y=(h=v.id,v.fromNode),b=v.fromSide,w=v.fromEnd,k=v.toNode,C=v.toSide,E=v.toEnd;if(o.has(y)&&o.has(k)){var x=void 0;d.has(h)?x=d.get(h):(x=new C$(this,h,{node:o.get(y),side:b,end:w||w$},{node:o.get(k),side:C,end:E||k$}),this.addEdge(x),this.markMoved(x)),f.add(x),x.setData(v)}else d.has(h)&&this.removeEdge(d.get(h))}return t&&d.forEach((function(e){f.has(e)||n.removeEdge(e)})),a}}},e.prototype.load=function(){window.addEventListener("keydown",this.onGlobalKeydown),window.addEventListener("keyup",this.onGlobalKeyup)},e.prototype.unload=function(){window.removeEventListener("keydown",this.onGlobalKeydown),window.removeEventListener("keyup",this.onGlobalKeyup),this.clear(),this.cancelFrame()},e.prototype.clear=function(){var e=this;this.staleSelection=[],this.selection.clear(),this.nodes.forEach((function(t){return e.removeNode(t)})),this.edges.forEach((function(t){return e.removeEdge(t)})),this.nodeIndex.clear(),this.history.clear(),this.data={},this.requestPushHistory.cancel(),this.requestUpdateFileOpen.cancel(),this.setViewport(0,0,0),this.setReadonly(!1)},e.prototype.requestSave=function(e){void 0===e&&(e=!0),this.data=this.getData(),e&&this.requestPushHistory(this.data),this.view.requestSave()},e.prototype.overrideHistory=function(){this.requestPushHistory.run(),this.data=this.getData(),this.history.replace(this.data),this.updateHistoryUI(),this.view.requestSave()},e.prototype.undo=function(){var e=this.history;e.canUndo()&&this.applyHistory(e.undo())},e.prototype.redo=function(){var e=this.history;e.canRedo()&&this.applyHistory(e.redo())},e.prototype.applyHistory=function(e){this.importData(e,!0),this.data=e,this.view.requestSave(),this.updateHistoryUI()},e.prototype.pushHistory=function(e){this.history.push(e),this.updateHistoryUI()},e.prototype.updateHistoryUI=function(){var e=this.history;this.undoBtnEl.toggleClass("is-disabled",!e.canUndo()),this.redoBtnEl.toggleClass("is-disabled",!e.canRedo())},Object.defineProperty(e.prototype,"zoomBreakpoint",{get:function(){return GX-(this.options.zoomBreakpoint||0)},enumerable:!1,configurable:!0}),e.prototype.setViewport=function(e,t,n){e===this.x&&t===this.y&&n===this.zoom||(this.x=this.tx=e,this.y=this.ty=t,this.zoom=this.tZoom=n,this.markViewportChanged())},e.prototype.zoomBy=function(e,t){var n=this.tZoom;n+=e,this.tZoom=n,t||(t=gw(0,0)),this.zoomCenter=t,this.markViewportChanged()},e.prototype.panTo=function(e,t){this.x=e,this.y=t,this.tx=e,this.ty=t,this.markViewportChanged()},e.prototype.panBy=function(e,t){this.x+=e,this.y+=t,this.tx=this.x,this.ty=this.y,this.markViewportChanged()},e.prototype.zoomToSelection=function(){var e=this.selection;if(0!==e.size){var t=$Y(Array.from(e.values()).map((function(e){return e.getBBox()})));this.zoomToBbox(t)}},e.prototype.nudgeSelection=function(e,t){var n=Array.from(this.selection).filter((function(e){return e instanceof i$}));if(0!==n.length){var i=e.shiftKey?5*this.gridSpacing:this.gridSpacing,r={x:0,y:0};switch(t){case"down":r.y=i;break;case"up":r.y=-i;break;case"left":r.x=-i;break;case"right":r.x=i}if(this.options.snapToGrid){var o=this.gridSpacing,a=$Y(Array.from(this.selection).map((function(e){return e.getBBox()}))),s={x:Math.round(a.minX%o),y:Math.round(a.minY%o)};("left"===t||"right"===t)&&s.x>0?(r.x=-s.x,"right"===t&&(r.x+=o)):("up"===t||"down"===t)&&s.y>0&&(r.y=-s.y,"down"===t&&(r.x+=o))}for(var l=0,c=n;l<c.length;l++){var u=c[l];u.moveTo({x:u.x+r.x,y:u.y+r.y})}this.requestSave()}},e.prototype.zoomToFit=function(){var e=this.nodes;if(0!==e.size){var t=$Y(Array.from(e.values()).map((function(e){return e.getBBox()})));this.zoomToBbox(t)}},e.prototype.zoomToBbox=function(e){var t=this.canvasRect,n=t.width,i=t.height;if(0!==n&&0!==i){var r=n/(1.1*(e.maxX-e.minX)),o=i/(1.1*(e.maxY-e.minY)),a=Math.clamp(Math.min(r,o),-4,1),s=JY(e);this.tx=s.x,this.ty=s.y,this.tZoom=Math.log2(a),this.markViewportChanged()}},e.prototype.panIntoView=function(e,t){void 0===t&&(t=this.gridSpacing),e=ZY(e,t);var n=this.getViewportBBox();e.maxX-e.minX>n.maxX-n.minX||e.maxY-e.minY>n.maxY-n.minY?this.zoomToBbox(e):(e.minX<n.minX&&(this.tx=this.x+e.minX-n.minX),e.minY<n.minY&&(this.ty=this.y+e.minY-n.minY),e.maxX>n.maxX&&(this.tx=this.x+e.maxX-n.maxX),e.maxY>n.maxY&&(this.ty=this.y+e.maxY-n.maxY),this.markViewportChanged())},Object.defineProperty(e.prototype,"gridSpacing",{get:function(){var e=this.zoom;return e<-3.3?160:e<-2.16?80:e<-.91?40:20},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"snapDistance",{get:function(){return Math.ceil(this.config.objectSnapDistance/this.scale)},enumerable:!1,configurable:!0}),e.prototype.posFromEvt=function(e){return this.posFromDom(this.domPosFromEvt(e))},e.prototype.domPosFromEvt=function(e){var t=this.canvasRect,n=t.cx,i=t.cy;return gw(e.clientX-n,e.clientY-i)},e.prototype.domPosFromClient=function(e){var t=this.canvasRect,n=t.cx,i=t.cy;return gw(e.x-n,e.y-i)},e.prototype.posFromClient=function(e){return this.posFromDom(this.domPosFromClient(e))},e.prototype.posFromDom=function(e){var t=this,n=t.x,i=t.y,r=t.scale;return gw(n+e.x/r,i+e.y/r)},e.prototype.domFromPos=function(e){var t=this,n=t.x,i=t.y,r=t.scale;return gw((e.x-n)*r,(e.y-i)*r)},e.prototype.posCenter=function(){return this.posFromDom(gw(0,0))},e.prototype.posInViewport=function(e){var t=this.canvasRect,n=t.minX,i=t.minY,r=t.maxX,o=t.maxY;return e.x>=n||e.x<=r||e.y>=i||e.y<=o},e.prototype.getViewportNodes=function(e){var t=this.getIntersectingNodes(this.getViewportBBox());if(e){var n=this.selection;t=t.filter((function(e){return!n.has(e)}))}return t},e.prototype.hitTestNode=function(e,t){void 0===t&&(t=0);var n=this.nodeIndex.search(ZY(GY(e.x,e.y,e.x,e.y),t));return 0===n.length?null:(n.sort((function(e,t){return t.zIndex-e.zIndex})),n[0])},e.prototype.addNode=function(e){this.nodes.set(e.id,e),this.requestFrame(),this.canvasPlaceholderEl&&(this.canvasPlaceholderEl.detach(),this.canvasPlaceholderEl=null)},e.prototype.removeNode=function(e){for(var t=0,n=this.getEdgesForNode(e);t<n.length;t++){var i=n[t];this.removeEdge(i)}this.deselect(e),this.nodes.delete(e.id),this.nodeIndex.remove(e),this.moved.delete(e),this.dirty.delete(e),this.lastNodesInViewport.delete(e),e.destroy(),this.requestFrame()},e.prototype.getIntersectingNodes=function(e){return this.nodeIndex.search(e)},e.prototype.getContainingNodes=function(e){return this.nodeIndex.search(e).filter((function(t){return QY(e,t.getBBox())}))},e.prototype.addEdge=function(e){var t=this,n=t.edges,i=t.edgeFrom,r=t.edgeTo;n.set(e.id,e),i.add(e.from.node,e),r.add(e.to.node,e),this.requestFrame()},e.prototype.removeEdge=function(e){var t=this,n=t.edges,i=t.edgeIndex,r=t.edgeFrom,o=t.edgeTo;n.has(e.id)&&(this.deselect(e),n.delete(e.id),r.delete(e.from.node,e),o.delete(e.to.node,e),i.remove(e),this.moved.delete(e),this.dirty.delete(e),this.lastEdgesInViewport.delete(e),e.destroy(),this.requestFrame())},e.prototype.getEdgesForNode=function(e){return this.edgeFrom.getArray(e).concat(this.edgeTo.getArray(e))},e.prototype.getIntersectingEdges=function(e){return this.edgeIndex.search(e)},e.prototype.updateSelection=function(e){this.staleSelection||(this.staleSelection=Array.from(this.selection)),e(),this.requestFrame()},e.prototype.select=function(e){var t=this.selection;t.has(e)||this.updateSelection((function(){t.add(e)}))},e.prototype.deselect=function(e){var t=this.selection;t.has(e)&&this.updateSelection((function(){t.delete(e)}))},e.prototype.toggleSelect=function(e){var t=this.selection;this.updateSelection((function(){t.has(e)?t.delete(e):t.add(e)}))},e.prototype.selectOnly=function(e){var t=this.selection;1===t.size&&Array.from(t)[0]===e||this.updateSelection((function(){t.clear(),t.add(e)}))},e.prototype.selectAll=function(e){var t=this,n=this.selection;this.updateSelection((function(){e?(n.clear(),e.forEach((function(e){return n.add(e)}))):t.nodes.forEach((function(e){return n.add(e)}))}))},e.prototype.deselectAll=function(){var e=this.selection;0!==e.size&&this.updateSelection((function(){e.clear()}))},e.prototype.deleteSelection=function(){if(!this.readonly){for(var e=this.selection,t=0,n=Array.from(e);t<n.length;t++){var i=n[t];i instanceof i$&&this.removeNode(i),i instanceof C$&&this.removeEdge(i)}this.deselectAll(),this.requestSave()}},e.prototype.setDragging=function(e){this.isDragging!==e&&(this.isDragging=e,this.wrapperEl.toggleClass("is-dragging",e),this.selectionChanged=!0,this.requestFrame())},e.prototype.onResize=function(){var e=this.canvasRect,t=this.canvasRect=jY(this.wrapperEl);if(Lt.isMobile&&e.height>0&&t.height>0&&e.height!==t.height&&(this.y=this.ty+=(t.height-e.height)/2/this.scale),Lt.isMobile&&1===this.selection.size){var n=Array.from(this.selection)[0];n instanceof i$&&n.isEditing&&this.panIntoView(n.getBBox())}this.viewportChanged=!0,this.requestFrame(),this.canvasRect.width>0&&this.zoomToFitQueued&&(this.zoomToFitQueued=!1,this.finishViewportAnimation=!0,this.zoomToFit())},e.prototype.getZIndex=function(){var e=this,t=e.menu,n=e.cardMenuEl,i=e.canvasControlsEl,r=this.zIndexCounter+=1,o=(r+1).toString();return n.style.zIndex=o,i.style.zIndex=o,t.updateZIndex(r+3),r},e.prototype.createTextNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.text,o=e.save,a=e.focus,s=new c$(this);return n||(n=this.config.defaultTextNodeDimensions),s.moveAndResize(tX(t,n,i)),r&&s.setText(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&(s.attach(),s.render(),this.selectOnly(s),s.startEditing()),s},e.prototype.createFileNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.file,o=e.subpath,a=e.save,s=e.focus,l=new l$(this);return n||(n=this.config.defaultFileNodeDimensions),l.moveAndResize(tX(t,n,i)),l.setFile(r,o),this.addNode(l),!1!==a&&this.requestSave(),!1!==s&&this.selectOnly(l),l},e.prototype.createFileNodes=function(e,t){for(var n=t.x,i=t.y,r=this.config.defaultFileNodeDimensions,o=r.width,a=r.height,s=0,l=[],c=0,u=e;c<u.length;c++){var h=u[c];l.push(this.createFileNode({pos:{x:n+(o+45)*(s%10),y:i+(a+45)*Math.trunc(s/10)},size:r,file:h,save:!1,focus:!1})),s++}return l},e.prototype.createLinkNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.url,o=e.save,a=e.focus,s=new h$(this);return n||(n=this.config.defaultFileNodeDimensions),hA.test(r)&&(n={width:640,height:360}),s.moveAndResize(tX(t,n,i)),s.setUrl(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&this.selectOnly(s),s},e.prototype.createGroupNode=function(e){var t=e.pos,n=e.size,i=e.position,r=e.label,o=e.save,a=e.focus,s=new d$(this);return n||(n=this.config.defaultFileNodeDimensions),s.moveAndResize(tX(t,n,i)),r&&s.setLabel(r),this.addNode(s),!1!==o&&this.requestSave(),!1!==a&&(this.selectOnly(s),s.attach(),s.render(),s.focusLabel()),s},e.prototype.markViewportChanged=function(){this.viewportChanged=!0,this.requestFrame()},e.prototype.markMoved=function(e){this.moved.add(e),this.requestFrame()},e.prototype.markDirty=function(e){this.dirty.add(e),this.selection.has(e)&&(this.selectionChanged=!0),this.requestFrame()},e.prototype.requestFrame=function(e){var t=this;this.frame||(e||(e=performance.now()),this.frameWin=this.canvasEl.win,this.frame=this.frameWin.requestAnimationFrame((function(){t.frame=0,t.frameWin=null;var n=performance.now(),i=n-e,r=t.viewportChanged;if(r){var o=Math.pow(.984,i);t.finishViewportAnimation&&(o=0,t.finishViewportAnimation=!1);var a=1-o,s=t,l=s.x,c=s.y,u=s.zoom,h=s.tx,p=s.ty,d=s.tZoom,f=s.zoomCenter,g=s.scale;t.screenshotting||(d=t.tZoom=Math.clamp(d,-4,1));var m=d-u;if(Math.abs(m)===1/0)u=d=0,g=Math.pow(2,u);else if(0===m||Math.abs(m)<_X)u=d,g=Math.pow(2,u),t.zoomCenter=null;else if(f){var v=f.x,y=f.y,b=g;u+=m*a,l-=v/(g=Math.pow(2,u))-v/b,c-=y/g-y/b,h=t.tx=l,p=t.ty=c}else u+=m*a,g=Math.pow(2,u);var w=h-l;l+=w*a,0!==w&&Math.abs(w)<_X&&(l=h);var k=p-c;c+=k*a,0!==k&&Math.abs(k)<_X&&(c=p),t.x=l,t.y=c,t.zoom=u,t.scale=g;var C=t,E=C.canvasEl,x=C.wrapperEl,S=t.canvasRect,M=S.width,T=S.height;x.toggleClass("mod-zoomed-out",u<=GX),E.style.transform="translate(".concat(M/2,"px, ").concat(T/2,"px) scale(").concat(g,") translate(").concat(-l,"px, ").concat(-c,"px)");var D=t.gridSpacing;t.backgroundPatternEl.setAttrs({x:String(M/2-l%D*g),y:String(T/2-c%D*g),width:String(D*g),height:String(D*g)}),t.x!==h||t.y!==p||t.zoom!==d||Date.now()<t.pauseAnimation?(t.requestFrame(n),t.wasAnimating=!0):(t.screenshotting&&(g=Math.min(1,g)),x.setCssProps({"--zoom-multiplier":String(Math.sqrt(1/g))}),x.toggleClass("mod-animating",!Lt.isIosApp&&t.wasAnimating),t.wasAnimating=!1,t.viewportChanged=!1,t.app.workspace.requestSaveLayout())}var A=t,L=A.moved,P=A.dirty,I=A.nodes,O=A.edges,F=A.edgeIndex,B=A.nodeIndex;if(L.size>0){for(var N=0,R=Array.from(L);N<R.length;N++){if((re=R[N])instanceof i$)for(var H=0,V=t.getEdgesForNode(re);H<V.length;H++){var z=V[H];L.add(z)}}for(var q=[],U=[],W=0,_=Array.from(L);W<_.length;W++){(re=_[W])instanceof i$?(B.remove(re),I.has(re.id)&&q.push(re)):re instanceof C$&&(F.remove(re),O.has(re.id)&&U.push(re)),P.add(re)}for(var j=0,G=q;j<G.length;j++){var K=G[j];B.insert(K)}for(var Y=0,X=U;Y<X.length;Y++){z=X[Y];F.insert(z)}}t.virtualize();for(var $=0,Z=Array.from(P);$<Z.length;$++){(re=Z[$]).isAttached&&(re.render(),P.delete(re))}var Q=t,J=Q.staleSelection,ee=Q.selection,te=Q.selectionChanged;if(J){for(var ne=0,ie=J;ne<ie.length;ne++){var re=ie[ne];ee.has(re)||(1===J.length?re.blur():re.deselect(),te=!0)}for(var oe=new Set(J),ae=0,se=Array.from(ee);ae<se.length;ae++){re=se[ae];oe.has(re)?1===J.length&&ee.size>1?(re.blur(),re.select(),te=!0):J.length>1&&1===ee.size&&(re.deselect(),re.focus(),te=!0):(1===ee.size?re.focus():re.select(),te=!0)}if(Lt.isMobile){var le=null,ce=Array.from(ee);1===ce.length&&ce[0]instanceof i$&&(le=ce[0]),t.nodeInteractionLayer.setTarget(le)}}t.staleSelection=null,t.selectionChanged=!1,(te||r||Array.from(t.selection).some((function(e){return L.has(e)})))&&t.menu.render(te),L.clear(),t.nodeInteractionLayer.render()})))},e.prototype.cancelFrame=function(){var e=this,t=e.frameWin,n=e.frame,i=e.pointerFrame,r=e.pointerFrameWin;n&&t&&(t.cancelAnimationFrame(n),this.frame=0,this.frameWin=null),i&&r&&(r.cancelAnimationFrame(i),this.pointerFrame=0,this.pointerFrameWin=null)},e.prototype.getViewportBBox=function(){var e=this.canvasRect,t=this.posFromDom(gw(e.minX,e.minY)),n=this.posFromDom(gw(e.maxX,e.maxY));return{minX:t.x,minY:t.y,maxX:n.x,maxY:n.y}},e.prototype.virtualize=function(){var e=this,t=e.screenshotting,n=e.lastNodesInViewport,i=e.lastEdgesInViewport,r=this.getViewportBBox(),o=this.getIntersectingNodes(r),a=this.getIntersectingEdges(r);t&&(o=Array.from(this.nodes.values()),a=Array.from(this.edges.values()));var s=new Set(o),l=new Set(a),c=this.selection;1===c.size&&c.forEach((function(e){e instanceof i$&&s.add(e)}));for(var u=0,h=0,p=o;h<p.length;h++){var d=p[h];n.has(d)?d.attach():u<10||t?(d.attach(),u++):s.delete(d)}for(var f=0,g=a;f<g.length;f++){g[f].attach()}n.forEach((function(e){s.has(e)||e.detach()})),i.forEach((function(e){l.has(e)||e.detach()})),this.lastNodesInViewport=s,this.lastEdgesInViewport=l,u>0&&this.requestFrame()},e.prototype.rerenderViewport=function(){var e=this;this.lastNodesInViewport.forEach((function(t){return e.markDirty(t)}))},e.prototype.setState=function(e){var t=e.x,n=e.y,i=e.zoom;Number.isNumber(t)&&Number.isNumber(n)&&Number.isNumber(i)&&(this.setViewport(t,n,i),this.zoomToFitQueued=!1)},e.prototype.getState=function(){var e=this;return{x:e.tx,y:e.ty,zoom:e.tZoom}},e.prototype.handleCut=function(e){if(!this.readonly&&this.canvasEl.doc.activeElement===this.wrapperEl){this.handleCopy(e);for(var t=this.selection,n=0,i=Array.from(t);n<i.length;n++){var r=i[n];r instanceof i$&&this.removeNode(r),r instanceof C$&&this.removeEdge(r)}this.requestSave()}},e.prototype.cloneData=function(e,t){for(var n=e.nodes,i=e.edges,r={},o=0,a=n;o<a.length;o++){var s=a[o],l=s.id,c=$e(16);s.id=c,r[l]=c,t&&(s.x+=t.x,s.y+=t.y)}for(var u=0,h=i;u<h.length;u++){var p=h[u];p.fromNode=r[p.fromNode]||"",p.toNode=r[p.toNode]||"",p.id=$e(16)}return e},e.prototype.handleCopy=function(e){if(this.canvasEl.doc.activeElement===this.wrapperEl&&(e.preventDefault(),0!==this.selection.size)){var t=this.getSelectionData();e.clipboardData.setData("obsidian/canvas",JSON.stringify(t))}},e.prototype.handlePaste=function(e){var t=this;if(!e.defaultPrevented&&!this.readonly&&this.canvasEl.doc.activeElement===this.wrapperEl){e.preventDefault();var n=this.posCenter(),i=Sw(e.clipboardData,"clipboard",!0);if(i.length>0)this.app.importAttachments(i,null).then((function(e){t.createFileNodes(e,n),t.requestSave()}));else{var r=e.clipboardData.getData("obsidian/canvas");if(r){var o=void 0;try{o=JSON.parse(r)}catch(e){return void console.error(e)}var a=o.nodes,s=o.edges,l=o.center;if(!a||!Array.isArray(a))return;if(!s||!Array.isArray(s))return;var c=null;l&&(c={x:n.x-l.x,y:n.y-l.y});var u=this.cloneData(o,c),h=this.importData(u,!1);return this.deselectAll(),this.requestSave(),void h.forEach((function(e){return t.select(e)}))}var p=e.clipboardData.getData("text/plain");if(Mt(p))return this.createLinkNode({pos:n,position:"center",url:p}),void this.requestSave();p&&this.createTextNode({pos:n,position:"center",text:p})}}},e.prototype.toggleGridSnapping=function(e){this.options.snapToGrid=e,this.view.plugin.saveOptions()},e.prototype.toggleObjectSnapping=function(e){this.options.snapToObjects=e,this.view.plugin.saveOptions()},e.prototype.getSnapping=function(e,t,n,i){var r,o,a=this.options,s=a.snapToGrid,l=0,c=0;if(a.snapToObjects){var u=cX(e),h=cX(t),p=this.snapDistance;(r=hX(u,h,n?p:0,"x"))&&(l+=r.delta),(o=hX(u,h,i?p:0,"y"))&&(c+=o.delta)}if(s&&(!r||!o)){var d=$Y(e),f=this.gridSpacing;!r&&n&&(l+=Math.round(d.minX/f)*f-d.minX),!o&&i&&(c+=Math.round(d.minY/f)*f-d.minY)}return(r||o)&&this.renderSnapPoints(r,o,l,c),gw(l,c)},e.prototype.endSnapPointRendering=function(){this.snapContainerEl&&(this.snapContainerEl.detach(),this.snapContainerEl=null)},e.prototype.clearSnapPoints=function(){this.snapContainerEl&&this.snapContainerEl.empty()},e.prototype.renderSnapPoints=function(e,t,n,i){var r=this.snapContainerEl;r||(r=this.snapContainerEl=this.canvasEl.createSvg("svg","canvas-snaps")),r.style.zIndex=String(this.zIndexCounter+2);var o=function(e){return gw(e.x+n,e.y+i)},a=[];e&&(a=a.concat(e.matches)),t&&(a=a.concat(t.matches));for(var s=0,l=a;s<l.length;s++){for(var c=l[s],u=c.src,h=c.dest,p=1/0,d=1/0,f=-1/0,g=-1/0,m=0,v=u.map(o).concat(h);m<v.length;m++){var y=v[m];r.createSvg("circle",{attr:{cx:y.x,cy:y.y,r:4}}),p=Math.min(p,y.x),d=Math.min(d,y.y),f=Math.max(f,y.x),g=Math.max(g,y.y)}r.createSvg("line",{attr:{x1:p,y1:d,x2:f,y2:g}})}},e.prototype.onKeydown=function(e){if(!e.repeat)switch(e.key){case"Escape":this.deselectAll();break;case"Backspace":case"Delete":var t=this.wrapperEl;if(this.isDragging||t.doc.activeElement!==t)break;this.deleteSelection()}},e.prototype.onPriorityPointerdown=function(e){var t=this;if("mouse"===e.pointerType){if(1===e.button){e.preventDefault();var n=this.posFromEvt(e);this.setDragging(!0),ww(e,(function(){return{move:function(e){var i=t.posFromEvt(e);t.panBy(n.x-i.x,n.y-i.y)},end:function(e){e.preventDefault()},cleanup:function(){t.setDragging(!1)}}}),0)}if(2===e.button||Lt.isMacOS&&1===e.button&&e.ctrlKey){e.preventDefault();var i=this.posFromEvt(e);ww(e,(function(){return t.setDragging(!0),{move:function(e){var n=t.posFromEvt(e);t.panBy(i.x-n.x,i.y-n.y)},cleanup:function(){kw(t.wrapperEl,"contextmenu"),t.setDragging(!1)}}}))}}},e.prototype.onPointerdown=function(e){var t=this;if("touch"!==e.pointerType){if(e.targetNode===this.wrapperEl&&"mouse"===e.pointerType&&0===e.button){var n=e.shiftKey,i=new Set(this.selection);n||this.deselectAll(),ww(e,(function(){return t.handleDragToSelect(e,n,i)}))}}else this.onTouchdown(e)},e.prototype.interactionHitTest=function(e){var t=this;if(this.pointer=this.posFromEvt(e),!this.pointerFrame){var n=this.pointerFrameWin=this.canvasEl.win;this.pointerFrame=n.requestAnimationFrame((function(){if(t.pointerFrame=0,t.pointerFrameWin=null,!t.isDragging){var e=t,n=e.pointer,i=e.nodeInteractionLayer,r=t.hitTestNode(n,8/t.scale);t.selection.size>1&&t.selection.has(r)?i.setTarget(null):i.target!==r&&i.setTarget(r)}}))}},e.prototype.onPointermove=function(e){"touch"!==e.pointerType&&this.interactionHitTest(e)},e.prototype.onTouchdown=function(e){var t=this;if(e.isPrimary&&!e.defaultPrevented&&!$b(e,this.wrapperEl,!0)){e.preventDefault();var n=e.targetNode,i=n===this.wrapperEl,r=n===this.menu.selection.selectionEl,o=e.win,a=e,s=function(e){return{id:e.pointerId,x:e.clientX,y:e.clientY,pos:t.posFromEvt(e)}},l=[s(e)],c=!1,u={},h=null,p=null;if(!i&&!r)for(var d=0,f=Array.from(this.nodes.values());d<f.length;d++){var g=f[d];g.nodeEl.contains(n)&&(p=g)}var m=!1,v=o.setTimeout((function(){v=0,m=!0,navigator.vibrate(100),qe(o,e.clientX,e.clientY)}),600),y=function(e){"touch"!==e.pointerType||e.isPrimary||l.push(s(e))},b=function(e){if("touch"===e.pointerType){var s=l.find((function(t){return t.id===e.pointerId}));if(s){if(s.x=e.clientX,s.y=e.clientY,!c&&e.pointerId===a.pointerId&&bw(mw(a),mw(e))>5){if(v&&o.clearTimeout(v),m){if(i){var h=e.shiftKey,d=new Set(t.selection);h||t.deselectAll(),u=t.handleDragToSelect(e,h,d)}else r?u=t.handleSelectionDrag(e,n):p&&(u=t.handleSelectionDrag(e,n,p));if(!u)return u={},void C()}else t.setDragging(!0);c=!0}if(e.pointerId===a.pointerId&&u.move&&u.move(e),!m)if(1===l.length){var f=l[0],g=t.posFromClient(f);t.panBy(f.pos.x-g.x,f.pos.y-g.y)}else{var y=l[0],b=l[1],w=t.posFromClient(y),k=t.posFromClient(b),E=gw((y.pos.x+b.pos.x)/2,(y.pos.y+b.pos.y)/2),x=bw(y.pos,b.pos),S=bw(w,k);if(x>0&&S>0){var M=t.scale*S/x,T=Math.log2(M);T=Math.clamp(T,-4,1),t.zoom=t.tZoom=T,t.scale=Math.pow(2,T),t.markViewportChanged(),t.pauseAnimation=Date.now()+200}w=t.posFromClient(y),k=t.posFromClient(b);var D=gw((w.x+k.x)/2,(w.y+k.y)/2);t.panBy(E.x-D.x,E.y-D.y),y.pos=t.posFromClient(y),b.pos=t.posFromClient(b)}}}},w=function(e){if("touch"===e.pointerType){if(e.pointerId===a.pointerId&&!c)return i&&t.deselectAll(),void C();var n=l.find((function(t){return t.id===e.pointerId}));n&&(n.x=e.clientX,n.y=e.clientY,e.pointerId===a.pointerId&&u.end&&u.end(e),l.remove(n),0===l.length&&C())}},k=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),h=e},C=function(){if(o.removeEventListener("pointerdown",y),o.removeEventListener("pointermove",b),o.removeEventListener("pointerup",w),o.removeEventListener("pointercancel",w),o.removeEventListener("contextmenu",k,{capture:!0}),v&&o.clearTimeout(v),u.cleanup&&u.cleanup(),t.setDragging(!1),!c&&(!m&&r&&t.deselectAll(),m)){var e=h||a;e.targetNode.dispatchEvent(new MouseEvent("contextmenu",e))}};o.addEventListener("pointerdown",y),o.addEventListener("pointermove",b),o.addEventListener("pointerup",w),o.addEventListener("pointercancel",w),o.addEventListener("contextmenu",k,{capture:!0})}},e.prototype.handleDragToSelect=function(e,t,n){var i=this,r=this.posFromEvt(e),o=new yX(this);return this.handleDragWithPan(e,{move:function(e){var a=i.posFromEvt(e);o.update(KY(r,a));var s={minX:Math.min(r.x,a.x),minY:Math.min(r.y,a.y),maxX:Math.max(r.x,a.x),maxY:Math.max(r.y,a.y)},l=i.getIntersectingNodes(s);l=l.filter((function(e){return!(e instanceof d$)||QY(s,e.getBBox())}));var c=new Set(l);if(t){var u=new Set(n);c.forEach((function(e){u.has(e)?u.delete(e):u.add(e)})),c=u}i.selectAll(c)},end:function(e){if(hw.isModifier(e,"Mod")){var t=i.view.plugin.options.defaultModDragBehavior,n=XY(o.bbox);switch(t){case"card":i.createTextNode({pos:n,size:n}),o.hide();break;case"note":new oX(i,(function(e){i.createFileNode({pos:n,size:n,file:e}),o.hide()})).showAttachments(!1).open();break;case"media":new oX(i,(function(e){i.createFileNode({pos:n,size:n,file:e}),o.hide()})).showMarkdownAndCanvas(!1).open();break;case"webpage":new QX(i.app,"",(function(e){i.createLinkNode({pos:n,size:n,url:e}),o.hide()})).open();break;case"group":i.createGroupNode({pos:n,size:n}),o.hide();break;default:var r=new fw;i.showCreationMenu(r,n,n),r.onHide((function(){o.hide()})),r.showAtMouseEvent(e)}}else o.hide();kw(i.wrapperEl,"click")},cancel:function(){i.selectAll(n),o.hide()}})},e.prototype.onDoubleClick=function(e){if(!(e.defaultPrevented||e.targetNode!==this.wrapperEl||this.isDragging||this.readonly)){var t=this.posFromEvt(e);this.createTextNode({pos:t,position:"center"})}},e.prototype.onContextMenu=function(e){var t=this;if(!e.defaultPrevented&&e.targetNode===this.wrapperEl&&!this.readonly){e.preventDefault(),this.deselectAll();var n=this.posFromEvt(e),i=new fw;this.showCreationMenu(i,n),i.addSeparator(),this.history.canUndo()&&i.addItem((function(e){e.setTitle(rf.setting.mobileToolbar.optionUndo()).setSection("history").setIcon("lucide-undo-2").onClick((function(){t.undo()}))})),this.history.canRedo()&&i.addItem((function(e){e.setTitle(rf.setting.mobileToolbar.optionRedo()).setSection("history").setIcon("lucide-redo-2").onClick((function(){t.redo()}))})),Lt.isDesktopApp&&i.addSeparator().addItem((function(t){t.setTitle(rf.interface.menu.paste()).setSection("clipboard").setIcon("lucide-clipboard-check").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))})),this.showQuickSettingsMenu(i),i.showAtMouseEvent(e)}},e.prototype.setReadonly=function(e){var t=this.quickSettingsButton;if(this.readonly=e,t){var n=e?"lucide-lock":"lucide-settings",i=e?qX.labelDisableReadonly():qX.labelCanvasSettings();gb(t,n),aS(t,i,{placement:"left"}),this.wrapperEl.toggleClass("mod-readonly",e),this.menu.render(!0)}},e.prototype.showQuickSettingsMenu=function(e){var t=this,n=this.view.plugin,i=n.options;e.addItem((function(e){return e.setSection("canvas").setTitle(qX.optionSnapToGrid()).setIcon("lucide-grid").setChecked(!!i.snapToGrid).onClick((function(){i.snapToGrid=!i.snapToGrid,n.saveOptions()}))})).addItem((function(e){return e.setSection("canvas").setTitle(qX.optionSnapToObjects()).setIcon("snap-to-object").setChecked(!!i.snapToObjects).onClick((function(){i.snapToObjects=!i.snapToObjects,n.saveOptions()}))})).addItem((function(e){return e.setSection("canvas").setTitle(qX.labelReadonly()).setIcon("lucide-lock").setChecked(t.readonly).onClick((function(){t.setReadonly(!t.readonly),t.view.saveLocalData()}))}))},e.prototype.showCreationMenu=function(e,t,n){var i=this;e.addItem((function(e){e.setTitle(qX.actionAddCard()).setSection("create").setIcon("lucide-sticky-note").onClick((function(){i.createTextNode({pos:t,size:n})}))})).addItem((function(e){e.setTitle(qX.actionAddNote()).setSection("create").setIcon("lucide-file-text").onClick((function(){new oX(i,(function(e){i.createFileNode({pos:t,size:n,file:e})})).showAttachments(!1).open()}))})).addItem((function(e){e.setTitle(qX.actionAddMedia()).setSection("create").setIcon("lucide-file-image").onClick((function(){new oX(i,(function(e){i.createFileNode({pos:t,size:n,file:e})})).showMarkdownAndCanvas(!1).open()}))})).addItem((function(e){e.setTitle(qX.actionAddWebsite()).setSection("create").setIcon("lucide-link").onClick((function(){new QX(i.app,"",(function(e){i.createLinkNode({pos:t,size:n,url:e})})).open()}))})).addItem((function(e){e.setTitle(qX.actionCreateGroup()).setSection("create").setIcon("create-group").onClick((function(){i.createGroupNode({pos:t,size:n})}))}))},e.prototype.smartZoom=function(e){var t=this.posFromEvt(e),n=GY(t.x,t.y,t.x,t.y);if(this.selection.size>0&&QY(this.menu.selection.bbox,n))return void this.zoomToSelection();var i=this.getIntersectingNodes(n);if(i.length>0){i.sort((function(e,t){return e.width*e.height-t.width*t.height}));var r=i[0].bbox;this.zoomToBbox(r)}else this.zoomToFit()},e.prototype.onWheel=function(e){if(!this.isDragging&&!e.defaultPrevented){var t=this.wrapperEl,n=this.options.defaultWheelBehavior,i=e.ctrlKey||e.metaKey,r=i||this.isHoldingSpace,o=240===Math.abs(e.wheelDeltaY)&&0===e.wheelDeltaX;if("zoom"!==n||o||(r=!r),Lt.isMacOS&&e.ctrlKey&&0===e.deltaX&&0===e.deltaY)this.smartZoom(e);else if(i||!$b(e,t)){e.preventDefault();var a=e.deltaX,s=e.deltaY,l=e.deltaMode;l&&(l===e.DOM_DELTA_LINE?(a*=40,s*=40):l===e.DOM_DELTA_PAGE&&(a*=800,s*=800)),r?(this.zoomBy(-s/300,s<0?this.domPosFromEvt(e):void 0),this.pauseAnimation=Date.now()+200):e.shiftKey&&0===a?(this.tx+=s/this.scale*jX,this.markViewportChanged()):(this.tx+=a/this.scale*jX,this.ty+=s/this.scale*jX,this.markViewportChanged());var c=e.wheelDeltaX,u=e.wheelDeltaY;0===a&&Number.isInteger(u)&&120===Math.abs(u)&&u!==-3*e.deltaY||0===s&&Number.isInteger(c)&&120===Math.abs(c)&&c!==-3*e.deltaX||(this.finishViewportAnimation=!0)}}},e.prototype.handleMoverPointerdown=function(e){var t=this;if(e.isPrimary&&0===e.button){var n=this.posFromEvt(e);ww(e,(function(){return{move:function(e){var i=t.posFromEvt(e);t.panBy(n.x-i.x,n.y-i.y)}}}))}},e.prototype.onSelectionContextMenu=function(e){var t=this;if(!e.defaultPrevented){e.preventDefault();var n=this.readonly,i=(new fw).addSections(["action","option"]);n||i.addItem((function(e){e.setTitle(UX.deleteActionShortName()).setSection("action").setIcon("lucide-trash-2").onClick((function(){t.deleteSelection()}))})),i.addItem((function(e){e.setTitle(qX.actionZoomToSelection()).setSection("action").setIcon("zoom-to-selection").onClick((function(){t.zoomToSelection()}))})),n||i.addItem((function(e){e.setTitle(qX.actionCreateGroup()).setSection("action").setIcon("create-group").onClick((function(){var e=XY(ZY($Y(Array.from(t.selection.values()).map((function(e){return e.getBBox()}))),20));t.createGroupNode({pos:e,size:e})}))})),!n&&Lt.isDesktopApp&&i.addItem((function(t){t.setTitle(rf.interface.menu.cut()).setIcon("lucide-scissors").setSection("option").onClick((function(){e.win.electron.remote.getCurrentWebContents().cut()}))})).addItem((function(t){t.setTitle(rf.interface.menu.copy()).setIcon("lucide-copy").setSection("option").onClick((function(){e.win.electron.remote.getCurrentWebContents().copy()}))})).addItem((function(t){t.setTitle(rf.interface.menu.paste()).setIcon("lucide-clipboard-check").setSection("option").onClick((function(){e.win.electron.remote.getCurrentWebContents().paste()}))})),this.app.workspace.trigger("canvas:selection-menu",i,this),i.showAtMouseEvent(e)}},e.prototype.canSnap=function(e){return Lt.isMacOS?!e.ctrlKey:!e.altKey},e.prototype.dragTempNode=function(e,t,n){var i=this;e.isPrimary&&0===e.button&&(e.preventDefault(),ww(e,(function(){var r=new o$(i);return r.resize(t),r.attach(),r.nodeEl.addClass("is-dragging"),i.handleDragWithPan(e,{move:function(e){i.clearSnapPoints();var n=i.posFromEvt(e),o=g(g({},eX(n,t)),t);if(i.canSnap(e)){var a=[o].map(YY),s=i.getViewportNodes().filter((function(e){return!(e instanceof d$)})).map(YY),l=i.getSnapping(a,s,!0,!0);o.x+=l.x,o.y+=l.y}r.moveTo(o),r.render()},end:function(e){i.posInViewport(i.domPosFromEvt(e))&&n(gw(r.x,r.y))},cleanup:function(){r.detach()}})})))},e.prototype.handleDragWithPan=function(e,t){var n=this,i=this.wrapperEl.getBoundingClientRect();this.setDragging(!0);var r=e.win,o=0,a=0,s=0;return g(g({},t),{move:function(e){var l,c=e.clientX,u=e.clientY,h=ZY(YY(i),-30);o=0,a=0,c<h.minX&&(o=c-h.minX),c>h.maxX&&(o=c-h.maxX),u<h.minY&&(a=u-h.minY),u>h.maxY&&(a=u-h.maxY),0!==o||0!==a?(o=Math.clamp(o,-40,40),a=Math.clamp(a,-40,40),s||(s=r.setInterval((function(){var e=.5/Math.sqrt(n.scale);n.panBy(o*e,a*e)}),1e3/60))):s&&(r.clearInterval(s),s=0),null===(l=t.move)||void 0===l||l.call(t,e)},cleanup:function(){var e;s&&(r.clearInterval(s),s=0),n.endSnapPointRendering(),n.setDragging(!1),null===(e=t.cleanup)||void 0===e||e.call(t)}})},e.prototype.handleSelectionDrag=function(e,t,n){var i=this;if(!this.readonly){var r=this.posFromEvt(e);n&&!this.selection.has(n)&&this.selectOnly(n);var o=new Set;this.selection.forEach((function(e){if(e instanceof i$&&(o.add(e),e instanceof d$))for(var t=0,n=i.getContainingNodes(e.getBBox());t<n.length;t++){var r=n[t];o.add(r)}}));for(var a=Array.from(o),s=new WeakMap,l=0,c=a;l<c.length;l++){var u=c[l];s.set(u,gw(u.x,u.y)),u.nodeEl.addClass("is-dragging"),u.updateZIndex()}var h=a,p=null,d=function(e){var t=Lt.isMacOS?e.altKey:e.ctrlKey;if(t&&!p){h=p=[];for(var n=0,r=a;n<r.length;n++){var o=r[n],l=s.get(o),c=new o$(i);p.push(c),s.set(c,l),c.x=o.x,c.y=o.y,c.width=o.width,c.height=o.height,c.attach(),c.render(),c.nodeEl.addClass("is-dragging"),o.moveTo(l)}}else if(!t&&p){for(var u=0;u<a.length;u++){c=p[u];a[u].moveTo(c),c.detach()}p=null,h=a}},f=function(e,t){var n=s.get(e);return{x:n.x+t.x,y:n.y+t.y,width:e.width,height:e.height}},g=function(e){var t,n,o=i.posFromEvt(e),a=(n=r,{x:(t=o).x-n.x,y:t.y-n.y});if(e.shiftKey&&(Math.abs(a.x)>Math.abs(a.y)?a.y=0:a.x=0),!i.canSnap(e))return a;var s=h,l=s.filter((function(e){return e instanceof d$}));if(l.length){s=[];for(var c=function(e){l.some((function(t){return t!==e&&QY(t.getBBox(),e.getBBox())}))||s.push(e)},u=0,p=l;u<p.length;u++){c(p[u])}}var d=new Set(h),g=s.map((function(e){return f(e,a)})).map(YY),m=i.getViewportNodes().filter((function(e){return!d.has(e)&&l.length>0==e instanceof d$})).map(YY),v=i.getSnapping(g,m,0!==a.x,0!==a.y);return function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(a,v)};return this.handleDragWithPan(e,{move:function(e){i.clearSnapPoints(),d(e);for(var t=g(e),n=0,r=h;n<r.length;n++){var o=r[n];o.moveTo(f(o,t))}},end:function(e){for(var t=0,n=a;t<n.length;t++){n[t].nodeEl.removeClass("is-dragging")}if(p){var r=g(e),s=i.getSelectionData(o),l=i.cloneData(s,r),c=i.importData(l,!1);i.clearSnapPoints(),i.selectAll(c)}i.setDragging(!1),i.requestSave()},cancel:function(){for(var e=0,t=a;e<t.length;e++){var n=t[e];n.moveTo(s.get(n)),n.nodeEl.removeClass("is-dragging")}},cleanup:function(){if(p)for(var e=0,n=p;e<n.length;e++){n[e].detach()}t&&kw(t,"click")},keydown:function(e){d(e)},keyup:function(e){d(e)}})}},e.prototype.takeScreenshot=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b;return y(this,(function(y){switch(y.label){case 0:n=this.wrapperEl,y.label=1;case 1:return y.trys.push([1,,6,7]),n.addClass("is-screenshotting"),t&&n.addClass("is-text-garbled"),this.deselectAll(),this.app.statusBar.containerEl.hide(),[4,sleep(10)];case 2:return y.sent(),[4,nextFrame()];case 3:return y.sent(),i=$Y(Array.from(this.nodes.values()).map(YY)),r=this.domFromPos(gw(i.minX,i.minY)),o=r.x,a=r.y,s=this.domFromPos(gw(i.maxX,i.maxY)),l=s.x,c=s.y,u=this.canvasRect,h=u.cx,p=u.cy,o+=h,a+=p,l+=h,c+=p,10,o-=10,a-=10,l+=10,c+=10,d=n.getBoundingClientRect(),o<d.x&&(o=d.x),a<d.y&&(a=d.y),l>d.right&&(l=d.right),c>d.bottom&&(c=d.bottom),f=vw(Math.round(o),Math.round(a),Math.round(l-o),Math.round(c-a)),g=n.win.electron.remote,[4,g.getCurrentWebContents().capturePage(f)];case 4:return m=y.sent(),v=N(m.toPNG()),[4,window.require("original-fs").promises.writeFile(e,v)];case 5:return y.sent(),b=new CI(createFragment((function(t){t.createEl("p",{text:e}),t.createEl("p").createEl("button",{cls:"mod-cta",text:Lt.isMacOS?rf.plugins.openWithDefaultApp.actionShowInFolderMac():rf.plugins.openWithDefaultApp.actionShowInFolder()}).addEventListener("click",(function(){b.hide(),Kt(e)}))})),1e4),[3,7];case 6:return this.app.statusBar.containerEl.show(),n.removeClass("is-screenshotting"),n.removeClass("is-text-garbled"),[7];case 7:return[2]}}))}))},e.prototype.generateHDImage=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O,F,R,H,V,z,q,U,W,_,j,G,K,Y,X,$,Z,Q,J,ee,te,ne=this;return y(this,(function(ie){switch(ie.label){case 0:return e=this.wrapperEl,0===this.nodes.size?(new CI(qX.msgExportFailedEmptyCanvas()),[2]):(t=e.win,n=e.doc,i=t.electron.remote,r=i.getCurrentWebContents(),o=Math.pow(1.2,r.getZoomLevel()),a=t.devicePixelRatio,s=Math.round(a/o*1e5)/1e5,16284,l=ZY($Y(Array.from(this.nodes.values()).map(YY)),100),c=l.maxX-l.minX,u=l.maxY-l.minY,h=Math.min(2,16284/s/c,16284/s/u),p="",d=Math.min(1,h),f=Math.log2(d),g=Math.log2(h),m=!0,b=!1,w="full",[4,new Promise((function(e){var t=new LI(ne.app);t.setTitle(qX.actionExportPng()),t.modalEl.addClass("mod-narrow");var n,i,r=t.contentEl;r.createEl("p",{cls:"u-muted",text:qX.labelExportPngDesc({title:ne.view.file.basename})}),new YI(r).setName(qX.optionExportPngFrame()).setDesc(qX.optionExportPngFrameDesc()).addDropdown((function(e){return e.addOption("full",qX.optionExportPngFrameFull()).addOption("viewport",qX.optionExportPngFrameViewport()).setValue(w).onChange((function(e){var t="full"===(w=e);n.setVisibility(t),i.setVisibility(t)}))}));var o=function(){return n.setDesc(qX.labelExportPngDimensions({dimensions:"".concat(Math.ceil(c*d*s).toLocaleString(),"px x ").concat(Math.ceil(u*d*s).toLocaleString(),"px")}))};n=new YI(r).setName(qX.optionExportPngZoom()).setDesc(qX.optionExportPngZoomDesc()).addSlider((function(e){return e.setLimits(Math.min(-1,g),g,"any").setValue(f).setDynamicTooltip().onChange((function(e){f=e,d=Math.pow(2,e),o()})).getValuePretty=function(){return Math.pow(2,e.getValue()).toFixed(2)}})),o(),i=new YI(r).setName(qX.optionExportPngShowLogo()).setDesc(qX.optionExportPngShowLogoDesc()).addToggle((function(e){return e.setValue(m).onChange((function(e){return m=e}))})),new YI(r).setName(qX.optionExportPngPrivacyMode()).setDesc(qX.optionExportPngPrivacyModeDesc()).addToggle((function(e){return e.setValue(b).onChange((function(e){return b=e}))})),r.createDiv("modal-button-container",(function(n){n.createEl("button",{cls:"mod-cta",text:rf.dialogue.buttonSave()}).addEventListener("click",(function(){return v(ne,void 0,void 0,(function(){return y(this,(function(n){return t.close(),e(),[2]}))}))}))})),t.open()}))]);case 1:return ie.sent(),[4,i.dialog.showSaveDialog({defaultPath:this.view.file.basename+".png",filters:[{name:"PNG Files",extensions:["png"]},{name:"All Files",extensions:["*"]}],properties:["showOverwriteConfirmation"]})];case 2:return(k=ie.sent()).canceled||!k.filePath?[2]:(p=k.filePath)?"viewport"!==w?[3,4]:[4,this.takeScreenshot(p,b)]:[2];case 3:return ie.sent(),[2];case 4:this.deselectAll(),C=n.body,e.addClass("is-screenshotting"),b&&e.addClass("is-text-garbled"),this.screenshotting=!0,C.appendChild(e),x="",ie.label=5;case 5:return ie.trys.push([5,,16,18]),m&&(l.maxY+=80,u+=80,(E=this.canvasEl.createDiv("canvas-watermark")).setCssStyles({position:"absolute",left:l.minX+80+"px",top:l.maxY-80+"px",transform:"translate(0, -100%) scale(".concat(4/d,")"),transformOrigin:"bottom left",display:"flex",whiteSpace:"pre",alignItems:"center",gap:"3px",zIndex:"9999999"}),E.appendChild(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 143 25",width:String(e),fill:"currentColor"}),t.innerHTML='<path d="M7 14.6a12 12 0 0 1 2.8-.6 10 10 0 0 1 .5-8.8l.4-.7a32.9 32.9 0 0 0 .9-2.3v-1c-.1-.4-.3-.7-.7-1.1-.6-.2-1.1 0-1.6.3L4.2 5.1c-.3.2-.5.6-.6 1l-.4 3a14.6 14.6 0 0 1 3.7 5.5Zm-4-4.2-.1.3-2.8 6c-.2.7-.1 1.4.4 1.9L4.8 23a8.7 8.7 0 0 0 .8-8.7c-.7-1.8-1.9-3.2-2.6-4Z"/><path d="M5.8 23.5H6a23.8 23.8 0 0 1 7.4 1.4c1.2.4 2.3-.5 2.5-1.7a7 7 0 0 1 .8-2.7c-.8-2-1.6-3.2-2.6-4a5 5 0 0 0-2.9-1.3c-1.6-.2-3 .2-4 .5.6 2.3.4 5-1.4 7.8Z"/><path d="m17.4 19.3 2-3c0-.4 0-.7-.2-1a18 18 0 0 1-2-3.5c-.7-1.4-.7-3.5-.8-4.6 0-.4 0-.7-.3-1l-3.4-4.3v.6L12 4l-.5 1-.3.6A11 11 0 0 0 10 9.4c0 1.3 0 2.8.9 4.7h.4c1.1.2 2.3.6 3.5 1.6 1 .8 1.8 2 2.5 3.6ZM39.8 4.5c-6 0-10.3 3.7-10.3 8.9 0 5.1 4.3 8.9 10.3 8.9 5.9 0 10.2-3.8 10.2-9 0-5-4.3-8.8-10.2-8.8Zm0 3.5c3.5 0 6.1 2.1 6.1 5.4 0 3.2-2.6 5.4-6.1 5.4-3.6 0-6.2-2.2-6.2-5.4 0-3.3 2.6-5.4 6.2-5.4Zm15.7 12.6c.8.9 2.5 1.7 4.6 1.7 4.3 0 6.8-3 6.8-6.6C67 12 64.4 9 60.1 9c-2.1 0-3.8.8-4.6 1.7v-6h-3.9V22h3.9v-1.4Zm-.1-5c0-2 1.7-3.4 3.9-3.4 2 0 3.9 1.2 3.9 3.5 0 2.2-1.8 3.5-4 3.5-2.1 0-3.8-1.4-3.8-3.4v-.2ZM67.3 20a11 11 0 0 0 7.2 2.3c4 0 7-1.5 7-4.4 0-3-2.9-3.5-6.1-3.8-2.8-.4-3.6-.4-3.6-1.1 0-.7.9-1 2.5-1 2 0 3.7.5 4.8 1.6l2-2.3A9.7 9.7 0 0 0 74.5 9c-4 0-6.5 1.7-6.5 4.3 0 2.7 2.5 3.3 5.6 3.7 2.8.3 4 .3 4 1.2 0 .8-1 1.1-2.8 1.1-2.2 0-4.1-.7-5.7-2l-1.8 2.5ZM82.8 8h4V4.9h-4V8Zm3.9 1.4h-3.8V22h3.8V9.4Zm13.1 11.2V22h3.9V4.8h-3.9v6C99 9.8 97.4 9 95.2 9c-4.3 0-6.8 3-6.8 6.6 0 3.6 2.5 6.6 6.8 6.6 2.2 0 3.8-.8 4.6-1.7Zm.1-5v.2c0 2-1.7 3.4-3.9 3.4-2 0-3.9-1.3-3.9-3.5 0-2.3 1.8-3.5 4-3.5 2.1 0 3.8 1.4 3.8 3.4ZM106 8h4V4.9h-4V8Zm3.9 1.4H106V22h3.9V9.4Zm7 12.9a8 8 0 0 0 5.2-1.7c.6 1.2 2.2 2 5 1.4v-2.8c-1.4.3-1.7 0-1.7-.7v-4.6c0-3.2-2.3-4.8-6.4-4.8-3.5 0-6.2 1.5-7 3.8l3.4 1c.4-1 1.7-1.8 3.5-1.8 2 0 2.8.8 2.8 1.7v.1l-5 .5c-3 .3-5.2 1.5-5.2 4 0 2.4 2.2 3.9 5.4 3.9Zm4.8-5.1c0 1.4-2.2 2.3-4.1 2.3-1.5 0-2.4-.5-2.4-1.3s.7-1.1 2-1.3l4.5-.4v.7Zm6.7 4.8h3.8v-6c0-2.2 1.2-3.5 3.3-3.5 2 0 3 1.3 3 3.4V22h3.8v-7.2c0-3.5-2.2-5.7-5.5-5.7-2 0-3.6.8-4.6 1.8V9.4h-3.8V22Z"/>',t}(100))),M=5/o,e.setCssStyles({top:"".concat(M,"px"),left:"".concat(M,"px"),bottom:"".concat(M,"px"),right:"".concat(M,"px"),width:"auto",height:"auto"}),S=window.open("about:blank","_blank","popup,x=".concat(t.screenX+5,",y=").concat(t.screenY+5,",width=").concat(t.outerWidth-10,",height=").concat(t.outerHeight-10)),T=createEl("base",{href:location.href}),S.document.head.appendChild(T),S.document.title="Obsidian",cI(S),sI(S,[T])(),(D=new VX(S.document)).show(),D.setMessage("Rendering tiles..."),A=!1,D.el.createEl("button",{cls:"mod-cta",text:rf.dialogue.buttonStop()},(function(e){e.style.marginTop="20px",e.onClickEvent((function(){A=!0}))})),this.onResize(),L=e.getBoundingClientRect(),P=Math.ceil(L.x*o+1),I=Math.ceil(L.y*o+1),O=Math.floor(L.width*o)-2,F=Math.floor(L.height*o)-2,this.zoom=this.tZoom=Math.log2(d/o),R=vw(P,I,O,F),H=O/d,V=F/d,z=Math.ceil((l.maxX-l.minX)/H),q=Math.ceil((l.maxY-l.minY)/V),U=l.minX+H/2,W=l.minY+V/2,(_=n.createElement("canvas")).width=Math.ceil(c*d*s),_.height=Math.ceil(u*d*s),j=_.getContext("2d"),this.viewportChanged=!0,this.requestFrame(),[4,sleep(500)];case 6:ie.sent(),G=z*q,K=0,Y=0,ie.label=7;case 7:if(!(Y<q))return[3,12];X=function(e){var i,o,a,l;return y(this,(function(c){switch(c.label){case 0:return A?[2,{value:void 0}]:($.x=$.tx=U+e*H,$.y=$.ty=W+Y*V,$.viewportChanged=!0,$.requestFrame(),[4,sleep(100)]);case 1:return c.sent(),[4,t.nextFrame()];case 2:return c.sent(),t.requestIdleCallback?[4,new Promise((function(e){return t.requestIdleCallback(e)}))]:[3,4];case 3:c.sent(),c.label=4;case 4:return[4,r.capturePage(R)];case 5:return i=c.sent(),o=B(i.toPNG()),a=new Blob([o],{type:"image/png"}),x=URL.createObjectURL(a),(l=n.createElement("img")).src=x,[4,new Promise((function(e,t){l.addEventListener("load",e),l.addEventListener("error",t)}))];case 6:return c.sent(),j.drawImage(l,e*O*s,Y*F*s),URL.revokeObjectURL(x),x="",K++,D.setProgress(K,G),D.setMessage("Rendering tiles... (".concat(K,"/").concat(G,")")),[2]}}))},$=this,Z=0,ie.label=8;case 8:return Z<z?[5,X(Z)]:[3,11];case 9:if("object"==typeof(Q=ie.sent()))return[2,Q.value];ie.label=10;case 10:return Z++,[3,8];case 11:return Y++,[3,7];case 12:return D.setMessage("Generating final image"),[4,At(_,"image/png")];case 13:return[4,ie.sent().arrayBuffer()];case 14:return J=ie.sent(),ee=N(J),[4,window.require("original-fs").promises.writeFile(p,ee)];case 15:return ie.sent(),te=new CI(createFragment((function(e){e.createEl("p",{text:p}),e.createEl("p").createEl("button",{cls:"mod-cta",text:Lt.isMacOS?rf.plugins.openWithDefaultApp.actionShowInFolderMac():rf.plugins.openWithDefaultApp.actionShowInFolder()}).addEventListener("click",(function(){te.hide(),Kt(p)}))})),1e4),[3,18];case 16:return this.view.contentEl.appendChild(e),E&&E.detach(),e.removeClass("is-screenshotting"),e.removeClass("is-text-garbled"),e.setCssStyles({top:"",left:"",bottom:"",right:"",width:"",height:""}),this.screenshotting=!1,S&&S.close(),x&&URL.revokeObjectURL(x),[4,t.nextFrame()];case 17:return ie.sent(),this.zoomToFitQueued=!0,this.onResize(),[7];case 18:return[2]}}))}))},e}();function ZX(e,t){return e.zIndex-t.zIndex}var QX=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.title=qX.labelEnterUrl(),r.onSave=i,r}return f(t,e),t.prototype.validate=function(t){e.prototype.validate.call(this,t);try{new URL(t)}catch(e){return void this.displayError("Invalid URL",!1)}},t.prototype.submit=function(e){try{new URL(e)}catch(e){return void this.displayError("Invalid URL",!1)}this.close(),this.onSave(e)},t}(LB),JX=rf.interface,e$=rf.plugins.canvas,t$=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.fileSuggestions=null,o.mode="heading",o.runnable=null,o.emptyStateText=rf.plugins.canvas.labelNoSectionFound(),o.file=n,o.cb=r,o.mode=i,o.setInstructions([{command:"↑↓",purpose:rf.plugins.templates.instructionNavigate()},{command:"↵",purpose:"block"===o.mode?e$.instructionNarrowBlock():e$.instructionNarrowHeading()},{command:"esc",purpose:rf.plugins.templates.instructionDismiss()}]),o.setPlaceholder(e$.promptToNarrow()),o}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){this.cb(e)},t.prototype.getSuggestions=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e=e.trim(),[4,this.getSuggestionsAsync(e)];case 1:return(t=n.sent())?(t.sort(vB),e||t.unshift({alias:e$.labelNoNarrow(),type:"alias",file:this.file,matches:null,path:this.file.path,score:0}),[2,t]):[2,null]}}))}))},t.prototype.getSuggestionsAsync=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){return n=(t=this).mode,(i=t.runnable)&&i.cancel(),i=this.runnable=new zD,"block"===n?[2,this.getBlockSuggestions(i,e)]:"heading"===n?((r=e).startsWith("#")||(r="#"+r),[2,this.getHeadingSuggestions(i,r)]):[2,[]]}))}))},t.prototype.getHeadingSuggestions=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){return i=(n=this).app.metadataCache,r=n.file,o=i.getFileCache(r),[2,wB(e,this.file,o.headings,r.path,t)]}))}))},t.prototype.getBlockSuggestions=function(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,this.app.metadataCache.blockCache.getForFile(e,this.file)];case 1:return n=i.sent(),[2,kB(e,this.file,this.file.path,n,t)]}}))}))},t.prototype.renderSuggestion=function(e,t){CB(e,t)},t.prototype.close=function(){e.prototype.close.call(this),this.fileSuggestions=null},t}(Jj),n$=function(){function e(e){var t=this;this.canvas=e;for(var n=this.interactionEl=createDiv("canvas-node-interaction-layer"),i=function(e){var i=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});i.addEventListener("pointerdown",(function(n){var r;n.targetNode===i&&"mouse"===n.pointerType&&(null===(r=t.target)||void 0===r||r.onResizePointerdown(n,e))})),i.addEventListener("click",(function(e){var n;return null===(n=t.target)||void 0===n?void 0:n.onClick(e)})),"bottom"!==e&&"right"!==e||i.addEventListener("dblclick",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onResizeDblclick(n,e)})),i.createDiv({cls:"canvas-node-connection-point",attr:{"data-side":e}}).addEventListener("pointerdown",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onConnectionPointerdown(n,e)})),n.append(i)},r=0,o=["top","right","bottom","left"];r<o.length;r++){i(o[r])}for(var a=function(e){var i=createDiv({cls:"canvas-node-resizer",attr:{"data-resize":e}});i.addEventListener("pointerdown",(function(n){var i;return null===(i=t.target)||void 0===i?void 0:i.onResizePointerdown(n,e)})),i.addEventListener("click",(function(e){var n;return null===(n=t.target)||void 0===n?void 0:n.onClick(e)})),n.append(i)},s=0,l=["topright","bottomright","bottomleft","topleft"];s<l.length;s++){a(l[s])}}return e.prototype.setTarget=function(e){this.target!==e&&(this.target=e,this.render())},e.prototype.render=function(){var e=this,t=e.canvas,n=e.target,i=e.interactionEl;if(n?i.parentNode||t.canvasEl.appendChild(i):i.parentNode&&i.detach(),n){var r=n.x,o=n.y,a=n.width,s=n.height;this.interactionEl.setCssStyles({transform:"translate(".concat(r,"px, ").concat(o,"px)"),width:"".concat(a,"px"),height:"".concat(s,"px"),zIndex:String(t.zIndexCounter+1)})}},e}(),i$=function(){function e(e,t){void 0===t&&(t=$e(16)),this.x=0,this.y=0,this.width=100,this.height=100,this.color="",this.unknownData={},this.initialized=!1,this.zIndex=-1,this.aspectRatio=0,this.isEditing=!1,this.destroyed=!1,this.renderedZIndex=-1,this.app=e.app,this.canvas=e,this.id=t,this.nodeEl=createDiv("canvas-node")}return e.prototype.getData=function(){var e=this,t=e.id,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=e.unknownData,l=g(g({},s),{id:t,x:n,y:i,width:r,height:o});return a&&(l.color=a),l},e.prototype.setData=function(e){var t=this.canvas,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=m(e,["x","y","width","height","color"]),l=!1,c=!1;n=Math.round(n),i=Math.round(i),r=Math.round(r),o=Math.round(o),isNaN(n)||this.x===n||(this.x=n,c=!0,l=!0),isNaN(i)||this.y===i||(this.y=i,c=!0,l=!0),isNaN(r)||this.width===r||(this.width=r,c=!0,l=!0),isNaN(o)||this.height===o||(this.height=o,c=!0,l=!0),a=vX(a||""),this.color!==a&&(this.color=a,l=!0),l&&t.markDirty(this),c&&t.markMoved(this),this.unknownData=s},Object.defineProperty(e.prototype,"rect",{get:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},enumerable:!1,configurable:!0}),e.prototype.setColor=function(e,t){void 0===t&&(t=!1),e=vX(e||""),this.color!==e&&(this.color=e,t?this.render():this.canvas.markDirty(this))},e.prototype.moveTo=function(e){this.moveAndResize(g({width:this.width,height:this.height},e))},e.prototype.resize=function(e){this.moveAndResize(g({x:this.x,y:this.y},e))},e.prototype.moveAndResize=function(e){this.x=Math.round(e.x),this.y=Math.round(e.y),this.width=Math.round(e.width),this.height=Math.round(e.height),this.canvas.markMoved(this)},e.prototype.destroy=function(){this.nodeEl.detach(),this.destroyed=!0},e.prototype.attach=function(){var e=this.nodeEl,t=this.canvas;e.parentNode||t.canvasEl.appendChild(e),this.updateBreakpoint(t.zoom>t.zoomBreakpoint)},e.prototype.detach=function(){this.nodeEl.parentNode&&this.nodeEl.detach()},e.prototype.updateBreakpoint=function(e){},Object.defineProperty(e.prototype,"isAttached",{get:function(){return!!this.nodeEl.parentNode},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this.nodeEl;e.addEventListener("click",this.onClick.bind(this)),e.addEventListener("contextmenu",this.onContextMenu.bind(this)),(this.containerEl=e.createDiv("canvas-node-container")).addEventListener("pointerdown",this.onPointerdown.bind(this))},e.prototype.setIsEditing=function(e){this.isEditing!==e&&(this.isEditing=e,this.nodeEl.toggleClass("is-editing",e))},e.prototype.isEditable=function(){return!1},e.prototype.startEditing=function(){var e=this.canvas;if(!e.readonly){e.selectOnly(this);var t=e.zoomBreakpoint+.1;e.zoom<t&&(e.zoomToBbox(this.getBBox()),e.tZoom<t&&(e.tZoom=t))}},e.prototype.getBBox=function(){return YY(this)},e.prototype.render=function(){this.initialized||(this.initialized=!0,this.initialize(),this.zIndex<0&&this.updateZIndex());var e=this,t=e.nodeEl,n=e.x,i=e.y,r=e.width,o=e.height,a=e.color,s=e.canvas;t.setCssStyles({transform:"translate(".concat(n,"px, ").concat(i,"px)"),width:"".concat(r,"px"),height:"".concat(o,"px")}),t.setCssProps({"--canvas-node-width":"".concat(r,"px"),"--canvas-node-height":"".concat(o,"px")}),gX(t,a),t.toggleClass("is-themed",!!a),this.renderZIndex(),this.updateBreakpoint(s.zoom>s.zoomBreakpoint)},e.prototype.updateZIndex=function(){var e=this.canvas;this.zIndex!==e.zIndexCounter&&(this.zIndex=e.getZIndex()),this.renderZIndex()},e.prototype.renderZIndex=function(){var e=this.canvas,t=this.zIndex;1==e.selection.size&&e.selection.has(this)&&(t=e.zIndexCounter+1),t!==this.renderedZIndex&&(this.nodeEl.style.zIndex=t.toString(),this.renderedZIndex=t)},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this.nodeEl.hasClass("is-focused")},enumerable:!1,configurable:!0}),e.prototype.focus=function(){this.nodeEl.addClass("is-focused"),this.renderZIndex()},e.prototype.blur=function(){this.nodeEl.removeClass("is-focused"),this.setIsEditing(!1),this.renderZIndex()},e.prototype.select=function(){this.nodeEl.addClass("is-selected"),this.renderZIndex()},e.prototype.deselect=function(){this.nodeEl.removeClass("is-selected"),this.renderZIndex()},e.prototype.onPointerdown=function(e){var t=this;if(e.isPrimary&&0===e.button&&!this.isEditing&&"mouse"===e.pointerType&&!this.canvas.readonly){var n=e.targetNode;n instanceof HTMLElement&&n.hasClass("inline-title")||ww(e,(function(){return t.canvas.handleSelectionDrag(e,t.nodeEl,t)}))}},e.prototype.onClick=function(e){if(!this.isEditing){var t=this.canvas;e.shiftKey?t.toggleSelect(this):t.selectOnly(this)}},e.prototype.onContextMenu=function(e){if(!this.isEditing&&!e.defaultPrevented){var t=this.canvas;if(t.selection.has(this)&&t.selection.size>1)t.onSelectionContextMenu(e);else{t.selectOnly(this);var n=(new fw).addSections(["canvas"]);this.showMenu(n),e.preventDefault(),n.showAtMouseEvent(e)}}},e.prototype.showMenu=function(e){var t=this,n=this.canvas;n.readonly||e.addItem((function(e){return e.setSection("danger").setTitle(e$.actionRemove()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.removeNode(t),n.requestSave()}))})),e.addItem((function(e){return e.setSection("canvas").setTitle(e$.actionZoomToSelection()).setIcon("zoom-to-selection").onClick((function(){n.zoomToSelection()}))})),this.app.workspace.trigger("canvas:node-menu",e,this)},e.prototype.onResizePointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&("mouse"===e.pointerType||this.canvas.selection.has(this))&&(e.preventDefault(),ww(e,(function(){var i=n,r=i.canvas,o=i.x,a=i.y,s=i.width,l=i.height,c=r.options,u=c.snapToGrid,h=c.snapToObjects;return r.selectOnly(n),n.nodeEl.addClass("is-dragging"),n.canvas.handleDragWithPan(e,{move:function(e){var i,c,p=r.config.minContainerDimension,d=r.posFromEvt(e);r.clearSnapPoints();var f=0,g=0,m=nX(t,d,n),v=m.source,y=m.resizeX,b=m.resizeY;if(r.canSnap(e)){if(h){var w=cX([YY(v)]),k=cX(r.getViewportNodes(!0).map(YY)),C=r.snapDistance;y&&(i=hX(w,k,C,"x"))&&(f=i.delta),b&&(c=hX(w,k,C,"y"))&&(g=c.delta)}if(u){var E=r.gridSpacing;y&&!i&&(f=Math.round(d.x/E)*E-d.x),b&&!c&&(g=Math.round(d.y/E)*E-d.y)}}var x=d.x+f,S=d.y+g,M=YY({x:o,y:a,width:s,height:l});t.contains("top")&&(M.minY=Math.min(M.maxY-p,S),M.minY!==S&&(c=null,g=M.minY-d.y)),t.contains("left")&&(M.minX=Math.min(M.maxX-p,x),M.minX!==x&&(i=null,f=M.minX-d.x)),t.contains("bottom")&&(M.maxY=Math.max(M.minY+p,S),M.maxY!==S&&(c=null,g=M.maxY-d.y)),t.contains("right")&&(M.maxX=Math.max(M.minX+p,x),M.maxX!==x&&(i=null,f=M.maxX-d.x));var T={x:M.minX,y:M.minY,width:M.maxX-M.minX,height:M.maxY-M.minY},D=n.aspectRatio;if(0!==D){var A=T.width,L=T.height;if(y&&b){var P=Math.max(A,L*D);L=Math.max(L,A/D),(A=P)!==T.width?i=null:L!==T.height&&(c=null)}else y?L=A/D:b&&(A=L*D);if(t.includes("left")){var I=o+s-A;f+=I-T.x,T.x=I}if(t.includes("top")){var O=a+l-L;g+=O-T.y,T.y=O}t.includes("right")&&(f+=A-T.width),t.includes("bottom")&&(g+=L-T.height),T.width=A,T.height=L}(i||c)&&r.renderSnapPoints(i,c,f,g),n.moveAndResize(T)},end:function(){r.requestSave()},cancel:function(){n.moveAndResize({x:o,y:a,width:s,height:l}),r.requestSave()},cleanup:function(){n.nodeEl.removeClass("is-dragging")}})})))},e.prototype.onConnectionPointerdown=function(e,t){var n=this;e.isPrimary&&0===e.button&&("touch"!==e.pointerType||this.canvas.selection.has(this))&&(e.preventDefault(),ww(e,(function(){var i=n.canvas,r=new o$(i),o=null;i.canvasEl.addClass("is-connecting"),i.deselectAll();var a=function(e){switch(e){case"right":return"left";case"left":return"right";case"top":return"bottom"}return"top"}(t),s={side:t,node:n,end:w$},l=new C$(i,$e(16),s,{side:a,node:r,end:k$});return i.addEdge(l),n.canvas.handleDragWithPan(e,{move:function(e){var t=i.posFromEvt(e);r.x=t.x,r.y=t.y,r.width=0,r.height=0;var c=i.getIntersectingNodes(ZY(r.getBBox(),n.canvas.config.objectSnapDistance)).filter((function(e){return e!==n&&(!(e instanceof d$&&QY(e.getBBox(),n.getBBox()))&&!(n instanceof d$&&QY(n.getBBox(),e.getBBox())))}));(o=sX(t,c,i.config.objectSnapDistance))?l.update(s,{side:o.side,node:o.node,end:k$}):l.update(s,{side:a,node:r,end:k$})},end:function(e){if(o)i.requestSave();else{var t=n.app,r=t.metadataCache,c=(new fw).addSections(["action","file",""]),u=!1,h=function(){activeWindow.setTimeout((function(){u||i.removeEdge(l),u=!1}),50)};c.onHide(h);var p=function(e){l.update(s,{side:a,node:e,end:k$}),i.requestSave()},d=function(t,n){var r=i.posFromEvt(e),o=i.createFileNode({pos:r,position:a,file:t,subpath:n});p(o)},f=function(o,s){return v(n,void 0,void 0,(function(){var n,l,c,h,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:return u=!0,n=i.posFromEvt(e),o?(c=Bx(o),h=c.path,f=c.subpath,(g=r.getFirstLinkpathDest(h,s))?[3,2]:(m=Bx(o).path,v=t.fileManager.getNewFileParent(o,m),[4,t.fileManager.createNewMarkdownFile(v,m)])):[3,3];case 1:g=y.sent(),y.label=2;case 2:return d(g,f),[3,4];case 3:l=i.createTextNode({pos:n,position:a}),p(l),y.label=4;case 4:return[2]}}))}))};if(c.addItem((function(e){return e.setTitle(e$.actionAddCard()).setSection("action").onClick((function(){return f("","")}))})).addItem((function(e){return e.setTitle(e$.actionAddNote()).setSection("action").onClick((function(){u=!0,new oX(n.canvas,(function(e){u=!0,d(e,"")}),h).open()}))})),n instanceof l$){var g=n.file,m=[];Hx(r.getFileCache(g).links,(function(e){var t=Bx(e.link),n=t.path,i=t.subpath,o=r.getFirstLinkpathDest(n,g.path);o&&m.push(a$(o,i))}));for(var b=0,w=n.getConnectedFiles(),k=function(e){return w.has(e)?"continue":(w.add(e),c.addItem((function(t){return t.setTitle(e).setSection("file").onClick((function(){return f(e,g.path)}))})),++b>=20?"break":void 0)},C=0,E=m;C<E.length;C++){if("break"===k(E[C]))break}}n.app.workspace.trigger("canvas:node-connection-drop-menu",c,n,l),c.showAtMouseEvent(e)}},cancel:function(){i.removeEdge(l)},cleanup:function(){i.canvasEl.removeClass("is-connecting")}})})))},e.prototype.onResizeDblclick=function(e,t){},e.prototype.getConnectedFiles=function(){for(var e=this.canvas,t=new Set,n=0,i=e.edgeFrom.getArray(this);n<i.length;n++){var r=i[n],o=r.to.node;r.from.node===this&&o instanceof l$&&o.file&&t.add(a$(o.file,o.subpath))}return t},e}(),r$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContentMounted=!1,t.alwaysKeepLoaded=!1,t}return f(t,e),t.prototype.attach=function(){var t=!this.nodeEl.parentNode;e.prototype.attach.call(this),t&&this.contentEl&&Yb(this.contentEl)},t.prototype.detach=function(){this.alwaysKeepLoaded||(this.nodeEl.parentNode&&this.contentEl&&Gb(this.contentEl),e.prototype.detach.call(this))},t.prototype.updateBreakpoint=function(t){e.prototype.updateBreakpoint.call(this,t),t?this.mountContent():this.unmountContent()},t.prototype.mountContent=function(){var e=this.initialized,t=this.containerEl;e&&!this.isContentMounted&&(t.appendChild(this.contentEl),t.appendChild(this.contentBlockerEl),this.placeholderEl.detach(),this.isContentMounted=!0,Yb(this.contentEl))},t.prototype.unmountContent=function(){this.alwaysKeepLoaded||this.initialized&&this.isContentMounted&&(Gb(this.contentEl),this.contentEl.detach(),this.contentBlockerEl.detach(),this.containerEl.appendChild(this.placeholderEl),this.isContentMounted=!1)},t.prototype.initialize=function(){e.prototype.initialize.call(this),this.contentEl=createDiv("canvas-node-content"),this.contentBlockerEl=createDiv("canvas-node-content-blocker"),this.placeholderEl=this.containerEl.createDiv("canvas-node-placeholder")},t}(i$),o$=function(e){function t(t){var n=e.call(this,t,$e(16))||this;return n.nodeEl.addClass("is-dummy"),n}return f(t,e),t}(i$);function a$(e,t){return e.path+t}var s$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeDirty=!1,t}return f(t,e),t.prototype.initialize=function(){var t=this;e.prototype.initialize.call(this);var n=function(e){var t=e.doc.activeElement;if(["INPUT","BUTTON"].contains(t.tagName))return!0;if(t.hasClass("inline-title"))return!0;var n=e.targetNode;return!(!n.instanceOf(Element)||!n.closest(".collapse-indicator"))};this.nodeEl.addEventListener("dblclick",(function(e){if(!e.defaultPrevented){var i=t.child;i instanceof gI&&!i.editMode&&!n(e)&&t.startEditing()}})),Jb(this.contentEl,(function(e){t.destroyed||n(e)||t.startEditing()}))},t.prototype.blur=function(){e.prototype.blur.call(this);var t=this.child,n=this.app.workspace;(t instanceof u$||t instanceof cF)&&(t.showPreview(!0),t.applyScope(null),t===n.activeEditor&&(n.activeEditor=null))},t.prototype.focus=function(){e.prototype.focus.call(this);var t=this.app.workspace,n=this.child instanceof gI?this.child:null;t.activeEditor=n;var i=null;this instanceof l$&&(i=this.file),this.canvas.requestUpdateFileOpen(i)},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this.child;(t instanceof u$||t instanceof cF)&&t.applyScope(null),this.unloadChild()},t.prototype.unloadChild=function(){this.aspectRatio=0,this.child&&(this.child.unload(),this.child=null,this.alwaysKeepLoaded=!1),this.contentEl&&this.contentEl.empty(),this.setIsEditing(!1)},t.prototype.startEditing=function(){e.prototype.startEditing.call(this);var t=this.child;!this.canvas.readonly&&t instanceof gI&&(t.showEditor(),this.setIsEditing(!0))},t.prototype.isEditable=function(){return this.child instanceof gI},t.prototype.onClick=function(t){var n=this.child;this.canvas.readonly||(n instanceof gI?this.setIsEditing(!!n.editMode):this.setIsEditing(!1)),e.prototype.onClick.call(this,t)},t.prototype.onResizeDblclick=function(t,n){t.preventDefault(),e.prototype.onResizeDblclick.call(this,t,n);var i=this.child;if(i instanceof gI){var r=i.previewMode.renderer.previewEl;if(!r.isShown())return;if("top"===n||"bottom"===n){for(var o=0;o<10;o++){var a=r.clientHeight;r.style.height="1px";var s=r.scrollHeight;r.style.height="";var l=s-a+1;if(Math.abs(l)<.5)break;this.resize({width:this.width,height:this.height+l}),this.render(),this.canvas.requestSave()}return}r.style.height="1px";try{var c=r.scrollHeight+.1,u=this.width,h=0,p=u;for(o=0;o<10;o++){var d=Math.round((h+p)/2);if(this.resize({width:d,height:this.height}),this.render(),r.scrollHeight>c?h=d:p=d,p-h<1)break}this.resize({width:p,height:this.height}),r.scrollHeight>c?(this.resize({width:u,height:this.height}),this.render()):this.canvas.requestSave()}finally{r.style.height=""}}},t.prototype.moveAndResize=function(t){var n=this,i=n.width,r=n.height;n.child instanceof gI&&(i!==t.width||r!==t.height)&&(this.resizeDirty=!0),e.prototype.moveAndResize.call(this,t)},t.prototype.render=function(){e.prototype.render.call(this);var t=this.child;this.resizeDirty&&t instanceof gI&&t.previewMode.renderer.onResize(),this.resizeDirty=!1},t}(r$),l$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filePath="",t.subpath="",t.file=null,t}return f(t,e),t.prototype.initFile=function(){var e=this,t=e.filePath,n=e.file,i=e.app;if(t&&(null==n?void 0:n.path)!==t){this.file=null;var r=i.vault.getAbstractFileByPath(t);r instanceof Xy&&(this.file=r)}},t.prototype.getData=function(){var t=g(g({},e.prototype.getData.call(this)),{type:"file",file:this.file?this.file.path:this.filePath}),n=this.subpath;return n&&(t.subpath=n),t},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.file,i=t.subpath;n&&this.setFilePath(n,i||"")},t.prototype.setFilePath=function(e,t){this.filePath===e&&this.subpath===t||(this.filePath=e,this.file&&this.file.path===e&&this.subpath===t||(this.subpath=t,this.initFile(),this.unloadChild()),this.canvas.markDirty(this))},t.prototype.setFile=function(e,t,n){t=t||"",(n||this.filePath!==e.path||this.subpath!==t)&&(this.subpath=t,this.filePath=e.path,this.file!==e&&(this.file=e,this.unloadChild()),this.canvas.markDirty(this))},t.prototype.blur=function(){e.prototype.blur.call(this);var t=this,n=t.app.workspace,i=t.child,r=t.canvas;i instanceof gI&&i===n.activeEditor&&(n.activeEditor=null),r.requestUpdateFileOpen(null)},t.prototype.focus=function(){e.prototype.focus.call(this),this.child&&this.onFileFocus()},t.prototype.onFileFocus=function(){var e=this.app.workspace,t=this.child instanceof gI?this.child:null;e.activeEditor=t,this.canvas.requestUpdateFileOpen(this.file)},t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.updateNodeLabel=function(e){var t=this,n=t.labelEl,i=t.canvas,r=t.nodeEl,o=i.options.cardLabelVisibility;"never"!==o?(n||((n=this.labelEl=r.createDiv("canvas-node-label")).addEventListener("click",this.onLabelClick.bind(this)),n.addEventListener("dblclick",this.onLabelDblClick.bind(this)),n.addEventListener("pointerdown",this.onPointerdown.bind(this))),n.toggleClass("mod-hover-label","hover"===o),n.setText(e)):n&&(n.detach(),this.labelEl=null)},t.prototype.updateBreakpoint=function(t){if(e.prototype.updateBreakpoint.call(this,t),t)this.mountContent();else{var n=this.child;n instanceof tF||n instanceof R$?this.mountContent():this.unmountContent()}},t.prototype.render=function(){var t=this;e.prototype.render.call(this);var n=this,i=n.file,r=n.filePath,o=n.subpath;if(i){var a=i.getShortName();o&&"md"===i.extension&&(a+=" › "+o.substring(1)),this.updateNodeLabel(a),this.placeholderEl.setText(a)}else this.updateNodeLabel(createFragment((function(e){gb(e.createSpan(),"lucide-alert-triangle"),e.createSpan({text:r})}))),this.placeholderEl.setText(r);if(!this.child){var s,l={app:this.app,linktext:this.filePath+this.subpath,sourcePath:"",containerEl:this.contentEl,depth:0};i?(s=this.child=lF.load(l))instanceof cF&&(s.editable=!0,s.useIframe=!0):s=this.child=new p$(l,this,(function(){return t.render()})),this.isFocused&&this.onFileFocus(),s.load(),v(t,void 0,void 0,(function(){var e,t,n,i,r,o,a,l=this;return y(this,(function(c){switch(c.label){case 0:return[4,s.loadFile()];case 1:return c.sent(),s instanceof BO&&s.viewer.then((function(e){var t=e.pdfViewer,n=e.toolbar;t.setHeight("auto"),n.toolbarRightEl.createDiv("clickable-icon",(function(n){gb(n,"lucide-file-symlink"),aS(n,rf.pdf.actionSavePDFLocation()),e.on("pagechanging",rt((function(){l.subpath!=="#page=".concat(t.page)?n.setAttr("aria-disabled","false"):"true"!==n.getAttr("aria-disable")&&n.setAttr("aria-disabled","true")}),100,!0)),n.addEventListener("click",(function(){l.subpath="#page=".concat(t.page),l.canvas.requestSave(),n.setAttr("aria-disabled","true")}))}))})),(e=this.contentEl.firstChild)?(t=null,e.instanceOf(HTMLImageElement)?(t={width:e.naturalWidth,height:e.naturalHeight},e.draggable=!1):e.instanceOf(HTMLVideoElement)?t={width:e.videoWidth,height:e.videoHeight}:e.instanceOf(HTMLAudioElement)&&(n=function(){l.resize({width:l.width,height:e.clientHeight||42})},e.isShown()||e.onNodeInserted(n,!0),n()),t&&(i=this.aspectRatio=t.width/t.height,o=(r=this).width,a=r.height,o/a!==i&&(this.resize({width:Math.min(o,a*i),height:Math.min(a,o/i)}),this.canvas.overrideHistory())),[2]):[2]}}))}))}},t.prototype.onLabelClick=function(e){var t=hw.isModEvent(e);t&&this.app.workspace.getLeaf(t).openLinkText(this.filePath+this.subpath,"")},t.prototype.onLabelDblClick=function(e){this.app.workspace.getLeaf(!1).openLinkText(this.filePath+this.subpath,"")},t.prototype.onPointerdown=function(t){var n;this.child instanceof BO&&t.target instanceof HTMLElement&&(null===(n=t.target.parentElement)||void 0===n?void 0:n.hasClass("textLayer"))||e.prototype.onPointerdown.call(this,t)},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t);var i=this,r=i.file,o=i.child,a=i.canvas;a.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(e$.actionSwapFile()).setIcon(r?"lucide-arrow-left-right":"lucide-wrench").onClick((function(){var e=!r||"md"===r.extension||"canvas"===r.extension,t=!r||"md"!==r.extension;new oX(n.canvas,(function(e){n.setFile(e,""),n.canvas.requestSave()})).showMarkdownAndCanvas(e).showAttachments(t).open()}))})),r&&("md"===r.extension&&t.addItem((function(e){return e.setSection("open").setTitle(JX.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){n.app.workspace.getLeaf("tab").openFile(r)}))})),!a.readonly&&o instanceof cF&&t.addItem((function(e){return e.setSection("canvas").setTitle(JX.menu.edit()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))})),a.readonly||"md"!==r.extension||(t.addItem((function(e){return e.setSection("canvas").setIcon("lucide-minimize-2").setTitle(e$.actionNarrowHeading()).onClick((function(){new t$(n.app,r,"heading",(function(e){var t=mB(e),i=t.path,r=t.subpath;n.setFilePath(i,r),n.canvas.requestSave()})).open()}))})),t.addItem((function(e){return e.setSection("canvas").setIcon("lucide-minimize-2").setTitle(e$.actionNarrowBlock()).onClick((function(){new t$(n.app,r,"block",(function(e){if("block"===e.type&&!e.node.id){var t=e.content,i=e.file,r=e.node.id=$e(6),o=fF(e,r),a=o.blockEnd,s=o.addition;t=t.slice(0,a)+s+t.slice(a),n.app.vault.modify(i,t)}var l=mB(e),c=l.path,u=l.subpath;n.setFilePath(c,u),n.canvas.requestSave()})).open()}))}))),t.addSections(["title","open","action","view","info","","danger"]),this.subpath||(t.addItem((function(e){return e.setSection("action").setTitle(rf.plugins.fileExplorer.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return n.app.fileManager.promptForFileRename(r)}))})),this.app.workspace.trigger("file-menu",t,r,"canvas-menu")))},t}(s$),c$=function(e){function t(t,n){void 0===n&&(n=$e(16));var i=e.call(this,t,n)||this;return i.text="",i}return f(t,e),t.prototype.getData=function(){return g(g({},e.prototype.getData.call(this)),{type:"text",text:this.text})},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.text;String.isString(n)&&this.setText(n)},t.prototype.setText=function(e){this.text!==e&&(this.text=e,this.child&&this.child.set(e))},t.prototype.initialize=function(){e.prototype.initialize.call(this),gb(this.placeholderEl.createDiv("canvas-icon-placeholder"),"lucide-align-left")},t.prototype.render=function(){e.prototype.render.call(this),this.child||(this.child=new u$(this),this.child.set(this.text),this.child.load())},t.prototype.showMenu=function(t){var n=this;(e.prototype.showMenu.call(this,t),this.canvas.readonly)||this.child&&t.addItem((function(e){return e.setSection("canvas").setTitle(JX.menu.edit()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))})).addItem((function(e){return e.setSection("canvas").setTitle(e$.actionConvertToFile()).setIcon("lucide-file-input").onClick((function(){return n.convertToFile()}))}))},t.prototype.convertToFile=function(){var e=this,t=this.canvas,n=this.text,i=t.view.file.path;new PB(this.app,"Untitled",(function(t){return v(e,void 0,void 0,(function(){var e,r,o,a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:r=(e=this).app,o=e.canvas,a=r.fileManager.getNewFileParent(i,t),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.fileManager.createNewMarkdownFile(a,t,n)];case 2:for(s=d.sent(),l=o.createFileNode({pos:this,size:this,file:s,save:!1,focus:!1}),c=o.getEdgesForNode(this),u=0,h=c;u<h.length;u++)(p=h[u]).from.node===this&&p.update(g(g({},p.from),{node:l}),p.to),p.to.node===this&&p.update(p.from,g(g({},p.to),{node:l}));return o.removeNode(this),o.selectOnly(l),o.requestSave(),[3,4];case 3:return[2,d.sent()];case 4:return[2]}}))}))})).open()},t}(s$),u$=function(e){function t(t){var n=e.call(this,t.app,t.contentEl,null)||this;return n.editable=!0,n.useIframe=!0,n.scope=null,n.node=t,n.containerEl.addClass("markdown-embed"),n}return f(t,e),t.prototype.save=function(t,n){void 0===n&&(n=!1),e.prototype.save.call(this,t,n),n&&this.node.text!==t&&(this.node.text=t,this.node.canvas.requestSave())},t.prototype.applyScope=function(e){e!==this.scope&&(this.scope&&this.app.keymap.popScope(this.scope),e&&this.app.keymap.pushScope(e),this.scope=e)},t.prototype.onunload=function(){e.prototype.onunload.call(this),this.applyScope(null)},Object.defineProperty(t.prototype,"linktext",{get:function(){var e=this.node;return e.canvas.view.file.path+"#^"+e.id},enumerable:!1,configurable:!0}),t.prototype.getFoldInfo=function(){return this.app.foldManager.loadPath(this.linktext)},t.prototype.onMarkdownFold=function(){var e="preview"===this.getMode()?this.previewMode.renderer.getFoldInfo():this.editMode.getFoldInfo();this.app.foldManager.savePath(this.linktext,e)},t}(gI),h$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="",t.alwaysKeepLoaded=!0,t}return f(t,e),t.prototype.getData=function(){return g(g({},e.prototype.getData.call(this)),{type:"link",url:this.url})},t.prototype.setData=function(t){e.prototype.setData.call(this,t);var n=t.url;n&&this.setUrl(n)},t.prototype.setUrl=function(e){this.url!==e&&(this.url=e,this.canvas.markDirty(this),this.setFrameUrl())},t.prototype.recreateFrame=function(){var e,t=this;if(this.frameEl&&this.frameEl.detach(),Lt.isDesktopApp){var n=this.contentEl,i=n.doc,r=i.createElement("webview");r.addClass("canvas-link"),r.allowpopups=!0,e=this.frameEl=r,r.addEventListener("did-frame-finish-load",(function(){t.updateNodeLabel(r.getTitle())})),r.addEventListener("destroyed",(function(){i!==n.doc&&(r.detach(),t.recreateFrame())})),i.contains(n)?n.appendChild(r):n.onNodeInserted((function(){n.doc===i?n.appendChild(r):t.recreateFrame()}),!0)}else(e=this.frameEl=this.contentEl.createEl("iframe","canvas-link")).setAttr("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),e.setAttr("allow","fullscreen");e.style.width="100%",e.style.height="100%",this.setFrameUrl()},t.prototype.initialize=function(){e.prototype.initialize.call(this),this.recreateFrame()},t.prototype.updateNodeLabel=function(e){var t=this,n=this,i=n.labelEl,r=n.canvas,o=n.nodeEl,a=r.options.cardLabelVisibility;"never"!==a?(i||((i=this.labelEl=o.createDiv("canvas-node-label")).addEventListener("click",this.onLabelClick.bind(this)),i.addEventListener("dblclick",(function(){window.open(t.url,"_blank")})),i.addEventListener("pointerdown",this.onPointerdown.bind(this))),i.toggleClass("mod-hover-label","hover"===a),i.setText(e)):i&&(i.detach(),this.labelEl=null)},t.prototype.onLabelClick=function(e){hw.isModifier(e,"Mod")&&window.open(this.url,"_blank")},t.prototype.setFrameUrl=function(){var e=this.frameEl,t=this.url;if(e&&(this.updateNodeLabel(t),/^https?:\/\//.test(t))){var n=dA(t);if(n&&(t=n),e.src=t,_t(e)&&e.isShown())try{e.loadURL(t)}catch(e){}}},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t),this.canvas.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(e$.actionChangeUrl()).setIcon("lucide-link").onClick((function(){new QX(n.app,n.url,(function(e){n.setUrl(e),n.canvas.requestSave()})).open()}))})),t.addItem((function(e){return e.setSection("canvas").setTitle(rf.interface.menu.openInBrowser()).setIcon("lucide-globe").onClick((function(){window.open(n.url,"_blank")}))})).addItem((function(e){return e.setSection("canvas").setTitle(rf.interface.menu.copyUrl()).setIcon("lucide-copy").onClick((function(){at(n.url),new CI(rf.interface.copied({item:rf.interface.url()}))}))})).addItem((function(e){return e.setSection("canvas").setTitle(e$.actionReloadPage()).setIcon("lucide-rotate-ccw").onClick((function(){var e=n.frameEl;if(_t(e))try{e.loadURL(n.url)}catch(e){}else e.src=n.url}))}))},t}(r$),p$=function(e){function t(t,n,i){var r=e.call(this)||this;return r.file=null,r.ctx=t,r.node=n,r.reload=i,r.containerEl=t.containerEl,r}return f(t,e),t.prototype.loadFile=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){return t=(e=this).containerEl,n=e.ctx,i=n.app,r=n.linktext,o=n.sourcePath,a=e.node,s=a.canvas,a.contentBlockerEl.detach(),l=Bx(r).path,t.createDiv("canvas-empty-embed-container",(function(e){e.createDiv({cls:"canvas-empty-embed-label",text:e$.labelEmptyEmbed({linktext:r})}),e.createDiv("canvas-empty-embed-action-list",(function(e){var t=le(l);"md"!==t&&""!==t||e.createEl("button",{cls:"empty-state-action",text:rf.interface.emptyState.createNewFile()},(function(e){e.addEventListener("click",(function(){i.fileManager.createNewMarkdownFileFromLinktext(r,o)}))})),e.createEl("button",{cls:"empty-state-action",text:e$.actionSwapFile()},(function(e){e.addEventListener("click",(function(e){new oX(a.canvas,(function(e){a.setFile(e,""),s.requestSave()})).open()}))})),e.createEl("button",{cls:"empty-state-action mod-warning",text:e$.actionRemove()},(function(e){e.addEventListener("click",(function(e){s.removeNode(a),s.requestSave()}))}))}))})),t.addClass("mod-canvas-empty"),[2]}))}))},t.prototype.onload=function(){var e=this,t=this.ctx,n=t.app,i=t.linktext,r=rt((function(t){var n=Bx(i),r=n.path,o=n.subpath;t instanceof Xy&&t.path===r&&e.node.setFile(t,o,!0)}));this.registerEvent(n.vault.on("create",r)),this.registerEvent(n.vault.on("rename",r))},t.prototype.onClick=function(e){var t=this.ctx,n=t.app,i=t.linktext,r=t.sourcePath;n.workspace.openLinkText(i,r,hw.isModEvent(e))},t}(nb),d$=function(e){function t(t,n){void 0===n&&(n=$e(16));var i=e.call(this,t,n)||this;return i.label="",i.bgPath="",i.bgStyle="",i.nodeEl.addClass("canvas-node-group"),i}return f(t,e),t.prototype.getData=function(){var t=g(g({},e.prototype.getData.call(this)),{type:"group"}),n=this,i=n.label,r=n.bgPath,o=n.bgFile,a=n.bgStyle;return i&&(t.label=i),r&&(t.background=o?o.path:r,a&&"cover"!==a&&(t.backgroundStyle=a)),t},t.prototype.setData=function(t){var n=t.label,i=t.background,r=m(t,["label","background"]);e.prototype.setData.call(this,r);var o=t.backgroundStyle;if(n&&String.isString(n)&&this.setLabel(n),o||(o=""),i&&String.isString(i)){if(this.bgPath!==i||this.bgFile&&this.bgFile.path!==i){this.bgPath=i;var a=this.app.vault.getAbstractFileByPath(i);this.bgFile=a instanceof Xy?a:null,this.canvas.markDirty(this)}this.bgStyle!==o&&(this.bgStyle=o,this.canvas.markDirty(this))}else this.bgPath&&(this.bgPath="",this.bgFile=null,this.bgStyle="",this.canvas.markDirty(this));this.updateAspectRatio()},t.prototype.setLabel=function(e){this.label!==e&&(this.label=e,this.canvas.markDirty(this))},t.prototype.setBackgroundFile=function(e){var t=e?e.path:"";this.bgPath===t&&this.bgFile===e||(this.bgPath=t,this.bgFile=e,e||(this.bgStyle=""),this.updateAspectRatio(),this.canvas.markDirty(this))},t.prototype.setBackgroundStyle=function(e){this.bgPath||(e=""),this.bgStyle!==e&&(this.bgStyle=e,this.updateAspectRatio(),this.canvas.markDirty(this))},t.prototype.initialize=function(){var t=this;e.prototype.initialize.call(this),this.contentEl=this.containerEl.createDiv("canvas-node-content");var n=this.labelEl=this.nodeEl.createDiv("canvas-group-label");n.spellcheck=!1,n.addEventListener("pointerdown",this.onPointerdown.bind(this)),n.addEventListener("dblclick",(function(){return t.focusLabel()})),n.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||(e.preventDefault(),t.blurLabel())})),n.addEventListener("blur",(function(){return t.blurLabel()}))},t.prototype.focusLabel=function(){var e=this.labelEl;e&&(e.setAttr("contenteditable",!0),bb(e))},t.prototype.blur=function(){e.prototype.blur.call(this),this.blurLabel()},t.prototype.blurLabel=function(){var e=this.labelEl;if(e){e.setAttr("contenteditable",!1),e.blur();var t=e.getText();this.label!==t?(this.setLabel(t),this.canvas.requestSave()):e.setText(t||e$.labelUntitledGroup())}},t.prototype.render=function(){e.prototype.render.call(this);var t=this,n=t.labelEl,i=t.label,r=t.color;n.setText(i||e$.labelUntitledGroup());var o=!1,a=!1;if(r){var s=void 0;if(fX.test(r)){var l=n.getCssPropertyValue("--canvas-color-".concat(r));s=GI("rgb(".concat(l,")"))}else s=GI(r);s&&(KI(s)?a=!0:o=!0)}n.toggleClass("mod-foreground-light",o),n.toggleClass("mod-foreground-dark",a);var c=this,u=c.app,h=c.bgFile,p=c.bgStyle,d=c.contentEl;if(h){var f={backgroundImage:'url("'.concat(CSS.escape(u.vault.getResourcePath(h)),'")'),backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"};"repeat"===p&&(f.backgroundRepeat="repeat",f.backgroundPosition="top left",f.backgroundSize="auto"),d.setCssStyles(f)}else d.setCssStyles({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""})},t.prototype.updateAspectRatio=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:return t=(e=this).bgFile,"ratio"===e.bgStyle&&t?(i=(n=this).app,r=n.canvas,o=n.width,a=n.height,[4,ut(i.vault.getResourcePath(t))]):(this.aspectRatio=0,[2]);case 1:return(s=c.sent())&&(l=this.aspectRatio=s.width/s.height,o/a!==l&&(this.resize({width:Math.min(o,a*l),height:Math.min(a,o/l)}),r.overrideHistory())),[2]}}))}))},t.prototype.updateZIndex=function(){this.renderZIndex()},t.prototype.renderZIndex=function(){var e=this.zIndex=Math.round(-this.width*this.height);this.nodeEl.style.zIndex=String(e)},t.prototype.isEditable=function(){return!0},t.prototype.startEditing=function(){e.prototype.startEditing.call(this),this.canvas.readonly||this.focusLabel()},t.prototype.showMenu=function(t){var n=this;e.prototype.showMenu.call(this,t),this.canvas.readonly||t.addItem((function(e){return e.setSection("canvas").setTitle(e$.actionEditLabel()).setIcon("lucide-edit").onClick((function(){return n.startEditing()}))}))},t}(i$),f$=rf.plugins.canvas;function g$(e,t){switch(t){case"top":return gw((e.minX+e.maxX)/2,e.minY);case"right":return gw(e.maxX,(e.minY+e.maxY)/2);case"bottom":return gw((e.minX+e.maxX)/2,e.maxY);case"left":return gw(e.minX,(e.minY+e.maxY)/2)}}function m$(e,t){var n=g({},e);switch(t){case"top":n.y-=7;break;case"bottom":n.y+=7;break;case"left":n.x-=7;break;case"right":n.x+=7}return n}function v$(e,t,n){switch(e){case"left":return{x:t.x-n,y:t.y};case"right":return{x:t.x+n,y:t.y};case"top":return{x:t.x,y:t.y-n};case"bottom":return{x:t.x,y:t.y+n}}}function y$(e,t,n,i){var r=bw(e,n),o=Math.clamp(r/2,70,150),a=v$(t,e,o),s=v$(i,n,o);return{from:e,to:n,cp1:a,cp2:s,path:"M".concat(e.x,",").concat(e.y," C").concat(a.x,",").concat(a.y," ").concat(s.x,",").concat(s.y," ").concat(n.x,",").concat(n.y)}}var b$={top:"180",bottom:"0",left:"90",right:"270"},w$="none",k$="arrow",C$=function(){function e(e,t,n,i){this.color="",this.label="",this.unknownData={},this.initialized=!1,this.canvas=e,this.id=t,this.from=n,this.to=i,this.lineGroupEl=createSvg("g"),this.lineEndGroupEl=createSvg("g")}return e.prototype.attach=function(){this.isAttached||(this.canvas.edgeContainerEl.appendChild(this.lineGroupEl),this.canvas.edgeEndContainerEl.appendChild(this.lineEndGroupEl))},e.prototype.detach=function(){this.isAttached&&(this.lineGroupEl.detach(),this.lineEndGroupEl.detach())},Object.defineProperty(e.prototype,"isAttached",{get:function(){return!!this.lineGroupEl.parentNode},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e,t,n;null===(e=this.labelElement)||void 0===e||e.destroy(),null===(t=this.lineGroupEl)||void 0===t||t.remove(),null===(n=this.lineEndGroupEl)||void 0===n||n.remove()},e.prototype.getData=function(){var e=this,t=e.id,n=e.from,i=e.to,r=e.color,o=e.label,a=e.unknownData,s=g(g({},a),{id:t,fromNode:n.node.id,fromSide:n.side,toNode:i.node.id,toSide:i.side});return n.end!==w$&&(s.fromEnd=n.end),i.end!==k$&&(s.toEnd=i.end),r&&(s.color=r),o&&(s.label=o),s},e.prototype.setData=function(e){var t=e.fromNode,n=e.fromSide,i=e.fromEnd,r=e.toNode,o=e.toSide,a=e.toEnd,s=e.color,l=e.label,c=m(e,["fromNode","fromSide","fromEnd","toNode","toSide","toEnd","color","label"]),u=!1;s=vX(s||""),this.color!==s&&(this.color=s,u=!0),this.label!==l&&(this.label=l,u=!0);var h=this.canvas,p=h.nodes,d=!1;t&&t!==this.from.node.id&&p.has(t)&&(d=!0,this.from.node=p.get(t)),t&&n!==this.from.side&&(this.from.side=n,u=!0),i=i||w$,t&&i!==this.from.end&&(this.from.end=i,u=!0),r&&r!==this.to.node.id&&p.has(r)&&(d=!0,this.to.node=p.get(r)),r&&o!==this.to.side&&(this.to.side=o,u=!0),a=a||k$,r&&a!==this.to.end&&(this.to.end=a,u=!0),d&&h.markMoved(this),u&&h.markDirty(this),this.unknownData=c},e.prototype.setColor=function(e,t){void 0===t&&(t=!1),e=vX(e||""),this.color!==e&&(this.color=e,t?this.render():this.canvas.markDirty(this))},e.prototype.setLabel=function(e){this.label!==e&&(this.label=e)},e.prototype.update=function(e,t){var n=this.canvas;this.from.node!==e.node&&(n.edgeFrom.delete(this.from.node,this),e.node instanceof o$||n.edgeFrom.add(e.node,this)),this.to.node!==t.node&&(n.edgeTo.delete(this.to.node,this),t.node instanceof o$||n.edgeTo.add(t.node,this)),this.from=e,this.to=t,n.markMoved(this)},e.prototype.getBBox=function(){var e=this.from,t=this.to,n=g$(e.node.getBBox(),e.side),i=g$(t.node.getBBox(),t.side);return{minX:Math.min(n.x,i.x),minY:Math.min(n.y,i.y),maxX:Math.max(n.x,i.x),maxY:Math.max(n.y,i.y)}},e.prototype.focus=function(){this.select()},e.prototype.blur=function(){var e;this.deselect(),null===(e=this.labelElement)||void 0===e||e.blur()},e.prototype.select=function(){this.lineGroupEl.addClass("is-focused"),this.lineEndGroupEl.addClass("is-focused")},e.prototype.deselect=function(){this.lineGroupEl.removeClass("is-focused"),this.lineEndGroupEl.removeClass("is-focused")},e.prototype.editLabel=function(){this.labelElement||(this.labelElement=new E$(this)),this.labelElement.focus()},e.prototype.getCenter=function(){return function(e,t){var n=t.from,i=t.to,r=t.cp1,o=t.cp2,a=1-e,s=a*a*a,l=3*e*a*a,c=3*e*e*a,u=e*e*e;return{x:s*n.x+l*r.x+c*o.x+u*i.x,y:s*n.y+l*r.y+c*o.y+u*i.y}}(.5,this.bezier)},e.prototype.initialize=function(){var e=this,t=this.lineGroupEl;t.addEventListener("click",(function(t){return e.onClick(t)})),t.addEventListener("contextmenu",(function(t){return e.onContextMenu(t)})),t.addEventListener("pointerdown",(function(t){return e.onConnectionPointerdown(t)})),this.path={interaction:t.createSvg("path","canvas-interaction-path"),display:t.createSvg("path","canvas-display-path")}},e.prototype.render=function(){var e;this.initialized||(this.initialized=!0,this.initialize());var t=this,n=t.lineGroupEl,i=t.lineEndGroupEl,r=t.color,o=t.label;this.updatePath(),this.labelElement&&!o&&this.labelElement.destroy(!0),null===(e=this.labelElement)||void 0===e||e.render(),o&&(this.labelElement||(this.labelElement=new E$(this)),this.labelElement.setText(o)),gX(n,r),gX(i,r),n.toggleClass("is-themed",!!r),i.toggleClass("is-themed",!!r)},e.prototype.updatePath=function(){var e=this,t=e.from,n=e.to,i=e.path,r=e.toLineEnd,o=e.fromLineEnd,a=g$(t.node.getBBox(),t.side),s=m$(a,t.side),l=g$(n.node.getBBox(),n.side),c=m$(l,n.side),u=this.bezier=y$(s,t.side,c,n.side);t.end!==(null==o?void 0:o.type)&&(o&&o.el.detach(),o=this.fromLineEnd=this.createEdgeEnd(t.end)),n.end!==(null==r?void 0:r.type)&&(r&&r.el.detach(),r=this.toLineEnd=this.createEdgeEnd(n.end));var h=u.path;o?o.el.style.transform="translate(".concat(a.x,"px, ").concat(a.y,"px) rotate(").concat(b$[t.side],"deg)"):h="M".concat(a.x," ").concat(a.y," L").concat(s.x," ").concat(s.y," ").concat(h),r?r.el.style.transform="translate(".concat(l.x,"px, ").concat(l.y,"px) rotate(").concat(b$[n.side],"deg)"):h="".concat(h," M").concat(c.x," ").concat(c.y," L").concat(l.x," ").concat(l.y),i.interaction.setAttr("d",h),i.display.setAttr("d",h)},e.prototype.createEdgeEnd=function(e){return"arrow"===e?{el:this.lineEndGroupEl.createSvg("g",{},(function(e){e.createSvg("polygon",{cls:"canvas-path-end",attr:{points:"0,0 6.5,10.4 -6.5,10.4"}})})),type:e}:null},e.prototype.onClick=function(e){var t=this.canvas;0!==e.button||t.readonly||(e.shiftKey?t.toggleSelect(this):1===t.selection.size&&t.selection.has(this)?this.editLabel():t.selectOnly(this))},e.prototype.onContextMenu=function(e){if(!e.defaultPrevented){var t=this.canvas;if(t.selection.has(this)&&t.selection.size>1)t.onSelectionContextMenu(e);else{t.readonly||t.selectOnly(this);var n=(new fw).addSections(["canvas"]);this.showMenu(n,e),e.preventDefault(),n.showAtMouseEvent(e)}}},e.prototype.showMenu=function(e,t){var n=this;this.canvas.readonly||(e.addItem((function(e){return e.setSection("danger").setTitle(f$.actionRemove()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.canvas.removeEdge(n),n.canvas.requestSave()}))})),e.addItem((function(e){return e.setSection("canvas").setTitle(f$.actionEditLabel()).setIcon("lucide-edit").onClick((function(){return n.editLabel()}))}))),e.addItem((function(e){return e.setSection("canvas").setTitle(f$.actionFollowConnection()).setIcon("lucide-corner-down-right").onClick((function(){var e=n,i=e.canvas,r=e.from,o=e.to,a=i.posFromEvt(t),s=g$(r.node.getBBox(),r.side),l=g$(o.node.getBBox(),o.side),c="from"===(bw(a,s)>bw(a,l)?"to":"from")?o.node:r.node;i.zoomToBbox(c.getBBox())}))})),this.canvas.app.workspace.trigger("canvas:edge-menu",e,this)},e.prototype.onConnectionPointerdown=function(e){var t=this,n=this.canvas;e.isPrimary&&0===e.button&&!n.readonly&&("touch"!==e.pointerType||n.selection.has(this))&&(e.preventDefault(),ww(e,(function(){var n=t,i=n.canvas,r=n.from,o=n.to,a=i.posFromEvt(e),s=g$(r.node.getBBox(),r.side),l=g$(o.node.getBBox(),o.side),c=bw(a,s)>bw(a,l)?"to":"from",u="from"===c?o:r,h=new o$(i),p=null;return i.canvasEl.addClass("is-connecting"),i.deselectAll(),t.canvas.handleDragWithPan(e,{move:function(e){var n=i.posFromEvt(e);h.x=n.x,h.y=n.y,h.width=0,h.height=0;var a=i.getIntersectingNodes(ZY(h.getBBox(),i.config.objectSnapDistance));a.remove(u.node),p=sX(n,a,i.config.objectSnapDistance),"from"===c?p?t.update({side:p.side,node:p.node,end:r.end},o):t.update({side:r.side,node:h,end:r.end},o):p?t.update(r,{side:p.side,node:p.node,end:o.end}):t.update(r,{side:o.side,node:h,end:o.end})},end:function(){p||i.removeEdge(t),i.requestSave()},cancel:function(){t.update(r,o)},cleanup:function(){i.canvasEl.removeClass("is-connecting"),kw(t.lineGroupEl,"click")}})})))},e}(),E$=function(){function e(e){var t=this;this.isEditing=!1,this.initialTextState="",this.edge=e;var n=e.canvas,i=this.wrapperEl=n.canvasEl.createDiv("canvas-path-label-wrapper");i.addEventListener("click",(function(i){if(!n.readonly){if(i.shiftKey)return t.blur(),void n.toggleSelect(e);var r=n.selection;1===r.size&&r.has(e)?t.isEditing||t.focus(mw(i)):n.selectOnly(e)}})),this.textareaEl=i.createDiv({parent:i,cls:"canvas-path-label",text:this.edge.label,attr:{contentEditable:!1,"data-placeholder":f$.promptAddText()}},(function(e){e.addEventListener("input",(function(){t.edge.label=e.innerText,t.edge.canvas.requestSave(!1)})),t.edge.label||setTimeout((function(){return t.focus()}))})),this.render()}return e.prototype.setText=function(e){this.textareaEl.setText(e)},e.prototype.focus=function(e){var t,n=this.textareaEl;this.isEditing=!0,n.setAttr("contenteditable",!0),n.addClass("is-editing"),e?t=n.doc.caretRangeFromPoint(e.x,e.y):(t=n.doc.createRange()).selectNodeContents(n);var i=n.win.getSelection();i.removeAllRanges(),i.addRange(t),n.focus(),this.initialTextState=this.edge.label||""},e.prototype.blur=function(){var e=this.textareaEl;this.isEditing=!1,e.blur(),e.setAttr("contenteditable",!1),e.removeClass("is-editing"),this.edge.label?this.initialTextState!==this.edge.label&&this.edge.canvas.requestSave():this.destroy(),this.initialTextState=""},e.prototype.render=function(){var e=this.wrapperEl,t=this.edge.getCenter();e.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"),gX(e,this.edge.color),e.toggleClass("is-themed",!!this.edge.color)},e.prototype.destroy=function(e){var t=this.edge;t.label&&delete t.label,this.initialTextState&&!e&&t.canvas.requestSave(),this.wrapperEl.remove(),t.labelElement=null},e}(),x$=rf.plugins.canvas,S$=function(e){function t(t,n){var i=e.call(this,t.app)||this;return i.emptyStateText=x$.msgNoGroupsFound(),i.view=t,i.cb=n,i.setInstructions([{command:"↑↓",purpose:rf.plugins.templates.instructionNavigate()},{command:"↵",purpose:x$.instructionJumpToGroup()},{command:"esc",purpose:rf.plugins.templates.instructionDismiss()}]),i.setPlaceholder(x$.actionJumpToGroup()),i.scope.register(null,"Tab",(function(){return!1})),i}return f(t,e),t.prototype.getItems=function(){return this.view.canvas.getData().nodes.filter((function(e){return"group"===e.type}))},t.prototype.onChooseItem=function(e){this.cb(e)},t.prototype.getItemText=function(e){return e.label||x$.labelUntitledGroup()},t}(eG),M$=function(e){function t(t,n,i){void 0===i&&(i=!1);var r=e.call(this,t,n)||this;return r.allowNullSelection=i,r}return f(t,e),t.prototype.renderSuggestion=function(e,t){e?t.setText(e.path):t.setText("+ "+this.getValue())},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var n=[],i=0,r=this.app.vault.getAllLoadedFiles();i<r.length;i++){var o=r[i];if(n.length>=t.MAX_SUGGESTIONS)break;o instanceof $y&&this.filePredicate(o,e)&&n.push(o)}return this.allowNullSelection&&e&&n.push(null),n},t.prototype.filePredicate=function(e,t){return e.path.toLowerCase().contains(t)},t.prototype.selectSuggestion=function(t,n){t&&(this.setValue(t.path),this.textInputEl.trigger("input")),this.close(),e.prototype.selectSuggestion.call(this,t,n)},t.MAX_SUGGESTIONS=100,t}(lB),T$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.folderPredicate=i,r}return f(t,e),t.prototype.filePredicate=function(t,n){return!!this.folderPredicate(t)&&e.prototype.filePredicate.call(this,t,n)},t}(M$),D$=function(e){function t(t){var n=e.call(this)||this;return n.index={},n.fileQueue=[],n.app=t,n}return f(t,e),t.prototype.onload=function(){var e=this.app.vault;this.registerEvent(e.on("create",this.onCreate,this)),this.registerEvent(e.on("modify",this.onModify,this)),this.registerEvent(e.on("rename",this.onRename,this)),this.registerEvent(e.on("delete",this.onDelete,this));for(var t=0,n=e.getFiles();t<n.length;t++){var i=n[t];this.canProcess(i)&&this.queue(i)}},t.prototype.onunload=function(){this.index={},this.fileQueue=[],this.frame&&(this.frame.cancel(),this.frame=null)},t.prototype.onCreate=function(e){e instanceof Xy&&this.canProcess(e)&&this.queue(e)},t.prototype.onModify=function(e){e instanceof Xy&&this.canProcess(e)&&this.queue(e)},t.prototype.onRename=function(e,t){if(e instanceof Xy&&this.canProcess(e)){var n=this.index;if(n.hasOwnProperty(t)){var i=n[t];delete n[t],n[e.path]=i}}},t.prototype.onDelete=function(e){var t=this.index;t.hasOwnProperty(e.path)&&delete t[e.path],e instanceof Xy&&this.fileQueue.remove(e)},t.prototype.queue=function(e){this.fileQueue.contains(e)||this.fileQueue.push(e),this.requestFrame()},t.prototype.requestFrame=function(){this.frame||(this.frame=dt(this.run.bind(this),100))},t.prototype.run=function(){return v(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:if(!((e=this.fileQueue).length>0))return[3,5];t=e.pop(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.process(t)];case 2:return(n=r.sent())&&(this.index[t.path]=n),[3,4];case 3:return i=r.sent(),console.error("Failed to index ".concat(t.path),i),[3,4];case 4:this.frame=null,r.label=5;case 5:return e.length>0&&this.requestFrame(),[2]}}))}))},t.prototype.get=function(e){return this.getForPath(e.path)},t.prototype.getForPath=function(e){return this.index.hasOwnProperty(e)?this.index[e]:null},t.prototype.getAll=function(){return this.index},t}(nb),A$="canvas",L$="canvas",P$=rf.plugins.canvas,I$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refNodeIds=new WeakMap,t}return f(t,e),t.prototype.canProcess=function(e){return e.extension===L$},t.prototype.process=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return[4,this.app.vault.cachedRead(e)];case 1:if(!(t=p.sent()))return[2,null];if(n=JSON.parse(t),!(i=n.nodes)||!Array.isArray(i))return[2,null];r=[],o={},a=this.refNodeIds,s=function(e){var t,n,i;return y(this,(function(s){switch(s.label){case 0:return"file"!==e.type?[3,1]:(r.push({file:e.file,subpath:e.subpath}),[3,6]);case 1:return"group"===e.type&&e.background?(r.push({file:e.background,subpath:""}),[3,6]):[3,2];case 2:if("text"!==e.type)return[3,6];t=e.text,s.label=3;case 3:return s.trys.push([3,5,,6]),[4,l.parseText(t)];case 4:return Rx(n=s.sent(),(function(t){a.set(t,e.id)})),o[e.id]=n,[3,6];case 5:return i=s.sent(),console.error(i),[3,6];case 6:return[2]}}))},l=this,c=0,u=i,p.label=2;case 2:return c<u.length?(h=u[c],[5,s(h)]):[3,5];case 3:p.sent(),p.label=4;case 4:return c++,[3,2];case 5:return[2,{embeds:r,caches:o}]}}))}))},t.prototype.parseText=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e.length<5e3?[2,Mx(e)]:(t=H(e),[4,this.app.metadataCache.computeMetadataAsync(t)]);case 1:return[2,n.sent()]}}))}))},t}(D$),O$=function(){function e(e,t){this.app=e,this.canvas=t}return e.prototype.iterateReferences=function(e){var t=this.canvas.index.getAll(),n=function(n){if(!t.hasOwnProperty(n))return"continue";var i=t[n];for(var r in i.caches){if(i.caches.hasOwnProperty(r))Rx(i.caches[r],(function(t){e(n,t)}))}};for(var i in t)n(i)},e.prototype.applyUpdates=function(e,t){return v(this,void 0,Promise,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:n=this.canvas.index.refNodeIds,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.app.vault.process(e,(function(e){for(var i=JSON.parse(e),r=new Xe,o=0,a=t;o<a.length;o++){var s=a[o],l=n.get(s.reference);l&&r.add(l,s)}for(var c=0,u=i.nodes;c<u.length;c++){var h=u[c];if("text"===h.type){var p=r.get(h.id);p&&(h.text=UB(h.text,p))}}return et(i)}))];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),console.error(i),[3,4];case 4:return[2]}}))}))},e.prototype.renameSubpath=function(e,t,n){return v(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h,p,d,f,g,m;return y(this,(function(v){switch(v.label){case 0:for(g in i=e.path,r=[],o=this.canvas.index.getAll())if(o.hasOwnProperty(g))for(a=o[g],s=0,l=a.embeds;s<l.length;s++)if((c=l[s]).file===i&&c.subpath)if(u=c.subpath.substring(1),t.startsWith("^")){if(u.toLowerCase()===t){r.push(g);break}}else if(Ux(u).toLowerCase()===t){r.push(g);break}if(0===r.length)return[2];new CI("Canvas detected file renames affecting ".concat(r.length," canvas files, updating...")),h=this.app.vault,p=0,d=0,f=r,v.label=1;case 1:return d<f.length?(g=f[d],(m=h.getAbstractFileByPath(g))instanceof Xy&&m.extension===L$?[4,h.process(m,(function(e){if(!e)return e;for(var r=JSON.parse(e),o=0,a=r.nodes;o<a.length;o++){var s=a[o];if("file"===s.type&&s.file===i&&s.subpath){var l=s.subpath.substring(1);t.startsWith("^")?l.toLowerCase()===t&&(s.subpath="#"+n):Ux(l).toLowerCase()===t&&(s.subpath="#"+n)}}return et(r)}))]:[3,3]):[3,4];case 2:v.sent(),v.label=3;case 3:return d++,[3,1];case 4:return p>0&&new CI("Canvas updated ".concat(p," embed cards.")),[2]}}))}))},e}(),F$=function(){function e(e){this.app=e}return e.prototype.load=function(e){return e?this.app.loadLocalStorage("canvas-"+e.path):null},e.prototype.save=function(e,t){e&&this.app.saveLocalStorage("canvas-"+e.path,t)},e.prototype.handleRename=function(e,t){var n=this.app.loadLocalStorage("canvas-"+e);n&&(this.remove(e),this.save(t,n))},e.prototype.handleDelete=function(e){this.remove(e.path)},e.prototype.remove=function(e){this.app.saveLocalStorage("canvas-"+e,null)},e}(),B$=function(){function e(){var e=this;this.id="canvas",this.name=P$.name(),this.description=P$.desc(),this.defaultOn=!0,this.options={},this.renames=[],this.renameQueue=new RD,this.requestProcessRename=rt((function(){var t=e.renames;e.renames=[],e.renameQueue.queue((function(){return v(e,void 0,void 0,(function(){var e,n,i,r,o,a,s,l,c,u,h,p,d;return y(this,(function(f){switch(f.label){case 0:for(p in e=t.map((function(e){return e[0]})),n=[],i=this.index.getAll())if(i.hasOwnProperty(p))for(r=i[p],o=0,a=r.embeds;o<a.length;o++)if(s=a[o],e.contains(s.file)){n.push(p);break}if(0===n.length)return[2];new CI("Canvas detected file renames affecting ".concat(n.length," canvas files, updating...")),l=this.app.vault,c=0,u=0,h=n,f.label=1;case 1:return u<h.length?(p=h[u],(d=l.getAbstractFileByPath(p))instanceof Xy?[4,l.process(d,(function(e){if(!e)return e;for(var n=JSON.parse(e),i=0,r=n.nodes;i<r.length;i++){var o=r[i];if("file"===o.type)for(var a=0,s=t;a<s.length;a++){var l=s[a];o.file===l[0]&&(o.file=l[1],c++)}else if("group"===o.type)for(var u=0,h=t;u<h.length;u++){l=h[u];o.background===l[0]&&(o.background=l[1],c++)}}return et(n)}))]:[3,3]):[3,4];case 2:f.sent(),f.label=3;case 3:return u++,[3,1];case 4:return c>0&&new CI("Canvas updated ".concat(c," embed cards.")),[2]}}))}))}))}),500,!0)}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(A$,(function(e){return new N$(e,n)})),t.registerGlobalCommand({id:"canvas:new-file",name:P$.commandCreateNewCanvas(),icon:"lucide-layout-dashboard",callback:function(){return v(n,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=null===(r=this.app.workspace.getActiveFile())||void 0===r?void 0:r.path,n=this.getNewFileParent(t),[4,this.createNewCanvasFile(n)];case 1:return i=o.sent(),[4,e.workspace.getLeaf().openFile(i,{eState:{rename:"all"}})];case 2:return o.sent(),[2]}}))}))}}),t.registerGlobalCommand({id:"canvas:export-as-image",name:P$.actionExportPng(),icon:"lucide-image",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(N$);return!!t&&(e||t.canvas.generateHDImage(),!0)}}),t.registerGlobalCommand({id:"canvas:jump-to-group",name:P$.actionJumpToGroup(),icon:"lucide-move",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(N$);return!!t&&(e||new S$(t,(function(e){var n=YY(e);t.canvas.zoomToBbox(n)})).open(),!0)}}),t.registerGlobalCommand({id:"canvas:convert-to-file",name:P$.commandConvertToFile(),icon:"lucide-file-input",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(N$);if(t){var i=t.canvas.selection;if(1===i.size){var r=i.values().next().value;if(r instanceof c$)return e||r.convertToFile(),!0}}return!1}}),t.registerRibbonItem(P$.commandCreateNewCanvas(),"lucide-layout-dashboard",(function(){return v(n,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=null===(r=this.app.workspace.getActiveFile())||void 0===r?void 0:r.path,n=this.getNewFileParent(t),[4,this.createNewCanvasFile(n)];case 1:return i=o.sent(),[4,e.workspace.getLeaf().openFile(i,{eState:{rename:"all"}})];case 2:return o.sent(),[2]}}))}))})),this.index=t.addChild(new I$(e)),this.localDataManager=new F$(e)},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.vault.on("rename",this.onRename,this)),t.registerEvent(e.vault.on("delete",this.onDelete,this)),e.fileManager.linkUpdaters.canvas=new O$(e,this),t.register((function(){return delete e.fileManager.linkUpdaters.canvas})),e.viewRegistry.registerExtensions([L$],A$),e.embedRegistry.registerExtension(L$,(function(e,t,n){return new R$(e,t,n)})),e.fileManager.registerFileParentCreator(L$,this.getNewFileParent.bind(this)),n=this,r=(i=Object).assign,o=[{snapToObjects:!0,snapToGrid:!0}],[4,t.loadData()];case 1:return n.options=r.apply(i,o.concat([a.sent()])),t.addSettingTab(new H$(e,t,this)),[2]}}))}))},e.prototype.onDisable=function(e){e.viewRegistry.unregisterExtensions([L$]),e.embedRegistry.unregisterExtension(L$),e.fileManager.unregisterFileCreator(L$)},e.prototype.onUserDisable=function(e){for(var t=0,n=e.workspace.getLeavesOfType(A$);t<n.length;t++){n[t].detach()}},e.prototype.onDelete=function(e){e instanceof Xy&&e.extension===L$&&this.localDataManager.handleDelete(e)},e.prototype.onRename=function(e,t){e instanceof Xy&&(e.extension===L$&&this.localDataManager.handleRename(t,e),this.renames.push([t,e.path]),this.requestProcessRename())},e.prototype.onFileMenu=function(e,t,n,i){var r=this;"file-explorer-context-menu"===n&&t instanceof $y&&e.addItem((function(e){e.setIcon("lucide-layout-dashboard").setTitle(P$.actionNewCanvas()).onClick((function(e){return v(r,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return[4,this.createNewCanvasFile(t)];case 1:return n=r.sent(),i=hw.isModEvent(e),[4,this.app.workspace.getLeaf(i).openFile(n,{eState:{rename:"all"}})];case 2:return r.sent(),[2]}}))}))}))}))},e.prototype.getNewFileParent=function(e){var t=this.app.vault,n=this.options,i=n.newFileLocation;if("folder"===i){if(null!=(o=n.newFileFolderPath)&&(r=t.getAbstractFileByPath(o))instanceof $y)return r}else if(e&&"current"===i){var r,o=re(e);if((r=t.getAbstractFileByPath(o))instanceof $y)return r}return t.getRoot()},e.prototype.createNewCanvasFile=function(e,t,n){return v(this,void 0,void 0,(function(){return y(this,(function(i){return[2,this.app.fileManager.createNewFile(e,t,L$,n)]}))}))},e.prototype.saveOptions=function(){this.plugin.saveData(this.options)},e.prototype.rerenderCanvases=function(){for(var e=0,t=this.app.workspace.getLeavesOfType(A$);e<t.length;e++){var n=t[e].view;n instanceof N$&&n.canvas.rerenderViewport()}},e}(),N$=function(e){function t(t,n){var i=e.call(this,t)||this;i.icon="lucide-layout-dashboard",i.hoverPopover=null,i.isPlaintext=!1,i.plugin=n,i.canvas=new $X(i);var r=i.scope=new cw(i.app.scope),o=function(e){var t=e.targetNode;return t.instanceOf(HTMLElement)&&"true"===t.contentEditable};r.register(["Mod"],"z",(function(e){o(e)||(e.preventDefault(),i.canvas.undo())})),r.register(["Mod"],"a",(function(e){o(e)||i.canvas.selectAll()}));var a=function(e){o(e)||(e.preventDefault(),i.canvas.redo())};return r.register(["Mod","Shift"],"z",a),r.register(["Mod"],"y",a),r.register(["Shift"],"1",(function(e){o(e)||i.canvas.zoomToFit()})),r.register(["Shift"],"2",(function(e){o(e)||i.canvas.zoomToSelection()})),r.register([],"ArrowRight",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"right"))})),r.register(["Shift"],"ArrowRight",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"right"))})),r.register([],"ArrowLeft",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"left"))})),r.register(["Shift"],"ArrowLeft",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"left"))})),r.register([],"ArrowUp",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"up"))})),r.register(["Shift"],"ArrowUp",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"up"))})),r.register([],"ArrowDown",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"down"))})),r.register(["Shift"],"ArrowDown",(function(e){o(e)||(e.preventDefault(),i.canvas.nudgeSelection(e,"down"))})),i}return f(t,e),t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return i.sent(),t.viewState&&this.canvas.setState(t.viewState),[2]}}))}))},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.viewState=this.canvas.getState(),t},t.prototype.setEphemeralState=function(t){if(e.prototype.setEphemeralState.call(this,t),t.focus&&this.canvas.wrapperEl.focus(),void 0!==t.match){var n=this.canvas,i=t.match,r=i.nodeId,o=i.content,a=i.matches,s=r&&n.nodes.get(r);if(s&&(n.selectOnly(s),n.panIntoView(s.getBBox()),s instanceof c$&&s.child instanceof u$&&a.length>0)){var l=Ze(o,a[0][0]);s.child.previewMode.renderer.applyScrollDelayed(l,{center:!0,highlight:!0})}}},t.prototype.onResize=function(){this.canvas.onResize()},t.prototype.getViewType=function(){return A$},t.prototype.getViewData=function(){return et(this.canvas.data)},t.prototype.setViewData=function(e,t){var n=this.canvas;if(t&&this.clear(),e?(n.setData(JSON.parse(e)),t&&(n.zoomToFitQueued=!0,n.onResize())):(n.createPlaceholder(),n.requestFrame()),t){var i=this.getLocalData();i&&i.hasOwnProperty("readonly")&&"boolean"==typeof i.readonly&&n.setReadonly(i.readonly)}},t.prototype.clear=function(){this.canvas.clear()},t.prototype.onOpen=function(){return v(this,void 0,Promise,(function(){return y(this,(function(t){return this.canvas.load(),[2,e.prototype.onOpen.call(this)]}))}))},t.prototype.onClose=function(){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,e.prototype.onClose.call(this)];case 1:return t.sent(),this.canvas.unload(),[2]}}))}))},t.prototype.handleCut=function(e){this.canvas.handleCut(e)},t.prototype.handleCopy=function(e){this.canvas.handleCopy(e)},t.prototype.handlePaste=function(e){this.canvas.handlePaste(e)},t.prototype.onPaneMenu=function(t,n){var i=this;e.prototype.onPaneMenu.call(this,t,n),Lt.isDesktopApp&&t.addItem((function(e){return e.setSection("action").setTitle(P$.actionExportPng()).setIcon("lucide-image").onClick((function(){return i.canvas.generateHDImage()}))}))},t.prototype.getLocalData=function(){return this.plugin.localDataManager.load(this.file)},t.prototype.saveLocalData=function(){var e={};this.canvas.readonly&&(e.readonly=!0),0===Object.keys(e).length&&(e=null),this.plugin.localDataManager.save(this.file,e)},t}(T_),R$=function(e){function t(t,n,i){var r=e.call(this)||this;return r.app=t.app,r.ctx=t,r.containerEl=t.containerEl,r.containerEl.addClass("canvas-embed"),r.file=n,r.subpath=i,t.showInline&&(r.containerEl.addClass("inline-embed"),r.headerEl=r.containerEl.createDiv({cls:"embed-title"},(function(e){e.createSpan({cls:"file-embed-icon"},(function(e){gb(e,"lucide-layout-dashboard")})),e.appendText(" "+r.file.basename)}))),r}return f(t,e),t.prototype.loadFile=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x,S,M,T,D,A,L,P,I;return y(this,(function(y){switch(y.label){case 0:return t=(e=this).containerEl,n=e.ctx,i=e.app,t.addEventListener("click",(function(e){i.workspace.getLeaf(hw.isModEvent(e)).openLinkText(n.linktext,n.sourcePath)})),a=(o=JSON).parse,[4,i.vault.cachedRead(this.file)];case 1:if(r=a.apply(o,[y.sent()]),s=r.nodes,l=r.edges,!s)return[2];for(l||(l=[]),c=createSvg("svg","canvas-minimap"),u={},h=[],p=0,d=s;p<d.length;p++)I=d[p],f=YY(I),u[I.id]=f,h.push(f);for(g=$Y(h),m=function(e){gX(c.createSvg("rect",{attr:{x:e.x,y:e.y,width:e.width,height:e.height,rx:"20",ry:"20"}}),e.color)},v=0,b=s;v<b.length;v++)"group"===(I=b[v]).type&&m(I);for(w=Math.sqrt((g.maxX-g.minX)/10),k=0,C=l;k<C.length;k++)E=C[k],x=u[E.fromNode],S=u[E.toNode],x&&S&&(M=E.fromSide,T=E.toSide,D=y$(g$(x,M),M,g$(S,T),T),(A=c.createSvg("path",{attr:{d:D.path}})).style.strokeWidth=String(w),gX(A,E.color));for(L=0,P=s;L<P.length;L++)"group"!==(I=P[L]).type&&m(I);return g=ZY(g,Math.max(g.maxX-g.minX,g.maxY-g.minY)/20),c.setAttr("viewBox","".concat(g.minX," ").concat(g.minY," ").concat(g.maxX-g.minX," ").concat(g.maxY-g.minY)),t.setChildrenInPlace([this.headerEl,c].filter((function(e){return!!e}))),[2]}}))}))},t}(nb),H$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n,i=this.instance.options,r=function(){s.settingEl.toggle("folder"===n.getValue())};new YI(t).setName(P$.optionNewCanvasLocation()).addDropdown((function(t){n=t,t.addOption("root",rf.setting.file.optionChoiceVaultRoot()).addOption("current",rf.setting.file.optionChoiceCurrentFolder()).addOption("folder",rf.setting.file.optionChoiceSpecifiedFolder()).setValue(i.newFileLocation||"root").onChange((function(t){i.newFileLocation=t,e.plugin.saveData(i),r()}))}));var o,a,s=new YI(t).setName(P$.optionNewCanvasFolderPath()).setDesc(P$.optionNewCanvasFolderPathDescription()).addText((function(t){t.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).setValue("/"===i.newFileFolderPath?"":i.newFileFolderPath).onChange((function(t){i.newFileFolderPath=t,e.plugin.saveData(i)})),new M$(e.app,t.inputEl)}));new YI(t).setName(P$.optionWheelBehavior()).addDropdown((function(t){return t.addOption("pan",P$.labelPan()).addOption("zoom",P$.labelZoom()).setValue(i.defaultWheelBehavior||"pan").onChange((function(t){i.defaultWheelBehavior=t,e.plugin.saveData(i)}))})),new YI(t).setName(P$.optionModDragBehavior({key:WY(["Mod","Drag"])})).addDropdown((function(t){return t.addOption("menu",P$.optionShowMenu()).addOption("card",P$.actionAddCard()).addOption("note",P$.actionAddNote()).addOption("media",P$.actionAddMedia()).addOption("webpage",P$.actionAddWebsite()).addOption("group",P$.actionCreateGroup()).setValue(i.defaultModDragBehavior||"menu").onChange((function(t){i.defaultModDragBehavior=t,e.plugin.saveData(i)}))})),new YI(t).setName(P$.optionNodeLabel()).addDropdown((function(t){return t.addOption("always",P$.labelAlways()).addOption("hover",P$.labelHover()).addOption("never",P$.labelNever()).setValue(i.cardLabelVisibility||"always").onChange((function(t){i.cardLabelVisibility=t,e.plugin.saveData(i),e.instance.rerenderCanvases()}))})),new YI(t).setName(P$.optionSnapToGrid()).setDesc(P$.optionSnapToGridDesc()).addToggle((function(t){return t.setValue(i.snapToGrid).onChange((function(t){i.snapToGrid=t,e.plugin.saveData(i)}))})),new YI(t).setName(P$.optionSnapToObjects()).setDesc(P$.optionSnapToObjectsDesc()).addToggle((function(t){return t.setValue(i.snapToObjects).onChange((function(t){i.snapToObjects=t,e.plugin.saveData(i)}))}));var l=function(e){return a.extraSettingsEl.toggleVisibility(0!==e)};new YI(t).setName(P$.optionZoomBreakpoint()).setDesc(P$.optionZoomBreakpointDesc()).addExtraButton((function(e){return a=e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){o.setValue(0)}))})).addSlider((function(t){return o=t.setLimits(-.7,2.3999999999999995,.01).setValue(i.zoomBreakpoint||0).onChange((function(t){i.zoomBreakpoint=t,e.plugin.saveData(i),l(t)}))})),r(),l(i.zoomBreakpoint||0)},t}(IG),V$=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.commands=i,o.cb=r,o}return f(t,e),t.prototype.renderSuggestion=function(e,t){oL(t,e.command.name,e.matches.matches)},t.prototype.getSuggestions=function(e){var t=iL(e);return this.commands.map((function(e){return{command:e,matches:t(e.name)}})).filter((function(e){return!!e.matches})).sort((function(e,t){return t.matches.score-e.matches.score})).slice(0,100)},t.prototype.selectSuggestion=function(e){this.cb(e.command),this.close()},t}(lB),z$=function(){function e(){this.id="command-palette",this.name=rf.plugins.commandPalette.name(),this.description=rf.plugins.commandPalette.desc(),this.defaultOn=!0,this.modal=null,this.options={}}return e.prototype.init=function(e,t){this.app=e,this.openCallback=this.onOpen.bind(this),t.registerRibbonItem(rf.plugins.commandPalette.actionOpen(),"lucide-terminal",this.openCallback),t.registerGlobalCommand({id:"command-palette:open",name:rf.plugins.commandPalette.actionOpen(),icon:"lucide-terminal-square",callback:this.openCallback,hotkeys:[KT(["Mod"],"P")],showOnMobileToolbar:!0})},e.prototype.onEnable=function(e,t){return v(this,void 0,Promise,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return this.modal=new q$(e,this),n=this,r=(i=Object).assign,o=[{}],[4,t.loadData()];case 1:return n.options=r.apply(i,o.concat([a.sent()])),t.addSettingTab(new U$(e,t,this)),[2]}}))}))},e.prototype.onDisable=function(e,t){this.modal=null},e.prototype.saveSettings=function(e){e.saveData(this.options)},e.prototype.onOpen=function(){return this.modal&&this.modal.open(),!1},e.prototype.getCommands=function(){var e=this.app.commands.listCommands(),t=this.options.pinned;return t&&e.sort((function(e,n){var i=t.indexOf(e.id),r=t.indexOf(n.id);return i===r?JL(e.name,n.name):-1===i?1:-1===r?-1:i-r})),e},e}(),q$=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=rf.plugins.commandPalette.labelNoCommands(),i.commands=null,i.plugin=n,i.setInstructions([{command:"↑↓",purpose:rf.plugins.commandPalette.instructionNavigate()},{command:"↵",purpose:rf.plugins.commandPalette.instructionUse()},{command:"esc",purpose:rf.plugins.commandPalette.instructionDismiss()}]),i.setPlaceholder(rf.plugins.commandPalette.promptTypeCommand()),i.scope.register(null,"Tab",(function(){return!1})),i.scope.register(null,"Enter",(function(e){if(!e.isComposing)return i.chooser.useSelectedItem(e),!1})),i}return f(t,e),t.prototype.onOpen=function(){this.commands=null,e.prototype.onOpen.call(this)},t.prototype.onClose=function(){this.commands=null,e.prototype.onClose.call(this)},t.prototype.getItems=function(){var e=this.commands;return e||(e=this.commands=this.plugin.getCommands()),e},t.prototype.getItemText=function(e){return e.name},t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createDiv("suggestion-content"),i=t.createDiv("suggestion-aux"),r=n.createDiv("suggestion-title"),o=e.item,a=o.name,s=a.indexOf(": ");if(-1!==s){var l=a.slice(0,s),c=a.slice(s+2);rL(r.createSpan("suggestion-prefix"),l,e.match),rL(r.createSpan(),c,e.match,-(s+2))}else rL(r.createSpan(),a,e.match);var u=this.app,h=u.hotkeyManager.getHotkeys(o.id),p=u.hotkeyManager.getDefaultHotkeys(o.id);if(h)for(var d=0,f=h;d<f.length;d++){var g=f[d];i.createEl("kbd",{cls:"suggestion-hotkey",text:XT(g)})}else if(p)for(var m=0,v=p;m<v.length;m++){var y=v[m];i.createEl("kbd",{cls:"suggestion-hotkey",text:XT(y)})}var b=this.plugin.options.pinned;b&&b.contains(o.id)&&i.createSpan({cls:"suggestion-flair"},(function(e){gb(e,"lucide-pin")}))},t.prototype.onChooseItem=function(e,t){this.app.lastEvent=t,rj(e)},t}(eG),U$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty(),new YI(t).setHeading().setName(rf.plugins.commandPalette.labelPinnedCommands());var n=[],i=function(){var t=n.map((function(e){return e.id}));0===t.length&&(t=null),e.instance.options.pinned=t,e.instance.saveSettings(e.plugin),e.display()},r=this.instance.options.pinned;if(r)for(var o=0,a=r;o<a.length;o++){var s=a[o];(g=this.app.commands.commands[s])&&n.push(g)}for(var l=t.createDiv(),c=function(e){l.createDiv("mobile-option-setting-item",(function(t){t.createSpan({cls:"mobile-option-setting-item-name",text:e.name}),t.createDiv("clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,rf.interface.deleteActionShortName()),t.addEventListener("click",(function(){n.remove(e),i()}))})),t.createDiv("clickable-icon mobile-option-setting-drag-icon",(function(r){gb(r,"lucide-menu"),aS(r,rf.interface.dragToRearrange()),Et(r,t,l,0,(function(){return null}),(function(t){n.remove(e),n.splice(t,0,e),i()}))}))}))},u=0,h=n;u<h.length;u++){c(g=h[u])}0===n.length&&l.createDiv({cls:"mobile-option-setting-item",text:rf.plugins.commandPalette.labelNoCommands()});var p=this.app.commands.commands,d=[];for(var f in p){var g=p[f];n.contains(g)||d.push(g)}new YI(t).setName(rf.plugins.commandPalette.optionAddNewPin()).setDesc(rf.plugins.commandPalette.optionAddNewPinDescription()).addText((function(t){return t.setPlaceholder(rf.plugins.commandPalette.promptTypeCommand()).then((function(){new V$(e.app,t.inputEl,d,(function(e){n.push(e),i()}))}))}))},t}(IG),W$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText(se(e.path))},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var n=[],i=0,r=this.app.vault.getAllLoadedFiles();i<r.length;i++){var o=r[i];if(n.length>=t.MAX_SUGGESTIONS)break;o instanceof Xy&&this.filePredicate(o,e)&&n.push(o)}return n},t.prototype.filePredicate=function(e,t){return e.path.toLowerCase().contains(t)},t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue(se(e.path)),t.trigger("input"),this.close()},t.MAX_SUGGESTIONS=100,t}(lB),_$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.filePredicate=function(t,n){return"md"===t.extension&&e.prototype.filePredicate.call(this,t,n)},t}(W$),j$="YYYY-MM-DD",G$=rf.plugins.dailyNotes,K$=function(){function e(){this.id="daily-notes",this.name=G$.name(),this.description=G$.desc(),this.defaultOn=!0,this.app=null,this.plugin=null,this.options={}}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerRibbonItem(G$.actionOpen(),"lucide-calendar",this.onOpenDailyNote.bind(this)),t.registerGlobalCommand({id:"daily-notes",name:G$.actionOpen(),icon:"lucide-calendar-days",callback:this.onOpenDailyNote.bind(this)}),t.registerGlobalCommand({id:"daily-notes:goto-prev",name:G$.actionOpenPrevious(),icon:"lucide-calendar-minus",checkCallback:function(e){var t=n.getCurrentFileDateTimestamp();return!!t&&(e||n.gotoPreviousExisting(t),!0)}}),t.registerGlobalCommand({id:"daily-notes:goto-next",name:G$.actionOpenNext(),icon:"lucide-calendar-plus",checkCallback:function(e){var t=n.getCurrentFileDateTimestamp();return!!t&&(e||n.gotoNextExisting(t),!0)}})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=r.sent()||{},t.addSettingTab(new Y$(e,t,this)),this.app.workspace.onLayoutReady((function(){i.options.autorun&&i.onOpenDailyNote()})),t.registerEvent(this.app.workspace.on("receive-text-menu",(function(e,t){e.addItem((function(e){return e.setSection("options").setTitle(G$.actionInsertText()).setIcon("lucide-calendar-check").onClick((function(){return v(i,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return e=n.sent(),[4,this.app.fileManager.insertTextIntoFile(e,t,{},"","",!1)];case 2:return n.sent(),[4,this.app.workspace.getLeaf().openFile(e,{active:!0,state:{mode:"source"}})];case 3:return n.sent(),[2]}}))}))}))}))}))),t.registerEvent(this.app.workspace.on("receive-files-menu",(function(e,t){e.addItem((function(e){return e.setTitle(G$.actionInsertLink()).setIcon("lucide-calendar-check").onClick((function(){return v(i,void 0,void 0,(function(){var e,n,i=this;return y(this,(function(r){switch(r.label){case 0:return[4,this.getDailyNote()];case 1:return e=r.sent(),n=t.map((function(t){return i.app.fileManager.generateMarkdownLink(t,e.path)})),[4,this.app.fileManager.insertTextIntoFile(e,n.join("\n"),{},"","",!1)];case 2:return r.sent(),[4,this.app.workspace.getLeaf().openFile(e,{active:!0,state:{mode:"source"}})];case 3:return r.sent(),[2]}}))}))}))}))}))),[2]}}))}))},e.prototype.getDailyNote=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:n=(t=this).app,i=t.options,null!=e||(e=window.moment()),r=null,o=this.getFormat();try{r=e.format(o)}catch(e){return new CI(G$.msgFailFormat({format:o})),console.error(e),[2]}if(r&&(r=r.trim()),(s=i.folder)&&String.isString(s)){if(l=he(s),!((c=n.vault.getAbstractFileByPath(l))instanceof $y))return new CI(G$.msgFailFolder({folderOption:s})),[2,null];a=c}else a=n.fileManager.getNewFileParent("");if(u=a.getParentPrefix()+r+".md",(h=n.vault.getAbstractFileByPathInsensitive(u))&&!(h instanceof Xy))return[2,null];if(p=h)return[3,8];y.label=1;case 1:return y.trys.push([1,7,,8]),(d=i.template)?(f=n.metadataCache.getFirstLinkpathDest(d,""))?[4,n.vault.cachedRead(f)]:(new CI(G$.msgFailTemplateFile({template:d})),[2]):[3,4];case 2:return g=y.sent(),m=AB(g,{title:r},{}),[4,n.fileManager.createNewMarkdownFile(a,r,m)];case 3:return p=y.sent(),[3,6];case 4:return[4,n.fileManager.createNewMarkdownFile(a,r)];case 5:p=y.sent(),y.label=6;case 6:return[3,8];case 7:return v=y.sent(),new CI(v.toString()),[2];case 8:return[2,p]}}))}))},e.prototype.onOpenDailyNote=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return(t=n.sent())?[4,this.app.workspace.getLeaf(hw.isModEvent(e||this.app.lastEvent)).openFile(t,{active:!0,state:{mode:"source"}})]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.gotoPreviousExisting=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=Number.NEGATIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r<e&&r>t&&(n=i,t=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new CI(G$.msgNoPrevious()),[2]);case 1:return i.sent(),[2]}}))}))},e.prototype.gotoNextExisting=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=Number.POSITIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r>e&&r<t&&(n=i,t=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new CI(G$.msgNoNext()),[2]);case 1:return i.sent(),[2]}}))}))},e.prototype.iterateDailyNotes=function(e){var t=this.app.vault.getAllLoadedFiles(),n=this.getFormat();t.forEach((function(t){if(t instanceof Xy){var i=window.moment(t.basename,n,!0);i.isValid()&&e(t,i.valueOf())}}))},e.prototype.getCurrentFileDateTimestamp=function(){var e=this.app.workspace.getActiveViewOfType(iK);if(e){var t=e.file.basename,n=this.getFormat(),i=window.moment(t,n,!0);if(i.isValid())return i.valueOf()}return null},e.prototype.getFormat=function(){var e=this.options.format;return e&&String.isString(e)?e:j$},e}(),Y$=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options,i=document.createDocumentFragment();i.appendText(G$.labelReferToSyntax()),i.createEl("a",{text:G$.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank",rel:"noopener"}}),i.createEl("br"),i.appendText(G$.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new YI(t).setName(G$.optionDateFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat(j$).setValue(n.format).onChange((function(t){n.format=t.trim(),e.plugin.saveData(n)}))})),new YI(t).setName(G$.optionNewFileLocation()).setDesc(G$.optionNewFileLocationDescription()).addText((function(t){t.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new M$(e.app,t.inputEl)})),new YI(t).setName(G$.optionTemplate()).setDesc(G$.optionTemplateDescription()).addText((function(t){t.setPlaceholder(rf.setting.filePathExamplePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new _$(e.app,t.inputEl)})),new YI(t).setName(G$.optionOpenOnStart()).setDesc(G$.optionOpenOnStartDescription()).addToggle((function(t){return t.setValue(n.autorun).onChange((function(t){n.autorun=t,e.plugin.saveData(n)}))}))},t}(IG),X$=function(){function e(){this.id="editor-status",this.name=rf.plugins.editorStatus.name(),this.description=rf.plugins.editorStatus.desc(),this.defaultOn=!0,this.hiddenFromList=!0}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerStatusBarItem()},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-change",this.updateStatus,this)),t.registerEvent(e.workspace.on("active-leaf-change",this.updateStatus,this)),t.statusBarEl.addEventListener("click",this.onClick.bind(this)),t.statusBarEl.addEventListener("contextmenu",this.onClick.bind(this)),t.statusBarEl.addClass("mod-clickable"),this.updateStatus()},e.prototype.onDisable=function(){},e.prototype.getStatus=function(){var e=this.app.workspace.getActiveViewOfType(iK);return e?"preview"===e.getMode()?"read":e.editMode?e.editMode.sourceMode?"source":"live-preview":"source":""},e.prototype.setStatus=function(e){return v(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:if(!(t=this.app.workspace.getActiveViewOfType(iK)))return[2];switch(n=t.getState(),e){case"read":n.mode="preview";break;case"source":n.mode="source",n.source=!0;break;case"live-preview":n.mode="source",n.source=!1}return[4,t.leaf.setViewState({type:nK,state:n})];case 1:return i.sent(),[2]}}))}))},e.prototype.updateStatus=function(){var e=this.plugin.statusBarEl;e.empty(),e.show();var t=e.createSpan("status-bar-item-icon");switch(this.getStatus()){case"":return void e.hide();case"read":gb(t,"lucide-book-open"),aS(e,rf.plugins.editorStatus.read(),{placement:"top"});break;case"source":gb(t,"lucide-code-2"),aS(e,rf.plugins.editorStatus.editSource(),{placement:"top"});break;case"live-preview":gb(t,"lucide-edit-3"),aS(e,rf.plugins.editorStatus.editLivePreview(),{placement:"top"})}},e.prototype.onClick=function(e){var t=this,n=this.app.workspace.getActiveViewOfType(iK);if(n){var i=new fw,r=this.getStatus(),o=function(e,n,o){i.addItem((function(i){return i.setTitle(o).setIcon(n).setChecked(r===e).onClick((function(){return t.setStatus(e)}))}))};o("read","lucide-book-open",rf.plugins.editorStatus.read()),o("source","lucide-code-2",rf.plugins.editorStatus.editSource()),n.editMode&&o("live-preview","lucide-edit-3",rf.plugins.editorStatus.editLivePreview()),i.showAtMouseEvent(e)}},e}(),$$=rf.plugins.fileExplorer,Z$=function(e){function t(t,n){var i=e.call(this,t)||this;return i.limit=20,i.emptyStateText=$$.labelNoFolders(),i.emptyMatch=Object.freeze({match:{score:0,matches:[]},item:null}),i.files=n,i.setInstructions([{command:"↑↓",purpose:$$.instructionNavigate()},{command:"↵",purpose:$$.instructionMove()},{command:"shift ↵",purpose:$$.instructionCreate()},{command:"esc",purpose:$$.instructionDismiss()}]),i.inputEl.setAttribute("placeholder",$$.promptTypeFolder()),i.scope.register(["Shift"],"Enter",(function(e){return i.selectSuggestion(i.emptyMatch,e),!1})),i}return f(t,e),t.prototype.onNoSuggestion=function(){this.chooser.setSuggestions([this.emptyMatch]),this.chooser.addMessage(this.emptyStateText)},t.prototype.renderSuggestion=function(t,n){if(!t.item){n.addClass("mod-complex");var i=n.createDiv("suggestion-content"),r=n.createDiv("suggestion-aux");return i.createDiv({cls:"suggestion-title",text:this.inputEl.value}),void r.createSpan({cls:"suggestion-hotkey",text:rf.interface.labelEnterToCreate()})}return e.prototype.renderSuggestion.call(this,t,n)},t.prototype.getItems=function(){for(var e=[],t=0,n=this.app.vault.getAllLoadedFiles();t<n.length;t++){var i=n[t];i instanceof $y&&e.push(i)}return e},t.prototype.getItemText=function(e){return e.isRoot()?"/":e.path},t.prototype.onChooseItem=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return n=(t=this).app,(i=t.files)&&0!==i.length?e?[3,2]:(r=this.inputEl.value,[4,n.vault.createFolder(r)]):[2];case 1:s.sent(),(o=n.vault.getAbstractFileByPathInsensitive(r))instanceof $y&&(e=o),s.label=2;case 2:return(a=mK(i,e)).length>0?[4,dK(n,a,e)]:[3,4];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},t}(eG),Q$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focusedItem=null,t.selectedDoms=new Set,t.isAllCollapsed=!0,t.prefersCollapsed=!1,t.requestSaveFolds=rt(t.saveFolds.bind(t),200),t}return f(t,e),Object.defineProperty(t.prototype,"root",{get:function(){return this.infinityScroll.rootEl},enumerable:!1,configurable:!0}),t.prototype.initializeKeyboardNav=function(e){e.register([],"ArrowDown",this.onKeyArrowDownInFocus.bind(this)),e.register(["Shift"],"ArrowDown",this.onKeyArrowDownInFocus.bind(this)),e.register([],"ArrowUp",this.onKeyArrowUpInFocus.bind(this)),e.register(["Shift"],"ArrowUp",this.onKeyArrowUpInFocus.bind(this)),e.register([],"ArrowLeft",this.onKeyArrowLeftInFocus.bind(this)),e.register([],"ArrowRight",this.onKeyArrowRightInFocus.bind(this))},t.prototype.setIsAllCollapsed=function(e){this.isAllCollapsed=e},t.prototype.setCollapseAll=function(e){sP(this.root,(function(t){oP(t)&&t.setCollapsed(e,!0)})),this.setIsAllCollapsed(e),this.infinityScroll.invalidateAll(),this.requestSaveFolds()},t.prototype.onResize=function(){this.infinityScroll.onResize()},t.prototype.clearSelectedDoms=function(){this.selectedDoms.forEach((function(e){e.selfEl.removeClass("is-selected")})),this.selectedDoms.clear()},t.prototype.deselectItem=function(e){this.isItem(e)&&this.selectedDoms.has(e)&&(this.selectedDoms.delete(e),e.selfEl.removeClass("is-selected"))},t.prototype.selectItem=function(e){this.isItem(e)&&!this.selectedDoms.has(e)&&(this.selectedDoms.add(e),e.selfEl.addClass("is-selected"))},t.prototype.onKeyArrowUpInFocus=function(e){e.preventDefault();var t=this.focusedItem;this.changeFocusedItem("backwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},t.prototype.onKeyArrowDownInFocus=function(e){e.preventDefault();var t=this.focusedItem;this.changeFocusedItem("forwards"),e.shiftKey&&(this.selectItem(t),this.selectItem(this.focusedItem))},t.prototype.onKeyArrowLeftInFocus=function(e){var t;if(e.preventDefault(),this.focusedItem)if(this.focusedItem!==this.root){if(oP(this.focusedItem)&&this.focusedItem.collapsible)this.focusedItem.collapsed?oP(this.focusedItem.parent)&&this.setFocusedItem(this.focusedItem.parent):this.focusedItem.setCollapsed(!0,!0);else{if(this.focusedItem.parent===this.root)return void this.setCollapseAll(!0);this.focusedItem.parent.setCollapsed(!0,!0)}for(var n=this.focusedItem;null===(t=n.parent)||void 0===t?void 0:t.collapsed;)n=n.parent;this.setFocusedItem(n)}else this.setCollapseAll(!0)},t.prototype.onKeyArrowRightInFocus=function(e){e.preventDefault();var t=this.focusedItem;t&&oP(t)&&(t.collapsed?t.setCollapsed(!1,!0):t.vChildren.hasChildren()&&this.changeFocusedItem("forwards"))},t.prototype.setFocusedItem=function(e,t){void 0===t&&(t=!0),e!==this.root&&(this.isItem(this.focusedItem)&&this.focusedItem.selfEl.removeClass("has-focus"),this.focusedItem=e,e&&this.isItem(e)&&(e.selfEl.addClass("has-focus"),t&&this.infinityScroll.scrollIntoView(e)))},t.prototype.changeFocusedItem=function(e){if(this.focusedItem||(this.focusedItem=Array.from(this.selectedDoms).last()),this.focusedItem){var t="forwards"===e?cP(this.focusedItem,!0):uP(this.focusedItem,!0);t&&this.setFocusedItem(t)}else{var n=this.root;if("backwards"===e){for(var i=n;oP(i)&&i.vChildren.hasChildren();)i=i.vChildren.last();this.setFocusedItem(i)}else this.setFocusedItem(n.vChildren.children[0])}},t.prototype.getFoldKey=function(){return this.prefersCollapsed?this.getViewType()+"-unfold":this.getViewType()+"-folds"},t.prototype.loadFolds=function(){var e=this,t=new Set(this.app.loadLocalStorage(this.getFoldKey())),n=!this.prefersCollapsed;sP(this.root,(function(i){oP(i)&&t.has(e.getNodeId(i))&&i.setCollapsed(n,!1)}))},t.prototype.saveFolds=function(){var e=this;if(this.app.workspace.layoutReady){var t=[];sP(this.root,(function(n){oP(n)&&n.collapsed!==e.prefersCollapsed&&t.push(e.getNodeId(n))})),this.app.saveLocalStorage(this.getFoldKey(),t)}},t}(yI),J$=rf.plugins.fileExplorer,eZ=function(e){function t(t,n){var i=e.call(this)||this;return i.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},i.fileExplorer=t,i.file=n,i}return f(t,e),t.prototype.updateTitle=function(){this.innerEl.setText(this.getTitle()),this.selfEl.setAttr("data-path",this.file.path)},t.prototype.isFullTitleShown=function(){var e=this.selfEl,t=this.innerEl,n=e.offsetParent,i=parseInt(getComputedStyle(e).paddingLeft)+e.offsetLeft,r=n.clientWidth;return i+t.scrollWidth<=r+n.scrollLeft},t.prototype.startRename=function(){var e=this.innerEl;e.addClass("is-being-renamed"),e.setAttribute("contenteditable","true");var t=this.fileExplorer.app.vault.getConfig("spellcheck");e.setAttribute("spellcheck",String(t)),bb(e)},t.prototype.stopRename=function(){var e=this.innerEl;e.removeClass("is-being-renamed"),e.removeAttribute("contenteditable");var t=e.parentElement.find(".tooltip");t&&t.remove()},t}(mO),tZ=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.tagEl=null,i.setClickable(!0),i.setCollapsible(!1),i.el.addClass("nav-file"),i.selfEl.addClass("nav-file-title"),i.innerEl.addClass("nav-file-title-content"),i.updateTitle(),i}return f(t,e),t.prototype.getTitle=function(){return this.file.basename},t.prototype.updateTitle=function(){e.prototype.updateTitle.call(this);var t=this.selfEl,n=this.tagEl;t.toggleClass("is-unsupported",!this.isSupported());var i=this.file.extension;mM.contains(i)?n&&(n.detach(),this.tagEl=null):(n||(n=this.tagEl=t.createDiv({cls:"nav-file-tag"})),n.setText(i))},t.prototype.isSupported=function(){return this.fileExplorer.app.viewRegistry.isExtensionRegistered(this.file.extension)},t}(eZ),nZ=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.vChildren=new rP(i),i.pusherEl=pP();var r=n.isRoot();return i.setClickable(!r),i.setCollapsible(!r),i.el.addClass("nav-folder"),r&&i.el.addClass("mod-root"),i.selfEl.addClass("nav-folder-title"),i.innerEl.addClass("nav-folder-title-content"),i.collapseEl.addClass("nav-folder-collapse-indicator"),i.childrenEl.addClass("nav-folder-children"),i.updateTitle(),i.setCollapsed(!r,!1),i}return f(t,e),t.prototype.getTitle=function(){var e=this.file,t=e.name;return e.isRoot()&&(t=e.vault.getName()),t},t.prototype.onSelfClick=function(e){0===e.button&&this.fileExplorer.fileBeingRenamed!==this.file&&(this.fileExplorer.handleFileClick(e,this)||this.toggleCollapsed(!0))},t.prototype.setCollapsed=function(t,n){return v(this,void 0,void 0,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return this.collapsed===t?[2]:(r=(i=this).fileExplorer,i.childrenEl.style.minHeight="",r.infinityScroll.invalidate(this,!0),[4,e.prototype.setCollapsed.call(this,t,n)]);case 1:return o.sent(),r.infinityScroll.invalidate(this,!0),t||this.file.isRoot()||r.setIsAllCollapsed(!1),r.requestSaveFolds(),[2]}}))}))},t.prototype.sort=function(){var e=this.file,t=this.fileExplorer,n=iP(t.sortOrder),i=e.children.slice();i.sort((function(e,t){var i=e instanceof $y,r=t instanceof $y;return i||r?i&&!r?-1:r&&!i?1:JL(e.name,t.name):n(e,t)}));for(var r=[],o=0,a=i;o<a.length;o++){var s=a[o],l=t.fileItems[s.path];l&&r.push(l)}this.vChildren.setChildren(r)},t}(eZ),iZ=function(e){this.navFileContainerEl=null,this.navFileContainerEl=e.createDiv({cls:"nav-files-container"}),this.infinityScroll=new fP(this.navFileContainerEl),this.infinityScroll.setWidth=!0},rZ="file-explorer",oZ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-folder-closed",n.activeDom=null,n.collapseOrExpandAllEl=null,n.prefersCollapsed=!0,n.ready=!1,n.sortOrder="alphabetical",n.fileBeingRenamed=null,n.fileRenameScope=null,n.hoveredEl=null;var i=n.containerEl,r=n.headerDom=new YG(n.app,i);r.addNavButton("lucide-edit",J$.actionNewNote(),n.onCreateNewNoteClick.bind(n)),r.addNavButton("lucide-folder-plus",J$.actionNewFolder(),n.onCreateNewFolderClick.bind(n)),r.addSortButton((function(e){return n.setSortOrder(e)}),(function(){return n.sortOrder})),n.collapseOrExpandAllEl=r.addNavButton("lucide-chevrons-up-down",J$.actionExpandAll(),n.toggleCollapseAll.bind(n)),n.fileItems={},n.files=wA(),n.fileRenameScope=new cw(n.app.scope),n.sortOrder=n.app.vault.getConfig("fileSortOrder"),n.fileRenameScope.register([],"Enter",n.onKeyEnterInRename.bind(n)),n.fileRenameScope.register([],"Escape",n.onKeyEscInRename.bind(n));var o=n.scope=new cw(n.app.scope);return n.initializeKeyboardNav(n.scope),Lt.isMacOS?(o.register([],"Enter",n.onKeyRename.bind(n)),o.register(["Mod"],"ArrowDown",(function(e){e.preventDefault(),n.focusedItem&&n.onFileClick(new KeyboardEvent(e.type,g(g({},e),{metaKey:!1})),n.focusedItem.el)})),o.register(["Mod"],"Backspace",n.onDeleteSelectedFiles.bind(n))):(o.register([],"Enter",n.onKeyOpen.bind(n)),o.register([],"Delete",n.onDeleteSelectedFiles.bind(n))),o.register([]," ",n.onKeyOpen.bind(n)),o.register([],"F2",n.onKeyRename.bind(n)),o.register(["Mod"],"Enter",n.onKeyOpen.bind(n)),n.requestSort=n.app.nextFrameOnceCallback(n.sort.bind(n)),n.dom=new iZ(i),i.on("click",".nav-file",n.onFileClick.bind(n)),gt(i),i.on("auxclick",".nav-file",n.onFileClick.bind(n)),i.on("mouseover",".nav-file-title, .nav-folder-title",n.onFileMouseover.bind(n)),i.on("mouseout",".nav-file-title, .nav-folder-title",n.onFileMouseout.bind(n)),i.on("contextmenu",".nav-file-title, .nav-folder-title",n.openFileContextMenu.bind(n)),i.addEventListener("click",(function(e){e.target===n.dom.navFileContainerEl&&(n.clearSelectedDoms(),n.setFocusedItem(null,!1))})),n}return f(t,e),Object.defineProperty(t.prototype,"infinityScroll",{get:function(){return this.dom.infinityScroll},enumerable:!1,configurable:!0}),t.prototype.isItem=function(e){return e instanceof eZ},t.prototype.getNodeId=function(e){return e.file.path},t.prototype.setCollapseAll=function(e){var t=this;if(e!==this.isAllCollapsed){!function(e){for(var n=t.dom.infinityScroll.rootEl,i=function(t){if(t instanceof nZ){t.setCollapsed(e,!1);for(var n=0,r=t.vChildren.children;n<r.length;n++){var o=r[n];i(o)}}},r=0,o=n.vChildren.children;r<o.length;r++){var a=o[r];i(a)}}(e),this.setIsAllCollapsed(e)}},t.prototype.toggleCollapseAll=function(){var e=!this.isAllCollapsed;this.setCollapseAll(e)},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){return t.sortOrder&&this.sortOrder!==t.sortOrder&&(this.sortOrder=t.sortOrder,this.requestSort()),[2,e.prototype.setState.call(this,t,n)]}))}))},t.prototype.setIsAllCollapsed=function(e){this.isAllCollapsed!==e&&(this.isAllCollapsed=e,e?(gb(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),aS(this.collapseOrExpandAllEl,J$.actionExpandAll())):(gb(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),aS(this.collapseOrExpandAllEl,J$.actionCollapseAll())))},t.prototype.getDisplayText=function(){return J$.name()},t.prototype.getViewType=function(){return rZ},t.prototype.load=function(){var t=this;e.prototype.load.call(this);var n=this.app,i=n.vault;this.registerEvent(i.on("create",this.onCreate,this)),this.registerEvent(i.on("delete",this.onDelete,this)),this.registerEvent(i.on("rename",this.onRename,this)),this.registerEvent(i.on("modify",this.onModify,this)),this.registerEvent(i.on("config-changed",this.updateConfig,this)),this.registerEvent(n.workspace.on("file-open",this.onFileOpen,this)),this.registerEvent(n.viewRegistry.on("extensions-updated",this.onExtensionsUpdated,this)),this.ready=!1;for(var r=0,o=n.vault.getAllLoadedFiles();r<o.length;r++){var a=o[r];this.onCreate(a)}this.updateConfig(),this.app.workspace.onLayoutReady((function(){t.ready=!0,t.sort(),t.loadFolds()}))},t.prototype.onCreate=function(e){var t=e.path,n=this.fileItems[t];n||(e instanceof Xy?n=this.createItemDom(e):e instanceof $y&&(n=this.createFolderDom(e)),this.fileItems[t]=n,this.files.set(n.el,e)),this.requestSort()},t.prototype.onDelete=function(e){var t=e.path,n=this.fileItems[t];n&&(this.files.delete(n.el),delete this.fileItems[t],this.activeDom===n&&(this.activeDom=null),this.selectedDoms.delete(n),this.focusedItem===n&&(this.focusedItem=null)),this.requestSort()},t.prototype.onRename=function(e,t){var n=e.path,i=this.fileItems[t];i&&(i.updateTitle(),delete this.fileItems[t],this.fileItems[n]=i,this.files.set(i.el,e),i instanceof nZ&&this.requestSaveFolds(),this.dom.infinityScroll.invalidate(i)),this.requestSort()},t.prototype.onModify=function(){"byModifiedTime"!==this.sortOrder&&"byModifiedTimeReverse"!==this.sortOrder||this.requestSort()},t.prototype.updateConfig=function(){var e=this.app.vault;this.dom.navFileContainerEl.toggleClass("show-unsupported",e.getConfig("showUnsupportedFiles")),this.dom.infinityScroll.invalidateAll()},t.prototype.openFileContextMenu=function(e,t){var n=this;e.preventDefault();var i=this.files.get(t.parentElement);if(!(i instanceof $y&&i.isRoot())&&this.fileBeingRenamed!==i){var r=(new fw).addSections(["title","open","action","view","info","","danger"]),o=Array.from(this.selectedDoms);if(o.length>1&&o.some((function(e){return e.file===i}))){var a=o.map((function(e){return e.file}));Lt.isPhone&&r.addItem((function(e){return e.setSection("title").setIcon("lucide-files").setTitle(rf.nouns.fileWithCount({count:o.length})).setIsLabel(!0)})),r.addItem((function(e){return e.setSection("action").setTitle(J$.actionMoveItems({count:a.length})).setIcon("lucide-folder-tree").onClick((function(){new Z$(n.app,a).open()}))})),r.addItem((function(e){return e.setSection("danger").setTitle(J$.menuOptDelete()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){return v(n,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=0,t=a,i.label=1;case 1:return e<t.length?(n=t[e],[4,this.app.vault.exists(n.path)]):[3,5];case 2:return i.sent()?[4,this.app.fileManager.promptForDeletion(n)]:[3,4];case 3:i.sent(),i.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))}))})),this.app.workspace.trigger("files-menu",r,a,"file-explorer-context-menu",null)}else{if(Lt.isPhone&&r.addItem((function(e){return e.setSection("title").setIcon(i instanceof $y?"lucide-folder-open":"lucide-file").setTitle(i.name).setIsLabel(!0)})),i instanceof $y){var s=i;r.addItem((function(e){return e.setSection("action").setTitle(J$.menuOptNewNote()).setIcon("lucide-edit").onClick((function(e){var t=hw.isModifier(e,"Mod");n.createAbstractFile("file",s,t)}))})).addItem((function(e){return e.setSection("action").setTitle(J$.menuOptNewFolder()).setIcon("lucide-folder-open").onClick((function(e){var t=hw.isModifier(e,"Mod");n.createAbstractFile("folder",s,t)}))})).addItem((function(e){return e.setSection("action").setTitle(J$.menuOptSetAttachmentFolder()).setIcon("lucide-image").onClick((function(){n.app.setAttachmentFolder(s)}))})),r.addSeparator()}r.addItem((function(e){return e.setSection("action").setTitle(J$.menuOptRename()).setIcon("lucide-edit-3").onClick((function(){return n.startRenameFile(i)}))})),i instanceof Xy&&(r.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openInNewTab()).setIcon("lucide-file-plus").onClick((function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){return i instanceof Xy&&this.app.workspace.openLinkText(i.path,"","tab"),[2]}))}))}))})),Lt.isPhone||r.addItem((function(e){return e.setSection("open").setTitle(rf.interface.menu.openToTheRight()).setIcon("lucide-separator-vertical").onClick((function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){return i instanceof Xy&&this.app.workspace.openLinkText(i.path,"","split"),[2]}))}))}))})),r.addItem((function(e){return e.setSection("action").setTitle(J$.menuOptMakeCopy()).setIcon("lucide-files").onClick((function(e){return v(n,void 0,void 0,(function(){var t,n,r;return y(this,(function(o){switch(o.label){case 0:return i instanceof Xy?(t=hw.isModifier(e,"Mod"),n=this.app.vault.getAvailablePath(se(i.path),i.extension),[4,this.app.vault.copy(i,n)]):[3,2];case 1:r=o.sent(),this.afterCreate(r,t),o.label=2;case 2:return[2]}}))}))}))}))),r.addItem((function(e){return e.setSection("danger").setTitle(J$.menuOptDelete()).setIcon("lucide-trash-2").setWarning(!0).onClick((function(){n.app.fileManager.promptForDeletion(i)}))})),this.app.workspace.trigger("file-menu",r,i,"file-explorer-context-menu",null)}r.showAtMouseEvent(e);var l=this.fileItems[i.path];l&&(this.setFocusedItem(l),l.selfEl.addClass("has-active-menu"),r.onHide((function(){l.selfEl.removeClass("has-active-menu")})))}},t.prototype.setSortOrder=function(e){this.sortOrder=e,this.sort()},t.prototype.onCreateNewFolderClick=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return e.preventDefault(),this.createAbstractFile("folder",null,!1),[2]}))}))},t.prototype.onCreateNewNoteClick=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){return e.preventDefault(),t=this.app.workspace,n="",(i=t.getActiveFile())&&(n=i.path),r=this.app.fileManager.getNewFileParent(n),this.createAbstractFile("file",r,hw.isModEvent(e)||"tab"),[2]}))}))},t.prototype.createAbstractFile=function(e,t,n){return v(this,void 0,void 0,(function(){var i,r,o;return y(this,(function(a){switch(a.label){case 0:i=this.app,r=null,a.label=1;case 1:return a.trys.push([1,6,,7]),"file"!==e?[3,3]:[4,i.fileManager.createNewMarkdownFile(t)];case 2:return r=a.sent(),[3,5];case 3:return"folder"!==e?[3,5]:[4,i.fileManager.createNewFolder(t)];case 4:r=a.sent(),a.label=5;case 5:return[3,7];case 6:return o=a.sent(),new CI(o.toString()),[2];case 7:return this.afterCreate(r,n),[2]}}))}))},t.prototype.afterCreate=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return e?(n=this.app,e instanceof Xy?(i=n.workspace,[4,i.getLeaf(t).openFile(e,{active:!0,state:{mode:"source"},eState:{rename:"all"}})]):[3,2]):[2];case 1:return o.sent(),[3,3];case 2:n.nextFrame((function(){return v(r,void 0,void 0,(function(){var t;return y(this,(function(n){return this.sort(),this.startRenameFile(e),(t=this.fileItems[e.path])&&this.dom.infinityScroll.scrollIntoView(t,4),[2]}))}))})),o.label=3;case 3:return[2]}}))}))},t.prototype.onFileClick=function(e,t){var n=this;if(!(e instanceof MouseEvent&&0!==e.button&&1!==e.button)){e.preventDefault(),e.stopImmediatePropagation();var i=this.files.get(t);if(this.fileBeingRenamed!==i&&i&&i instanceof Xy){var r=this.fileItems[i.path],o=hw.isModEvent(e);if(!o&&this.handleFileClick(e,r))return;v(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,(e=this.app.workspace).getLeaf(o).openFile(i)];case 1:return t.sent(),r!==this.activeDom||o?e.setActiveLeaf(this.app.workspace.getMostRecentLeaf(),{focus:!0}):(this.setFocusedItem(this.activeDom),e.setActiveLeaf(this.leaf,{focus:!0})),[2]}}))}))}}},t.prototype.handleFileClick=function(e,t){var n=this.activeDom,i=this.selectedDoms,r=Array.from(this.selectedDoms).last()||n;if(e.altKey)return i.has(t)?this.deselectItem(t):this.selectItem(t),this.setFocusedItem(t,!1),!0;if(e.shiftKey){for(var o=r?lP(r,t):[t],a=this.app.vault.getConfig("showUnsupportedFiles"),s=0,l=o;s<l.length;s++){var c=l[s];!a&&c instanceof tZ&&!c.isSupported()||this.selectItem(c)}return!0}return this.clearSelectedDoms(),this.setFocusedItem(null),!1},t.prototype.onFileMouseover=function(e,t){if(ft(e,t)&&!wt(e)){var n=this.files.get(t.parentElement);if(n){var i="",r="";n instanceof Xy&&(i=J$.tooltipModifiedTime({time:window.moment(n.stat.mtime).format("YYYY-MM-DD HH:mm")}),r=J$.tooltipCreatedTime({time:window.moment(n.stat.ctime).format("YYYY-MM-DD HH:mm")}));var o=this.fileItems[n.path],a="";if(o&&!o.isFullTitleShown()&&(a+=o.getTitle()),n instanceof Xy)""!==a&&(a+="\n\n"),a+="".concat(i,"\n").concat(r);else if(n instanceof $y){var s=rf.nouns.fileWithCount({count:n.getFileCount()}),l=rf.nouns.folderWithCount({count:n.getFolderCount()});""!==a&&(a+="\n\n"),a+=J$.tooltipFoldersFilesCount({fileCount:s,folderCount:l})}""!==a&&(this.hoveredEl=t,iS(t,a,{placement:this.getSideTooltipPlacement(),gap:24,horizontalParent:this.containerEl,delay:750})),n instanceof Xy&&this.app.workspace.trigger("hover-link",{event:e,source:"file-explorer",hoverParent:this,targetEl:t,linktext:n.path})}}},t.prototype.onFileMouseout=function(e,t){ft(e,t)&&rS()},t.prototype.onFileOpen=function(e){var t,n=e?this.fileItems[e.path]:null;n!==this.activeDom&&(n!==this.focusedItem&&this.clearSelectedDoms(),null===(t=this.activeDom)||void 0===t||t.selfEl.removeClass("is-active"),null==n||n.selfEl.addClass("is-active"),this.activeDom=n)},t.prototype.revealInFolder=function(e){for(var t=this,n=e.parent;n&&null!==n.path;){var i=this.fileItems[n.path];i&&i instanceof nZ&&i.collapsed&&i.toggleCollapsed(!1),n=n.parent}var r=this.fileItems[e.path];this.setFocusedItem(r),this.app.nextFrame((function(){t.dom.infinityScroll.scrollIntoView(r,4);var e=r.selfEl;e.addClass("is-flashing"),setTimeout((function(){e.removeClass("is-flashing")}),1e3),t.app.workspace.setActiveLeaf(t.leaf)}))},t.prototype.sort=function(){if(this.ready){var e=this.fileItems,t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);for(var i=this.dom.navFileContainerEl,r=i.scrollTop,o=0,a=t;o<a.length;o++){var s=a[o];s instanceof nZ&&(s.sort(),s.file.isRoot()&&(this.dom.infinityScroll.rootEl=s,this.dom.navFileContainerEl.setChildrenInPlace([s.el])))}i.scrollTop=r,this.dom.infinityScroll.compute()}},t.prototype.attachFileEvents=function(e){e.innerEl.addEventListener("blur",this.onTitleBlur.bind(this)),e.innerEl.addEventListener("input",this.onFileRenameInput.bind(this))},t.prototype.dragFiles=function(e,t){var n=this.selectedDoms,i=n.entries().next().value;if(0===n.size||1===n.size&&i===t)return null;if(!n.has(t))return null;var r=[],o=[];n.forEach((function(e){o.push(e.file),r.push(e.el)}));var a=this.app.dragManager;return a.updateSource(r,"is-being-dragged"),a.dragFiles(e,o)},t.prototype.createItemDom=function(e){var t=this,n=new tZ(this,e),i=n.selfEl,r=this.app.dragManager;return r.handleDrag(i,(function(o){if(t.fileBeingRenamed)return null;var a=t.dragFiles(o,n);return a||(r.updateSource([i],"is-being-dragged"),r.dragFile(o,e))})),this.attachFileEvents(n),n},t.prototype.createFolderDom=function(e){var t=this,n=new nZ(this,e),i=n.selfEl,r=this.app.dragManager;return n.file.isRoot()||r.handleDrag(i,(function(o){var a=t.dragFiles(o,n);return a||(r.updateSource([i],"is-being-dragged"),r.dragFolder(o,e))})),r.handleDrop(i,(function(n,r,o){var a=e.name||t.app.vault.getName();if(!r)return xw(n.dataTransfer)?(o||t.app.importAttachments(Sw(n.dataTransfer,"drop",!0),e),{dropEffect:"copy",hoverEl:i,hoverClass:"is-being-dragged-over"}):void 0;if("file"===r.type||"folder"===r.type){var s=r.file;if(!fK(s,e))return;var l=s.name;if("/"!==e.path&&(l=e.path+"/"+l),!o){if(t.app.vault.getAbstractFileByPath(l)){var c=se(l),u=le(ie(l));l=t.app.vault.getAvailablePath(c,u)}t.app.fileManager.renameFile(s,l)}return{action:rf.interface.dragAndDrop.moveIntoFolder({folder:a}),dropEffect:"move",hoverEl:i,hoverClass:"is-being-dragged-over"}}if("files"===r.type){var h=mK(r.files,e);if(0===h.length)return;return o||dK(t.app,h,e),{action:rf.interface.dragAndDrop.moveIntoFolder({folder:a}),dropEffect:"move",hoverEl:i,hoverClass:"is-being-dragged-over"}}}),!0),this.attachFileEvents(n),n},t.prototype.onTitleBlur=function(){this.finishRename()},t.prototype.onFileRenameInput=function(e){var t=e.currentTarget,n=this.files.get(t.parentElement.parentElement),i=t.getText();(1===t.childNodes.length&&t.firstChild.nodeType===Node.TEXT_NODE||(t.setText(i),bb(t,!1)),i=i.trim(),rS(),qy.test(i))?iS(t.parentElement,J$.msgInvalidCharacters()+Vy,{classes:["mod-error"]}):this.app.vault.checkForDuplicate(n,i)?iS(t.parentElement,J$.msgFileAlreadyExists(),{classes:["mod-error"]}):Uy.test(i)&&iS(t.parentElement,J$.msgUnsafeCharacters()+zy,{classes:["mod-error"]})},t.prototype.startRenameFile=function(e){return v(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return!e||e instanceof $y&&e.isRoot()?[2]:[4,this.finishRename()];case 1:for(r.sent(),this.fileBeingRenamed=e,t=e.parent;t&&null!==t.path;)(n=this.fileItems[t.path])&&n instanceof nZ&&n.collapsed&&n.toggleCollapsed(!1),t=t.parent;return this.app.keymap.pushScope(this.fileRenameScope),i=this.fileItems[e.path],this.setFocusedItem(i),i.startRename(),[2]}}))}))},t.prototype.finishRename=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:if(!(e=this.fileBeingRenamed))return[2];if(this.exitRename(),t=this.fileItems[e.path],n=t.innerEl,""===(i=n.getText().trim()))return t.updateTitle(),this.displayError(J$.msgEmptyFileName(),t),[2];if(i.startsWith("."))return t.updateTitle(),this.displayError(J$.msgBadDotfile(),t),[2];if(r=e.getNewPathAfterRename(i),e.path===r)return t.updateTitle(),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(e,r)];case 2:return l.sent(),[3,4];case 3:return(o=l.sent())&&(console.error(o),a=o.message||o.code||o.toString(),this.displayError(a,t)),[3,4];case 4:return t.updateTitle(),setTimeout((function(){return s.dom.infinityScroll.scrollIntoView(t,4)}),0),[2]}}))}))},t.prototype.displayError=function(e,t){iS(t.selfEl,e,{placement:"bottom",classes:["mod-error"]}),setTimeout(rS,2e3)},t.prototype.exitRename=function(){var e=this.fileBeingRenamed;this.fileBeingRenamed=null,this.fileItems[e.path].stopRename(),this.app.keymap.popScope(this.fileRenameScope)},t.prototype.onKeyEnterInRename=function(e){e.isComposing||(e.preventDefault(),this.finishRename())},t.prototype.onKeyEscInRename=function(){var e=this.fileBeingRenamed;e&&(this.fileItems[e.path].updateTitle(),this.exitRename())},t.prototype.onDeleteSelectedFiles=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:e.preventDefault(),t=[],i=(n=this).focusedItem,(r=n.selectedDoms).size>0?t=Array.from(r).map((function(e){return e.file})):i instanceof eZ&&t.push(i.file),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o])===this.app.vault.getRoot()?[3,4]:[4,this.app.vault.exists(s.path)]:[3,5];case 2:return l.sent()?[4,this.app.fileManager.promptForDeletion(s)]:[3,4];case 3:l.sent(),l.label=4;case 4:return o++,[3,1];case 5:return[2]}}))}))},t.prototype.onKeyOpen=function(e){e.preventDefault(),this.focusedItem&&this.onFileClick(e,this.focusedItem.el)},t.prototype.onKeyRename=function(e){if(e.preventDefault(),this.focusedItem){var t=this.files.get(this.focusedItem.el);this.startRenameFile(t)}},t.prototype.onExtensionsUpdated=function(){var e=this.fileItems;for(var t in e)e.hasOwnProperty(t)&&e[t].updateTitle()},t}(Q$),aZ=rf.plugins.fileExplorer,sZ=function(){function e(){this.id="file-explorer",this.name=aZ.name(),this.description=aZ.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"file-explorer:open",name:aZ.actionShow(),icon:"lucide-files",callback:function(){n.app.workspace.ensureSideLeaf(rZ,"left",{active:!0})}}),t.registerGlobalCommand({id:"file-explorer:reveal-active-file",name:aZ.actionRevealActiveFile(),icon:"lucide-navigation",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t)return e||n.revealInFolder(t),!0}}),t.registerViewType(rZ,(function(e){return new oZ(e)}))},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),e.workspace.registerHoverLinkSource("file-explorer",{display:this.name,defaultMod:!0})},e.prototype.onDisable=function(e){e.workspace.unregisterHoverLinkSource("file-explorer")},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onFileMenu=function(e,t,n){var i=this;!Lt.isMobile&&t instanceof Xy&&"file-explorer-context-menu"!==n&&e.addItem((function(e){return e.setSection("view").setTitle(aZ.actionRevealFile()).setIcon("lucide-folder-open").onClick((function(){return i.revealInFolder(t)}))})),"link-context-menu"!==n&&e.addItem((function(e){return e.setSection("action").setTitle(t instanceof Xy?aZ.actionMoveFile():aZ.actionMoveFolder()).setIcon("lucide-folder-tree").onClick((function(){new Z$(i.app,[t]).open()}))}))},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(rZ,"left",{reveal:!1})},e.prototype.revealInFolder=function(e){var t,n=this.app,i=n.workspace.getLeavesOfType("file-explorer");0===i.length?(t=n.workspace.getLeftLeaf(!0)).setViewState({type:"file-explorer"}):t=i[0],n.workspace.revealLeaf(t),t.view.revealInFolder(e)},e}(),lZ={intervalMinutes:5,keepDays:7},cZ=rf.plugins.fileRecovery,uZ=function(){function e(){this.id="file-recovery",this.name=cZ.name(),this.description=cZ.desc(),this.defaultOn=!0,this.app=null,this.pluginInstance=null,this.db=null,this.tsCache={},this.pendingFiles=new Set}return e.prototype.init=function(e,t){this.app=e,this.pluginInstance=t,t.registerGlobalCommand({id:"file-recovery:open",name:cZ.actionOpen(),icon:"lucide-rotate-ccw",callback:this.openModal.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:return n=this,r=(i=Object).assign,o=[{},lZ],[4,t.loadData()];case 1:return n.options=r.apply(i,o.concat([l.sent()])),t.addSettingTab(new hZ(e,t,this)),t.registerEvent(e.vault.on("modify",this.onFileChanged,this)),t.registerEvent(e.workspace.on("file-open",this.onFileChanged,this)),t.registerInterval(window.setInterval(this.resave.bind(this),6e4)),t.registerInterval(window.setInterval(this.cleanup.bind(this),36e5)),e.workspace.onLayoutReady((function(){t.registerEvent(e.vault.on("create",s.onFileChanged,s))})),a=this,[4,u_(this.app.appId+"-backup",1,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("backups")&&e.deleteObjectStore("backups");var r=e.createObjectStore("backups",{autoIncrement:!0});r.createIndex("path","path"),r.createIndex("ts","ts")}})];case 2:return a.db=l.sent(),this.cleanup(),[2]}}))}))},e.prototype.onDisable=function(){this.db&&(this.db.close(),this.db=null)},e.prototype.onFileChanged=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return e&&e instanceof Xy&&("md"===e.extension||"canvas"===e.extension)?(n=(t=this).db,i=t.tsCache,n?(r=e.path,o=i[r],a=null,i.hasOwnProperty(r)?[3,2]:[4,this.getLastVersionByPath(r)]):[2]):[2];case 1:a=h.sent(),o=a?a.ts:0,i[r]=o,h.label=2;case 2:return s=Date.now(),l=s-o,c=this.options.intervalMinutes,(isNaN(c)||c<0)&&(c=5),l<60*c*1e3?(this.pendingFiles.add(r),[2]):[4,this.app.vault.cachedRead(e)];case 3:return u=h.sent(),a?[3,5]:[4,this.getLastVersionByPath(r)];case 4:a=h.sent(),h.label=5;case 5:return a&&a.data===u?[2]:[4,n.add("backups",{path:r,ts:s,data:u})];case 6:return h.sent(),i[r]=s,[2]}}))}))},e.prototype.forceAdd=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return i=(n=this).db,r=n.tsCache,i?(o=Date.now(),[4,i.add("backups",{path:e,ts:o,data:t})]):[2];case 1:return a.sent(),r[e]=o,[2]}}))}))},e.prototype.resave=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:e=this.pendingFiles,t=Array.from(e),n=this.app.vault,i=0,r=t,a.label=1;case 1:return i<r.length?(o=r[i],e.delete(o),[4,this.onFileChanged(n.getAbstractFileByPath(o))]):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},e.prototype.cleanup=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return(e=this.db)?(t=e.transaction("backups","readwrite"),n=t.store.index("ts"),i=this.options.keepDays,(isNaN(i)||i<1)&&(i=7),[4,n.openCursor(IDBKeyRange.upperBound(Date.now()-24*i*60*60*1e3))]):[2];case 1:r=o.sent(),o.label=2;case 2:return r?[4,r.delete()]:[3,5];case 3:return o.sent(),[4,r.continue()];case 4:return r=o.sent(),[3,2];case 5:return[4,t.done];case 6:return o.sent(),[2]}}))}))},e.prototype.openModal=function(){new dZ(this.app,this).open()},e.prototype.clearData=function(){this.db.clear("backups"),this.tsCache={}},e.prototype.getLastVersionByPath=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=this.db.transaction("backups","readonly"),[4,t.store.index("path").openCursor(e,"prev")];case 1:return[2,(n=i.sent())?n.value:null]}}))}))},e}(),hZ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(cZ.optionInterval()).setDesc(cZ.optionIntervalDescription()).addText((function(t){return t.setValue(String(n.intervalMinutes)).onChange((function(t){var i=parseFloat(t);!isNaN(i)&&i>=0&&(n.intervalMinutes=i,e.plugin.saveData(n))}))})),new YI(t).setName(cZ.optionKeep()).setDesc(cZ.optionKeepDescription()).addText((function(t){return t.setValue(String(n.keepDays)).onChange((function(t){var i=parseFloat(t);!isNaN(i)&&i>=1&&(n.keepDays=i,e.plugin.saveData(n))}))})),new YI(t).setName(cZ.optionOpenHistory()).setDesc(cZ.optionOpenHistoryDescription()).addButton((function(t){return t.setButtonText(cZ.buttonViewSnapshots()).setCta().onClick((function(){e.instance.openModal()}))})),new YI(t).setName(cZ.optionClear()).setDesc(cZ.optionClearDescription()).addButton((function(t){return t.setButtonText(cZ.buttonClearHistory()).setWarning().onClick((function(){new PI(e.app).setTitle(cZ.optionClear()).setContent(createFragment((function(e){e.createEl("p",{cls:"mod-warning",text:cZ.labelClearWarning()})}))).addButton("mod-warning",cZ.buttonClearHistory(),(function(){e.instance.clearData(),new CI(cZ.msgClearComplete())})).addCancelButton().open()}))}))},t}(IG),pZ=function(e){function t(t,n,i,r){var o=e.call(this,t,n)||this;return o.paths=[],o.modal=null,o.paths=i,o.modal=r,o}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText(se(e))},t.prototype.getSuggestions=function(e){e=e.toLowerCase();for(var t=[],n=0,i=this.paths;n<i.length;n++){var r=i[n];r.toLowerCase().contains(e)&&t.push(r)}return t.slice(0,100)},t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue(se(e)),this.modal.switchToPath(e),t.trigger("input"),this.close()},t}(lB),dZ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.currentVersion=null,i.activeVersionEl=null,i.historyListContainerEl=null,i.historyListEl=null,i.versionListEl=null,i.fileContentEl=null,i.diffToggle=null,i.backButtonEl=null,i.textareaEl=null,i.diffEl=null,i.plugin=n,i.setTitle(cZ.name()),i.modalEl.addClass("mod-sync-history","mod-sidebar-layout"),i.historyListContainerEl=i.contentEl.createDiv("sync-history-list-container");var r=i.historyListEl=i.historyListContainerEl.createDiv("modal-sidebar sync-history-list");new YI(r).setNoInfo().addSearch((function(e){i.searchComponent=e,e.setPlaceholder(cZ.placeholderChooseFile())})),i.versionListEl=r.createDiv("sync-history-list-item-container");var o=i.fileContentEl=i.contentEl.createDiv("sync-history-content-container mod-empty");o.createEl("p",{cls:"sync-history-content-empty",text:cZ.labelSelectFile()});var a=o.createDiv("sync-history-content");return new YI(a).setName(rf.plugins.sync.labelShowDiff()).addToggle((function(e){return i.diffToggle=e.setSmall().setValue(!1)})),i.textareaEl=a.createEl("textarea",{cls:"sync-history-text",attr:{spellcheck:!1}}),i.diffEl=a.createDiv("sync-history-diff"),o.createEl("p","sync-history-content-buttons u-center-text",(function(e){e.createEl("button",{cls:"mod-cta",text:rf.interface.labelCopy()},(function(e){e.addEventListener("click",(function(){return v(i,void 0,void 0,(function(){return y(this,(function(e){return at(this.currentVersion.data),new CI(rf.interface.copied({context:"generic"})),[2]}))}))}))}))})),Lt.isMobile&&(o.detach(),i.backButtonEl=createDiv({cls:"modal-setting-back-button"},(function(e){e.createSpan("modal-setting-back-button-icon",(function(e){gb(e,"lucide-arrow-left")})),e.addEventListener("click",(function(){Ve(i.contentEl,i.historyListContainerEl,"left",(function(){var e,t;null===(e=i.backButtonEl)||void 0===e||e.detach(),null===(t=i.activeVersionEl)||void 0===t||t.removeClass("is-active"),i.activeVersionEl=null})),Yb(i.historyListContainerEl)}))}))),i}return f(t,e),t.prototype.switchToPath=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u=this;return y(this,(function(h){switch(h.label){case 0:return n=(t=this).versionListEl,i=t.fileContentEl,n.empty(),r=this.plugin.db,o=r.transaction("backups","readonly"),[4,o.store.index("path").getAll(e)];case 1:for((a=h.sent()).sort((function(e,t){return t.ts-e.ts})),this.activeVersionEl=null,s=function(e){var t=a[e],r=a[e+1],o=n.createDiv({cls:"sync-history-list-item",text:window.moment(t.ts).format("LLLL")});o.createDiv("u-small u-muted").setText(ee(t.data.length));var s=function(){u.activeVersionEl&&u.activeVersionEl.removeClass("is-active"),u.activeVersionEl=o,u.activeVersionEl.addClass("is-active"),i.removeClass("mod-empty"),u.currentVersion=t,u.openHistory(t,r)};o.addEventListener("click",s),null!==l.activeVersionEl||Lt.isMobile||s()},l=this,c=0;c<a.length;c++)s(c);return[2]}}))}))},t.prototype.openHistory=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l;return y(this,(function(c){return i=(n=this).textareaEl,r=n.diffEl,o=n.diffToggle,a=e.data,i.value=a,r.empty(),s=!1,l=function(){var e=o.getValue();if(i.toggle(!e),r.toggle(e),e&&!s){s=!0;var n="";t&&(n=t.data),r.empty(),r.appendChild(ZO(n,a))}},o.onChange(l),l(),Lt.isMobile&&(Gb(this.historyListContainerEl),Ve(this.contentEl,this.fileContentEl,"right"),this.titleEl.prepend(this.backButtonEl)),[2]}))}))},t.prototype.onOpen=function(){return v(this,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:return e=this.contentEl,[4,Ib(this.contentEl,(function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t=this.plugin.db,n=t.transaction("backups","readonly"),[4,n.store.index("path").openCursor(null,"nextunique")];case 1:i=a.sent(),r=[],a.label=2;case 2:return i?(r.push(i.value.path),[4,i.continue()]):[3,4];case 3:return i=a.sent(),[3,2];case 4:return r.sort(JL),0===r.length?(this.titleEl.setText(cZ.name()),e.createEl("p",{text:cZ.labelNoHistoryFound()}),[2]):(o=this.searchComponent.inputEl,new pZ(this.app,o,r,this),setTimeout((function(){return o.focus()})),[2])}}))}))}))];case 1:return n.sent(),[2]}}))}))},t}(LI),fZ=function(){function e(){this.id="markdown-importer",this.name=rf.plugins.markdownFormatImporter.name(),this.description=rf.plugins.markdownFormatImporter.desc()}return e.prototype.init=function(e,t){this.app=e,t.registerRibbonItem(rf.plugins.markdownFormatImporter.actionOpen(),"lucide-binary",this.onOpen.bind(this)),t.registerGlobalCommand({id:"markdown-importer:open",name:rf.plugins.markdownFormatImporter.actionOpen(),icon:"lucide-download",callback:this.onOpen.bind(this)})},e.prototype.onOpen=function(){return new kZ(this.app).open(),!1},e}(),gZ=/\^\^(\S(.*?\S)?)\^\^/g,mZ=/::(\S(.*?\S)?)::/g,vZ=/\[\[(\d+?)\]\]/g,yZ=/(^|\s)\#([^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+)/g,bZ=/\B\#(\[\[[\w \t]*?\]\])/g,wZ=/\{\{\[\[(TODO|DONE)\]\]\}\}/g,kZ=function(e){function t(t){var n=e.call(this,t)||this;n.converters=[];var i=n.contentEl,r=n.converters;n.titleEl.setText(rf.plugins.markdownFormatImporter.name());for(var o=n.conversionsEl=i.createDiv(),a=[{name:rf.plugins.markdownFormatImporter.optionRoamTagFixer(),description:rf.plugins.markdownFormatImporter.optionRoamTagFixerDescription(),convert:function(e,t,n,i){return(n=n.replace(yZ,(function(e,t,n){for(var r=!0,o=0;o<n.length;o++){var a=n.charCodeAt(o);if(a<48||a>57){r=!1;break}}return r?e:(i.replaced++,t+"[["+n+"]]")}))).replace(bZ,(function(e,t){return i.replaced++,t}))}},{name:rf.plugins.markdownFormatImporter.optionRoamHighlightFixer(),description:rf.plugins.markdownFormatImporter.optionRoamHighlightFixerDescription(),convert:function(e,t,n,i){return n.replace(gZ,(function(e,t){return i.replaced++,"=="+t+"=="}))}},{name:rf.plugins.markdownFormatImporter.optionRoamTodoConverter(),description:rf.plugins.markdownFormatImporter.optionRoamTodoConverterDescription(Xd),convert:function(e,t,n,i){return n.replace(wZ,(function(e,t){return i.replaced++,"TODO"===t?"[ ]":"[x]"}))}},{name:rf.plugins.markdownFormatImporter.optionBearHighlightFixer(),description:rf.plugins.markdownFormatImporter.optionBearHighlightFixerDescription(),convert:function(e,t,n,i){return n.replace(mZ,(function(e,t){return i.replaced++,"=="+t+"=="}))}},{name:rf.plugins.markdownFormatImporter.zettelkastenLinkFixer(),description:rf.plugins.markdownFormatImporter.zettelkastenLinkFixerDescription(),convert:function(e,t,n,i){return n.replace(vZ,(function(n,r){for(var o=0,a=e.vault.getAllLoadedFiles();o<a.length;o++){var s=a[o];if(s instanceof Xy&&s.basename.contains(r))return i.replaced++,"[["+e.metadataCache.fileToLinktext(s,t.path)+"]]"}return n}))}},{name:rf.plugins.markdownFormatImporter.zettelkastenLinkBeautifier(),description:rf.plugins.markdownFormatImporter.zettelkastenLinkBeautifierDescription(),convert:function(e,t,n,i){return n.replace(vZ,(function(n,r){for(var o=0,a=e.vault.getAllLoadedFiles();o<a.length;o++){var s=a[o];if(s instanceof Xy&&s.basename.contains(r))return i.replaced++,"[["+e.metadataCache.fileToLinktext(s,t.path)+"|"+s.basename.replace(r,"").trim()+"]]"}return n}))}}],s=function(e){new YI(o).setName(e.name).setDesc(e.description).addToggle((function(t){t.setValue(!1),r.push({toggle:t,conversion:e})}))},l=0,c=a;l<c.length;l++){s(c[l])}o.createEl("p",{cls:"setting-message mod-warning",text:rf.plugins.markdownFormatImporter.msgAllFilesWarning()}),o.createEl("p",{cls:"setting-message mod-warning",text:rf.plugins.markdownFormatImporter.msgOverrideFilesWarning()}),o.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:rf.plugins.markdownFormatImporter.labelStartConversion()}).addEventListener("click",n.onProcess.bind(n));var u=n.resultEl=createDiv();n.statusEl=u.createEl("p","u-center-text"),n.processedEl=u.createDiv("changelog-item mod-success"),n.modifiedEl=u.createDiv("changelog-item mod-highlighted"),n.replacedEl=u.createDiv("changelog-item mod-highlighted"),n.renderStats({processed:0,modified:0,replaced:0});var h=u.createDiv("modal-button-container");return(n.cancelEl=h.createEl("button",{cls:"mod-warning",text:rf.plugins.markdownFormatImporter.labelStop()})).addEventListener("click",n.onCancel.bind(n)),(n.goBackEl=h.createEl("button",{cls:"",text:rf.plugins.markdownFormatImporter.labelGoBack()})).addEventListener("click",n.onGoBack.bind(n)),(n.doneEl=h.createEl("button",{cls:"mod-cta",text:rf.plugins.markdownFormatImporter.labelDone()})).addEventListener("click",n.close.bind(n)),n}return f(t,e),t.prototype.onProcess=function(){for(var e=this,t=[],n=0,i=this.converters;n<i.length;n++){var r=i[n];r.toggle.getValue()&&t.push(r.conversion)}0!==t.length&&(this.runnable=new zD({onCancel:function(){e.cancelEl.hide(),e.statusEl.setText(rf.plugins.markdownFormatImporter.labelCancelling())}}),this.conversionsEl.detach(),this.contentEl.append(this.resultEl),this.cancelEl.show(),this.goBackEl.hide(),this.doneEl.hide(),this.statusEl.setText(rf.plugins.markdownFormatImporter.labelProcessing()),this.process(t))},t.prototype.onCancel=function(){var e=this.runnable;e&&e.cancel()},t.prototype.onGoBack=function(){this.resultEl.detach(),this.contentEl.append(this.conversionsEl);for(var e=0,t=this.converters;e<t.length;e++){t[e].toggle.setValue(!1)}},t.prototype.onFinish=function(e){this.renderStats(e),this.cancelEl.hide(),this.goBackEl.show(),this.statusEl.setText(rf.plugins.markdownFormatImporter.labelFinished()),this.doneEl.show()},t.prototype.renderStats=function(e){this.processedEl.setText(rf.plugins.markdownFormatImporter.labelProcessedFiles()),this.processedEl.setAttribute("data-label",e.processed.toString()),this.modifiedEl.setText(rf.plugins.markdownFormatImporter.labelModifiedFiles()),this.modifiedEl.setAttribute("data-label",e.modified.toString()),this.replacedEl.setText(rf.plugins.markdownFormatImporter.labelTotalReplacements()),this.replacedEl.setAttribute("data-label",e.replaced.toString())},t.prototype.onClose=function(){this.onCancel(),this.onGoBack()},t.prototype.process=function(e){var t,n;return v(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:r=(i=this).app,o=i.runnable,a={processed:0,modified:0,replaced:0},s=r.vault.getMarkdownFiles(),y.label=1;case 1:y.trys.push([1,9,10,15]),l=E(r.vault.iterateFiles(s)),y.label=2;case 2:return[4,l.next()];case 3:if((c=y.sent()).done)return[3,8];if(u=c.value,h=u.file,p=u.content,o.isCancelled())return this.onFinish(a),[3,8];for(d=p,f=0,g=e;f<g.length;f++)m=g[f],d=m.convert(r,h,d,a);return d===p?[3,5]:(a.modified++,[4,r.vault.modify(h,d)]);case 4:y.sent(),y.label=5;case 5:return a.processed++,o.isCancelled()?(this.onFinish(a),[3,8]):(this.renderStats(a),a.processed%10!=0?[3,7]:[4,r.nextFramePromise()]);case 6:y.sent(),y.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return v=y.sent(),t={error:v},[3,15];case 10:return y.trys.push([10,,13,14]),c&&!c.done&&(n=l.return)?[4,n.call(l)]:[3,12];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(t)throw t.error;return[7];case 14:return[7];case 15:return this.onFinish(a),[2]}}))}))},t}(LI),CZ=rf.plugins.noteComposer,EZ=function(){function e(){this.id="note-composer",this.name=CZ.name(),this.description=CZ.desc(),this.defaultOn=!0,this.options={},this.app=null,this.pluginInstance=null}return e.prototype.init=function(e,t){var n=this;this.app=e,this.pluginInstance=t,t.registerGlobalCommand({id:"note-composer:merge-file",name:CZ.commandMergeFile(),icon:"lucide-git-merge",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t&&"md"===t.extension){if(!e){var i=new xZ(n.app,n);i.setCurrentFile(t),i.open()}return!0}}}),t.registerGlobalCommand({id:"note-composer:split-file",name:CZ.commandSplitFile(),icon:"lucide-scissors",editorCheckCallback:function(e,t,i){if(i.file&&t.somethingSelected()){if(!e){var r=new SZ(n.app,t,n);r.setCurrentFile(i.file),r.open()}return!0}}}),t.registerGlobalCommand({id:"note-composer:extract-heading",name:CZ.commandExtractHeading(),icon:"lucide-scissors",editorCheckCallback:function(e,t,i){if(i.file){var r=t.getCursor().line;return null!==Gw(t.getLine(r))?(e||n.extractHeading(i.file,t),!0):void 0}}})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{askBeforeMerging:!0},t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.workspace.on("editor-menu",this.onEditorMenu,this)),t.addSettingTab(new MZ(e,t,this)),[2]}}))}))},e.prototype.onFileMenu=function(e,t,n){var i=this;"link-context-menu"!==n&&t instanceof Xy&&"md"===t.extension&&e.addItem((function(e){return e.setSection("action").setTitle(CZ.actionMergeFile()).setIcon("lucide-git-merge").onClick((function(){var e=new xZ(i.app,i);e.setCurrentFile(t),e.open()}))}))},e.prototype.onEditorMenu=function(e,t,n){var i=this,r=n.file;if(r){t.getSelection().trim()&&e.addItem((function(e){return e.setTitle(CZ.commandSplitFile()).setIcon("lucide-git-branch-plus").setSection("action").onClick((function(){var e=new SZ(i.app,t,i);e.setCurrentFile(r),e.open()}))}));var o=t.getCursor().line;null!==Gw(t.getLine(o))&&e.addItem((function(e){return e.setTitle(CZ.commandExtractHeading()).setIcon("lucide-git-branch-plus").onClick((function(){return i.extractHeading(r,t)}))}))}},e.prototype.extractHeading=function(e,t){var n=t.getCursor().line,i=this.getSelectionUnderHeading(e,t,n);if(i){var r=i.heading,o=i.start,a=i.end;t.setSelection(o,a);var s=new SZ(this.app,t,this,r);s.setCurrentFile(e),s.open()}else new CI(CZ.msgFailToFindHeading())},e.prototype.getSelectionUnderHeading=function(e,t,n){var i=this.app.metadataCache.getFileCache(e);if(!i)return null;var r=i.headings;if(!r||0===r.length)return null;for(var o,a=0,s=null,l=null,c=0,u=r;c<u.length;c++){var h=u[c];if(s&&h.level<=a){l=h;break}s||h.position.start.line!==n||(a=h.level,s=h)}if(!s)return null;if(l)for(o=l.position.start.line-1;""===t.getLine(o).trim()&&o>n;)o--;else o=t.lineCount()-1;return{heading:s.heading.trim(),start:wf(n,0),end:wf(o,t.getLine(o).length)}},e.prototype.getTemplateText=function(){return v(this,void 0,Promise,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return e=this.app,t="",this.options.template?(n=e.metadataCache.getFirstLinkpathDest(this.options.template,""))?[4,e.vault.cachedRead(n)]:(new CI(CZ.msgFailToFetchTemplate({template:this.options.template})),[2]):[3,2];case 1:return""===(t=i.sent())||t.contains("{{content}}")||(t+="\n\n{{content}}"),[2,t];case 2:return[2]}}))}))},e}(),xZ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.currentFile=null,i.emptyStateText=CZ.labelNoFiles(),i.noteComposer=n,i.shouldShowNonImageAttachments=!1,i.shouldShowImages=!1,i.shouldShowCanvas=!1,i.setPlaceholder(CZ.promptSelectFileToMerge()),i.setInstructions([{command:"↑↓",purpose:CZ.instructionNavigate()},{command:"↵",purpose:CZ.instructionMerge()},{command:ye?"cmd ↵":"ctrl ↵",purpose:CZ.instructionCreateNew()},{command:"shift ↵",purpose:CZ.instructionMergeAtTop()},{command:"esc",purpose:CZ.instructionDismiss()}]),i.scope.register(["Shift"],"Enter",(function(e){return i.chooser.useSelectedItem(e),!1})),i.scope.register(["Mod"],"Enter",(function(e){return i.chooser.useSelectedItem(e),!1})),i}return f(t,e),t.prototype.setCurrentFile=function(e){this.currentFile=e},t.prototype.onChooseSuggestion=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m=this;return y(this,(function(b){switch(b.label){case 0:if(n=this.app,i=this.inputEl.value,!hw.isModifier(t,"Mod")&&e&&"unresolved"!==e.type)return[3,5];o=i,e&&"unresolved"===e.type&&(o=e.linktext),a=n.fileManager.getNewFileParent(this.currentFile.path,o),b.label=1;case 1:return b.trys.push([1,3,,4]),[4,n.fileManager.createNewMarkdownFile(a,o)];case 2:return r=b.sent(),[3,4];case 3:return s=b.sent(),new CI(s.toString()),[2];case 4:return[3,6];case 5:"bookmark"===e.type?"file"===e.item.type&&(l=n.vault.getAbstractFileByPath(e.item.path))instanceof Xy&&(r=l):r=e.file,b.label=6;case 6:return r&&r!==this.currentFile?(c=this.currentFile,u=t.shiftKey,h=this.noteComposer,p=!1,d=function(){return v(m,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return p&&(h.options.askBeforeMerging=!1,h.pluginInstance.saveData(h.options)),[4,h.getTemplateText()];case 1:return e=t.sent(),[4,n.fileManager.mergeFile(r,c,e,u)];case 2:return t.sent(),[2]}}))}))},h.options.askBeforeMerging?((f=document.createDocumentFragment()).createEl("p",{text:CZ.labelConfirmFileMerge({file:c.basename,destination:r.basename})}),g=new PI(n).setTitle(CZ.labelMergeFile()).setContent(f),Lt.isMobile?g.addButton("mod-warning",rf.dialogue.buttonDeleteDoNotAskAgain(),(function(){return v(m,void 0,void 0,(function(){return y(this,(function(e){return[2,d()]}))}))})):g.addCheckbox(rf.dialogue.labelDoNotAskAgain(),(function(e){p=e.target.checked})),g.addButton("mod-warning",CZ.buttonMerge(),(function(){return d()})).addCancelButton().open()):d(),[2]):[2]}}))}))},t}(fY),SZ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;if(o.defaultValue="",o.allowCreateNewFile=!0,o.editor=n,o.composer=i,o.shouldShowUnresolved=!0,o.shouldShowNonImageAttachments=!1,o.shouldShowImages=!1,o.shouldShowCanvas=!1,!r){var a=n.getSelection().split("\n");if(a.length>0)r=Gw(a[0])}return r||(r=""),o.defaultValue=r,o.setPlaceholder(CZ.promptSelectFileToMerge()),o.setInstructions([{command:"↑↓",purpose:CZ.instructionNavigate()},{command:"↵",purpose:CZ.instructionAppend()},{command:ye?"cmd ↵":"ctrl ↵",purpose:CZ.instructionCreateNew()},{command:"shift ↵",purpose:CZ.instructionPrepend()},{command:"esc",purpose:CZ.instructionDismiss()}]),o.scope.register(["Shift"],"Enter",(function(e){return o.chooser.useSelectedItem(e),!1})),o.scope.register(["Mod"],"Enter",(function(e){return o.chooser.useSelectedItem(e),!1})),o}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.inputEl.value=this.defaultValue,this.updateSuggestions()},t.prototype.setCurrentFile=function(e){this.currentFile=e},t.prototype.onChooseSuggestion=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:n=this.app,i=this.editor.getSelection(),r=t.shiftKey,o=hw.isModifier(t,"Mod"),s=this.currentFile,p.label=1;case 1:return p.trys.push([1,7,,8]),!o&&e?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,s.path)];case 2:return a=p.sent(),[3,6];case 3:return"unresolved"!==e.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(e.linktext,s.path)];case 4:return a=p.sent(),[3,6];case 5:"file"!==e.type&&"alias"!==e.type||(a=e.file),p.label=6;case 6:return[3,8];case 7:return l=p.sent(),new CI(l.toString()),[2];case 8:return[4,this.composer.getTemplateText()];case 9:return c=p.sent(),[4,n.fileManager.insertTextIntoFile(a,i,{},s.basename,c,r)];case 10:return p.sent(),u=n.fileManager.generateMarkdownLink(a,s.path),"embed"===(h=this.composer.options.replacementText)?this.editor.replaceSelection("!"+u):"none"===h?this.editor.replaceSelection(""):this.editor.replaceSelection(u),[2]}}))}))},t}(fY),MZ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(CZ.optionSplitReplacementText()).setDesc(CZ.optionSplitReplacementTextDescription()).addDropdown((function(t){return t.addOption("link",CZ.optionChoiceSplitReplacementTextLink()).addOption("embed",CZ.optionChoiceSplitReplacementTextEmbed()).addOption("none",CZ.optionChoiceSplitReplacementTextNone()).setValue(n.replacementText||"link").onChange((function(t){n.replacementText=t,e.plugin.saveData(n)}))})),new YI(t).setName(CZ.optionTemplateFile()).setDesc(CZ.optionTemplateFileDescription(Xd)).addText((function(t){t.setPlaceholder(rf.setting.filePathExamplePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new _$(e.app,t.inputEl)})),new YI(t).setName(CZ.optionConfirmFileMerge()).setDesc(CZ.optionConfirmFileMergeDescription()).addToggle((function(t){return t.setValue(n.askBeforeMerging).onChange((function(t){n.askBeforeMerging=t,e.plugin.saveData(n)}))}))},t}(IG),TZ="outgoing-link",DZ=rf.plugins.outgoingLinks,AZ=function(){function e(){this.id="outgoing-link",this.name=DZ.name(),this.description=DZ.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(TZ,(function(e){return new LZ(e)})),t.registerGlobalCommand({id:"outgoing-links:open",name:DZ.actionShow(),icon:"lucide-link",callback:function(){n.app.workspace.ensureSideLeaf(TZ,"right",{active:!0})}}),t.registerGlobalCommand({id:"outgoing-links:open-for-current",name:DZ.actionOpenForCurrent(),icon:"lucide-link",checkCallback:this.openForCurrentFile.bind(this)})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.onUserDisable=function(e){for(var t=0,n=e.workspace.getLeavesOfType(TZ);t<n.length;t++){n[t].detach()}},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(TZ,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Lt.isMobile&&t instanceof Xy&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(DZ.actionOpen()).setIcon("links-going-out").onClick((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:TZ,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openForCurrentFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:TZ,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e}(),LZ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="links-going-out";var i=n.contentEl.createDiv("outgoing-link-pane");return n.outgoingLink=n.addChild(new PZ(n.app,i)),n.requestUpdate(),n}return f(t,e),t.prototype.getDisplayText=function(){return!this.file||Lt.isMobile?DZ.name():DZ("tab-title",{displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return TZ},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.linksCollapsed=this.outgoingLink.linksCollapsed,t.unlinkedCollapsed=this.outgoingLink.unlinkedCollapsed,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return o.sent(),i=t.linksCollapsed,r=t.unlinkedCollapsed,isBoolean(i)?[4,this.outgoingLink.setLinksCollapsed(i,!1)]:[3,3];case 2:o.sent(),o.label=3;case 3:return isBoolean(r)?[4,this.outgoingLink.setUnlinkedCollapsed(r,!1)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},t.prototype.onResize=function(){this.outgoingLink.onResize()},t.prototype.update=function(){this.leaf.updateHeader();var e=this.outgoingLink;e.file=this.file,e.tooltipPlacement=this.getSideTooltipPlacement(),e.update()},t}(KG),PZ=function(e){function t(t,n,i){var r=e.call(this)||this;r.showSearch=!1,r.outgoingFile=null,r.linksCollapsed=!1,r.linksHeaderEl=null,r.linksCountEl=null,r.linksQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinksQueue=null,r.unlinkedDomInfo=new WeakMap,r.requestUpdate=rt(r.update.bind(r),50),r.app=t,i=i||n;var o=r.linksHeaderEl=n.createDiv("tree-item-self is-clickable");o.createSpan("tree-item-icon collapse-icon",(function(e){gb(e,"right-triangle")})),o.createDiv({cls:"tree-item-inner",text:DZ.labelLinks()}),o.addEventListener("click",r.toggleLinksCollapsed.bind(r)),r.linksCountEl=o.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.outgoingLinkDom=new IZ(n.createDiv("search-result-container")),r.outgoingLinkInfinityScroller=new fP(i),r.outgoingLinkInfinityScroller.rootEl=r.outgoingLinkDom;var a=r.unlinkedHeaderEl=n.createDiv("tree-item-self is-clickable");return a.createSpan("tree-item-icon collapse-icon",(function(e){gb(e,"right-triangle")})),a.createDiv({cls:"tree-item-inner",text:DZ.labelUnlinkedMentions()}),a.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=a.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new wP(t,n.createDiv("search-result-container"),DZ.labelUnlinkedMentions(),i),r.setUnlinkedCollapsed(!0,!1),r}return f(t,e),t.prototype.onload=function(){var e=this.app,t=e.vault;this.registerEvent(e.metadataCache.on("resolve",this.onFileResolved,this)),this.registerEvent(t.on("delete",this.onFileDeleted,this))},t.prototype.onResize=function(){this.outgoingLinkInfinityScroller.onResize(),this.unlinkedDom.onResize()},t.prototype.toggleLinksCollapsed=function(){this.setLinksCollapsed(!this.linksCollapsed,!0)},t.prototype.setLinksCollapsed=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.linksCollapsed?[2]:(this.linksCollapsed=e,this.updateHeaderTooltip(this.linksHeaderEl,e),[4,Be(this.outgoingLinkDom.el,e,t)]);case 1:return n.sent(),e||this.outgoingLinkInfinityScroller.invalidateAll(),this.update(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},t.prototype.setUnlinkedCollapsed=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=e,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,e,t)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},t.prototype.updateHeaderTooltip=function(e,t){XM(e,t),aS(e,t?rf.interface.tooltip.clickToExpand():rf.interface.tooltip.clickToCollapse(),{placement:this.tooltipPlacement})},t.prototype.setSectionCollapsed=function(e,t,n,i){return v(this,void 0,void 0,(function(){return y(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(e,n),[4,t.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},t.prototype.onFileResolved=function(e){e===this.file&&(this.outgoingFile=null,this.unlinkedFile=null,this.update())},t.prototype.onFileDeleted=function(){this.unlinkedFile=null,this.requestUpdate()},t.prototype.update=function(){var e=this.file;this.outgoingFile!==e&&this.recomputeLinks(),this.unlinkedFile!==e&&this.recomputeUnlinked(),this.updateHeaderTooltip(this.linksHeaderEl,this.linksCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},t.prototype.recomputeLinks=function(){var e=this,t=this.linksQueue;t&&!t.runnable.isCancelled()&&(t.runnable.cancel(),this.outgoingFile=null),this.linksQueue=null;var n=this.linksCollapsed,i=this.linksCountEl;if(n)i.hide();else{var r=this.file;this.outgoingFile=r;var o=this.outgoingLinkDom,a=this.outgoingLinkInfinityScroller;if(a.queueCompute(),i.show(),i.setText("0"),r&&"md"===r.extension){var s=this.app.metadataCache,l=s.getFileCache(r);if(l){var c=[];if(Rx(l,(function(e){c.push({linktext:e.link,pos:wx(e)?e.position.start.offset:0})})),c.sort((function(e,t){return e.pos-t.pos})),0!==c.length){for(var u=r.path,h=0,p=0,d=o.vChildren.children;p<d.length;p++){d[p].invalidated=!0}var f=function(){var e=o.vChildren,t=w([],o.vChildren.children,!0);t.sort((function(e,t){return e.pos-t.pos}));for(var n=0;n<t.length;n++){var r=t[n];if(-1!==h&&r.pos>h)break;r.invalidated&&(t.splice(n,1),n--)}e.setChildren(t),a.queueCompute(),i.setText(String(e.children.length))};t=this.linksQueue=new qD({onStart:function(){},onStop:function(){h=-1,f()},onCancel:function(){e.linksQueue=null}});var g=new Set;t.addList(c);var m=WD(t.generator(),{batchSize:20,beforePause:function(){f()}});v(e,void 0,void 0,(function(){var e,t,n,i,r,a,l,c,p,d,f,v,b,w;return y(this,(function(y){switch(y.label){case 0:y.trys.push([0,5,6,11]),e=E(m),y.label=1;case 1:return[4,e.next()];case 2:if((t=y.sent()).done)return[3,4];if(n=t.value,i=n.linktext,r=n.pos,a=Bx(i),l=a.path,c=a.subpath,(p=s.getFirstLinkpathDest(l,u))||(l=m_(l)),d=(p?p.path:l)+c,g.has(d))return[3,3];g.add(d),(f=new OZ(this,i,l,c,u,p)).pos=r,h=r,o.vChildren.addChild(f),y.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return v=y.sent(),b={error:v},[3,11];case 6:return y.trys.push([6,,9,10]),t&&!t.done&&(w=e.return)?[4,w.call(e)]:[3,8];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:if(b)throw b.error;return[7];case 10:return[7];case 11:return[2]}}))}))}else o.vChildren.clear()}else o.vChildren.clear()}else o.vChildren.clear()}},t.prototype.recomputeUnlinked=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,k,C,x,S,M,T,D,A,L,P,I,O,F,B,N,R,H=this;return y(this,(function(V){switch(V.label){case 0:return(e=this.unlinksQueue)&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.unlinkedFile=null),this.unlinksQueue=null,n=(t=this).unlinkedCollapsed,i=t.unlinkedCountEl,n?(i.hide(),[2]):(r=this.file,o=this.unlinkedDom,s=(a=this).app,l=a.unlinkedDomInfo,this.unlinkedFile=r,i.show(),i.setText("0"),r&&"md"===r.extension?(c=new Map,u=function(e,t){e=e.toLowerCase();var n=c.get(e)||{text:e,files:[]};c.set(e,n),n.files.contains(t)||n.files.push(t)},h=s.metadataCache.getFileCache(r),[4,s.vault.cachedRead(r)]):(o.emptyResults(),[2]));case 1:for(p=V.sent(),d=s.vault.getMarkdownFiles(),f=0,g=d;f<g.length;f++)if((m=g[f])!==r&&!s.metadataCache.isUserIgnored(m.path)&&(u(m.basename,m),(b=s.metadataCache.getFileCache(m))&&(k=fx(b.frontmatter))))for(C=0,x=k;C<x.length;C++)(S=x[C])&&u(S,m);if(M=Array.from(c.values()).sort((function(e,t){return JL(e.text,t.text)})),T=o.getResult(r)){for(D=T.vChildren,A=w([],D.children,!0),L=0;L<A.length;L++)(P=A[L])instanceof bP&&((I=l.get(P))&&c.has(I.text)||(A.splice(L,1),L--));D.setChildren(A),T.content=p}else o.emptyResults(),T=o.addResult(r,{content:[]},p,!1);return T.separateMatches=!0,O=function(){T.vChildren.sort((function(e,t){return Array.isArray(e.matches)?Array.isArray(t.matches)?e.matches[0][0]-t.matches[0][0]:1:-1})),o.infinityScroll.queueCompute(),i.setText(String(o.getMatchCount()))},e=this.unlinksQueue=new qD({onStart:function(){},onStop:function(){O()},onCancel:function(){H.linksQueue=null}}),F=0,(B=null==h?void 0:h.frontmatterPosition)&&(F=B.end.offset),N=p.toLowerCase(),e.addList(M),R=WD(e.generator(),{beforePause:function(){O()}}),v(H,void 0,void 0,(function(){var e,t,n,i,o,a,c,u,d,f,g,m,b,k,C,x,S,M=this;return y(this,(function(D){switch(D.label){case 0:D.trys.push([0,5,6,11]),e=E(R),D.label=1;case 1:return[4,e.next()];case 2:if((t=D.sent()).done)return[3,4];for(n=t.value,i=n.files,o=n.text,a=w([],T.vChildren.children,!0),c=0;c<a.length;c++)(u=a[c])instanceof bP&&((d=l.get(u))&&d.text!==o||(a.splice(c,1),c--));for(T.vChildren.setChildren(a),f=cL(o),g=new RegExp(f,"giy"),m=f.startsWith("(?:")?-1:0,b=N.indexOf(o,F),k=function(){g.lastIndex=b+m;var e=b,t=b+o.length;if(b=N.indexOf(o,t),!g.test(p))return"continue";if(Nx(h,(function(n){return n.position.start.offset<=e&&n.position.end.offset>=t})))return"continue";var a=[e,t],c=T.getMatchMinimalPositions(p,a),u=c[0],d=c[1],f=c[2],w=c[3],k=new bP(T,p,h,u,d,[a]);l.set(k,n);var C=i;k.onMatchRender=function(e,t){for(var n=t.createDiv({cls:"search-result-file-match-destination-file-container"}),i=function(e){var i=n.createDiv({cls:"search-result-file-match-destination-file"});i.createSpan({cls:"search-result-file-match-destination-file-icon"},(function(e){gb(e,"lucide-link")})),i.createSpan({cls:"search-result-file-match-destination-file-name",text:e.basename});var o="/"!==e.parent.path,l=DZ.tooltipLinkFile();o&&(l=se(e.path)+"\n\n"+l),aS(i,l),i.addEventListener("click",(function(n){return v(M,void 0,void 0,(function(){var i,o,l,c,u,h;return y(this,(function(p){switch(p.label){case 0:return n.preventDefault(),t.detach(),T.invalidate(),i=this.app.vault,o=a[0],l=a[1],e?[4,i.read(r)]:[2];case 1:return c=p.sent(),u=c.slice(o,l),h=s.fileManager.generateMarkdownLink(e,r.path,"",u),c=c.slice(0,o)+h+c.slice(l),[4,i.modify(r,c)];case 2:return p.sent(),[2]}}))}))}))},o=0,l=C;o<l.length;o++)i(l[o])},k.render(f,w),T.vChildren.addChild(k)};-1!==b;)k();D.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return C=D.sent(),x={error:C},[3,11];case 6:return D.trys.push([6,,9,10]),t&&!t.done&&(S=e.return)?[4,S.call(e)]:[3,8];case 7:D.sent(),D.label=8;case 8:return[3,10];case 9:if(x)throw x.error;return[7];case 10:return[7];case 11:return[2]}}))})).then(),[2]}}))}))},t}(nb),IZ=function(e){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.vChildren=new rP(this),this.pusherEl=pP(),this.el=e,this.childrenEl=e},OZ=function(e,t,n,i,r,o){this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.invalidated=!1,this.sourcePath=r;var a=e.app,s=this.el=createDiv("tree-item-self is-clickable outgoing-link-item"),l=s.createSpan("tree-item-icon"),c="lucide-link",u=n,h="";if(o){var p=_x(a.metadataCache.getFileCache(o),i);p?"heading"===p.type?(c="heading-glyph",u=p.current.heading,h=n):"block"===p.type&&(c="lucide-layout-list",u=p.block.id,h=n):(c="lucide-link","/"!==o.parent.path&&(h=re(o.path)))}else c="lucide-file-plus",aS(s,DZ.tooltipNotCreated());gb(l,c);var d=s.createDiv({cls:"tree-item-inner",text:u});if(h&&d.createDiv({cls:"tree-item-inner-subtext",text:h}),s.onClickEvent((function(e){a.workspace.openLinkText(t,r,hw.isModEvent(e))})),s.addEventListener("mouseover",(function(n){!n.defaultPrevented&&ft(n,s)&&(n.preventDefault(),a.workspace.trigger("hover-link",{event:n,source:"search",hoverParent:e,targetEl:s,linktext:t,sourcePath:r}))})),o){var f=a.dragManager;f.handleDrag(s,(function(e){return f.dragFile(e,o)}))}},FZ="outline";function BZ(e){var t="\n"===e.charAt(e.length-1),n="\n"===e.charAt(e.length-2);return t?n?e:e+"\n":e+"\n\n"}var NZ=function(e){function t(t,n,i){var r=e.call(this)||this;return r.pusherEl=pP(),r.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},r.vChildren=new rP(r),r.view=t,r.tree=n,r.heading=i,r.setClickable(!0),r.setCollapsible(!1),r}return f(t,e),t.prototype.prerender=function(){this.setCollapsible(this.vChildren.hasChildren()),this.innerEl.setText(function(e){var t=bx(rx(e.heading));return t||(t=e.heading),t}(this.heading))},t.prototype.onSelfClick=function(e){var t=this;setTimeout((function(){var e=t.view.leaf;Rj.collapseFor(e);var n,i=e.workspace;if(e.group)n=i.getGroupLeaves(e.group);else{n=[];var r=i.getActiveFileView();r&&n.push(r.leaf)}for(var o=t.heading.position.start.line,a=!1,s=0,l=n;s<l.length;s++){var c;(c=l[s])&&c.view instanceof iK&&c.view.file===t.view.file&&(c.view.setEphemeralState({line:o,focus:!0}),a=!0)}a||(c=i.getLeaf()).openFile(t.view.file,{eState:{line:o,focus:!0}})}),10)},t.prototype.updateCollapsed=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return this.view.treeView.infinityScroll.invalidate(this),[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.view.treeView.requestSaveFolds(),[2]}}))}))},t}(mO),RZ=function(){function e(){this.id="outline",this.name=rf.plugins.outline.name(),this.description=rf.plugins.outline.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerViewType(FZ,(function(e){return new HZ(e)})),t.registerGlobalCommand({id:"outline:open",name:rf.plugins.outline.actionShow(),icon:"lucide-list",callback:function(){n.app.workspace.ensureSideLeaf(FZ,"right",{active:!0})}}),t.registerGlobalCommand({id:"outline:open-for-current",name:rf.plugins.outline.actionOpenForCurrent(),icon:"lucide-list",checkCallback:this.openTocForActiveFile.bind(this)})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this))},e.prototype.onFileOpen=function(e){this.file=e instanceof Xy?e:null},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(FZ,"right",{reveal:!1})},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Lt.isMobile&&t instanceof Xy&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(rf.plugins.outline.actionOpen()).setIcon("lucide-list").onClick((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:FZ,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.openTocForActiveFile=function(e){var t=this.app.workspace,n=t.getActiveFile();if(n){if(!e)t.splitActiveLeaf("vertical").setViewState({type:FZ,active:!0,group:t.activeLeaf,state:{file:n.path}});return!0}},e}(),HZ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-list";var i=n.contentEl;return n.scope=new cw(n.app.scope),n.treeView=new SY(n,{app:n.app,containerEl:i,id:FZ,scope:n.scope,getNodeId:n.getNodeId.bind(n)}),n.emptyEl=createDiv({cls:"pane-empty",text:rf.plugins.outline.labelNoHeadings()}),n.app.dragManager.handleDrop(i,(function(e,t,i){if("outline"===t.source&&"heading"===t.type&&t.file===n.file){if(!n.treeView.root.vChildren.hasChildren())return;var r=MY(e,n.treeView),o=PY(n.treeView,r,[],i),a=n.app.metadataCache.getFileCache(n.file);if(!a||!a.headings||!(null==r?void 0:r.node))return;var s=a.headings,l=t.heading,c=s.indexOf(l),u=r.node.heading,h=s.indexOf(u);if(-1===c||-1===h)return;if("after"===r.position&&(u=s[++h]),c===h)return;for(var p=c+1;p<s.length&&!(s[p].level<=l.level);p++);var d=l.position.start.offset,f=p<s.length?s[p].position.start.offset:-1,g=u?u.position.start.offset:-1,m=Math.max(d,f,g)+1,b=-1===g?m:g;if(b>=d&&b<=(-1===f?m:f))return;return i||v(n,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.app.vault.read(this.file)];case 1:return e=n.sent(),-1===f&&(f=e.length),-1===g&&(g=e.length),t=BZ(e.substring(d,f)),e=g<d?BZ(e.substring(0,g))+t+e.substring(g,d)+e.substring(f):e.substring(0,d)+BZ(e.substring(f,g))+t+e.substring(g),[4,this.app.vault.modify(this.file,e)];case 2:return n.sent(),[2]}}))})),{dropEffect:"move",hoverEl:o,hoverClass:"is-active"}}})),n}return f(t,e),t.prototype.getNodeId=function(e){for(var t=e.heading.heading,n=[],i=e;i instanceof NZ;){var r=0;t=i.heading.heading;for(var o=0,a=i.parent.vChildren.children;o<a.length;o++){var s=a[o];if(s===i)break;s.heading.heading===t&&r++}var l="".concat(t,"-").concat(r);n.push(l),i=i.parent}return"item-".concat(n.reverse().join("/"))},t.prototype.getDisplayText=function(){return!this.file||Lt.isMobile?rf.plugins.outline.name():rf.plugins.outline.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return FZ},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.onload=function(){var e=this;this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this)),this.app.workspace.onLayoutReady((function(){e.update()}))},t.prototype.onFileChanged=function(e){e===this.file&&this.requestUpdate()},t.prototype.getItemDom=function(e){var t=this,n=new NZ(this,this.treeView,e);return this.app.dragManager.handleDrag(n.selfEl,(function(e){return t.app.dragManager.updateSource([n.selfEl],"is-being-dragged"),Cw(e.dataTransfer,n.heading.heading),{source:"outline",type:"heading",icon:"heading-glyph",title:n.heading.heading,heading:n.heading,file:t.file}})),n},t.prototype.update=function(){this.treeView.root.vChildren.clear(),this.treeView.infinityScroll.invalidateAll(),this.emptyEl.detach();for(var e=this.getHeadings(),t=[],n=0,i=e;n<i.length;n++){for(var r=i[n],o=r.level,a=this.getItemDom(r),s=t.last();s&&s.heading.level>=o;)t.pop(),s=t.last();t.push(a),s?s.vChildren.addChild(a):this.treeView.root.vChildren.addChild(a)}sP(this.treeView.root,(function(e){e.prerender()})),0===e.length&&this.contentEl.appendChild(this.emptyEl),this.treeView.loadFolds()},t.prototype.getHeadings=function(){var e=this.file;if(!e||"md"!==e.extension)return[];var t=this.app.metadataCache.getFileCache(e);if(!t)return[];var n=t.headings;return n&&0!==n.length?n:[]},t}(KG),VZ=function(){function e(){this.id="page-preview",this.name=rf.plugins.pagePreview.name(),this.description=rf.plugins.pagePreview.desc(),this.defaultOn=!0,this.overrides={}}return e.prototype.init=function(e,t){this.app=e},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return t.registerEvent(e.workspace.on("link-hover",this.onLinkHover,this)),t.registerEvent(e.workspace.on("hover-link",this.onHoverLink,this)),n=this,r=(i=Object).assign,o=[{}],[4,t.loadData()];case 1:return n.overrides=r.apply(i,o.concat([a.sent()])),t.addSettingTab(new zZ(e,t,this)),[2]}}))}))},e.prototype.onHoverLink=function(e){var t=this,n=e.source,i=e.hoverParent,r=e.targetEl,o=e.linktext,a=e.sourcePath,s=void 0===a?"":a,l=e.state;if(!wt(e.event)){var c=!0;if(this.overrides.hasOwnProperty(n)?c=this.overrides[n]:this.app.workspace.hoverLinkSources.hasOwnProperty(n)&&(c=this.app.workspace.hoverLinkSources[n].defaultMod),F_(e.event),c&&!hw.isModifier(e.event,"Mod")){if(!r)return;var u=r.doc,h=!1,p=function(){h=!0,u.removeEventListener("keydown",d),u.removeEventListener("mouseover",f)},d=function(e){h||(u.body.contains(r)?hw.isModifier(e,"Mod")&&(p(),t.onLinkHover(i,r,o,s,l)):p())},f=function(e){h||r===e.target||r.contains(e.target)||p()};return u.addEventListener("keydown",d),void u.addEventListener("mouseover",f)}!r&&e.event&&(r=e.event.doc.body),this.onLinkHover(i,r,o,s,l)}},e.prototype.onLinkHover=function(e,t,n,i,r){var o=this,a=e.hoverPopover;a&&a.state!==x_.Hidden&&a.targetEl===t||(a=new R_(e,t),setTimeout((function(){return v(o,void 0,void 0,(function(){var e,t;return y(this,(function(o){switch(o.label){case 0:return a.state===x_.Hidden?[2]:(e=a.hoverEl.createDiv(),(t=lF.load({app:this.app,linktext:n,sourcePath:i,containerEl:e,state:r,depth:0}))?(a.addChild(t),[4,t.loadFile()]):[3,2]);case 1:o.sent(),o.label=2;case 2:return a.state===x_.Shown&&a.position(),[2]}}))}))}),100))},e}(),zZ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty(),new YI(t).setHeading().setName(rf.plugins.pagePreview.labelRequireMod({key:sw.Mod}));var n=this.instance.overrides,i=this.app.workspace.hoverLinkSources,r=function(r){var o=i[r],a=n[r];n.hasOwnProperty(r)||(a=o.defaultMod),new YI(t).setName(o.display).addToggle((function(t){return t.setValue(a).onChange((function(t){t===o.defaultMod?delete n[r]:n[r]=t,e.plugin.saveData(n)}))}))};for(var o in i)r(o)},t}(IG),qZ=rf.plugins.properties,UZ="all-properties",WZ="file-properties",_Z=[["alphabetical","alphabeticalReverse"],["frequency","frequencyReverse"]],jZ={alphabetical:qZ.labelSortByNameAToZ,alphabeticalReverse:qZ.labelSortByNameZToA,frequency:qZ.labelSortByFrequencyHighToLow,frequencyReverse:qZ.labelSortByFrequencyLowToHigh},GZ=function(){function e(){this.id="properties",this.name=qZ.name(),this.description=qZ.desc(),this.defaultOn=!1}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerGlobalCommand({id:"properties:open",name:qZ.actionShow(),icon:"lucide-archive",callback:function(){var e=Lt.isMobile?"left":"right";n.app.workspace.ensureSideLeaf(UZ,e,{active:!0})}}),t.registerGlobalCommand({id:"properties:open-local",name:qZ.actionShowLocal(),icon:"lucide-info",callback:function(){var e=n.app.workspace.getActiveFile();n.ensurePropertiesView(e)}}),t.registerViewType(UZ,(function(e){return new YZ(e)})),t.registerViewType(WZ,(function(e){return new XZ(e,n)}))},e.prototype.initLeaf=function(){var e=Lt.isMobile?"left":"right";this.app.workspace.ensureSideLeaf(UZ,e,{reveal:!1})},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.updateStatusbar=function(e){var t=this.plugin.statusBarEl;t&&(t.setText(rf.nouns.propertiesWithCount({count:e})),t.toggle(e>0))},e.prototype.onFileOpen=function(e){var t,n=0;if(e){var i=this.app.metadataCache.getFileCache(e);n=Object.keys(null!==(t=i.frontmatter)&&void 0!==t?t:{}).length}this.updateStatusbar(n)},e.prototype.onCacheChanged=function(e,t,n){var i;if(e===this.app.workspace.getActiveFile()){var r=Object.keys(null!==(i=n.frontmatter)&&void 0!==i?i:{}).length;this.updateStatusbar(r)}},e.prototype.onEnable=function(e,t){var n=this;t.registerEvent(e.workspace.on("file-open",this.onFileOpen,this)),t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this)),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),t.registerEvent(e.metadataCache.on("changed",this.onCacheChanged,this));var i=this.plugin.statusBarEl;i&&(i.addClass("mod-clickable"),i.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){var e;return y(this,(function(t){return e=this.app.workspace.getActiveFile(),this.ensurePropertiesView(e),[2]}))}))})))},e.prototype.onFileMenu=function(e,t,n,i){var r=this;!Lt.isMobile&&t instanceof Xy&&i&&"sidebar-context-menu"!==n&&e.addItem((function(e){return e.setSection("view.linked").setTitle(qZ.actionOpenLocal()).setIcon("links-going-out").onClick((function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:WZ,active:!0,group:i,state:{file:t.path}})];case 1:return e.sent(),[2]}}))}))}))}))},e.prototype.ensurePropertiesView=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return this.app.workspace.iterateAllLeaves((function(n){if(n.view&&n.view.getViewType()===WZ&&n.view.file===e)return t=n,!0})),t?[3,2]:[4,(t=this.app.workspace.getRightLeaf(!1)).setViewState({type:WZ,state:e?{file:e.path}:void 0})];case 1:n.sent(),n.label=2;case 2:return this.app.workspace.revealLeaf(t),this.app.workspace.setActiveLeaf(t,{focus:!0}),[2,t.view]}}))}))},e.prototype.addProperty=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.ensurePropertiesView(e)];case 1:return t.sent().metadataEditor.addProperty(),[2]}}))}))},e}(),KZ=function(e){function t(t){var n=e.call(this)||this;n.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},n.property=null,n.count=0,n.vChildren=new rP(n),n.pusherEl=pP(),n.app=t;var i=n,r=i.selfEl,o=i.innerEl;return n.iconEl=n.selfEl.createDiv({cls:"tree-item-icon",prepend:!0}),n.titleEl=o.createDiv("tree-item-inner-text"),n.flairEl=r.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),n.selfEl.addEventListener("contextmenu",n.onContextMenu.bind(n)),n.setCollapsible(!1),n.setClickable(!0),n}return f(t,e),t.prototype.onContextMenu=function(e){var t,n=this;if(!e.defaultPrevented){var i=!fB.hasOwnProperty(this.property.key),r=!!this.app.metadataTypeManager.getAssignedType(this.property.key),o=(new fw).addSections(["action","action.changeType","danger"]);o.setSectionSubmenu("action.changeType",{title:rf.properties.optionPropertyType(),icon:"lucide-menu"});for(var a=this.app.metadataTypeManager,s=function(e){if(e.reservedKeys&&!(null===(t=e.reservedKeys)||void 0===t?void 0:t.contains(l.property.key)))return"continue";o.addItem((function(t){var r;return t.setTitle(e.name()).setIcon(null!==(r=e.icon)&&void 0!==r?r:"lucide-pencil").setSection("action.changeType").setDisabled(!i).setChecked(e.type===n.property.type).onClick((function(){a.setType(n.property.key,e.type)}))}))},l=this,c=0,u=Object.values(a.registeredTypeWidgets);c<u.length;c++){s(u[c])}o.addItem((function(e){return e.setSection("danger").setIcon("lucide-circle-slash").setDisabled(!i||!r).setTitle(qZ.optUnassignType()).onClick((function(){n.app.metadataTypeManager.unsetType(n.property.key)})).setWarning(!0)})),o.showAtMouseEvent(e)}},t.prototype.onSelfClick=function(e){var t=this.app.internalPlugins.getEnabledPluginById("global-search");if(t){var n=hw.isModEvent(e),i=t.getGlobalSearchQuery(),r='["'.concat(this.property.key,'"]');n&&""!==i?i.contains(r)?t.openGlobalSearch(i.replace(r,"").trim()):t.openGlobalSearch("".concat(i.trim()," ").concat(r)):t.openGlobalSearch(r)}},t.prototype.setProperty=function(e){var t,n=this.app,i=this.titleEl;this.count=e.count,this.property={key:e.name,type:e.type,value:""};var r=n.metadataTypeManager.getTypeInfo({key:e.name,type:e.type,value:void 0});return gb(this.iconEl,null!==(t=r.expected.icon)&&void 0!==t?t:"lucide-file-question"),i.setText(e.name),this.flairEl.setText(String(e.count)),this},t}(mO),YZ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-archive",n.doms={},n.sortOrder="frequency",n.requestUpdate=rt(n.update.bind(n),100);var i=n.containerEl;return n.emptyStateEl=createDiv({cls:"pane-empty properties-pane-empty",text:qZ.labelNoProperties()}),n.scope=new cw(n.app.scope),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n)),new YG(n.app,n.containerEl).addNavButton("lucide-sort-asc",rf.plugins.fileExplorer.actionChangeSort(),(function(e){e.preventDefault();for(var t=new fw,i=n.sortOrder,r=0,o=_Z;r<o.length;r++){for(var a=function(e){var r=jZ[e]();t.addItem((function(t){return t.setTitle(r).setChecked(e===i).onClick((function(){n.sortOrder=e,n.requestUpdate(),n.app.workspace.requestSaveLayout()}))}))},s=0,l=o[r];s<l.length;s++){a(l[s])}t.addSeparator()}t.showAtMouseEvent(e)})),n.tree=new SY(n,{app:n.app,containerEl:n.contentEl,id:UZ,scope:n.scope}),i.addEventListener("click",(function(){n.tree.setFocusedItem(null)})),n}return f(t,e),t.prototype.onload=function(){var e=this;this.registerEvent(this.app.vault.on("delete",this.requestUpdate,this)),this.registerEvent(this.app.metadataCache.on("finished",this.requestUpdate,this)),this.registerEvent(this.app.metadataTypeManager.on("changed",this.requestUpdate,this)),this.app.workspace.onLayoutReady((function(){e.update()}))},t.prototype.isItem=function(e){return e instanceof KZ},t.prototype.onKeyEnterInFocus=function(e){e.preventDefault(),this.isItem(this.tree.focusedItem)&&this.tree.focusedItem.onSelfClick(e)},t.prototype.getDisplayText=function(){return qZ.nameGlobal()},t.prototype.getViewType=function(){return UZ},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return r.sent(),i=t.sortOrder,String.isString(i)&&jZ.hasOwnProperty(i)&&(this.sortOrder=i),this.requestUpdate(),[2]}}))}))},Object.defineProperty(t.prototype,"root",{get:function(){return this.tree.infinityScroll.rootEl},enumerable:!1,configurable:!0}),t.prototype.onResize=function(){this.tree.infinityScroll.onResize()},t.prototype.update=function(){var e=this.app,t=this.doms,n=e.metadataTypeManager.getAllProperties();if(this.doms={},this.root.vChildren.clear(),this.tree.focusedItem=null,Object.keys(n).length>0){this.emptyStateEl.detach();var i=this.sortOrder,r=null;if("alphabetical"===i)r=function(e,t){return JL(e.property.key,t.property.key)};else if("alphabeticalReverse"===i)r=function(e,t){return-JL(e.property.key,t.property.key)};else{var o="frequencyReverse"===i?-1:1;r=function(e,t){var i,r,a,s,l=e.property.key.toLowerCase(),c=t.property.key.toLowerCase(),u=null!==(r=null===(i=n[l])||void 0===i?void 0:i.count)&&void 0!==r?r:0,h=null!==(s=null===(a=n[c])||void 0===a?void 0:a.count)&&void 0!==s?s:0;return u===h?JL(l,c):o*(h-u)}}for(var a=0,s=Object.entries(n);a<s.length;a++){var l=s[a],c=l[0],u=l[1],h=t[c]||new KZ(this.app);h.setProperty(u),this.root.vChildren.addChild(h),this.doms[c]=h}this.root.vChildren.sort(r)}else this.contentEl.appendChild(this.emptyStateEl);this.tree.infinityScroll.queueCompute()},t}(bI),XZ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.icon="lucide-info",i.frontmatterValid=!0,i.rawFrontmatter="",i.frontmatter={},i.plugin=n,i.scope=new cw(i.app.scope),i.contentEl.addEventListener("click",(function(e){e.target===i.contentEl&&i.metadataEditor.containerEl.focus()})),i.metadataEditor=new KB(i.app,i),i.contentEl.appendChild(i.metadataEditor.containerEl),i.addChild(i.metadataEditor),i.emptyStateEl=i.contentEl.createDiv({cls:"pane-empty"}),i.updateEmptyState(),i}return f(t,e),t.prototype.setEphemeralState=function(t){e.prototype.setEphemeralState.call(this,t),t.focus&&this.metadataEditor.containerEl.focus()},t.prototype.onload=function(){this.registerEvent(this.app.vault.on("modify",this.onFileChange,this)),this.registerEvent(this.app.workspace.on("quick-preview",this.onQuickPreview,this))},t.prototype.canAcceptExtension=function(e){return!0},t.prototype.getFile=function(){return this.file},t.prototype.shiftFocusAfter=function(){},t.prototype.shiftFocusBefore=function(){},t.prototype.handleCut=function(e){this.metadataEditor.handleCut(e)},t.prototype.handleCopy=function(e){this.metadataEditor.handleCopy(e)},t.prototype.handlePaste=function(e){e.clipboardData.getData("obsidian/properties")&&this.metadataEditor.handlePaste(e)},t.prototype.saveFrontmatter=function(e){var t=this.file,n=this.modifyingFile;t&&"md"===t.extension&&t===n&&this.app.vault.process(t,(function(t){var n="",i="";Object.keys(e).length>0&&(i=hF(e).trim(),n="---\n".concat(i,"\n---\n"));var r=0,o=0,a=sx(t);return a&&(r=a.blockFrom,o=a.blockTo),t.slice(0,r)+n+t.slice(o)}))},t.prototype.isSupportedFile=function(e){return!!this.file&&"md"===this.file.extension},t.prototype.readSupportedFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return this.isSupportedFile(e)?[2,this.app.vault.cachedRead(e)]:[2,""]}))}))},t.prototype.onLoadFile=function(t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,this.readSupportedFile(t)];case 1:return n=i.sent(),this.updateFrontmatter(t,n),this.isSupportedFile(t)&&(this.modifyingFile=t),e.prototype.onLoadFile.call(this,t),[2]}}))}))},t.prototype.onUnloadFile=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return this.modifyingFile=null,this.updateFrontmatter(null,""),e.prototype.onUnloadFile.call(this,t),[2]}))}))},t.prototype.onQuickPreview=function(e,t){e===this.file&&(this.updateFrontmatter(e,t),this.requestUpdate())},t.prototype.onFileChange=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return e!==this.file?[3,2]:[4,this.readSupportedFile(e)];case 1:t=n.sent(),this.updateFrontmatter(e,t),this.requestUpdate(),n.label=2;case 2:return[2]}}))}))},t.prototype.getDisplayText=function(){return!this.file||Lt.isMobile?qZ.nameLocal():qZ.tabTitle({displayText:e.prototype.getDisplayText.call(this)})},t.prototype.getViewType=function(){return WZ},t.prototype.updateFrontmatter=function(e,t){var n;if(!this.isSupportedFile(e))return this.rawFrontmatter=null,this.frontmatter={},void(this.frontmatterValid=!1);var i=sx(t),r=(null==i?void 0:i.frontMatter)||"";if(this.rawFrontmatter!==r){this.rawFrontmatter=r;try{var o=null!==(n=uF(r))&&void 0!==n?n:{};if("object"!=typeof o||Array.isArray(o))throw new Error("Frontmatter must be a valid object!");this.frontmatter=o,this.frontmatterValid=!0}catch(e){this.frontmatter={},this.frontmatterValid=!1}}},t.prototype.updateEmptyState=function(){var e=!1;this.isSupportedFile(this.file)?this.frontmatterValid||(this.emptyStateEl.setText(qZ.labelInvalidProperties()),e=!0):(this.emptyStateEl.setText(qZ.labelNoProperties()),e=!0),this.metadataEditor.containerEl.toggle(!e),this.emptyStateEl.toggle(e)},t.prototype.update=function(){this.metadataEditor.synchronize(this.frontmatter),this.updateEmptyState()},t}(KG);function $Z(e){return encodeURIComponent(e).replace(/%20/g,"+")}function ZZ(e,t,n){void 0===n&&(n=!0);if(n)for(var i=0,r=e;i<r.length;i++){var o=r[i];"folder"===o.type&&ZZ(o.children,t,n)}e.sort((function(e,n){var i=t.hasOwnProperty(e.path)?t[e.path]:void 0,r=t.hasOwnProperty(n.path)?t[n.path]:void 0;if(void 0!==i&&void 0!==r)return i-r;if(void 0!==i)return-1;if(void 0!==r)return 1;var o="folder"===e.type,a="folder"===n.type;if(o||a){if(o&&!a)return-1;if(a&&!o)return 1}return JL(e.name,n.name)}))}var QZ=rf.plugins.publish,JZ=function(e){function t(t,n,i,r,o){var a=e.call(this,t)||this;a.plugin=n,a.modalEl.addClass("mod-scrollable-content"),a.titleEl.setText(QZ.labelNavigationModalTitle()),new YI(a.contentEl).setName(QZ.optionNavigationOrder()).setDesc(QZ.labelNavigationModalDesc()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){var e;s.navOrder=[],null===(e=s.orderChangeCb)||void 0===e||e.call(s,[]),s.render()}))}));var s=a.tree=new iQ(a.plugin,a.contentEl,r,o);return i.forEach((function(e){return s.createItem(e)})),s.render(),new YI(a.contentEl).setName(QZ.optionHideItemsInNavigation()).setDesc(QZ.optionHideItemsInNavigationDesc()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){var e;s.hiddenItems=[],null===(e=s.visibilityChangeCb)||void 0===e||e.call(s,[]),s.render()}))})),a.modalEl.createDiv("modal-button-container",(function(e){e.createEl("button",{text:rf.dialogue.buttonDone()}).addEventListener("click",(function(){return a.close()}))})),a}return f(t,e),t.prototype.onOrderChange=function(e){return this.tree.orderChangeCb=e,this},t.prototype.onVisibilityChange=function(e){return this.tree.visibilityChangeCb=e,this},t}(LI),eQ=function(e){function t(t,n){var i=e.call(this)||this;return i.hidden=!1,i.tree=t,i.name=ie(n),i.path=n,i.el.addClass("mod-custom-nav"),i.selfEl.addEventListener("contextmenu",i.onContextMenu.bind(i)),i}return f(t,e),t.prototype.onContextMenu=function(e){var t=this;(new fw).addItem((function(e){return e.setTitle(QZ.optionHideInNavigation()).setChecked(t.hidden).onClick((function(){var e,n;t.hidden=!t.hidden;var i=t.tree.hiddenItems;t.hidden?i.push(t.path):i.remove(t.path),null===(n=(e=t.tree).visibilityChangeCb)||void 0===n||n.call(e,i),t.render()}))})).showAtMouseEvent(e)},t.prototype.render=function(){var t,n,i=this;if(this.el.toggleClass("hidden",this.hidden),!this.hidden||this.tree.showHidden){this.el.show(),e.prototype.render.call(this);var r=null!==(n=null===(t=this.parent)||void 0===t?void 0:t.childrenEl)&&void 0!==n?n:this.tree.childrenEl;Et(this.selfEl,this.el,r,10,(function(){}),(function(e){var t,n,r=null!==(n=null===(t=i.parent)||void 0===t?void 0:t.children)&&void 0!==n?n:i.tree.children;r.remove(i),r.splice(e,0,i),i.tree.rebuildNavOrder()}))}else this.el.hide()},t}(vO),tQ=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.type="file";var r=i.innerEl,o=ie(n);return r.createDiv({cls:"tree-item-title",text:o}),i}return f(t,e),t.prototype.render=function(){e.prototype.render.call(this),this.setCollapsible(!1),this.setClickable(!0)},t}(eQ),nQ=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.type="folder",i.children=[],i.selfEl.addClass("mod-folder"),i.setCollapsible(!0),i.setClickable(!0),i.setCollapsed(!0,!1),i.innerEl.createDiv({cls:"file-tree-item-title",text:i.name}),i}return f(t,e),t.prototype.onSelfClick=function(e){this.toggleCollapsed(!0)},t}(eQ),iQ=function(e){function t(t,n,i,r){var o=e.call(this,n)||this;o.children=[],o.showHidden=!1,o.hiddenItems=[],o.navOrder=[],o.folders={},o.files={},o.publish=t,o.navOrder=i,o.hiddenItems=r;var a=n.createDiv("tree-list-container");return a.createDiv("tree-list-header",(function(e){e.createDiv({cls:"tree-list-title",text:"Navigation preview"}),e.createEl("label",{cls:"tree-list-action mod-checkbox"},(function(e){e.createEl("input",{attr:{tabindex:-1},type:"checkbox"}).addEventListener("click",(function(){o.setShowHidden(!o.showHidden)})),e.appendText(QZ.optionShowHiddenItems())}))})),o.childrenEl=a.createDiv("tree-list"),o}return f(t,e),t.prototype.setShowHidden=function(e){this.showHidden=e,this.render()},t.prototype.addChild=function(e){var t=re(e.path);if(t){var n=this.folders,i=n[t];i||(i=n[t]=new nQ(this,t),this.addChild(i)),i.children.push(e),e.parent=i}else this.addRoot(e)},t.prototype.createItem=function(e){var t=new tQ(this,e);return this.files[e]=t,this.addChild(t),t},t.prototype.rebuildNavOrder=function(){var e,t=[],n=function(e){var i=e.slice();ZZ(i,{},!1);for(var r=!1,o=0;o<e.length;o++)if(i[o].path!==e[o].path){r=!0;break}for(var a=0,s=e;a<s.length;a++){var l=s[a];r&&t.push(l.path),l instanceof nQ&&n(l.children)}};return n(this.children),this.navOrder=t,null===(e=this.orderChangeCb)||void 0===e||e.call(this,this.navOrder),t},t.prototype.render=function(){for(var t={},n=0;n<this.navOrder.length;n++){t[this.navOrder[n]]=n}ZZ(this.children,t);var i=new Set(this.hiddenItems),r=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];o.hidden=i.has(o.path),"folder"===o.type&&r(o.children)}};r(this.children),e.prototype.render.call(this)},t}(yO),rQ=rf.setting.about,oQ=rf.setting.account;var aQ,sQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=rQ.name(),t.id="about",t}return f(t,e),t.prototype.display=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x,S=this;return y(this,(function(y){switch(y.label){case 0:return(e=this.containerEl).empty(),t=function(){var e=rf.setting.about.labelUnknownVersion(),t=rf.setting.about.labelUnknownVersion(),n="",i=!1,r=!1,o=!0,a=!0,s=!1;return Ot((function(l){var c=l.remote.app.getVersion();t="v"+c,e="v"+l.ipcRenderer.sendSync("version"),n=l.ipcRenderer.sendSync("update"),(o=Nd("0.7.3",c))&&(i=l.ipcRenderer.sendSync("check-update"),r=l.ipcRenderer.sendSync("disable-update")),(a=Nd("0.10.0",c))&&(s=l.ipcRenderer.sendSync("disable-gpu"))})),{appVersion:e,installerVersion:t,update:n,checking:i,updateDisabled:r,supportsCheckAndDisable:o,supportsAppReady:a,disableGpu:s}}(),n=t.appVersion,i=t.installerVersion,r=t.update,o=t.updateDisabled,a=t.checking,s=t.supportsCheckAndDisable,l=t.supportsAppReady,c=t.disableGpu,u=this.app,h=u.setting,p=u.account,Lt.isDesktopApp?(a&&(d=function(){Ot((function(e){s&&(a=e.ipcRenderer.sendSync("check-update"))})),a?setTimeout(d,1e3):S.display()},setTimeout(d,0)),new YI(e).setName(rQ.labelApp()).setHeading(),f=new YI(e).setName(rQ.labelCurrentVersion()+n).setDesc(createFragment((function(e){e.appendText(rQ.labelInstallVersion({version:i})),e.createEl("br"),"update-downloaded"===r?(e.appendText(rQ.labelNewVersionReady()),e.createEl("br"),e.createEl("a",{text:rQ.labelReadChangelog(),attr:{href:"https://obsidian.md/changelog",target:"_blank",rel:"noopener"}}),e.createEl("br"),e.appendText(rQ.labelRelaunchToUpdate())):"update-manual-required"===r||Nd(zt,K0)?(e.createEl("b",{text:rQ.labelManualUpdateRequired()}),e.appendText(" "),e.createEl("a",{text:rQ.labelDownload(),attr:{href:G_(),target:"_blank",rel:"noopener"}})):(e.appendText(rQ.labelUpToDate()),e.createEl("br"),e.createEl("a",{text:rQ.labelReadChangelog(),attr:{href:"https://obsidian.md/changelog",target:"_blank",rel:"noopener"}})),e.createEl("br"),a&&(e.appendText(rQ.labelCheckingForUpdates()),e.createEl("br")),e.lastChild.detach()}))),"update-downloaded"===r?f.addButton((function(e){return e.setCta().setButtonText(rQ.buttonRelaunch()).onClick((function(){Ot((function(e){e.ipcRenderer.sendSync("relaunch")}))}))})):s&&f.addButton((function(e){return e.setCta().setButtonText(rQ.buttonCheckForUpdates()).onClick((function(){Ot((function(e){e.ipcRenderer.sendSync("check-update",!0),S.display()}))}))})),s&&new YI(e).setName(rQ.optionAutoUpdate()).setDesc(rQ.optionAutoUpdateDescription()).addToggle((function(e){return e.setValue(!o).onChange((function(e){Ot((function(t){t.ipcRenderer.sendSync("disable-update",!e),setTimeout((function(){return S.display()}),500)}))}))})),p.license&&Lt.isDesktopApp&&(g=!1,Ot((function(e){g=e.ipcRenderer.sendSync("insider-build",null)})),new YI(e).setName(rQ.optionInsiderBuild()).setDesc(rQ.optionInsiderBuildDescription()).addToggle((function(e){return e.setValue(g).onChange((function(e){Ot((function(t){t.ipcRenderer.sendSync("insider-build",e)}))}))}))),[3,3]):[3,1];case 1:return SD?[4,DD.getInfo()]:[3,3];case 2:m=y.sent(),new YI(e).setName(rQ.labelCurrentVersion()+m.version+" (".concat(m.build,")")).setDesc("API v"+G0),y.label=3;case 3:return v=localStorage.getItem(_d)||jd,b=v,new YI(e).setName(rQ.optionLanguage()).setDesc(createFragment((function(e){e.appendText(rQ.optionLanguageDescription()),e.createEl("br"),e.createEl("a",{text:rQ.labelAddOwnLanguage(),attr:{href:"https://help.obsidian.md/Translations",target:"_blank",rel:"noopener"}})}))).addButton((function(e){w=e,e.setCta().setButtonText(rQ.buttonRelaunch()).onClick((function(){b===jd?localStorage.removeItem(_d):localStorage.setItem(_d,b),window.location.reload()})),e.buttonEl.hide()})).addDropdown((function(e){e.onChange((function(e){b=e,w.buttonEl.toggle(v!==b)}));for(var t=0,n=Kd;t<n.length;t++){var i=n[t];e.addOption(i,Gd[i])}e.setValue(v)})),new YI(e).setName(rQ.optionGetHelp()).setDesc(rQ.optionGetHelpDescription()).addButton((function(e){return e.setButtonText(rQ.buttonOpen()).onClick((function(){h.close(),S.app.openHelp()}))})),new YI(e).setName(rf.setting.account.name()).setHeading(),this.accountSetting=new YI(e),this.catalystSetting=new YI(e),this.commercialLicenseSetting=new YI(e),this.updateAccountSettings(),new YI(e).setName(rQ.optionAdvanced()).setHeading(),Lt.isDesktopApp&&l&&new YI(e).setName(rQ.optionHwAcceleration()).setDesc(createFragment((function(e){e.createDiv({text:rQ.optionHwAccelerationDescription()}),e.createDiv({cls:"mod-warning",text:rQ.optionHwAccelerationWarning()})}))).addButton((function(e){k=e,e.setCta().setButtonText(rQ.buttonRelaunch()).onClick((function(){Ot((function(e){e.ipcRenderer.sendSync("relaunch")}))})),e.buttonEl.hide()})).addToggle((function(e){return e.setValue(!c).onChange((function(e){e=!e,Ot((function(t){t.ipcRenderer.sendSync("disable-gpu",e),k.buttonEl.toggle(e!==c)}))}))})),E=localStorage.getItem(this.app.appId+"-config")||"",x=E,new YI(e).setName(rQ.optionConfigLocation()).setDesc(rQ.optionConfigLocationDescription()).addButton((function(e){C=e,e.setCta().setButtonText(rQ.buttonRelaunch()).onClick((function(){localStorage.setItem(S.app.appId+"-config",x),window.location.reload()})),e.buttonEl.hide()})).addText((function(e){e.setPlaceholder(".obsidian").setValue(E).onChange((function(t){!t||Zy.validateConfigDir(t)?(rS(),x=t,C.buttonEl.toggle(t!==E)):iS(e.inputEl,rQ.optionConfigLocationWarning(),{placement:"left",classes:["mod-error"]})}))})),[4,tn(p)];case 4:return y.sent(),[4,nn(p)];case 5:return y.sent(),this.updateAccountSettings(),[2]}}))}))},t.prototype.updateAccountSettings=function(){var e=this,t=this.app.account;if(this.accountSetting.clear(),this.catalystSetting.clear(),this.commercialLicenseSetting.clear(),t.email){if(this.accountSetting.setName(oQ.optionYourAccount()).setDesc(oQ.optionYourAccountDesc({name:t.name,email:t.email})).addButton((function(e){return e.setButtonText(oQ.buttonManageSettings()).onClick((function(){window.open("https://obsidian.md/account")}))})).addButton((function(n){return n.setButtonText(oQ.buttonLogOut()).onClick((function(){return v(e,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,en(t)];case 1:return n.sent(),[4,this.display()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),new CI(e.message),[3,4];case 4:return[2]}}))}))}))})),t.license){var n=t.license,i=oQ("label-".concat(n));this.catalystSetting.setName(rQ.optionCatalyst()).setDesc(rQ.optionCatalystDesc({tier:i})),"vip"!==n&&this.catalystSetting.addButton((function(e){return e.setButtonText(oQ.buttonUpgradeCatalyst()).onClick((function(){window.open("https://obsidian.md/account")}))}))}else this.catalystSetting.setName(rQ.optionCatalyst()).setDesc(createFragment((function(e){e.appendText(rQ.optionCatalystDescNoLicense()),e.createEl("br"),e.createEl("a",{text:rf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/Catalyst+license",target:"_blank",rel:"noopener"}})}))).addButton((function(e){return e.setButtonText(oQ.buttonPurchase()).setCta().onClick((function(){window.open("https://obsidian.md/account")}))}));this.catalystSetting.settingEl.show()}else this.accountSetting.setName(oQ.optionYourAccount()).setDesc(oQ.optionYourAccountDescNoLogin()).addButton((function(t){return t.setButtonText(oQ.labelLogIn()).onClick((function(){var t=new lQ(e.app);t.onClose=e.display.bind(e),t.open()}))})).addButton((function(e){return e.setButtonText(oQ.labelSignUp()).onClick((function(){window.open("https://obsidian.md/account#mode=signup")}))})),this.catalystSetting.settingEl.hide();if(t.key){var r=t.key,o=t.keyValidation,a=this.commercialLicenseSetting,s=rQ.labelYourCommercialLicenseKey({key:r});"valid"===o&&(s+=" "+rQ.labelCommercialLicenseInfo({company:t.company,seats:t.seats,expiry:window.moment(t.expiry).format("MMMM D, YYYY")})),a.setName(rQ.labelCommercialLicense()).setDesc(s),"valid"===o?a.addButton((function(n){return n.setButtonText(rQ.buttonRemoveCommercialLicense()).onClick((function(){t.setKey(null),e.display()}))})):o?(a.descEl.createEl("p",{text:rQ.labelInvalidCommercialLicense()+"".concat(o)}),a.addButton((function(t){return t.setButtonText(rQ.buttonActivate()).setCta().onClick((function(){var t=new cQ(e.app);t.onClose=e.display.bind(e),t.open()}))}))):a.descEl.createEl("p",{text:rQ.labelValidatingCommercialLicense()})}else this.commercialLicenseSetting.setName(oQ.optionCommercialLicense()).setDesc(createFragment((function(e){e.appendText(oQ.optionCommercialLicenseDesc()),e.createEl("br"),e.createEl("a",{text:rf.interface.buttonLearnMore(),attr:{href:"https://help.obsidian.md/Commercial+license",target:"_blank",rel:"noopener"}})}))).addButton((function(t){return t.setButtonText(rQ.buttonActivate()).setCta().onClick((function(){var t=new cQ(e.app);t.onClose=e.display.bind(e),t.open()}))})).addButton((function(e){return e.setButtonText(oQ.buttonPurchase()).onClick((function(){window.open("https://obsidian.md/account")}))}))},t}(_j),lQ=function(e){function t(t){var n=e.call(this,t)||this,i=n,r=i.modalEl,o=i.contentEl;return n.loadingEl=gj(r),n.loadingEl.hide(),n.titleEl.setText(oQ.labelLogIn()),o.createDiv("message-container",(function(e){n.errorEl=e.createDiv("message mod-error"),n.errorEl.hide()})),n.emailSectionEl=o.createEl("p","login-field",(function(e){e.createEl("label",{cls:"input-label",text:oQ.labelEmail()}),n.emailEl=e.createEl("input",{type:"email"},(function(e){e.setAttribute("placeholder",oQ.placeholderEmail()),e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),n.passwordSectionEl=o.createEl("p","login-field",(function(e){e.createEl("label",{cls:"input-label",text:oQ.labelPassword()}),n.passwordEl=e.createEl("input",{type:"password"},(function(e){e.setAttribute("placeholder",oQ.placeholderPassword()),e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),n.mfaSectionEl=o.createEl("p","login-field",(function(e){e.createEl("label",{cls:"input-label",text:oQ.labelMfaCode()}),n.mfaEl=e.createEl("input",{type:"text"},(function(e){e.setAttribute("maxlength","6"),e.inputMode="numeric",e.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||n.login()}))}))})),o.createDiv("button-container u-center-text",(function(e){e.createEl("button",{cls:"mod-cta",text:oQ.buttonLogin()},(function(e){e.addEventListener("click",n.login.bind(n))}))})),n.mfaSectionEl.hide(),n}return f(t,e),t.prototype.showError=function(e){var t=this.errorEl;t.setText(oQ.messageEmptyEmail()),t.show()},t.prototype.login=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c;return y(this,(function(u){switch(u.label){case 0:if(t=(e=this).emailEl,n=e.passwordEl,i=e.mfaEl,(r=e.errorEl).hide(),o=t.value,a=n.value,s=i.value,""===o)return this.showError(oQ.messageEmptyEmail()),[2];if(-1===o.indexOf("@"))return this.showError(oQ.messageInvalidEmail()),[2];if(""===a)return this.showError(oQ.messageEmptyPassword()),[2];if(""!==s&&!/^\d{6}$/.test(s))return this.showError(oQ.mfaWrongFormat()),[2];this.loadingEl.show(),this.contentEl.hide(),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Jt(this.app.account,o,a,s)];case 2:return u.sent(),this.close(),[3,4];case 3:return(l=u.sent())instanceof Zt?(c=l.error).contains("2FA code is incorrect")?(r.setText(oQ.mfaVerificationFailed()),r.show()):c.contains("2FA code")?(this.emailSectionEl.hide(),this.passwordSectionEl.hide(),this.mfaSectionEl.show()):(r.setText(c),r.show()):(r.setText(oQ.messageLoginFailed()),r.show()),this.loadingEl.hide(),this.contentEl.show(),[3,4];case 4:return[2]}}))}))},t}(LI),cQ=function(e){function t(t){var n=e.call(this,t)||this;return n.setTitle(rQ.labelActivateLicense()),n.contentEl.createDiv("message-container",(function(e){n.errorEl=e.createDiv("message mod-error"),n.errorEl.hide(),e.createEl("p",{},(function(e){e.createEl("label",{cls:"input-label",text:rQ.labelLicenseKey()}),n.licenseKeyEl=e.createEl("input",{type:"text"},(function(e){e.setAttribute("placeholder",rQ.licenseKeyPlaceholder())}))}))})),n.addButton("mod-cta",rQ.buttonActivate(),(function(){return v(n,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return(e=t.account).key=this.licenseKeyEl.value,[4,nn(e)];case 1:return n.sent(),"valid"===e.keyValidation?this.close():(this.errorEl.setText(e.keyValidation),this.errorEl.show()),[2,!0]}}))}))})).addCancelButton(),n}return f(t,e),t}(PI),uQ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.settingTab=null,o.displayEl=null,o.labelI18nKey=r;var a=o.contentEl;return o.displayEl=a.createEl("p"),new YI(a).setName(n).setDesc(i).addText((function(e){var n=e.inputEl,i=new T$(t,n,(function(e){return!o.getPaths().contains(e.path)})),r=function(){return v(o,void 0,void 0,(function(){var e,t;return y(this,(function(i){switch(i.label){case 0:return(e=he(n.value))?(n.value="",(t=this.getPaths()).push(e),[4,this.setPaths(t)]):[2];case 1:return i.sent(),this.updateDisplay(),[2]}}))}))};i.onSelect(r),n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&r()}))})),a.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:rf.dialogue.buttonDone()},(function(e){e.addEventListener("click",o.close.bind(o))})),o}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.updateDisplay()},t.prototype.onClose=function(){this.settingTab.display()},t.prototype.updateDisplay=function(){var e=this,t=this.getPaths(),n=this.displayEl;n.empty();var i=rf.nouns.folderWithCount({count:t.length});n.setText(rf(this.labelI18nKey,{folders:i}));for(var r=function(t){var i=n.createDiv("sync-exclude-folder"),r=i.createDiv("sync-exclude-folder-remove clickable-icon");gb(r,"lucide-x"),aS(r,rf.plugins.sync.tooltipRemoveExcludedFolder()),r.addEventListener("click",(function(){return v(e,void 0,void 0,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return(e=this.getPaths()).remove(t),[4,this.setPaths(e)];case 1:return n.sent(),this.updateDisplay(),[2]}}))}))})),i.createSpan("clickable-icon",(function(e){return gb(e,"lucide-folder-open")})),i.createDiv({cls:"sync-exclude-folder-name"},(function(e){e.createSpan({text:t})}))},o=0,a=t;o<a.length;o++){r(a[o])}},t}(LI),hQ="indexFile",pQ="siteName",dQ="logo",fQ="noindex",gQ="defaultTheme",mQ="showThemeToggle",vQ="showNavigation",yQ="showGraph",bQ="showOutline",wQ="showSearch",kQ="googleAnalytics",CQ="hideTitle",EQ="readableLineLength",xQ="strictLineBreaks",SQ="showHoverPreview",MQ="showBacklinks",TQ="slidingWindowMode",DQ="navigationOrdering",AQ="navigationHiddenItems",LQ=((aQ={})[hQ]="",aQ[dQ]="",aQ[pQ]="",aQ[fQ]=!1,aQ[gQ]="light",aQ[mQ]=!1,aQ[vQ]=!0,aQ[yQ]=!0,aQ[bQ]=!1,aQ[wQ]=!1,aQ[kQ]="",aQ[CQ]=!1,aQ[EQ]=!0,aQ[xQ]=!1,aQ[SQ]=!1,aQ[MQ]=!1,aQ[TQ]=!1,aQ[DQ]=[],aQ[AQ]=[],aQ),PQ=rf.plugins.publish,IQ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.offlineSection=null,i.noAccountSection=null,i.manageSitesSection=null,i.siteOptionsSection=null,i.siteFiltersSection=null,i.reviewChangesSection=null,i.uploadProgressSection=null,i.editSiteSlugSection=null,i.listPasswordSection=null,i.addPasswordSection=null,i.configureCustomDomainSection=null,i.errorMessageEl=null,i.loaderEl=null,i.currentSection=null,i.viewingSites=!1,i.plugin=n,i.modalEl.addClass("mod-publish"),i.setTitleText(PQ.actionPublishChanges()),i.contentEl.createDiv("message-container",(function(e){i.errorMessageEl=e.createDiv("message mod-error"),i.errorMessageEl.hide()})),i.offlineSection=new BQ(i),i.loaderEl=gj(i.contentEl),i.loaderEl.hide(),i.noAccountSection=new NQ(i),i.manageSitesSection=new RQ(i),i.siteOptionsSection=new HQ(i),i.siteFiltersSection=new VQ(i),i.reviewChangesSection=new jQ(i),i.uploadProgressSection=new GQ(i),i.editSiteSlugSection=new KQ(i),i.listPasswordSection=new YQ(i),i.addPasswordSection=new XQ(i),i.configureCustomDomainSection=new $Q(i),i}return f(t,e),t.prototype.handleError=function(e){console.error(e),this.loaderEl.hide(),e instanceof rJ?"AUTHFAIL"===e.code?(this.openSection(this.manageSitesSection),this.showError(PQ.msgNoPermissionToPublishToSite())):"NET"===e.code?this.showError(PQ.msgNetworkError()+e.message):this.showError(e.message):this.showError(PQ.msgSomethingWentWrong())},t.prototype.showError=function(e){this.errorMessageEl.setText(e),this.errorMessageEl.show()},t.prototype.hideError=function(){this.errorMessageEl.hide()},t.prototype.onOpen=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:if(e=this.app.account,this.closeSection(),this.loaderEl.show(),e.token)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,tn(e)];case 2:return t.sent(),[3,4];case 3:return"Not logged in"===t.sent().message?[2,this.openSection(this.noAccountSection)]:[2,this.openSection(this.offlineSection)];case 4:return this.plugin.siteId?this.viewingSites?(this.setViewingSites(!1),[2,this.openSection(this.manageSitesSection)]):[2,this.openReviewChanges()]:[2,this.openSection(this.manageSitesSection)]}}))}))},t.prototype.setViewingSites=function(e){this.viewingSites=e},t.prototype.getCurrentSlug=function(){return v(this,void 0,Promise,(function(){var e;return y(this,(function(t){switch(t.label){case 0:e=this.plugin.siteId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.plugin.apiGetSlugs([e])];case 2:return[2,t.sent()[e]];case 3:return t.sent(),[2,e];case 4:return[2]}}))}))},t.prototype.onClose=function(){},t.prototype.deleteSite=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,cn(this.app.account.token,e)];case 1:return t.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:t.sent(),t.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return t.sent(),[2]}}))}))},t.prototype.deleteSiteShare=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,hn(this.app.account.token,e,t)];case 1:return n.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:n.sent(),n.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return n.sent(),[2]}}))}))},t.prototype.acceptSiteShare=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,(i=this.app.account.token,r=t,Qt("/publish/share/accept",{token:i,code:r}))];case 1:return n.sent(),this.plugin.siteId!==e?[3,3]:[4,this.plugin.setup(null,null)];case 2:n.sent(),n.label=3;case 3:return[4,this.openSection(this.manageSitesSection)];case 4:return n.sent(),[2]}var i,r}))}))},t.prototype.openReviewChanges=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.reviewChangesSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.openManageSites=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.manageSitesSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.editSlug=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.editSiteSlugSection.setSiteInfo(e),this.editSiteSlugSection.setExistingSlug(t),[4,this.openSection(this.editSiteSlugSection)];case 1:return n.sent(),[2]}}))}))},t.prototype.uploadChanges=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return this.uploadProgressSection.addChanges(e),this.openSection(this.uploadProgressSection),[2]}))}))},t.prototype.showPasswords=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:e=this.listPasswordSection,i.label=1;case 1:return i.trys.push([1,4,,5]),this.currentSection.hide(),this.loaderEl.show(),[4,this.plugin.apiGetPassword()];case 2:return t=i.sent().pass,e.setPasswords(t),e.updateDisplay(),[4,this.openSection(e)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),this.handleError(n),[2];case 5:return[2]}}))}))},t.prototype.openAddPassword=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openSection(this.addPasswordSection)];case 1:return e.sent(),[2]}}))}))},t.prototype.setTitleText=function(e){this.titleEl.setText(e)},t.prototype.closeSection=function(){this.errorMessageEl.hide(),this.currentSection&&this.currentSection.hide(),this.currentSection=null},t.prototype.openSection=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.closeSection(),e.title&&this.setTitleText(e.title),this.currentSection=e,this.loaderEl.show(),[4,e.show()];case 1:return t.sent(),this.loaderEl.hide(),[2]}}))}))},t}(LI),OQ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.selectSuggestion=function(e){var t=this.textInputEl;this.setValue(e.path),t.trigger("input"),this.close()},t.prototype.getSuggestions=function(t){var n=e.prototype.getSuggestions.call(this,t);return n=n.filter((function(e){return pM.contains(e.extension)}))},t}(W$),FQ=function(){function e(e){this.title=null,this.el=null,this.parentModal=null,this.parentModal=e,this.el=e.contentEl.createDiv(),this.hide()}return e.prototype.show=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return this.el.show(),[2]}))}))},e.prototype.hide=function(){this.el.hide()},e}(),BQ=function(e){function t(t){var n=e.call(this,t)||this;return n.el.createEl("p",{text:PQ.labelNoInternetAccess()}),n}return f(t,e),t}(FQ),NQ=function(e){function t(t){var n=e.call(this,t)||this;return n.el.createEl("p",{text:PQ.labelPublishServiceDescription()}),n.el.createEl("p",{text:PQ.labelPleaseLogin()}),n.el.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:rf.setting.account.linkSignUpNow(),onclick:function(){return window.open("http://obsidian.md/account","_blank")}}),e.createEl("button",{text:rf.setting.account.buttonLogin(),onclick:function(){var e=n.parentModal.app;n.parentModal.close();var t=new lQ(e);t.onClose=n.parentModal.open.bind(n.parentModal),t.open()}})})),n}return f(t,e),t}(FQ),RQ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=PQ.labelManageSites(),n.slugInputEl=null,n}return f(t,e),t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M,T,D=this;return y(this,(function(A){switch(A.label){case 0:n=(t=this).parentModal,i=t.el,r=n.plugin,o=n.app,a=o.account,i.empty(),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,(L=a.token,Qt("/publish/list",{token:L}))];case 2:return s=A.sent(),[3,4];case 3:return l=A.sent(),n.handleError(l),[2];case 4:c=s.sites,u=s.shared,h=s.limit,new YI(i).setName(PQ.labelYourSites()).setHeading(),p=i.createDiv("site-list-container"),d=c.map((function(e){return e.id})).concat(u.map((function(e){return e.id}))),f={},A.label=5;case 5:return A.trys.push([5,7,,8]),[4,r.apiGetSlugs(d)];case 6:return f=A.sent(),[3,8];case 7:return g=A.sent(),console.error(g),[3,8];case 8:if(0===c.length&&0!==h)p.createDiv("site-empty-state u-center-text",(function(e){e.createEl("p",{text:PQ.labelNoSites()})}));else for(m=function(e){p.createDiv("site-list-item list-item",(function(t){var i=f[e.id]||e.id;t.createDiv({cls:"list-item-part mod-extended",text:i}),t.createEl("button",{text:PQ.buttonChoose()},(function(t){t.addEventListener("click",(function(){return v(D,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.setup(e.id,e.host)];case 1:return t.sent(),[4,n.openReviewChanges()];case 2:return t.sent(),[2]}}))}))}))})),t.createDiv({cls:"clickable-icon"},(function(t){gb(t,"lucide-edit-3"),aS(t,PQ.tooltipEditSiteId()),t.addEventListener("click",(function(){n.editSlug(e,f[e.id]||"")}))})),t.createDiv("clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,PQ.tooltipDeleteSite()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{text:PQ.labelDeleteSiteConfirmation()}),t.createEl("p",{cls:"setting-message mod-warning",text:PQ.labelDeleteSiteDetails()}),new PI(o).setTitle(PQ.labelConfirmDeleteSite({site:i})).setContent(t).addButton("mod-warning",rf.dialogue.buttonDelete(),(function(){n.deleteSite(e.id)})).addCancelButton().open()}))}))}))},b=0,w=c;b<w.length;b++)k=w[b],m(k);if(c.length<h?(new YI(i).setName(PQ.optionSiteId()).setDesc(PQ.optionSiteIdDescription()).addText((function(e){e.setPlaceholder(PQ.optionSiteIdPlaceholder()),e.inputEl.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||D.createSite()})),D.slugInputEl=e.inputEl})).setClass("site-list-site-id-setting"),i.createDiv("u-center-text",(function(e){e.createEl("button",{text:PQ.buttonCreate(),cls:"mod-cta"},(function(e){e.addEventListener("click",D.createSite.bind(D))}))}))):0===h?p.createDiv("list-item",(function(e){e.createDiv({cls:"list-item-part mod-extended u-muted",text:PQ.labelNoSitesBought()}),e.createEl("button",{cls:"list-item-part mod-cta",text:PQ.buttonGetSite()},(function(e){e.addEventListener("click",(function(){window.open("https://obsidian.md/account","_blank")}))}))})):(C=rf.nouns.siteWithCount({count:h}),p.createDiv("list-item",(function(e){e.createDiv({cls:"list-item-part mod-extended u-muted",text:PQ.labelSiteUsage({site:c.length.toString(),limit:C})}),e.createEl("button",{cls:"list-item-part mod-cta",text:PQ.buttonAddMoreSites()},(function(e){e.addEventListener("click",(function(){window.open("https://obsidian.md/account","_blank")}))}))}))),u.length>0)for(new YI(i).setName(PQ.labelSitesSharedWithYou()).setHeading(),E=i.createDiv("site-list-container"),x=function(e){E.createDiv("site-list-item list-item",(function(t){var i=e.id,a=f[i]||i;t.createDiv({cls:"list-item-part mod-extended",text:a}),t.createEl("button",{text:PQ.buttonChoose()},(function(t){t.addEventListener("click",(function(){return v(D,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,r.setup(i,e.host)];case 1:return t.sent(),[4,n.openReviewChanges()];case 2:return t.sent(),[2]}}))}))}))})),t.createDiv("clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,PQ.tooltipLeaveSiteSharing()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{cls:"setting-message mod-warning",text:PQ.labelLeaveSiteConfirmationDetails()}),t.createEl("p",{text:PQ.labelLeaveSiteConfirmationDetails_2()}),new PI(o).setTitle(PQ.labelLeaveSiteConfirmation({site:a})).setContent(t).addButton("mod-warning",PQ.buttonLeave(),(function(){n.deleteSiteShare(i,e.share_uid)})).addCancelButton().open()}))}))}))},S=0,M=u;S<M.length;S++)T=M[S],x(T);return e.prototype.show.call(this),[2]}var L}))}))},t.prototype.createSite=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l;return y(this,(function(c){switch(c.label){case 0:if(t=(e=this).parentModal,n=e.slugInputEl,i=t.app.account,r=t.plugin,t.hideError(),o=n.value.toLowerCase(),!/^[a-z0-9\-]+$/.test(o))return t.showError(PQ.msgInvalidSiteId()),[2];c.label=1;case 1:return c.trys.push([1,3,,13]),[4,r.apiCheckSlug(o)];case 2:return c.sent(),t.showError(PQ.msgSiteIdInUse()),[3,13];case 3:if(!((a=c.sent())instanceof rJ&&"NOTFOUND"===a.code))return[3,11];c.label=4;case 4:return c.trys.push([4,9,,10]),[4,(u=i.token,Qt("/publish/create",{token:u}))];case 5:return s=c.sent(),[4,r.apiSetSlug(s.id,s.host,o)];case 6:return c.sent(),[4,r.setup(s.id,s.host)];case 7:return c.sent(),[4,t.openReviewChanges()];case 8:return c.sent(),[3,10];case 9:return l=c.sent(),t.handleError(l),[3,10];case 10:return[3,12];case 11:t.handleError(a),c.label=12;case 12:return[3,13];case 13:return[2]}var u}))}))},t}(FQ),HQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=PQ.labelSiteOptions(),t}return f(t,e),t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(p){switch(p.label){case 0:n=(t=this).el,i=t.parentModal,r=i.plugin,o=i.app,n.empty(),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,r.apiOptions()];case 2:return a=p.sent(),[3,4];case 3:return s=p.sent(),i.handleError(s),n.createDiv("modal-button-container",(function(e){e.createEl("button",{text:PQ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return v(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),[2];case 4:return l={},c=function(e){return a.hasOwnProperty(e)?a[e]:LQ[e]},u=n.createDiv("publish-site-settings-container"),new YI(u).setName(PQ.optionSiteGeneral()).setHeading(),new YI(u).setName(PQ.optionSiteName()).setDesc(PQ.optionSiteNameDescription()).addText((function(e){return e.setPlaceholder(PQ.optionSiteNamePlaceholder()).setValue(c(pQ)).onChange((function(e){return l[pQ]=e}))})),new YI(u).setName(PQ.optionHomePageFile()).setDesc(PQ.optionHomePageFileDescription()).addText((function(e){e.setPlaceholder(PQ.optionHomePageFilePlaceholder()).setValue(c(hQ)).onChange((function(e){return l[hQ]=e})),new _$(o,e.inputEl)})),new YI(u).setName(PQ.optionLogo()).setDesc(PQ.optionLogoDescription()).addText((function(e){e.setPlaceholder(PQ.optionLogoPlaceholder()).setValue(c(dQ)).onChange((function(e){return l[dQ]=e})),new OQ(o,e.inputEl)})),new YI(u).setName(PQ.optionSiteCollaboration()).setDesc(PQ.optionSiteCollaborationDesc()).addButton((function(e){return e.setButtonText(PQ.buttonManageCollaborators()).onClick((function(){return v(h,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=i.plugin.siteId,[4,i.getCurrentSlug()];case 1:return t=n.sent(),new ZQ(o,t,e).open(),[2]}}))}))}))})),new YI(u).setName(PQ.optionCustomDomain()).setDesc(PQ.optionCustomDomainDesc()).addButton((function(e){return e.setButtonText(PQ.buttonConfigure()).onClick((function(){return v(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openSection(i.configureCustomDomainSection)];case 1:return e.sent(),[2]}}))}))}))})),new YI(u).setName(PQ.optionNoindex()).setDesc(PQ.optionNoindexDesc()).addToggle((function(e){return e.setValue(c(fQ)).onChange((function(e){return l[fQ]=e}))})),new YI(u).setName(PQ.optionSiteAppearance()).setHeading(),new YI(u).setName(PQ.optionTheme()).setDesc(PQ.optionThemeDescription()).addDropdown((function(e){return e.addOption("light",rf.setting.appearance.lightTheme()).addOption("dark",rf.setting.appearance.darkTheme()).addOption("system",PQ.optionThemeSystem()).setValue(c(gQ)).onChange((function(e){return l[gQ]=e}))})),new YI(u).setName(PQ.optionShowThemeToggle()).setDesc(PQ.optionShowThemeToggleDescription()).addToggle((function(e){return e.setValue(c(mQ)).onChange((function(e){return l[mQ]=e}))})),new YI(u).setName(PQ.optionSiteReadingExperience()).setHeading(),new YI(u).setName(PQ.optionHoverPreviewFile()).setDesc(PQ.optionHoverPreviewFileDescription()).addToggle((function(e){return e.setValue(c(SQ)).onChange((function(e){return l[SQ]=e}))})),new YI(u).setName(PQ.optionHideTitle()).setDesc(PQ.optionHideTitleDescription()).addToggle((function(e){return e.setValue(c(CQ)).onChange((function(e){return l[CQ]=e}))})),new YI(u).setName(PQ.optionReadableLineLength()).setDesc(PQ.optionReadableLineLengthDescription()).addToggle((function(e){return e.setValue(c(EQ)).onChange((function(e){return l[EQ]=e}))})),new YI(u).setName(rf.setting.editor.optionStrictLineBreak()).setDesc(rf.setting.editor.optionStrictLineBreakDescription()).addToggle((function(e){return e.setValue(c(xQ)).onChange((function(e){return l[xQ]=e}))})),new YI(u).setName(PQ.optionSlidingWindowMode()).setDesc(PQ.optionSlidingWindowModeDescription()).addToggle((function(e){return e.setValue(c(TQ)).onChange((function(e){return l[TQ]=e}))})),new YI(u).setName(PQ.optionSiteComponents()).setHeading(),new YI(u).setName(PQ.optionShowNavigation()).setDesc(PQ.optionShowNavigationDescription()).addToggle((function(e){return e.setValue(c(vQ)).onChange((function(e){l[vQ]=e}))})),new YI(u).setName(PQ.optionCustomizeNavigation()).setDesc(PQ.optionCustomizeNavigationDesc()).addButton((function(e){return e.setButtonText(PQ.buttonCustomizeSidebar()).onClick((function(){return v(h,void 0,void 0,(function(){var e,t,n,a,s,u,h,p;return y(this,(function(d){switch(d.label){case 0:e=[],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.apiList()];case 2:for(t=d.sent(),n=0,a=t.files;n<a.length;n++)s=a[n],e.push(s.path);return[3,4];case 3:return u=d.sent(),i.handleError(u),[3,4];case 4:return h=c(DQ),p=c(AQ),new JZ(o,r,e,h,p).onOrderChange((function(e){l[DQ]=e})).onVisibilityChange((function(e){l[AQ]=e})).open(),[2]}}))}))}))})),new YI(u).setName(PQ.optionShowSearch()).setDesc(PQ.optionShowSearchDescription()).addToggle((function(e){return e.setValue(c(wQ)).onChange((function(e){return l[wQ]=e}))})),new YI(u).setName(PQ.optionShowGraph()).setDesc(PQ.optionShowGraphDescription()).addToggle((function(e){return e.setValue(c(yQ)).onChange((function(e){return l[yQ]=e}))})),new YI(u).setName(PQ.optionShowOutline()).setDesc(PQ.optionShowOutlineDescription()).addToggle((function(e){return e.setValue(c(bQ)).onChange((function(e){return l[bQ]=e}))})),new YI(u).setName(PQ.optionShowBacklinks()).setDesc(PQ.optionShowBacklinksDescription()).addToggle((function(e){return e.setValue(c(MQ)).onChange((function(e){return l[MQ]=e}))})),new YI(u).setName(PQ.optionSiteMisc()).setHeading(),new YI(u).setName(PQ.optionSitePassword()).setDesc(PQ.optionSitePasswordDescription()).addButton((function(e){return e.setButtonText(PQ.buttonManagePasswords()).onClick((function(){return v(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.showPasswords()];case 1:return e.sent(),[2]}}))}))}))})),new YI(u).setName(PQ.optionGoogleAnalytics()).setDesc(PQ.optionGoogleAnalyticsDescription()).addText((function(e){return e.setPlaceholder("UA-XXXXX-Y or G-XXXXXXXX").setValue(c(kQ)).onChange((function(e){return l[kQ]=e})).inputEl.style.width="200px"})),n.createDiv("modal-button-container",(function(e){e.createEl("button",{text:PQ.buttonSaveSiteSettings(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return v(h,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.apiOptions(l)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),i.handleError(e),[2];case 3:return new CI(PQ.msgUpdatedOptions()),[4,i.openReviewChanges()];case 4:return t.sent(),[2]}}))}))}))})),e.createEl("button",{text:PQ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return v(h,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),e.prototype.show.call(this),[2]}}))}))},t}(FQ),VQ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=PQ.labelSiteOptions(),t}return f(t,e),t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s=this;return y(this,(function(l){return n=(t=this).el,i=t.parentModal,r=i.plugin,o=i.app,n.empty(),a=n.createDiv("publish-site-settings-container"),new YI(a).setName(PQ.optionIncludedFolders()).setDesc(createFragment((function(e){var t=s.parentModal.plugin.includes;if(e.appendText(PQ.optionIncludedFoldersDesc()),t.length>0){e.appendText(rf.plugins.publish.optionCurrentlyIncludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(rf.interface.buttonManage()).onClick((function(){new eJ(o,r,s).open()}))})),new YI(a).setName(PQ.optionExcludedFolders()).setDesc(createFragment((function(e){var t=s.parentModal.plugin.excludes;if(e.appendText(PQ.optionExcludedFoldersDesc()),t.length>0){e.appendText(rf.plugins.sync.optionCurrentlyExcludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(rf.interface.buttonManage()).onClick((function(){new tJ(o,r,s).open()}))})),n.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:rf.dialogue.buttonDone()},(function(e){e.addEventListener("click",(function(){return v(s,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.openReviewChanges()];case 1:return e.sent(),[2]}}))}))}))}))})),e.prototype.show.call(this),[2]}))}))},t}(FQ),zQ=function(e){function t(t){var n=e.call(this)||this;return n.visible=!0,n.section=t,n.innerEl.addClass("file-tree-item"),n}return f(t,e),t.prototype.setChecked=function(e){},t.prototype.setVisible=function(e){this.visible=e,this.el.toggle(e)},t.prototype.applyQuery=function(e){},t.prototype.updateCheckedRecursive=function(){for(var e=this.parent;e;)e.updateChecked(),e=e.parent;this.section.updateChecked()},t}(vO),qQ=function(e,t){var n=e instanceof WQ,i=t instanceof WQ;if(n||i){if(n&&!i)return-1;if(i&&!n)return 1}return JL(e.name,t.name)},UQ=function(e){function t(t,n){var i=e.call(this,t)||this;i.diff=n,i.path=n.path;var r=ie(n.path),o=le(r);"md"===o&&(r=ae(r)),i.name=r;var a=i,s=a.selfEl,l=a.innerEl;return s.addClass("mod-file","mod-".concat(n.type)),(i.checkboxEl=l.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),gb(l.createDiv("file-tree-item-icon"),"lucide-file"),l.createDiv({cls:"file-tree-item-title",text:r}),i.updateChecked(),l.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:"to-delete"===n.type?"To delete":n.type}),"changed"!==n.type||"md"!==o&&"css"!==o&&"js"!==o||l.createDiv("clickable-icon",(function(e){gb(e,"lucide-columns"),aS(e,PQ.labelCompareWithLive())})).addEventListener("click",(function(e){return v(i,void 0,void 0,(function(){return y(this,(function(t){return e.preventDefault(),new QQ(this.section.publish.app,this.section.publish,this.path).open(),[2]}))}))})),s.addEventListener("contextmenu",i.onContextMenu.bind(i)),i}return f(t,e),t.prototype.onSelfClick=function(e){this.setChecked(!this.diff.checked),this.updateCheckedRecursive()},t.prototype.setChecked=function(e){this.diff.checked!==e&&(this.diff.checked=e,this.updateChecked())},t.prototype.updateChecked=function(){var e=this.diff.checked;this.checkboxEl.checked=e,this.selfEl.toggleClass("is-selected",e)},t.prototype.applyQuery=function(e){this.setVisible(this.diff.checked||this.path.toLowerCase().contains(e))},t.prototype.render=function(){e.prototype.render.call(this),this.setCollapsible(!1),this.setClickable(!0)},t.prototype.onContextMenu=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s=this;return y(this,(function(l){switch(l.label){case 0:return e.preventDefault(),t=new fw,n=this.diff,i=n.type,r=n.path,o=this.section.publish.app,[4,this.section.publish.modal.getCurrentSlug()];case 1:return a=l.sent(),"changed"!==i&&"deleted"!==i&&"to-delete"!==i||t.addItem((function(e){return e.setIcon("lucide-globe").setTitle("Open in live site").onClick((function(){window.open(iJ+"/"+a+"/"+fe(r).split("/").map($Z).join("/"))}))})),"changed"!==i&&"new"!==i&&"to-delete"!==i||t.addItem((function(e){return e.setIcon("lucide-folder-open").setTitle(PQ.labelOpenFile()).onClick((function(){var e=o.workspace.getLeaf(),t=o.vault.getAbstractFileByPath(r);t&&t instanceof Xy&&(e.openFile(t,{active:!0}),s.section.publish.modal.close())}))})),"changed"===i&&t.addItem((function(e){return e.setIcon("lucide-columns").setTitle(PQ.labelCompareWithLive()).onClick((function(){new QQ(o,s.section.publish,s.path).open()}))})),"changed"!==i&&"deleted"!==i||t.addItem((function(e){return e.setIcon("lucide-pencil").setTitle(PQ.buttonUseLiveVersion()).onClick((function(){return v(s,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(a){switch(a.label){case 0:return[4,this.section.publish.apiDownloadFile(r)];case 1:return e=a.sent(),(t=o.vault.getAbstractFileByPath(r))&&t instanceof Xy?(new JQ(o,t,this.section.publish.modal,e).open(),[3,9]):[3,2];case 2:return n=re(r),(i=n)?[4,o.vault.exists(n)]:[3,4];case 3:i=!a.sent(),a.label=4;case 4:return i?[4,o.vault.createFolder(n)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[4,o.vault.create(r,e)];case 7:return a.sent(),new CI(PQ.messageSuccessfullyUsedLiveVersion()),[4,this.section.publish.modal.reviewChangesSection.show()];case 8:a.sent(),a.label=9;case 9:return[2]}}))}))}))})),t.showAtMouseEvent(e),[2]}}))}))},t}(zQ),WQ=function(e){function t(t,n){var i=e.call(this,t)||this;i.children=[],i.path=n,i.name=ie(n);var r=i.innerEl;return i.selfEl.addClass("mod-folder"),(i.checkboxEl=r.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),gb(r.createDiv("file-tree-item-icon"),"lucide-folder-open"),r.createDiv({cls:"file-tree-item-title",text:i.name}),i}return f(t,e),t.prototype.getChecked=function(){for(var e=0,n=0,i=0,r=this.children;i<r.length;i++){var o=r[i];if(o instanceof UQ)e++,o.diff.checked&&n++;else if(o instanceof t){var a=o.getChecked();e+=a.count,n+=a.checked}}return{count:e,checked:n}},t.prototype.onSelfClick=function(e){var t=this.getChecked(),n=t.count,i=t.checked;if(0!==n){for(var r=i<n,o=0,a=this.children;o<a.length;o++){a[o].setChecked(r)}this.updateChecked(),this.updateCheckedRecursive()}},t.prototype.setChecked=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].setChecked(e)}this.updateChecked()},t.prototype.updateChecked=function(){var e=this.getChecked(),t=e.count,n=e.checked,i=this.checkboxEl,r=t>0&&n===t;i.checked=r,i.indeterminate=!r&&n>0,this.selfEl.toggleClass("is-selected",r)},t.prototype.applyQuery=function(e){for(var t=!1,n=0,i=this.children;n<i.length;n++){var r=i[n];r.applyQuery(e),t=t||r.visible}this.setVisible(t)},t.prototype.render=function(){this.children.sort(qQ),e.prototype.render.call(this),this.setCollapsible(!0),this.setClickable(!0)},t}(zQ),_Q=function(e){function t(t,n,i){var r=e.call(this,n)||this;r.children=[],r.collapsed=!1,r.folders={},r.files={},r.publish=t;var o=n.createDiv("file-tree publish-section"),a=o.createDiv("publish-section-header");return r.childrenEl=o.createDiv("publish-change-list"),r.sectionEl=o,r.headerEl=a,a.createDiv("publish-section-header-toggle-collapsed-button collapse-icon",(function(e){gb(e,"right-triangle"),e.addEventListener("click",(function(){return r.toggleCollapsed(!0)}))})),a.createDiv({cls:"publish-section-header-text",text:i},(function(e){e.addEventListener("click",(function(){return r.toggleCollapsed(!0)}))})),r.selectedEl=a.createDiv("publish-section-header-selected",(function(e){r.selectedCountEl=e.createSpan({cls:"publish-section-header-selected-count",text:"0"}),e.createSpan({text:PQ.labelFileSelected()})})),a.createDiv({cls:"publish-section-header-action button",text:PQ.buttonSelectAllFiles()}).addEventListener("click",r.checkAll.bind(r)),a.createDiv({cls:"publish-section-header-action",text:PQ.buttonDeselectAllFiles()}).addEventListener("click",r.uncheckAll.bind(r)),r}return f(t,e),t.prototype.toggleCollapsed=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.setCollapsed(!this.collapsed,e)];case 1:return t.sent(),[2]}}))}))},t.prototype.setCollapsed=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.collapsed===e?[2]:(this.collapsed=e,XM(this.sectionEl,e),[4,Be(this.childrenEl,e,t)]);case 1:return n.sent(),[2]}}))}))},t.prototype.collapseAll=function(){for(var e=this.children.slice();e.length>0;){var t=e.pop();t.children&&(t.toggleCollapsed(!1),e.push.apply(e,t.children))}},t.prototype.checkAll=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].setChecked(!0)}this.updateChecked()},t.prototype.uncheckAll=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].setChecked(!1)}this.updateChecked()},t.prototype.updateChecked=function(){var e=this,t=e.files,n=e.selectedEl,i=e.selectedCountEl,r=0,o=0;for(var a in t)t.hasOwnProperty(a)&&(t[a].diff.checked&&r++,o++);i.setText(String(r)+"/"+String(o)),n.toggleClass("u-pop",r>0)},t.prototype.addChild=function(e){var t=re(e.path);if(t){var n=this.folders,i=n[t];i||(i=n[t]=new WQ(this,t),this.addChild(i)),i.children.push(e),e.parent=i}else this.addRoot(e)},t.prototype.createItem=function(e){var t=new UQ(this,e);this.files[e.path]=t,this.addChild(t)},t.prototype.render=function(){this.children.sort(qQ),e.prototype.render.call(this),this.updateChecked()},t.prototype.applyQuery=function(e){for(var t=0,n=this.children;t<n.length;t++){n[t].applyQuery(e)}},t.prototype.clear=function(){e.prototype.clear.call(this),this.folders={},this.files={},this.updateChecked()},t}(yO),jQ=function(e){function t(t){var n=e.call(this,t)||this;n.title=PQ.actionPublishChanges(),n.siteOptionsEl=null,n.siteFiltersEl=null,n.noChangesEl=null,n.pathToDiffMap={},n.currentlyPublishedToSiteNameEl=null,n.filterComponent=null,n.app=t.app,n.el.createDiv({cls:"publish-changes-info"},(function(e){e.createDiv({cls:"publish-changes-info-publishing-to",text:PQ.labelPublishingTo()}),(n.currentlyPublishedToSiteNameEl=e.createEl("a","publish-changes-current-site-name")).setAttribute("target","_blank"),e.createDiv("publish-changes-switch-site",(function(e){e.createSpan("clickable-icon",(function(e){gb(e,"lucide-repeat"),aS(e,PQ.tooltipSwitchSite()),e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,(e=this.parentModal).openSection(e.manageSitesSection)];case 1:return t.sent(),[2]}}))}))}))})),n.siteOptionsEl=e.createSpan("clickable-icon",(function(e){gb(e,"lucide-settings"),aS(e,PQ.tooltipOpenSiteOptions()),e.addEventListener("click",(function(){var e=n.parentModal;e.openSection(e.siteOptionsSection)}))})),n.siteFiltersEl=e.createSpan("clickable-icon",(function(e){gb(e,"lucide-filter"),aS(e,PQ.tooltipManagePublishFilters()),e.addEventListener("click",(function(){var e=n.parentModal;e.openSection(e.siteFiltersSection)}))})),e.createSpan("clickable-icon",(function(e){gb(e,"lucide-life-buoy"),aS(e,PQ.tooltipContactSupport()),e.addEventListener("click",(function(){window.open("mailto:support@obsidian.md?subject=Obsidian%20Publish%20Support")}))}))})),n.filterComponent=new nO(e).setPlaceholder(rf.setting.hotkeys.promptFilter()),e.createEl("button",{cls:"publish-changes-add-linked-btn",text:PQ.buttonAddLinked()},(function(e){aS(e,PQ.tooltipAddLinked()),e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p;return y(this,(function(d){for(u in e=this.app.metadataCache,n=(t=this).pathToDiffMap,i=t.sectionNew,r=[],n)n.hasOwnProperty(u)&&(h=n[u]).checked&&"deleted"!==h.type&&r.push(u);for(o=new Set,a=function(t){Nx(e.getCache(t),(function(n){var i=e.getFirstLinkpathDest(n.link,t);i&&o.add(i.path)}))},s=0,l=r;s<l.length;s++)u=l[s],a(u);for(u in c=0,n)n.hasOwnProperty(u)&&o.has(u)&&((h=n[u]).checked||"new"!==h.type||(p=i.files[u])&&(p.setChecked(!0),p.updateCheckedRecursive(),c+=1));return new CI(PQ.msgAddedLinkedFiles({count:c})),[2]}))}))}))}))})),n.noChangesEl=n.el.createEl("p",{text:PQ.labelNoChangesDetected()});var i=n.el.createDiv("publish-sections-container");n.sectionChanged=new _Q(t.plugin,i,PQ.labelChangedFilesToBePublished()),n.sectionUnchanged=new _Q(t.plugin,i,PQ.labelUnchangedFilesAlreadyPublished()),n.sectionNew=new _Q(t.plugin,i,PQ.labelNewFilesToBePublished());var r=n.el.createDiv("modal-button-container");return r.createEl("button",{cls:"mod-cta",text:PQ.buttonPublish()},(function(e){e.addEventListener("click",n.uploadChanges.bind(n))})),r.createEl("button",{text:rf.dialogue.buttonCancel()},(function(e){e.addEventListener("click",n.parentModal.close.bind(n.parentModal))})),n}return f(t,e),t.prototype.setCurrentSiteName=function(e){this.currentlyPublishedToSiteNameEl.setText(e),this.currentlyPublishedToSiteNameEl.setAttribute("href",iJ+"/"+e)},t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f=this;return y(this,(function(g){switch(g.label){case 0:t=this.parentModal,this.pathToDiffMap={},t.getCurrentSlug().then((function(e){return f.setCurrentSiteName(e)})),n=[],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t.plugin.scanForChanges()];case 2:return n=g.sent(),this.noChangesEl.toggle(0===n.length),[3,4];case 3:return i=g.sent(),t.handleError(i),[2];case 4:for(this.siteOptionsEl.toggle(!this.parentModal.plugin.isGuest),o=(r=this).sectionChanged,a=r.sectionUnchanged,s=r.sectionNew,o.clear(),a.clear(),s.clear(),l=0,c=n;l<c.length;l++)u=c[l],this.pathToDiffMap[u.path]=u,"changed"===(h=u.type)||"deleted"===h?o.createItem(u):"new"===h?s.createItem(u):"to-delete"===h&&a.createItem(u);if(this.filterComponent.onChange((function(e){e=e.trim().toLowerCase(),o.applyQuery(e),a.applyQuery(e),s.applyQuery(e)})),o.children.length>0){for(d in a.setCollapsed(!0,!1),s.setCollapsed(!0,!1),o.files)o.files.hasOwnProperty(d)&&"deleted"!==(p=o.files[d]).diff.type&&p.setChecked(!0);for(d in o.folders)o.folders.hasOwnProperty(d)&&o.folders[d].updateChecked()}else o.setCollapsed(!0,!1),a.setCollapsed(!0,!1);return o.render(),a.collapseAll(),a.render(),s.collapseAll(),s.render(),[2,e.prototype.show.call(this)]}}))}))},t.prototype.uploadChanges=function(){return v(this,void 0,void 0,(function(){var e,t,n,i;return y(this,(function(r){switch(r.label){case 0:for(n in e=this.pathToDiffMap,t=[],e)e.hasOwnProperty(n)&&(i=e[n]).checked&&t.push(i);return 0===t.length?(new CI(PQ.msgSelectAtLeastOneFile()),[2]):[4,this.parentModal.uploadChanges(t)];case 1:return r.sent(),[2]}}))}))},t}(FQ),GQ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=PQ.labelUploadChanges(),n.changesContainer=null,n.doneButton=null,n.successMessageEl=null,n.siteLinkEl=null,n.runnable=null,n.changes=[],n.pathToEl={},n.changesContainer=n.el.createDiv("list-item-parent upload-progress-container"),n.successMessageEl=n.el.createDiv({},(function(e){e.createEl("p",{text:PQ.labelClearCache()}),e.createEl("p",{text:PQ.labelVisitSite()},(function(e){return v(n,void 0,void 0,(function(){return y(this,(function(t){return this.siteLinkEl=e.createEl("a"),this.siteLinkEl.setAttribute("target","_blank"),[2]}))}))}))})),n.successMessageEl.hide(),n.el.createDiv("modal-button-container",(function(e){n.doneButton=e.createEl("button",{cls:"mod-cta",text:PQ.buttonDone()},(function(e){e.addEventListener("click",(function(){n.runnable?(n.runnable.cancel(),n.runnable=null):n.parentModal.close()}))})),e.createEl("button",{text:PQ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){n.runnable&&n.runnable.cancel(),n.parentModal.openReviewChanges()}))}))})),n}return f(t,e),t.prototype.addChanges=function(e){this.changes=e},t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return this.runnable&&this.runnable.cancel(),[4,e.prototype.show.call(this)];case 1:for(a.sent(),this.successMessageEl.hide(),this.changesContainer.removeClass("is-finished"),this.doneButton.addClass("mod-warning"),this.doneButton.setText(PQ.buttonStop()),this.changesContainer.empty(),this.pathToEl={},t=function(e){n.pathToEl[e.path]=n.changesContainer.createDiv("publish-upload-item list-item",(function(t){t.createDiv("list-item-part",(function(e){gb(e,"lucide-file")})),t.createDiv({cls:"list-item-part mod-extended publish-upload-item-title",text:se(e.path)}),t.createDiv("list-item-part",(function(t){var n=t.createSpan("flair");"new"===e.type||"changed"===e.type?n.setText(PQ.labelStatusToPublish()):"deleted"===e.type&&n.setText(PQ.labelStatusToDelete())}))}))},n=this,i=0,r=this.changes;i<r.length;i++)o=r[i],t(o);return this.startUpload(),[2]}}))}))},t.prototype.startUpload=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h=this;return y(this,(function(p){switch(p.label){case 0:e=this.parentModal,t=e.app,n=e.plugin,(i=this.runnable=new zD({onStop:function(){return v(h,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return this.doneButton.removeClass("mod-warning"),this.doneButton.setText(PQ.buttonDone()),t=iJ+"/",[4,this.parentModal.getCurrentSlug()];case 1:return e=t+n.sent(),this.siteLinkEl.setText(e),this.siteLinkEl.setAttribute("href",e),this.successMessageEl.show(),this.changesContainer.addClass("is-finished"),this.runnable===i&&(this.runnable=null),[2]}}))}))}})).start(),r=0,o=this.changes,p.label=1;case 1:if(!(r<o.length))return[3,10];if(a=o[r],s=this.pathToEl[a.path],l=s.find(".flair"),i.isCancelled())return l.setText(PQ.labelStatusCancelled()),s.addClass("mod-failed","mod-completed"),[3,9];p.label=2;case 2:return p.trys.push([2,7,,8]),l.setText(PQ.labelStatusUploading()),"deleted"!==a.type&&"to-delete"!==a.type?[3,4]:[4,n.apiRemoveFile(a.path)];case 3:return p.sent(),l.setText(PQ.labelStatusDeleted()),[3,6];case 4:return(c=t.vault.getAbstractFileByPath(a.path))&&c instanceof Xy?[4,n.apiUploadFile(c)]:[3,6];case 5:p.sent(),l.setText(PQ.labelStatusPublished()),p.label=6;case 6:return s.scrollIntoView({behavior:"smooth",block:"center"}),[3,8];case 7:return u=p.sent(),this.parentModal.handleError(u),l.setText(PQ.labelStatusFailed()),s.addClass("mod-failed"),[3,8];case 8:s.addClass("mod-completed"),p.label=9;case 9:return r++,[3,1];case 10:return i.stop(),[2]}}))}))},t}(FQ),KQ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=PQ.tooltipEditSiteId(),n.newSlug=null,n.site=null,n.slugInputEl=null,new YI(n.el).setName(PQ.optionSiteId()).setDesc(PQ.optionSiteIdDescription()).addText((function(e){e.setPlaceholder(PQ.optionSiteIdPlaceholder()).onChange((function(e){return n.newSlug=e.toLowerCase()})),n.slugInputEl=e.inputEl})).setClass("site-list-site-id-setting"),n.el.createEl("p","modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:PQ.buttonChange()},(function(e){return v(n,void 0,void 0,(function(){var n=this;return y(this,(function(i){return e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){var e,n;return y(this,(function(i){switch(i.label){case 0:e=t.plugin,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.apiSetSlug(this.site.id,this.site.host,this.newSlug)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),t.handleError(n),[2];case 4:return[4,t.openSection(t.siteOptionsSection)];case 5:return i.sent(),[2]}}))}))})),[2]}))}))})),e.createEl("button",{text:rf.dialogue.buttonCancel()},(function(e){return v(n,void 0,void 0,(function(){var n=this;return y(this,(function(i){return e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,t.openSection(t.manageSitesSection)];case 1:return e.sent(),[2]}}))}))})),[2]}))}))}))})),n}return f(t,e),t.prototype.setSiteInfo=function(e){this.site=e},t.prototype.setExistingSlug=function(e){this.slugInputEl.value=e},t}(FQ),YQ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=PQ.labelManagePasswords(),n.passwords=null,n.updateDisplay(),n}return f(t,e),t.prototype.setPasswords=function(e){this.passwords=e},t.prototype.updateDisplay=function(){var e=this,t=this.el;if(t.empty(),null===this.passwords)t.createEl("p",{cls:"u-muted",text:PQ.labelNoPassword()});else{var n=0;t.createEl("p",{cls:"u-muted",text:PQ.labelHavePassword()}),t.createEl("hr");for(var i=t.createDiv("passwords-container"),r=function(t){i.createDiv("list-item password-item",(function(i){i.createDiv({cls:"list-item-part",text:t.name||PQ.labelUntitledPassword()}),i.createDiv({cls:"u-muted u-small list-item-part mod-extended",text:PQ.labelPasswordCreatedTime({time:window.moment(t.ts).fromNow()})}),i.createDiv("list-item-part clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,rf.dialogue.buttonDelete());var i=n;t.addEventListener("click",(function(){return v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.parentModal.plugin.apiDelPassword(i)];case 1:return e.sent(),[4,this.parentModal.showPasswords()];case 2:return e.sent(),[2]}}))}))})),n+=1}))}))},o=0,a=this.passwords;o<a.length;o++){r(a[o])}}t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:PQ.actionNewPassword()},(function(t){t.addEventListener("click",(function(){e.parentModal.openAddPassword()}))})),t.createEl("button",{text:PQ.buttonGoBack()},(function(t){t.addEventListener("click",(function(){var t=e.parentModal;t.openSection(t.siteOptionsSection)}))}))}))},t}(FQ),XQ=function(e){function t(t){var n=e.call(this,t)||this;return n.title=PQ.labelAddPassword(),n.passwordFieldEl=null,n.nicknameFieldEl=null,new YI(n.el).setName(PQ.optionPasswordName()).setDesc(PQ.optionPasswordDesc()).addText((function(e){return e.setPlaceholder(PQ.optionPasswordPlaceholder()).then((function(e){e.inputEl.setAttribute("type","password"),n.passwordFieldEl=e.inputEl}))})),new YI(n.el).setName(PQ.optionNicknameName()).setDesc(PQ.optionNicknameDesc()).addText((function(e){return n.nicknameFieldEl=e.inputEl})),n.el.createDiv("modal-button-container",(function(e){e.createEl("button",{text:PQ.actionAddPassword(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=this.passwordFieldEl.value,t=this.nicknameFieldEl.value,[4,this.parentModal.plugin.apiAddPassword(t,e)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),this.parentModal.handleError(n),[2];case 3:return new CI(PQ.msgAddedNewPassword()),[4,this.parentModal.showPasswords()];case 4:return i.sent(),[2]}}))}))}))})),e.createEl("button",{text:PQ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return v(n,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.parentModal.showPasswords()];case 1:return e.sent(),[2]}}))}))}))}))})),n}return f(t,e),t.prototype.show=function(){return v(this,void 0,void 0,(function(){return y(this,(function(t){return this.passwordFieldEl.value="",this.nicknameFieldEl.value="",e.prototype.show.call(this),[2]}))}))},t}(FQ),$Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=PQ.labelConfigureCustomDomain(),t}return f(t,e),t.prototype.show=function(){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return(t=this.el).empty(),[4,e.prototype.show.call(this)];case 1:return s.sent(),[4,this.parentModal.plugin.apiCustomUrl()];case 2:return n=s.sent(),new YI(t).setName(PQ.optionCustomUrlName()).setDesc(PQ.optionCustomUrlDesc()).addText((function(e){return i=e.setPlaceholder(PQ.optionCustomUrlPlaceholder()).setValue(n.url||"")})),new YI(t).setName(PQ.optionCustomUrlRedirect()).setDesc(PQ.optionCustomUrlRedirectDesc()).addToggle((function(e){return r=e.setValue(n.redirect)})),o=PQ.labelCustomDomainInstructions({link:'<a href="https://help.obsidian.md/Obsidian+Publish/Set+up+a+custom+domain" target="_blank">'.concat(PQ.labelCustomDomainLinkName(),"</a>")}),this.el.createEl("p",{cls:"u-muted"},(function(e){e.innerHTML=o})),this.el.createDiv("modal-button-container",(function(e){e.createEl("button",{text:PQ.buttonUpdateCustomDomain(),cls:"mod-cta"},(function(e){e.addEventListener("click",(function(){return v(a,void 0,void 0,(function(){var e,t,n,o;return y(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=i.getValue(),t=r.getValue(),[4,this.parentModal.plugin.apiCustomUrl(e,t)];case 1:return a.sent(),[3,3];case 2:return n=a.sent(),this.parentModal.handleError(n),[2];case 3:return(o=this.parentModal).openSection(o.siteOptionsSection),[2]}}))}))}))})),e.createEl("button",{text:PQ.buttonGoBack()},(function(e){e.addEventListener("click",(function(){return v(a,void 0,void 0,(function(){var e;return y(this,(function(t){return(e=this.parentModal).openSection(e.siteOptionsSection),[2]}))}))}))}))})),[2]}}))}))},t}(FQ),ZQ=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.shares=[],r.siteId=i,r.setTitle(PQ.labelManageSharing({name:n})),r.addButton("",rf.dialogue.buttonDone(),(function(){return r.close()})),r.display(),r}return f(t,e),t.prototype.display=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:this.contentEl.empty(),e=this.app.account,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,vj(this.containerEl,(function(){return t=e.token,n=c.siteId,Qt("/publish/share/list",{token:t,site_uid:n});var t,n}))];case 2:return t=u.sent(),this.shares=t.shares,[3,4];case 3:return n=u.sent(),new CI(n.message),[2];case 4:if(this.shares.length>0)for(this.contentEl.createEl("p",{cls:"u-muted",text:PQ.labelSharingWithUsers()}),i=this.contentEl.createDiv(),r=function(t){i.createDiv("list-item",(function(n){t.name?(n.createDiv({cls:"list-item-part",text:t.name}),n.createDiv({cls:"list-item-part mod-extended",text:"<".concat(t.email,">")})):n.createDiv({cls:"list-item-part mod-extended",text:t.email}),t.accepted||n.createDiv({cls:"list-item-part"},(function(e){e.createSpan({cls:"u-muted",text:PQ.labelInvitePending()})})),n.createDiv("list-item-part",(function(n){gb(n,"lucide-x"),aS(n,PQ.tooltipRemoveUser()),n.addEventListener("click",(function(){return v(c,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,vj(this.containerEl,(function(){return hn(e.token,i.siteId,t.uid)}))];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),new CI(n.message),[3,3];case 3:return[4,this.display()];case 4:return r.sent(),[2]}}))}))}))}))}))},o=0,a=this.shares;o<a.length;o++)s=a[o],r(s);else this.contentEl.createEl("p",{cls:"u-muted",text:PQ.labelNotSharing()});return l=null,new YI(this.contentEl).setName(PQ.optionInviteUser()).addText((function(e){return e.setPlaceholder(PQ.placeholderInviteUser()).then((function(e){l=e,e.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"===t.key&&c.inviteToSite(e.getValue())}))}))})).addButton((function(e){return e.setButtonText(rf.interface.buttonAdd()).setCta().onClick((function(){c.inviteToSite(l.getValue())}))})),[2]}}))}))},t.prototype.inviteToSite=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return""!==(e=e.trim())&&e.includes("@")?[4,un(this.app.account.token,this.siteId,e)]:(new CI(PQ.errorEmailMustBeValid()),[2]);case 1:return t.sent(),this.display(),[2]}}))}))},t}(PI),QQ=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.path=i,r.publish=n,r}return f(t,e),t.prototype.onOpen=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return t=(e=this).app,n=e.path,i=e.publish,r=t.vault.getAbstractFileByPath(n),o="",r&&r instanceof Xy?[4,t.vault.cachedRead(r)]:[3,2];case 1:o=l.sent(),l.label=2;case 2:return[4,this.publish.apiDownloadFile(n)];case 3:return a=l.sent(),s=new PI(t),this.setTitle(PQ.labelCompareWithLive()),this.contentEl.appendChild(ZO(a,o)),r instanceof Xy&&this.addButton("",PQ.buttonUseLiveVersion(),(function(){new JQ(t,r,i.modal,a).open()})),this.addButton("mod-cta",PQ.buttonDone(),(function(){return s.close()})),[2]}}))}))},t}(PI),JQ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.setTitle(PQ.labelConfirmOverride()),o.contentEl.createEl("p",{text:PQ.labelConfirmOverride_1()}),o.contentEl.createEl("p",{text:PQ.labelConfirmOverride_2()}),o.addButton("mod-warning",PQ.buttonProceed(),(function(){return v(o,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return n&&n instanceof Xy?[4,t.vault.modify(n,r)]:[3,3];case 1:return e.sent(),new CI(PQ.messageSuccessfullyUsedLiveVersion()),[4,i.reviewChangesSection.show()];case 2:e.sent(),this.close(),e.label=3;case 3:return[2]}}))}))})),o.addButton("",rf.dialogue.buttonCancel(),(function(){return o.close()})),o}return f(t,e),t}(PI),eJ=function(e){function t(t,n,i){var r=e.call(this,t,PQ.labelAddIncludedFolder(),PQ.labelAddIncludedFolderDesc(),"plugins.publish.label-number-of-folders-included")||this;return r.publish=null,r.section=null,r.publish=n,r.section=i,r.titleEl.setText(PQ.labelManageIncludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.section.show()},t.prototype.getPaths=function(){return this.publish.includes},t.prototype.setPaths=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.publish.setIncludes(e)];case 1:return t.sent(),[2]}}))}))},t}(uQ),tJ=function(e){function t(t,n,i){var r=e.call(this,t,rf.plugins.sync.labelAddExcludedFolder(),rf.plugins.sync.labelAddExcludedFolderDesc(),"plugins.publish.label-number-of-folders-excluded")||this;return r.publish=null,r.section=null,r.publish=n,r.section=i,r.titleEl.setText(rf.plugins.sync.labelManageExcludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.section.show()},t.prototype.getPaths=function(){return this.publish.excludes},t.prototype.setPaths=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.publish.setExcludes(e)];case 1:return t.sent(),[2]}}))}))},t}(uQ),nJ=rf.plugins.publish,iJ="https://publish.obsidian.md";Vt&&(iJ="http://127.0.0.1:3001");var rJ=function(e){function t(n,i){var r=e.call(this,i)||this;return r.name="RequestError",r.code=n,Object.setPrototypeOf(r,t.prototype),r}return f(t,e),t}(Error),oJ=function(){function e(){this.id="publish",this.name=nJ.name(),this.description=nJ.desc(),this.app=null,this.vault=null,this.plugin=null,this.siteId=null,this.host=null,this.isGuest=null,this.includes=[],this.excludes=[],this.modal=null,this.requestSaveData=rt(this.saveData.bind(this),2e3)}return e.prototype.init=function(e,t){this.app=e,this.vault=e.vault,this.plugin=t,t.registerRibbonItem(nJ.actionPublishChanges(),"lucide-send",this.openPublishChanges.bind(this)),t.registerGlobalCommand({id:"publish:view-changes",name:nJ.actionPublishChanges(),icon:"lucide-send",callback:this.openPublishChanges.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.loadData()];case 1:return e.sent(),[2]}}))}))},e.prototype.onDisable=function(e,t){this.modal=null},e.prototype.loadData=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,this.plugin.loadData()];case 1:if(!(e=t.sent()))return[2];try{this.siteId=e.siteId,this.host=e.host,this.includes=e.included||[],this.excludes=e.excluded||[]}catch(e){console.error(e)}return[2]}}))}))},e.prototype.saveData=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugin.saveData({siteId:this.siteId,host:this.host,included:this.includes,excluded:this.excludes})];case 1:return e.sent(),[2]}}))}))},e.prototype.setup=function(e,t){return v(this,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return this.siteId=e,this.host=t,[4,this.saveData()];case 1:return n.sent(),[2]}}))}))},e.prototype.setIncludes=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.includes=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.setExcludes=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return this.excludes=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.getHost=function(){var e=this.host||"127.0.0.1:3002";return e.startsWith("127.0.0.1")||e.startsWith("localhost")?"http://"+e:"https://"+e},e.prototype.scanForChanges=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g;return y(this,(function(m){switch(m.label){case 0:return e=this.vault,t=[],[4,this.apiList()];case 1:n=m.sent(),this.isGuest=!n.owner,i={},r=0,o=n.files,m.label=2;case 2:return r<o.length?(a=o[r],s=a.path,i[s]=a,(l=e.getAbstractFileByPath(s))&&l instanceof Xy?!1===(g=this.getPublishFlag(l))?[3,4]:[4,this.getHash(l)]:[3,4]):[3,6];case 3:return m.sent()!==a.hash?t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"changed",checked:!0===g}):t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"to-delete",checked:!1}),[3,5];case 4:t.push({path:s,ctime:a.ctime,mtime:a.mtime,size:a.size,type:"deleted",checked:!1}),m.label=5;case 5:return r++,[3,2];case 6:for(c=e.getRoot(),u=[c];u.length;)if((h=u.pop())instanceof $y)for(p=0,d=h.children;p<d.length;p++)f=d[p],u.push(f);else if(h instanceof Xy&&(wM(h.extension)||"obsidian.css"===h.name||"publish.css"===h.name||"favicon.ico"===h.name||"publish.js"===h.name)&&!i.hasOwnProperty(h.path)){if(!1===(g=this.getPublishFlag(h)))continue;t.push({path:h.path,ctime:0,mtime:0,size:0,type:"new",checked:!0===g})}return[2,t]}}))}))},e.prototype.apiRequest=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ajaxPromise(e)];case 1:return t=r.sent(),[3,3];case 2:if((n=r.sent())instanceof XMLHttpRequest)throw new rJ("NET","Network unavailable.");if(n instanceof Error)throw new rJ("NET",n.message);throw new rJ("NET","Unknown");case 3:if((i=JSON.parse(t)).code&&i.message)throw new rJ(i.code,i.message);return[2,i]}}))}))},e.prototype.apiPostFrontend=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return t.token=this.app.account.token,[2,this.apiRequest({method:"POST",url:iJ+"/"+e,data:t})]}))}))},e.prototype.apiPostBackend=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return t.id=this.siteId,t.token=this.app.account.token,[2,this.apiRequest({method:"POST",url:this.getHost()+"/"+e,data:t})]}))}))},e.prototype.apiSetSlug=function(e,t,n){return v(this,void 0,Promise,(function(){return y(this,(function(i){return[2,this.apiPostFrontend("api/slug",{id:e,host:t,slug:n})]}))}))},e.prototype.apiGetSlugs=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostFrontend("api/slugs",{ids:e})]}))}))},e.prototype.apiCheckSlug=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostFrontend("api/site",{slug:e})]}))}))},e.prototype.apiCustomUrl=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return[2,this.apiPostFrontend("api/customurl",{id:this.siteId,host:this.host,url:e,redirect:t})]}))}))},e.prototype.apiList=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2,this.apiPostBackend("api/list",{version:2})]}))}))},e.prototype.apiOptions=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/options",{options:e})]}))}))},e.prototype.apiGetPassword=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){return[2,this.apiPostBackend("api/password",{})]}))}))},e.prototype.apiAddPassword=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){return[2,this.apiPostBackend("api/password",{name:e,pw:t})]}))}))},e.prototype.apiDelPassword=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/password",{del:e})]}))}))},e.prototype.apiRemoveFile=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){return[2,this.apiPostBackend("api/remove",{path:e})]}))}))},e.prototype.apiUploadFile=function(e){return v(this,void 0,Promise,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(e.stat.size>52428800)throw new rJ("TOOLARGE","Failed to upload file over limit of 50mb.");return[4,this.getHash(e)];case 1:return t=r.sent(),[4,this.vault.readBinary(e)];case 2:return n=r.sent(),i={"obs-token":this.app.account.token,"obs-id":this.siteId,"obs-path":encodeURIComponent(e.path),"obs-hash":t},[2,this.apiRequest({method:"POST",url:this.getHost()+"/api/upload",headers:i,data:n})]}}))}))},e.prototype.apiDownloadFile=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t={id:this.siteId,token:this.app.account.token,path:e},[4,ajaxPromise({method:"POST",url:this.getHost()+"/api/download",data:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.getHash=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){return(t=this.getHashFromMetadataCache(e))?[2,t]:[2,this.computeHash(e)]}))}))},e.prototype.getPublishFlag=function(e){var t=this.app.metadataCache.getFileCache(e);if(!t)return null;var n=px(t.frontmatter,"publish");if(null!=n){if(String.isString(n)){if("false"===(n=n.toLowerCase())||"no"===n)return!1;if("true"===n||"yes"===n)return!0}return!!n}for(var i=0,r=this.excludes;i<r.length;i++){var o=r[i];if(e.path.startsWith(o+"/"))return!1}for(var a=0,s=this.includes;a<s.length;a++){o=s[a];if(e.path.startsWith(o+"/"))return!0}return null},e.prototype.getHashFromMetadataCache=function(e){var t=this.app.metadataCache.getFileInfo(e.path);return t&&t.mtime===e.stat.mtime&&t.size===e.stat.size?t.hash:null},e.prototype.computeHash=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.vault.readBinary(e)];case 1:return[4,W(t.sent())];case 2:return[2,t.sent()]}}))}))},e.prototype.viewSites=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.modal||(this.modal=new IQ(this.app,this)),this.modal.setViewingSites(!0),[4,this.modal.open()];case 1:return e.sent(),[2]}}))}))},e.prototype.openPublishChanges=function(){this.modal||(this.modal=new IQ(this.app,this)),this.modal.open()},e}(),aJ=rf.plugins.quickSwitcher,sJ=function(){function e(){this.id="switcher",this.name=aJ.name(),this.description=aJ.desc(),this.defaultOn=!0,this.options={},this.QuickSwitcherModal=lJ}return e.prototype.init=function(e,t){this.app=e,t.registerRibbonItem(aJ.actionOpen(),"lucide-file-search",this.onOpen.bind(this)),t.registerGlobalCommand({id:"switcher:open",name:aJ.actionOpen(),icon:"lucide-navigation",callback:this.onOpen.bind(this),hotkeys:[KT(["Mod"],"O")]})},e.prototype.onEnable=function(e,t){return v(this,void 0,Promise,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return t.addSettingTab(new cJ(e,t,this)),n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{showExistingOnly:!1,showAttachments:!0,showAllFileTypes:!1},[2]}}))}))},e.prototype.onOpen=function(){new lJ(this.app,this.options).open()},e}(),lJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.emptyStateText=aJ.labelNoNoteCreateNew(),i.shouldShowNonFileBookmarks=!0,i.allowCreateNewFile=!0,i.shouldShowUnresolved=!n.showExistingOnly,i.shouldShowNonImageAttachments=n.showAttachments,i.shouldShowImages=n.showAttachments,i.shouldShowAllTypes=n.showAllFileTypes,i.setPlaceholder(aJ.promptTypeFileName()),i.setInstructions([{command:"↑↓",purpose:aJ.instructionNavigate()},{command:"↵",purpose:aJ.instructionOpen()},{command:ye?"⌘ ↵":"ctrl ↵",purpose:aJ.instructionOpenInNewTab()},{command:ye?"⌘ ⌥ ↵":"ctrl alt ↵",purpose:aJ.instructionOpenToTheRight()},{command:"shift ↵",purpose:aJ.instructionCreate()},{command:"esc",purpose:aJ.instructionDismiss()}]);var r=i.scope;return r.register(["Shift"],"Enter",(function(e){return i.selectSuggestion(null,e),!1})),r.register(["Mod","Shift"],"Enter",(function(e){return i.selectSuggestion(null,e),!1})),r.register(null,"Enter",(function(e){return i.chooser.useSelectedItem(e),!1})),i}return f(t,e),t.prototype.onChooseSuggestion=function(e,t){var n,i=hw.isModEvent(t),r="",o=this.app.workspace.getActiveViewOfType(EI);if(o&&(r=(null===(n=o.file)||void 0===n?void 0:n.path)||""),e){if("file"===e.type||"alias"===e.type){this.app.workspace.getLeaf(i).openFile(e.file,{active:!0})}else if("unresolved"===e.type){this.app.workspace.getLeaf(i).openLinkText(e.linktext,r,{active:!0})}else if("bookmark"===e.type){var a=this.app.internalPlugins.getEnabledPluginById("bookmarks");null==a||a.openBookmark(e.item,i)}}else this.app.workspace.openLinkText(this.inputEl.value,r,i,{active:!0})},t}(fY),cJ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(aJ.optionShowExistingOnly()).setDesc(aJ.optionShowExistingOnlyDescription()).addToggle((function(t){return t.setValue(n.showExistingOnly).onChange((function(t){n.showExistingOnly=t,e.plugin.saveData(n)}))})),new YI(t).setName(aJ.optionShowAttachments()).setDesc(aJ.optionShowAttachmentsDesc()).addToggle((function(t){return t.setValue(n.showAttachments).onChange((function(t){n.showAttachments=t,e.plugin.saveData(n)}))})),this.app.vault.getConfig("showUnsupportedFiles")&&new YI(t).setName(aJ.optionShowAllFileTypes()).setDesc(aJ.optionShowAllFileTypesDesc()).addToggle((function(t){return t.setValue(n.showAllFileTypes).onChange((function(t){n.showAllFileTypes=t,e.plugin.saveData(n)}))}))},t}(IG),uJ=function(){function e(){this.id="random-note",this.name=rf.plugins.randomNote.name(),this.description=rf.plugins.randomNote.desc(),this.app=null,this.pluginInstance=null}return e.prototype.init=function(e,t){this.app=e,this.pluginInstance=t,t.registerRibbonItem(rf.plugins.randomNote.actionOpen(),"dice",this.onRandomNote.bind(this)),t.registerGlobalCommand({id:"random-note",name:rf.plugins.randomNote.actionOpen(),icon:"dice-glyph",callback:this.onRandomNote.bind(this)})},e.prototype.onRandomNote=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:for(e=[],t=0,n=this.app.vault.getAllLoadedFiles();t<n.length;t++)(i=n[t])instanceof Xy&&"md"===i.extension&&e.push(i);return r=e[Math.floor(Math.random()*e.length)],[4,this.app.workspace.getLeaf().openFile(r,{active:!0})];case 1:return o.sent(),[2]}}))}))},e}(),hJ=function(){function e(){this.id="slash-command",this.name=rf.plugins.slashCommand.name(),this.description=rf.plugins.slashCommand.desc(),this.defaultOn=!1}return e.prototype.init=function(e,t){this.suggest=new dJ(e)},e.prototype.onEnable=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(t){return e.workspace.editorSuggest.addSuggest(this.suggest),[2]}))}))},e.prototype.onDisable=function(e,t){e.workspace.editorSuggest.removeSuggest(this.suggest)},e}(),pJ=/(^|\s)\/([^\s\/]*)$/,dJ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.onTrigger=function(e,t,n){if(!n)return null;var i=e.line,r=t.getLine(i).substr(0,e.ch).match(pJ);if(r){var o=r.index+r[1].length,a=r[2];return{start:{line:i,ch:o},end:{line:i,ch:e.ch},query:a}}return null},t.prototype.selectSuggestion=function(e,t){var n=this.context;(this.close(),n)&&(this.app.lastEvent=t,n.editor.replaceRange("",n.start,n.end),rj(e.item))},t.prototype.getSuggestions=function(e){var t=e.query;t=t.toLowerCase();for(var n=this.app.internalPlugins.getPluginById("command-palette").instance.getCommands(),i=$A(t),r=[],o=0,a=n;o<a.length;o++){var s=a[o],l=i(s.name);l&&r.push({match:l,item:s})}return eL(r),r},t.prototype.renderSuggestion=function(e,t){t.addClass("mod-complex");var n=t.createSpan("suggestion-content"),i=t.createSpan("suggestion-aux"),r=n.createDiv("suggestion-title"),o=e.item,a=o.name,s=a.indexOf(": ");if(-1!==s){var l=a.slice(0,s),c=a.slice(s+2);rL(r.createSpan("suggestion-prefix"),l,e.match),rL(r.createSpan(),c,e.match,-(s+2))}else rL(r.createSpan(),a,e.match);var u=this.app,h=u.hotkeyManager.getHotkeys(o.id),p=u.hotkeyManager.getDefaultHotkeys(o.id);if(h)for(var d=0,f=h;d<f.length;d++){var g=f[d];i.createEl("kbd",{cls:"suggestion-hotkey",text:XT(g)})}else if(p)for(var m=0,v=p;m<v.length;m++){g=v[m];i.createEl("kbd",{cls:"suggestion-hotkey",text:XT(g)})}var y=this.app.internalPlugins.getPluginById("command-palette").instance.options.pinned;y&&y.contains(o.id)&&i.createSpan({cls:"suggestion-flair"},(function(e){gb(e,"lucide-pin")}))},t}(uB),fJ=Db("/lib/reveal/reveal.js"),gJ=function(){function e(){this.id="slides",this.name=rf.plugins.slides.name(),this.description=rf.plugins.slides.desc()}return e.prototype.init=function(e,t){var n=this;this.app=e,t.registerGlobalCommand({id:"slides:start",name:rf.plugins.slides.actionStart(),icon:"lucide-monitor",checkCallback:function(e){var t=n.app.workspace.getActiveFile();if(t&&"md"===t.extension)return e||new mJ(n.app).openFile(t),!0}})},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this))},e.prototype.onFileMenu=function(e,t){var n=this;t instanceof Xy&&"md"===t.extension&&e.addItem((function(e){return e.setSection("view").setTitle(rf.plugins.slides.actionStart()).setIcon("lucide-monitor").onClick((function(){return new mJ(n.app).openFile(t)}))}))},e}(),mJ=function(e){function t(t){var n=e.call(this)||this;return n.containerEl=null,n.revealCssEl=null,n.themeCssEl=null,n.deck=null,n.app=t,n.scope=new cw,n.scope.register([],"Escape",n.close.bind(n)),n}return f(t,e),t.prototype.openFile=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w=this;return y(this,(function(y){switch(y.label){case 0:return this.destroy(),this.app.keymap.pushScope(this.scope),[4,this.app.vault.read(e)];case 1:t=y.sent(),y.label=2;case 2:for(y.trys.push([2,6,,7]),this.containerEl&&this.containerEl.detach(),n=fJ.promise,i="moonstone"===this.app.vault.getConfig("theme"),r=this.containerEl=activeDocument.body.createDiv("slides-container"),(o=this.themeCssEl=activeDocument.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),i?o.setAttribute("href","/lib/reveal/white.css"):o.setAttribute("href","/lib/reveal/black.css"),(a=this.revealCssEl=activeDocument.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),a.setAttribute("href","/lib/reveal/reveal.css"),s=r.createDiv("reveal"),l=s.createDiv("slides"),s.createDiv("slides-close-btn",(function(e){gb(e,"lucide-x-square"),e.addEventListener("click",w.close.bind(w))})),c=rx(t),u=cx(c),h={definitions:vx(c)},p=c.children,d=[[]],m=0;m<p.length;m++)"thematicBreak"===(f=p[m]).type?d.push([]):d.last().push(f);for(g=function(e){var t=d[e];if(0===t.length)return"continue";c.children=t;var n=ux(c,h);l.createEl("section",{},(function(e){var t=hM(n);e.appendChild(t)}))},m=0;m<d.length;m++)g(m);return v=[],DP.postProcess(this.app,{docId:$e(16),sourcePath:e.path,frontmatter:u,promises:v,addChild:function(e){return w.addChild(e)},getSectionInfo:function(){return null},containerEl:l,el:l}),v.length>0?[4,Promise.all(v)]:[3,4];case 3:y.sent(),y.label=4;case 4:return[4,n];case 5:return y.sent(),(this.deck=new Reveal(s,{embedded:!0,keyboardCondition:"focused",controlsTutorial:!1,overview:!1})).initialize(),setTimeout((function(){s.dispatchEvent(new PointerEvent("pointerdown"))}),0),[3,7];case 6:return b=y.sent(),console.error(b),this.close(),[3,7];case 7:return[2]}}))}))},t.prototype.close=function(){this.destroy()},t.prototype.destroy=function(){this.app.keymap.popScope(this.scope);var e=this,t=e.deck,n=e.containerEl,i=e.revealCssEl,r=e.themeCssEl;n&&(n.detach(),this.containerEl=null),i&&(i.detach(),this.revealCssEl=null),r&&(r.detach(),this.themeCssEl=null),t&&t.destroy()},t}(nb),vJ=rf.plugins.sync,yJ=rf.plugins.publish,bJ=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.vaults=[],r.sync=i,r}return f(t,e),t.prototype.display=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E=this;return y(this,(function(x){switch(x.label){case 0:if(t=(e=this).app,n=e.sync,i=e.containerEl,r=t.account,i.empty(),o=n.getRemoteVaultId(),a=n.getRemoteVaultName(),!r.token)return this.displayRequireLogin(),[2];if(o)return[3,5];if(s=mj(i),r.token)return[3,4];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,tn(r)];case 2:return x.sent(),[3,4];case 3:return l=x.sent(),s.hide(),"Not logged in"===l.message?(this.displayRequireLogin(),[2]):(i.createEl("p",{text:rf.plugins.publish.msgNetworkError()}),i.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:vJ.buttonRetry()},(function(e){e.addEventListener("click",(function(){E.display()}))}))})),[2]);case 4:s.hide(),x.label=5;case 5:return i.empty(),c="",(u=t.vault.adapter)instanceof Wd?(h=u.getBasePath().toLowerCase()).contains("dropbox")?c="Dropbox":h.contains("icloud~")?c="iCloud":h.contains("onedrive")&&(c="OneDrive"):u instanceof fj&&"ICLOUD"===u.fs.dir&&(c="iCloud"),c?new YI(i).setName(vJ.labelThirdPartySyncWarning()).setDesc(createFragment((function(e){e.createSpan({cls:"mod-warning",text:vJ.labelThirdPartySyncWarningDesc({service:c})}),e.createEl("br"),e.createEl("a",{href:"https://help.obsidian.md/Obsidian+Sync/Obsidian+Sync+and+third-party+services",text:rf.interface.buttonLearnMore(),attr:{target:"_blank"}})}))):Lt.isMacOS&&u instanceof Wd&&(h=u.getBasePath().toLowerCase(),p=window.electron.ipcRenderer.sendSync("documents-dir"),d=window.electron.ipcRenderer.sendSync("desktop-dir"),(h.startsWith(p.toLowerCase())||h.startsWith(d.toLowerCase()))&&new YI(i).setDesc(createFragment((function(e){e.createSpan({text:vJ.labelIcloudDriveWarning()}),e.createEl("br"),e.createEl("a",{href:"https://help.obsidian.md/Obsidian+Sync/Obsidian+Sync+and+third-party+services",text:rf.interface.buttonLearnMore(),attr:{target:"_blank"}})})))),f=new YI(i).setName(vJ.optionRemoteVault()),a?(f.setDesc(vJ.optionRemoteVaultDescConnected({name:a})),f.addButton((function(e){return e.setButtonText(vJ.buttonDisconnectFromRemoteVault()).onClick((function(){return v(E,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.sync.unsetup()];case 1:return e.sent(),[4,this.display()];case 2:return e.sent(),[2]}}))}))}))}))):f.setDesc(vJ.optionRemoteVaultDescNotConnected()),f.addButton((function(e){return e.setButtonText(vJ(o?"button-manage-remote-vault":"button-choose-remote-vault")).onClick((function(){n.openChooseRemoteVaultModal()}))})),o&&(n.getPause()?new YI(i).setName(vJ.optionSyncStatus()).setDesc(vJ.optionSyncStatusDescPaused()).addButton((function(e){return e.setButtonText(vJ.buttonResume()).setCta().onClick((function(){n.setPause(!1),n.requestSync(),E.display()}))})):new YI(i).setName(vJ.optionSyncStatus()).setDesc(vJ.optionSyncStatusDescRunning()).addButton((function(e){return e.setButtonText(vJ.buttonPause()).onClick((function(){n.setPause(!0),E.display()}))})),new YI(i).setName(vJ.optionDeviceName()).setDesc(vJ.optionDeviceNameDesc()).addText((function(e){return e.setPlaceholder(n.getDefaultDeviceName()).setValue(n.deviceName).onChange((function(e){n.deviceName=e,n.forceSaveData()}))})),new YI(i).setName(vJ.optionViewDeletedFiles()).setDesc(vJ.optionViewDeletedFilesDesc()).addButton((function(e){return e.setButtonText(vJ.buttonView()).onClick((function(){return n.showDeletedFiles()}))})).addButton((function(e){return e.setButtonText(vJ.buttonBulkRestore()).onClick((function(){return n.showDeletedFiles(!0)}))})),new YI(i).setName(vJ.optionSyncLog()).setDesc(vJ.optionSyncLogDesc()).addButton((function(e){return e.setButtonText(vJ.buttonView()).onClick((function(){return n.showSyncLog()}))})),m=function(){return v(E,void 0,void 0,(function(){var e,t,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:return[4,n.size()];case 1:return e=s.sent(),t=e.size>e.limit,w.settingEl.toggle(t),b.settingEl.toggle(!t),i=e.size<0?"Unknown":ee(e.size),r=e.limit<0?"Unknown":ee(e.limit),o=vJ.optionOverSizeDesc({size:i,limit:r}),t?w.setDesc(o):(b.setDesc(o),a=Math.max(1,e.size/e.limit*100),g.setValue(a)),[2]}}))}))},b=new YI(i).setName(vJ.optionVaultSize()).addProgressBar((function(e){g=e})),(w=new YI(i).setName(vJ.optionOverSize()).addButton((function(e){return e.setButtonText(vJ.msgLargestFiles()).onClick((function(){new DJ(t,n).open()}))})).addButton((function(e){return e.setWarning().setButtonText(vJ.buttonPurgeRemote()).setTooltip(vJ.tooltipPurgeRemote()).onClick((function(){return v(E,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,n.purge()];case 1:return e.sent(),new CI(vJ.msgPurgeComplete()),[4,m()];case 2:return e.sent(),[2]}}))}))}))}))).settingEl.hide(),m(),Lt.isMobileApp&&new YI(i).setName(vJ.optionPreventSleep()).setDesc(vJ.optionPreventSleepDesc()).addToggle((function(e){return e.setValue(E.sync.preventSleep).onChange((function(e){return E.sync.preventSleep=e}))})),new YI(i).setName(vJ.optionContactSupport()).setDesc(vJ.optionContactSupportDesc()).addButton((function(e){return e.setButtonText(vJ.buttonCopyDebug()).onClick((function(){return v(E,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return t=(e=navigator.clipboard).writeText,[4,this.gatherSyncSystemInfo()];case 1:return[4,t.apply(e,[n.sent()])];case 2:return n.sent(),new CI(rf.interface.copied_generic()),[2]}}))}))}))})).addButton((function(e){return e.setButtonText(vJ.buttonEmailSupport()).onClick((function(){return v(E,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return[4,this.gatherSyncSystemInfo()];case 1:return e=n.sent(),t=encodeURIComponent(e),window.open("mailto:support@obsidian.md?subject=Obsidian%20Sync%20Support&body=".concat(t)),[2]}}))}))}))})),new YI(i).setHeading().setName(vJ.optionSelectiveSync()),new YI(i).setName(vJ.optionExcludedFolders()).setDesc(createFragment((function(e){var t=E.sync.ignoreFolders;if(e.appendText(vJ.optionExcludedFolderDesc()),t.length>0){e.appendText(vJ.optionCurrentlyExcludedFolders());for(var n=e.createEl("ul"),i=0,r=t;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(e){return e.setButtonText(vJ.buttonManageExcludedFolders()).onClick((function(){E.manageExclusions()}))})),(k=function(e,t){var r=null;new YI(i).setName(rf("plugins.sync.option-sync-"+e)).setDesc(rf("plugins.sync.option-sync-"+e+"-desc",t)).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(vJ.tooltipUpdateSettingOnAllDevices()).then((function(e){r=e,e.extraSettingsEl.hide()}))})).addToggle((function(t){return t.setValue(n.allowTypes.has(e)).onChange((function(t){n.setSyncType(e,t),r.extraSettingsEl.show()}))}))})("image",{extensions:pM.join(", ")}),k("audio",{extensions:dM.join(", ")}),k("video",{extensions:fM.join(", ")}),k("pdf"),k("unsupported"),C=function(e){var t=null;new YI(i).setName(rf("plugins.sync.option-sync-"+e)).setDesc(rf("plugins.sync.option-sync-"+e+"-desc")).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(vJ.tooltipUpdateSettingOnAllDevices()).then((function(e){t=e,e.extraSettingsEl.hide()}))})).addToggle((function(i){return i.setValue(n.allowSpecialFiles.has(e)).onChange((function(i){n.setAllowSpecialFile(e,i),t.extraSettingsEl.show()}))}))},new YI(i).setHeading().setName(vJ.optionVaultConfigSync()),new YI(i).setName(vJ.optionViewConfigFiles()).setDesc(vJ.optionViewConfigFilesDesc()).addButton((function(e){return e.setButtonText(vJ.buttonView()).onClick((function(){return n.showConfigFiles()}))})),C("app"),C("appearance"),C("appearance-data"),C("hotkey"),C("core-plugin"),C("core-plugin-data"),C("community-plugin"),C("community-plugin-data")),[2]}}))}))},t.prototype.manageExclusions=function(){new TJ(this.app,this.sync,this).open()},t.prototype.displayRequireLogin=function(){var e=this,t=this.containerEl;t.createEl("p",{text:"Obsidian Sync is Obsidian's add-on sync service with end-to-end encryption and version history."}),t.createEl("p",{text:"To start syncing, please log in or create a new Obsidian account."}),t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:vJ.buttonSignUp()},(function(e){e.addEventListener("click",(function(){window.open("http://obsidian.md/account","_blank")}))})),t.createEl("button",{text:vJ.buttonLogIn()},(function(t){t.addEventListener("click",(function(){var t=new lQ(e.app);t.onClose=e.display.bind(e),t.open()}))}))}))},t.prototype.gatherSyncSystemInfo=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return e=this.sync,[4,qj(this.app)];case 1:return t=o.sent(),n=this.app.vault.adapter,i="",n instanceof Wd?i=n.getBasePath():n instanceof fj&&"ICLOUD"===n.fs.dir&&(i="iCloud"),r=["SYNC INFO:","\tVault ID: ".concat(e.getRemoteVaultId()),"\tHost server: ".concat(e.getHost()),"\tDevice name: ".concat(e.deviceName),"\tAllowed file types: ".concat(Array.from(e.allowTypes).join(", ")),"\tAllowed special types: ".concat(Array.from(e.allowSpecialFiles).join(", ")),"\tIgnored directories:".concat(e.ignoreFolders.map((function(e){return"\n\t\t- "+e})).join(""))],""!==i&&r.push("\tVault path: ".concat(i)),Lt.isMobile&&r.push("\tPrevent sleep: ".concat(e.preventSleep)),r.push("\tSync logs:"),r.push.apply(r,e.syncLog.slice(-20).map((function(e){return"\t\t".concat(e.ts," ").concat(e.error?"Error":"Info "," ").concat(e.info).concat(e.file?" - "+e.file:"")}))),[2,t+=r.join("\n")]}}))}))},t}(IG),wJ=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.plugin=null,r.items=[],r.filepath=null,r.listContainerEl=null,r.listEl=null,r.contentContainerEl=null,r.contentDiffEl=null,r.contentOtherEl=null,r.contentCopyButtonEl=null,r.restoreVersionButtonEl=null,r.activeItemEl=null,r.loadMoreButtonEl=null,r.activeItem=null,r.cache={},r.plugin=n,r.filepath=i,r}return f(t,e),t.prototype.onOpen=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return t=(e=this).modalEl,n=e.contentEl,t.addClass("mod-sync-history","mod-sidebar-layout"),i=this.listContainerEl=n.createDiv("sync-history-list-container"),this.listEl=i.createDiv("modal-sidebar sync-history-list"),this.loadMoreButtonEl=i.createDiv({cls:"sync-history-load-more-button",text:vJ.labelLoadMore()},(function(e){e.addEventListener("click",a.fetchMore.bind(a))})),r=this.contentContainerEl=n.createDiv("sync-history-content-container"),Lt.isMobile&&(r.detach(),r.createDiv({cls:"modal-setting-back-button"},(function(e){e.addEventListener("click",(function(){Ve(a.contentEl,a.listContainerEl,"left")}))})).createSpan("modal-setting-back-button-icon",(function(e){gb(e,"lucide-arrow-left")}))),o=this.contentTextEl=r.createDiv("sync-history-content"),new YI(o).setName(vJ.labelShowDiff()).addToggle((function(e){return a.diffToggle=e.setSmall().setValue(!1)})),this.contentTextareaEl=o.createEl("textarea",{cls:"sync-history-text",attr:{spellcheck:!1}}),this.contentDiffEl=o.createDiv("sync-history-diff"),this.contentOtherEl=r.createDiv("sync-history-content-other"),r.createDiv("modal-button-container u-center-text",(function(e){a.contentCopyButtonEl=e.createEl("button",{cls:"mod-cta",text:rf.interface.labelCopy()},(function(e){e.addEventListener("click",(function(){return v(a,void 0,void 0,(function(){return y(this,(function(e){return at(this.contentTextareaEl.value),new CI(rf.interface.copied({context:"generic"})),[2]}))}))}))})),a.restoreVersionButtonEl=e.createEl("button",{cls:"mod-cta",text:vJ.labelRestoreThisVersion()},(function(e){e.addEventListener("click",(function(){return v(a,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.activeItem===this.items[0]?(new CI(vJ.msgAlreadyLatestVersion()),[2]):(e=this.filepath!==this.activeItem.path?this.filepath:"",[4,this.plugin.restoreVersion(this.activeItem.uid,e)]);case 1:return t.sent(),new CI(vJ.msgRestoredVersion({time:window.moment(this.activeItem.ts).fromNow()})),this.close(),[2]}}))}))}))}))})),[4,this.fetchMore()];case 1:return s.sent(),[2]}}))}))},t.prototype.openHistory=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u=this;return y(this,(function(h){switch(h.label){case 0:return n=(t=this).contentTextEl,i=t.contentContainerEl,r=t.diffToggle,o=t.contentTextareaEl,a=t.contentDiffEl,s=t.contentOtherEl,l=t.contentCopyButtonEl,c=t.restoreVersionButtonEl,o.value="",a.empty(),s.empty(),n.hide(),s.hide(),l.hide(),c.show(),Lt.isMobile&&Ve(this.contentEl,this.contentContainerEl,"right"),e.relatedpath?(s.setText(vJ.labelFileRenamedFrom({filepath:e.relatedpath})),s.show(),c.hide(),[3,4]):[3,1];case 1:return e.deleted?(s.setText(vJ.labelFileDeleted()),s.show(),[3,4]):[3,2];case 2:return n.show(),[4,Ib(i,(function(){return v(u,void 0,void 0,(function(){var t,n,i,c,u,h,p,d=this;return y(this,(function(f){switch(f.label){case 0:return t=le(ie(this.filepath)),mM.contains(t)||yM.contains(t)?(i=V,[4,this.getContentForVersion(e.uid)]):[3,3];case 1:return n=i.apply(void 0,[f.sent()]),o.value=n,l.show(),c=!1,u=function(){return v(d,void 0,void 0,(function(){var t,i,s,l,u;return y(this,(function(h){switch(h.label){case 0:return t=r.getValue(),o.toggle(!t),a.toggle(t),!t||c?[3,3]:(c=!0,i=n,-1!==(s=this.items.indexOf(e))&&s<this.items.length-1?(l=this.items[s+1],u=V,[4,this.getContentForVersion(l.uid)]):[3,2]);case 1:i=u.apply(void 0,[h.sent()]),h.label=2;case 2:a.empty(),a.appendChild(ZO(i,n)),h.label=3;case 3:return[2]}}))}))},r.onChange(u),[4,u()];case 2:return f.sent(),[3,7];case 3:return pM.contains(t)?[4,this.getContentForVersion(e.uid)]:[3,5];case 4:return h=f.sent(),p=URL.createObjectURL(new Blob([h],{type:"image/"+t})),ct(s,p).then((function(){URL.revokeObjectURL(p)})),[3,6];case 5:s.setText("Unable to preview ".concat(t," files")),f.label=6;case 6:s.show(),f.label=7;case 7:return[2]}}))}))}))];case 3:h.sent(),h.label=4;case 4:return[2]}}))}))},t.prototype.getContentForVersion=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return t=this.cache,n=t[e],t.hasOwnProperty(e)?[3,2]:(i=t,r=e,[4,this.plugin.getContentForVersion(e)]);case 1:n=i[r]=o.sent(),o.label=2;case 2:return[2,n]}}))}))},t.prototype.setActiveHistoryItem=function(e,t){this.activeItemEl&&this.activeItemEl.removeClass("is-active"),this.activeItemEl=e,e.addClass("is-active"),this.activeItem=t},t.prototype.fetchMore=function(){var e;return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E=this;return y(this,(function(x){switch(x.label){case 0:return n=(t=this).items,i=t.contentEl,r=t.titleEl,o=t.modalEl,a=t.listEl,s=t.loadMoreButtonEl,l=null,c=this.filepath,u=0===n.length,n.length>0&&(h=n.last(),l=h.uid,c=h.relatedpath||h.path),[4,this.plugin.getHistory(c,l)];case 1:for(p=x.sent(),d=p.items,-1!==(f=p.items.findIndex((function(e){return e.relatedpath&&!e.deleted})))&&f<d.length-1&&(d=d.slice(0,f+1)),g=0,m=d;g<m.length;g++)b=m[g],n.push(b);for(w=function(e){var t=d[e];if(t.folder)return"continue";if(t.deleted&&t.relatedpath)return"continue";var n=a.createDiv({cls:"sync-history-list-item",text:window.moment(t.ts).format("LLLL")}),i=n.createDiv("u-small u-muted");t.relatedpath?i.setText(vJ.labelFileRenamedFrom({filepath:t.relatedpath})):t.deleted?i.setText(vJ.labelFileDeleted()):0===t.size?i.setText(vJ.labelEmptyFile()):i.setText(ee(t.size)),t.device&&i.appendText(" [".concat(t.device,"]")),(t.username||t.email)&&(i.createEl("br"),t.username&&i.appendText(t.username),t.email&&i.appendText(" (".concat(t.email,")"))),n.addEventListener("click",(function(){return v(E,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.openHistory(t)];case 1:return e.sent(),Lt.isMobile||this.setActiveHistoryItem(n,t),this.activeItem=t,[2]}}))}))})),!u||k.activeItemEl||Lt.isMobile||k.setActiveHistoryItem(n,t)},k=this,C=0;C<d.length;C++)w(C);return u?(0===n.length&&(i.empty(),r.setText(vJ.labelVersionHistory()),o.removeClass("mod-sync-history"),i.createEl("p",{cls:"u-center-text",text:vJ.labelNoEarlierVersion()})),Lt.isMobile?[3,3]:[4,this.openHistory(n[0])]):[3,3];case 2:x.sent(),x.label=3;case 3:return p.more||0!==d.length&&(null===(e=n.last())||void 0===e?void 0:e.relatedpath)||s.hide(),[2]}}))}))},t}(LI),kJ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.plugin=null,o.history=[],o.plugin=n,o.title=i,o.history=r,o}return f(t,e),t.prototype.onOpen=function(){var e=this,t=this.titleEl,n=this.contentEl;t.setText(this.title),n.createEl("p",{cls:"u-center-text",text:vJ.labelClickToSeeHistory()});for(var i=n.createDiv("sync-file-tree-container"),r=function(t){if(t.folder)return"continue";i.createDiv("list-item mod-selectable",(function(e){e.createDiv("list-item-part mod-extended",(function(e){e.createDiv({text:fe(t.path)});var n=window.moment(t.ts).fromNow();t.device&&(n="[".concat(t.device,"] ")+n),e.createDiv({cls:"u-muted u-small list-item-part",text:n})}))})).addEventListener("click",(function(){e.plugin.showVersionHistory(t.path)}))},o=0,a=this.history;o<a.length;o++){r(a[o])}},t}(LI),CJ=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o.plugin=null,o.history=[],o.modalEl.addClass("mod-mobile-sheet"),o.plugin=n,o.title=i,o.history=r,o}return f(t,e),t.prototype.onOpen=function(){var e=this,t=this.titleEl,n=this.contentEl;t.setText(this.title);var i=n.createDiv("sync-file-tree-container"),r=[],o=n.createEl("p",{cls:"u-center-text"}).createEl("button",{text:vJ.buttonRestoreSelectedFiles()});o.addEventListener("click",(function(){return v(e,void 0,void 0,(function(){var e,t,n,i,o,a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:e=r.filter((function(e){return e.checkboxEl.checked})).map((function(e){return e.historyItem})),t=new CI(vJ.msgRestoring()+" (0/".concat(e.length,")"),0),n=0,i=0,o=0,a=e,d.label=1;case 1:if(!(o<a.length))return[3,11];s=a[o],d.label=2;case 2:return d.trys.push([2,8,,9]),[4,this.plugin.getHistory(s.path,null)];case 3:l=d.sent(),c=0,u=l.items,d.label=4;case 4:return c<u.length?(h=u[c]).deleted?[3,6]:[4,this.plugin.restoreVersion(h.uid)]:[3,7];case 5:return d.sent(),n++,[3,7];case 6:return c++,[3,4];case 7:return i++,[3,9];case 8:return p=d.sent(),console.error(p),[3,9];case 9:t.setMessage(vJ.msgRestoring()+" (".concat(i,"/").concat(e.length,")")),d.label=10;case 10:return o++,[3,1];case 11:return setTimeout((function(){return t.hide()}),4e3),new CI(vJ.msgRestoringComplete({succeeded:n,failed:e.length-n})),[2]}}))}))}));for(var a=0,s=function(e){if(e.folder)return"continue";var t=i.createDiv("list-item mod-selectable"),n=t.createEl("input",{type:"checkbox"}),s={checkboxEl:n,historyItem:e};t.createDiv({cls:"list-item-part mod-extended"},(function(t){t.createDiv({text:fe(e.path)});var n=window.moment(e.ts).fromNow();e.device&&(n="[".concat(e.device,"] ")+n),t.createDiv({cls:"u-muted u-small list-item-part",text:n})})),t.addEventListener("click",(function(e){var t=r.indexOf(s),i=!n.checked;if(e.shiftKey)for(var l=Math.min(a,t),c=Math.max(a,t),u=l;u<=c;u++)r[u].checkboxEl.checked=i;a=t,e.target!==n&&(n.checked=i),setTimeout((function(){var e=r.filter((function(e){return e.checkboxEl.checked})).length;o.setText(vJ.buttonRestoreSelectedFiles()+" (".concat(e,")")),o.toggleClass("mod-cta",e>0)}),5)})),r.push(s)},l=0,c=this.history;l<c.length;l++){s(c[l])}},t}(LI),EJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.vaultName="",i.useOwnKey=!0,i.key="",i.createVaultEl=null,i.loaderEl=null,i.errorEl=null,i.plugin=n;var r=i.contentEl;return i.loaderEl=mj(r),i.loaderEl.hide(),i.createVaultEl=r.createDiv(),i.setTitle(vJ.labelCreateRemoteVault()).addButton("mod-cta",rf.interface.startScreen.buttonCreateVault(),i.onCreateVault.bind(i)).addCancelButton(),i}return f(t,e),t.prototype.onCreateVault=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return t=(e=this).app,n=e.vaultName,i=e.useOwnKey,r=e.key,o=e.errorEl,a=e.plugin,o.hide(),s="",!0===i&&""===r&&(s=vJ.msgPleaseEnterPassword()),""===n&&(s=vJ.msgVaultNameCannotBeEmpty()),s?(o.setText(s),o.show(),[2,!0]):(this.startLoading(),c=null,i?(l=a.getSalt(),[4,a.makeKeyHash(r,l)]):[3,2]);case 1:c=h.sent(),h.label=2;case 2:return h.trys.push([2,4,5,6]),[4,rn(t.account.token,n,c,l)];case 3:return h.sent(),[3,6];case 4:return u=h.sent(),o.setText(u.message),o.show(),[2];case 5:return this.stopLoading(),[7];case 6:return this.close(),new CI(vJ.msgSuccessfullyCreatedVault({name:n})),this.plugin.openChooseRemoteVaultModal(),[2,!0]}}))}))},t.prototype.onOpen=function(){var e=this;this.vaultName="",this.useOwnKey=!0,this.key="";var t=this.createVaultEl;t.empty(),t.createDiv("message-container",(function(t){e.errorEl=t.createDiv("message mod-error"),e.errorEl.hide()})),t.createEl("p",{text:vJ.labelRemoteVaultExplanation()}),new YI(t).setName(vJ.optionVaultName()).setDesc(vJ.optionVaultNameDesc()).addText((function(t){return t.setPlaceholder(vJ.optionVaultNamePlaceholder()).onChange((function(t){return e.vaultName=t}))}));var n=null;new YI(t).setName(vJ.optionUseCustomEncryptionPassword()).setDesc(createFragment((function(e){e.createDiv({text:vJ.optionUseCustomEncryptionPasswordDesc()}),e.createDiv({cls:"mod-warning",text:vJ.optionUseCustomEncryptionPasswordDescWarning()})}))).addToggle((function(t){return t.setValue(!0).onChange((function(t){n.settingEl.toggle(t),e.useOwnKey=t}))})),n=new YI(t).setName(vJ.optionEncryptionPassword()).setDesc(createFragment((function(e){e.createDiv({text:vJ.optionEncryptionPasswordDesc()}),e.createDiv({cls:"mod-warning",text:vJ.optionEncryptionPasswordDescWarning()}),e.createDiv({text:vJ.optionEncryptionPasswordDesc_2()})}))).addText((function(t){t.inputEl.type="password",t.setPlaceholder(vJ.optionEncryptionPasswordPlaceholder()).onChange((function(t){return e.key=t}))}))},t.prototype.startLoading=function(){this.createVaultEl.hide(),this.loaderEl.show()},t.prototype.stopLoading=function(){this.createVaultEl.show(),this.loaderEl.hide()},t}(PI),xJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.promptKeyModal=null,i.settingTab=null,i.errorEl=null,i.vaultsEl=null,i.loaderEl=null,i.settingTab=n.settingTab,i.plugin=n,i.promptKeyModal=new SJ(t,n);var r=i.contentEl;return r.createDiv("message-container",(function(e){i.errorEl=e.createDiv("message mod-error")})),i.errorEl.hide(),i.loaderEl=mj(r),i.loaderEl.hide(),i.vaultsEl=r.createDiv(),i}return f(t,e),t.prototype.onOpen=function(){var e=this;this.startLoading();var t=this.vaultsEl,n=this.plugin.getRemoteVaultId();this.titleEl.setText(vJ.labelRemoteVaults()),v(e,void 0,void 0,(function(){var e,i,r,o,a,s,l,c,u,h,p,d=this;return y(this,(function(f){switch(f.label){case 0:return[4,(g=this.app.account.token,Qt("/vault/list",{token:g}))];case 1:if("error"in(e=f.sent()))return[2];if(i=e.vaults,r=e.shared,t.empty(),0===i.length)t.createDiv("vault-empty-state",(function(e){e.createEl("p",{text:vJ.labelNotRemoteVaults()})}));else for(l=t.createDiv("vault-list"),o=function(e){var t=n===e.id;l.createDiv("vault-list-item list-item",(function(i){i.toggleClass("is-connected",t),i.createDiv("vault-list-item-icon list-item-part",(function(e){gb(e,t?"open-vault":"vault")})),i.createDiv({cls:"vault-list-item-title list-item-part",text:e.name}),i.createDiv({cls:"vault-list-item-creation-time list-item-part mod-extended",text:vJ.labelVaultCreatedTime({time:window.moment(e.created).fromNow()})}),t||i.createDiv("list-item-part clickable-icon",(function(t){gb(t,"lucide-trash-2"),aS(t,vJ.tooltipDeleteRemoteVault()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{text:vJ.labelConfirmDeleteRemoteVaultQuestion()}),t.createEl("p",{text:vJ.labelConfirmDeleteRemoteVaultResult()}),t.createEl("p",{cls:"mod-warning",text:vJ.labelConfirmDeleteRemoteVaultWarning()}),new PI(d.app).setTitle(vJ.labelConfirmDeleteRemoteVault()).setContent(t).addButton("mod-warning","Delete",(function(){return v(d,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:this.startLoading(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,an(this.app.account.token,e.id)];case 2:return n.sent(),new CI(vJ.msgRemoteVaultDeleted({name:e.name})),this.open(),[3,5];case 3:return t=n.sent(),new CI(t.message),[3,5];case 4:return this.stopLoading(),[7];case 5:return[2]}}))}))})).addCancelButton().open()}))})),i.createDiv("list-item-part clickable-icon",(function(n){gb(n,"lucide-edit-3"),aS(n,vJ.tooltipRenameRemoteVault());var i=function(n){return v(d,void 0,Promise,(function(){var i;return y(this,(function(r){switch(r.label){case 0:if(""===n||n===e.name)return[2];this.startLoading(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,on(this.app.account.token,e.id,n)];case 2:return r.sent(),[3,5];case 3:return i=r.sent(),new CI(i.message),[2];case 4:return this.stopLoading(),[7];case 5:return t?[4,this.plugin.setRemoteVaultName(n)]:[3,7];case 6:r.sent(),r.label=7;case 7:return this.onOpen(),[2]}}))}))};n.addEventListener("click",(function(){new LJ(d.app,e.name,i).open()}))})),i.createDiv("list-item-part clickable-icon",(function(t){gb(t,"lucide-users"),aS(t,vJ.tooltipManageSharing({name:e.name})),t.addEventListener("click",(function(){new PJ(d.app,e.name,e.id).open()}))})),t?i.createEl("button",{cls:"list-item-part vault-list-item-button",text:vJ.buttonDisconnectFromRemoteVault()}).addEventListener("click",(function(){return v(d,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.startLoading(),[4,this.plugin.unsetup()];case 1:return e.sent(),this.open(),[2]}}))}))})):n||i.createEl("button",{cls:"list-item-part vault-list-item-button",text:vJ.buttonConnectToRemoteVault()},(function(t){t.addClass("mod-cta"),t.addEventListener("click",(function(){d.connectToVault(e)}))}))}))},a=0,s=i;a<s.length;a++)p=s[a],o(p);if(i.length<5?t.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta js-create-vault",text:vJ.buttonCreateNewRemoteVault()},(function(e){e.addEventListener("click",(function(){d.close(),new EJ(d.app,d.plugin).open()}))}))})):t.createEl("p",{cls:"u-small u-muted",text:vJ.msgRemoteVaultLimitHit()}),r.length>0)for(new YI(t).setName(vJ.labelVaultsSharedWithYou()).setHeading(),l=t.createDiv("vault-list"),c=function(e){var t=n===e.id;l.createDiv("vault-list-item list-item",(function(i){i.toggleClass("is-connected",t),i.createDiv("vault-list-item-icon list-item-part",(function(e){gb(e,t?"open-vault":"vault")})),i.createDiv({cls:"vault-list-item-title list-item-part",text:e.name}),i.createDiv({cls:"vault-list-item-creation-time list-item-part mod-extended",text:vJ.labelVaultCreatedTime({time:window.moment(e.created).fromNow()})}),t?i.createEl("button",{cls:"list-item-part vault-list-item-button",text:vJ.buttonDisconnectFromRemoteVault()}).addEventListener("click",(function(){return v(d,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.startLoading(),[4,this.plugin.unsetup()];case 1:return e.sent(),this.open(),[2]}}))}))})):n||i.createEl("button",{cls:"list-item-part vault-list-item-button",text:vJ.buttonConnectToRemoteVault()},(function(t){t.addClass("mod-cta"),t.addEventListener("click",(function(){d.connectToVault(e)}))})),i.createDiv("clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,vJ.tooltipLeaveVaultSharing()),t.addEventListener("click",(function(){var t=document.createDocumentFragment();t.createEl("p",{cls:"setting-message mod-warning",text:vJ.labelLeaveVaultConfirmationDetails()}),t.createEl("p",{text:vJ.labelLeaveVaultConfirmationDetails()}),new PI(d.app).setTitle(vJ.labelLeaveVaultConfirmation({vault:e.name})).setContent(t).addButton("mod-warning",vJ.buttonLeave(),(function(){d.deleteVaultShare(e.id,e.share_uid)})).addCancelButton().open()}))}))}))},u=0,h=r;u<h.length;u++)p=h[u],c(p);return this.stopLoading(),[2]}var g}))}))},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.settingTab.display()},t.prototype.startLoading=function(){this.vaultsEl.hide(),this.loaderEl.show()},t.prototype.stopLoading=function(){this.vaultsEl.show(),this.loaderEl.hide()},t.prototype.connectToVault=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r=this;return y(this,(function(o){switch(o.label){case 0:return[4,(a=this.app.account.token,Qt("/subscription/list",{token:a}))];case 1:return"error"in(t=o.sent())?[2]:t.sync?(n=function(){return v(r,void 0,void 0,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return e.password?[3,1]:(this.promptKeyModal.setVault(e,(function(){t.close()})),this.promptKeyModal.open(),[3,3]);case 1:return[4,this.plugin.setup(e.id,e.name,e.password,e.salt,e.host)];case 2:n.sent(),this.plugin.setPause(!0),this.close(),new AJ(i,this.plugin,e.name).open(),n.label=3;case 3:return[2]}}))}))},i=this.app,i.vault.getFiles().length>0?new PI(i).setTitle(vJ.labelConfirmMergeVault()).setContent(createFragment((function(t){t.createEl("p",{text:vJ.msgVaultHasNotes()}),t.createEl("p",{text:vJ.msgVaultMergeWarning({name:e.name})})}))).addButton("mod-cta",rf.dialogue.buttonContinue(),n).addCancelButton().open():n(),[2]):(this.errorEl.setText(vJ.labelRequireSubscriptionToConnect()),this.errorEl.show(),[2])}var a}))}))},t.prototype.deleteVaultShare=function(e,t){return v(this,void 0,void 0,(function(){var n,i=this;return y(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,vj(this.containerEl,(function(){return sn(i.app.account.token,e,t)}))];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),new CI(n.message),[2];case 3:return this.plugin.getRemoteVaultId()!==e?[3,5]:[4,this.plugin.unsetup()];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t}(LI),SJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.keyInputEl=null,i.errorEl=null,i.plugin=null,i.plugin=n;var r=document.createDocumentFragment(),o=mj(r);o.hide();var a=r.createDiv({},(function(e){e.createDiv("message-container",(function(e){i.errorEl=e.createDiv("message mod-error")})),i.errorEl.hide(),e.createEl("p","u-center-text",(function(e){e.createEl("label",{cls:"input-label",text:vJ.optionEncryptionPassword()}),i.keyInputEl=e.createEl("input",{type:"password"},(function(e){e.setAttribute("placeholder",vJ.optionEncryptionPasswordPlaceholder()),e.addEventListener("keydown",(function(e){"Enter"!==e.key||e.isComposing||s()}))}))}))})),s=function(){return v(i,void 0,void 0,(function(){var e,n,i;return y(this,(function(r){switch(r.label){case 0:o.show(),a.hide(),this.errorEl.hide(),e=this.keyInputEl.value,r.label=1;case 1:return r.trys.push([1,5,,6]),n=this.currentVaultInfo,[4,this.plugin.verifyPassword(n.id,e,n.salt,n.host)];case 2:return r.sent(),new CI(vJ.msgVerifiedPassword()),[4,this.plugin.setup(n.id,n.name,e,n.salt,n.host)];case 3:return r.sent(),[4,this.plugin.setPause(!0)];case 4:return r.sent(),this.successCallback&&this.successCallback(),new AJ(t,this.plugin,n.name).open(),this.close(),[3,6];case 5:return i=r.sent(),console.error(i),i instanceof XMLHttpRequest?this.errorEl.setText(rf.plugins.publish.msgNetworkError()):this.errorEl.setText(i.message),this.errorEl.show(),[3,6];case 6:return a.show(),o.hide(),[2]}}))}))};return i.setTitle(vJ.labelEnterEncryptionPassword()).setContent(r).addButton("mod-cta",vJ.buttonUnlockVault(),(function(){return s(),!0})).addCancelButton(),i}return f(t,e),t.prototype.setVault=function(e,t){this.currentVaultInfo=e,this.keyInputEl.value="",this.successCallback=t},t}(PI),MJ=function(e){function t(t,n){var i=e.call(this,t)||this;i.plugin=null,i.syncLog=[],i.syncLogContainerEl=null,i.errorOnly=!1,i.updateSyncLog=function(){for(var e=i.syncLogContainerEl,t=i.syncLog=i.plugin.syncLog,n=function(e){if(e.el)return"continue";e.el=createDiv("list-item",(function(t){var n,i=window.moment(e.ts).format("YYYY-MM-DD HH:mm"),r="".concat(i," - ").concat(e.info," ").concat(null!==(n=e.file)&&void 0!==n?n:"");t.createSpan({text:r})})),e.error&&e.el.addClass("mod-error")},r=0,o=t;r<o.length;r++){n(o[r])}i.errorOnly&&(t=t.filter((function(e){return e.error}))),e.setChildrenInPlace(t.map((function(e){return e.el}))),e.scrollTop=e.scrollHeight},i.plugin=n;var r=i,o=r.titleEl,a=r.contentEl;return r.modalEl.addClass("mod-sync-log","mod-lg"),o.setText(vJ.labelSyncLog()),new YI(a).setName(vJ.optionsOnlyShowErrors()).setDesc(vJ.optionsOnlyShowErrorsDesc()).addToggle((function(e){return e.onChange((function(e){i.errorOnly=e,i.updateSyncLog()}))})),i.syncLogContainerEl=a.createDiv("sync-log-container"),a.createDiv("modal-button-container",(function(e){e.createEl("button",{text:vJ.buttonCopySyncLog(),cls:"mod-cta"}).addEventListener("click",i.onCopyResults.bind(i)),e.createEl("button",{text:rf.dialogue.buttonDone()}).addEventListener("click",(function(){return i.close()}))})),i}return f(t,e),t.prototype.onOpen=function(){e.prototype.onOpen.call(this),this.updateSyncLog(),this.plugin.on("new-log",this.updateSyncLog)},t.prototype.onClose=function(){this.plugin.off("new-log",this.updateSyncLog),e.prototype.onClose.call(this)},t.prototype.onCopyResults=function(){for(var e="",t=0,n=this.syncLog;t<n.length;t++){var i=n[t];e+="".concat(window.moment(i.ts).format("YYYY-MM-DD HH:mm")),e+=" - ".concat(i.info),i.file&&(e+=" ".concat(i.file)),e+="\n"}at(e),new CI(vJ.msgSuccessfullyCopiedSyncLog())},t}(LI),TJ=function(e){function t(t,n,i){var r=e.call(this,t,vJ.labelAddExcludedFolder(),vJ.labelAddExcludedFolderDesc(),"plugins.sync.label-number-of-folders-excluded")||this;return r.sync=null,r.settingTab=null,r.sync=n,r.settingTab=i,r.titleEl.setText(vJ.labelManageExcludedFolders()),r}return f(t,e),t.prototype.onClose=function(){this.settingTab.display()},t.prototype.getPaths=function(){return this.sync.ignoreFolders},t.prototype.setPaths=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return this.sync.setIgnoreFolders(e),[2]}))}))},t}(uQ),DJ=function(e){function t(t,n){var i=e.call(this,t)||this;return i.sync=n,i.titleEl.setText(vJ.msgLargestFiles()),i.contentEl.createDiv({text:vJ.msgLargestFilesDesc()}),i}return f(t,e),t.prototype.onOpen=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){for(n in e=this.sync.serverFiles,t=[],e)e.hasOwnProperty(n)&&(a=e[n]).size>0&&t.push(a);for(t=t.sort((function(e,t){return t.size-e.size})).slice(0,20),i=this.contentEl,r=0,o=t;r<o.length;r++)a=o[r],i.createDiv({cls:"u-small u-muted",text:a.path+" ("+ee(a.size)+")"});return[2]}))}))},t}(LI),AJ=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.sync=null,r.settingTab=null,r.sync=n,r.settingTab=n.settingTab;var o=r,a=o.contentEl;o.titleEl.setText(vJ.labelSetupConnection()),a.createEl("p",{text:vJ.labelNowConnectedToVault({name:i})});var s=a.createDiv("modal-button-container");return s.createEl("button",{text:vJ.labelManageExcludedFolders()},(function(e){e.addEventListener("click",(function(){r.settingTab.manageExclusions()}))})),s.createEl("button",{cls:"mod-cta",text:vJ.buttonStartSyncing()},(function(e){e.addEventListener("click",(function(){return v(r,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.sync.setPause(!1),[4,this.settingTab.display()];case 1:return e.sent(),this.close(),[2]}}))}))}))})),r}return f(t,e),t}(LI),LJ=function(e){function t(t,n,i){var r=e.call(this,t)||this;r.cb=i,r.setTitle(vJ.labelRenameRemoteVault({name:n})),r.addButton("mod-cta",rf.dialogue.buttonSave(),r.submit.bind(r)),r.addCancelButton();var o=r.contentEl;return o.empty(),new YI(o).setName(vJ.optionVaultName()).setDesc(vJ.labelRenameRemoteVaultDesc()).addText((function(e){r.textEl=e,e.setPlaceholder(n)})),r}return f(t,e),t.prototype.submit=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){return this.cb(this.textEl.getValue()),[2]}))}))},t}(PI),PJ=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.shares=[],r.vaultId=i,r.setTitle(yJ.labelManageSharing({name:n})),r.addButton("",rf.dialogue.buttonDone(),(function(){return r.close()})),r.display(),r}return f(t,e),t.prototype.display=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:this.contentEl.empty(),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,vj(this.containerEl,(function(){return e=c.app.account.token,t=c.vaultId,Qt("/vault/share/list",{token:e,vault_uid:t});var e,t}))];case 2:return e=u.sent(),this.shares=e.shares,[3,4];case 3:return t=u.sent(),new CI(t.message),[2];case 4:if(n=this.contentEl.createDiv(),this.shares.length>0)for(n.createEl("p",{cls:"u-muted",text:vJ.labelSharingWithUsers()}),i=n.createDiv(),r=function(e){i.createDiv("list-item",(function(t){e.name?(t.createDiv({cls:"list-item-part",text:e.name}),t.createDiv({cls:"list-item-part mod-extended",text:"<".concat(e.email,">")})):t.createDiv({cls:"list-item-part mod-extended",text:e.email}),e.accepted||t.createDiv({cls:"list-item-part"},(function(e){e.createSpan({cls:"u-muted",text:yJ.labelInvitePending()})})),t.createDiv("list-item-part clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,yJ.tooltipRemoveUser()),t.addEventListener("click",(function(){return v(c,void 0,void 0,(function(){var t,i=this;return y(this,(function(r){switch(r.label){case 0:n.hide(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,vj(this.containerEl,(function(){return sn(i.app.account.token,i.vaultId,e.uid)}))];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),new CI(t.message),[3,4];case 4:return[4,this.display()];case 5:return r.sent(),[2]}}))}))}))}))}))},o=0,a=this.shares;o<a.length;o++)s=a[o],r(s);else n.createEl("p",{cls:"u-muted",text:vJ.labelNotSharing()});return l=null,new YI(n).setName(yJ.optionInviteUser()).addText((function(e){return e.setPlaceholder(yJ.placeholderInviteUser()).then((function(e){l=e,e.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"===t.key&&c.inviteToVault(e.getValue())}))}))})).addButton((function(e){return e.setButtonText(rf.interface.buttonAdd()).setCta().onClick((function(){n.hide(),c.inviteToVault(l.getValue())}))})),[2]}}))}))},t.prototype.inviteToVault=function(e){return v(this,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){switch(i.label){case 0:if(""===(e=e.trim())||!e.includes("@"))return new CI(yJ.errorEmailMustBeValid()),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,vj(this.containerEl,(function(){return function(e,t,n){return Qt("/vault/share/invite",{token:e,vault_uid:t,email:n})}(n.app.account.token,n.vaultId,e)}))];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),new CI(t.message),[3,4];case 4:return[4,this.display()];case 5:return i.sent(),[2]}}))}))},t}(PI),IJ=function(){function e(e,t,n,i){this.min=e||0,this.max=t||Number.MAX_VALUE,this.base=n||1e3,this.jitter=i||!0,this.count=0,this.nextTs=Date.now()}return e.prototype.success=function(){this.count=0,this.nextTs=Date.now()+this.getTimeout()},e.prototype.fail=function(){this.count++,this.nextTs=Date.now()+this.getTimeout()},e.prototype.getTimeout=function(){if(0===this.count)return this.min;var e=this.count-1,t=this.base*Math.pow(2,e);if(this.jitter){t*=.5+.5*Math.random()}return t=Math.floor(Math.min(this.max,this.min+t))},e.prototype.getNextTs=function(){return this.nextTs},e.prototype.isReady=function(){return Date.now()>this.nextTs},e}(),OJ=rf.plugins.sync,FJ={1e3:"Disconnected",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Disconnected",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"},BJ=window.WebSocket,NJ=window.URL,RJ=Object.getOwnPropertyDescriptor(NJ.prototype,"hostname").get,HJ=String.prototype.endsWith;var VJ=window.process&&window.process.platform,zJ=SD||VJ&&"win32"!==VJ&&"darwin"!==VJ,qJ=SD?500:2e3,UJ=["image"],WJ="";SD&&v(void 0,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,PD.getInfo()];case 1:return e=t.sent(),WJ=e.name,[2]}}))}));var _J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="sync",t.name=OJ.name(),t.description=OJ.desc(),t.app=null,t.vault=null,t.plugin=null,t.db=null,t.vaultId=null,t.vaultName=null,t.key=null,t.host=null,t.deviceName="",t.version=0,t.initial=!0,t.localFiles={},t.scanSpecialFiles=!1,t.scanSpecialFileQueue=[],t.serverFiles={},t.fileRetry={},t.newServerFiles=[],t.allowTypes=new Set(UJ),t.allowSpecialFiles=new Set,t.ignoreFolders=[],t.preventSleep=!1,t.dirty=!1,t.requestSaveData=rt(t.saveData.bind(t),2e3),t.boundOnFileAdd=t.onFileAdd.bind(t),t.boundOnFileRemove=t.onFileRemove.bind(t),t.boundOnFileRename=t.onFileRename.bind(t),t.boundOnRaw=t.onRaw.bind(t),t.pause=!1,t.syncing=!1,t.error=!1,t.ready=!1,t.server=null,t.syncLog=[],t.timer=0,t.backoff=new IJ(0,3e5,5e3,!0),t.statusIconEl=null,t.filterCache={},t.syncingPath="",t.syncStatus="",t}return f(t,e),t.prototype.getRemoteVaultId=function(){return this.vaultId},t.prototype.getRemoteVaultName=function(){return this.vaultName},t.prototype.setRemoteVaultName=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return this.vaultName=e,[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},t.prototype.init=function(e,t){var n=this;this.app=e,this.vault=e.vault,this.plugin=t,this.settingTab=new bJ(e,t,this),t.registerStatusBarItem(),t.registerGlobalCommand({id:"sync:view-version-history",name:rf.plugins.sync.actionViewVersionHistory(),icon:"lucide-history",checkCallback:function(e){var t=n.app.workspace.getActiveViewOfType(EI);return!!t&&(e||n.showVersionHistory(t.file.path),!0)}}),this.setStatus("Uninitialized")},t.prototype.openChooseRemoteVaultModal=function(e){var t=new xJ(this.app,this);t.open(),e&&t.connectToVault(e)},t.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o=this;return y(this,(function(a){return n=e.workspace,this.registerEvents(),t.addSettingTab(this.settingTab),t.registerEvent(e.workspace.on("file-menu",this.onFileMenu,this)),n.onLayoutReady((function(){return v(o,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.loadData()];case 1:return e.sent(),this.requestSync(),[2]}}))}))})),this.timer=window.setInterval(this.requestSync.bind(this),3e4),this.on("status-change",(function(){o.updateStatusBar()})),Lt.isMobile?n.onLayoutReady((function(){var e=n.rightSplit;o.statusIconEl=e.addHeaderButton("sync-small",o.onStatusIconClick.bind(o)),o.statusIconEl.addEventListener("contextmenu",o.onStatusIconContextMenu.bind(o)),o.statusIconEl.addClass("sync-status-icon")})):(i=t.statusBarEl)&&(r=i.createDiv("status-bar-item-segment"),this.statusIconEl=r.createSpan("status-bar-item-icon sync-status-icon"),i.addEventListener("click",this.onStatusIconClick.bind(this)),i.addEventListener("contextmenu",this.onStatusIconContextMenu.bind(this))),[2]}))}))},t.prototype.onDisable=function(e,t){this.server&&(this.server.disconnect(),this.server=null),this.timer&&(clearInterval(this.timer),this.timer=0),this.statusIconEl&&this.statusIconEl.detach(),this.unregisterEvents()},t.prototype.onFileMenu=function(e,t,n){var i=this;t instanceof Xy&&("tab-header"===n||"more-options"===n||"file-explorer-context-menu"===n)&&e.addItem((function(e){return e.setSection("info").setTitle(OJ.actionViewVersionHistory()).setIcon("lucide-history").onClick((function(){return i.showVersionHistory(t.path)}))}))},t.prototype.onStatusIconClick=function(){this.vaultId&&!this.pause?this.showSyncLog():this.openSettings()},t.prototype.onStatusIconContextMenu=function(e){var t=this,n=new fw;if(this.vaultId){var i=this.pause;n.addItem((function(e){return e.setTitle(OJ(i?"button-resume":"button-pause")).setIcon(i?"lucide-play-circle":"paused").onClick((function(){return t.setPause(!i)}))})),n.addSeparator(),n.addItem((function(e){return e.setTitle(rf.interface.settings()).setIcon("lucide-settings").onClick((function(){return t.openSettings()}))})),n.addItem((function(e){return e.setTitle(OJ.optionSyncLog()).setIcon("lucide-align-left").onClick((function(){return t.showSyncLog()}))})),n.addItem((function(e){return e.setTitle(OJ.optionViewDeletedFiles()).setIcon("lucide-trash-2").onClick((function(){return t.showDeletedFiles()}))}))}n.showAtMouseEvent(e)},t.prototype.loadData=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:e=null,s.label=1;case 1:return s.trys.push([1,4,,5]),t=this,[4,u_(this.app.appId+"-sync",1,{upgrade:function(e,t,n,i){e.objectStoreNames.contains("data")||e.createObjectStore("data")}})];case 2:return[4,(t.db=s.sent()).get("data","data")];case 3:return e=s.sent(),[3,5];case 4:return n=s.sent(),console.error("Failed to load sync data",n),[3,5];case 5:return e?[3,9]:[4,this.plugin.loadData()];case 6:return(e=s.sent())?[4,this.db.put("data",e,"data")]:[3,9];case 7:return s.sent(),[4,this.plugin.deleteData()];case 8:s.sent(),s.label=9;case 9:if(!e)return[2];i=0;try{this.vaultId=e.vaultId,this.vaultName=e.vaultName,this.key=z(e.key),this.host=e.host,this.deviceName=e.deviceName||"",this.pause=!!e.pause,this.version=e.version||0,this.initial=void 0===e.initial||!!e.initial,this.localFiles=e.local||{},this.serverFiles=e.remote||{},this.newServerFiles=e.pending||[],(r=e.appId)&&r!==this.app.appId&&(this.pause=!0,this.version=0,this.initial=!0,this.localFiles={},this.serverFiles={},this.newServerFiles=[]),this.fileRetry={},this.filterCache={},this.allowTypes=new Set(e.allowTypes||UJ),this.allowSpecialFiles=new Set(e.allowSpecialFiles||[]),this.ignoreFolders=e.ignoreFolders||[],this.preventSleep=e.preventSleep||!1,i=e.dataVer||0}catch(e){console.error(e)}this.scanFiles();try{if(i<1)for(o in this.serverFiles)this.serverFiles.hasOwnProperty(o)&&!this.localFiles.hasOwnProperty(o)&&o.toLowerCase().endsWith(".canvas")&&((a=this.serverFiles[o]).folder||this.newServerFiles.push(a))}catch(e){console.error(e)}return[2]}}))}))},t.prototype.saveData=function(){return v(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return this.dirty?(this.dirty=!1,(e={}).appId=this.app.appId,e.vaultId=this.vaultId,e.vaultName=this.vaultName,e.key=q(this.key),e.host=this.host,e.deviceName=this.deviceName,e.pause=this.pause,e.version=this.version,e.initial=this.initial,e.local=this.localFiles,e.remote=this.serverFiles,e.pending=this.newServerFiles,e.allowTypes=Array.from(this.allowTypes),e.allowSpecialFiles=Array.from(this.allowSpecialFiles),e.ignoreFolders=this.ignoreFolders,e.preventSleep=this.preventSleep,e.dataVer=1,[4,this.db.put("data",e,"data")]):[2];case 1:return t.sent(),[2]}}))}))},t.prototype.getDefaultDeviceName=function(){return Lt.isDesktopApp?It("os").hostname():WJ||"Unknown"},t.prototype.setup=function(e,t,n,i,r){return v(this,void 0,void 0,(function(){var o;return y(this,(function(a){switch(a.label){case 0:return this.vaultId=e,this.vaultName=t,o=this,[4,J(n,i)];case 1:return o.key=a.sent(),this.host=r,this.clear(),this.scanFiles(),[4,this.saveData()];case 2:return a.sent(),this.requestSync(),[2]}}))}))},t.prototype.unsetup=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.vaultId=null,this.vaultName=null,this.key=null,this.host=null,this.clear(),this.setStatus("Uninitialized"),[4,this.saveData()];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){this.dirty=!0,this.version=0,this.initial=!0,this.serverFiles={},this.newServerFiles=[],this.fileRetry={},this.ignoreFolders=[],this.filterCache={},this.allowTypes=new Set(UJ);var e=this.server;e&&(e.disconnect(),this.server=null),this.gettingServer=null,this.backoff.success()},t.prototype.setPause=function(e){this.pause=e,e?(this.setStatus("Paused"),this.log("Paused")):(this.setStatus("Resumed"),this.log("Resumed. Detecting changes...")),this.dirty=!0,this.saveData(),this.requestSync()},t.prototype.getPause=function(){return this.pause},t.prototype.changeFilter=function(e){var t=this.serverFiles,n=this.newServerFiles,i=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];this.allowSyncFile(o.path,o.folder)||i.push(o)}e(),this.filterCache={};for(var a=[],s=0,l=i;s<l.length;s++){o=l[s];this.allowSyncFile(o.path,o.folder)&&a.push(o)}a.sort((function(e,t){return e.path.length-t.path.length})),n.unshift.apply(n,a)},t.prototype.makeKeyHash=function(e,t){return v(this,void 0,void 0,(function(){var n,i;return y(this,(function(r){switch(r.label){case 0:return[4,J(e,t)];case 1:return n=r.sent(),i=G,[4,_(n)];case 2:return[2,i.apply(void 0,[r.sent()])]}}))}))},t.prototype.getSalt=function(){return function(e){for(var t=[],n=0,i=te.length;n<e;n++)t.push(te.charAt(Math.floor(Math.random()*i)));return t.join("")}(20)},t.prototype.verifyPassword=function(e,t,n,i){return v(this,void 0,void 0,(function(){var r;return y(this,(function(o){switch(o.label){case 0:return[4,this.makeKeyHash(t,n)];case 1:return r=o.sent(),[4,ln(this.app.account.token,e,r,i)];case 2:return o.sent(),[2]}}))}))},t.prototype.log=function(e,t,n){void 0===n&&(n=!1);var i=this.syncLog;if("Fully synced"===e&&i.last().info===e)return;i.push({file:t,info:e,ts:Date.now(),error:n}),i.length>qJ&&i.splice(0,100),this.trigger("new-log")},t.prototype.scanFiles=function(){for(var e=this.vault,t=this.localFiles,n=[e.getRoot()];n.length;){var i=n.pop();if(this.onFileAdd(i),i instanceof $y)for(var r=0,o=i.children;r<o.length;r++){var a=o[r];n.push(a)}}for(var s in t){if(t.hasOwnProperty(s)&&!s.startsWith("."))e.getAbstractFileByPath(s)||delete t[s]}this.scanSpecialFiles=!0},t.prototype.setIgnoreFolders=function(e){var t=this;this.changeFilter((function(){t.ignoreFolders=e})),this.forceSaveData(),this.requestSync()},t.prototype.setSyncType=function(e,t){var n=this;this.allowTypes.has(e)!==t&&(this.changeFilter((function(){t?n.allowTypes.add(e):n.allowTypes.delete(e)})),this.forceSaveData(),this.requestSync())},t.prototype.setAllowSpecialFile=function(e,t){var n=this;this.allowSpecialFiles.has(e)!==t&&(this.changeFilter((function(){t?n.allowSpecialFiles.add(e):n.allowSpecialFiles.delete(e)})),this.forceSaveData(),this.requestSync())},t.prototype.registerEvents=function(){this.vault.on("create",this.boundOnFileAdd),this.vault.on("modify",this.boundOnFileAdd),this.vault.on("delete",this.boundOnFileRemove),this.vault.on("rename",this.boundOnFileRename),this.vault.on("raw",this.boundOnRaw)},t.prototype.unregisterEvents=function(){this.vault.off("create",this.boundOnFileAdd),this.vault.off("modify",this.boundOnFileAdd),this.vault.off("delete",this.boundOnFileRemove),this.vault.off("rename",this.boundOnFileRename),this.vault.off("raw",this.boundOnRaw)},t.prototype.onFileAdd=function(e){var t=e.path;if("/"!==t){var n=this.localFiles,i=n[t];if(i||(n[t]=i={path:t,previouspath:"",folder:!1,ctime:0,mtime:0,size:0,hash:"",synctime:0,synchash:""}),i.path=t,e instanceof $y)i.folder=!0,i.ctime=0,i.mtime=0,i.size=0,i.hash="";else if(e instanceof Xy){i.folder=!1;var r=e.stat,o=Math.ceil(r.mtime),a=Math.ceil(r.ctime),s=r.size;i.mtime&&i.mtime===o&&i.size===r.size||(i.hash=""),i.mtime=o,i.ctime=a,i.size=s}this.requestSync()}},t.prototype.onFileRemove=function(e){delete this.localFiles[e.path],this.requestSync()},t.prototype.onFileRename=function(e,t){var n=this.localFiles,i=n[t];n[e.path]=i,delete n[t],i.path=e.path,i.previouspath||(i.previouspath=t),i.synctime=0,this.onFileAdd(e),this.setDirty(),this.requestSync()},t.prototype.onRaw=function(e){if(e.startsWith(this.vault.configDir+"/")){var t=this.scanSpecialFileQueue;if(t.contains(e))return;t.push(e),this.requestSync()}},t.prototype.onPushedFile=function(e){if(this.version=e.uid,!this.initial||!e.deleted){var t=e.path,n={path:e.path,size:e.size,hash:e.hash,ctime:e.ctime,mtime:e.mtime,folder:e.folder,deleted:e.deleted,uid:e.uid,device:e.device};this.initial&&(n.initial=!0);var i=this.newServerFiles;if(e.wasJustPushed){for(var r=0;r<i.length;r++)i[r].path===t&&(i.splice(r,1),r-=1);return this.serverFiles[t]=n,void this.setDirty()}this.log("Server pushed"+(e.folder?" (folder)":"")+(e.deleted?" (deleted or renamed)":"")+(e.device?" ["+e.device+"]":""),e.path),i.push(n),this.requestSync()}},t.prototype.allowSyncFile=function(e,t){var n=this.filterCache;return n.hasOwnProperty(e)?n[e]:n[e]=this._allowSyncFile(e,t)},t.prototype._allowSyncFile=function(e,t){for(var n=0,i=this.ignoreFolders;n<i.length;n++){var r=i[n];if(t&&e===r||e.startsWith(r+"/"))return!1}if(!t&&e.startsWith(this.vault.configDir+"/")){var o=e.substring((this.vault.configDir+"/").length),a=o.split("/");if(a.some((function(e){return"node_modules"===e||e.startsWith(".")})))return!1;var s=ie(o),l=le(s),c=null;return"workspace.json"!==o&&"workspace-mobile.json"!==o&&("app.json"===o||"types.json"===o?c="app":"appearance.json"===o?c="appearance":"hotkeys.json"===o?c="hotkey":"core-plugins.json"===o||"core-plugins-migration.json"===o?c="core-plugin":"community-plugins.json"===o?c="community-plugin":"themes"!==a[0]||3!==a.length||"theme.css"!==s&&"manifest.json"!==s?"snippets"===a[0]&&2===a.length&&"css"===l?c="appearance-data":1===a.length&&"json"===l?c="core-plugin-data":"plugins"===a[0]&&(c="community-plugin-data"):c="appearance-data",c&&this.allowSpecialFiles.has(c))}if(e.startsWith("."))return!1;if(t)return!0;if(e.startsWith("."))return!1;var u=le(ie(e));if("md"===u||"canvas"===u)return!0;var h=this.allowTypes;return pM.contains(u)?h.has("image"):"webm"===u?h.has("audio")||h.has("video"):dM.contains(u)?h.has("audio"):fM.contains(u)?h.has("video"):gM.contains(u)?h.has("pdf"):!!h.has("unsupported")},t.prototype.canSyncPath=function(e,t){var n=this.fileRetry;for(var i in n)if(n.hasOwnProperty(i)&&n[i].ts>e&&t.startsWith(i))return!1;return!0},t.prototype.canSyncLocalFile=function(e,t){if(!t.synctime)return!0;var n=t.size,i=n>10240?n>102400?30:20:10;return e-t.synctime>1e3*i},t.prototype.getHost=function(){var e=this.host||"127.0.0.1:3003";return e.startsWith("127.0.0.1")||e.startsWith("localhost")?"ws://"+e:"wss://"+e},t.prototype.setStatus=function(e){this.syncStatus=e,this.trigger("status-change")},t.prototype.getStatus=function(){return this.vaultId?this.error||Object.keys(this.fileRetry).length>0?"error":this.pause?"paused":this.syncing?"syncing":"synced":"uninitialized"},t.prototype.failedSync=function(e){var t=this.syncingPath;if(this.log(e,t,!0),t){var n=this.fileRetry,i=Date.now(),r=n[t];r||(r=n[t]={count:0,error:"",ts:0}),r.error=e;var o=r.count=r.count+1,a=5*Math.pow(2,o)*1e3;a=Math.min(a,3e5),r.ts=i+a}},t.prototype.requestSync=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return this.syncing?[2]:(this.syncing=!0,this.error=!1,this.trigger("status-change"),[4,sleep(50)]);case 1:a.sent(),e=null,t=!0,a.label=2;case 2:if(!t||!this.plugin.enabled||this.pause||!this.vaultId)return[3,8];!e&&SD&&this.preventSleep&&(e=BD()),n=Date.now(),a.label=3;case 3:return a.trys.push([3,5,,6]),this.error=!1,this.syncingPath=null,[4,this._sync()];case 4:return t=a.sent(),(i=this.syncingPath)&&delete this.fileRetry[i],[3,6];case 5:return r=a.sent(),console.log("Sync Error!"),console.error(r),this.error=!0,this.failedSync(r.message),t=!1,this.trigger("status-change"),[3,6];case 6:return this.dirty&&this.requestSaveData(),o=Date.now()-n,[4,sleep(Math.max(0,50-o))];case 7:return a.sent(),[3,2];case 8:return e&&e.release(),this.syncing=!1,this.trigger("status-change"),[2]}}))}))},t.prototype.getServer=function(){var e=this,t=this.gettingServer;if(!t){this.gettingServer=t=this.asyncGetServer();var n=function(){e.gettingServer=null};t.then(n,n)}return t},t.prototype.asyncGetServer=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return!(e=this.server)||e.isConnected()||e.isConnecting()||(e.disconnect(),e=this.server=null,this.backoff.fail()),e?[3,4]:this.host&&this.app.account.token&&this.vaultId&&this.key?[4,Y(this.key)]:[3,3];case 1:return t=s.sent(),i=G,[4,_(this.key)];case 2:return n=i.apply(void 0,[s.sent()]),e=this.server=new jJ(t,n),[3,4];case 3:return[2,null];case 4:if(e.hasConnection())return[3,8];this.setStatus("Connecting to server"),this.log("Connecting to server"),this.ready=!1,s.label=5;case 5:return s.trys.push([5,7,,8]),r=this.deviceName||this.getDefaultDeviceName(),[4,e.connect(this.getHost(),this.app.account.token,this.vaultId,this.version,this.initial,r,(function(e){a.log("Connection successful. Detecting changes..."),a.ready=!0,a.initial&&(a.initial=!1),a.version<e&&(a.version=e),a.dirty=!0,a.requestSaveData(),a.requestSync()}),this.onPushedFile.bind(this))];case 6:return s.sent(),this.backoff.success(),[3,8];case 7:return(o=s.sent()).message&&o.message.contains("Your subscription to Obsidian Sync has expired")&&new CI(o.message),console.error(o),this.log(o.message,null,!0),e.disconnect(),e=this.server=null,this.error=!0,this.backoff.fail(),[2,null];case 8:return[2,e]}}))}))},t.prototype._sync=function(){return v(this,void 0,Promise,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O,F,B,N,R,H,z,q,U,_,j,G,K,Y,X,$,Z,Q,J,ee,te=this;return y(this,(function(ne){switch(ne.label){case 0:return this.pause?[2,!1]:this.backoff.isReady()?[4,this.getServer()]:(this.log("Waiting to connect to server"),[2,!1]);case 1:if(!(e=ne.sent()))return[2,!1];if(this.pause||!this.vaultId)return[2,!1];t=this.localFiles,n=this.serverFiles,i=this.newServerFiles,r=this.vault,o=r.adapter,a=Date.now(),s=0,this.setStatus("Indexing..."),l=r.configDir,c=l+"/",ne.label=2;case 2:if(ne.trys.push([2,24,,25]),u={},h=this.scanSpecialFileQueue,!this.scanSpecialFiles)return[3,20];for(Y in this.scanSpecialFiles=!1,this.setStatus("Initializing..."),h=this.scanSpecialFileQueue=[],t)t.hasOwnProperty(Y)&&Y.startsWith(".")&&(u[Y]=t[Y],delete t[Y]);return[4,o.exists(l)];case 3:return ne.sent()?(h.push(c+"config"),[4,o.list(l)]):[3,20];case 4:for(p=ne.sent(),d=0,f=p.files;d<f.length;d++)"json"===le(I=f[d])&&h.push(I);return[4,o.exists(c+"themes")];case 5:return ne.sent()?[4,o.list(c+"themes")]:[3,10];case 6:g=ne.sent(),m=0,v=g.folders,ne.label=7;case 7:return m<v.length?(D=v[m],[4,o.list(D)]):[3,10];case 8:for(b=ne.sent(),w=0,k=b.files;w<k.length;w++)I=k[w],"manifest.json"!==(O=ie(I))&&"theme.css"!==O||h.push(I);ne.label=9;case 9:return m++,[3,7];case 10:return[4,o.exists(c+"snippets")];case 11:return ne.sent()?[4,o.list(c+"snippets")]:[3,13];case 12:for(C=ne.sent(),E=0,x=C.files;E<x.length;E++)"css"===le(I=x[E])&&h.push(I);ne.label=13;case 13:return[4,o.exists(c+"plugins")];case 14:return ne.sent()?[4,o.list(c+"plugins")]:[3,19];case 15:S=ne.sent(),M=0,T=S.folders,ne.label=16;case 16:return M<T.length?(D=T[M],[4,o.list(D)]):[3,19];case 17:for(A=ne.sent(),L=0,P=A.files;L<P.length;L++)I=P[L],"manifest.json"!==(O=ie(I))&&"main.js"!==O&&"styles.css"!==O&&"data.json"!==O||h.push(I);ne.label=18;case 18:return M++,[3,16];case 19:this.forceSaveData(),ne.label=20;case 20:return h.length>0?(Y=h.pop(),[4,o.exists(Y)]):[3,23];case 21:return ne.sent()?[4,o.stat(Y)]:(delete t[Y],[3,20]);case 22:return(F=ne.sent())&&"file"===F.type?((K=t[Y])||(K=u.hasOwnProperty(Y)?t[Y]=u[Y]:t[Y]={path:Y,previouspath:"",ctime:0,mtime:0,size:0,folder:!1,hash:"",synchash:"",synctime:0}),Z=Math.ceil(F.mtime),$=Math.ceil(F.ctime),B=F.size,K.mtime&&K.mtime===Z&&K.size===F.size||(K.hash=""),K.mtime=Z,K.ctime=$,K.size=B,[3,20]):(delete t[Y],[3,20]);case 23:return[3,25];case 24:return N=ne.sent(),console.error("Failed to scan config files",N),[3,25];case 25:if(!(i.length>0))return[3,29];R=function(l){var u,h,p,d,f,g,m,v,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O,F,B,N,R,z,q,U,W,_;return y(this,(function(y){switch(y.label){case 0:if(u=i[l],h=u.path,p=n[h],d=t[h],f=function(e,t){return e||te.log("Accepted",h),d&&(d.synctime=Date.now()),t||(n[h]=u),i.splice(l,1),te.setDirty(),!0},!H.allowSyncFile(h,u.folder))return[2,{value:f(!0)}];if(!_y(h)||Lt.isAndroidApp&&/[*?<>"]/.test(h))return H.log("Ignoring remote file name with illegal characters",h,!0),new CI('Sync: Unable to download file with illegal name "'.concat(h,'"')),[2,{value:f(!0,!0)}];if(!H.canSyncPath(a,h))return s++,[2,"continue"];for(H.syncingPath=h,g=l+1;g<i.length;g++)if(i[g].path===h)return H.log("Skipped",h),[2,{value:f(!0,!0)}];if(d)return[3,8];if(u.deleted)return[2,{value:f(!0)}];if(H.setStatus("Downloading "+h),!Lt.isAndroidApp)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,H.syncFileDown(e,u)];case 2:return y.sent(),[3,4];case 3:if((m=y.sent())&&"string"==typeof m.message&&m.message.contains("FILE_NOTCREATED"))return H.log("Ignoring remote file name with illegal characters",h,!0),new CI('Sync: Unable to download file with illegal name "'.concat(h,'"')),[2,{value:f(!0,!0)}];throw m;case 4:return[3,7];case 5:return[4,H.syncFileDown(e,u)];case 6:y.sent(),y.label=7;case 7:return[2,{value:f()}];case 8:return d.folder||d.hash?[3,10]:(H.getHashFromMetadataCache(d),d.hash?[3,10]:(H.setStatus("Computing hash "+h),[4,H.updateHash(d)]));case 9:y.sent(),y.label=10;case 10:if(!d.folder||!u.folder)return[3,15];if(!u.deleted)return[3,14];if(!(x=r.getAbstractFileByPath(h)))return[3,14];if(x instanceof $y&&x.children.length>0)return[2,{value:f(!0)}];H.setStatus("Deleting "+h),H.log("Deleting",h),y.label=11;case 11:return y.trys.push([11,13,,14]),[4,r.delete(x,!0)];case 12:return y.sent(),[3,14];case 13:return v=y.sent(),b=(v?v.message:"")||"Failed to delete folder",H.log(b,h,!0),[3,14];case 14:return[2,{value:f(!0)}];case 15:return d.folder||u.folder||d.hash!==u.hash?p&&(d.folder&&p.folder||d.hash===p.hash)?u.deleted?(H.setStatus("Deleting "+h),(x=r.getAbstractFileByPath(h))?(H.log("Deleting",h),[4,r.delete(x)]):[3,17]):[3,20]:[3,22]:[2,{value:f(!0)}];case 16:return y.sent(),[3,19];case 17:return H.log("Deleting",h),[4,o.remove(h)];case 18:y.sent(),y.label=19;case 19:return[2,{value:f()}];case 20:return H.setStatus("Downloading "+h),[4,H.syncFileDown(e,u)];case 21:return y.sent(),[2,{value:f()}];case 22:return d.folder||!u.folder?[3,24]:(x=r.getAbstractFileByPath(h))instanceof Xy?(w=x.extension,k=w?h.substr(h.length-w.length-1):"",C=h.substr(0,h.length-k.length),E=C+" (Conflicted copy)"+k,H.setStatus("Renaming conflicted file "+h),H.log("Renaming conflicted file",h),[4,r.rename(x,E)]):[3,24];case 23:return y.sent(),H.setDirty(),[2,{value:!0}];case 24:return u.initial&&u.mtime>d.mtime?(H.setStatus("Downloading "+h),[4,H.syncFileDown(e,u)]):[3,26];case 25:return y.sent(),[2,{value:f()}];case 26:if(u.initial||d.folder||u.folder||u.deleted||"md"!==le(h)||u.hash===d.synchash)return[3,47];if(H.setStatus("Merging "+h),H.log("Merging conflicted file",h),!((x=r.getAbstractFileByPath(h))instanceof Xy))return H.log("Merge failed.",h,!0),[2,{value:f(!0)}];S=void 0,y.label=27;case 27:return y.trys.push([27,29,,30]),[4,r.read(x)];case 28:return S=y.sent(),[3,30];case 29:return M=y.sent(),H.log("Merge failed. "+M.toString(),h,!0),[2,{value:f(!0)}];case 30:return S?[3,32]:[4,H.syncFileDown(e,u)];case 31:return y.sent(),[2,{value:f()}];case 32:if(T="",!p||p.deleted)return[3,36];y.label=33;case 33:return y.trys.push([33,35,,36]),D=V,[4,e.pull(p.uid)];case 34:return T=D.apply(void 0,[y.sent()]),[3,36];case 35:return A=y.sent(),H.log("Merge failed. "+A.toString(),h,!0),[2,{value:f(!0)}];case 36:L=void 0,y.label=37;case 37:return y.trys.push([37,39,,40]),P=V,[4,e.pull(u.uid)];case 38:return L=P.apply(void 0,[y.sent()]),[3,40];case 39:return I=y.sent(),H.log("Merge failed. "+I.toString(),h,!0),[2,{value:f(!0)}];case 40:return T===L||S===L?[2,{value:f()}]:L?T?[3,45]:Math.abs(Date.now()-d.ctime)<18e4?(H.app.fileManager.storeTextFileBackup(h,S),H.setStatus("Downloading "+h),[4,r.modify(x,L)]):[3,42]:[2,{value:f()}];case 41:return y.sent(),[2,{value:f()}];case 42:return u.mtime>d.mtime?(H.app.fileManager.storeTextFileBackup(h,S),H.setStatus("Downloading "+h),[4,r.modify(x,L)]):[3,44];case 43:return y.sent(),[2,{value:f()}];case 44:return[2,{value:f()}];case 45:return H.app.fileManager.storeTextFileBackup(h,S),O=XO(T,S,L),[4,r.modify(x,O)];case 46:return y.sent(),H.log("Merge successful",h),[2,{value:f()}];case 47:if(u.folder||u.deleted||!(u.size>0)||!h.startsWith(c))return[3,56];if("json"!==le(h))return[3,54];y.label=48;case 48:return y.trys.push([48,53,,54]),H.setStatus("Merging "+h),H.log("Merging conflicted file",h),N=(B=JSON).parse,[4,o.read(h)];case 49:return!(F=N.apply(B,[y.sent()]))||Array.isArray(F)||"object"!=typeof F?[3,52]:(q=(z=JSON).parse,U=V,[4,e.pull(u.uid)]);case 50:if(!(R=q.apply(z,[U.apply(void 0,[y.sent()])])))return[3,52];for(W in R)R.hasOwnProperty(W)&&(F[W]=R[W]);return[4,o.write(h,JSON.stringify(F,void 0,2))];case 51:return y.sent(),H.log("Merge successful",h),[2,{value:f(!0)}];case 52:return[3,54];case 53:return _=y.sent(),H.log("Merge failed. "+_.toString(),h,!0),[3,54];case 54:return[4,H.syncFileDown(e,u)];case 55:return y.sent(),[2,{value:f()}];case 56:return H.log("Rejected server change",h),[2,{value:f(!0)}]}}))},H=this,z=0,ne.label=26;case 26:return z<i.length?[5,R(z)]:[3,29];case 27:if("object"==typeof(q=ne.sent()))return[2,q.value];ne.label=28;case 28:return z++,[3,26];case 29:if(!this.ready)return[2,!1];for(Y in U=null,_=null,n)if(n.hasOwnProperty(Y)&&(X=n[Y],!t.hasOwnProperty(Y))){if(X.deleted){delete n[Y];continue}if(!this.allowSyncFile(Y,X.folder))continue;X.folder?(!_||X.path.length>_.path.length)&&(_=X):(!U||X.path.length>U.path.length)&&(U=X)}return U?(Y=U.path,this.setStatus("Deleting remote file "+Y),this.log("Deleting remote file",Y),this.syncingPath=Y,[4,e.push(Y,null,!1,!0,0,0,"",null)]):[3,31];case 30:return ne.sent(),U.deleted=!0,this.setDirty(),[2,!0];case 31:return _?(Y=_.path,this.setStatus("Deleting remote folder "+Y),this.log("Deleting remote folder",Y),this.syncingPath=Y,[4,e.push(Y,null,!0,!0,0,0,"",null)]):[3,33];case 32:return ne.sent(),_.deleted=!0,this.setDirty(),[2,!0];case 33:for(Y in j=null,G=null,t)if(t.hasOwnProperty(Y)&&(K=t[Y],this.allowSyncFile(Y,K.folder)))if(this.canSyncPath(a,Y)){if(X=n[Y],zJ&&!K.folder&&X&&X.ctime&&(0===K.ctime||K.ctime>X.ctime)&&!X.folder&&!X.deleted&&(K.ctime=X.ctime),K.folder||!(K.size>103809024))if(X&&!X.deleted){if(!j)if(K.folder){if(!this.canSyncLocalFile(a,K)){s++;continue}X.folder||(!j||K.path.length<j.path.length)&&(j=K)}else if(X.folder){if(!this.canSyncLocalFile(a,K)){s++;continue}_=X}else if(K.hash||this.getHashFromMetadataCache(K),!K.hash||K.hash!==X.hash){if(!this.canSyncLocalFile(a,K)){s++;continue}(!G||K.size<G.size)&&(G=K)}}else{if(!this.canSyncLocalFile(a,K)){s++;continue}K.folder?(!j||K.path.length<j.path.length)&&(j=K):(!G||K.size<G.size)&&(G=K)}}else s++;return j?(Y=j.path,this.syncingPath=Y,this.setStatus("Uploading "+Y),this.log("Uploading",Y),[4,e.push(Y,j.previouspath,!0,!1,0,0,"",null)]):[3,35];case 34:return ne.sent(),j.previouspath="",j.synctime=Date.now(),this.setDirty(),[2,!0];case 35:return G?(Y=G.path,this.syncingPath=Y,this.setStatus("Uploading "+Y),X=n[Y],!G.hash&&(this.getHashFromMetadataCache(G),G.hash&&X&&!X.deleted&&X.hash===G.hash)?(this.setStatus("Comparing "+Y),this.setDirty(),[2,!0]):($=G.ctime,Z=G.mtime,[4,o.readBinary(Y)])):[3,39];case 36:return Q=ne.sent(),ee=G,[4,W(Q)];case 37:return J=ee.hash=ne.sent(),X&&!X.deleted&&X.hash===G.hash?(this.setStatus("Comparing "+Y),this.setDirty(),[2,!0]):(this.log("Uploading file",Y),[4,e.push(Y,G.previouspath,!1,!1,$,Z,J,Q)]);case 38:return ne.sent(),G.synchash=J,this.log("Upload complete",Y),G.previouspath="",G.synctime=Date.now(),this.setDirty(),[2,!0];case 39:return 0===s?(this.log("Fully synced"),this.setStatus("Fully synced"),this.fileRetry={},[2,!1]):(this.setStatus("Indexing..."),[2,!0])}}))}))},t.prototype.setDirty=function(){this.dirty=!0,this.trigger("status-change")},t.prototype.forceSaveData=function(){this.setDirty(),this.requestSaveData()},t.prototype.getHashFromMetadataCache=function(e){var t=this.app.metadataCache.getFileInfo(e.path);t&&Math.ceil(t.mtime)===e.mtime&&t.size===e.size&&(e.hash=t.hash)},t.prototype.syncFileDown=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:return n=t.path,[4,(i=this.vault.adapter).stat(n)];case 1:if(r=y.sent(),!t.folder)return[3,8];if(!r||"folder"!==r.type)return[3,4];if((o=this.localFiles)[n])return[3,3];for(l in a=n.toLowerCase(),s="",o)if(o.hasOwnProperty(l)&&l.toLowerCase()===a){s=l;break}return s?(this.log("Detected case sensitive folder collision, renaming folder",n),[4,i.rename(s,he(n))]):[3,3];case 2:y.sent(),y.label=3;case 3:return[2];case 4:return r&&"file"===r.type?(this.log("Deleting local file",n),[4,i.remove(n)]):[3,6];case 5:y.sent(),y.label=6;case 6:return this.log("Creating local folder",n),[4,i.mkdir(n)];case 7:return y.sent(),[2];case 8:return r&&"folder"===r.type?[4,i.list(n)]:[3,13];case 9:return 0!==(c=y.sent()).files.length||0!==c.folders.length?[3,11]:(this.log("Deleting local folder",n),[4,i.rmdir(n,!0)]);case 10:return y.sent(),[2];case 11:return this.log("Renaming conflicted file",n),[4,i.rename(n,n+" (Conflicted copy)")];case 12:return y.sent(),[2];case 13:return this.log("Downloading file",n),[4,e.pull(t.uid)];case 14:if(!(u=y.sent()))throw new Error("Failed to download file, no data.");return[4,W(u)];case 15:return h=y.sent(),[4,jD(i.promise)];case 16:return y.sent(),[4,i.stat(n)];case 17:if((p=y.sent())&&(!r||p.mtime!==r.mtime||p.size!==r.size))throw new Error("Download cancelled because file was changed locally. Will try again soon.");return r?(d=void 0,t.ctime&&(0===r.ctime||t.ctime<r.ctime)&&(d=t.ctime),(f=this.vault.getAbstractFileByPath(n))instanceof Xy?f.saving?[4,jD(i.promise)]:[3,19]:[3,21]):[3,24];case 18:y.sent(),y.label=19;case 19:return[4,this.vault.modifyBinary(f,u,{ctime:d,mtime:t.mtime})];case 20:return y.sent(),[3,23];case 21:return[4,i.writeBinary(n,u,{ctime:d,mtime:t.mtime})];case 22:y.sent(),y.label=23;case 23:return[3,30];case 24:return g=re(n),(m="/"!==g&&""!==g)?[4,i.exists(g)]:[3,26];case 25:m=!y.sent(),y.label=26;case 26:return m?[4,i.mkdir(g)]:[3,28];case 27:y.sent(),y.label=28;case 28:return[4,i.writeBinary(n,u,{ctime:t.ctime,mtime:t.mtime})];case 29:y.sent(),y.label=30;case 30:(v=this.localFiles[n])&&(v.hash=h,v.synchash=h),this.log("Downloading complete",n),y.label=31;case 31:return[2]}}))}))},t.prototype.updateHash=function(e){return v(this,void 0,Promise,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return e.folder||e.hash?[2,null]:[4,this.vault.adapter.readBinary(e.path)];case 1:return t=i.sent(),n=e,[4,W(t)];case 2:return n.hash=i.sent(),[2,t]}}))}))},t.prototype.updateStatusBar=function(){var e=this.getStatus(),t=this.statusIconEl;t&&(aS(this.plugin.statusBarEl,this.syncStatus,{placement:"top"}),t.removeClass("mod-success","mod-working","mod-error","mod-spin"),"uninitialized"===e?(gb(t,"refresh-cw-off"),t.addClass("mod-error")):"paused"===e?(gb(t,"paused"),t.addClass("mod-working")):"synced"===e?(gb(t,"check-small"),t.addClass("mod-success")):"syncing"===e?(gb(t,"sync-small"),t.addClass("mod-working","mod-spin")):"error"===e&&(gb(t,"sync-small"),t.addClass("mod-error")))},t.prototype.showVersionHistory=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){return new wJ(this.app,this,e).open(),[2]}))}))},t.prototype.getHistory=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listHistory(e,t)];case 2:return[2,n.sent()]}}))}))},t.prototype.getContentForVersion=function(e){return v(this,void 0,Promise,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,this.getServer()];case 1:return[2,t.sent().pull(e)]}}))}))},t.prototype.restoreVersion=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,this.getServer()];case 1:return n=o.sent(),t?[3,3]:[4,n.restore(e)];case 2:return o.sent(),[2];case 3:return r=V,[4,n.pull(e)];case 4:return i=r.apply(void 0,[o.sent()]),[2,this.vault.adapter.write(t,i)]}}))}))},t.prototype.showDeletedFiles=function(e){return v(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listDeleted()];case 2:return(t=n.sent()).reverse(),e?new CJ(this.app,this,OJ.labelDeletedFiles(),t).open():new kJ(this.app,this,OJ.labelDeletedFiles(),t).open(),[2]}}))}))},t.prototype.showConfigFiles=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r;return y(this,(function(o){for(i in e=[],t=this.serverFiles,n=this.app.vault.configDir+"/",t)t.hasOwnProperty(i)&&!(r=t[i]).folder&&r.path.startsWith(n)&&e.push({uid:r.uid,ts:r.mtime,folder:r.folder,path:r.path,relatedpath:"",size:r.size,deleted:r.deleted,device:r.device});return e.sort((function(e,t){return t.ts-e.ts})),new kJ(this.app,this,OJ.labelSettingFiles(),e).open(),[2]}))}))},t.prototype.purge=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[4,e.sent().purge()];case 2:return e.sent(),[2]}}))}))},t.prototype.size=function(){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[4,e.sent().size()];case 2:return[2,e.sent()]}}))}))},t.prototype.openSettings=function(){var e=this.app.setting;e.open(),e.activeTab!==this.settingTab&&e.openTabById(this.id)},t.prototype.showSyncLog=function(){this.vaultId?new MJ(this.app,this).open():this.openSettings()},t.prototype.trigger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.prototype.trigger.apply(this,w([t],n,!1))},t.prototype.on=function(t,n,i){return e.prototype.on.call(this,t,n,i)},t}(Ny),jJ=function(){function e(e,t){this.socket=null,this.queue=new RD,this.notifyQueue=new RD,this.cryptoKey=null,this.keyhash=null,this.justPushed=null,this.cryptoKey=e,this.keyhash=t}return e.prototype.isConnecting=function(){var e=this.socket;return e&&e.readyState===BJ.CONNECTING},e.prototype.isConnected=function(){var e=this.socket;return e&&e.readyState===BJ.OPEN},e.prototype.hasConnection=function(){return!!this.socket},e.prototype.connect=function(e,t,n,i,r,o,a,s){return v(this,void 0,Promise,(function(){var l=this;return y(this,(function(c){return this.hasConnection()?[2]:(this.onReady=a,this.onPush=s,[2,new Promise((function(a,s){var c=new NJ(e),u=RJ.call(c);if(!HJ.call(u,".obsidian.md")&&"127.0.0.1"!==u)return s(new Error("Unable to connect to server."));var h=!1,p=function(e){h||(h=!0,l.disconnect(),s(e))},d=l.socket=new BJ(c);d.binaryType="arraybuffer",d.onclose=function(e){1006===e.code?p(new Error("Unable to connect to server.")):p(new Error("Disconnected. Code: "+e.code+" "+function(e){if(e>=0&&e<=999)return"(Unused)";if(e>=1016){if(e<=1999)return"(For WebSocket standard)";if(e<=2999)return"(For WebSocket extensions)";if(e<=3999)return"(For libraries and frameworks)";if(e<=4999)return"(For applications)"}return FJ.hasOwnProperty(e)?FJ[e]:"(Unknown)"}(e.code)))},d.onopen=function(){l.lastMessageTs=Date.now(),l.heartbeat=window.setInterval((function(){var e=Date.now()-l.lastMessageTs;e>12e4?l.disconnect():e>1e4&&l.send({op:"ping"})}),2e4),l.send({op:"init",token:t,id:n,keyhash:l.keyhash,version:i,initial:r,device:o})},d.onmessage=function(e){var t,n=e.data;if("string"!=typeof n)return p(new Error("Server returned binary"));try{t=JSON.parse(n)}catch(e){return console.error(e),p(new Error("Server JSON failed to parse: "+n))}if("pong"!==t.op){if("err"===t.status)return p(new Error("Failed to authenticated: "+t.msg));if("ok"!==t.res)return p(new Error("Did not respond to login request: "+n));a(),h=!0,d.onmessage=l.onMessage.bind(l),d.onclose=l.disconnect.bind(l),d.onerror=l.disconnect.bind(l)}}}))])}))}))},e.prototype.disconnect=function(){this.socket&&this.socket.close(),this.socket=null,clearInterval(this.heartbeat),this.heartbeat=null;var e=new Error("Disconnected");this.responsePromise&&(this.responsePromise.reject(e),this.responsePromise=null),this.dataPromise&&(this.dataPromise.reject(e),this.dataPromise=null)},e.prototype.pull=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue.queue((function(){return v(t,void 0,void 0,(function(){var t,n,i,r,o,a,s;return y(this,(function(l){switch(l.label){case 0:return[4,this.request({op:"pull",uid:e})];case 1:if((t=l.sent()).deleted)return[3,8];n=t.size,i=t.pieces,r=new ArrayBuffer(n),o=0,a=0,l.label=2;case 2:return a<i?[4,this.dataResponse()]:[3,5];case 3:s=l.sent(),new Uint8Array(r,o,s.byteLength).set(new Uint8Array(s)),o+=s.byteLength,l.label=4;case 4:return a++,[3,2];case 5:return r.byteLength>0?[4,$(r,this.cryptoKey)]:[3,7];case 6:r=l.sent(),l.label=7;case 7:return[2,r];case 8:return[2,null]}}))}))}))]}))}))},e.prototype.push=function(e,t,n,i,r,o,a,s){return v(this,void 0,Promise,(function(){var l=this;return y(this,(function(c){return[2,this.queue.queue((function(){return v(l,void 0,void 0,(function(){var l,c,u,h,p,d,f,g,m,v;return y(this,(function(y){switch(y.label){case 0:return[4,this.encodeStr(e)];case 1:return l=y.sent(),t?[4,this.encodeStr(t)]:[3,3];case 2:return u=y.sent(),[3,4];case 3:u=null,y.label=4;case 4:return c=u,h=n?"":le(ie(e)),n||i?(this.justPushed={path:l,folder:n,deleted:i,mtime:0,hash:""},[4,this.request({op:"push",path:l,relatedpath:c,extension:h,hash:"",ctime:0,mtime:0,folder:n,deleted:i})]):[3,6];case 5:return y.sent(),[2];case 6:return s.byteLength>0?[4,X(s,this.cryptoKey)]:[3,8];case 7:s=y.sent(),y.label=8;case 8:return a?[4,this.encodeStr(a)]:[3,10];case 9:a=y.sent(),y.label=10;case 10:return p=s.byteLength,d=2097152,f=Math.ceil(p/d),this.justPushed={path:l,folder:n,deleted:i,mtime:o,hash:a},[4,this.request({op:"push",path:l,relatedpath:c,extension:h,hash:a,ctime:r,mtime:o,folder:n,deleted:i,size:p,pieces:f})];case 11:if("ok"===y.sent().res)return this.justPushed=null,[2];g=0,y.label=12;case 12:return g<f?(m=g*d,v=Math.min(d,p-m),this.sendBinary(new Uint8Array(s,m,v)),[4,this.response()]):[3,15];case 13:y.sent(),y.label=14;case 14:return g++,[3,12];case 15:return this.justPushed=null,[2]}}))}))}))]}))}))},e.prototype.listDeleted=function(){return v(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return v(e,void 0,void 0,(function(){var e,t,n,i,r,o;return y(this,(function(a){switch(a.label){case 0:return[4,this.request({op:"deleted",suppressrenames:!0})];case 1:e=a.sent(),t=e.items,n=0,i=t,a.label=2;case 2:return n<i.length?(r=i[n],o=r,[4,this.decodeStr(r.path)]):[3,5];case 3:o.path=a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[2,t]}}))}))}))]}))}))},e.prototype.listHistory=function(e,t){return v(this,void 0,Promise,(function(){var n=this;return y(this,(function(i){return[2,this.queue.queue((function(){return v(n,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u;return y(this,(function(h){switch(h.label){case 0:return[4,this.encodeStr(e)];case 1:return n=h.sent(),[4,this.request({op:"history",path:n,last:t})];case 2:i=h.sent(),r=i.items,o=0,a=r,h.label=3;case 3:return o<a.length?(s=a[o],l=s,[4,this.decodeStr(s.path)]):[3,8];case 4:return l.path=h.sent(),c=s,(u=s.relatedpath)?[4,this.decodeStr(s.relatedpath)]:[3,6];case 5:u=h.sent(),h.label=6;case 6:c.relatedpath=u,h.label=7;case 7:return o++,[3,3];case 8:return[2,i]}}))}))}))]}))}))},e.prototype.restore=function(e){return v(this,void 0,Promise,(function(){var t=this;return y(this,(function(n){return[2,this.queue.queue((function(){return v(t,void 0,void 0,(function(){return y(this,(function(t){return[2,this.request({op:"restore",uid:e})]}))}))}))]}))}))},e.prototype.purge=function(){return v(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return e.request({op:"purge"})}))]}))}))},e.prototype.size=function(){return v(this,void 0,Promise,(function(){var e=this;return y(this,(function(t){return[2,this.queue.queue((function(){return e.request({op:"size"})}))]}))}))},e.prototype.onServerPush=function(e){var t=this,n=this.justPushed;return n&&n.path===e.path&&n.folder===e.folder&&n.deleted===e.deleted&&n.mtime===e.mtime&&n.hash===e.hash&&(this.justPushed=null,e.wasJustPushed=!0),this.notifyQueue.queue((function(){return v(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return t=e,[4,this.decodeStr(e.path)];case 1:return t.path=i.sent(),e.hash?(n=e,[4,this.decodeStr(e.hash)]):[3,3];case 2:n.hash=i.sent(),i.label=3;case 3:return this.onPush(e),[2]}}))}))}))},e.prototype.response=function(){return(this.responsePromise=HD()).promise},e.prototype.dataResponse=function(){return(this.dataPromise=HD()).promise},e.prototype.request=function(e,t){return void 0===t&&(t=6e4),v(this,void 0,Promise,(function(){var n,i,r,o,a;return y(this,(function(s){switch(s.label){case 0:n=this.responsePromise=HD(),this.send(e),i=new Error("Timeout"),r=window.setTimeout((function(){return n.reject(i)}),t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.promise];case 2:return o=s.sent(),clearTimeout(r),[3,4];case 3:throw(a=s.sent())===i&&this.disconnect(),a;case 4:if(o.err)throw new Error(o.err);return[2,o]}}))}))},e.prototype.onMessage=function(e){if(this.lastMessageTs=Date.now(),"string"==typeof e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(t){return console.log(e.data),void this.disconnect()}var n=t.op;if("pong"===n)return;if("ready"===n)return void this.onReady(t.version);if("push"===n)return void this.onServerPush(t);var i=this.responsePromise;i&&(this.responsePromise=null,i.resolve(t))}else{var r=this.dataPromise;r&&(this.dataPromise=null,r.resolve(e.data))}},e.prototype.send=function(e){this.socket.send(JSON.stringify(e))},e.prototype.sendBinary=function(e){this.socket.send(e)},e.prototype.encodeStr=function(e){return v(this,void 0,Promise,(function(){var t,n,i,r;return y(this,(function(o){switch(o.label){case 0:return[4,_(t=H(e))];case 1:return n=o.sent(),i=new Uint8Array(n,0,12),r=G,[4,X(t,this.cryptoKey,i)];case 2:return[2,r.apply(void 0,[o.sent()])]}}))}))},e.prototype.decodeStr=function(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=V,[4,$(j(e),this.cryptoKey)];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e}(),GJ=rf.plugins.tagPane,KJ=function(){function e(){this.id="tag-pane",this.name=GJ.name(),this.description=GJ.desc(),this.defaultOn=!0}return e.prototype.init=function(e,t){var n=this;this.app=e,this.plugin=t,t.registerGlobalCommand({id:"tag-pane:open",name:GJ.actionShow(),icon:"lucide-tag",callback:function(){n.app.workspace.ensureSideLeaf(YJ,"right",{active:!0})}}),t.registerViewType(YJ,(function(e){return new JJ(e)}))},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("layout-ready",this.initLeaf,this))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){var e="right";Lt.isMobile&&(e="left"),this.app.workspace.ensureSideLeaf(YJ,e,{reveal:!1})},e}(),YJ="tag",XJ=[["alphabetical","alphabeticalReverse"],["frequency","frequencyReverse"]],$J={alphabetical:rf.plugins.tagPane.labelSortByNameAToZ,alphabeticalReverse:rf.plugins.tagPane.labelSortByNameZToA,frequency:rf.plugins.tagPane.labelSortByFrequencyHighToLow,frequencyReverse:rf.plugins.tagPane.labelSortByFrequencyLowToHigh},ZJ=function(e){function t(t){var n=e.call(this)||this;n.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},n.tag="",n.count=-1,n.vChildren=new rP(n),n.pusherEl=pP(),n.tagView=t;var i=n,r=i.selfEl,o=i.innerEl;return r.addClass("tag-pane-tag"),n.tagTextEl=o.createDiv("tree-item-inner-text"),n.tagCountEl=r.createDiv("tree-item-flair-outer").createSpan("tag-pane-tag-count tree-item-flair"),n.setCollapsible(!0),n.setClickable(!0),n}return f(t,e),t.prototype.onSelfClick=function(e){var t="tag:"+this.tag,n=this.tagView.app.internalPlugins.getPluginById("global-search");if(n){var i=n.instance;if(i){var r=i.getGlobalSearchQuery();if(!hw.isModEvent(e)||""===r)return void i.openGlobalSearch(t);r.contains(t)?i.openGlobalSearch(r.replace(t,"").trim()):i.openGlobalSearch("".concat(r.trim()," ").concat(t))}this.tagView.setFocusedItem(null,!1)}},t.prototype.setTag=function(e){if(this.tag!==e){this.tag=e;var t=this.tagTextEl;e.startsWith("#")&&(e=e.substr(1));var n=e.split("/").last(),i=e.substr(0,e.length-n.length);t.empty(),t.createSpan({cls:"tag-pane-tag-parent",text:i}),t.createSpan({cls:"tree-item-inner-text",text:n})}return this},t.prototype.setCount=function(e){this.count!==e&&(this.count=e,this.tagCountEl.setText(String(e)));return this},t.prototype.updateCollapsed=function(t){return v(this,void 0,Promise,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,e.prototype.updateCollapsed.call(this,t)];case 1:return n.sent(),this.tagView.infinityScroll.invalidate(this),this.tagView.requestSaveFolds(),[2]}}))}))},t.prototype.setCollapsed=function(t,n){return t||this.tagView.setIsAllCollapsed(!1),e.prototype.setCollapsed.call(this,t,n)},t}(mO),QJ=function(e){this.vChildren=new rP(this),this.info={height:0,width:0,childLeft:0,childLeftPadding:0,childTop:0,computed:!1,queued:!1,hidden:!1,next:!1},this.pusherEl=pP(),this.el=e,this.childrenEl=e.createDiv()},JJ=function(e){function t(t){var n=e.call(this,t)||this;n.icon="lucide-tags",n.tagDoms={},n.tagPaneEl=null,n.sortOrder="frequency",n.useHierarchy=!1;var i=n.containerEl;n.emptyEl=createDiv({cls:"pane-empty tag-pane-empty",text:GJ.labelNoTags()});var r=new YG(n.app,i);r.addNavButton("lucide-sort-asc",rf.plugins.fileExplorer.actionChangeSort(),(function(e){e.preventDefault();for(var t=new fw,i=n.sortOrder,r=0,o=XJ;r<o.length;r++){for(var a=function(e){var r=$J[e]();t.addItem((function(t){return t.setTitle(r).setChecked(e===i).onClick((function(){n.sortOrder=e,n.requestUpdateTags(),n.app.workspace.requestSaveLayout()}))}))},s=0,l=o[r];s<l.length;s++){a(l[s])}t.addSeparator()}t.showAtMouseEvent(e)})),n.useHierarchyEl=r.addNavButton("lucide-folder-tree",GJ.actionShowNestedTags(),(function(){return n.setUseHierarchy(!n.useHierarchy)})),n.collapseOrExpandAllEl=r.addNavButton("lucide-chevrons-up-down",GJ.actionExpandAll(),(function(){n.setCollapseAll(!n.isAllCollapsed)}));var o=n.tagPaneEl=i.createDiv("tag-container");return n.infinityScroll=new fP(o),n.infinityScroll.rootEl=new QJ(o),n.scope=new cw(n.app.scope),n.scope.register([],"Enter",n.onKeyEnterInFocus.bind(n)),n.scope.register(["Mod"],"Enter",n.onKeyEnterInFocus.bind(n)),n.initializeKeyboardNav(n.scope),i.addEventListener("click",(function(){n.setFocusedItem(null)})),n.requestUpdateTags=rt(n.updateTags.bind(n),10),n.setUseHierarchy(!0),n}return f(t,e),t.prototype.getNodeId=function(e){return e===this.root?"root":e.tag.toLowerCase()},t.prototype.getFoldKey=function(){return"tag-pane-fold"},t.prototype.isItem=function(e){return e instanceof ZJ},t.prototype.onKeyEnterInFocus=function(e){e.preventDefault(),this.isItem(this.focusedItem)&&this.focusedItem.onSelfClick(e)},t.prototype.getDisplayText=function(){return GJ.shortName()},t.prototype.getViewType=function(){return YJ},t.prototype.getState=function(){var t=e.prototype.getState.call(this);return t.sortOrder=this.sortOrder,t.useHierarchy=this.useHierarchy,t},t.prototype.setState=function(t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return[4,e.prototype.setState.call(this,t,n)];case 1:return o.sent(),i=t.sortOrder,r=t.useHierarchy,String.isString(i)&&$J.hasOwnProperty(i)&&(this.sortOrder=i),isBoolean(r)&&this.setUseHierarchy(r),this.requestUpdateTags(),[2]}}))}))},t.prototype.onload=function(){this.registerEvent(this.app.metadataCache.on("finished",this.requestUpdateTags,this)),this.requestUpdateTags()},t.prototype.onResize=function(){this.infinityScroll.onResize()},t.prototype.setIsAllCollapsed=function(e){this.isAllCollapsed!==e&&(this.isAllCollapsed=e,e?(gb(this.collapseOrExpandAllEl,"lucide-chevrons-up-down"),aS(this.collapseOrExpandAllEl,GJ.actionExpandAll())):(gb(this.collapseOrExpandAllEl,"lucide-chevrons-down-up"),aS(this.collapseOrExpandAllEl,GJ.actionCollapseAll())))},t.prototype.setUseHierarchy=function(e){this.useHierarchy!==e&&(this.collapseOrExpandAllEl.ariaDisabled=String(!e),this.useHierarchy=e,this.useHierarchyEl.toggleClass("is-active",e),this.requestUpdateTags(),this.app.workspace.requestSaveLayout())},t.prototype.updateTags=function(){var e=this,t=this.app,n=this.tagDoms,i=t.metadataCache.getTags(),r=Object.keys(i),o=this.tagDoms={},a=this.app.loadLocalStorage("tag-pane-fold"),s=new Set(a||null);if(this.root.vChildren.clear(),this.focusedItem=null,r.length>0){this.emptyEl.detach();var l=this.sortOrder,c=null;if("alphabetical"===l)c=function(e,t){return JL(e.tag,t.tag)};else if("alphabeticalReverse"===l)c=function(e,t){return-JL(e.tag,t.tag)};else{var u="frequencyReverse"===l?-1:1;c=function(e,t){var n=e.tag,r=t.tag,o=i[n],a=i[r];return o===a?JL(n,r):u*(a-o)}}var h=this.useHierarchy,p=function(t,n){var i=t.split("/").last();if(h&&i!==t){var r=t.substr(0,t.length-i.length-1),a=r.toLowerCase(),s=o[a];s||((s=new ZJ(e)).setTag(r),o[a]=s),-1===s.vChildren.children.indexOf(n)&&s.vChildren.addChild(n),p(r,s)}else-1===e.root.vChildren.children.indexOf(n)&&e.root.vChildren.addChild(n)};for(var d in n)n.hasOwnProperty(d)&&n[d].vChildren.clear();for(var f=0,g=r;f<g.length;f++){(b=n[d=(y=g[f]).toLowerCase()]||new ZJ(this)).setTag(y),o[d]=b}for(var m=0,v=r;m<v.length;m++){var y;d=(y=v[m]).toLowerCase();p(y,o[d])}for(var d in o)if(o.hasOwnProperty(d)){var b,w=(b=o[d]).vChildren.hasChildren();b.setCollapsible(w),b.setCount(i[b.tag]||0),w&&b.setCollapsed(s.has(d),!1)}this.root.vChildren.sort(c),sP(this.root,(function(e){oP(e)&&e.vChildren.sort(c)}))}else this.tagPaneEl.appendChild(this.emptyEl);this.infinityScroll.queueCompute()},t}(Q$),e0=function(){function e(){this.id="templates",this.name=rf.plugins.templates.name(),this.description=rf.plugins.templates.desc(),this.defaultOn=!0,this.app=null,this.plugin=null,this.options={},this.templateFiles=[]}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerRibbonItem(rf.plugins.templates.actionInsert(),"lucide-files",this.onInsertTemplate.bind(this)),t.registerGlobalCommand({id:"insert-template",name:rf.plugins.templates.actionInsert(),icon:"lucide-copy",callback:this.onInsertTemplate.bind(this)}),t.registerGlobalCommand({id:"insert-current-date",name:rf.plugins.templates.actionInsertCurrentDate(),icon:"lucide-calendar-days",editorCallback:this.insertCurrentDate.bind(this)}),t.registerGlobalCommand({id:"insert-current-time",name:rf.plugins.templates.actionInsertCurrentTime(),icon:"lucide-clock",editorCallback:this.insertCurrentTime.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},t.addSettingTab(new n0(e,t,this)),[2]}}))}))},e.prototype.insertTemplate=function(e){var t;return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p,d;return y(this,(function(f){switch(f.label){case 0:return n=this.app,i=n.fileManager,r=n.workspace,o=n.vault,(a=r.activeEditor)?(s=r.activeEditor,l=s.editor,c=s.file,[4,o.cachedRead(e)]):[2];case 1:u=AB(u=f.sent(),{title:null!==(t=null==c?void 0:c.basename)&&void 0!==t?t:""},{dateFormat:this.options.dateFormat,timeFormat:this.options.timeFormat});try{d=i.getContentsAndFrontmatter(u),h=d.content,p=d.frontmatter}catch(e){return new CI(rf.plugins.templates.msgFailInvalidTemplateProperties()),[2]}return l.replaceSelection(h),p&&a instanceof iK&&a.metadataEditor.insertProperties(p),l.focus(),[2]}}))}))},e.prototype.onInsertTemplate=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s=this;return y(this,(function(l){return t=(e=this).app,n=e.options,(i=n.folder)&&String.isString(i)?(r=he(Fd(i).normalize("NFC")),(o=t.vault.getAbstractFileByPath(r))&&o instanceof $y?o.isRoot()?(new CI(rf.plugins.templates.msgFailInvalidFolder()),[2]):(this.templateFiles=[],(a=function(e){for(var t=0,n=e.children;t<n.length;t++){var i=n[t];i instanceof Xy&&"md"===i.extension?s.templateFiles.push(i):i instanceof $y&&a(i)}})(o),new t0(t,this).open(),[2]):(new CI(rf.plugins.templates.msgFailFolderNotFound({folderOption:i})),[2])):(new CI(rf.plugins.templates.msgNoFolderSet()),[2])}))}))},e.prototype.insertCurrentDate=function(e){var t=this.options.dateFormat||TB,n=window.moment().format(t);this.insertText(e,n)},e.prototype.insertCurrentTime=function(e){var t=this.options.timeFormat||DB,n=window.moment().format(t);this.insertText(e,n)},e.prototype.insertText=function(e,t){var n=e.getCursor("head");e.transaction({changes:[{text:t,from:n}],selection:{from:kf(n,t.length)}})},e}(),t0=function(e){function t(t,n){var i=e.call(this,t)||this;return i.emptyStateText=rf.plugins.templates.msgNoTemplatesFound(),i.templatePlugin=null,i.templatePlugin=n,i.setInstructions([{command:"↑↓",purpose:rf.plugins.templates.instructionNavigate()},{command:"↵",purpose:rf.plugins.templates.instructionInsert()},{command:"esc",purpose:rf.plugins.templates.instructionDismiss()}]),i.setPlaceholder(rf.plugins.templates.promptTypeTemplate()),i.scope.register(null,"Tab",(function(){return!1})),i}return f(t,e),t.prototype.getItems=function(){return this.templatePlugin.templateFiles},t.prototype.onChooseItem=function(e){this.templatePlugin.insertTemplate(e)},t.prototype.getItemText=function(e){return e.basename},t}(eG),n0=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(rf.plugins.templates.optionTemplateFolderLocation()).setDesc(rf.plugins.templates.optionTemplateFolderLocationDescription()).addText((function(t){t.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new T$(e.app,t.inputEl,(function(e){return"/"!==e.path}))}));var i=document.createDocumentFragment();i.appendText(rf.plugins.templates.optionTemplateDateFormatDescription(Xd)),i.createEl("br"),i.appendText(rf.plugins.templates.optionTemplateDateFormatDescription2(Xd)),i.createEl("br"),i.appendText(rf.plugins.dailyNotes.labelReferToSyntax()),i.createEl("a",{text:rf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(rf.plugins.dailyNotes.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new YI(t).setName(rf.plugins.templates.optionTemplateDateFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat(TB).setValue(n.dateFormat).onChange((function(t){n.dateFormat=t.trim(),e.plugin.saveData(n)}))}));var o=document.createDocumentFragment();o.appendText(rf.plugins.templates.optionTemplateTimeFormatDescription(Xd)),o.createEl("br"),o.appendText(rf.plugins.templates.optionTemplateTimeFormatDescription2(Xd)),o.createEl("br"),o.appendText(rf.plugins.dailyNotes.labelReferToSyntax()),o.createEl("a",{text:rf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),o.createEl("br"),o.appendText(rf.plugins.dailyNotes.labelSyntaxLivePreview());var a=o.createEl("b","u-pop");new YI(t).setName(rf.plugins.templates.optionTemplateTimeFormat()).setDesc(o).addMomentFormat((function(t){return t.setSampleEl(a).setDefaultFormat(DB).setValue(n.timeFormat).onChange((function(t){n.timeFormat=t.trim(),e.plugin.saveData(n)}))}))},t}(IG),i0="YYYYMMDDHHmm",r0=rf.plugins.uniqueNoteCreator,o0=function(){function e(){this.id="zk-prefixer",this.name=r0.name(),this.description=r0.desc(),this.app=null,this.plugin=null,this.options={}}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerRibbonItem(r0.actionCreateNote(),"sheets-in-box",this.onCreateNote.bind(this)),t.registerGlobalCommand({id:"zk-prefixer",name:r0.actionCreateNote(),icon:"box-glyph",callback:this.onCreateNote.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return n=this,[4,t.loadData()];case 1:return n.options=i.sent()||{},t.addSettingTab(new a0(e,t,this)),[2]}}))}))},e.prototype.onCreateNote=function(e){return v(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,v,b,w,k,C,E,x,S,M;return y(this,(function(y){switch(y.label){case 0:if(n=(t=this).app,i=t.options,r=n.vault.getAllLoadedFiles(),o=function(e){for(var t=!1,n=0,i=r;n<i.length;n++){var o=i[n];if(o instanceof Xy&&o.name.startsWith(e)){t=!0;break}}return t},a=window.moment(),s=this.getFormat(),l=a.format(s),o(l)){for(c="",u=0,h=["m","h","d","w","M","y"];u<h.length;u++)if(p=h[u],(f=a.clone().add(1,p).format(s))!==l){c=p;break}if(!c)return new CI(r0.msgFailedToGenerate({format:s})),[2];for(d=a.clone();;)if(f=d.add(1,c).format(s),!o(f)){l=f;break}}if(g=this.app.workspace.getLeaf(hw.isModEvent(e||this.app.lastEvent)),(v=i.folder)&&String.isString(v)){if(b=he(Fd(v).normalize("NFC")),!((w=n.vault.getAbstractFileByPath(b))instanceof $y))return new CI(r0.msgFolderNotFound({folderOption:v})),[2];m=w}else m=n.fileManager.getNewFileParent("",l);y.label=1;case 1:return y.trys.push([1,7,,8]),(C=i.template)?(E=n.metadataCache.getFirstLinkpathDest(C,""))?[4,n.vault.cachedRead(E)]:(new CI(r0.msgTemplateFileNotFound({template:C})),[2]):[3,4];case 2:return x=y.sent(),S=AB(x,{title:l},{}),[4,n.fileManager.createNewMarkdownFile(m,l,S)];case 3:return k=y.sent(),[3,6];case 4:return[4,n.fileManager.createNewMarkdownFile(m,l)];case 5:k=y.sent(),y.label=6;case 6:return[3,8];case 7:return M=y.sent(),new CI(M.toString()),[2];case 8:return[4,g.openFile(k,{state:{mode:"source"},eState:{rename:"end"}})];case 9:return y.sent(),[2]}}))}))},e.prototype.getFormat=function(){var e=this.options.format;return e&&String.isString(e)?e:i0},e}(),a0=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.instance=i,r}return f(t,e),t.prototype.display=function(){var e=this,t=this.containerEl;t.empty();var n=this.instance.options;new YI(t).setName(r0.optionNewFileLocation()).setDesc(r0.optionNewFileLocationDescription()).addText((function(t){t.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).setValue(n.folder).onChange((function(t){n.folder=t.trim(),e.plugin.saveData(n)})),new M$(e.app,t.inputEl)})),new YI(t).setName(r0.optionTemplateFile()).setDesc(r0.optionTemplateFileDescription()).addText((function(t){t.setPlaceholder(r0.optionTemplateFilePlaceholder()).setValue(n.template).onChange((function(t){n.template=t.trim(),e.plugin.saveData(n)})),new W$(e.app,t.inputEl)}));var i=document.createDocumentFragment();i.appendText(rf.plugins.dailyNotes.labelReferToSyntax()),i.createEl("a",{text:rf.plugins.dailyNotes.labelSyntaxLink(),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(rf.plugins.dailyNotes.labelSyntaxLivePreview());var r=i.createEl("b","u-pop");new YI(t).setName(r0.optionIdFormat()).setDesc(i).addMomentFormat((function(t){return t.setSampleEl(r).setDefaultFormat(i0).setValue(n.format).onChange((function(t){n.format=t.trim(),e.plugin.saveData(n)}))}))},t}(IG);var s0="\nlet pattern = /(?:[0-9]+(?:(?:,|\\.)[0-9]+)*|[\\-'’".concat(aL.source,"஀-௿가-힣ꥠ-ꥼힰ-ퟆ])+|[").concat(/\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5\uAC00-\uD7A3\uA960-\uA97C\uD7B0-\uD7C6/.source,"]/g;\nfunction countWords(str) {\n\tpattern.lastIndex = 0;\n\tlet m = str.match(pattern);\n\treturn m ? m.length : 0;\n}\n\nself.onmessage = function (e) {\n\ttry {\n\t\tself.postMessage(countWords(e.data));\n\t} catch (e) {\n\t\tconsole.error('WordCount', e);\n\t}\n};\n"),l0=function(){function e(){this.id="word-count",this.name=rf.plugins.wordCount.name(),this.description=rf.plugins.wordCount.desc(),this.defaultOn=!0,this.worker=null,this.wordEl=null,this.charEl=null,this.mobileInfoEl=null,this.wordCount=0,this.charCount=0,this.requestUpdate=rt(this.update.bind(this),200)}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerStatusBarItem(),t.registerMobileFileInfo(this.updateMobileFileInfo.bind(this))},e.prototype.onEnable=function(e,t){t.registerEvent(e.workspace.on("file-open",this.onUpdate,this)),t.registerEvent(e.workspace.on("quick-preview",this.onQuickPreview,this)),this.worker=function(e,t){return new Worker(URL.createObjectURL(new Blob([e],{type:"text/javascript"})),t)}(s0),this.worker.onmessage=this.onMessage.bind(this);var n=t.statusBarEl;n&&(n.empty(),this.wordEl=n.createSpan({cls:"status-bar-item-segment",text:""}),this.charEl=n.createSpan({cls:"status-bar-item-segment",text:""})),this.onUpdate()},e.prototype.onDisable=function(){this.worker.terminate(),this.worker=null,this.wordEl=null,this.charEl=null},e.prototype.onUpdate=function(){return v(this,void 0,void 0,(function(){var e,t,n;return y(this,(function(i){switch(i.label){case 0:return e="",t=!1,(n=this.app.workspace.getActiveFileView())&&n.file&&("md"===n.file.extension||n instanceof T_&&n.isPlaintext)?[4,this.app.vault.cachedRead(n.file)]:[3,2];case 1:e=i.sent(),t=!0,i.label=2;case 2:return this.updateCharCount(e.length),this.requestUpdate(e),this.plugin.statusBarEl.toggle(t),[2]}}))}))},e.prototype.onQuickPreview=function(e,t){this.app.workspace.getActiveFile()===e&&(this.updateCharCount(t.length),this.requestUpdate(t))},e.prototype.update=function(e){e?this.worker.postMessage(e):(this.updateWordCount(0),this.updateMobileFileInfo())},e.prototype.onMessage=function(e){this.updateWordCount(e.data),this.updateMobileFileInfo()},e.prototype.updateWordCount=function(e){this.wordCount=e;var t=this.wordEl;t&&t.setText(rf.nouns.wordWithCount({count:e}))},e.prototype.updateCharCount=function(e){this.charCount=e;var t=this.charEl;t&&t.setText(rf.nouns.characterWithCount({count:e}))},e.prototype.updateMobileFileInfo=function(e){if(e?this.mobileInfoEl=e:e=this.mobileInfoEl,e){var t=rf.nouns.wordWithCount({count:this.wordCount}),n=rf.nouns.characterWithCount({count:this.charCount}),i=rf.plugins.fileExplorer.tooltipFoldersFilesCount({fileCount:t,folderCount:n});e.setText(i)}},e}(),c0=rf.plugins.workspaces,u0=function(){function e(){this.id="workspaces",this.name=c0.name(),this.description=c0.desc(),this.workspaces={},this.activeWorkspace=""}return e.prototype.init=function(e,t){this.app=e,this.plugin=t,t.registerGlobalCommand({id:"workspaces:load",name:c0.actionLoadLayout(),icon:"lucide-layout",callback:this.onLoad.bind(this)}),t.registerGlobalCommand({id:"workspaces:save-and-load",name:c0.actionSaveAndLoadLayout(),icon:"lucide-layout",callback:this.onSaveAndLoad.bind(this)}),t.registerRibbonItem(c0.actionManageLayouts(),"lucide-layout",this.onOpenModal.bind(this)),t.registerGlobalCommand({id:"workspaces:open-modal",name:c0.actionManageLayouts(),icon:"lucide-layout",callback:this.onOpenModal.bind(this)})},e.prototype.onEnable=function(e,t){return v(this,void 0,Promise,(function(){var e;return y(this,(function(n){switch(n.label){case 0:return[4,t.loadData()];case 1:return(e=n.sent())&&e.workspaces?(this.workspaces=e.workspaces||{},this.activeWorkspace=e.active||""):this.workspaces=e||{},[2]}}))}))},e.prototype.onDisable=function(e,t){return v(this,void 0,Promise,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,t.saveData(this.workspaces)];case 1:return e.sent(),[2]}}))}))},e.prototype.onOpenModal=function(){new h0(this.app,this).open()},e.prototype.onLoad=function(){return new p0(this.app,this,!1).open(),!1},e.prototype.onSaveAndLoad=function(){return new p0(this.app,this,!0).open(),!1},e.prototype.saveWorkspace=function(e){this.workspaces[e]=this.app.workspace.getLayout(),this.saveData()},e.prototype.setActiveWorkspace=function(e){this.activeWorkspace=e,this.saveData()},e.prototype.loadWorkspace=function(e){var t=this.workspaces[e];t&&(this.activeWorkspace=e,this.app.workspace.changeLayout(t),this.saveData())},e.prototype.deleteWorkspace=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return delete this.workspaces[e],[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.saveData=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.plugin.saveData({workspaces:this.workspaces,active:this.activeWorkspace})];case 1:return e.sent(),[2]}}))}))},e}(),h0=function(e){function t(t,n){var i=e.call(this,t)||this;return i.plugin=n,i.titleEl.setText(c0.actionManageLayouts()),i}return f(t,e),t.prototype.onOpen=function(){var e=this,t=this.contentEl,n=this.plugin;t.empty(),t.createDiv("list-item",(function(t){var n=e.nameEl=t.createEl("input",{cls:"list-item-part mod-extended",type:"text"});n.placeholder=c0.placeholderSaveCurrentLayoutAs(),n.addEventListener("keypress",(function(t){t.isComposing||"Enter"!==t.key||e.onFinish()})),t.createEl("button",{cls:"list-item-part",text:c0.buttonSave()}).addEventListener("click",e.onFinish.bind(e))}));var i=this.plugin.workspaces;Object.keys(i).length>0&&t.createEl("hr"),t.createDiv({},(function(t){var r=function(r){i.hasOwnProperty(r)&&t.createDiv("list-item",(function(t){t.createDiv({cls:"list-item-part mod-extended",text:r}),t.createEl("button",{cls:"list-item-part",text:c0.buttonLoad()},(function(t){t.addEventListener("click",(function(){n.loadWorkspace(r),e.close()}))})),t.createDiv("list-item-part clickable-icon",(function(t){gb(t,"lucide-x"),aS(t,c0.tooltipDeleteLayout()),t.addEventListener("click",(function(){return v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,n.deleteWorkspace(r)];case 1:return e.sent(),new CI(c0.msgDeleteLayoutSuccess()),this.onOpen(),[2]}}))}))}))}))}))};for(var o in i)r(o)})),this.nameEl.focus()},t.prototype.onClose=function(){this.contentEl.empty()},t.prototype.onFinish=function(){var e=this.nameEl.value.trim();e?(this.plugin.saveWorkspace(e),this.plugin.setActiveWorkspace(e),new CI(c0.msgSaveLayoutSuccess()),this.nameEl.value="",this.onOpen()):new CI(c0.msgEnterName())},t}(LI),p0=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.emptyStateText=c0.labelNoLayoutFound(),r.plugin=n,r.shouldSave=i,r.setPlaceholder(c0.placeholderTypeToSearchLayouts()),r}return f(t,e),t.prototype.getItems=function(){return Object.keys(this.plugin.workspaces)},t.prototype.getEmptySearchItems=function(){return this.getItems()},t.prototype.getItemText=function(e){return e},t.prototype.renderSuggestion=function(e,t){var n=e.item;oL(t,this.getItemText(n),e.match?e.match.matches:null)},t.prototype.onChooseItem=function(e){if(this.shouldSave){var t=this.plugin,n=t.workspaces,i=t.activeWorkspace;i&&n[i]&&this.plugin.saveWorkspace(i)}this.plugin.loadWorkspace(e)},t}(eG),d0=function(){function e(e,t){this.app=e,this.containerEl=t}return e.prototype.registerStatusBarItem=function(){return this.containerEl.createDiv("status-bar-item")},e}();function f0(e){return e.replace(/["]/g,"").split(",").map((function(e){return e.trim()})).filter((function(e){return e}))}function g0(e){return e.map((function(e){return e.contains(" ")?'"'.concat(e,'"'):e})).join(", ")}function m0(e){return v(this,void 0,Promise,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return""===e?[2,!0]:[4,(t=document.fonts).ready];case 1:return n.sent(),[2,t.check('12px "'.concat(e,'"'))]}}))}))}var v0=rf.setting.appearance,y0=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;o.setTitle(n),o.values=i,o.descEl=o.contentEl.createDiv(),o.fontListEl=o.contentEl.createDiv("setting-font-list");var a=null,s=null,l=null,c=function(){var e=l.getValue();e&&!o.values.contains(e)&&(o.values.push(e),o.display()),l.setValue(""),a.extraSettingsEl.hide()};return new YI(o.contentEl).setName(v0.labelFontName()).addExtraButton((function(e){return e.setIcon("lucide-alert-circle").setTooltip(v0.msgFontNotFound()).then((function(e){a=e,e.extraSettingsEl.addClass("mod-warning"),e.extraSettingsEl.hide()}))})).addText((function(e){l=e,e.setPlaceholder(v0.optionFontPlaceholder()),e.onChange((function(e){return v(o,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return[4,m0(e)];case 1:return t=n.sent(),a.extraSettingsEl.toggle(!t),[2]}}))}))}));var n=e.inputEl;n.addEventListener("focus",(function(){o.modalEl.style.transition="unset",ze((function(){o.modalEl.style.transition=""})),s||((s=new b0(t,n)).onSelect((function(e,t){c(),t.instanceOf(MouseEvent)&&n.blur()})),E0.then((function(){s.onInputChange()})))})),n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&c()}))})).addButton((function(e){return e.setButtonText(rf.interface.buttonAdd()).onClick(c)})),o.addButton("mod-cta",rf.dialogue.buttonSave(),(function(){o.close(),r(o.values)})),o.addCancelButton(),o}return f(t,e),t.prototype.onOpen=function(){this.display()},t.prototype.display=function(){var e=this,t=this,n=t.fontListEl,i=t.descEl,r=t.values;0===r.length?i.setText(v0.labelNoCustomFontSet()):i.setText(v0.labelFontApplied()),n.empty();for(var o=function(t){n.createDiv("mobile-option-setting-item",(function(i){i.createSpan({cls:"mobile-option-setting-item-name",text:t}).style.fontFamily=t;var o=i.createSpan("mobile-option-setting-item-option-icon");m0(t).then((function(e){e?(o.addClass("mod-success"),gb(o,"lucide-check-circle-2"),aS(o,v0.msgFontFound())):(o.addClass("mod-warning"),gb(o,"lucide-alert-circle"),aS(o,v0.msgFontNotFound()))})),i.createDiv("clickable-icon mobile-option-setting-item-option-icon",(function(n){gb(n,"lucide-x"),aS(n,rf.interface.deleteActionShortName()),n.addEventListener("click",(function(){r.remove(t),e.display()}))})),i.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(o){gb(o,"lucide-menu"),aS(o,rf.interface.dragToRearrange()),Et(i,i,n,5,(function(){return null}),(function(n){r.remove(t),r.splice(n,0,t),e.display()}))}))}))},a=0,s=r;a<s.length;a++){o(s[a])}},t}(PI),b0=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.fonts=function(){var e=this;if(k0)return k0;k0=["Inter","Source Code Pro"];var t=function(t,n){return v(e,void 0,void 0,(function(){var e,i,r,o;return y(this,(function(a){switch(a.label){case 0:e=0,i=0,r=n,a.label=1;case 1:return i<r.length?(o=r[i],C0.has(o)?[3,3]:(C0.add(o),t.check('12px "'.concat(o,'"'))&&k0.push(o),++e%10!=0?[3,3]:[4,new Promise((function(e){return dt(e,0)}))])):[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return k0.sort(),[2]}}))}))};return E0=function(){return v(e,void 0,void 0,(function(){var e,n,i;return y(this,(function(r){switch(r.label){case 0:return[4,(e=document.fonts).ready];case 1:if(r.sent(),n=[],!Lt.isDesktopApp)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,It("get-fonts").getFonts()];case 3:return i=r.sent(),n.push(t(e,i)),[3,5];case 4:return r.sent(),[3,5];case 5:if(!Lt.isMobileApp)return[3,9];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,DD.getFonts()];case 7:return i=r.sent().fonts,n.push(t(e,i)),[3,9];case 8:return r.sent(),[3,9];case 9:return n.push(t(e,w0)),[4,Promise.all(n)];case 10:return r.sent(),[2]}}))}))}(),k0}(),i}return f(t,e),t.prototype.renderSuggestion=function(e,t){t.setText(e),t.style.fontFamily=e},t.prototype.getSuggestions=function(e){var t=[];(e=e.toLowerCase())||t.push("Inter");for(var n=0,i=this.fonts;n<i.length;n++){var r=i[n];r.toLowerCase().contains(e)&&t.push(r)}return t},t.prototype.selectSuggestion=function(t,n){this.setValue(t),this.textInputEl.trigger("input"),this.close(),e.prototype.selectSuggestion.call(this,t,n)},t}(lB),w0=["Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"],k0=null,C0=new Set,E0=Promise.resolve();function x0(e){return String.fromCharCode.apply(String,Array.from(e))}function S0(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function M0(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}var T0=["ic07","ic13","ic08","ic14","ic09","ic10"];var D0=[137,80,78,71,13,10,26,10],A0=[73,72,68,82];var L0=rf.setting.appearance,P0=[{id:"obsidian",nameI18n:"dark-theme"},{id:"moonstone",nameI18n:"light-theme"},{id:"system",nameI18n:"system-theme"}],I0=function(e){function t(t){var n=e.call(this,t)||this;return n.titleEl.setText(rf.setting.appearance.labelModalConfiguration()),n}return f(t,e),t.prototype.onOpen=function(){this.render()},t.prototype.render=function(){var e=this,t=this.contentEl,n=this.app.workspace.leftRibbon;if(t.empty(),Lt.isPhone){var i,r=new YI(t).setName(rf.setting.appearance.optionMobileQuickRibbonItem()).setDesc(rf.setting.appearance.optionMobileQuickRibbonItemDesc()),o=this.app.vault.getConfig("mobileQuickRibbonItem");r.addExtraButton((function(e){gb(i=e.extraSettingsEl,"lucide-menu")})),r.addDropdown((function(t){t.addOption("",L0.optionMobileQuickRibbonDefault());for(var r=0,a=n.items;r<a.length;r++){var s=a[r];t.addOption(s.id,s.title),s.id===o&&(t.setValue(o),gb(i,s.icon))}t.onChange((function(t){e.app.vault.setConfig("mobileQuickRibbonItem",t),e.app.mobileNavbar.updateRibbonMenuItem(),e.render()}))})),t.createEl("hr")}t.createEl("p",{text:rf.setting.appearance.labelModalConfigurationDesc()});for(var a=t.createDiv(""),s=function(t){var i=a.createDiv("mobile-option-setting-item");if(t.hidden)return i.hide(),"continue";i.createSpan("mobile-option-setting-item-remove-icon",(function(i){gb(i,"lucide-minus-circle"),i.addEventListener("click",(function(){t.hidden=!0,n.onChange(!0),e.render()}))})),i.createSpan("mobile-option-setting-item-option-icon",(function(e){return gb(e,t.icon)})),i.createSpan({cls:"mobile-option-setting-item-name",text:t.title}),i.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(e){gb(e,"lucide-menu"),aS(e,rf.interface.dragToRearrange()),Et(e,i,a,5,(function(){return null}),(function(e){n.items.remove(t),n.items.splice(e,0,t),n.onChange(!0)}))}))},l=0,c=n.items;l<c.length;l++){s(c[l])}var u=n.items.filter((function(e){return e.hidden}));if(u.length>0){new YI(t).setName(rf.setting.appearance.labelAdditionalRibbonItems()).setHeading();for(var h=t.createDiv(""),p=function(t){h.createDiv("mobile-option-setting-item",(function(i){i.createSpan("mobile-option-setting-item-add-icon",(function(i){gb(i,"lucide-plus-circle"),i.addEventListener("click",(function(){t.hidden=!1,n.onChange(!0),e.render()}))})),i.createSpan("mobile-option-setting-item-option-icon",(function(e){return gb(e,t.icon)})),i.createSpan({cls:"mobile-option-setting-item-name",text:t.title})}))},d=0,f=u;d<f.length;d++){p(f[d])}}t.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:rf.dialogue.buttonDone()},(function(t){t.addEventListener("click",e.close.bind(e))}))}))},t}(LI),O0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=L0.name(),t.id="appearance",t}return f(t,e),t.prototype.display=function(){return v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a,s,l,c,u,h,p,d,f,g,m,b,w,k,C,E,x,S,M,T,D,A,L,P,I,O,F=this;return y(this,(function(H){for(t=(e=this).containerEl,n=e.app,t.empty(),i=n.customCss,new YI(t).setName(L0.optionBaseTheme()).setDesc(L0.optionBaseThemeDescription()).addDropdown((function(e){e.onChange((function(e){n.changeTheme(e)}));for(var t=0,i=P0;t<i.length;t++){var r=i[t];e.addOption(r.id,L0(r.nameI18n))}e.setValue(n.getTheme())})),new YI(t).setName(L0.optionAccentColor()).setDesc(L0.optionAccentColorDescription()).setClass("mod-toggle").addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){n.setAccentColor(""),r.value=n.getAccentColor()}))})).addColorPicker((function(e){r=e.colorPickerEl,e.setValue(n.getAccentColor()),e.onChange((function(e){n.setAccentColor(e)}))})),o=new YI(t).setName(L0.optionThemes()).setDesc(L0.optionManageThemesDescription()),Lt.isDesktopApp&&o.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip(L0.buttonOpenThemesFolder()).onClick((function(){return v(F,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getThemeFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))})),o.addDropdown((function(e){return e.then((function(e){var t=F.app.customCss;for(var n in e.addOption("",rf.setting.appearance.labelDefaultTheme()),t.themes)e.addOption(n,n);for(var i=0,r=t.oldThemes;i<r.length;i++){n=r[i];t.themes.hasOwnProperty(n)||e.addOption(n,n+" (Legacy)")}var o=t.themes.hasOwnProperty(t.theme)?t.theme:"";e.setValue(o)})).onChange((function(e){F.app.customCss.setTheme(e)}))})),o.addButton((function(e){return e.setButtonText(L0.optionThemeButtonManage()).setCta().onClick((function(){new hG(n,!1,(function(){F.display()})).open()}))})),a=Object.keys(i.themes).length+i.oldThemes.length,s=Object.keys(i.updates).length,new YI(t).setName(L0.labelCurrentThemes()).setDesc(L0.labelCurrentlyInstalled({count:a})+" "+(s>0?L0.msgUpdatesFound({count:s}):"")).then((function(e){s>0?(e.addButton((function(e){return e.setButtonText(L0.buttonViewUpdates()).onClick((function(){new hG(n,!0,(function(){F.display()})).open()}))})),e.addButton((function(e){return e.setCta().setButtonText(L0.buttonUpdateAllThemes()).onClick((function(){return Ib(F.containerEl,(function(){return v(F,void 0,void 0,(function(){var e,t,n;return y(this,(function(r){switch(r.label){case 0:e=0,t=Object.values(i.updates),r.label=1;case 1:return e<t.length?(n=t[e],[4,i.installTheme(n.themeInfo,n.version)]):[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return this.display(),[2]}}))}))}))}))}))):a>0&&e.addButton((function(e){return e.setCta().setButtonText(L0.buttonCheckForUpdates()).onClick((function(){return v(F,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,Ib(this.containerEl,(function(){return i.checkForUpdates()}))];case 1:return e.sent(),this.display(),[2]}}))}))}))}))})),new YI(t).setHeading().setName(L0.optionFont()),(l=function(e,i,r){var o=function(){var e=f0(n.vault.getConfig(r)),t=createFragment();if(t.appendText(i),1===e.length){var o=e[0];t.createSpan({text:L0.labelSingleFontCurrentlyInEffect()}),t.createSpan({text:o,cls:"u-pop"})}else if(e.length>1){t.createSpan({text:L0.labelMultipleFontsCurrentlyInEffect()});for(var s=t.createEl("ul"),l=function(e){var t=s.createEl("li","");t.createSpan({text:e}),m0(e).then((function(e){e||(t.appendText(" "),t.createSpan("mod-warning",(function(e){gb(e,"lucide-alert-circle"),aS(e,rf.setting.appearance.msgFontNotFound())})))}))},c=0,u=e;c<u.length;c++){l(o=u[c])}}a.setDesc(t)},a=new YI(t).setName(e).addButton((function(t){return t.setButtonText(L0.optionThemeButtonManage()).onClick((function(){new y0(n,e,f0(n.vault.getConfig(r)),(function(e){n.vault.setConfig(r,e.join(",")),n.updateFontFamily(),o()})).open()}))}));o()})(L0.optionInterfaceFont(),L0.optionInterfaceFontDescription(),"interfaceFontFamily"),l(L0.optionTextFont(),L0.optionTextFontDescription(),"textFontFamily"),l(L0.optionMonospaceFont(),L0.optionMonospaceFontDescription(),"monospaceFontFamily"),h=By.baseFontSize,p=function(e){return c.extraSettingsEl.toggleVisibility(e!==h)},new YI(t).setName(L0.optionFontSize()).setDesc(L0.optionFontSizeDescription()).addExtraButton((function(e){return c=e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){u.setValue(h)}))})).addSlider((function(e){return u=e.setLimits(10,30,1).setDynamicTooltip().setValue(n.vault.getConfig("baseFontSize")).onChange((function(e){n.vault.setConfig("baseFontSize",e),n.updateFontSize(),p(e)}))})),p(u.getValue()),new YI(t).setName(L0.optionFontSizeAction()).setDesc(L0.optionFontSizeActionDescription()).addToggle((function(e){return e.setValue(n.vault.getConfig("baseFontSizeAction")).onChange((function(e){n.vault.setConfig("baseFontSizeAction",e)}))})),new YI(t).setHeading().setName(L0.optionAdvanced()),Lt.isDesktopApp&&new YI(t).setName(L0.optionZoomLevel()).setDesc(L0.optionZoomLevelDescription()).addExtraButton((function(e){return e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){electron.webFrame.setZoomLevel(0),d.setValue(0)}))})).addSlider((function(e){d=e,e.setLimits(-2.5,3,.5),e.setValue(electron.webFrame.getZoomLevel());var t=e.sliderEl,n=function(){return iS(t,"".concat(Math.round(100*Math.pow(1.2,e.getValue())),"%"),{placement:"top"})};t.addEventListener("mouseenter",n),t.addEventListener("input",n),t.addEventListener("mouseleave",rS),t.addEventListener("mouseup",(function(){electron.webFrame.setZoomLevel(e.getValue())}))})),new YI(this.containerEl).setName(rf.setting.editor.optionShowInlineTitle()).setDesc(rf.setting.editor.optionShowInlineTitleDescription()).addToggle((function(e){return e.setValue(F.app.vault.getConfig("showInlineTitle")).onChange((function(e){F.app.vault.setConfig("showInlineTitle",e),F.app.updateInlineTitleDisplay()}))})),new YI(t).setName(rf.setting.appearance.optionConfigureRibbon()).setDesc(rf.setting.appearance.optionConfigureRibbonDesc()).addButton((function(e){return e.setButtonText(rf.dialogue.buttonManage()).onClick((function(){new I0(F.app).open()}))})),Lt.isPhone||new YI(t).setName(rf.setting.appearance.optionShowViewHeader()).setDesc(rf.setting.appearance.optionShowViewHeaderDesc()).addToggle((function(e){return e.setValue(n.vault.getConfig("showViewHeader")).onChange((function(e){n.vault.setConfig("showViewHeader",e),n.updateViewHeaderDisplay()}))})),Lt.isDesktopApp&&(new YI(t).setName(rf.setting.appearance.optionNativeMenus()).setDesc(rf.setting.appearance.optionNativeMenusDesc()).addToggle((function(e){return e.setValue(fw.useNativeMenu).onChange((function(e){n.vault.setConfig("nativeMenus",e),fw.useNativeMenu=e}))})),we||new YI(t).setName(rf.plugins.translucency.name()).setDesc(rf.plugins.translucency.desc()).addToggle((function(e){return e.setValue(n.vault.getConfig("translucency")).onChange((function(e){i.setTranslucency(e)}))})),g=electron.ipcRenderer.sendSync("frame"),new YI(t).setName(L0.optionFrameStyle()).setDesc(L0.optionFrameDescription()).addButton((function(e){f=e,e.setCta().setButtonText(rf.setting.about.buttonRelaunch()).onClick((function(){electron.remote.app.relaunch(),electron.remote.app.quit()})),e.buttonEl.hide()})).addDropdown((function(e){e.onChange((function(e){electron.ipcRenderer.sendSync("frame",e),f.buttonEl.show()})),e.addOption("hidden",L0.optionFrameHidden()),e.addOption("custom",L0.optionFrameObsidian()),e.addOption("native",L0.optionFrameNative()),e.setValue(g||"hidden")}))),Lt.isDesktopApp&&(w=It("path"),k=It("fs"),C=It("url"),E=electron.remote,x=new YI(t).setName(L0.optionCustomIcon()).addExtraButton((function(e){return b=e.setIcon("lucide-rotate-ccw").setTooltip(rf.setting.hotkeys.tooltipRestoreDefault()).onClick((function(){electron.ipcRenderer.sendSync("set-icon",null,null),M(),m.buttonEl.show()}))})).addButton((function(e){return e.setButtonText(rf.dialogue.buttonChoose()).onClick((function(){return v(F,void 0,void 0,(function(){var e,n,i,r,o,a,s,l,c,u,h,p,d,f,g;return y(this,(function(v){switch(v.label){case 0:if(!((e=E.dialog.showOpenDialogSync({title:L0.optionCustomIcon(),properties:["openFile","dontAddToRecent"],filters:[{name:"PNG/ICO/ICNS",extensions:["png","ico","icns"]}]}))&&e.length>0))return[3,3];if(n=e[0],i=le(ie(n)),!["png","ico","icns"].contains(i))return new CI("Supported file types are: png, ico, icns"),[2];if(r=k.readFileSync(n),"icns"===i){if(s=B(r),!(o=function(e){var t=new Uint8Array(e);if(t.length<8||"icns"!==x0(t.slice(0,4)))return null;for(var n=8,i=null;n<t.byteLength;){var r=x0(t.slice(n,n+4)),o=S0(t,n+4),a=T0.indexOf(r);-1!==a&&a>-1&&(i=t.slice(n+8,n+o)),n+=o}return i?R(i):null}(s)))return new CI("This icns file does not have usable icons."),[2];r=N(o),i="png"}if("ico"===i&&!Lt.isWin){if(s=B(r),!(o=function(e){var t=new Uint8Array(e);if(t.length<6)return null;for(var n=function(e,t){return e[t]|e[t+1]<<8}(t,4),i=0,r=null,o=0;o<n;o++){for(var a=6+16*o,s=M0(t,a+12),l=t.slice(s,s+M0(t,a+8)),c=!0,u=0;u<8;u++)if(l[u]!==D0[u]){c=!1;break}if(c){for(var h=0;h<4;h++)if(l[12+h]!==A0[h]){c=!1;break}if(c){var p=S0(l,16),d=S0(l,20);p*d>i&&(i=p*d,r=l)}}}return r?R(r):null}(s)))return new CI("This ico file does not have usable icons."),[2];r=N(o),i="png"}return"png"!==i?[3,2]:(a=new Image,s=B(r),l="data:image/png;base64,".concat(q(s)),[4,new Promise((function(e){var t=function(){return e()};a.addEventListener("load",t),a.addEventListener("error",t),a.src=l}))]);case 1:v.sent(),c=a.naturalWidth,u=a.naturalHeight,(h=t.doc.createElement("canvas")).width=c,h.height=u,(p=h.getContext("2d")).clearRect(0,0,c,u),p.drawImage(a,0,0,c,u),d=Math.floor(3*Math.min(c,u)/32),function(){for(var e=p.getImageData(0,0,c,u),t=function(t,n){return e.data[4*(t*c+n)+3]},n=Math.floor(d/2),i=0;i<n;i++){for(var r=0;r<c;r++)if(t(r,i)>128||t(r,u-i-1)>128)return!1;for(r=0;r<u;r++)if(t(i,r)>128||t(c-i-1,r)>128)return!1}return!0}()||(p.clearRect(0,0,c,u),p.drawImage(a,d,d,c-2*d,u-2*d),f=h.toDataURL("image/png"),g=f.match(/^data:([\w/\-.]+);base64,(.*)/),r=N(z(g[2]))),v.label=2;case 2:electron.ipcRenderer.sendSync("set-icon","icon."+i,r),M(),m.buttonEl.show(),v.label=3;case 3:return[2]}}))}))}))})).addButton((function(e){m=e,e.setCta().setButtonText(rf.setting.about.buttonRelaunch()).onClick((function(){E.app.relaunch(),E.app.quit()}))})),S=function(e){var t=w.join(E.app.getPath("userData"),e),n=C.pathToFileURL(t).href;return n.startsWith("file:///")?n=n.substring("file:///".length):n.startsWith("file://")&&(n="%5C%5C"+n.substring("file://".length)),Lt.resourcePathPrefix+n+"?"+Date.now()},M=function(){var e=electron.ipcRenderer.sendSync("get-icon");b.extraSettingsEl.toggle(!!e),e?x.setDesc(createFragment((function(t){t.createEl("img",{attr:{width:64,height:64,src:S(e)}})}))):x.setDesc(L0.optionCustomIconDesc())},m.buttonEl.hide(),M()),T=i.snippets,D=i.enabledSnippets,A=new YI(t).setHeading().setName(L0.optionCssSnippets()).addExtraButton((function(e){return e.setIcon("lucide-refresh-cw").setTooltip(L0.buttonReloadSnippets()).onClick((function(){return v(F,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.readSnippets()];case 1:return e.sent(),new CI(L0.msgReloadedSnippets()),this.display(),[2]}}))}))}))})),Lt.isDesktopApp&&A.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip(L0.buttonOpenSnippetsFolder()).onClick((function(){return v(F,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getSnippetsFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))})),0===T.length&&new YI(t).setName(L0.labelNoCssSnippetsFound()).setDesc(L0.noSnippetDescription({path:"vault/".concat(i.getSnippetsFolder())})),L=function(e){new YI(t).setName(e).setDesc(L0.optionToggleSnippetDescription({path:"vault/".concat(i.getSnippetPath(e))})).addToggle((function(t){return t.setValue(D.has(e)).onChange((function(t){i.setCssEnabledStatus(e,t)}))}))},P=0,I=T;P<I.length;P++)O=I[P],L(O);return[2]}))}))},t}(_j),F0=rf.setting.thirdPartyPlugin,B0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=F0.name(),t.id="community-plugins",t}return f(t,e),t.prototype.display=function(){this.render(!0)},t.prototype.render=function(e){var t=this,n=this.containerEl;n.empty();var i=this.app.plugins;if(i.isEnabled()){new YI(n).setName(F0.optionRestrictedMode()).setDesc(F0.optionRestrictedModeDescription()).addButton((function(e){return e.setButtonText(F0.buttonTurnOn()).onClick((function(){return v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.setEnable(!1)];case 1:return e.sent(),this.render(),[2]}}))}))}))})),new YI(n).setName(F0.optionBrowseCommunityPlugins()).setDesc(F0.optionBrowseCommunityPluginsDescription()).addButton((function(e){return e.setCta().setButtonText(F0.buttonBrowse()).onClick((function(){return v(t,void 0,void 0,(function(){var e=this;return y(this,(function(t){return new Zj(this.app,(function(){return e.display()})).open(),[2]}))}))}))}));var r=i.manifests,o=i.plugins,a=Object.keys(r),s=i.updates,l=Object.keys(s).length;if(a.sort((function(e,t){return r[e].name.localeCompare(r[t].name)})),new YI(n).setName(F0.labelCurrentPlugins()).setDesc(F0.labelCurrentlyInstalled({count:a.length})+" "+(l>0?F0.msgUpdatesFound({count:l}):"")).then((function(e){l>0?e.addButton((function(e){return e.setCta().setButtonText(F0.buttonUpdateAllPlugins()).onClick((function(){return Ib(n,(function(){return v(t,void 0,void 0,(function(){var e,t,n,r,o;return y(this,(function(a){switch(a.label){case 0:for(t in e=[],s)e.push(t);n=0,a.label=1;case 1:return n<e.length?(r=e[n],s.hasOwnProperty(r)?(o=s[r],[4,i.installPlugin(o.repo,o.version,o.manifest)]):[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return this.render(),[2]}}))}))}))}))})):a.length>0&&e.addButton((function(e){return e.setCta().setButtonText(F0.buttonCheckForUpdates()).onClick((function(){return Ib(n,(function(){return v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.checkForUpdates()];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}))})),new YI(n).setName(F0.labelDebugStartupTime()).setDesc(F0.labelDebugStartupTimeDescription()).addToggle((function(e){return e.setValue("1"===localStorage.getItem("debug-plugin")).onChange((function(e){e?localStorage.setItem("debug-plugin","1"):localStorage.removeItem("debug-plugin")}))})),a.length>0){new YI(n).setName(F0.optionSearchInstalledPlugin()).setDesc(F0.optionSearchInstalledPluginDescription()).addSearch((function(n){return n.setPlaceholder(F0.placeholderSearchInstalledPlugin()).onChange((function(e){t.updateSearch(e)})).then((function(){n.inputEl.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||Lt.isMobile&&wb()})),e&&!Lt.isMobile&&setTimeout((function(){return n.inputEl.focus()}))}))}));var c=new YI(n).setHeading().setName(F0.labelInstalledPlugins()).addExtraButton((function(e){return e.setIcon("lucide-refresh-cw").setTooltip(F0.buttonReloadPlugins()).onClick((function(){return v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.loadManifests()];case 1:return e.sent(),new CI(F0.msgReloadedThirdPartyPlugins()),this.render(),[2]}}))}))}))}));Lt.isDesktopApp&&c.addExtraButton((function(e){return e.setIcon("lucide-folder-open").setTooltip(F0.buttonOpenPluginsFolder()).onClick((function(){return v(t,void 0,void 0,(function(){var e,t;return y(this,(function(n){switch(n.label){case 0:return e=this.app.vault,t=i.getPluginFolder(),[4,e.exists(t)];case 1:return n.sent()?[3,3]:[4,e.createFolder(t)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(t),[2]}}))}))}))}))}for(var u=function(e){if(!r.hasOwnProperty(e)){var a=o[e].manifest;new YI(n).setName(a.name).setDesc(a.description).addToggle((function(e){return e.setValue(!0).onChange((function(e){return v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.disablePluginAndSave(a.id)];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}},h=0,p=Object.keys(o);h<p.length;h++){u(p[h])}this.installedPluginsEl=n.createDiv("installed-plugins-container"),this.updateSearch("")}else{n.createEl("p",{text:F0.labelExitRestrictedModeDescription_1()}),n.createEl("p",{text:F0.labelExitRestrictedModeDescription_2()}),n.createDiv({},(function(e){new YI(e).setName(F0.labelCodeReview()).setDesc(F0.labelCodeReviewDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){gb(e,"lucide-inspect")}))),new YI(e).setName(F0.labelOpenSource()).setDesc(F0.labelOpenSourceDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){gb(e,"lucide-github")}))),new YI(e).setName(F0.labelPeerAudit()).setDesc(F0.labelPeerAuditDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){gb(e,"lucide-users")}))),new YI(e).setName(F0.labelReportMechanism()).setDesc(F0.labelReportMechanismDesc()).settingEl.prepend(createDiv("setting-icon",(function(e){gb(e,"lucide-bug")})))})),n.createEl("p",{text:F0.labelExitRestrictedModeDisableConfirmation()}),n.createEl("p",{cls:"u-center-text"},(function(e){e.createEl("a",{text:F0.labelLearnMore(),href:"https://help.obsidian.md/Community+plugins#Plugin+security",attr:{target:"_blank",rel:"noopener"}})})),n.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:F0.buttonTurnOnCommunityPlugins()}).addEventListener("click",(function(){return v(t,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.plugins.setEnable(!0)];case 1:return e.sent(),this.render(),[2]}}))}))}))}},t.prototype.renderInstalledPlugin=function(e,t,n,i,r){var o,a,s=this,l=this.app.plugins,c=l.plugins,u=l.updates,h=e.id,p=function(){var t=!1,n=!1;l.getPlugin(e.id)&&(t=s.setting.pluginTabs.some((function(t){return t.id===e.id})),Object.keys(s.app.commands.commands).some((function(t){return t.startsWith(e.id+":")}))&&(n=!0)),o.extraSettingsEl.toggle(t),a.extraSettingsEl.toggle(n)},d=new YI(t).setDesc(createFragment((function(t){(e.version&&t.createDiv({text:F0.labelVersion({version:e.version})}),e.author)&&oL(t.createDiv({text:F0.labelByAuthor()}),e.author,i);oL(t.createDiv(),e.description,r)}))).then((function(t){if(u.hasOwnProperty(h)){var i=u[h];t.addButton((function(e){return e.setCta().setButtonText(F0.buttonUpdate()).setTooltip(F0.msgUpdatePlugin({version:i.version})).onClick((function(){return Ib(t.settingEl,(function(){return v(s,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,l.installPlugin(i.repo,i.version,i.manifest)];case 1:return e.sent(),this.render(),[2]}}))}))}))}))}))}oL(t.nameEl,e.name,n)})).addExtraButton((function(t){return o=t.setIcon("lucide-settings").setTooltip(rf.setting.options()).onClick((function(){return s.setting.openTabById(e.id)}))})).addExtraButton((function(t){return a=t.setIcon("lucide-plus-circle").setTooltip(rf.setting.hotkeys.name()).onClick((function(){var t=s.setting.openTabById("hotkeys");t instanceof Xj&&t.setQuery(e.id)}))}));e.fundingUrl&&d.addExtraButton((function(t){return t.setIcon("lucide-heart").setTooltip(F0.labelDonateModalTitle({name:e.name})).onClick((function(){new Qj(s.app,e.name,e.fundingUrl).open()}))})),d.addExtraButton((function(t){return t.setIcon("lucide-trash-2").setTooltip(F0.labelUninstall()).onClick((function(){new PI(s.app).setTitle(F0.labelUninstallPlugin()).setContent(F0.labelUninstallPluginConfirmation()).addButton("mod-warning",F0.labelUninstall(),(function(){return v(s,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,l.uninstallPlugin(e.id)];case 1:return t.sent(),this.render(),[2]}}))}))})).addCancelButton().open()}))})),d.addToggle((function(t){return t.setValue(c.hasOwnProperty(e.id)).onChange((function(n){return v(s,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:return n?[4,l.enablePluginAndSave(e.id)]:[3,2];case 1:return i.sent()||t.setValue(!1),[3,4];case 2:return[4,l.disablePluginAndSave(e.id)];case 3:i.sent(),i.label=4;case 4:return p(),n&&setTimeout(p,100),[2]}}))}))}))}));var f=d.infoEl;f.style.cursor="pointer",f.addEventListener("click",(function(){new Zj(s.app,(function(){return s.display()})).setAutoOpen(h).open()})),p()},t.prototype.updateSearch=function(e){var t=this.app.plugins,n=this.installedPluginsEl;n.empty();var i=t.manifests,r=Object.keys(i);r.sort((function(e,t){return i[e].name.localeCompare(i[t].name)}));for(var o=(e=e.trim().toLowerCase()).split(" "),a=0,s=r;a<s.length;a++){var l=s[a],c=i[l],u=null,h=null,p=null;(!e||(u=nL(o,c.name.toLowerCase()),h=c.author?nL(o,c.author.toLowerCase()):null,p=c.description?nL(o,c.description.toLowerCase()):null,u||h||p))&&this.renderInstalledPlugin(c,n,u,h,p)}},t}(_j),N0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=rf.setting.editor.name(),t.id="editor",t.passedVimTest=!1,t}return f(t,e),t.prototype.display=function(){var e=this;this.containerEl.empty();var t=Lt.isMobile||rB.enable;new YI(this.containerEl).setHeading().setName(rf.setting.editor.sectionGeneral()),new YI(this.containerEl).setName(rf.setting.editor.optionOpenTabInForeground()).setDesc(rf.setting.editor.optionOpenTabInForegroundDescription()).addToggle((function(t){return t.setValue(e.app.vault.getConfig("focusNewTab")).onChange((function(t){e.app.vault.setConfig("focusNewTab",t)}))})),new YI(this.containerEl).setName(rf.setting.editor.optionDefaultNewTabView()).setDesc(rf.setting.editor.optionDefaultNewTabViewDescription()).addDropdown((function(t){return t.addOption("source",rf.setting.editor.optionDefaultNewTabViewEditing()).addOption("preview",rf.setting.editor.optionDefaultNewTabViewReading()).setValue(e.app.vault.getConfig("defaultViewMode")).onChange((function(t){e.app.vault.setConfig("defaultViewMode",t)}))})),t&&new YI(this.containerEl).setName(rf.setting.editor.optionDefaultEditingMode()).setDesc(rf.setting.editor.optionDefaultEditingModeDescription()).addDropdown((function(t){return t.addOption("live-preview",rf.setting.editor.optionDefaultEditingModeLivePreview()).addOption("source",rf.setting.editor.optionDefaultEditingModeSource()).setValue(e.app.vault.getConfig("livePreview")?"live-preview":"source").onChange((function(t){e.app.vault.setConfig("livePreview","live-preview"===t);for(var n=0,i=e.app.workspace.getLeavesOfType(nK);n<i.length;n++){var r=i[n];if(r.view instanceof iK){var o=r.view.getState();o.source="live-preview"!==t,r.setViewState({type:nK,state:o})}}}))})),new YI(this.containerEl).setName(rf.plugins.editorStatus.name()).setDesc(rf.plugins.editorStatus.desc()).addToggle((function(t){var n=e.app.internalPlugins.plugins["editor-status"];t.setValue(n.enabled).onChange((function(e){e?n.enable(!0):n.disable(!0)}))})),new YI(this.containerEl).setHeading().setName(rf.setting.editor.sectionDisplay()),this.addOption("readableLineLength",rf.setting.editor.optionReadableLineLength(),rf.setting.editor.optionReadableLineDescription()),this.addOption("strictLineBreaks",rf.setting.editor.optionStrictLineBreak(),rf.setting.editor.optionStrictLineBreakDescription()),t&&new YI(this.containerEl).setName(rf.setting.editor.optionPropertiesInDocument()).setDesc(rf.setting.editor.optionPropertiesInDocumentDescription()).addDropdown((function(t){return t.addOption("visible",rf.setting.editor.optionPropertiesVisible()).addOption("hidden",rf.setting.editor.optionPropertiesHidden()).addOption("source",rf.setting.editor.optionPropertiesSource()).setValue(e.app.vault.getConfig("propertiesInDocument")).onChange((function(t){e.app.vault.setConfig("propertiesInDocument",t),e.app.workspace.updateOptions()}))})),this.addOption("foldHeading",rf.setting.editor.optionFoldHeading(),rf.setting.editor.optionFoldHeadingDescription()),this.addOption("foldIndent",rf.setting.editor.optionFoldIndent(),rf.setting.editor.optionFoldIndentDescription()),this.addOption("showLineNumber",rf.setting.editor.optionShowLineNumber(),rf.setting.editor.optionShowLineNumberDescription()),this.addOption("showIndentGuide",rf.setting.editor.optionIndentationGuide(),rf.setting.editor.optionIndentationGuideDescription()),this.addOption("rightToLeft",rf.setting.editor.optionRtl(),rf.setting.editor.optionRtlDescription()),new YI(this.containerEl).setHeading().setName(rf.setting.editor.sectionBehavior());var n=this.app.vault.getConfig("spellcheck"),i=new YI(this.containerEl).setName(rf.setting.editor.optionSpellcheck()).setDesc(rf.setting.editor.optionSpellcheckDescription());Lt.isDesktopApp&&rB.enable&&i.addExtraButton((function(t){return t.onClick((function(){new R0(e.app).open()}))})),i.addToggle((function(t){return t.setValue(n).onChange((function(t){return e.app.vault.setConfig("spellcheck",t)}))})),Lt.isDesktopApp&&rB.enable&&Ot((function(t){var n=t.remote.getCurrentWebContents().session,i=new YI(e.containerEl).setName(rf.setting.editor.spellcheckLanguages()).setDesc(rf.setting.editor.spellcheckLanguagesDescription());if(ye)i.setDesc(rf.setting.editor.spellcheckLanguagesMacDescription());else{var r=function(){i.clear();var o=n.availableSpellCheckerLanguages,a=e.app.getSpellcheckLanguages(),s=i.controlEl.createDiv("setting-command-hotkeys");if(a){var l=a.map((function(e){return{lang:e,display:o.contains(e)?of(e):of(e)+" (Not available)"}}));l.sort((function(e,t){return JL(e.display,t.display)}));for(var c=function(t,n){s.createSpan({cls:"setting-hotkey",text:n}).createSpan("setting-hotkey-icon",(function(n){gb(n,"lucide-x"),n.addEventListener("click",(function(){e.app.setSpellcheckLanguages(a.filter((function(e){return e!==t}))),r()}))}))},u=0,h=l;u<h.length;u++){var p=h[u];c(p.lang,p.display)}var d=i.controlEl.createSpan("clickable-icon setting-restore-hotkey-button");gb(d,"lucide-rotate-ccw"),d.addEventListener("click",(function(){e.app.setSpellcheckLanguages(null),r()}))}else s.createSpan({cls:"setting-hotkey",text:of(t.remote.app.getLocale())});i.addDropdown((function(n){n.selectEl.style.width="80px",n.addOption("","+");var i=o.map((function(e){return{lang:e,display:of(e)}}));i.sort((function(e,t){return JL(e.display,t.display)}));for(var s=0,l=i;s<l.length;s++){var c=l[s],u=c.lang,h=c.display;n.addOption(u,h)}n.onChange((function(n){if(n){if(a||(a=[t.remote.app.getLocale()]),a.contains(n))return void r();a.push(n),e.app.setSpellcheckLanguages(a),r()}}))}))};r()}})),this.addOption("autoPairBrackets",rf.setting.editor.optionAutoPairBrackets(),rf.setting.editor.optionAutoPairBracketsDescription()),this.addOption("autoPairMarkdown",rf.setting.editor.optionAutoPairMarkdown(),rf.setting.editor.optionAutoPairMarkdownDescription()),this.addOption("smartIndentList",rf.setting.editor.optionSmartIndentLists(),rf.setting.editor.optionSmartIndentListsDescription()),this.addOption("useTab",rf.setting.editor.optionUseTabs(),rf.setting.editor.optionUseTabsDescription()),new YI(this.containerEl).setName(rf.setting.editor.optionTabSize()).setDesc(rf.setting.editor.optionTabSizeDescription()).addSlider((function(t){return t.setLimits(2,8,1).setValue(e.app.vault.getConfig("tabSize")).setDynamicTooltip().onChange((function(t){e.app.vault.setConfig("tabSize",t)}))})),new YI(this.containerEl).setHeading().setName(rf.setting.about.optionAdvanced()),this.addOption("autoConvertHtml",rf.setting.editor.optionAutoConvertHtml(),rf.setting.editor.optionAutoConvertHtmlDescription()),ye&&!t&&this.addOption("emacsyKeys",rf.setting.editor.optionEmacsyKeys(),rf.setting.editor.optionEmacsyKeysDescription());var r,o=Lt.isMobile?!!localStorage.getItem("vim"):this.app.vault.getConfig("vimMode");(new YI(this.containerEl).setName(rf.setting.editor.optionVimKeyBindings()).setDesc(createFragment((function(e){e.appendText(rf.setting.editor.optionVimKeyBindingsDescription()),Lt.isMobile&&(e.createEl("br"),e.appendText(rf.setting.editor.optionVimKeyBindingsMobile()))}))).addToggle((function(t){return t.setValue(o).onChange((function(n){e.passedVimTest||!0!==n?Lt.isMobile?(n?localStorage.setItem("vim","true"):localStorage.removeItem("vim"),e.app.workspace.updateOptions()):e.app.vault.setConfig("vimMode",n):(t.setValue(!1),e.startVimTest(t))}))})),Lt.isDesktopApp)&&new YI(this.containerEl).setName(rf.setting.editor.optionLegacyEditor()).setDesc(createFragment((function(e){e.appendText(rf.setting.editor.optionLegacyEditorDescription2()),e.createEl("br"),e.createSpan({cls:"mod-warning",text:rf.setting.msgRestartRequired()})}))).addButton((function(t){r=t,t.setCta().setButtonText(rf.setting.about.buttonRelaunch()).onClick((function(){return v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.saveConfig()];case 1:return e.sent(),window.location.reload(),[2]}}))}))})),t.buttonEl.hide()})).addToggle((function(t){return t.setValue(e.app.vault.getConfig("legacyEditor")).onChange((function(t){var n=e.app.appId+"-legacyDeprecation";localStorage.setItem(n,"true"),e.app.vault.setConfig("legacyEditor",t),r.buttonEl.show()}))}))},t.prototype.addOption=function(e,t,n){var i=this;new YI(this.containerEl).setName(t).setDesc(n).addToggle((function(t){return t.setValue(i.app.vault.getConfig(e)).onChange((function(t){return i.app.vault.setConfig(e,t)}))}))},t.prototype.startVimTest=function(e){var t,n=this,i=createFragment(),r=function(){var i=t.value.toLowerCase();""===i?new CI(rf.setting.editor.msgVimModePleaseEnterCommand()):i.startsWith(":q")?(n.passedVimTest=!0,e.setValue(!0),o.close(),new CI(rf.setting.editor.msgVimModeEnabled())):new CI(rf.setting.editor.msgVimModeNotEnabled())},o=new PI(this.app);i.createEl("p",{cls:"mod-warning",text:rf.setting.editor.labelVimWarning()}),i.createEl("p",{text:rf.setting.editor.labelVimTest()}),i.createEl("p",{},(function(e){e.createEl("label",{cls:"input-label",text:rf.setting.editor.labelVimYourAnswer()}),(t=e.createEl("input",{type:"text"})).setAttribute("placeholder",rf.setting.editor.placeholderEnterCommand()),t.addEventListener("keydown",(function(e){e.isComposing||"Enter"!==e.key||r()}))})),o.setTitle(rf.setting.editor.labelConfirmEnableVim()),o.setContent(i),o.addButton("mod-cta",rf.setting.editor.buttonConfirmEnableVim(),r),o.addCancelButton(),o.open(),t.focus()},t}(_j),R0=function(e){function t(t){var n=e.call(this,t)||this;return n.titleEl.setText(rf.setting.editor.spellcheckDict()),n}return f(t,e),t.prototype.onOpen=function(){this.rerender()},t.prototype.onClose=function(){this.contentEl.empty()},t.prototype.rerender=function(){var e=this,t=this.contentEl;t.empty(),Ot((function(n){return v(e,void 0,void 0,(function(){var e,i,r,o,a,s,l,c=this;return y(this,(function(u){switch(u.label){case 0:return[4,(e=n.remote.getCurrentWebContents().session).listWordsInSpellCheckerDictionary()];case 1:for((i=u.sent()).sort(JL),r=t.createDiv("spellchecker-dictionary-container"),o=function(t){var n=r.createDiv("spellchecker-dictionary-item"),i=n.createDiv("spellchecker-dictionary-remove-button");gb(i,"lucide-x"),aS(i,"Remove from dictionary"),i.addEventListener("click",(function(){e.removeWordFromSpellCheckerDictionary(t),c.rerender()})),n.createDiv({cls:"spellchecker-dictionary-word",text:t})},a=0,s=i;a<s.length;a++)l=s[a],o(l);return 0===i.length&&t.createEl("p",{text:rf.setting.editor.spellcheckDictEmpty()}),[2]}}))}))}))},t}(LI),H0=rf.setting.file,V0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=H0.name(),t.id="file",t.deleteOption=[{value:"system",description:H0.optionChoiceSystemTrash()},{value:"local",description:H0.optionChoiceVaultTrash()},{value:"none",description:H0.optionChoicePermanentDelete()}],t.newNoteLocationOptions=[{value:"root",description:H0.optionChoiceVaultRoot()},{value:"current",description:H0.optionChoiceCurrentFolder()},{value:"folder",description:H0.optionChoiceSpecifiedFolder()}],t.newLinkFormatOptions=[{value:"shortest",description:H0.optionChoiceShortestLinktext()},{value:"relative",description:H0.optionChoiceRelativePath()},{value:"absolute",description:H0.optionChoiceAbsolutePath()}],t.newAttachmentLocationOptions=[{value:"root",description:H0.optionChoiceVaultRoot()},{value:"folder",description:H0.optionChoiceSpecifiedFolder()},{value:"current",description:H0.optionChoiceCurrentFolder()},{value:"subfolder",description:H0.optionChoiceSubdirectory()}],t}return f(t,e),t.prototype.display=function(){var e=this,t=this.app,n=this.containerEl;n.empty(),new YI(n).setName(H0.optionConfirmFileDeletion()).setDesc(H0.optionConfirmFileDeletionDescription()).addToggle((function(n){return n.setValue(t.vault.getConfig("promptDelete")).onChange((function(t){e.app.vault.setConfig("promptDelete",t)}))})),new YI(n).setName(H0.optionDeleteDestination()).setDesc(H0.optionDeleteDestinationDescription()).addDropdown((function(n){n.onChange((function(e){t.vault.setConfig("trashOption",e)}));for(var i=0,r=e.deleteOption;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(t.vault.getConfig("trashOption"))}));var i=t.vault.getConfig("alwaysUpdateLinks");new YI(n).setName(H0.optionAlwaysUpdateLinks()).setDesc(H0.optionAlwaysUpdateLinksDescription()).addToggle((function(t){return t.setValue(i).onChange((function(t){e.app.vault.setConfig("alwaysUpdateLinks",t)}))}));var r,o=function(){p.settingEl.toggle("folder"===r.getValue())};new YI(n).setName(H0.optionNewNoteLocation()).setDesc(H0.optionNewNoteLocationDescription()).addDropdown((function(n){r=n,n.onChange((function(e){t.vault.setConfig("newFileLocation",e),o()}));for(var i=0,a=e.newNoteLocationOptions;i<a.length;i++){var s=a[i];n.addOption(s.value,s.description)}n.setValue(t.vault.getConfig("newFileLocation"))}));var a,s,l,c,u,h=t.vault.getConfig("newFileFolderPath"),p=new YI(n).setName(H0.optionNewFileFolderPath()).setDesc(H0.optionNewFileFolderPathDescription()).addText((function(e){e.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).setValue("/"===h?"":h).onChange((function(e){t.vault.setConfig("newFileFolderPath",e)})),new M$(t,e.inputEl)}));new YI(n).setName(H0.optionLinkAutocompletedFormat()).setDesc(H0.optionLinkAutocompletedFormatDescription()).addDropdown((function(n){n.onChange((function(e){t.vault.setConfig("newLinkFormat",e)}));for(var i=0,r=e.newLinkFormatOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(t.vault.getConfig("newLinkFormat"))})),new YI(n).setName(H0.optionUseWikiLinks()).setDesc(H0.optionUseWikiLinksDescription()).addToggle((function(e){return e.setValue(!t.vault.getConfig("useMarkdownLinks")).onChange((function(e){t.vault.setConfig("useMarkdownLinks",!e)}))})),new YI(n).setName(H0.optionShowUnsupportedFiles()).setDesc(H0.optionShowUnsupportedFilesDescription()).addToggle((function(e){return e.setValue(t.vault.getConfig("showUnsupportedFiles")).onChange((function(e){t.vault.setConfig("showUnsupportedFiles",e)}))}));var d=function(){var e=a.getValue();s.settingEl.toggle("folder"===e),l.settingEl.toggle("subfolder"===e)},f=function(){var e=a.getValue();return"root"===e?"/":"folder"===e?c.getValue():"current"===e?"./":"subfolder"===e?"./"+u.getValue():""};new YI(n).setName(H0.optionNewAttachmentLocation()).setDesc(H0.optionNewAttachmentLocationDescription()).addDropdown((function(n){n.onChange((function(e){d(),t.vault.setConfig("attachmentFolderPath",f())}));for(var i=0,r=e.newAttachmentLocationOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}a=n})),s=new YI(n).setName(H0.optionAttachmentFolderPath()).setDesc(H0.optionAttachmentFolderPathDescription()).addText((function(e){e.setPlaceholder(rf.setting.folderPathExamplePlaceholder()).onChange((function(e){t.vault.setConfig("attachmentFolderPath",f())})),new M$(t,e.inputEl),c=e})),l=new YI(n).setName(H0.optionAttachmentSubfolderPath()).setDesc(H0.optionAttachmentSubfolderPathDescription()).addText((function(e){e.setPlaceholder(H0.optionAttachmentSubfolderPathPlaceholder()).onChange((function(e){t.vault.setConfig("attachmentFolderPath",f())})),u=e}));var g=function(){m.setDesc(createFragment((function(e){e.appendText(H0.optionExcludedFilesDesc());var n=t.vault.getConfig("userIgnoreFilters");if(n&&n.length>0)for(var i=e.createEl("ul"),r=function(e){i.createEl("li","").createSpan({text:e},(function(t){e.length>2&&e.startsWith("/")&&e.endsWith("/")&&t.createSpan({text:"Regex",cls:"flair mod-flat"})}))},o=0,a=n;o<a.length;o++){r(a[o])}})))},m=new YI(n).setName(H0.optionExcludedFiles()).addButton((function(e){return e.setButtonText(rf.interface.buttonManage()).onClick((function(){var e=new z0(t,"",t.vault.getConfig("userIgnoreFilters")||[],(function(e){0===e.length&&(e=null),t.vault.setConfig("userIgnoreFilters",e),g()}));e.setTitle(H0.optionExcludedFiles()),e.open()}))}));g(),o(),function(e){if("/"!==e)if("."!==e&&"./"!==e){if(e.startsWith("./"))return a.setValue("subfolder"),void u.setValue(e.slice(2));a.setValue("folder"),c.setValue(e)}else a.setValue("current");else a.setValue("root")}(t.vault.getConfig("attachmentFolderPath")),d()},t}(_j),z0=function(e){function t(t,n,i,r){var o,a=e.call(this,t)||this;a.setTitle(n),a.values=i,a.descEl=a.contentEl.createEl("p"),a.listEl=a.contentEl.createDiv();var s=function(){var e=o.getValue();if(!e.trim())return iS(o.inputEl,H0.messageEmptyFilter(),{classes:["mod-error"]}),void setTimeout((function(){return rS()}),2e3);a.values.push(e),a.display(),o.setValue("")};return new YI(a.contentEl).setName(H0.labelExcludedFilter()).addText((function(e){o=e,e.setPlaceholder(H0.placeholderExcludedFilter());var n=e.inputEl;n.addEventListener("keydown",(function(e){e.isComposing||"Enter"===e.key&&s()})),new M$(t,n,!0).onSelect((function(e){e&&o.setValue(e.path+"/"),s()}))})).addButton((function(e){return e.setButtonText(rf.interface.buttonAdd()).onClick(s)})),a.addButton("mod-cta",rf.dialogue.buttonSave(),(function(){a.close(),r(a.values)})),a.addCancelButton(),a}return f(t,e),t.prototype.onOpen=function(){this.display()},t.prototype.display=function(){var e=this,t=this,n=t.listEl,i=t.descEl,r=t.values;0===r.length?i.setText(H0.labelNoExcludedFiltersApplied()):i.setText(H0.labelExcludedFiltersApplied()),n.empty();for(var o=function(t){n.createDiv("mobile-option-setting-item",(function(n){n.createSpan({cls:"mobile-option-setting-item-name",text:t},(function(e){t.length>2&&t.startsWith("/")&&t.endsWith("/")&&e.createSpan({text:"Regex",cls:"flair mod-flat"})})),n.createDiv("clickable-icon mobile-option-setting-item-option-icon",(function(n){gb(n,"lucide-x"),aS(n,rf.interface.deleteActionShortName()),n.addEventListener("click",(function(){r.remove(t),e.display()}))}))}))},a=0,s=r;a<s.length;a++){o(s[a])}},t}(PI),q0=rf.setting.mobileToolbar,U0=function(e){function t(t){var n=e.call(this,t)||this;return n.emptyStateText=rf.plugins.commandPalette.labelNoCommands(),n.setPlaceholder(q0.placeholderSelectQuickAction()),n}return f(t,e),t.prototype.getItems=function(){return Object.values(this.app.commands.commands)},t.prototype.getItemText=function(e){return e.name},t.prototype.onChooseItem=function(e){this.app.vault.setConfig("mobilePullAction",e.id)},t}(eG),W0=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.name=q0.name(),i.id="mobile",t.commands.addCommand({id:"mobile:quick-action",name:q0.optionConfigureQuickAction(),icon:"lucide-terminal-square",checkCallback:function(e){if(Lt.isMobile)return e||new U0(t).open(),!0}}),i}return f(t,e),t.prototype.display=function(){var e=this,t=this.app,n=this.containerEl;n.empty();var i=t.vault.getConfig("mobilePullAction"),r=t.commands.findCommand(i);new YI(n).setName(q0.optionConfigureQuickAction()).setDesc(q0.optionConfigureQuickActionDescription({command:r?r.name:""})).addButton((function(e){return e.setButtonText(q0.buttonConfigure()).onClick((function(e){t.commands.executeCommandById("mobile:quick-action",e)}))}));var o=t.commands.commands,a=t.commands.editorCommands,s=t.vault.getConfig("mobileToolbarCommands"),l=Object.keys(a).filter((function(e){return!s.contains(e)})),c=function(){t.vault.setConfig("mobileToolbarCommands",s),e.display()};if(s){new YI(n).setName(q0.manageToolbarOptions()).setHeading();for(var u=n.createDiv(),h=function(e){var t=o[e];u.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-remove-icon",(function(t){gb(t,"lucide-minus-circle"),t.addEventListener("click",(function(){s.contains(e)&&(s.remove(e),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(e){return gb(e,t.icon||"question-mark-glyph")})),n.createSpan({cls:"mobile-option-setting-item-name",text:t.name}),n.createDiv("clickable-icon mobile-option-setting-item-option-icon mobile-option-setting-drag-icon",(function(t){gb(t,"lucide-menu"),aS(t,rf.interface.dragToRearrange()),Et(t,n,u,5,(function(){return null}),(function(t){s.remove(e),s.splice(t,0,e),c()}))}))}))},p=0,d=s=s.filter((function(e){return o[e]}));p<d.length;p++){h(d[p])}}if(l.length>0){new YI(n).setName(q0.optionMoreToolbarOptions()).setHeading();for(var f=function(e){var t=o[e];n.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-add-icon",(function(t){gb(t,"lucide-plus-circle"),t.addEventListener("click",(function(){s.contains(e)||(s.push(e),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(e){return gb(e,t.icon||"question-mark-glyph")})),n.createSpan({text:t.name})}))},g=0,m=l;g<m.length;g++){f(m[g])}}var v=Object.keys(o).filter((function(e){return!a[e]&&!s.contains(e)})).map((function(e){return o[e]}));new YI(n).setName(q0.optionAddCommand()).setDesc(q0.optionAddCommandDescription()).addText((function(t){return t.setPlaceholder(rf.plugins.commandPalette.promptTypeCommand()).then((function(){new V$(e.app,t.inputEl,v,(function(e){var t=e.id;s.contains(t)||(s.push(t),c())}))}))}))},t}(_j),_0=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=rf.setting.builtinPlugins(),t.id="plugins",t}return f(t,e),t.prototype.display=function(){this.render(!0)},t.prototype.render=function(e){var t=this,n=this.app.internalPlugins;this.containerEl.empty();var i=this.containerEl.createDiv("plugin-list-plugins");new YI(i).setName(rf.setting.corePlugin.optionSearchPlugin()).setDesc(rf.setting.corePlugin.optionSearchPluginDescription()).addSearch((function(t){return t.setPlaceholder(rf.setting.corePlugin.placeholderSearchPlugin()).onChange((function(e){return a(e)})).then((function(){e&&!Lt.isMobile&&setTimeout((function(){return t.inputEl.focus()}))}))}));var r=i.createDiv(),o={},a=function(e){r.empty(),new YI(r).setHeading().setName(rf.setting.corePlugin.pluginList());var i=(e=(e||"").trim().toLowerCase()).split(" "),a=n.plugins,s=Object.keys(a).filter((function(e){return!a[e].instance.hiddenFromList}));s.sort((function(e,t){return JL(a[e].instance.name,a[t].instance.name)}));for(var l=function(n){var s,l,c=a[n],u=c.instance,h=null,p=null;if(e&&(h=nL(i,u.name.toLowerCase()),p=nL(i,u.description.toLowerCase()),!h&&!p))return"continue";var d=function(){var e=!1,i=!1;c.enabled&&(e=t.setting.pluginTabs.some((function(e){return e.id===n})),Object.keys(t.app.commands.commands).some((function(e){return e.startsWith(n+":")}))&&(i=!0)),s.extraSettingsEl.toggle(e),l.extraSettingsEl.toggle(i)};new YI(r).setName(createFragment((function(e){return oL(e,u.name,h)}))).setDesc(createFragment((function(e){return oL(e,u.description,p)}))).addExtraButton((function(e){return s=e.setIcon("lucide-settings").setTooltip(rf.setting.options()).onClick((function(){return t.setting.openTabById(n)}))})).addExtraButton((function(e){return l=e.setIcon("lucide-plus-circle").setTooltip(rf.setting.hotkeys.name()).onClick((function(){var e=t.setting.openTabById("hotkeys");e instanceof Xj&&e.setQuery(n)}))})).addToggle((function(e){o[n]=e,e.setValue(c.enabled).onChange((function(e){e?c.enable(!0):c.disable(!0),d()}))})),d()},c=0,u=s;c<u.length;c++){l(u[c])}};a(),n.on("change",(function(){t.updateEnabledState(o,t.app.internalPlugins)}))},t.prototype.updateEnabledState=function(e,t){var n=t.plugins;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i],o=e[i];o&&o.setValue(r.enabled)}},t}(_j),j0=function(e){function t(t){var n=e.call(this,t)||this;return n.settingTabs=[],n.pluginTabs=[],n.activeTab=null,n.lastTabId="",n.modalEl.addClass("mod-settings","mod-sidebar-layout"),n.updateModalTitle(),n.contentEl.addClass("vertical-tabs-container"),n.tabHeadersEl=n.contentEl.createDiv("vertical-tab-header",(function(e){e.createDiv("vertical-tab-header-group",(function(e){e.createDiv({cls:"vertical-tab-header-group-title",text:rf.setting.options()}),n.tabContainer=e.createDiv("vertical-tab-header-group-items")})),e.createDiv("vertical-tab-header-group",(function(e){n.corePluginTabHeaderGroup=e.createDiv({cls:"vertical-tab-header-group-title",text:rf.setting.builtinPlugins()}),n.corePluginTabHeaderGroup.hide(),n.corePluginTabContainer=e.createDiv("vertical-tab-header-group-items")})),e.createDiv("vertical-tab-header-group",(function(e){n.communityPluginTabHeaderGroup=e.createDiv({cls:"vertical-tab-header-group-title",text:rf.setting.thirdPartyPlugin.name()}),n.communityPluginTabHeaderGroup.hide(),n.communityPluginTabContainer=e.createDiv("vertical-tab-header-group-items")}))})),n.tabContentContainer=createDiv("vertical-tab-content-container"),Lt.isMobile&&n.addSettingTab(new W0(t,n)),n.addSettingTab(new N0(t,n)),n.addSettingTab(new V0(t,n)),n.addSettingTab(new O0(t,n)),n.addSettingTab(new Xj(t,n)),n.addSettingTab(new sQ(t,n)),n.addSettingTab(new _0(t,n)),n.addSettingTab(new B0(t,n)),Lt.isMobile&&Qy(n.contentEl,(function(e){if(1===e.points&&"x"===e.direction&&n.activeTab&&!(e.touch.clientX>40)){var t=n.activeTab.containerEl;n.contentEl.prepend(n.tabHeadersEl),Yb(n.tabHeadersEl),e.registerCallback({move:function(n,i){var r=t.offsetWidth,o=Math.clamp((n-e.startX)/r,0,1);t.style.transform="translateX(".concat(o*r,"px)")},cancel:function(){t.style.transform="",n.tabHeadersEl.detach()},finish:function(i,r,o){var a=t.offsetWidth,s=Math.clamp((i-e.startX)/a,0,1);.5*o<a/2?Ie(t,new Te({duration:200*s}).addProp("transform",null,"translateX(0)",""),(function(){n.tabHeadersEl.detach()})):Ie(t,new Te({duration:100*(1-s),fn:"ease-out"}).addProp("transform",null,"translateX(".concat(a,"px)"),""),(function(){t.detach(),n.closeActiveTab()}))}})}})),n}return f(t,e),t.prototype.updateModalTitle=function(e){this.titleEl.empty(),e?this.titleEl.setText(e.name):this.titleEl.setText(rf.interface.settings())},t.prototype.addSettingTab=function(e){var t=this;e.navEl||(e.navEl=createDiv({cls:"vertical-tab-nav-item",text:e.name},(function(n){n.createDiv("vertical-tab-nav-item-chevron",(function(e){return gb(e,"lucide-chevron-right")})),n.addEventListener("click",(function(){t.openTab(e)}))}))),this.isPluginSettingTab(e)?this.pluginTabs.push(e):(this.settingTabs.push(e),this.tabContainer.appendChild(e.navEl)),this.updatePluginSection()},t.prototype.removeSettingTab=function(e){this.pluginTabs.remove(e),this.settingTabs.remove(e);var t=this.activeTab;t&&t===e&&this.closeActiveTab(),this.updatePluginSection()},t.prototype.isPluginSettingTab=function(e){return e instanceof IG||e instanceof PG},t.prototype.updatePluginSection=function(){var e=this.pluginTabs,t=e.filter((function(e){return e instanceof IG})),n=e.filter((function(e){return e instanceof PG}));t.sort((function(e,t){return JL(e.name,t.name)})),this.corePluginTabHeaderGroup.toggle(t.length>0),this.corePluginTabContainer.setChildrenInPlace(t.map((function(e){return e.navEl}))),n.sort((function(e,t){return JL(e.name,t.name)})),this.communityPluginTabHeaderGroup.toggle(n.length>0),this.communityPluginTabContainer.setChildrenInPlace(n.map((function(e){return e.navEl})))},t.prototype.openTab=function(e){var t=this,n=this,i=n.activeTab,r=n.contentEl,o=n.tabContentContainer,a=n.tabHeadersEl;o.empty(),this.updateModalTitle(e),i&&(i.navEl.removeClass("is-active"),i.hide()),this.activeTab=e,this.lastTabId=e.id,e.navEl.addClass("is-active"),o.appendChild(e.containerEl),this.titleEl.createDiv({cls:"modal-setting-back-button",prepend:!0},(function(e){e.addEventListener("click",(function(){return t.closeActiveTab()})),e.createSpan("modal-setting-back-button-icon",(function(e){gb(e,"lucide-arrow-left")}))})),Lt.isPhone&&!i?(Gb(a),Ve(r,o,"right")):r.appendChild(o),e.display()},t.prototype.closeActiveTab=function(){var e=this,t=this,n=t.activeTab,i=t.contentEl,r=t.tabContentContainer,o=t.tabHeadersEl;if(n){var a=function(){r.empty(),n.navEl.removeClass("is-active"),n.hide(),e.updateModalTitle()};Lt.isPhone&&i.isShown()&&this.activeTab.containerEl.isShown()?Ve(i,o,"left",a):(i.setChildrenInPlace([o]),a()),Yb(o),this.activeTab=null}},t.prototype.openTabById=function(e){for(var t=0,n=this.settingTabs;t<n.length;t++){if((o=n[t]).id===e)return this.openTab(o),o}for(var i=0,r=this.pluginTabs;i<r.length;i++){var o;if((o=r[i]).id===e)return this.openTab(o),o}return null},t.prototype.onOpen=function(){e.prototype.onOpen.call(this),Lt.isPhone||this.openTabById(this.lastTabId)||this.openTab(this.settingTabs[0])},t.prototype.onClose=function(){e.prototype.onClose.call(this),this.closeActiveTab()},t}(LI),G0="1.4.16",K0="25.8.1";function Y0(e){return!Nd(G0,e)}Ot((function(e){G0=e.ipcRenderer.sendSync("version")}));var X0=function(e){this.appContainerEl=null,this.horizontalMainContainerEl=null,this.workspaceEl=null,this.statusBarEl=null,this.appContainerEl=e.createDiv("app-container"),this.horizontalMainContainerEl=this.appContainerEl.createDiv("horizontal-main-container"),this.workspaceEl=this.horizontalMainContainerEl.createDiv("workspace"),this.statusBarEl=this.appContainerEl.createDiv("status-bar")};function $0(e){var t=e.frameDom;if(t){var n=e.document.createDocumentFragment();if(!Lt.isMacOS){var i=n.createDiv("titlebar-button mod-logo");i.addEventListener("mousedown",(function(e){return e.preventDefault()})),i.addEventListener("click",(function(){return e.electron.ipcRenderer.send("render-menu")})),i.addEventListener("contextmenu",(function(){return e.electron.ipcRenderer.send("render-menu")}));var r=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 512 512",width:String(e),height:String(e)}),t.innerHTML='<radialGradient id="logo-bottom-left" cx="0" cy="0" gradientTransform="matrix(-59 -225 150 -39 161.4 470)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".4"/><stop offset="1" stop-opacity=".1"/></radialGradient><radialGradient id="logo-top-right" cx="0" cy="0" gradientTransform="matrix(50 -379 280 37 360 374.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".6"/><stop offset="1" stop-color="#fff" stop-opacity=".1"/></radialGradient><radialGradient id="logo-top-left" cx="0" cy="0" gradientTransform="matrix(69 -319 218 47 175.4 307)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".8"/><stop offset="1" stop-color="#fff" stop-opacity=".4"/></radialGradient><radialGradient id="logo-bottom-right" cx="0" cy="0" gradientTransform="matrix(-96 -163 187 -111 335.3 512.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".3"/><stop offset="1" stop-opacity=".3"/></radialGradient><radialGradient id="logo-top-edge" cx="0" cy="0" gradientTransform="matrix(-36 166 -112 -24 310 128.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity="0"/><stop offset="1" stop-color="#fff" stop-opacity=".2"/></radialGradient><radialGradient id="logo-left-edge" cx="0" cy="0" gradientTransform="matrix(88 89 -190 187 111 220.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".4"/></radialGradient><radialGradient id="logo-bottom-edge" cx="0" cy="0" gradientTransform="matrix(9 130 -276 20 215 284)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".3"/></radialGradient><radialGradient id="logo-middle-edge" cx="0" cy="0" gradientTransform="matrix(-198 -104 327 -623 400 399.2)" gradientUnits="userSpaceOnUse" r="1"><stop offset="0" stop-color="#fff" stop-opacity=".2"/><stop offset=".5" stop-color="#fff" stop-opacity=".2"/><stop offset="1" stop-color="#fff" stop-opacity=".3"/></radialGradient><clipPath id="clip"><path d="M.2.2h512v512H.2z"/></clipPath><g clip-path="url(#clip)"><path d="M382.3 475.6c-3.1 23.4-26 41.6-48.7 35.3-32.4-8.9-69.9-22.8-103.6-25.4l-51.7-4a34 34 0 0 1-22-10.2l-89-91.7a34 34 0 0 1-6.7-37.7s55-121 57.1-127.3c2-6.3 9.6-61.2 14-90.6 1.2-7.9 5-15 11-20.3L248 8.9a34.1 34.1 0 0 1 49.6 4.3L386 125.6a37 37 0 0 1 7.6 22.4c0 21.3 1.8 65 13.6 93.2 11.5 27.3 32.5 57 43.5 71.5a17.3 17.3 0 0 1 1.3 19.2 1494 1494 0 0 1-44.8 70.6c-15 22.3-21.9 49.9-25 73.1z" fill="#6c31e3"/><path d="M165.9 478.3c41.4-84 40.2-144.2 22.6-187-16.2-39.6-46.3-64.5-70-80-.6 2.3-1.3 4.4-2.2 6.5L60.6 342a34 34 0 0 0 6.6 37.7l89.1 91.7a34 34 0 0 0 9.6 7z" fill="url(#logo-bottom-left)"/><path d="M278.4 307.8c11.2 1.2 22.2 3.6 32.8 7.6 34 12.7 65 41.2 90.5 96.3 1.8-3.1 3.6-6.2 5.6-9.2a1536 1536 0 0 0 44.8-70.6 17 17 0 0 0-1.3-19.2c-11-14.6-32-44.2-43.5-71.5-11.8-28.2-13.5-72-13.6-93.2 0-8.1-2.6-16-7.6-22.4L297.6 13.2a34 34 0 0 0-1.5-1.7 96 96 0 0 1 2 54 198.3 198.3 0 0 1-17.6 41.3l-7.2 14.2a171 171 0 0 0-19.4 71c-1.2 29.4 4.8 66.4 24.5 115.8z" fill="url(#logo-top-right)"/><path d="M278.4 307.8c-19.7-49.4-25.8-86.4-24.5-115.9a171 171 0 0 1 19.4-71c2.3-4.8 4.8-9.5 7.2-14.1 7.1-13.9 14-27 17.6-41.4a96 96 0 0 0-2-54A34.1 34.1 0 0 0 248 9l-105.4 94.8a34.1 34.1 0 0 0-10.9 20.3l-12.8 85-.5 2.3c23.8 15.5 54 40.4 70.1 80a147 147 0 0 1 7.8 24.8c28-6.8 55.7-11 82.1-8.3z" fill="url(#logo-top-left)"/><path d="M333.6 511c22.7 6.2 45.6-12 48.7-35.4a187 187 0 0 1 19.4-63.9c-25.6-55-56.5-83.6-90.4-96.3-36-13.4-75.2-9-115 .7 8.9 40.4 3.6 93.3-30.4 162.2 4 1.8 8.1 3 12.5 3.3 0 0 24.4 2 53.6 4.1 29 2 72.4 17.1 101.6 25.2z" fill="url(#logo-bottom-right)"/><g clip-rule="evenodd" fill-rule="evenodd"><path d="M254.1 190c-1.3 29.2 2.4 62.8 22.1 112.1l-6.2-.5c-17.7-51.5-21.5-78-20.2-107.6a174.7 174.7 0 0 1 20.4-72c2.4-4.9 8-14.1 10.5-18.8 7.1-13.7 11.9-21 16-33.6 5.7-17.5 4.5-25.9 3.8-34.1 4.6 29.9-12.7 56-25.7 82.4a177.1 177.1 0 0 0-20.7 72z" fill="url(#logo-top-edge)"/><path d="M194.3 293.4c2.4 5.4 4.6 9.8 6 16.5L195 311c-2.1-7.8-3.8-13.4-6.8-20-17.8-42-46.3-63.6-69.7-79.5 28.2 15.2 57.2 39 75.7 81.9z" fill="url(#logo-left-edge)"/><path d="M200.6 315.1c9.8 46-1.2 104.2-33.6 160.9 27.1-56.2 40.2-110.1 29.3-160z" fill="url(#logo-bottom-edge)"/><path d="M312.5 311c53.1 19.9 73.6 63.6 88.9 100-19-38.1-45.2-80.3-90.8-96-34.8-11.8-64.1-10.4-114.3 1l-1.1-5c53.2-12.1 81-13.5 117.3 0z" fill="url(#logo-middle-edge)"/></g></g>',t}(18);r.addClass("logo-full");var o=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttrs({viewBox:"0 0 512 512",width:String(e),height:String(e),fill:"none",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}),t.innerHTML='<path d="M172.7 461.6c73.6-149.1 2.1-217-43.7-246.9m72 96.7c71.6-17.3 141-16.3 189.8 88.5m-114-96.3c-69.6-174 44.6-181 16.3-273.6m97.7 370c1.6-3 3.3-5.8 5.1-8.6 20-29.9 34.2-53.2 41.4-65.3a16 16 0 0 0-1.2-17.7 342.1 342.1 0 0 1-40.2-66.1c-10.9-26-12.5-66.5-12.6-86.2 0-7.4-2.4-14.7-7-20.6l-81.8-104a32 32 0 0 0-1.4-1.5m97.7 370a172.8 172.8 0 0 0-18 59c-2.9 21.5-24 38.4-45 32.6-30-8.3-64.5-21.1-95.7-23.5l-47.8-3.6c-7.7-.6-15-4-20.3-9.5l-82.3-84.8c-9-9.2-11.4-23-6.2-34.8 0 0 51-111.8 52.8-117.7l.7-3M293.1 30a31.5 31.5 0 0 0-44.4-2.3l-97.4 87.5c-5.4 5-9 11.5-10 18.8-3.7 24.5-9.7 68-12.3 80.7"/>',t}(18);o.addClass("logo-wireframe"),i.appendChild(r),i.appendChild(o)}t.leftButtonContainerEl.appendChild(n),t.updateStatus()}}var Z0={"encrypted-media":!0,fullscreen:!0,gamepad:!0,hid:!0,"idle-detection":!0,"oversized-images":!0,"picture-in-picture":!0,"sync-xhr":!0},Q0={"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-presentation":!0,"allow-same-origin":!0,"allow-scripts":!0};DOMPurify.addHook("afterSanitizeAttributes",(function(e){e.instanceOf(HTMLIFrameElement)&&(e.hasAttribute("sandbox")?cM(e,"sandbox"," ",Q0):e.setAttribute("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),e.hasAttribute("allow")&&cM(e,"allow",";",Z0))}));try{document.fonts.load("italic 800 12px Inter"),document.fonts.load("italic 400 12px Inter"),document.fonts.load("italic 12px Inter"),document.fonts.load("800 12px Inter"),document.fonts.load("600 12px Inter"),document.fonts.load("400 12px Inter"),document.fonts.load("300 12px Inter"),document.fonts.load("200 12px Inter")}catch(e){console.error(e)}!function(e){try{var t="";ye?t="mod-macos":be?t="mod-windows":we&&(t="mod-linux"),t&&e.body.addClass(t)}catch(e){console.error(e)}}(document),Yx(),window.addEventListener("touchstart",(function(e){1===e.touches.length&&(yt.sx=e.changedTouches[0].clientX,yt.sy=e.changedTouches[0].clientY,yt.t=Date.now())}),!0),window.addEventListener("touchend",(function(e){0===e.touches.length&&(yt.ex=e.changedTouches[0].clientX,yt.ey=e.changedTouches[0].clientY,yt.t=Date.now())}),!0),document.addEventListener("scroll",(function(){return document.documentElement.scrollTop=0}),{passive:!1});var J0="EmulateMobile",e1=function(){function e(e,t){var n=this;this.appMenuBarManager=null,this.hotkeyManager=null,this.customCss=null,this.embedRegistry=new sF,this.viewRegistry=new ij,this.nextFrameEvents=[],this.nextFrameTimer=null,this.fileManager=null,this.setting=null,this.account=null,this.isMobile=!1,this.mobileToolbar=null,this.mobileNavbar=null,this.shareReceiver=null,this.lastEvent=null,console.log("%cObsidian Developer Console","color:#7f6df2; font-size:40px; font-weight:bold;");var i,r,o=document.body;this.title=document.title,this.appId=t,this.keymap=hw.init(),this.scope=hw.global.getRootScope(),this.commands=new sj(this),this.hotkeyManager=new JT(this),this.dragManager=new uS(this),this.dom=new X0(o),this.customCss=new sG(this),this.loadProgress=new VX,this.shareReceiver=new gY(this),o.addClass("obsidian-app"),localStorage.getItem(J0)&&(Lt.isMobile=!0,Lt.isDesktop=!1,window.frameDom&&window.frameDom.titleBarEl.hide(),i=window.matchMedia("(min-width: 600px) and (min-height: 600px)"),r=function(){Lt.mobileSoftKeyboardVisible||(Lt.isTablet=i.matches,Lt.isPhone=!i.matches,document.body.toggleClass("is-tablet",Lt.isTablet),document.body.toggleClass("is-phone",Lt.isPhone))},i.addEventListener("change",rt(r,10)),r()),this.isMobile=Lt.isMobile,Lt.isMobile&&(o.addClass("is-mobile"),o.createDiv("safe-area-top-cover"),o.style.backgroundColor="var(--background-primary)"),Lt.isMacOS&&document.body.addClass("native-scrollbars"),Lt.isIosApp&&function(){document.body.style["-webkit-touch-callout"]="none";var e=window;e.addEventListener("touchstart",(function(t){if(!(t.touches.length>1)){var n=t.touches[0],i=t.targetNode,r=n.clientX,o=n.clientY,a=n.identifier,s=window.setTimeout((function(){l(),i.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:t.ctrlKey,altKey:t.altKey,metaKey:t.metaKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,bubbles:!0,cancelable:!0,clientX:r,clientY:o}))||navigator.vibrate(200)}),600),l=function(){e.removeEventListener("touchcancel",u,!0),e.removeEventListener("touchend",u,!0),e.removeEventListener("touchmove",h,!0),e.removeEventListener("dragstart",p,!0),window.clearTimeout(s),mt=null};mt=l;var c=function(e,t){var n=t.clientX-r,i=t.clientY-o;n*n+i*i>25&&l()},u=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){if(t[n].identifier===a)return void l()}},h=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){var i=t[n];if(i.identifier===a)return void c(0,i)}},p=function(e){var t=e.targetNode;t&&(t===i||t.contains(i))&&l()};e.addEventListener("touchcancel",u,!0),e.addEventListener("touchend",u,!0),e.addEventListener("touchmove",h,!0),e.addEventListener("dragstart",p,!0)}}))}(),window.ServiceWorkerContainer&&(window.ServiceWorkerContainer.prototype.register=function(){return new Promise((function(){}))}),v(n,void 0,void 0,(function(){var t,n,i=this;return y(this,(function(r){switch(r.label){case 0:t=this.loadProgress,r.label=1;case 1:return r.trys.push([1,3,,4]),t.setMessage(rf.interface.startUp.loadingObsidian()).delayedShow(),[4,this.initializeWithAdapter(e)];case 2:return r.sent(),t.hide(),[3,4];case 3:return n=r.sent(),console.error(n),t.setMessage(rf.interface.startUp.obsidianLoadError()+" "+(n?n.toString():"unknown")),t.el.createEl("button",{cls:"mod-cta",text:rf.interface.startUp.buttonReloadApp()},(function(e){e.style.marginTop="50px",e.onClickEvent((function(){window.location.reload()}))})),this.plugins.isEnabled()&&t.el.createEl("button",{cls:"mod-cta",text:rf.interface.startUp.buttonReloadAppInSafeMode()},(function(e){e.style.marginTop="20px",e.onClickEvent((function(){i.plugins.setEnable(!1),window.location.reload()}))})),t.el.createEl("button",{cls:"mod-cta",text:rf.interface.startUp.buttonOpenAnotherVault()},(function(e){e.style.marginTop="20px",e.onClickEvent((function(){i.openVaultChooser()}))})),[3,4];case 4:return[2]}}))}))}return e.prototype.setAttachmentFolder=function(e){this.vault.setConfig("attachmentFolderPath",e.path);var t=rf.plugins.fileExplorer.msgSetAttachmentFolder({path:e.path});new CI(t)},e.prototype.nextFrame=function(e){this.nextFrameTimer||(this.nextFrameTimer=window.requestAnimationFrame(this.onNextFrame.bind(this))),this.nextFrameEvents.push(e)},e.prototype.nextFramePromise=function(){var e=this;return new Promise((function(t){return e.nextFrame(t)}))},e.prototype.onNextFrame=function(e){this.nextFrameTimer=null;var t=this.nextFrameEvents;this.nextFrameEvents=[];for(var n=0,i=t;n<i.length;n++){(0,i[n])(e)}},e.prototype.nextFrameOnceCallback=function(e){var t=this,n=!1;return function(){n||(n=!0,t.nextFrame((function(t){n=!1,e(t)})))}},e.prototype.initializeWithAdapter=function(t){var n;return v(this,void 0,void 0,(function(){var i,r,o,a,s,l,c,u,h,p,d,f,g,m,b=this;return y(this,(function(w){switch(w.label){case 0:if(this.vault=new Zy(t),this.loadProgress.setMessage(rf.interface.startUp.loadingComponents()),!Lt.isDesktopApp)return[3,4];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,this.vault.readRaw("")];case 2:return w.sent(),[3,4];case 3:return"ENOENT"===(i=w.sent()).code?(this.vault=null,this.openVaultChooser(),window.close(),[2]):(i.code,[3,4]);case 4:return(r=e.getOverrideConfigDir(this.appId))&&this.vault.setConfigDir(r),[4,this.vault.setupConfig()];case 5:return w.sent(),this.disableCssTransition(),this.workspace=new wG(this,this.dom.workspaceEl),this.fileManager=new HB(this),this.statusBar=new d0(this,this.dom.statusBarEl),this.metadataCache=new w_(this,this.vault),this.metadataTypeManager=new gB(this),this.account=new pn,this.setting=new j0(this),this.foldManager=new uK(this),o=function(){"system"===b.vault.getConfig("theme")&&b.adaptToSystemTheme()},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o),!Lt.isDesktopApp||Lt.isMacOS||Lt.isWin||window.electron.remote.nativeTheme.on("updated",o),this.updateAccentColor(),this.updateTheme(),this.updateFontFamily(),this.updateFontSize(),this.customCss.load(),this.updateInlineTitleDisplay(),this.updateViewHeaderDisplay(),window.addEventListener("click",this.onMouseEvent.bind(this),{capture:!0}),window.addEventListener("mousedown",this.onMouseEvent.bind(this),{capture:!0}),this.shareReceiver.setupWorkspace(),this.loadProgress.setMessage(rf.interface.startUp.loadingPlugins()),this.internalPlugins=new GG(this),this.plugins=new FG(this),this.internalPlugins.loadPlugin(new sZ),this.internalPlugins.loadPlugin(new kK),this.internalPlugins.loadPlugin(new sJ),this.internalPlugins.loadPlugin(new UK),this.internalPlugins.loadPlugin(new $G),this.internalPlugins.loadPlugin(new B$),this.internalPlugins.loadPlugin(new AZ),this.internalPlugins.loadPlugin(new KJ),this.internalPlugins.loadPlugin(new GZ),this.internalPlugins.loadPlugin(new VZ),this.internalPlugins.loadPlugin(new K$),this.internalPlugins.loadPlugin(new e0),this.internalPlugins.loadPlugin(new EZ),this.internalPlugins.loadPlugin(new z$),this.internalPlugins.loadPlugin(new hJ),this.internalPlugins.loadPlugin(new X$),this.internalPlugins.loadPlugin(new qY),this.internalPlugins.loadPlugin(new fZ),this.internalPlugins.loadPlugin(new o0),this.internalPlugins.loadPlugin(new uJ),this.internalPlugins.loadPlugin(new RZ),this.internalPlugins.loadPlugin(new l0),this.internalPlugins.loadPlugin(new gJ),this.internalPlugins.loadPlugin(new wY),this.internalPlugins.loadPlugin(new u0),this.internalPlugins.loadPlugin(new uZ),this.internalPlugins.loadPlugin(new oJ),this.internalPlugins.loadPlugin(new _J),Lt.isMobile&&(this.mobileToolbar=new pK(this),this.mobileNavbar=new hK(this)),[4,this.plugins.initialize()];case 6:return w.sent(),[4,this.hotkeyManager.load()];case 7:return w.sent(),this.registerCommands(),[4,this.internalPlugins.enable()];case 8:w.sent(),a=this.vault.getConfig("nativeMenus"),Lt.isMacOS&&null===a&&(a=!0),fw.useNativeMenu=a,this.loadProgress.setMessage(rf.interface.startUp.loadingVault()),w.label=9;case 9:return w.trys.push([9,11,,12]),[4,this.vault.load()];case 10:return w.sent(),[3,12];case 11:throw s=w.sent(),new CI(rf.interface.startUp.msgFailedToLoadVault()+s?s.message:""),console.error(s),s;case 12:return this.vault.on("closed",(function(){b.openVaultChooser(),window.close()})),this.loadProgress.setMessage(rf.interface.startUp.loadingCache()),[4,this.metadataCache.initialize()];case 13:return w.sent(),"Obsidian Sandbox"===this.vault.getName()&&"boolean"!=typeof this.vault.config.legacyEditor&&this.vault.setConfig("legacyEditor",!1),this.vault.getConfig("legacyEditor")||(rB.enable=!0),(Lt.isMobile||rB.enable)&&this.commands.addCommand({id:"editor:toggle-source",name:rf.commands.toggleSourceMode(),icon:"lucide-code-2",allowProperties:!0,editorCheckCallback:function(e,t,n){if(n instanceof iK&&n.editMode&&n.currentMode===n.editMode){if(!e){var i=n.leaf,r=n.getState();r.source=!r.source,i.setViewState({type:nK,state:r,active:!0}),b.workspace.requestSaveLayout()}return!0}}}),Lt.isDesktopApp&&(this.appMenuBarManager=new lK(this)),this.loadProgress.setMessage(rf.interface.startUp.loadingWorkspace()),[4,this.workspace.loadLayout()];case 14:w.sent(),setTimeout((function(){b.enableCssTransition()}),500),this.workspace.registerUriHook(),this.registerQuitHook(),this.metadataCache.showIndexingNotice(),this.shareReceiver.setupNative(),Lt.isDesktopApp&&(l=!1,c=function(){l||(l=!0,new CI(createFragment((function(e){e.createEl("b",{text:rf.interface.labelUpdateAvailable()}),e.createEl("p",{text:rf.setting.about.labelManualUpdateRequired()}),e.createEl("p").createEl("button",{cls:"mod-cta",text:rf.setting.about.labelDownload()}).addEventListener("click",(function(){return window.open(G_())}))})),0))},Nd(zt,K0)&&!electron.ipcRenderer.sendSync("disable-update")?c():(u=function(){Ot((function(e){"update-manual-required"===e.ipcRenderer.sendSync("update")&&(clearInterval(h),c())}))},h=setInterval(u,36e5),u()),Nd(null!==(n=localStorage.getItem("most-recently-installed-version"))&&void 0!==n?n:electron.remote.app.getVersion(),G0)&&(this.showReleaseNotes(),localStorage.setItem("most-recently-installed-version",G0)),setTimeout((function(){lj((function(e){return e.startsWith("shownLivePreview-")}))}),0),p=this.appId+"-legacyDeprecation",!localStorage.getItem(p)&&this.vault.getConfig("legacyEditor")&&((d=new LI(this)).modalEl.addClass("mod-new-editor"),d.setTitle(rf.setting.editor.labelLegacyDeprecation()),d.contentEl.createEl("p",{text:rf.setting.editor.labelLegacyDeprecation_1()}),d.contentEl.createEl("p",{text:rf.setting.editor.labelLegacyDeprecation_2()}),d.contentEl.createEl("hr"),d.contentEl.createEl("p",{cls:"u-center-text",text:rf.setting.editor.labelLegacyDeprecationChoice()}),d.contentEl.createDiv({cls:"card-container"},(function(e){f=e.createDiv({cls:"card is-selected"},(function(e){e.createDiv({cls:"card-title"},(function(e){e.createSpan({cls:"u-pop"},(function(e){gb(e,"lucide-edit")})),e.createSpan({text:" "+rf.plugins.editorStatus.editLivePreview()})})),e.createDiv({cls:"card-description",text:rf.setting.editor.labelLivePreviewDescription()}),e.onClickEvent((function(){f.addClass("is-selected"),g.removeClass("is-selected")}))})),g=e.createDiv({cls:"card"},(function(e){e.createDiv({cls:"card-title"},(function(e){e.createSpan({cls:"u-pop"},(function(e){gb(e,"lucide-code")})),e.createSpan({text:" "+rf.plugins.editorStatus.editSource()})})),e.createDiv({cls:"card-description",text:rf.setting.editor.labelSourceModeDescription()}),e.onClickEvent((function(){g.addClass("is-selected"),f.removeClass("is-selected")}))}))})),d.contentEl.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:rf.setting.editor.buttonStartNewEditor()},(function(e){e.onClickEvent((function(){return v(b,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.vault.setConfig("legacyEditor",!1),this.vault.setConfig("livePreview",f.hasClass("is-selected")),[4,this.vault.saveConfig()];case 1:return e.sent(),window.location.reload(),[2]}}))}))}))}))})),d.open())),w.label=15;case 15:return w.trys.push([15,18,,19]),!(m=this.internalPlugins.getPluginById("sync"))||m.enabled?[3,17]:[4,h_(this.appId+"-sync")];case 16:w.sent(),w.label=17;case 17:return[3,19];case 18:return w.sent(),[3,19];case 19:return[2]}}))}))},e.prototype.registerCommands=function(){var e=this,t=this.commands;t.addCommand({id:"app:go-back",name:rf.commands.navigateBack(),icon:"lucide-arrow-left",checkCallback:function(t){var n=e.workspace.activeLeaf;if(n&&n.view.navigation)return t||n.history.back(),!0},hotkeys:[KT(["Mod","Alt"],"ArrowLeft")]}),t.addCommand({id:"app:go-forward",name:rf.commands.navigateForward(),icon:"lucide-arrow-right",checkCallback:function(t){var n=e.workspace.activeLeaf;if(n&&n.view.navigation)return t||n.history.forward(),!0},hotkeys:[KT(["Mod","Alt"],"ArrowRight")]}),t.addCommand({id:"app:open-vault",name:rf.interface.switchVault(),icon:"vault",callback:this.openVaultChooser.bind(this)}),t.addCommand({id:"theme:use-dark",name:rf.commands.useDarkMode(),callback:function(){return e.changeTheme("obsidian")}}),t.addCommand({id:"theme:use-light",name:rf.commands.useLightMode(),callback:function(){return e.changeTheme("moonstone")}}),t.addCommand({id:"theme:switch",name:rf.commands.changeTheme(),callback:function(){return new lG(e).open()}}),t.addCommand({id:"app:open-settings",name:rf.commands.openSettings(),icon:"lucide-wrench",callback:function(){return e.setting.open()},hotkeys:[KT(["Mod"],",")]}),Lt.isDesktopApp&&t.addCommand({id:"app:show-release-notes",name:rf.commands.showReleaseNotes(),callback:function(){return e.showReleaseNotes()}}),t.addCommand({id:"markdown:toggle-preview",name:rf.commands.togglePreview(),icon:"lucide-book-open",checkCallback:function(t){var n=e.workspace.activeEditor;if(n)return t||n.toggleMode(),!0},hotkeys:[KT(["Mod"],"E")]}),t.addCommand({id:"markdown:add-metadata-property",name:rf.commands.addProperty(),icon:"lucide-plus-circle",checkCallback:function(t){var n,i=e.workspace.activeLeaf.view;if(i instanceof XZ)return t||i.metadataEditor.addProperty(),!0;if(i instanceof iK&&i.canShowProperties())return t||i.addProperty(),!0;var r=e.workspace.activeEditor;if(r&&"md"===(null===(n=r.file)||void 0===n?void 0:n.extension)){var o=e.internalPlugins.getEnabledPluginById("properties");if(o)return t||o.addProperty(r.file),!0}},hotkeys:[KT(["Mod"],";")]}),t.addCommand({id:"markdown:edit-metadata-property",name:rf.commands.editProperty(),icon:"lucide-package-open",checkCallback:function(t){var n=e.workspace.activeEditor;if(n&&n instanceof iK&&n.metadataEditor.focusedLine)return t||n.editProperty(),!0}}),t.addCommand({id:"markdown:clear-metadata-properties",name:rf.commands.clearProperties(),icon:"lucide-package-x",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.vault.process(n,(function(e){var t=0,n=0,i=sx(e);return i&&(t=i.blockFrom,n=i.blockTo),e.slice(0,t)+""+e.slice(n)})),!0}}),t.addCommand({id:"workspace:close",name:rf.commands.closeActiveTab(),icon:"lucide-x",checkCallback:function(t){var n=e.workspace.activeLeaf;return!!(n&&n.view instanceof bI)&&(t||n.detach(),!0)},hotkeys:[KT(["Mod"],"W")]}),t.addCommand({id:"workspace:close-window",name:rf.interface.window.closeWindow(),icon:"lucide-x",callback:function(){activeWindow.close()},hotkeys:[KT(["Mod","Shift"],"W")]}),t.addCommand({id:"workspace:close-others",name:rf.commands.closeOtherTabs(),icon:"lucide-x",checkCallback:function(t){var n=e.workspace.activeLeaf,i=[];if(e.workspace.iterateLeaves(n.getContainer(),(function(e){e!==n&&i.push(e)})),!t)for(var r=0,o=i;r<o.length;r++){o[r].detach()}return i.length>0}}),t.addCommand({id:"workspace:close-tab-group",name:rf.commands.closeTabGroup(),icon:"lucide-x",checkCallback:function(t){var n=e.workspace.getMostRecentLeaf();if(n){if(!t)for(var i=0,r=n.parent.children.slice();i<r.length;i++){var o=r[i];o&&o.canNavigate()&&o.detach()}return!0}}}),t.addCommand({id:"workspace:close-others-tab-group",name:rf.commands.closeOthersInTabGroup(),icon:"lucide-x",checkCallback:function(t){var n=e.workspace.getMostRecentLeaf();if(n&&n.parent.children.length>1){if(!t)for(var i=0,r=n.parent.children.slice();i<r.length;i++){var o=r[i];o&&o!==n&&o.canNavigate()&&o.detach()}return!0}}}),t.addCommand({id:"app:delete-file",name:rf.commands.deleteCurrentFile(),icon:"lucide-trash-2",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.fileManager.promptForFileDeletion(n),!0}}),t.addCommand({id:"app:toggle-left-sidebar",name:rf.commands.toggleLeftSidebar(),checkCallback:function(t){if(activeWindow===window){if(!t){var n=e.workspace.leftSplit;n instanceof Rj?n.togglePinned():n.toggle()}return!0}return!1}}),t.addCommand({id:"app:toggle-right-sidebar",name:rf.commands.toggleRightSidebar(),checkCallback:function(t){if(activeWindow===window){if(!t){var n=e.workspace.rightSplit;n instanceof Rj?n.togglePinned():n.toggle()}return!0}return!1}}),t.addCommand({id:"app:toggle-default-new-pane-mode",name:rf.commands.toggleDefaultNewTabMode(),callback:function(){var t=e.vault.getConfig("defaultViewMode");"source"===t?(e.vault.setConfig("defaultViewMode","preview"),new CI(rf.interface.msgSwitchedToRead())):"preview"===t&&(e.vault.setConfig("defaultViewMode","source"),new CI(rf.interface.msgSwitchedToEdit()))}}),t.addCommand({id:"app:open-help",name:rf.commands.openHelp(),icon:"question-mark-glyph",callback:this.openHelp.bind(this),hotkeys:[KT([],"F1")]}),t.addCommand({id:"app:reload",name:rf.commands.reload(),icon:"lucide-rotate-ccw",callback:function(){return window.location.reload()}}),t.addCommand({id:"app:show-debug-info",name:rf.commands.showDebugInfo(),callback:function(){return new Uj(e).open()}}),Lt.isDesktopApp&&(t.addCommand({id:"app:open-sandbox-vault",name:rf.commands.openSandboxVault(),callback:function(){electron.ipcRenderer.sendSync("sandbox")}}),t.addCommand({id:"window:toggle-always-on-top",name:rf.commands.alwaysOnTop(),checkCallback:function(e){if(activeWindow!==window){var t=activeWindow.electronWindow;if(!t.isMaximized())return e||t.setAlwaysOnTop(!t.isAlwaysOnTop()),!0}return!1}}),t.addCommand({id:"window:zoom-in",name:rf.commands.zoomIn(),callback:function(){var e=electron.webFrame.getZoomLevel();e<3&&electron.webFrame.setZoomLevel(e+.5)}}),t.addCommand({id:"window:zoom-out",name:rf.commands.zoomOut(),callback:function(){var e=electron.webFrame.getZoomLevel();e>-2.5&&electron.webFrame.setZoomLevel(e-.5)}}),t.addCommand({id:"window:reset-zoom",name:rf.commands.resetZoom(),callback:function(){electron.webFrame.setZoomLevel(0)}})),t.addCommand({id:"file-explorer:new-file",name:rf.plugins.fileExplorer.actionCreateNote(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("","tab")},hotkeys:[KT(["Mod"],"N")]}),t.addCommand({id:"file-explorer:new-file-in-current-tab",name:rf.plugins.fileExplorer.actionCreateNoteInCurrentTab(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("",!1)}}),t.addCommand({id:"file-explorer:new-file-in-new-pane",name:rf.plugins.fileExplorer.actionCreateNoteToTheRight(),icon:"lucide-file-plus",callback:function(){return e.fileManager.createAndOpenMarkdownFile("","split")},hotkeys:[KT(["Mod","Shift"],"N")]}),t.addCommand({id:"open-with-default-app:open",name:Lt.isMobileApp?rf.plugins.openWithDefaultApp.actionOpenFileMobile():rf.plugins.openWithDefaultApp.actionOpenFile(),icon:"lucide-arrow-up-right",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.openWithDefaultApp(n.path),!0}}),t.addCommand({id:"file-explorer:move-file",name:rf.plugins.fileExplorer.commandMoveFile(),icon:"lucide-folder-tree",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||new Z$(e,[n]).open(),!0}}),t.addCommand({id:"file-explorer:duplicate-file",name:rf.plugins.fileExplorer.commandMakeACopy(),icon:"lucide-files",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||v(e,void 0,void 0,(function(){var e,t;return y(this,(function(i){switch(i.label){case 0:return e=this.vault.getAvailablePath(se(n.path),n.extension),[4,this.vault.copy(n,e)];case 1:return t=i.sent(),this.workspace.getLeaf("tab").openFile(t,{active:!0,eState:{rename:"all"}}),[2]}}))})),!0}}),Lt.isDesktopApp&&t.addCommand({id:"open-with-default-app:show",name:Lt.isMacOS?rf.plugins.openWithDefaultApp.actionShowInFolderMac():rf.plugins.openWithDefaultApp.actionShowInFolder(),icon:"lucide-files",checkCallback:function(t){var n=e.workspace.getActiveFile();if(n)return t||e.showInFolder(n.path),!0}}),function(e){var t=this,n=e.commands;function i(){var t=e.vault.getConfig("foldHeading"),n=e.vault.getConfig("foldIndent");return t||n}n.addCommand({id:"editor:open-search",name:rf.commands.searchCurrentFile(),icon:"lucide-search",checkCallback:function(t){var n=e.workspace.activeEditor,i=e.workspace.getActiveViewOfType(FO);if(n||i)return t||(n?n.showSearch(!1):i.showSearch()),!0},hotkeys:[KT(["Mod"],"F")]}),n.addCommand({id:"editor:open-search-replace",name:rf.commands.searchReplaceCurrentFile(),icon:"lucide-search",checkCallback:function(t){var n=e.workspace.activeEditor;if(n&&"source"===n.getMode())return t||n.showSearch(!0),!0},hotkeys:[ye?KT(["Mod","Alt"],"F"):KT(["Mod"],"H")]}),n.addCommand({id:"editor:focus",name:rf.commands.focusEditor(),checkCallback:function(t){var n=e.workspace.getActiveViewOfType(iK);if(!n){var i=null;e.workspace.iterateAllLeaves((function(e){e.view instanceof iK&&(!i||i.activeTime<e.activeTime)&&(i=e)})),i&&(n=i.view)}if(n)return t||n.editor.focus(),!0}}),n.addCommand({id:"editor:toggle-fold-properties",name:rf.commands.toggleFoldProperties(),icon:"lucide-diff",checkCallback:function(t){var n=e.workspace.getActiveViewOfType(iK);if(n instanceof iK&&(rB.enable||Lt.isMobile))return t||n.toggleCollapseProperties(),!0}}),n.addCommand({id:"editor:toggle-fold",name:rf.commands.toggleFold(),icon:"lucide-diff",allowProperties:!0,editorCheckCallback:function(e,t,n){var r,o;if(t.hasFocus()){if(i())return e||t.exec("toggleFold"),!0}else if(null===(r=n.metadataHasFocus)||void 0===r?void 0:r.call(n))return e||null===(o=n.toggleCollapseProperties)||void 0===o||o.call(n),!0}}),n.addCommand({id:"editor:fold-all",name:rf.commands.foldAll(),icon:"lucide-minimize-2",allowPreview:!0,allowProperties:!0,editorCheckCallback:function(e,t,n){if(n.collapseProperties&&(e||n.collapseProperties(!0)),i())return n instanceof iK&&"preview"===n.getMode()?(e||n.previewMode.foldAll(),!0):(e||t.exec("foldAll"),!0)}}),n.addCommand({id:"editor:unfold-all",name:rf.commands.unfoldAll(),icon:"lucide-maximize-2",allowPreview:!0,allowProperties:!0,editorCheckCallback:function(e,t,n){if(n.collapseProperties&&(e||n.collapseProperties(!1)),i())return n instanceof iK&&"preview"===n.getMode()?(e||n.previewMode.unfoldAll(),!0):(e||t.exec("unfoldAll"),!0)}}),n.addCommand({id:"editor:fold-less",name:rf("commands.fold-less"),editorCheckCallback:function(t,n){return!e.vault.getConfig("legacyEditor")&&(t||n.foldLess(),!0)}}),n.addCommand({id:"editor:fold-more",name:rf.commands.foldMore(),editorCheckCallback:function(t,n){return!e.vault.getConfig("legacyEditor")&&(t||n.foldMore(),!0)}}),n.addCommand({id:"editor:insert-wikilink",name:rf.setting.mobileToolbar.optionInternalLink(),icon:"bracket-glyph",editorCallback:function(e){return e.triggerWikilink(!1)}}),n.addCommand({id:"editor:insert-embed",name:rf.setting.mobileToolbar.optionInternalEmbed(),icon:"lucide-sticky-note",editorCallback:function(e){return e.triggerWikilink(!0)}}),n.addCommand({id:"editor:insert-link",name:rf.commands.insertLink(),icon:"lucide-link",editorCallback:function(e){return e.insertMarkdownLink()},hotkeys:[KT(["Mod"],"K")]}),n.addCommand({id:"editor:insert-tag",name:rf.setting.mobileToolbar.optionTag(),icon:"lucide-tag",editorCallback:function(e){var t=e.getCursor("from");e.replaceRange("#",t),e.setSelection(kf(t,1))}});var r=!1;n.addCommand({id:"editor:set-heading",name:rf.setting.mobileToolbar.optionHeading(),icon:"heading-glyph",editorCallback:function(e){if(!r){r=!0,Lt.isPhone&&e.blur();for(var t=new fw,n=function(n){var i=0===n?rf.editor.headingSuggestion.labelNoHeading():rf.editor.headingSuggestion.labelHeadingLevel({level:n}),r=0===n?"lucide-type":"lucide-heading-"+n;t.addItem((function(t){return t.setIcon(r).setTitle(i).onClick((function(){return e.setHeading(n)}))}))},i=0,o=[0,1,2,3,4,5,6];i<o.length;i++)n(o[i]);t.onHide((function(){r=!1,Lt.isPhone&&e.focus()}));var a=e.coordsAtPos(e.getCursor());t.showAtPosition({x:a.left,y:a.top})}}}),n.addCommand({id:"editor:set-heading-0",name:rf.commands.removeHeading(),icon:"heading-glyph",editorCallback:function(e){return e.setHeading(0)}});for(var o=function(e){n.addCommand({id:"editor:set-heading-".concat(e),name:rf.commands.toggleHeading({level:e}),icon:"heading-glyph",editorCallback:function(t){return t.setHeading(e)}})},a=0,s=[1,2,3,4,5,6];a<s.length;a++)o(s[a]);n.addCommand({id:"editor:toggle-bold",name:rf.commands.toggleBold(),icon:"lucide-bold",editorCallback:function(e){return e.toggleMarkdownFormatting("bold")},hotkeys:[KT(["Mod"],"B")]}),n.addCommand({id:"editor:toggle-italics",name:rf.commands.toggleItalics(),icon:"lucide-italic",editorCallback:function(e){return e.toggleMarkdownFormatting("italic")},hotkeys:[KT(["Mod"],"I")]}),n.addCommand({id:"editor:toggle-strikethrough",name:rf.setting.mobileToolbar.optionStrikethrough(),icon:"lucide-strikethrough",editorCallback:function(e){return e.toggleMarkdownFormatting("strikethrough")}}),n.addCommand({id:"editor:toggle-highlight",name:rf.commands.toggleHighlight(),icon:"lucide-highlighter",editorCallback:function(e){return e.toggleMarkdownFormatting("highlight")}}),n.addCommand({id:"editor:toggle-code",name:rf.setting.mobileToolbar.optionCode(),icon:"lucide-code-2",editorCallback:function(e){return e.toggleMarkdownFormatting("code")}}),n.addCommand({id:"editor:toggle-inline-math",name:rf.setting.mobileToolbar.optionInlineMath(),icon:"lucide-quote",editorCallback:function(e){return e.toggleMarkdownFormatting("math")}}),n.addCommand({id:"editor:toggle-blockquote",name:rf.setting.mobileToolbar.optionBlockquote(),icon:"lucide-quote",editorCallback:function(e){return e.toggleBlockquote()}}),n.addCommand({id:"editor:toggle-comments",name:rf.commands.toggleComments(),icon:"lucide-percent",editorCallback:function(e){return e.toggleMarkdownFormatting("comment")},hotkeys:[KT(["Mod"],"/")]}),n.addCommand({id:"editor:toggle-bullet-list",name:rf.setting.mobileToolbar.optionBulletList(),icon:"lucide-list",editorCallback:function(e){return e.toggleBulletList()}}),n.addCommand({id:"editor:toggle-numbered-list",name:rf.setting.mobileToolbar.optionNumberedList(),icon:"lucide-list-ordered",editorCallback:function(e){return e.toggleNumberList()}}),n.addCommand({id:"editor:toggle-checklist-status",name:rf.commands.toggleChecklist(),icon:"lucide-check-square",editorCallback:function(e){return e.toggleCheckList()},hotkeys:[KT(["Mod"],"l")]}),n.addCommand({id:"editor:cycle-list-checklist",name:rf.commands.cycleListChecklist(),icon:"lucide-check-square",editorCallback:function(e){return e.toggleCheckList(!0)}}),n.addCommand({id:"editor:insert-callout",name:rf.commands.insertCallout(),icon:"lucide-quote",editorCallback:function(e){return e.insertCallout()}}),n.addCommand({id:"editor:insert-codeblock",name:rf.commands.insertCodeBlock(),icon:"lucide-code",editorCallback:function(e){return e.insertCodeblock()}}),n.addCommand({id:"editor:insert-mathblock",name:rf.commands.insertMathBlock(),icon:"lucide-code",editorCallback:function(e){return e.insertMathBlock()}}),n.addCommand({id:"editor:indent-list",name:rf.setting.mobileToolbar.optionIndentList(),icon:"lucide-indent",mobileOnly:!0,editorCallback:function(e){return e.indentList()}}),n.addCommand({id:"editor:unindent-list",name:rf.setting.mobileToolbar.optionUnindentList(),icon:"lucide-outdent",mobileOnly:!0,editorCallback:function(e){return e.unindentList()}}),n.addCommand({id:"editor:swap-line-up",name:rf.commands.swapLineUp(),icon:"lucide-corner-right-up",repeatable:!0,editorCallback:function(e){return e.exec("swapLineUp")}}),n.addCommand({id:"editor:swap-line-down",name:rf.commands.swapLineDown(),icon:"lucide-corner-right-down",repeatable:!0,editorCallback:function(e){return e.exec("swapLineDown")}}),n.addCommand({id:"editor:undo",name:rf.setting.mobileToolbar.optionUndo(),icon:"lucide-undo-2",mobileOnly:!0,editorCallback:function(e){return e.undo()}}),n.addCommand({id:"editor:redo",name:rf.setting.mobileToolbar.optionRedo(),icon:"lucide-redo-2",mobileOnly:!0,editorCallback:function(e){return e.redo()}}),n.addCommand({id:"editor:move-caret-up",name:rf.setting.mobileToolbar.optionMoveCaretUp(),icon:"lucide-chevron-up",mobileOnly:!0,editorCallback:function(e){return e.exec("goUp")}}),n.addCommand({id:"editor:move-caret-down",name:rf.setting.mobileToolbar.optionMoveCaretDown(),icon:"lucide-chevron-down",mobileOnly:!0,editorCallback:function(e){return e.exec("goDown")}}),n.addCommand({id:"editor:move-caret-left",name:rf.setting.mobileToolbar.optionMoveCaretLeft(),icon:"lucide-chevron-left",mobileOnly:!0,editorCallback:function(e){return e.exec("goLeft")}}),n.addCommand({id:"editor:move-caret-right",name:rf.setting.mobileToolbar.optionMoveCaretRight(),icon:"lucide-chevron-right",mobileOnly:!0,editorCallback:function(e){return e.exec("goRight")}}),n.addCommand({id:"editor:go-start",name:rf.setting.mobileToolbar.optionFirstLine(),icon:"lucide-chevrons-up",mobileOnly:!0,editorCallback:function(e){return e.exec("goStart")}}),n.addCommand({id:"editor:go-end",name:rf.setting.mobileToolbar.optionLastLine(),icon:"lucide-chevrons-down",mobileOnly:!0,editorCallback:function(e){return e.exec("goEnd")}}),n.addCommand({id:"editor:toggle-keyboard",name:rf.setting.mobileToolbar.optionToggleKeyboard(),icon:"keyboard-toggle",mobileOnly:!0,editorCallback:function(e){e.hasFocus()?e.blur():e.focus()}}),n.addCommand({id:"editor:configure-toolbar",name:rf.setting.mobileToolbar.optionConfigureToolbar(),icon:"lucide-wrench",mobileOnly:!0,editorCallback:function(){var t=e.setting;t.openTabById("mobile"),t.open()}}),n.addCommand({id:"editor:attach-file",name:rf.setting.mobileToolbar.optionAttach(),icon:"lucide-paperclip",editorCallback:function(n){var i,r=activeDocument,o=r.body.createEl("input",{type:"file"});o.style.position="fixed",o.style.opacity="0",o.style.zIndex="-9999",o.addEventListener("change",(function(){return v(t,void 0,void 0,(function(){var t,i,r,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:if(a(),!(t=o.files))return s(),[2];if(!(i=e.workspace.getActiveFile()))return s(),[2];d.label=1;case 1:d.trys.push([1,,7,8]),r=0,d.label=2;case 2:return r<t.length?(l=t[r],c=ie(l.name),[4,l.arrayBuffer()]):[3,6];case 3:return u=d.sent(),[4,e.saveAttachment(ae(c),le(c),u)];case 4:(h=d.sent())&&(p=e.fileManager.generateMarkdownLink(h,i.path),n.replaceSelection(p)),d.label=5;case 5:return r++,[3,2];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}}))}))}));var a=function(){r.removeEventListener("focus",l),r.removeEventListener("click",l),clearTimeout(i)},s=function(){o.detach()},l=function(){a(),i=window.setTimeout(s,5e3)};o.focus(),o.click(),setTimeout((function(){r.addEventListener("focus",l),r.addEventListener("click",l)}),0)}}),n.addCommand({id:"editor:delete-paragraph",name:rf.commands.deleteParagraph(),icon:"lucide-scissors",repeatable:!0,editorCallback:function(e){return e.exec("deleteLine")},hotkeys:[KT(["Mod"],"D")]}),n.addCommand({id:"editor:toggle-spellcheck",name:rf.commands.toggleSpellcheck(),callback:function(){e.vault.setConfig("spellcheck",!e.vault.getConfig("spellcheck"))}}),Lt.isMobileApp&&(n.addCommand({id:"editor:cut",name:rf.interface.menu.cut(),icon:"lucide-scissors",editorCallback:function(e){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,window.navigator.clipboard.writeText(e.getSelection())];case 1:return t.sent(),e.replaceSelection(""),[2]}}))}))}}),n.addCommand({id:"editor:copy",name:rf.interface.menu.copy(),icon:"lucide-copy",editorCallback:function(e){return v(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,window.navigator.clipboard.writeText(e.getSelection())];case 1:return[2,t.sent()]}}))}))}}),n.addCommand({id:"editor:paste",name:rf.interface.menu.paste(),icon:"lucide-clipboard-type",editorCallback:function(e){return v(t,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return n=(t=e).replaceSelection,[4,window.navigator.clipboard.readText()];case 1:return[2,n.apply(t,[i.sent()])]}}))}))}})),n.addCommand({id:"editor:context-menu",name:rf.commands.contextMenu(),icon:"lucide-menu",editorCallback:function(e,t){var n,i,r=e.getCursor("head"),o=e.coordsAtPos(r);if(Lt.isDesktopApp){var a=e.containerEl.win.electron.remote.getCurrentWebContents(),s=Math.pow(1.2,a.getZoomLevel()),l=o.left*s,c=(o.top+o.bottom)/2*s;return a.sendInputEvent({type:"mouseDown",x:l,y:c,button:"right"}),void a.sendInputEvent({type:"mouseUp",x:l,y:c,button:"right"})}if(t instanceof iK){var u=t.editMode,h=t.sourceMode;i=null===(n=u||h)||void 0===n?void 0:n.clipboardManager}else i=t.editMode.clipboardManager;i&&i.onContextMenu(new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:0,buttons:0,clientX:o.left,clientY:o.top}),!0)}})}(this),Lt.isDesktopApp&&LA.registerPostProcessor((function(t){return e.fixFileLinks(t)})),LA.registerPostProcessor((function(t){for(var n=function(t){var n=t.parentElement;if(!n)return"continue";if(n.findAll(".copy-code-button").length>0)return"continue";var i=BA(t);i.endsWith("\n")&&(i=i.substr(0,i.length-1)),n.createEl("button",{cls:"copy-code-button",text:rf.interface.menu.copy()}).onClickEvent((function(){return v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText(i)];case 1:return e.sent(),new CI(rf.interface.copied({context:"generic"})),[2]}}))}))}))},i=0,r=t.findAll("pre > code");i<r.length;i++){n(r[i])}}))},e.prototype.disableCssTransition=function(){this.dom.appContainerEl.addClass("no-transition")},e.prototype.enableCssTransition=function(){this.dom.appContainerEl.removeClass("no-transition")},e.prototype.getAppTitle=function(e){return e?e+" - "+this.title:this.title},e.prototype.fixFileLinks=function(e){if(Lt.isDesktopApp)for(var t=0,n=e.findAll("img, audio, video, iframe");t<n.length;t++){var i=n[t];i&&((i.instanceOf(HTMLImageElement)||i.instanceOf(HTMLMediaElement)||i.instanceOf(HTMLIFrameElement))&&i.src.startsWith("file:///")&&(i.src=Lt.resourcePathPrefix+i.src.substring("file:///".length)))}},e.prototype.getTheme=function(){return this.vault.getConfig("theme")},e.prototype.changeTheme=function(e){var t=this;e&&(this.disableCssTransition(),this.vault.setConfig("theme",e),this.updateTheme(),setTimeout((function(){t.enableCssTransition()}),200))},e.prototype.updateTheme=function(){var e=this.vault.getConfig("theme");"system"===e?this.adaptToSystemTheme():this.setTheme(e)},e.prototype.updateInlineTitleDisplay=function(){document.body.toggleClass("show-inline-title",this.vault.getConfig("showInlineTitle"))},e.prototype.updateViewHeaderDisplay=function(){document.body.toggleClass("show-view-header",this.vault.getConfig("showViewHeader"))},e.prototype.updateFontFamily=function(){var e=f0(this.vault.getConfig("interfaceFontFamily"));document.body.style.setProperty("--font-interface-override",g0(e));var t=f0(this.vault.getConfig("textFontFamily"));document.body.style.setProperty("--font-text-override",g0(t)),t?document.body.style.setProperty("--font-print-override",g0(t)):document.body.style.removeProperty("--font-print-override");var n=f0(this.vault.getConfig("monospaceFontFamily"));document.body.style.setProperty("--font-monospace-override",g0(n)),this.workspace.trigger("css-change")},e.prototype.updateFontSize=function(){var e=this.vault.getConfig("baseFontSize");e=Math.clamp(e,10,30),document.body.style.setProperty("--font-text-size","".concat(e,"px")),this.workspace.trigger("css-change")},e.prototype.showReleaseNotes=function(e){Lt.isDesktopApp&&this.workspace.getLeaf(!0).setViewState({type:ej,active:!0,state:{currentVersion:e}})},e.prototype.adaptToSystemTheme=function(){var e=window.matchMedia("(prefers-color-scheme: dark)").matches;!Lt.isDesktopApp||Lt.isMacOS||Lt.isWin||(e=window.electron.remote.nativeTheme.shouldUseDarkColors),e?this.setTheme("obsidian"):this.setTheme("moonstone")},e.prototype.updateAccentColor=function(){var e=this.vault.getConfig("accentColor");this.setAccentColor(e)},e.prototype.getAccentColor=function(){var e,t,n,i=this.vault.getConfig("accentColor"),r=document.body;if(!i){var o=getComputedStyle(r),a=o.getPropertyValue("--accent-h"),s=o.getPropertyValue("--accent-s"),l=o.getPropertyValue("--accent-l");return UI(VI((e=a,n=l,(t=s).endsWith("%")&&(t=t.slice(0,-1)),e.endsWith("%")&&(e=e.slice(0,-1)),{h:parseInt(e),s:parseInt(t),l:parseInt(n)})))}return i},e.prototype.setAccentColor=function(e){var t=document.body;if(this.vault.setConfig("accentColor",e),!e)return t.style.removeProperty("--accent-h"),t.style.removeProperty("--accent-s"),void t.style.removeProperty("--accent-l");var n=WI(e);if(!n)return t.style.removeProperty("--accent-h"),t.style.removeProperty("--accent-s"),void t.style.removeProperty("--accent-l");var i=zI(n),r=i.h,o=i.s,a=i.l;t.style.setProperty("--accent-h",String(r)),t.style.setProperty("--accent-s","".concat(o,"%")),t.style.setProperty("--accent-l","".concat(a,"%")),KI(n)?t.style.setProperty("--text-on-accent","var(--text-on-accent-inverted)"):t.style.removeProperty("--text-on-accent")},e.prototype.setTheme=function(e){var t=document.body,n="obsidian"===e;if(t.toggleClass("theme-light",!n),t.toggleClass("theme-dark",n),this.workspace.trigger("css-change"),Lt.isMobileApp)if(LD.setStyle({style:n?O.Dark:O.Light}),Lt.isAndroidApp){var i=jI("--background-primary");i&&0!==i.a||(i=RI(getComputedStyle(document.body).backgroundColor));var r=i?UI(i):n?"#161616":"#f2f3f5";LD.setBackgroundColor({color:r})}else Lt.isIosApp&&OD.setStyle({style:n?P.Dark:P.Light})},e.prototype.garbleText=function(){this.dom.appContainerEl.addClass("is-text-garbled")},e.prototype.importAttachments=function(e,t){return v(this,void 0,void 0,(function(){var n,i,r,o,a,s,l,c,u,h,p;return y(this,(function(d){switch(d.label){case 0:if(0===e.length)return[2,[]];n=this.vault,i=[],r=0,d.label=1;case 1:return r<e.length?(o=e[r],a=o.name,s=o.extension,l=o.filepath,c=o.data,l&&(h=n.resolveFilePath(l))?(i.push(h),[3,7]):[4,c]):[3,8];case 2:return(u=d.sent())?("Pasted image"===a&&(a+=" "+window.moment().format("YYYYMMDDHHmmss")),h=void 0,t?(p=n.getAvailablePath(t.getParentPrefix()+a,s),[4,n.createBinary(p,u)]):[3,4]):[3,7];case 3:return h=d.sent(),[3,6];case 4:return[4,this.saveAttachment(a,s,u)];case 5:h=d.sent(),d.label=6;case 6:i.push(h),d.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},e.prototype.saveAttachment=function(e,t,n){return v(this,void 0,Promise,(function(){var i,r;return y(this,(function(o){switch(o.label){case 0:return i=this.workspace.getActiveFile(),[4,this.vault.getAvailablePathForAttachments(e,t,i)];case 1:return r=o.sent(),[4,this.vault.createBinary(r,n)];case 2:return[2,o.sent()]}}))}))},e.prototype.onMouseEvent=function(e){var t,n;3!==e.button&&4!==e.button||(e.preventDefault(),e.stopPropagation(),3===e.button?null===(t=this.workspace.activeLeaf)||void 0===t||t.history.back():null===(n=this.workspace.activeLeaf)||void 0===n||n.history.forward())},e.prototype.openVaultChooser=function(){Lt.isDesktopApp?Ot((function(e){e.ipcRenderer.sendSync("starter")})):Lt.isMobileApp&&(localStorage.removeItem("mobile-selected-vault"),setTimeout((function(){location.reload()}),500))},e.prototype.openHelp=function(){Lt.isDesktopApp?Ot((function(e){e.ipcRenderer.sendSync("help")})):window.open("https://help.obsidian.md/","_blank")},e.prototype.openWithDefaultApp=function(e){return v(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(r){switch(r.label){case 0:if(t=this.vault.adapter,Lt.isDesktopApp&&t instanceof Wd&&(n=t.getFullPath(e),Ot((function(e){var t=e.shell;t&&(t.openPath?t.openPath(n):t.openItem(n))}))),!(Lt.isMobileApp&&SD&&t instanceof fj))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.open(e)];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),new CI(i.message||"Failed to open file"),[3,4];case 4:return[2]}}))}))},e.prototype.showInFolder=function(e){if(Lt.isDesktopApp){var t=this.vault.adapter;if(t instanceof Wd)Kt(t.getFullPath(e))}},e.prototype.getObsidianUrl=function(e){var t=this.vault.getName(),n=fe(e.path);return"obsidian://open?vault="+encodeURIComponent(t)+"&file="+encodeURIComponent(n)},e.prototype.copyObsidianUrl=function(e){at(this.getObsidianUrl(e)),new CI(rf.interface.copied({item:rf.interface.url()}))},e.prototype.registerQuitHook=function(){var e=this;window.onbeforeunload=function(t){window.onbeforeunload=null;var n=e.workspace;if(n){var i=new _D;n.trigger("quit",i),i.isEmpty()||(t.preventDefault(),t.returnValue="Saving...",e.loadProgress.show().setMessage("Saving..."),v(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,i.promise()];case 1:return e.sent(),window.close(),[2]}}))})))}}},e.prototype.loadLocalStorage=function(e){try{var t=localStorage.getItem(this.appId+"-"+e);if(t)return JSON.parse(t)}catch(e){}return null},e.prototype.saveLocalStorage=function(e,t){try{t?localStorage.setItem(this.appId+"-"+e,JSON.stringify(t)):localStorage.removeItem(this.appId+"-"+e)}catch(e){}},e.prototype.on=function(e,t,n){return this.workspace.on(e,t,n)},e.prototype.emulateMobile=function(e){e?localStorage.EmulateMobile=1:delete localStorage.EmulateMobile,window.location.reload()},e.getOverrideConfigDir=function(e){var t=localStorage.getItem(e+"-config");return t&&String.isString(t)?t:null},e.prototype.getSpellcheckLanguages=function(){var e=this.vault.getConfig("spellcheckLanguages"),t=localStorage.getItem("spellcheck-languages");if(t&&e&&this.vault.setConfig("spellcheckLanguages",null),t)try{var n=JSON.parse(t);Array.isArray(n)&&(e=n)}catch(e){}else localStorage.setItem("spellcheck-languages",JSON.stringify(e));return e},e.prototype.setSpellcheckLanguages=function(e){this.vault.getConfig("spellcheckLanguages")&&this.vault.setConfig("spellcheckLanguages",null),e&&e.length>0?localStorage.setItem("spellcheck-languages",JSON.stringify(e)):localStorage.removeItem("spellcheck-languages"),Lt.isDesktopApp&&Gt(e)},e}();!function(){v(this,void 0,void 0,(function(){var e,t,n,i,r,o,a=this;return y(this,(function(s){switch(s.label){case 0:return Lt.isDesktopApp=!0,Lt.isDesktop=!0,[4,ef];case 1:if(s.sent(),e=It("electron"),t=e.ipcRenderer.sendSync("vault"),n=t.id,!(i=t.path)||!It("original-fs").existsSync(i))return e.ipcRenderer.sendSync("starter"),window.close(),[2];try{r=navigator.clipboard,Object.defineProperty(navigator,"clipboard",{get:function(){return activeWindow===window?r:activeWindow.navigator.clipboard}})}catch(e){}return Lt.isLinux&&window.addEventListener("mousedown",(function(e){if(1===e.button){var t=e.win,n=t.document,i=n.activeElement,r=e,o=!1,a=function(e){if(1===e.button)if(t.removeEventListener("mouseup",a),r.defaultPrevented)e.preventDefault();else if(n.activeElement!==i||o)e.preventDefault();else{var s,l=function(e){e.defaultPrevented||u()},c=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},u=function(){t.removeEventListener("auxclick",l),t.removeEventListener("paste",c,{capture:!0}),t.clearTimeout(s)};t.addEventListener("auxclick",l),t.addEventListener("paste",c,{capture:!0}),s=t.setTimeout(u,100)}};if(t.addEventListener("mouseup",a),i&&i.instanceOf(HTMLElement)&&i!==n.body){var s=e.targetNode;if(i.contains(s)){if(!i.instanceOf(HTMLInputElement))for(;s&&s!==i;){if(s.instanceOf(HTMLElement)){if("false"===s.contentEditable){o=!0;break}if("true"===s.contentEditable)break}s=s.parentElement}}else i.blur()}else o=!0}})),pI(window),$0(window),lI(window),o=new Wd(i),document.title=ie(he(i))+" - Obsidian v"+e.ipcRenderer.sendSync("version"),ready((function(){return v(a,void 0,void 0,(function(){return y(this,(function(e){return window.app=new e1(o,n),[2]}))}))})),[2]}}))}))}()})()})();